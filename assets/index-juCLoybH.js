var J8=Object.defineProperty;var J2=n=>{throw TypeError(n)};var eW=(n,e,t)=>e in n?J8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var gp=(n,e,t)=>eW(n,typeof e!="symbol"?e+"":e,t),S1=(n,e,t)=>e.has(n)||J2("Cannot "+t);var ee=(n,e,t)=>(S1(n,e,"read from private field"),t?t.call(n):e.get(n)),yt=(n,e,t)=>e.has(n)?J2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),tt=(n,e,t,r)=>(S1(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),kt=(n,e,t)=>(S1(n,e,"access private method"),t);var Uy=(n,e,t,r)=>({set _(i){tt(n,e,i,t)},get _(){return ee(n,e,r)}});function tW(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Xf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wB={exports:{}},iS={},TB={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ey=Symbol.for("react.element"),nW=Symbol.for("react.portal"),rW=Symbol.for("react.fragment"),iW=Symbol.for("react.strict_mode"),sW=Symbol.for("react.profiler"),oW=Symbol.for("react.provider"),aW=Symbol.for("react.context"),lW=Symbol.for("react.forward_ref"),cW=Symbol.for("react.suspense"),uW=Symbol.for("react.memo"),hW=Symbol.for("react.lazy"),eI=Symbol.iterator;function dW(n){return n===null||typeof n!="object"?null:(n=eI&&n[eI]||n["@@iterator"],typeof n=="function"?n:null)}var MB={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},EB=Object.assign,CB={};function Kf(n,e,t){this.props=n,this.context=e,this.refs=CB,this.updater=t||MB}Kf.prototype.isReactComponent={};Kf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Kf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function AB(){}AB.prototype=Kf.prototype;function pR(n,e,t){this.props=n,this.context=e,this.refs=CB,this.updater=t||MB}var mR=pR.prototype=new AB;mR.constructor=pR;EB(mR,Kf.prototype);mR.isPureReactComponent=!0;var tI=Array.isArray,RB=Object.prototype.hasOwnProperty,gR={current:null},NB={key:!0,ref:!0,__self:!0,__source:!0};function PB(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)RB.call(e,r)&&!NB.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ey,type:n,key:s,ref:o,props:i,_owner:gR.current}}function fW(n,e){return{$$typeof:ey,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function yR(n){return typeof n=="object"&&n!==null&&n.$$typeof===ey}function pW(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var nI=/\/+/g;function b1(n,e){return typeof n=="object"&&n!==null&&n.key!=null?pW(""+n.key):e.toString(36)}function Dv(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case ey:case nW:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+b1(o,0):r,tI(i)?(t="",n!=null&&(t=n.replace(nI,"$&/")+"/"),Dv(i,e,t,"",function(c){return c})):i!=null&&(yR(i)&&(i=fW(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(nI,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",tI(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+b1(s,a);o+=Dv(s,e,t,l,i)}else if(l=dW(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+b1(s,a++),o+=Dv(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function By(n,e,t){if(n==null)return n;var r=[],i=0;return Dv(n,r,"","",function(s){return e.call(t,s,i++)}),r}function mW(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var yi={current:null},Fv={transition:null},gW={ReactCurrentDispatcher:yi,ReactCurrentBatchConfig:Fv,ReactCurrentOwner:gR};function IB(){throw Error("act(...) is not supported in production builds of React.")}Dt.Children={map:By,forEach:function(n,e,t){By(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return By(n,function(){e++}),e},toArray:function(n){return By(n,function(e){return e})||[]},only:function(n){if(!yR(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Dt.Component=Kf;Dt.Fragment=rW;Dt.Profiler=sW;Dt.PureComponent=pR;Dt.StrictMode=iW;Dt.Suspense=cW;Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gW;Dt.act=IB;Dt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=EB({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gR.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)RB.call(e,l)&&!NB.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ey,type:n.type,key:i,ref:s,props:r,_owner:o}};Dt.createContext=function(n){return n={$$typeof:aW,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:oW,_context:n},n.Consumer=n};Dt.createElement=PB;Dt.createFactory=function(n){var e=PB.bind(null,n);return e.type=n,e};Dt.createRef=function(){return{current:null}};Dt.forwardRef=function(n){return{$$typeof:lW,render:n}};Dt.isValidElement=yR;Dt.lazy=function(n){return{$$typeof:hW,_payload:{_status:-1,_result:n},_init:mW}};Dt.memo=function(n,e){return{$$typeof:uW,type:n,compare:e===void 0?null:e}};Dt.startTransition=function(n){var e=Fv.transition;Fv.transition={};try{n()}finally{Fv.transition=e}};Dt.unstable_act=IB;Dt.useCallback=function(n,e){return yi.current.useCallback(n,e)};Dt.useContext=function(n){return yi.current.useContext(n)};Dt.useDebugValue=function(){};Dt.useDeferredValue=function(n){return yi.current.useDeferredValue(n)};Dt.useEffect=function(n,e){return yi.current.useEffect(n,e)};Dt.useId=function(){return yi.current.useId()};Dt.useImperativeHandle=function(n,e,t){return yi.current.useImperativeHandle(n,e,t)};Dt.useInsertionEffect=function(n,e){return yi.current.useInsertionEffect(n,e)};Dt.useLayoutEffect=function(n,e){return yi.current.useLayoutEffect(n,e)};Dt.useMemo=function(n,e){return yi.current.useMemo(n,e)};Dt.useReducer=function(n,e,t){return yi.current.useReducer(n,e,t)};Dt.useRef=function(n){return yi.current.useRef(n)};Dt.useState=function(n){return yi.current.useState(n)};Dt.useSyncExternalStore=function(n,e,t){return yi.current.useSyncExternalStore(n,e,t)};Dt.useTransition=function(){return yi.current.useTransition()};Dt.version="18.3.1";TB.exports=Dt;var P=TB.exports;const Et=Xf(P),C_=tW({__proto__:null,default:Et},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yW=P,vW=Symbol.for("react.element"),_W=Symbol.for("react.fragment"),xW=Object.prototype.hasOwnProperty,SW=yW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bW={key:!0,ref:!0,__self:!0,__source:!0};function LB(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)xW.call(e,r)&&!bW.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:vW,type:n,key:s,ref:o,props:i,_owner:SW.current}}iS.Fragment=_W;iS.jsx=LB;iS.jsxs=LB;wB.exports=iS;var H=wB.exports,bM={},DB={exports:{}},fs={},FB={exports:{}},OB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,j){var z=L.length;L.push(j);e:for(;0<z;){var K=z-1>>>1,U=L[K];if(0<i(U,j))L[K]=j,L[z]=U,z=K;else break e}}function t(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var j=L[0],z=L.pop();if(z!==j){L[0]=z;e:for(var K=0,U=L.length,te=U>>>1;K<te;){var k=2*(K+1)-1,V=L[k],Q=k+1,le=L[Q];if(0>i(V,z))Q<U&&0>i(le,V)?(L[K]=le,L[Q]=z,K=Q):(L[K]=V,L[k]=z,K=k);else if(Q<U&&0>i(le,z))L[K]=le,L[Q]=z,K=Q;else break e}}return j}function i(L,j){var z=L.sortIndex-j.sortIndex;return z!==0?z:L.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,y=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(L){for(var j=t(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=L)r(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=t(c)}}function x(L){if(y=!1,v(L),!p)if(t(l)!==null)p=!0,D(b);else{var j=t(c);j!==null&&q(x,j.startTime-L)}}function b(L,j){p=!1,y&&(y=!1,m(M),M=-1),f=!0;var z=d;try{for(v(j),h=t(l);h!==null&&(!(h.expirationTime>j)||L&&!E());){var K=h.callback;if(typeof K=="function"){h.callback=null,d=h.priorityLevel;var U=K(h.expirationTime<=j);j=n.unstable_now(),typeof U=="function"?h.callback=U:h===t(l)&&r(l),v(j)}else r(l);h=t(l)}if(h!==null)var te=!0;else{var k=t(c);k!==null&&q(x,k.startTime-j),te=!1}return te}finally{h=null,d=z,f=!1}}var T=!1,w=null,M=-1,A=5,S=-1;function E(){return!(n.unstable_now()-S<A)}function I(){if(w!==null){var L=n.unstable_now();S=L;var j=!0;try{j=w(!0,L)}finally{j?O():(T=!1,w=null)}}else T=!1}var O;if(typeof _=="function")O=function(){_(I)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,R=N.port2;N.port1.onmessage=I,O=function(){R.postMessage(null)}}else O=function(){g(I,0)};function D(L){w=L,T||(T=!0,O())}function q(L,j){M=g(function(){L(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){p||f||(p=!0,D(b))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var z=d;d=j;try{return L()}finally{d=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,j){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=d;d=L;try{return j()}finally{d=z}},n.unstable_scheduleCallback=function(L,j,z){var K=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?K+z:K):z=K,L){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=z+U,L={id:u++,callback:j,priorityLevel:L,startTime:z,expirationTime:U,sortIndex:-1},z>K?(L.sortIndex=z,e(c,L),t(l)===null&&L===t(c)&&(y?(m(M),M=-1):y=!0,q(x,z-K))):(L.sortIndex=U,e(l,L),p||f||(p=!0,D(b))),L},n.unstable_shouldYield=E,n.unstable_wrapCallback=function(L){var j=d;return function(){var z=d;d=j;try{return L.apply(this,arguments)}finally{d=z}}}})(OB);FB.exports=OB;var wW=FB.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TW=P,hs=wW;function ke(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kB=new Set,sg={};function Ju(n,e){mf(n,e),mf(n+"Capture",e)}function mf(n,e){for(sg[n]=e,n=0;n<e.length;n++)kB.add(e[n])}var Za=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wM=Object.prototype.hasOwnProperty,MW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rI={},iI={};function EW(n){return wM.call(iI,n)?!0:wM.call(rI,n)?!1:MW.test(n)?iI[n]=!0:(rI[n]=!0,!1)}function CW(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function AW(n,e,t,r){if(e===null||typeof e>"u"||CW(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function vi(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Br={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Br[n]=new vi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Br[e]=new vi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Br[n]=new vi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Br[n]=new vi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Br[n]=new vi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Br[n]=new vi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Br[n]=new vi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Br[n]=new vi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Br[n]=new vi(n,5,!1,n.toLowerCase(),null,!1,!1)});var vR=/[\-:]([a-z])/g;function _R(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(vR,_R);Br[e]=new vi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(vR,_R);Br[e]=new vi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(vR,_R);Br[e]=new vi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Br[n]=new vi(n,1,!1,n.toLowerCase(),null,!1,!1)});Br.xlinkHref=new vi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Br[n]=new vi(n,1,!1,n.toLowerCase(),null,!0,!0)});function xR(n,e,t,r){var i=Br.hasOwnProperty(e)?Br[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AW(e,t,i,r)&&(t=null),r||i===null?EW(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var al=TW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zy=Symbol.for("react.element"),cd=Symbol.for("react.portal"),ud=Symbol.for("react.fragment"),SR=Symbol.for("react.strict_mode"),TM=Symbol.for("react.profiler"),UB=Symbol.for("react.provider"),BB=Symbol.for("react.context"),bR=Symbol.for("react.forward_ref"),MM=Symbol.for("react.suspense"),EM=Symbol.for("react.suspense_list"),wR=Symbol.for("react.memo"),Ol=Symbol.for("react.lazy"),zB=Symbol.for("react.offscreen"),sI=Symbol.iterator;function yp(n){return n===null||typeof n!="object"?null:(n=sI&&n[sI]||n["@@iterator"],typeof n=="function"?n:null)}var $n=Object.assign,w1;function fm(n){if(w1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);w1=e&&e[1]||""}return`
`+w1+n}var T1=!1;function M1(n,e){if(!n||T1)return"";T1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{T1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?fm(n):""}function RW(n){switch(n.tag){case 5:return fm(n.type);case 16:return fm("Lazy");case 13:return fm("Suspense");case 19:return fm("SuspenseList");case 0:case 2:case 15:return n=M1(n.type,!1),n;case 11:return n=M1(n.type.render,!1),n;case 1:return n=M1(n.type,!0),n;default:return""}}function CM(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ud:return"Fragment";case cd:return"Portal";case TM:return"Profiler";case SR:return"StrictMode";case MM:return"Suspense";case EM:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case BB:return(n.displayName||"Context")+".Consumer";case UB:return(n._context.displayName||"Context")+".Provider";case bR:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case wR:return e=n.displayName||null,e!==null?e:CM(n.type)||"Memo";case Ol:e=n._payload,n=n._init;try{return CM(n(e))}catch{}}return null}function NW(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return CM(e);case 8:return e===SR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $B(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PW(n){var e=$B(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function $y(n){n._valueTracker||(n._valueTracker=PW(n))}function VB(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=$B(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function A_(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function AM(n,e){var t=e.checked;return $n({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function oI(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=fc(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function GB(n,e){e=e.checked,e!=null&&xR(n,"checked",e,!1)}function RM(n,e){GB(n,e);var t=fc(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?NM(n,e.type,t):e.hasOwnProperty("defaultValue")&&NM(n,e.type,fc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function aI(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function NM(n,e,t){(e!=="number"||A_(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var pm=Array.isArray;function Id(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+fc(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function PM(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ke(91));return $n({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function lI(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ke(92));if(pm(t)){if(1<t.length)throw Error(ke(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:fc(t)}}function HB(n,e){var t=fc(e.value),r=fc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function cI(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function WB(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function IM(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?WB(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Vy,jB=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Vy=Vy||document.createElement("div"),Vy.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vy.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function og(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Lm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IW=["Webkit","ms","Moz","O"];Object.keys(Lm).forEach(function(n){IW.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Lm[e]=Lm[n]})});function qB(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Lm.hasOwnProperty(n)&&Lm[n]?(""+e).trim():e+"px"}function XB(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=qB(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var LW=$n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function LM(n,e){if(e){if(LW[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ke(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ke(62))}}function DM(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var FM=null;function TR(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var OM=null,Ld=null,Dd=null;function uI(n){if(n=ry(n)){if(typeof OM!="function")throw Error(ke(280));var e=n.stateNode;e&&(e=cS(e),OM(n.stateNode,n.type,e))}}function KB(n){Ld?Dd?Dd.push(n):Dd=[n]:Ld=n}function YB(){if(Ld){var n=Ld,e=Dd;if(Dd=Ld=null,uI(n),e)for(n=0;n<e.length;n++)uI(e[n])}}function ZB(n,e){return n(e)}function QB(){}var E1=!1;function JB(n,e,t){if(E1)return n(e,t);E1=!0;try{return ZB(n,e,t)}finally{E1=!1,(Ld!==null||Dd!==null)&&(QB(),YB())}}function ag(n,e){var t=n.stateNode;if(t===null)return null;var r=cS(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ke(231,e,typeof t));return t}var kM=!1;if(Za)try{var vp={};Object.defineProperty(vp,"passive",{get:function(){kM=!0}}),window.addEventListener("test",vp,vp),window.removeEventListener("test",vp,vp)}catch{kM=!1}function DW(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Dm=!1,R_=null,N_=!1,UM=null,FW={onError:function(n){Dm=!0,R_=n}};function OW(n,e,t,r,i,s,o,a,l){Dm=!1,R_=null,DW.apply(FW,arguments)}function kW(n,e,t,r,i,s,o,a,l){if(OW.apply(this,arguments),Dm){if(Dm){var c=R_;Dm=!1,R_=null}else throw Error(ke(198));N_||(N_=!0,UM=c)}}function eh(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function e3(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function hI(n){if(eh(n)!==n)throw Error(ke(188))}function UW(n){var e=n.alternate;if(!e){if(e=eh(n),e===null)throw Error(ke(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return hI(i),n;if(s===r)return hI(i),e;s=s.sibling}throw Error(ke(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(ke(189))}}if(t.alternate!==r)throw Error(ke(190))}if(t.tag!==3)throw Error(ke(188));return t.stateNode.current===t?n:e}function t3(n){return n=UW(n),n!==null?n3(n):null}function n3(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=n3(n);if(e!==null)return e;n=n.sibling}return null}var r3=hs.unstable_scheduleCallback,dI=hs.unstable_cancelCallback,BW=hs.unstable_shouldYield,zW=hs.unstable_requestPaint,Zn=hs.unstable_now,$W=hs.unstable_getCurrentPriorityLevel,MR=hs.unstable_ImmediatePriority,i3=hs.unstable_UserBlockingPriority,P_=hs.unstable_NormalPriority,VW=hs.unstable_LowPriority,s3=hs.unstable_IdlePriority,sS=null,Ho=null;function GW(n){if(Ho&&typeof Ho.onCommitFiberRoot=="function")try{Ho.onCommitFiberRoot(sS,n,void 0,(n.current.flags&128)===128)}catch{}}var go=Math.clz32?Math.clz32:jW,HW=Math.log,WW=Math.LN2;function jW(n){return n>>>=0,n===0?32:31-(HW(n)/WW|0)|0}var Gy=64,Hy=4194304;function mm(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function I_(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=mm(a):(s&=o,s!==0&&(r=mm(s)))}else o=t&~i,o!==0?r=mm(o):s!==0&&(r=mm(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-go(e),i=1<<t,r|=n[t],e&=~i;return r}function qW(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XW(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-go(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=qW(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function BM(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function o3(){var n=Gy;return Gy<<=1,!(Gy&4194240)&&(Gy=64),n}function C1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function ty(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-go(e),n[e]=t}function KW(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-go(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function ER(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-go(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var un=0;function a3(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var l3,CR,c3,u3,h3,zM=!1,Wy=[],nc=null,rc=null,ic=null,lg=new Map,cg=new Map,$l=[],YW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fI(n,e){switch(n){case"focusin":case"focusout":nc=null;break;case"dragenter":case"dragleave":rc=null;break;case"mouseover":case"mouseout":ic=null;break;case"pointerover":case"pointerout":lg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cg.delete(e.pointerId)}}function _p(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ry(e),e!==null&&CR(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function ZW(n,e,t,r,i){switch(e){case"focusin":return nc=_p(nc,n,e,t,r,i),!0;case"dragenter":return rc=_p(rc,n,e,t,r,i),!0;case"mouseover":return ic=_p(ic,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return lg.set(s,_p(lg.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,cg.set(s,_p(cg.get(s)||null,n,e,t,r,i)),!0}return!1}function d3(n){var e=hu(n.target);if(e!==null){var t=eh(e);if(t!==null){if(e=t.tag,e===13){if(e=e3(t),e!==null){n.blockedOn=e,h3(n.priority,function(){c3(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ov(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=$M(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);FM=r,t.target.dispatchEvent(r),FM=null}else return e=ry(t),e!==null&&CR(e),n.blockedOn=t,!1;e.shift()}return!0}function pI(n,e,t){Ov(n)&&t.delete(e)}function QW(){zM=!1,nc!==null&&Ov(nc)&&(nc=null),rc!==null&&Ov(rc)&&(rc=null),ic!==null&&Ov(ic)&&(ic=null),lg.forEach(pI),cg.forEach(pI)}function xp(n,e){n.blockedOn===e&&(n.blockedOn=null,zM||(zM=!0,hs.unstable_scheduleCallback(hs.unstable_NormalPriority,QW)))}function ug(n){function e(i){return xp(i,n)}if(0<Wy.length){xp(Wy[0],n);for(var t=1;t<Wy.length;t++){var r=Wy[t];r.blockedOn===n&&(r.blockedOn=null)}}for(nc!==null&&xp(nc,n),rc!==null&&xp(rc,n),ic!==null&&xp(ic,n),lg.forEach(e),cg.forEach(e),t=0;t<$l.length;t++)r=$l[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<$l.length&&(t=$l[0],t.blockedOn===null);)d3(t),t.blockedOn===null&&$l.shift()}var Fd=al.ReactCurrentBatchConfig,L_=!0;function JW(n,e,t,r){var i=un,s=Fd.transition;Fd.transition=null;try{un=1,AR(n,e,t,r)}finally{un=i,Fd.transition=s}}function ej(n,e,t,r){var i=un,s=Fd.transition;Fd.transition=null;try{un=4,AR(n,e,t,r)}finally{un=i,Fd.transition=s}}function AR(n,e,t,r){if(L_){var i=$M(n,e,t,r);if(i===null)k1(n,e,r,D_,t),fI(n,r);else if(ZW(i,n,e,t,r))r.stopPropagation();else if(fI(n,r),e&4&&-1<YW.indexOf(n)){for(;i!==null;){var s=ry(i);if(s!==null&&l3(s),s=$M(n,e,t,r),s===null&&k1(n,e,r,D_,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else k1(n,e,r,null,t)}}var D_=null;function $M(n,e,t,r){if(D_=null,n=TR(r),n=hu(n),n!==null)if(e=eh(n),e===null)n=null;else if(t=e.tag,t===13){if(n=e3(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return D_=n,null}function f3(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($W()){case MR:return 1;case i3:return 4;case P_:case VW:return 16;case s3:return 536870912;default:return 16}default:return 16}}var ec=null,RR=null,kv=null;function p3(){if(kv)return kv;var n,e=RR,t=e.length,r,i="value"in ec?ec.value:ec.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return kv=i.slice(n,1<r?1-r:void 0)}function Uv(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function jy(){return!0}function mI(){return!1}function ps(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jy:mI,this.isPropagationStopped=mI,this}return $n(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=jy)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=jy)},persist:function(){},isPersistent:jy}),e}var Yf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},NR=ps(Yf),ny=$n({},Yf,{view:0,detail:0}),tj=ps(ny),A1,R1,Sp,oS=$n({},ny,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:PR,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Sp&&(Sp&&n.type==="mousemove"?(A1=n.screenX-Sp.screenX,R1=n.screenY-Sp.screenY):R1=A1=0,Sp=n),A1)},movementY:function(n){return"movementY"in n?n.movementY:R1}}),gI=ps(oS),nj=$n({},oS,{dataTransfer:0}),rj=ps(nj),ij=$n({},ny,{relatedTarget:0}),N1=ps(ij),sj=$n({},Yf,{animationName:0,elapsedTime:0,pseudoElement:0}),oj=ps(sj),aj=$n({},Yf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),lj=ps(aj),cj=$n({},Yf,{data:0}),yI=ps(cj),uj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fj(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=dj[n])?!!e[n]:!1}function PR(){return fj}var pj=$n({},ny,{key:function(n){if(n.key){var e=uj[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Uv(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?hj[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:PR,charCode:function(n){return n.type==="keypress"?Uv(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Uv(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),mj=ps(pj),gj=$n({},oS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vI=ps(gj),yj=$n({},ny,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:PR}),vj=ps(yj),_j=$n({},Yf,{propertyName:0,elapsedTime:0,pseudoElement:0}),xj=ps(_j),Sj=$n({},oS,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),bj=ps(Sj),wj=[9,13,27,32],IR=Za&&"CompositionEvent"in window,Fm=null;Za&&"documentMode"in document&&(Fm=document.documentMode);var Tj=Za&&"TextEvent"in window&&!Fm,m3=Za&&(!IR||Fm&&8<Fm&&11>=Fm),_I=" ",xI=!1;function g3(n,e){switch(n){case"keyup":return wj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y3(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var hd=!1;function Mj(n,e){switch(n){case"compositionend":return y3(e);case"keypress":return e.which!==32?null:(xI=!0,_I);case"textInput":return n=e.data,n===_I&&xI?null:n;default:return null}}function Ej(n,e){if(hd)return n==="compositionend"||!IR&&g3(n,e)?(n=p3(),kv=RR=ec=null,hd=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return m3&&e.locale!=="ko"?null:e.data;default:return null}}var Cj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function SI(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!Cj[n.type]:e==="textarea"}function v3(n,e,t,r){KB(r),e=F_(e,"onChange"),0<e.length&&(t=new NR("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Om=null,hg=null;function Aj(n){R3(n,0)}function aS(n){var e=pd(n);if(VB(e))return n}function Rj(n,e){if(n==="change")return e}var _3=!1;if(Za){var P1;if(Za){var I1="oninput"in document;if(!I1){var bI=document.createElement("div");bI.setAttribute("oninput","return;"),I1=typeof bI.oninput=="function"}P1=I1}else P1=!1;_3=P1&&(!document.documentMode||9<document.documentMode)}function wI(){Om&&(Om.detachEvent("onpropertychange",x3),hg=Om=null)}function x3(n){if(n.propertyName==="value"&&aS(hg)){var e=[];v3(e,hg,n,TR(n)),JB(Aj,e)}}function Nj(n,e,t){n==="focusin"?(wI(),Om=e,hg=t,Om.attachEvent("onpropertychange",x3)):n==="focusout"&&wI()}function Pj(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return aS(hg)}function Ij(n,e){if(n==="click")return aS(e)}function Lj(n,e){if(n==="input"||n==="change")return aS(e)}function Dj(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var xo=typeof Object.is=="function"?Object.is:Dj;function dg(n,e){if(xo(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!wM.call(e,i)||!xo(n[i],e[i]))return!1}return!0}function TI(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function MI(n,e){var t=TI(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=TI(t)}}function S3(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?S3(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function b3(){for(var n=window,e=A_();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=A_(n.document)}return e}function LR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Fj(n){var e=b3(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&S3(t.ownerDocument.documentElement,t)){if(r!==null&&LR(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=MI(t,s);var o=MI(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Oj=Za&&"documentMode"in document&&11>=document.documentMode,dd=null,VM=null,km=null,GM=!1;function EI(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;GM||dd==null||dd!==A_(r)||(r=dd,"selectionStart"in r&&LR(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),km&&dg(km,r)||(km=r,r=F_(VM,"onSelect"),0<r.length&&(e=new NR("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=dd)))}function qy(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var fd={animationend:qy("Animation","AnimationEnd"),animationiteration:qy("Animation","AnimationIteration"),animationstart:qy("Animation","AnimationStart"),transitionend:qy("Transition","TransitionEnd")},L1={},w3={};Za&&(w3=document.createElement("div").style,"AnimationEvent"in window||(delete fd.animationend.animation,delete fd.animationiteration.animation,delete fd.animationstart.animation),"TransitionEvent"in window||delete fd.transitionend.transition);function lS(n){if(L1[n])return L1[n];if(!fd[n])return n;var e=fd[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in w3)return L1[n]=e[t];return n}var T3=lS("animationend"),M3=lS("animationiteration"),E3=lS("animationstart"),C3=lS("transitionend"),A3=new Map,CI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tc(n,e){A3.set(n,e),Ju(e,[n])}for(var D1=0;D1<CI.length;D1++){var F1=CI[D1],kj=F1.toLowerCase(),Uj=F1[0].toUpperCase()+F1.slice(1);Tc(kj,"on"+Uj)}Tc(T3,"onAnimationEnd");Tc(M3,"onAnimationIteration");Tc(E3,"onAnimationStart");Tc("dblclick","onDoubleClick");Tc("focusin","onFocus");Tc("focusout","onBlur");Tc(C3,"onTransitionEnd");mf("onMouseEnter",["mouseout","mouseover"]);mf("onMouseLeave",["mouseout","mouseover"]);mf("onPointerEnter",["pointerout","pointerover"]);mf("onPointerLeave",["pointerout","pointerover"]);Ju("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ju("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ju("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ju("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ju("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ju("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bj=new Set("cancel close invalid load scroll toggle".split(" ").concat(gm));function AI(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,kW(r,e,void 0,n),n.currentTarget=null}function R3(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;AI(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;AI(i,a,c),s=l}}}if(N_)throw n=UM,N_=!1,UM=null,n}function bn(n,e){var t=e[XM];t===void 0&&(t=e[XM]=new Set);var r=n+"__bubble";t.has(r)||(N3(e,n,2,!1),t.add(r))}function O1(n,e,t){var r=0;e&&(r|=4),N3(t,n,r,e)}var Xy="_reactListening"+Math.random().toString(36).slice(2);function fg(n){if(!n[Xy]){n[Xy]=!0,kB.forEach(function(t){t!=="selectionchange"&&(Bj.has(t)||O1(t,!1,n),O1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Xy]||(e[Xy]=!0,O1("selectionchange",!1,e))}}function N3(n,e,t,r){switch(f3(e)){case 1:var i=JW;break;case 4:i=ej;break;default:i=AR}t=i.bind(null,e,t,n),i=void 0,!kM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function k1(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=hu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}JB(function(){var c=s,u=TR(t),h=[];e:{var d=A3.get(n);if(d!==void 0){var f=NR,p=n;switch(n){case"keypress":if(Uv(t)===0)break e;case"keydown":case"keyup":f=mj;break;case"focusin":p="focus",f=N1;break;case"focusout":p="blur",f=N1;break;case"beforeblur":case"afterblur":f=N1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=gI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=rj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=vj;break;case T3:case M3:case E3:f=oj;break;case C3:f=xj;break;case"scroll":f=tj;break;case"wheel":f=bj;break;case"copy":case"cut":case"paste":f=lj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=vI}var y=(e&4)!==0,g=!y&&n==="scroll",m=y?d!==null?d+"Capture":null:d;y=[];for(var _=c,v;_!==null;){v=_;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,m!==null&&(x=ag(_,m),x!=null&&y.push(pg(_,x,v)))),g)break;_=_.return}0<y.length&&(d=new f(d,p,null,t,u),h.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",d&&t!==FM&&(p=t.relatedTarget||t.fromElement)&&(hu(p)||p[Qa]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=c,p=p?hu(p):null,p!==null&&(g=eh(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(y=gI,x="onMouseLeave",m="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(y=vI,x="onPointerLeave",m="onPointerEnter",_="pointer"),g=f==null?d:pd(f),v=p==null?d:pd(p),d=new y(x,_+"leave",f,t,u),d.target=g,d.relatedTarget=v,x=null,hu(u)===c&&(y=new y(m,_+"enter",p,t,u),y.target=v,y.relatedTarget=g,x=y),g=x,f&&p)t:{for(y=f,m=p,_=0,v=y;v;v=dh(v))_++;for(v=0,x=m;x;x=dh(x))v++;for(;0<_-v;)y=dh(y),_--;for(;0<v-_;)m=dh(m),v--;for(;_--;){if(y===m||m!==null&&y===m.alternate)break t;y=dh(y),m=dh(m)}y=null}else y=null;f!==null&&RI(h,d,f,y,!1),p!==null&&g!==null&&RI(h,g,p,y,!0)}}e:{if(d=c?pd(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var b=Rj;else if(SI(d))if(_3)b=Lj;else{b=Pj;var T=Nj}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(b=Ij);if(b&&(b=b(n,c))){v3(h,b,t,u);break e}T&&T(n,d,c),n==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&NM(d,"number",d.value)}switch(T=c?pd(c):window,n){case"focusin":(SI(T)||T.contentEditable==="true")&&(dd=T,VM=c,km=null);break;case"focusout":km=VM=dd=null;break;case"mousedown":GM=!0;break;case"contextmenu":case"mouseup":case"dragend":GM=!1,EI(h,t,u);break;case"selectionchange":if(Oj)break;case"keydown":case"keyup":EI(h,t,u)}var w;if(IR)e:{switch(n){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else hd?g3(n,t)&&(M="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(m3&&t.locale!=="ko"&&(hd||M!=="onCompositionStart"?M==="onCompositionEnd"&&hd&&(w=p3()):(ec=u,RR="value"in ec?ec.value:ec.textContent,hd=!0)),T=F_(c,M),0<T.length&&(M=new yI(M,n,null,t,u),h.push({event:M,listeners:T}),w?M.data=w:(w=y3(t),w!==null&&(M.data=w)))),(w=Tj?Mj(n,t):Ej(n,t))&&(c=F_(c,"onBeforeInput"),0<c.length&&(u=new yI("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=w))}R3(h,e)})}function pg(n,e,t){return{instance:n,listener:e,currentTarget:t}}function F_(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ag(n,t),s!=null&&r.unshift(pg(n,s,i)),s=ag(n,e),s!=null&&r.push(pg(n,s,i))),n=n.return}return r}function dh(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function RI(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ag(t,s),l!=null&&o.unshift(pg(t,l,a))):i||(l=ag(t,s),l!=null&&o.push(pg(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var zj=/\r\n?/g,$j=/\u0000|\uFFFD/g;function NI(n){return(typeof n=="string"?n:""+n).replace(zj,`
`).replace($j,"")}function Ky(n,e,t){if(e=NI(e),NI(n)!==e&&t)throw Error(ke(425))}function O_(){}var HM=null,WM=null;function jM(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qM=typeof setTimeout=="function"?setTimeout:void 0,Vj=typeof clearTimeout=="function"?clearTimeout:void 0,PI=typeof Promise=="function"?Promise:void 0,Gj=typeof queueMicrotask=="function"?queueMicrotask:typeof PI<"u"?function(n){return PI.resolve(null).then(n).catch(Hj)}:qM;function Hj(n){setTimeout(function(){throw n})}function U1(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),ug(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);ug(e)}function sc(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function II(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Zf=Math.random().toString(36).slice(2),$o="__reactFiber$"+Zf,mg="__reactProps$"+Zf,Qa="__reactContainer$"+Zf,XM="__reactEvents$"+Zf,Wj="__reactListeners$"+Zf,jj="__reactHandles$"+Zf;function hu(n){var e=n[$o];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Qa]||t[$o]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=II(n);n!==null;){if(t=n[$o])return t;n=II(n)}return e}n=t,t=n.parentNode}return null}function ry(n){return n=n[$o]||n[Qa],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function pd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ke(33))}function cS(n){return n[mg]||null}var KM=[],md=-1;function Mc(n){return{current:n}}function An(n){0>md||(n.current=KM[md],KM[md]=null,md--)}function xn(n,e){md++,KM[md]=n.current,n.current=e}var pc={},ti=Mc(pc),Ni=Mc(!1),Fu=pc;function gf(n,e){var t=n.type.contextTypes;if(!t)return pc;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Pi(n){return n=n.childContextTypes,n!=null}function k_(){An(Ni),An(ti)}function LI(n,e,t){if(ti.current!==pc)throw Error(ke(168));xn(ti,e),xn(Ni,t)}function P3(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ke(108,NW(n)||"Unknown",i));return $n({},t,r)}function U_(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||pc,Fu=ti.current,xn(ti,n),xn(Ni,Ni.current),!0}function DI(n,e,t){var r=n.stateNode;if(!r)throw Error(ke(169));t?(n=P3(n,e,Fu),r.__reactInternalMemoizedMergedChildContext=n,An(Ni),An(ti),xn(ti,n)):An(Ni),xn(Ni,t)}var ba=null,uS=!1,B1=!1;function I3(n){ba===null?ba=[n]:ba.push(n)}function qj(n){uS=!0,I3(n)}function Ec(){if(!B1&&ba!==null){B1=!0;var n=0,e=un;try{var t=ba;for(un=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ba=null,uS=!1}catch(i){throw ba!==null&&(ba=ba.slice(n+1)),r3(MR,Ec),i}finally{un=e,B1=!1}}return null}var gd=[],yd=0,B_=null,z_=0,Es=[],Cs=0,Ou=null,La=1,Da="";function Yc(n,e){gd[yd++]=z_,gd[yd++]=B_,B_=n,z_=e}function L3(n,e,t){Es[Cs++]=La,Es[Cs++]=Da,Es[Cs++]=Ou,Ou=n;var r=La;n=Da;var i=32-go(r)-1;r&=~(1<<i),t+=1;var s=32-go(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,La=1<<32-go(e)+i|t<<i|r,Da=s+n}else La=1<<s|t<<i|r,Da=n}function DR(n){n.return!==null&&(Yc(n,1),L3(n,1,0))}function FR(n){for(;n===B_;)B_=gd[--yd],gd[yd]=null,z_=gd[--yd],gd[yd]=null;for(;n===Ou;)Ou=Es[--Cs],Es[Cs]=null,Da=Es[--Cs],Es[Cs]=null,La=Es[--Cs],Es[Cs]=null}var ls=null,as=null,In=!1,oo=null;function D3(n,e){var t=Ns(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function FI(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ls=n,as=sc(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ls=n,as=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ou!==null?{id:La,overflow:Da}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ns(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ls=n,as=null,!0):!1;default:return!1}}function YM(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ZM(n){if(In){var e=as;if(e){var t=e;if(!FI(n,e)){if(YM(n))throw Error(ke(418));e=sc(t.nextSibling);var r=ls;e&&FI(n,e)?D3(r,t):(n.flags=n.flags&-4097|2,In=!1,ls=n)}}else{if(YM(n))throw Error(ke(418));n.flags=n.flags&-4097|2,In=!1,ls=n}}}function OI(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ls=n}function Yy(n){if(n!==ls)return!1;if(!In)return OI(n),In=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!jM(n.type,n.memoizedProps)),e&&(e=as)){if(YM(n))throw F3(),Error(ke(418));for(;e;)D3(n,e),e=sc(e.nextSibling)}if(OI(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ke(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){as=sc(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}as=null}}else as=ls?sc(n.stateNode.nextSibling):null;return!0}function F3(){for(var n=as;n;)n=sc(n.nextSibling)}function yf(){as=ls=null,In=!1}function OR(n){oo===null?oo=[n]:oo.push(n)}var Xj=al.ReactCurrentBatchConfig;function bp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ke(309));var r=t.stateNode}if(!r)throw Error(ke(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(ke(284));if(!t._owner)throw Error(ke(290,n))}return n}function Zy(n,e){throw n=Object.prototype.toString.call(e),Error(ke(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function kI(n){var e=n._init;return e(n._payload)}function O3(n){function e(m,_){if(n){var v=m.deletions;v===null?(m.deletions=[_],m.flags|=16):v.push(_)}}function t(m,_){if(!n)return null;for(;_!==null;)e(m,_),_=_.sibling;return null}function r(m,_){for(m=new Map;_!==null;)_.key!==null?m.set(_.key,_):m.set(_.index,_),_=_.sibling;return m}function i(m,_){return m=cc(m,_),m.index=0,m.sibling=null,m}function s(m,_,v){return m.index=v,n?(v=m.alternate,v!==null?(v=v.index,v<_?(m.flags|=2,_):v):(m.flags|=2,_)):(m.flags|=1048576,_)}function o(m){return n&&m.alternate===null&&(m.flags|=2),m}function a(m,_,v,x){return _===null||_.tag!==6?(_=j1(v,m.mode,x),_.return=m,_):(_=i(_,v),_.return=m,_)}function l(m,_,v,x){var b=v.type;return b===ud?u(m,_,v.props.children,x,v.key):_!==null&&(_.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ol&&kI(b)===_.type)?(x=i(_,v.props),x.ref=bp(m,_,v),x.return=m,x):(x=Wv(v.type,v.key,v.props,null,m.mode,x),x.ref=bp(m,_,v),x.return=m,x)}function c(m,_,v,x){return _===null||_.tag!==4||_.stateNode.containerInfo!==v.containerInfo||_.stateNode.implementation!==v.implementation?(_=q1(v,m.mode,x),_.return=m,_):(_=i(_,v.children||[]),_.return=m,_)}function u(m,_,v,x,b){return _===null||_.tag!==7?(_=Cu(v,m.mode,x,b),_.return=m,_):(_=i(_,v),_.return=m,_)}function h(m,_,v){if(typeof _=="string"&&_!==""||typeof _=="number")return _=j1(""+_,m.mode,v),_.return=m,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zy:return v=Wv(_.type,_.key,_.props,null,m.mode,v),v.ref=bp(m,null,_),v.return=m,v;case cd:return _=q1(_,m.mode,v),_.return=m,_;case Ol:var x=_._init;return h(m,x(_._payload),v)}if(pm(_)||yp(_))return _=Cu(_,m.mode,v,null),_.return=m,_;Zy(m,_)}return null}function d(m,_,v,x){var b=_!==null?_.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:a(m,_,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case zy:return v.key===b?l(m,_,v,x):null;case cd:return v.key===b?c(m,_,v,x):null;case Ol:return b=v._init,d(m,_,b(v._payload),x)}if(pm(v)||yp(v))return b!==null?null:u(m,_,v,x,null);Zy(m,v)}return null}function f(m,_,v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(v)||null,a(_,m,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case zy:return m=m.get(x.key===null?v:x.key)||null,l(_,m,x,b);case cd:return m=m.get(x.key===null?v:x.key)||null,c(_,m,x,b);case Ol:var T=x._init;return f(m,_,v,T(x._payload),b)}if(pm(x)||yp(x))return m=m.get(v)||null,u(_,m,x,b,null);Zy(_,x)}return null}function p(m,_,v,x){for(var b=null,T=null,w=_,M=_=0,A=null;w!==null&&M<v.length;M++){w.index>M?(A=w,w=null):A=w.sibling;var S=d(m,w,v[M],x);if(S===null){w===null&&(w=A);break}n&&w&&S.alternate===null&&e(m,w),_=s(S,_,M),T===null?b=S:T.sibling=S,T=S,w=A}if(M===v.length)return t(m,w),In&&Yc(m,M),b;if(w===null){for(;M<v.length;M++)w=h(m,v[M],x),w!==null&&(_=s(w,_,M),T===null?b=w:T.sibling=w,T=w);return In&&Yc(m,M),b}for(w=r(m,w);M<v.length;M++)A=f(w,m,M,v[M],x),A!==null&&(n&&A.alternate!==null&&w.delete(A.key===null?M:A.key),_=s(A,_,M),T===null?b=A:T.sibling=A,T=A);return n&&w.forEach(function(E){return e(m,E)}),In&&Yc(m,M),b}function y(m,_,v,x){var b=yp(v);if(typeof b!="function")throw Error(ke(150));if(v=b.call(v),v==null)throw Error(ke(151));for(var T=b=null,w=_,M=_=0,A=null,S=v.next();w!==null&&!S.done;M++,S=v.next()){w.index>M?(A=w,w=null):A=w.sibling;var E=d(m,w,S.value,x);if(E===null){w===null&&(w=A);break}n&&w&&E.alternate===null&&e(m,w),_=s(E,_,M),T===null?b=E:T.sibling=E,T=E,w=A}if(S.done)return t(m,w),In&&Yc(m,M),b;if(w===null){for(;!S.done;M++,S=v.next())S=h(m,S.value,x),S!==null&&(_=s(S,_,M),T===null?b=S:T.sibling=S,T=S);return In&&Yc(m,M),b}for(w=r(m,w);!S.done;M++,S=v.next())S=f(w,m,M,S.value,x),S!==null&&(n&&S.alternate!==null&&w.delete(S.key===null?M:S.key),_=s(S,_,M),T===null?b=S:T.sibling=S,T=S);return n&&w.forEach(function(I){return e(m,I)}),In&&Yc(m,M),b}function g(m,_,v,x){if(typeof v=="object"&&v!==null&&v.type===ud&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case zy:e:{for(var b=v.key,T=_;T!==null;){if(T.key===b){if(b=v.type,b===ud){if(T.tag===7){t(m,T.sibling),_=i(T,v.props.children),_.return=m,m=_;break e}}else if(T.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ol&&kI(b)===T.type){t(m,T.sibling),_=i(T,v.props),_.ref=bp(m,T,v),_.return=m,m=_;break e}t(m,T);break}else e(m,T);T=T.sibling}v.type===ud?(_=Cu(v.props.children,m.mode,x,v.key),_.return=m,m=_):(x=Wv(v.type,v.key,v.props,null,m.mode,x),x.ref=bp(m,_,v),x.return=m,m=x)}return o(m);case cd:e:{for(T=v.key;_!==null;){if(_.key===T)if(_.tag===4&&_.stateNode.containerInfo===v.containerInfo&&_.stateNode.implementation===v.implementation){t(m,_.sibling),_=i(_,v.children||[]),_.return=m,m=_;break e}else{t(m,_);break}else e(m,_);_=_.sibling}_=q1(v,m.mode,x),_.return=m,m=_}return o(m);case Ol:return T=v._init,g(m,_,T(v._payload),x)}if(pm(v))return p(m,_,v,x);if(yp(v))return y(m,_,v,x);Zy(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,_!==null&&_.tag===6?(t(m,_.sibling),_=i(_,v),_.return=m,m=_):(t(m,_),_=j1(v,m.mode,x),_.return=m,m=_),o(m)):t(m,_)}return g}var vf=O3(!0),k3=O3(!1),$_=Mc(null),V_=null,vd=null,kR=null;function UR(){kR=vd=V_=null}function BR(n){var e=$_.current;An($_),n._currentValue=e}function QM(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Od(n,e){V_=n,kR=vd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ei=!0),n.firstContext=null)}function ks(n){var e=n._currentValue;if(kR!==n)if(n={context:n,memoizedValue:e,next:null},vd===null){if(V_===null)throw Error(ke(308));vd=n,V_.dependencies={lanes:0,firstContext:n}}else vd=vd.next=n;return e}var du=null;function zR(n){du===null?du=[n]:du.push(n)}function U3(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,zR(e)):(t.next=i.next,i.next=t),e.interleaved=t,Ja(n,r)}function Ja(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var kl=!1;function $R(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function B3(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ga(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function oc(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Gt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ja(n,t)}return i=r.interleaved,i===null?(e.next=e,zR(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ja(n,t)}function Bv(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ER(n,t)}}function UI(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function G_(n,e,t,r){var i=n.updateQueue;kl=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=n,y=a;switch(d=e,f=t,y.tag){case 1:if(p=y.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=$n({},h,d);break e;case 2:kl=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Uu|=o,n.lanes=o,n.memoizedState=h}}function BI(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(ke(191,i));i.call(r)}}}var iy={},Wo=Mc(iy),gg=Mc(iy),yg=Mc(iy);function fu(n){if(n===iy)throw Error(ke(174));return n}function VR(n,e){switch(xn(yg,e),xn(gg,n),xn(Wo,iy),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:IM(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=IM(e,n)}An(Wo),xn(Wo,e)}function _f(){An(Wo),An(gg),An(yg)}function z3(n){fu(yg.current);var e=fu(Wo.current),t=IM(e,n.type);e!==t&&(xn(gg,n),xn(Wo,t))}function GR(n){gg.current===n&&(An(Wo),An(gg))}var On=Mc(0);function H_(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var z1=[];function HR(){for(var n=0;n<z1.length;n++)z1[n]._workInProgressVersionPrimary=null;z1.length=0}var zv=al.ReactCurrentDispatcher,$1=al.ReactCurrentBatchConfig,ku=0,Bn=null,pr=null,Sr=null,W_=!1,Um=!1,vg=0,Kj=0;function zr(){throw Error(ke(321))}function WR(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!xo(n[t],e[t]))return!1;return!0}function jR(n,e,t,r,i,s){if(ku=s,Bn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zv.current=n===null||n.memoizedState===null?Jj:e9,n=t(r,i),Um){s=0;do{if(Um=!1,vg=0,25<=s)throw Error(ke(301));s+=1,Sr=pr=null,e.updateQueue=null,zv.current=t9,n=t(r,i)}while(Um)}if(zv.current=j_,e=pr!==null&&pr.next!==null,ku=0,Sr=pr=Bn=null,W_=!1,e)throw Error(ke(300));return n}function qR(){var n=vg!==0;return vg=0,n}function Po(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?Bn.memoizedState=Sr=n:Sr=Sr.next=n,Sr}function Us(){if(pr===null){var n=Bn.alternate;n=n!==null?n.memoizedState:null}else n=pr.next;var e=Sr===null?Bn.memoizedState:Sr.next;if(e!==null)Sr=e,pr=n;else{if(n===null)throw Error(ke(310));pr=n,n={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},Sr===null?Bn.memoizedState=Sr=n:Sr=Sr.next=n}return Sr}function _g(n,e){return typeof e=="function"?e(n):e}function V1(n){var e=Us(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=n;var r=pr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((ku&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Bn.lanes|=u,Uu|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,xo(r,e.memoizedState)||(Ei=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Bn.lanes|=s,Uu|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function G1(n){var e=Us(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);xo(s,e.memoizedState)||(Ei=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function $3(){}function V3(n,e){var t=Bn,r=Us(),i=e(),s=!xo(r.memoizedState,i);if(s&&(r.memoizedState=i,Ei=!0),r=r.queue,XR(W3.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Sr!==null&&Sr.memoizedState.tag&1){if(t.flags|=2048,xg(9,H3.bind(null,t,r,i,e),void 0,null),Er===null)throw Error(ke(349));ku&30||G3(t,e,i)}return i}function G3(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Bn.updateQueue,e===null?(e={lastEffect:null,stores:null},Bn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function H3(n,e,t,r){e.value=t,e.getSnapshot=r,j3(e)&&q3(n)}function W3(n,e,t){return t(function(){j3(e)&&q3(n)})}function j3(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!xo(n,t)}catch{return!0}}function q3(n){var e=Ja(n,1);e!==null&&yo(e,n,1,-1)}function zI(n){var e=Po();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_g,lastRenderedState:n},e.queue=n,n=n.dispatch=Qj.bind(null,Bn,n),[e.memoizedState,n]}function xg(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Bn.updateQueue,e===null?(e={lastEffect:null,stores:null},Bn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function X3(){return Us().memoizedState}function $v(n,e,t,r){var i=Po();Bn.flags|=n,i.memoizedState=xg(1|e,t,void 0,r===void 0?null:r)}function hS(n,e,t,r){var i=Us();r=r===void 0?null:r;var s=void 0;if(pr!==null){var o=pr.memoizedState;if(s=o.destroy,r!==null&&WR(r,o.deps)){i.memoizedState=xg(e,t,s,r);return}}Bn.flags|=n,i.memoizedState=xg(1|e,t,s,r)}function $I(n,e){return $v(8390656,8,n,e)}function XR(n,e){return hS(2048,8,n,e)}function K3(n,e){return hS(4,2,n,e)}function Y3(n,e){return hS(4,4,n,e)}function Z3(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Q3(n,e,t){return t=t!=null?t.concat([n]):null,hS(4,4,Z3.bind(null,e,n),t)}function KR(){}function J3(n,e){var t=Us();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&WR(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function ez(n,e){var t=Us();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&WR(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function tz(n,e,t){return ku&21?(xo(t,e)||(t=o3(),Bn.lanes|=t,Uu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ei=!0),n.memoizedState=t)}function Yj(n,e){var t=un;un=t!==0&&4>t?t:4,n(!0);var r=$1.transition;$1.transition={};try{n(!1),e()}finally{un=t,$1.transition=r}}function nz(){return Us().memoizedState}function Zj(n,e,t){var r=lc(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},rz(n))iz(e,t);else if(t=U3(n,e,t,r),t!==null){var i=fi();yo(t,n,r,i),sz(t,e,r)}}function Qj(n,e,t){var r=lc(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(rz(n))iz(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,xo(a,o)){var l=e.interleaved;l===null?(i.next=i,zR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=U3(n,e,i,r),t!==null&&(i=fi(),yo(t,n,r,i),sz(t,e,r))}}function rz(n){var e=n.alternate;return n===Bn||e!==null&&e===Bn}function iz(n,e){Um=W_=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function sz(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ER(n,t)}}var j_={readContext:ks,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useInsertionEffect:zr,useLayoutEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useMutableSource:zr,useSyncExternalStore:zr,useId:zr,unstable_isNewReconciler:!1},Jj={readContext:ks,useCallback:function(n,e){return Po().memoizedState=[n,e===void 0?null:e],n},useContext:ks,useEffect:$I,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,$v(4194308,4,Z3.bind(null,e,n),t)},useLayoutEffect:function(n,e){return $v(4194308,4,n,e)},useInsertionEffect:function(n,e){return $v(4,2,n,e)},useMemo:function(n,e){var t=Po();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Po();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Zj.bind(null,Bn,n),[r.memoizedState,n]},useRef:function(n){var e=Po();return n={current:n},e.memoizedState=n},useState:zI,useDebugValue:KR,useDeferredValue:function(n){return Po().memoizedState=n},useTransition:function(){var n=zI(!1),e=n[0];return n=Yj.bind(null,n[1]),Po().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Bn,i=Po();if(In){if(t===void 0)throw Error(ke(407));t=t()}else{if(t=e(),Er===null)throw Error(ke(349));ku&30||G3(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,$I(W3.bind(null,r,s,n),[n]),r.flags|=2048,xg(9,H3.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Po(),e=Er.identifierPrefix;if(In){var t=Da,r=La;t=(r&~(1<<32-go(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=vg++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Kj++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},e9={readContext:ks,useCallback:J3,useContext:ks,useEffect:XR,useImperativeHandle:Q3,useInsertionEffect:K3,useLayoutEffect:Y3,useMemo:ez,useReducer:V1,useRef:X3,useState:function(){return V1(_g)},useDebugValue:KR,useDeferredValue:function(n){var e=Us();return tz(e,pr.memoizedState,n)},useTransition:function(){var n=V1(_g)[0],e=Us().memoizedState;return[n,e]},useMutableSource:$3,useSyncExternalStore:V3,useId:nz,unstable_isNewReconciler:!1},t9={readContext:ks,useCallback:J3,useContext:ks,useEffect:XR,useImperativeHandle:Q3,useInsertionEffect:K3,useLayoutEffect:Y3,useMemo:ez,useReducer:G1,useRef:X3,useState:function(){return G1(_g)},useDebugValue:KR,useDeferredValue:function(n){var e=Us();return pr===null?e.memoizedState=n:tz(e,pr.memoizedState,n)},useTransition:function(){var n=G1(_g)[0],e=Us().memoizedState;return[n,e]},useMutableSource:$3,useSyncExternalStore:V3,useId:nz,unstable_isNewReconciler:!1};function no(n,e){if(n&&n.defaultProps){e=$n({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function JM(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:$n({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var dS={isMounted:function(n){return(n=n._reactInternals)?eh(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=fi(),i=lc(n),s=Ga(r,i);s.payload=e,t!=null&&(s.callback=t),e=oc(n,s,i),e!==null&&(yo(e,n,i,r),Bv(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=fi(),i=lc(n),s=Ga(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=oc(n,s,i),e!==null&&(yo(e,n,i,r),Bv(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=fi(),r=lc(n),i=Ga(t,r);i.tag=2,e!=null&&(i.callback=e),e=oc(n,i,r),e!==null&&(yo(e,n,r,t),Bv(e,n,r))}};function VI(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!dg(t,r)||!dg(i,s):!0}function oz(n,e,t){var r=!1,i=pc,s=e.contextType;return typeof s=="object"&&s!==null?s=ks(s):(i=Pi(e)?Fu:ti.current,r=e.contextTypes,s=(r=r!=null)?gf(n,i):pc),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dS,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function GI(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&dS.enqueueReplaceState(e,e.state,null)}function eE(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},$R(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ks(s):(s=Pi(e)?Fu:ti.current,i.context=gf(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(JM(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&dS.enqueueReplaceState(i,i.state,null),G_(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function xf(n,e){try{var t="",r=e;do t+=RW(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function H1(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function tE(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var n9=typeof WeakMap=="function"?WeakMap:Map;function az(n,e,t){t=Ga(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){X_||(X_=!0,hE=r),tE(n,e)},t}function lz(n,e,t){t=Ga(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){tE(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){tE(n,e),typeof r!="function"&&(ac===null?ac=new Set([this]):ac.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function HI(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new n9;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=g9.bind(null,n,e,t),e.then(n,n))}function WI(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function jI(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ga(-1,1),e.tag=2,oc(t,e,1))),t.lanes|=1),n)}var r9=al.ReactCurrentOwner,Ei=!1;function ci(n,e,t,r){e.child=n===null?k3(e,null,t,r):vf(e,n.child,t,r)}function qI(n,e,t,r,i){t=t.render;var s=e.ref;return Od(e,i),r=jR(n,e,t,r,s,i),t=qR(),n!==null&&!Ei?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,el(n,e,i)):(In&&t&&DR(e),e.flags|=1,ci(n,e,r,i),e.child)}function XI(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!rN(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,cz(n,e,s,r,i)):(n=Wv(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:dg,t(o,r)&&n.ref===e.ref)return el(n,e,i)}return e.flags|=1,n=cc(s,r),n.ref=e.ref,n.return=e,e.child=n}function cz(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(dg(s,r)&&n.ref===e.ref)if(Ei=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Ei=!0);else return e.lanes=n.lanes,el(n,e,i)}return nE(n,e,t,r,i)}function uz(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xn(xd,is),is|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,xn(xd,is),is|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,xn(xd,is),is|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,xn(xd,is),is|=r;return ci(n,e,i,t),e.child}function hz(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function nE(n,e,t,r,i){var s=Pi(t)?Fu:ti.current;return s=gf(e,s),Od(e,i),t=jR(n,e,t,r,s,i),r=qR(),n!==null&&!Ei?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,el(n,e,i)):(In&&r&&DR(e),e.flags|=1,ci(n,e,t,i),e.child)}function KI(n,e,t,r,i){if(Pi(t)){var s=!0;U_(e)}else s=!1;if(Od(e,i),e.stateNode===null)Vv(n,e),oz(e,t,r),eE(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=ks(c):(c=Pi(t)?Fu:ti.current,c=gf(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&GI(e,o,r,c),kl=!1;var d=e.memoizedState;o.state=d,G_(e,r,o,i),l=e.memoizedState,a!==r||d!==l||Ni.current||kl?(typeof u=="function"&&(JM(e,t,u,r),l=e.memoizedState),(a=kl||VI(e,t,a,r,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,B3(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:no(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ks(l):(l=Pi(t)?Fu:ti.current,l=gf(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&GI(e,o,r,l),kl=!1,d=e.memoizedState,o.state=d,G_(e,r,o,i);var p=e.memoizedState;a!==h||d!==p||Ni.current||kl?(typeof f=="function"&&(JM(e,t,f,r),p=e.memoizedState),(c=kl||VI(e,t,c,r,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return rE(n,e,t,r,s,i)}function rE(n,e,t,r,i,s){hz(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&DI(e,t,!1),el(n,e,s);r=e.stateNode,r9.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=vf(e,n.child,null,s),e.child=vf(e,null,a,s)):ci(n,e,a,s),e.memoizedState=r.state,i&&DI(e,t,!0),e.child}function dz(n){var e=n.stateNode;e.pendingContext?LI(n,e.pendingContext,e.pendingContext!==e.context):e.context&&LI(n,e.context,!1),VR(n,e.containerInfo)}function YI(n,e,t,r,i){return yf(),OR(i),e.flags|=256,ci(n,e,t,r),e.child}var iE={dehydrated:null,treeContext:null,retryLane:0};function sE(n){return{baseLanes:n,cachePool:null,transitions:null}}function fz(n,e,t){var r=e.pendingProps,i=On.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),xn(On,i&1),n===null)return ZM(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=mS(o,r,0,null),n=Cu(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=sE(t),e.memoizedState=iE,n):YR(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return i9(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=cc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=cc(a,s):(s=Cu(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?sE(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=iE,r}return s=n.child,n=s.sibling,r=cc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function YR(n,e){return e=mS({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Qy(n,e,t,r){return r!==null&&OR(r),vf(e,n.child,null,t),n=YR(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function i9(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=H1(Error(ke(422))),Qy(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=mS({mode:"visible",children:r.children},i,0,null),s=Cu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&vf(e,n.child,null,o),e.child.memoizedState=sE(o),e.memoizedState=iE,s);if(!(e.mode&1))return Qy(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ke(419)),r=H1(s,r,void 0),Qy(n,e,o,r)}if(a=(o&n.childLanes)!==0,Ei||a){if(r=Er,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ja(n,i),yo(r,n,i,-1))}return nN(),r=H1(Error(ke(421))),Qy(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=y9.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,as=sc(i.nextSibling),ls=e,In=!0,oo=null,n!==null&&(Es[Cs++]=La,Es[Cs++]=Da,Es[Cs++]=Ou,La=n.id,Da=n.overflow,Ou=e),e=YR(e,r.children),e.flags|=4096,e)}function ZI(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),QM(n.return,e,t)}function W1(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function pz(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ci(n,e,r.children,t),r=On.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ZI(n,t,e);else if(n.tag===19)ZI(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(xn(On,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&H_(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),W1(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&H_(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}W1(e,!0,t,null,s);break;case"together":W1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vv(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function el(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Uu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ke(153));if(e.child!==null){for(n=e.child,t=cc(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=cc(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function s9(n,e,t){switch(e.tag){case 3:dz(e),yf();break;case 5:z3(e);break;case 1:Pi(e.type)&&U_(e);break;case 4:VR(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;xn($_,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(xn(On,On.current&1),e.flags|=128,null):t&e.child.childLanes?fz(n,e,t):(xn(On,On.current&1),n=el(n,e,t),n!==null?n.sibling:null);xn(On,On.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return pz(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xn(On,On.current),r)break;return null;case 22:case 23:return e.lanes=0,uz(n,e,t)}return el(n,e,t)}var mz,oE,gz,yz;mz=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};oE=function(){};gz=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,fu(Wo.current);var s=null;switch(t){case"input":i=AM(n,i),r=AM(n,r),s=[];break;case"select":i=$n({},i,{value:void 0}),r=$n({},r,{value:void 0}),s=[];break;case"textarea":i=PM(n,i),r=PM(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=O_)}LM(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sg.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sg.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&bn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};yz=function(n,e,t,r){t!==r&&(e.flags|=4)};function wp(n,e){if(!In)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function $r(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function o9(n,e,t){var r=e.pendingProps;switch(FR(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $r(e),null;case 1:return Pi(e.type)&&k_(),$r(e),null;case 3:return r=e.stateNode,_f(),An(Ni),An(ti),HR(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Yy(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,oo!==null&&(pE(oo),oo=null))),oE(n,e),$r(e),null;case 5:GR(e);var i=fu(yg.current);if(t=e.type,n!==null&&e.stateNode!=null)gz(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ke(166));return $r(e),null}if(n=fu(Wo.current),Yy(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[$o]=e,r[mg]=s,n=(e.mode&1)!==0,t){case"dialog":bn("cancel",r),bn("close",r);break;case"iframe":case"object":case"embed":bn("load",r);break;case"video":case"audio":for(i=0;i<gm.length;i++)bn(gm[i],r);break;case"source":bn("error",r);break;case"img":case"image":case"link":bn("error",r),bn("load",r);break;case"details":bn("toggle",r);break;case"input":oI(r,s),bn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},bn("invalid",r);break;case"textarea":lI(r,s),bn("invalid",r)}LM(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ky(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ky(r.textContent,a,n),i=["children",""+a]):sg.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&bn("scroll",r)}switch(t){case"input":$y(r),aI(r,s,!0);break;case"textarea":$y(r),cI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=O_)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=WB(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[$o]=e,n[mg]=r,mz(n,e,!1,!1),e.stateNode=n;e:{switch(o=DM(t,r),t){case"dialog":bn("cancel",n),bn("close",n),i=r;break;case"iframe":case"object":case"embed":bn("load",n),i=r;break;case"video":case"audio":for(i=0;i<gm.length;i++)bn(gm[i],n);i=r;break;case"source":bn("error",n),i=r;break;case"img":case"image":case"link":bn("error",n),bn("load",n),i=r;break;case"details":bn("toggle",n),i=r;break;case"input":oI(n,r),i=AM(n,r),bn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=$n({},r,{value:void 0}),bn("invalid",n);break;case"textarea":lI(n,r),i=PM(n,r),bn("invalid",n);break;default:i=r}LM(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?XB(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&jB(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&og(n,l):typeof l=="number"&&og(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sg.hasOwnProperty(s)?l!=null&&s==="onScroll"&&bn("scroll",n):l!=null&&xR(n,s,l,o))}switch(t){case"input":$y(n),aI(n,r,!1);break;case"textarea":$y(n),cI(n);break;case"option":r.value!=null&&n.setAttribute("value",""+fc(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Id(n,!!r.multiple,s,!1):r.defaultValue!=null&&Id(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=O_)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $r(e),null;case 6:if(n&&e.stateNode!=null)yz(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ke(166));if(t=fu(yg.current),fu(Wo.current),Yy(e)){if(r=e.stateNode,t=e.memoizedProps,r[$o]=e,(s=r.nodeValue!==t)&&(n=ls,n!==null))switch(n.tag){case 3:Ky(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ky(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[$o]=e,e.stateNode=r}return $r(e),null;case 13:if(An(On),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(In&&as!==null&&e.mode&1&&!(e.flags&128))F3(),yf(),e.flags|=98560,s=!1;else if(s=Yy(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(ke(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ke(317));s[$o]=e}else yf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$r(e),s=!1}else oo!==null&&(pE(oo),oo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||On.current&1?mr===0&&(mr=3):nN())),e.updateQueue!==null&&(e.flags|=4),$r(e),null);case 4:return _f(),oE(n,e),n===null&&fg(e.stateNode.containerInfo),$r(e),null;case 10:return BR(e.type._context),$r(e),null;case 17:return Pi(e.type)&&k_(),$r(e),null;case 19:if(An(On),s=e.memoizedState,s===null)return $r(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)wp(s,!1);else{if(mr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=H_(n),o!==null){for(e.flags|=128,wp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return xn(On,On.current&1|2),e.child}n=n.sibling}s.tail!==null&&Zn()>Sf&&(e.flags|=128,r=!0,wp(s,!1),e.lanes=4194304)}else{if(!r)if(n=H_(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),wp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!In)return $r(e),null}else 2*Zn()-s.renderingStartTime>Sf&&t!==1073741824&&(e.flags|=128,r=!0,wp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Zn(),e.sibling=null,t=On.current,xn(On,r?t&1|2:t&1),e):($r(e),null);case 22:case 23:return tN(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?is&1073741824&&($r(e),e.subtreeFlags&6&&(e.flags|=8192)):$r(e),null;case 24:return null;case 25:return null}throw Error(ke(156,e.tag))}function a9(n,e){switch(FR(e),e.tag){case 1:return Pi(e.type)&&k_(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return _f(),An(Ni),An(ti),HR(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return GR(e),null;case 13:if(An(On),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ke(340));yf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return An(On),null;case 4:return _f(),null;case 10:return BR(e.type._context),null;case 22:case 23:return tN(),null;case 24:return null;default:return null}}var Jy=!1,Kr=!1,l9=typeof WeakSet=="function"?WeakSet:Set,et=null;function _d(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){jn(n,e,r)}else t.current=null}function aE(n,e,t){try{t()}catch(r){jn(n,e,r)}}var QI=!1;function c9(n,e){if(HM=L_,n=b3(),LR(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=n,d=null;t:for(;;){for(var f;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===n)break t;if(d===t&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(WM={focusedElem:n,selectionRange:t},L_=!1,et=e;et!==null;)if(e=et,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,et=n;else for(;et!==null;){e=et;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,g=p.memoizedState,m=e.stateNode,_=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:no(e.type,y),g);m.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(x){jn(e,e.return,x)}if(n=e.sibling,n!==null){n.return=e.return,et=n;break}et=e.return}return p=QI,QI=!1,p}function Bm(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&aE(e,t,s)}i=i.next}while(i!==r)}}function fS(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function lE(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function vz(n){var e=n.alternate;e!==null&&(n.alternate=null,vz(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[$o],delete e[mg],delete e[XM],delete e[Wj],delete e[jj])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function _z(n){return n.tag===5||n.tag===3||n.tag===4}function JI(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||_z(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function cE(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=O_));else if(r!==4&&(n=n.child,n!==null))for(cE(n,e,t),n=n.sibling;n!==null;)cE(n,e,t),n=n.sibling}function uE(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(uE(n,e,t),n=n.sibling;n!==null;)uE(n,e,t),n=n.sibling}var Ir=null,io=!1;function ml(n,e,t){for(t=t.child;t!==null;)xz(n,e,t),t=t.sibling}function xz(n,e,t){if(Ho&&typeof Ho.onCommitFiberUnmount=="function")try{Ho.onCommitFiberUnmount(sS,t)}catch{}switch(t.tag){case 5:Kr||_d(t,e);case 6:var r=Ir,i=io;Ir=null,ml(n,e,t),Ir=r,io=i,Ir!==null&&(io?(n=Ir,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ir.removeChild(t.stateNode));break;case 18:Ir!==null&&(io?(n=Ir,t=t.stateNode,n.nodeType===8?U1(n.parentNode,t):n.nodeType===1&&U1(n,t),ug(n)):U1(Ir,t.stateNode));break;case 4:r=Ir,i=io,Ir=t.stateNode.containerInfo,io=!0,ml(n,e,t),Ir=r,io=i;break;case 0:case 11:case 14:case 15:if(!Kr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&aE(t,e,o),i=i.next}while(i!==r)}ml(n,e,t);break;case 1:if(!Kr&&(_d(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){jn(t,e,a)}ml(n,e,t);break;case 21:ml(n,e,t);break;case 22:t.mode&1?(Kr=(r=Kr)||t.memoizedState!==null,ml(n,e,t),Kr=r):ml(n,e,t);break;default:ml(n,e,t)}}function eL(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new l9),e.forEach(function(r){var i=v9.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Ws(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ir=a.stateNode,io=!1;break e;case 3:Ir=a.stateNode.containerInfo,io=!0;break e;case 4:Ir=a.stateNode.containerInfo,io=!0;break e}a=a.return}if(Ir===null)throw Error(ke(160));xz(s,o,i),Ir=null,io=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){jn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Sz(e,n),e=e.sibling}function Sz(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ws(e,n),Co(n),r&4){try{Bm(3,n,n.return),fS(3,n)}catch(y){jn(n,n.return,y)}try{Bm(5,n,n.return)}catch(y){jn(n,n.return,y)}}break;case 1:Ws(e,n),Co(n),r&512&&t!==null&&_d(t,t.return);break;case 5:if(Ws(e,n),Co(n),r&512&&t!==null&&_d(t,t.return),n.flags&32){var i=n.stateNode;try{og(i,"")}catch(y){jn(n,n.return,y)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&GB(i,s),DM(a,o);var c=DM(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?XB(i,h):u==="dangerouslySetInnerHTML"?jB(i,h):u==="children"?og(i,h):xR(i,u,h,c)}switch(a){case"input":RM(i,s);break;case"textarea":HB(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Id(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Id(i,!!s.multiple,s.defaultValue,!0):Id(i,!!s.multiple,s.multiple?[]:"",!1))}i[mg]=s}catch(y){jn(n,n.return,y)}}break;case 6:if(Ws(e,n),Co(n),r&4){if(n.stateNode===null)throw Error(ke(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(y){jn(n,n.return,y)}}break;case 3:if(Ws(e,n),Co(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{ug(e.containerInfo)}catch(y){jn(n,n.return,y)}break;case 4:Ws(e,n),Co(n);break;case 13:Ws(e,n),Co(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(JR=Zn())),r&4&&eL(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Kr=(c=Kr)||u,Ws(e,n),Kr=c):Ws(e,n),Co(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(et=n,u=n.child;u!==null;){for(h=et=u;et!==null;){switch(d=et,f=d.child,d.tag){case 0:case 11:case 14:case 15:Bm(4,d,d.return);break;case 1:_d(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){jn(r,t,y)}}break;case 5:_d(d,d.return);break;case 22:if(d.memoizedState!==null){nL(h);continue}}f!==null?(f.return=d,et=f):nL(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=qB("display",o))}catch(y){jn(n,n.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){jn(n,n.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ws(e,n),Co(n),r&4&&eL(n);break;case 21:break;default:Ws(e,n),Co(n)}}function Co(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(_z(t)){var r=t;break e}t=t.return}throw Error(ke(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(og(i,""),r.flags&=-33);var s=JI(n);uE(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=JI(n);cE(n,a,o);break;default:throw Error(ke(161))}}catch(l){jn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function u9(n,e,t){et=n,bz(n)}function bz(n,e,t){for(var r=(n.mode&1)!==0;et!==null;){var i=et,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Jy;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Kr;a=Jy;var c=Kr;if(Jy=o,(Kr=l)&&!c)for(et=i;et!==null;)o=et,l=o.child,o.tag===22&&o.memoizedState!==null?rL(i):l!==null?(l.return=o,et=l):rL(i);for(;s!==null;)et=s,bz(s),s=s.sibling;et=i,Jy=a,Kr=c}tL(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,et=s):tL(n)}}function tL(n){for(;et!==null;){var e=et;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kr||fS(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Kr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:no(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&BI(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}BI(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&ug(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}Kr||e.flags&512&&lE(e)}catch(d){jn(e,e.return,d)}}if(e===n){et=null;break}if(t=e.sibling,t!==null){t.return=e.return,et=t;break}et=e.return}}function nL(n){for(;et!==null;){var e=et;if(e===n){et=null;break}var t=e.sibling;if(t!==null){t.return=e.return,et=t;break}et=e.return}}function rL(n){for(;et!==null;){var e=et;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{fS(4,e)}catch(l){jn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){jn(e,i,l)}}var s=e.return;try{lE(e)}catch(l){jn(e,s,l)}break;case 5:var o=e.return;try{lE(e)}catch(l){jn(e,o,l)}}}catch(l){jn(e,e.return,l)}if(e===n){et=null;break}var a=e.sibling;if(a!==null){a.return=e.return,et=a;break}et=e.return}}var h9=Math.ceil,q_=al.ReactCurrentDispatcher,ZR=al.ReactCurrentOwner,Ls=al.ReactCurrentBatchConfig,Gt=0,Er=null,or=null,Ur=0,is=0,xd=Mc(0),mr=0,Sg=null,Uu=0,pS=0,QR=0,zm=null,wi=null,JR=0,Sf=1/0,_a=null,X_=!1,hE=null,ac=null,e0=!1,tc=null,K_=0,$m=0,dE=null,Gv=-1,Hv=0;function fi(){return Gt&6?Zn():Gv!==-1?Gv:Gv=Zn()}function lc(n){return n.mode&1?Gt&2&&Ur!==0?Ur&-Ur:Xj.transition!==null?(Hv===0&&(Hv=o3()),Hv):(n=un,n!==0||(n=window.event,n=n===void 0?16:f3(n.type)),n):1}function yo(n,e,t,r){if(50<$m)throw $m=0,dE=null,Error(ke(185));ty(n,t,r),(!(Gt&2)||n!==Er)&&(n===Er&&(!(Gt&2)&&(pS|=t),mr===4&&Vl(n,Ur)),Ii(n,r),t===1&&Gt===0&&!(e.mode&1)&&(Sf=Zn()+500,uS&&Ec()))}function Ii(n,e){var t=n.callbackNode;XW(n,e);var r=I_(n,n===Er?Ur:0);if(r===0)t!==null&&dI(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&dI(t),e===1)n.tag===0?qj(iL.bind(null,n)):I3(iL.bind(null,n)),Gj(function(){!(Gt&6)&&Ec()}),t=null;else{switch(a3(r)){case 1:t=MR;break;case 4:t=i3;break;case 16:t=P_;break;case 536870912:t=s3;break;default:t=P_}t=Nz(t,wz.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function wz(n,e){if(Gv=-1,Hv=0,Gt&6)throw Error(ke(327));var t=n.callbackNode;if(kd()&&n.callbackNode!==t)return null;var r=I_(n,n===Er?Ur:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Y_(n,r);else{e=r;var i=Gt;Gt|=2;var s=Mz();(Er!==n||Ur!==e)&&(_a=null,Sf=Zn()+500,Eu(n,e));do try{p9();break}catch(a){Tz(n,a)}while(!0);UR(),q_.current=s,Gt=i,or!==null?e=0:(Er=null,Ur=0,e=mr)}if(e!==0){if(e===2&&(i=BM(n),i!==0&&(r=i,e=fE(n,i))),e===1)throw t=Sg,Eu(n,0),Vl(n,r),Ii(n,Zn()),t;if(e===6)Vl(n,r);else{if(i=n.current.alternate,!(r&30)&&!d9(i)&&(e=Y_(n,r),e===2&&(s=BM(n),s!==0&&(r=s,e=fE(n,s))),e===1))throw t=Sg,Eu(n,0),Vl(n,r),Ii(n,Zn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(ke(345));case 2:Zc(n,wi,_a);break;case 3:if(Vl(n,r),(r&130023424)===r&&(e=JR+500-Zn(),10<e)){if(I_(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){fi(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=qM(Zc.bind(null,n,wi,_a),e);break}Zc(n,wi,_a);break;case 4:if(Vl(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-go(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Zn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*h9(r/1960))-r,10<r){n.timeoutHandle=qM(Zc.bind(null,n,wi,_a),r);break}Zc(n,wi,_a);break;case 5:Zc(n,wi,_a);break;default:throw Error(ke(329))}}}return Ii(n,Zn()),n.callbackNode===t?wz.bind(null,n):null}function fE(n,e){var t=zm;return n.current.memoizedState.isDehydrated&&(Eu(n,e).flags|=256),n=Y_(n,e),n!==2&&(e=wi,wi=t,e!==null&&pE(e)),n}function pE(n){wi===null?wi=n:wi.push.apply(wi,n)}function d9(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!xo(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vl(n,e){for(e&=~QR,e&=~pS,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-go(e),r=1<<t;n[t]=-1,e&=~r}}function iL(n){if(Gt&6)throw Error(ke(327));kd();var e=I_(n,0);if(!(e&1))return Ii(n,Zn()),null;var t=Y_(n,e);if(n.tag!==0&&t===2){var r=BM(n);r!==0&&(e=r,t=fE(n,r))}if(t===1)throw t=Sg,Eu(n,0),Vl(n,e),Ii(n,Zn()),t;if(t===6)throw Error(ke(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Zc(n,wi,_a),Ii(n,Zn()),null}function eN(n,e){var t=Gt;Gt|=1;try{return n(e)}finally{Gt=t,Gt===0&&(Sf=Zn()+500,uS&&Ec())}}function Bu(n){tc!==null&&tc.tag===0&&!(Gt&6)&&kd();var e=Gt;Gt|=1;var t=Ls.transition,r=un;try{if(Ls.transition=null,un=1,n)return n()}finally{un=r,Ls.transition=t,Gt=e,!(Gt&6)&&Ec()}}function tN(){is=xd.current,An(xd)}function Eu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Vj(t)),or!==null)for(t=or.return;t!==null;){var r=t;switch(FR(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&k_();break;case 3:_f(),An(Ni),An(ti),HR();break;case 5:GR(r);break;case 4:_f();break;case 13:An(On);break;case 19:An(On);break;case 10:BR(r.type._context);break;case 22:case 23:tN()}t=t.return}if(Er=n,or=n=cc(n.current,null),Ur=is=e,mr=0,Sg=null,QR=pS=Uu=0,wi=zm=null,du!==null){for(e=0;e<du.length;e++)if(t=du[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}du=null}return n}function Tz(n,e){do{var t=or;try{if(UR(),zv.current=j_,W_){for(var r=Bn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}W_=!1}if(ku=0,Sr=pr=Bn=null,Um=!1,vg=0,ZR.current=null,t===null||t.return===null){mr=1,Sg=e,or=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Ur,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=WI(o);if(f!==null){f.flags&=-257,jI(f,o,a,s,e),f.mode&1&&HI(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var y=new Set;y.add(l),e.updateQueue=y}else p.add(l);break e}else{if(!(e&1)){HI(s,c,e),nN();break e}l=Error(ke(426))}}else if(In&&a.mode&1){var g=WI(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),jI(g,o,a,s,e),OR(xf(l,a));break e}}s=l=xf(l,a),mr!==4&&(mr=2),zm===null?zm=[s]:zm.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=az(s,l,e);UI(s,m);break e;case 1:a=l;var _=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ac===null||!ac.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=lz(s,a,e);UI(s,x);break e}}s=s.return}while(s!==null)}Cz(t)}catch(b){e=b,or===t&&t!==null&&(or=t=t.return);continue}break}while(!0)}function Mz(){var n=q_.current;return q_.current=j_,n===null?j_:n}function nN(){(mr===0||mr===3||mr===2)&&(mr=4),Er===null||!(Uu&268435455)&&!(pS&268435455)||Vl(Er,Ur)}function Y_(n,e){var t=Gt;Gt|=2;var r=Mz();(Er!==n||Ur!==e)&&(_a=null,Eu(n,e));do try{f9();break}catch(i){Tz(n,i)}while(!0);if(UR(),Gt=t,q_.current=r,or!==null)throw Error(ke(261));return Er=null,Ur=0,mr}function f9(){for(;or!==null;)Ez(or)}function p9(){for(;or!==null&&!BW();)Ez(or)}function Ez(n){var e=Rz(n.alternate,n,is);n.memoizedProps=n.pendingProps,e===null?Cz(n):or=e,ZR.current=null}function Cz(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=a9(t,e),t!==null){t.flags&=32767,or=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{mr=6,or=null;return}}else if(t=o9(t,e,is),t!==null){or=t;return}if(e=e.sibling,e!==null){or=e;return}or=e=n}while(e!==null);mr===0&&(mr=5)}function Zc(n,e,t){var r=un,i=Ls.transition;try{Ls.transition=null,un=1,m9(n,e,t,r)}finally{Ls.transition=i,un=r}return null}function m9(n,e,t,r){do kd();while(tc!==null);if(Gt&6)throw Error(ke(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ke(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(KW(n,s),n===Er&&(or=Er=null,Ur=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||e0||(e0=!0,Nz(P_,function(){return kd(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ls.transition,Ls.transition=null;var o=un;un=1;var a=Gt;Gt|=4,ZR.current=null,c9(n,t),Sz(t,n),Fj(WM),L_=!!HM,WM=HM=null,n.current=t,u9(t),zW(),Gt=a,un=o,Ls.transition=s}else n.current=t;if(e0&&(e0=!1,tc=n,K_=i),s=n.pendingLanes,s===0&&(ac=null),GW(t.stateNode),Ii(n,Zn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(X_)throw X_=!1,n=hE,hE=null,n;return K_&1&&n.tag!==0&&kd(),s=n.pendingLanes,s&1?n===dE?$m++:($m=0,dE=n):$m=0,Ec(),null}function kd(){if(tc!==null){var n=a3(K_),e=Ls.transition,t=un;try{if(Ls.transition=null,un=16>n?16:n,tc===null)var r=!1;else{if(n=tc,tc=null,K_=0,Gt&6)throw Error(ke(331));var i=Gt;for(Gt|=4,et=n.current;et!==null;){var s=et,o=s.child;if(et.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(et=c;et!==null;){var u=et;switch(u.tag){case 0:case 11:case 15:Bm(8,u,s)}var h=u.child;if(h!==null)h.return=u,et=h;else for(;et!==null;){u=et;var d=u.sibling,f=u.return;if(vz(u),u===c){et=null;break}if(d!==null){d.return=f,et=d;break}et=f}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(y!==null)}}et=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,et=o;else e:for(;et!==null;){if(s=et,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bm(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,et=m;break e}et=s.return}}var _=n.current;for(et=_;et!==null;){o=et;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,et=v;else e:for(o=_;et!==null;){if(a=et,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:fS(9,a)}}catch(b){jn(a,a.return,b)}if(a===o){et=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,et=x;break e}et=a.return}}if(Gt=i,Ec(),Ho&&typeof Ho.onPostCommitFiberRoot=="function")try{Ho.onPostCommitFiberRoot(sS,n)}catch{}r=!0}return r}finally{un=t,Ls.transition=e}}return!1}function sL(n,e,t){e=xf(t,e),e=az(n,e,1),n=oc(n,e,1),e=fi(),n!==null&&(ty(n,1,e),Ii(n,e))}function jn(n,e,t){if(n.tag===3)sL(n,n,t);else for(;e!==null;){if(e.tag===3){sL(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ac===null||!ac.has(r))){n=xf(t,n),n=lz(e,n,1),e=oc(e,n,1),n=fi(),e!==null&&(ty(e,1,n),Ii(e,n));break}}e=e.return}}function g9(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=fi(),n.pingedLanes|=n.suspendedLanes&t,Er===n&&(Ur&t)===t&&(mr===4||mr===3&&(Ur&130023424)===Ur&&500>Zn()-JR?Eu(n,0):QR|=t),Ii(n,e)}function Az(n,e){e===0&&(n.mode&1?(e=Hy,Hy<<=1,!(Hy&130023424)&&(Hy=4194304)):e=1);var t=fi();n=Ja(n,e),n!==null&&(ty(n,e,t),Ii(n,t))}function y9(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Az(n,t)}function v9(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(ke(314))}r!==null&&r.delete(e),Az(n,t)}var Rz;Rz=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ni.current)Ei=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ei=!1,s9(n,e,t);Ei=!!(n.flags&131072)}else Ei=!1,In&&e.flags&1048576&&L3(e,z_,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Vv(n,e),n=e.pendingProps;var i=gf(e,ti.current);Od(e,t),i=jR(null,e,r,n,i,t);var s=qR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pi(r)?(s=!0,U_(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,$R(e),i.updater=dS,e.stateNode=i,i._reactInternals=e,eE(e,r,n,t),e=rE(null,e,r,!0,s,t)):(e.tag=0,In&&s&&DR(e),ci(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Vv(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=x9(r),n=no(r,n),i){case 0:e=nE(null,e,r,n,t);break e;case 1:e=KI(null,e,r,n,t);break e;case 11:e=qI(null,e,r,n,t);break e;case 14:e=XI(null,e,r,no(r.type,n),t);break e}throw Error(ke(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:no(r,i),nE(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:no(r,i),KI(n,e,r,i,t);case 3:e:{if(dz(e),n===null)throw Error(ke(387));r=e.pendingProps,s=e.memoizedState,i=s.element,B3(n,e),G_(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=xf(Error(ke(423)),e),e=YI(n,e,r,t,i);break e}else if(r!==i){i=xf(Error(ke(424)),e),e=YI(n,e,r,t,i);break e}else for(as=sc(e.stateNode.containerInfo.firstChild),ls=e,In=!0,oo=null,t=k3(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(yf(),r===i){e=el(n,e,t);break e}ci(n,e,r,t)}e=e.child}return e;case 5:return z3(e),n===null&&ZM(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,jM(r,i)?o=null:s!==null&&jM(r,s)&&(e.flags|=32),hz(n,e),ci(n,e,o,t),e.child;case 6:return n===null&&ZM(e),null;case 13:return fz(n,e,t);case 4:return VR(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=vf(e,null,r,t):ci(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:no(r,i),qI(n,e,r,i,t);case 7:return ci(n,e,e.pendingProps,t),e.child;case 8:return ci(n,e,e.pendingProps.children,t),e.child;case 12:return ci(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,xn($_,r._currentValue),r._currentValue=o,s!==null)if(xo(s.value,o)){if(s.children===i.children&&!Ni.current){e=el(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ga(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),QM(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ke(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),QM(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ci(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Od(e,t),i=ks(i),r=r(i),e.flags|=1,ci(n,e,r,t),e.child;case 14:return r=e.type,i=no(r,e.pendingProps),i=no(r.type,i),XI(n,e,r,i,t);case 15:return cz(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:no(r,i),Vv(n,e),e.tag=1,Pi(r)?(n=!0,U_(e)):n=!1,Od(e,t),oz(e,r,i),eE(e,r,i,t),rE(null,e,r,!0,n,t);case 19:return pz(n,e,t);case 22:return uz(n,e,t)}throw Error(ke(156,e.tag))};function Nz(n,e){return r3(n,e)}function _9(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(n,e,t,r){return new _9(n,e,t,r)}function rN(n){return n=n.prototype,!(!n||!n.isReactComponent)}function x9(n){if(typeof n=="function")return rN(n)?1:0;if(n!=null){if(n=n.$$typeof,n===bR)return 11;if(n===wR)return 14}return 2}function cc(n,e){var t=n.alternate;return t===null?(t=Ns(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Wv(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")rN(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case ud:return Cu(t.children,i,s,e);case SR:o=8,i|=8;break;case TM:return n=Ns(12,t,e,i|2),n.elementType=TM,n.lanes=s,n;case MM:return n=Ns(13,t,e,i),n.elementType=MM,n.lanes=s,n;case EM:return n=Ns(19,t,e,i),n.elementType=EM,n.lanes=s,n;case zB:return mS(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case UB:o=10;break e;case BB:o=9;break e;case bR:o=11;break e;case wR:o=14;break e;case Ol:o=16,r=null;break e}throw Error(ke(130,n==null?n:typeof n,""))}return e=Ns(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Cu(n,e,t,r){return n=Ns(7,n,r,e),n.lanes=t,n}function mS(n,e,t,r){return n=Ns(22,n,r,e),n.elementType=zB,n.lanes=t,n.stateNode={isHidden:!1},n}function j1(n,e,t){return n=Ns(6,n,null,e),n.lanes=t,n}function q1(n,e,t){return e=Ns(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function S9(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=C1(0),this.expirationTimes=C1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function iN(n,e,t,r,i,s,o,a,l){return n=new S9(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ns(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},$R(s),n}function b9(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cd,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function Pz(n){if(!n)return pc;n=n._reactInternals;e:{if(eh(n)!==n||n.tag!==1)throw Error(ke(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ke(171))}if(n.tag===1){var t=n.type;if(Pi(t))return P3(n,t,e)}return e}function Iz(n,e,t,r,i,s,o,a,l){return n=iN(t,r,!0,n,i,s,o,a,l),n.context=Pz(null),t=n.current,r=fi(),i=lc(t),s=Ga(r,i),s.callback=e??null,oc(t,s,i),n.current.lanes=i,ty(n,i,r),Ii(n,r),n}function gS(n,e,t,r){var i=e.current,s=fi(),o=lc(i);return t=Pz(t),e.context===null?e.context=t:e.pendingContext=t,e=Ga(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=oc(i,e,o),n!==null&&(yo(n,i,o,s),Bv(n,i,o)),o}function Z_(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function oL(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function sN(n,e){oL(n,e),(n=n.alternate)&&oL(n,e)}function w9(){return null}var Lz=typeof reportError=="function"?reportError:function(n){console.error(n)};function oN(n){this._internalRoot=n}yS.prototype.render=oN.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ke(409));gS(n,e,null,null)};yS.prototype.unmount=oN.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Bu(function(){gS(null,n,null,null)}),e[Qa]=null}};function yS(n){this._internalRoot=n}yS.prototype.unstable_scheduleHydration=function(n){if(n){var e=u3();n={blockedOn:null,target:n,priority:e};for(var t=0;t<$l.length&&e!==0&&e<$l[t].priority;t++);$l.splice(t,0,n),t===0&&d3(n)}};function aN(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function vS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function aL(){}function T9(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Z_(o);s.call(c)}}var o=Iz(e,r,n,0,null,!1,!1,"",aL);return n._reactRootContainer=o,n[Qa]=o.current,fg(n.nodeType===8?n.parentNode:n),Bu(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Z_(l);a.call(c)}}var l=iN(n,0,!1,null,null,!1,!1,"",aL);return n._reactRootContainer=l,n[Qa]=l.current,fg(n.nodeType===8?n.parentNode:n),Bu(function(){gS(e,l,t,r)}),l}function _S(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Z_(o);a.call(l)}}gS(e,o,n,i)}else o=T9(t,e,n,i,r);return Z_(o)}l3=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=mm(e.pendingLanes);t!==0&&(ER(e,t|1),Ii(e,Zn()),!(Gt&6)&&(Sf=Zn()+500,Ec()))}break;case 13:Bu(function(){var r=Ja(n,1);if(r!==null){var i=fi();yo(r,n,1,i)}}),sN(n,1)}};CR=function(n){if(n.tag===13){var e=Ja(n,134217728);if(e!==null){var t=fi();yo(e,n,134217728,t)}sN(n,134217728)}};c3=function(n){if(n.tag===13){var e=lc(n),t=Ja(n,e);if(t!==null){var r=fi();yo(t,n,e,r)}sN(n,e)}};u3=function(){return un};h3=function(n,e){var t=un;try{return un=n,e()}finally{un=t}};OM=function(n,e,t){switch(e){case"input":if(RM(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=cS(r);if(!i)throw Error(ke(90));VB(r),RM(r,i)}}}break;case"textarea":HB(n,t);break;case"select":e=t.value,e!=null&&Id(n,!!t.multiple,e,!1)}};ZB=eN;QB=Bu;var M9={usingClientEntryPoint:!1,Events:[ry,pd,cS,KB,YB,eN]},Tp={findFiberByHostInstance:hu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},E9={bundleType:Tp.bundleType,version:Tp.version,rendererPackageName:Tp.rendererPackageName,rendererConfig:Tp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:al.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=t3(n),n===null?null:n.stateNode},findFiberByHostInstance:Tp.findFiberByHostInstance||w9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var t0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t0.isDisabled&&t0.supportsFiber)try{sS=t0.inject(E9),Ho=t0}catch{}}fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M9;fs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aN(e))throw Error(ke(200));return b9(n,e,null,t)};fs.createRoot=function(n,e){if(!aN(n))throw Error(ke(299));var t=!1,r="",i=Lz;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=iN(n,1,!1,null,null,t,!1,r,i),n[Qa]=e.current,fg(n.nodeType===8?n.parentNode:n),new oN(e)};fs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ke(188)):(n=Object.keys(n).join(","),Error(ke(268,n)));return n=t3(e),n=n===null?null:n.stateNode,n};fs.flushSync=function(n){return Bu(n)};fs.hydrate=function(n,e,t){if(!vS(e))throw Error(ke(200));return _S(null,n,e,!0,t)};fs.hydrateRoot=function(n,e,t){if(!aN(n))throw Error(ke(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Lz;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Iz(e,null,n,1,t??null,i,!1,s,o),n[Qa]=e.current,fg(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new yS(e)};fs.render=function(n,e,t){if(!vS(e))throw Error(ke(200));return _S(null,n,e,!1,t)};fs.unmountComponentAtNode=function(n){if(!vS(n))throw Error(ke(40));return n._reactRootContainer?(Bu(function(){_S(null,null,n,!1,function(){n._reactRootContainer=null,n[Qa]=null})}),!0):!1};fs.unstable_batchedUpdates=eN;fs.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!vS(t))throw Error(ke(200));if(n==null||n._reactInternals===void 0)throw Error(ke(38));return _S(n,e,t,!1,r)};fs.version="18.3.1-next-f1338f8080-20240426";function Dz(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dz)}catch(n){console.error(n)}}Dz(),DB.exports=fs;var lN=DB.exports;const ym=Xf(lN);var lL=lN;bM.createRoot=lL.createRoot,bM.hydrateRoot=lL.hydrateRoot;function Fz(n,e){return function(){return n.apply(e,arguments)}}const{toString:C9}=Object.prototype,{getPrototypeOf:cN}=Object,xS=(n=>e=>{const t=C9.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Mo=n=>(n=n.toLowerCase(),e=>xS(e)===n),SS=n=>e=>typeof e===n,{isArray:Qf}=Array,bg=SS("undefined");function A9(n){return n!==null&&!bg(n)&&n.constructor!==null&&!bg(n.constructor)&&cs(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const Oz=Mo("ArrayBuffer");function R9(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&Oz(n.buffer),e}const N9=SS("string"),cs=SS("function"),kz=SS("number"),bS=n=>n!==null&&typeof n=="object",P9=n=>n===!0||n===!1,jv=n=>{if(xS(n)!=="object")return!1;const e=cN(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},I9=Mo("Date"),L9=Mo("File"),D9=Mo("Blob"),F9=Mo("FileList"),O9=n=>bS(n)&&cs(n.pipe),k9=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||cs(n.append)&&((e=xS(n))==="formdata"||e==="object"&&cs(n.toString)&&n.toString()==="[object FormData]"))},U9=Mo("URLSearchParams"),[B9,z9,$9,V9]=["ReadableStream","Request","Response","Headers"].map(Mo),G9=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sy(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Qf(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function Uz(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const pu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Bz=n=>!bg(n)&&n!==pu;function mE(){const{caseless:n}=Bz(this)&&this||{},e={},t=(r,i)=>{const s=n&&Uz(e,i)||i;jv(e[s])&&jv(r)?e[s]=mE(e[s],r):jv(r)?e[s]=mE({},r):Qf(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&sy(arguments[r],t);return e}const H9=(n,e,t,{allOwnKeys:r}={})=>(sy(e,(i,s)=>{t&&cs(i)?n[s]=Fz(i,t):n[s]=i},{allOwnKeys:r}),n),W9=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),j9=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},q9=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&cN(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},X9=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},K9=n=>{if(!n)return null;if(Qf(n))return n;let e=n.length;if(!kz(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Y9=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&cN(Uint8Array)),Z9=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},Q9=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},J9=Mo("HTMLFormElement"),e7=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),cL=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),t7=Mo("RegExp"),zz=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};sy(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},n7=n=>{zz(n,(e,t)=>{if(cs(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(cs(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},r7=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return Qf(n)?r(n):r(String(n).split(e)),t},i7=()=>{},s7=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,X1="abcdefghijklmnopqrstuvwxyz",uL="0123456789",$z={DIGIT:uL,ALPHA:X1,ALPHA_DIGIT:X1+X1.toUpperCase()+uL},o7=(n=16,e=$z.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function a7(n){return!!(n&&cs(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const l7=n=>{const e=new Array(10),t=(r,i)=>{if(bS(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Qf(r)?[]:{};return sy(r,(o,a)=>{const l=t(o,i+1);!bg(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return t(n,0)},c7=Mo("AsyncFunction"),u7=n=>n&&(bS(n)||cs(n))&&cs(n.then)&&cs(n.catch),Vz=((n,e)=>n?setImmediate:e?((t,r)=>(pu.addEventListener("message",({source:i,data:s})=>{i===pu&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),pu.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",cs(pu.postMessage)),h7=typeof queueMicrotask<"u"?queueMicrotask.bind(pu):typeof process<"u"&&process.nextTick||Vz,ye={isArray:Qf,isArrayBuffer:Oz,isBuffer:A9,isFormData:k9,isArrayBufferView:R9,isString:N9,isNumber:kz,isBoolean:P9,isObject:bS,isPlainObject:jv,isReadableStream:B9,isRequest:z9,isResponse:$9,isHeaders:V9,isUndefined:bg,isDate:I9,isFile:L9,isBlob:D9,isRegExp:t7,isFunction:cs,isStream:O9,isURLSearchParams:U9,isTypedArray:Y9,isFileList:F9,forEach:sy,merge:mE,extend:H9,trim:G9,stripBOM:W9,inherits:j9,toFlatObject:q9,kindOf:xS,kindOfTest:Mo,endsWith:X9,toArray:K9,forEachEntry:Z9,matchAll:Q9,isHTMLForm:J9,hasOwnProperty:cL,hasOwnProp:cL,reduceDescriptors:zz,freezeMethods:n7,toObjectSet:r7,toCamelCase:e7,noop:i7,toFiniteNumber:s7,findKey:Uz,global:pu,isContextDefined:Bz,ALPHABET:$z,generateString:o7,isSpecCompliantForm:a7,toJSONObject:l7,isAsyncFn:c7,isThenable:u7,setImmediate:Vz,asap:h7};function St(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}ye.inherits(St,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ye.toJSONObject(this.config),code:this.code,status:this.status}}});const Gz=St.prototype,Hz={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Hz[n]={value:n}});Object.defineProperties(St,Hz);Object.defineProperty(Gz,"isAxiosError",{value:!0});St.from=(n,e,t,r,i,s)=>{const o=Object.create(Gz);return ye.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),St.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const d7=null;function gE(n){return ye.isPlainObject(n)||ye.isArray(n)}function Wz(n){return ye.endsWith(n,"[]")?n.slice(0,-2):n}function hL(n,e,t){return n?n.concat(e).map(function(i,s){return i=Wz(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function f7(n){return ye.isArray(n)&&!n.some(gE)}const p7=ye.toFlatObject(ye,{},null,function(e){return/^is[A-Z]/.test(e)});function wS(n,e,t){if(!ye.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ye.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,g){return!ye.isUndefined(g[y])});const r=t.metaTokens,i=t.visitor||u,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&ye.isSpecCompliantForm(e);if(!ye.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(ye.isDate(p))return p.toISOString();if(!l&&ye.isBlob(p))throw new St("Blob is not supported. Use a Buffer instead.");return ye.isArrayBuffer(p)||ye.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,y,g){let m=p;if(p&&!g&&typeof p=="object"){if(ye.endsWith(y,"{}"))y=r?y:y.slice(0,-2),p=JSON.stringify(p);else if(ye.isArray(p)&&f7(p)||(ye.isFileList(p)||ye.endsWith(y,"[]"))&&(m=ye.toArray(p)))return y=Wz(y),m.forEach(function(v,x){!(ye.isUndefined(v)||v===null)&&e.append(o===!0?hL([y],x,s):o===null?y:y+"[]",c(v))}),!1}return gE(p)?!0:(e.append(hL(g,y,s),c(p)),!1)}const h=[],d=Object.assign(p7,{defaultVisitor:u,convertValue:c,isVisitable:gE});function f(p,y){if(!ye.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(p),ye.forEach(p,function(m,_){(!(ye.isUndefined(m)||m===null)&&i.call(e,m,ye.isString(_)?_.trim():_,y,d))===!0&&f(m,y?y.concat(_):[_])}),h.pop()}}if(!ye.isObject(n))throw new TypeError("data must be an object");return f(n),e}function dL(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function uN(n,e){this._pairs=[],n&&wS(n,this,e)}const jz=uN.prototype;jz.append=function(e,t){this._pairs.push([e,t])};jz.toString=function(e){const t=e?function(r){return e.call(this,r,dL)}:dL;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function m7(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function qz(n,e,t){if(!e)return n;const r=t&&t.encode||m7,i=t&&t.serialize;let s;if(i?s=i(e,t):s=ye.isURLSearchParams(e)?e.toString():new uN(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class fL{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ye.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Xz={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},g7=typeof URLSearchParams<"u"?URLSearchParams:uN,y7=typeof FormData<"u"?FormData:null,v7=typeof Blob<"u"?Blob:null,_7={isBrowser:!0,classes:{URLSearchParams:g7,FormData:y7,Blob:v7},protocols:["http","https","file","blob","url","data"]},hN=typeof window<"u"&&typeof document<"u",yE=typeof navigator=="object"&&navigator||void 0,x7=hN&&(!yE||["ReactNative","NativeScript","NS"].indexOf(yE.product)<0),S7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",b7=hN&&window.location.href||"http://localhost",w7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hN,hasStandardBrowserEnv:x7,hasStandardBrowserWebWorkerEnv:S7,navigator:yE,origin:b7},Symbol.toStringTag,{value:"Module"})),Li={...w7,..._7};function T7(n,e){return wS(n,new Li.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return Li.isNode&&ye.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function M7(n){return ye.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function E7(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function Kz(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&ye.isArray(i)?i.length:o,l?(ye.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!ye.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&ye.isArray(i[o])&&(i[o]=E7(i[o])),!a)}if(ye.isFormData(n)&&ye.isFunction(n.entries)){const t={};return ye.forEachEntry(n,(r,i)=>{e(M7(r),i,t,0)}),t}return null}function C7(n,e,t){if(ye.isString(n))try{return(e||JSON.parse)(n),ye.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(n)}const oy={transitional:Xz,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=ye.isObject(e);if(s&&ye.isHTMLForm(e)&&(e=new FormData(e)),ye.isFormData(e))return i?JSON.stringify(Kz(e)):e;if(ye.isArrayBuffer(e)||ye.isBuffer(e)||ye.isStream(e)||ye.isFile(e)||ye.isBlob(e)||ye.isReadableStream(e))return e;if(ye.isArrayBufferView(e))return e.buffer;if(ye.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return T7(e,this.formSerializer).toString();if((a=ye.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return wS(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),C7(e)):e}],transformResponse:[function(e){const t=this.transitional||oy.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(ye.isResponse(e)||ye.isReadableStream(e))return e;if(e&&ye.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?St.from(a,St.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Li.classes.FormData,Blob:Li.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ye.forEach(["delete","get","head","post","put","patch"],n=>{oy.headers[n]={}});const A7=ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),R7=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&A7[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},pL=Symbol("internals");function Mp(n){return n&&String(n).trim().toLowerCase()}function qv(n){return n===!1||n==null?n:ye.isArray(n)?n.map(qv):String(n)}function N7(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const P7=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function K1(n,e,t,r,i){if(ye.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!ye.isString(e)){if(ye.isString(r))return e.indexOf(r)!==-1;if(ye.isRegExp(r))return r.test(e)}}function I7(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function L7(n,e){const t=ye.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Di{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,l,c){const u=Mp(l);if(!u)throw new Error("header name must be a non-empty string");const h=ye.findKey(i,u);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=qv(a))}const o=(a,l)=>ye.forEach(a,(c,u)=>s(c,u,l));if(ye.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(ye.isString(e)&&(e=e.trim())&&!P7(e))o(R7(e),t);else if(ye.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(t,e,r);return this}get(e,t){if(e=Mp(e),e){const r=ye.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return N7(i);if(ye.isFunction(t))return t.call(this,i,r);if(ye.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Mp(e),e){const r=ye.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||K1(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=Mp(o),o){const a=ye.findKey(r,o);a&&(!t||K1(r,r[a],a,t))&&(delete r[a],i=!0)}}return ye.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||K1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return ye.forEach(this,(i,s)=>{const o=ye.findKey(r,s);if(o){t[o]=qv(i),delete t[s];return}const a=e?I7(s):String(s).trim();a!==s&&delete t[s],t[a]=qv(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ye.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&ye.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[pL]=this[pL]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Mp(o);r[a]||(L7(i,o),r[a]=!0)}return ye.isArray(e)?e.forEach(s):s(e),this}}Di.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ye.reduceDescriptors(Di.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});ye.freezeMethods(Di);function Y1(n,e){const t=this||oy,r=e||t,i=Di.from(r.headers);let s=r.data;return ye.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function Yz(n){return!!(n&&n.__CANCEL__)}function Jf(n,e,t){St.call(this,n??"canceled",St.ERR_CANCELED,e,t),this.name="CanceledError"}ye.inherits(Jf,St,{__CANCEL__:!0});function Zz(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new St("Request failed with status code "+t.status,[St.ERR_BAD_REQUEST,St.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function D7(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function F7(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),t[i]=l,r[i]=c;let h=s,d=0;for(;h!==i;)d+=t[h++],h=h%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),c-o<e)return;const f=u&&c-u;return f?Math.round(d*1e3/f):void 0}}function O7(n,e){let t=0,r=1e3/e,i,s;const o=(c,u=Date.now())=>{t=u,i=null,s&&(clearTimeout(s),s=null),n.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-t;h>=r?o(c,u):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const Q_=(n,e,t=3)=>{let r=0;const i=F7(50,250);return O7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),u=o<=a;r=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(h)},t)},mL=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},gL=n=>(...e)=>ye.asap(()=>n(...e)),k7=Li.hasStandardBrowserEnv?function(){const e=Li.navigator&&/(msie|trident)/i.test(Li.navigator.userAgent),t=document.createElement("a");let r;function i(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=i(window.location.href),function(o){const a=ye.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),U7=Li.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];ye.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),ye.isString(r)&&o.push("path="+r),ye.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function B7(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function z7(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Qz(n,e){return n&&!B7(e)?z7(n,e):e}const yL=n=>n instanceof Di?{...n}:n;function zu(n,e){e=e||{};const t={};function r(c,u,h){return ye.isPlainObject(c)&&ye.isPlainObject(u)?ye.merge.call({caseless:h},c,u):ye.isPlainObject(u)?ye.merge({},u):ye.isArray(u)?u.slice():u}function i(c,u,h){if(ye.isUndefined(u)){if(!ye.isUndefined(c))return r(void 0,c,h)}else return r(c,u,h)}function s(c,u){if(!ye.isUndefined(u))return r(void 0,u)}function o(c,u){if(ye.isUndefined(u)){if(!ye.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,h){if(h in e)return r(c,u);if(h in n)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>i(yL(c),yL(u),!0)};return ye.forEach(Object.keys(Object.assign({},n,e)),function(u){const h=l[u]||i,d=h(n[u],e[u],u);ye.isUndefined(d)&&h!==a||(t[u]=d)}),t}const Jz=n=>{const e=zu({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Di.from(o),e.url=qz(Qz(e.baseURL,e.url),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(ye.isFormData(t)){if(Li.hasStandardBrowserEnv||Li.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Li.hasStandardBrowserEnv&&(r&&ye.isFunction(r)&&(r=r(e)),r||r!==!1&&k7(e.url))){const c=i&&s&&U7.read(s);c&&o.set(i,c)}return e},$7=typeof XMLHttpRequest<"u",V7=$7&&function(n){return new Promise(function(t,r){const i=Jz(n);let s=i.data;const o=Di.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,h,d,f,p;function y(){f&&f(),p&&p(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout;function m(){if(!g)return;const v=Di.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),b={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:v,config:n,request:g};Zz(function(w){t(w),y()},function(w){r(w),y()},b),g=null}"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(m)},g.onabort=function(){g&&(r(new St("Request aborted",St.ECONNABORTED,n,g)),g=null)},g.onerror=function(){r(new St("Network Error",St.ERR_NETWORK,n,g)),g=null},g.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const b=i.transitional||Xz;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),r(new St(x,b.clarifyTimeoutError?St.ETIMEDOUT:St.ECONNABORTED,n,g)),g=null},s===void 0&&o.setContentType(null),"setRequestHeader"in g&&ye.forEach(o.toJSON(),function(x,b){g.setRequestHeader(b,x)}),ye.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),a&&a!=="json"&&(g.responseType=i.responseType),c&&([d,p]=Q_(c,!0),g.addEventListener("progress",d)),l&&g.upload&&([h,f]=Q_(l),g.upload.addEventListener("progress",h),g.upload.addEventListener("loadend",f)),(i.cancelToken||i.signal)&&(u=v=>{g&&(r(!v||v.type?new Jf(null,n,g):v),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const _=D7(i.url);if(_&&Li.protocols.indexOf(_)===-1){r(new St("Unsupported protocol "+_+":",St.ERR_BAD_REQUEST,n));return}g.send(s||null)})},G7=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof St?u:new Jf(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new St(`timeout ${e} of ms exceeded`,St.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),n=null)};n.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>ye.asap(a),l}},H7=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},W7=async function*(n,e){for await(const t of j7(n))yield*H7(t,e)},j7=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},vL=(n,e,t,r)=>{const i=W7(n,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let h=u.byteLength;if(t){let d=s+=h;t(d)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},TS=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",e4=TS&&typeof ReadableStream=="function",q7=TS&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),t4=(n,...e)=>{try{return!!n(...e)}catch{return!1}},X7=e4&&t4(()=>{let n=!1;const e=new Request(Li.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),_L=64*1024,vE=e4&&t4(()=>ye.isReadableStream(new Response("").body)),J_={stream:vE&&(n=>n.body)};TS&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!J_[e]&&(J_[e]=ye.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new St(`Response type '${e}' is not supported`,St.ERR_NOT_SUPPORT,r)})})})(new Response);const K7=async n=>{if(n==null)return 0;if(ye.isBlob(n))return n.size;if(ye.isSpecCompliantForm(n))return(await new Request(Li.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(ye.isArrayBufferView(n)||ye.isArrayBuffer(n))return n.byteLength;if(ye.isURLSearchParams(n)&&(n=n+""),ye.isString(n))return(await q7(n)).byteLength},Y7=async(n,e)=>{const t=ye.toFiniteNumber(n.getContentLength());return t??K7(e)},Z7=TS&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:d}=Jz(n);c=c?(c+"").toLowerCase():"text";let f=G7([i,s&&s.toAbortSignal()],o),p;const y=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&X7&&t!=="get"&&t!=="head"&&(g=await Y7(u,r))!==0){let b=new Request(e,{method:"POST",body:r,duplex:"half"}),T;if(ye.isFormData(r)&&(T=b.headers.get("content-type"))&&u.setContentType(T),b.body){const[w,M]=mL(g,Q_(gL(l)));r=vL(b.body,_L,w,M)}}ye.isString(h)||(h=h?"include":"omit");const m="credentials"in Request.prototype;p=new Request(e,{...d,signal:f,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:m?h:void 0});let _=await fetch(p);const v=vE&&(c==="stream"||c==="response");if(vE&&(a||v&&y)){const b={};["status","statusText","headers"].forEach(A=>{b[A]=_[A]});const T=ye.toFiniteNumber(_.headers.get("content-length")),[w,M]=a&&mL(T,Q_(gL(a),!0))||[];_=new Response(vL(_.body,_L,w,()=>{M&&M(),y&&y()}),b)}c=c||"text";let x=await J_[ye.findKey(J_,c)||"text"](_,n);return!v&&y&&y(),await new Promise((b,T)=>{Zz(b,T,{data:x,headers:Di.from(_.headers),status:_.status,statusText:_.statusText,config:n,request:p})})}catch(m){throw y&&y(),m&&m.name==="TypeError"&&/fetch/i.test(m.message)?Object.assign(new St("Network Error",St.ERR_NETWORK,n,p),{cause:m.cause||m}):St.from(m,m&&m.code,n,p)}}),_E={http:d7,xhr:V7,fetch:Z7};ye.forEach(_E,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const xL=n=>`- ${n}`,Q7=n=>ye.isFunction(n)||n===null||n===!1,n4={getAdapter:n=>{n=ye.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!Q7(t)&&(r=_E[(o=String(t)).toLowerCase()],r===void 0))throw new St(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(xL).join(`
`):" "+xL(s[0]):"as no adapter specified";throw new St("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:_E};function Z1(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Jf(null,n)}function SL(n){return Z1(n),n.headers=Di.from(n.headers),n.data=Y1.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),n4.getAdapter(n.adapter||oy.adapter)(n).then(function(r){return Z1(n),r.data=Y1.call(n,n.transformResponse,r),r.headers=Di.from(r.headers),r},function(r){return Yz(r)||(Z1(n),r&&r.response&&(r.response.data=Y1.call(n,n.transformResponse,r.response),r.response.headers=Di.from(r.response.headers))),Promise.reject(r)})}const r4="1.7.7",dN={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{dN[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const bL={};dN.transitional=function(e,t,r){function i(s,o){return"[Axios v"+r4+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new St(i(o," has been removed"+(t?" in "+t:"")),St.ERR_DEPRECATED);return t&&!bL[o]&&(bL[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function J7(n,e,t){if(typeof n!="object")throw new St("options must be an object",St.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new St("option "+s+" must be "+l,St.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new St("Unknown option "+s,St.ERR_BAD_OPTION)}}const xE={assertOptions:J7,validators:dN},gl=xE.validators;let Au=class{constructor(e){this.defaults=e,this.interceptors={request:new fL,response:new fL}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=zu(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&xE.assertOptions(r,{silentJSONParsing:gl.transitional(gl.boolean),forcedJSONParsing:gl.transitional(gl.boolean),clarifyTimeoutError:gl.transitional(gl.boolean)},!1),i!=null&&(ye.isFunction(i)?t.paramsSerializer={serialize:i}:xE.assertOptions(i,{encode:gl.function,serialize:gl.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&ye.merge(s.common,s[t.method]);s&&ye.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),t.headers=Di.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(t)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let u,h=0,d;if(!l){const p=[SL.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,c),d=p.length,u=Promise.resolve(t);h<d;)u=u.then(p[h++],p[h++]);return u}d=a.length;let f=t;for(h=0;h<d;){const p=a[h++],y=a[h++];try{f=p(f)}catch(g){y.call(this,g);break}}try{u=SL.call(this,f)}catch(p){return Promise.reject(p)}for(h=0,d=c.length;h<d;)u=u.then(c[h++],c[h++]);return u}getUri(e){e=zu(this.defaults,e);const t=Qz(e.baseURL,e.url);return qz(t,e.params,e.paramsSerializer)}};ye.forEach(["delete","get","head","options"],function(e){Au.prototype[e]=function(t,r){return this.request(zu(r||{},{method:e,url:t,data:(r||{}).data}))}});ye.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(zu(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Au.prototype[e]=t(),Au.prototype[e+"Form"]=t(!0)});class fN{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Jf(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new fN(function(i){e=i}),cancel:e}}}function eq(n){return function(t){return n.apply(null,t)}}function tq(n){return ye.isObject(n)&&n.isAxiosError===!0}const SE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(SE).forEach(([n,e])=>{SE[e]=n});function i4(n){const e=new Au(n),t=Fz(Au.prototype.request,e);return ye.extend(t,Au.prototype,e,{allOwnKeys:!0}),ye.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return i4(zu(n,i))},t}const cr=i4(oy);cr.Axios=Au;cr.CanceledError=Jf;cr.CancelToken=fN;cr.isCancel=Yz;cr.VERSION=r4;cr.toFormData=wS;cr.AxiosError=St;cr.Cancel=cr.CanceledError;cr.all=function(e){return Promise.all(e)};cr.spread=eq;cr.isAxiosError=tq;cr.mergeConfig=zu;cr.AxiosHeaders=Di;cr.formToJSON=n=>Kz(ye.isHTMLForm(n)?new FormData(n):n);cr.getAdapter=n4.getAdapter;cr.HttpStatusCode=SE;cr.default=cr;const s4=cr.create({baseURL:"https://ddragon.leagueoflegends.com/cdn",headers:{"Content-Type":"application/json"}}),nq=async n=>await s4.get(`/14.23.1/data/${n.language}/champion.json`).then(e=>e.data),rq=async n=>await s4.get(`/14.23.1/data/${n.language}/champion/${n.champId}.json`,{}).then(e=>e.data);var ay=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$u=typeof window>"u"||"Deno"in globalThis;function bs(){}function iq(n,e){return typeof n=="function"?n(e):n}function bE(n){return typeof n=="number"&&n>=0&&n!==1/0}function o4(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Ud(n,e){return typeof n=="function"?n(e):n}function ao(n,e){return typeof n=="function"?n(e):n}function wL(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==pN(o,e.options))return!1}else if(!Tg(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function TL(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(wg(e.options.mutationKey)!==wg(s))return!1}else if(!Tg(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function pN(n,e){return((e==null?void 0:e.queryKeyHashFn)||wg)(n)}function wg(n){return JSON.stringify(n,(e,t)=>TE(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function Tg(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Tg(n[t],e[t])):!1}function a4(n,e){if(n===e)return n;const t=ML(n)&&ML(e);if(t||TE(n)&&TE(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{};let l=0;for(let c=0;c<o;c++){const u=t?c:s[c];(!t&&r.includes(u)||t)&&n[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=a4(n[u],e[u]),a[u]===n[u]&&n[u]!==void 0&&l++)}return i===o&&l===i?n:a}return e}function wE(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function ML(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function TE(n){if(!EL(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!EL(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function EL(n){return Object.prototype.toString.call(n)==="[object Object]"}function sq(n){return new Promise(e=>{setTimeout(e,n)})}function ME(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?a4(n,e):e}function oq(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function aq(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var mN=Symbol();function l4(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===mN?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var _u,ql,tf,pB,lq=(pB=class extends ay{constructor(){super();yt(this,_u);yt(this,ql);yt(this,tf);tt(this,tf,e=>{if(!$u&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ee(this,ql)||this.setEventListener(ee(this,tf))}onUnsubscribe(){var e;this.hasListeners()||((e=ee(this,ql))==null||e.call(this),tt(this,ql,void 0))}setEventListener(e){var t;tt(this,tf,e),(t=ee(this,ql))==null||t.call(this),tt(this,ql,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ee(this,_u)!==e&&(tt(this,_u,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ee(this,_u)=="boolean"?ee(this,_u):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},_u=new WeakMap,ql=new WeakMap,tf=new WeakMap,pB),gN=new lq,nf,Xl,rf,mB,cq=(mB=class extends ay{constructor(){super();yt(this,nf,!0);yt(this,Xl);yt(this,rf);tt(this,rf,e=>{if(!$u&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ee(this,Xl)||this.setEventListener(ee(this,rf))}onUnsubscribe(){var e;this.hasListeners()||((e=ee(this,Xl))==null||e.call(this),tt(this,Xl,void 0))}setEventListener(e){var t;tt(this,rf,e),(t=ee(this,Xl))==null||t.call(this),tt(this,Xl,e(this.setOnline.bind(this)))}setOnline(e){ee(this,nf)!==e&&(tt(this,nf,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ee(this,nf)}},nf=new WeakMap,Xl=new WeakMap,rf=new WeakMap,mB),ex=new cq;function EE(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function uq(n){return Math.min(1e3*2**n,3e4)}function c4(n){return(n??"online")==="online"?ex.isOnline():!0}var u4=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Q1(n){return n instanceof u4}function h4(n){let e=!1,t=0,r=!1,i;const s=EE(),o=y=>{var g;r||(d(new u4(y)),(g=n.abort)==null||g.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>gN.isFocused()&&(n.networkMode==="always"||ex.isOnline())&&n.canRun(),u=()=>c4(n.networkMode)&&n.canRun(),h=y=>{var g;r||(r=!0,(g=n.onSuccess)==null||g.call(n,y),i==null||i(),s.resolve(y))},d=y=>{var g;r||(r=!0,(g=n.onError)==null||g.call(n,y),i==null||i(),s.reject(y))},f=()=>new Promise(y=>{var g;i=m=>{(r||c())&&y(m)},(g=n.onPause)==null||g.call(n)}).then(()=>{var y;i=void 0,r||(y=n.onContinue)==null||y.call(n)}),p=()=>{if(r)return;let y;const g=t===0?n.initialPromise:void 0;try{y=g??n.fn()}catch(m){y=Promise.reject(m)}Promise.resolve(y).then(h).catch(m=>{var T;if(r)return;const _=n.retry??($u?0:3),v=n.retryDelay??uq,x=typeof v=="function"?v(t,m):v,b=_===!0||typeof _=="number"&&t<_||typeof _=="function"&&_(t,m);if(e||!b){d(m);return}t++,(T=n.onFail)==null||T.call(n,t,m),sq(x).then(()=>c()?void 0:f()).then(()=>{e?d(m):p()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?p():f().then(p),s)}}function hq(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=a=>setTimeout(a,0);const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Fr=hq(),xu,gB,d4=(gB=class{constructor(){yt(this,xu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bE(this.gcTime)&&tt(this,xu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??($u?1/0:5*60*1e3))}clearGcTimeout(){ee(this,xu)&&(clearTimeout(ee(this,xu)),tt(this,xu,void 0))}},xu=new WeakMap,gB),sf,of,Ss,qr,Yg,Su,ro,ya,yB,dq=(yB=class extends d4{constructor(e){super();yt(this,ro);yt(this,sf);yt(this,of);yt(this,Ss);yt(this,qr);yt(this,Yg);yt(this,Su);tt(this,Su,!1),tt(this,Yg,e.defaultOptions),this.setOptions(e.options),this.observers=[],tt(this,Ss,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,tt(this,sf,fq(this.options)),this.state=e.state??ee(this,sf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ee(this,qr))==null?void 0:e.promise}setOptions(e){this.options={...ee(this,Yg),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ee(this,Ss).remove(this)}setData(e,t){const r=ME(this.state.data,e,this.options);return kt(this,ro,ya).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){kt(this,ro,ya).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=ee(this,qr))==null?void 0:r.promise;return(i=ee(this,qr))==null||i.cancel(e),t?t.then(bs).catch(bs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ee(this,sf))}isActive(){return this.observers.some(e=>ao(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===mN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!o4(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=ee(this,qr))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=ee(this,qr))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ee(this,Ss).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(ee(this,qr)&&(ee(this,Su)?ee(this,qr).cancel({revert:!0}):ee(this,qr).cancelRetry()),this.scheduleGc()),ee(this,Ss).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||kt(this,ro,ya).call(this,{type:"invalidate"})}fetch(e,t){var l,c,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(ee(this,qr))return ee(this,qr).continueRetry(),ee(this,qr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(d=>d.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(tt(this,Su,!0),r.signal)})},s=()=>{const h=l4(this.options,t),d={queryKey:this.queryKey,meta:this.meta};return i(d),tt(this,Su,!1),this.options.persister?this.options.persister(h,d,this):h(d)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};i(o),(l=this.options.behavior)==null||l.onFetch(o,this),tt(this,of,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=o.fetchOptions)==null?void 0:c.meta))&&kt(this,ro,ya).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const a=h=>{var d,f,p,y;Q1(h)&&h.silent||kt(this,ro,ya).call(this,{type:"error",error:h}),Q1(h)||((f=(d=ee(this,Ss).config).onError)==null||f.call(d,h,this),(y=(p=ee(this,Ss).config).onSettled)==null||y.call(p,this.state.data,h,this)),this.scheduleGc()};return tt(this,qr,h4({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var d,f,p,y;if(h===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(g){a(g);return}(f=(d=ee(this,Ss).config).onSuccess)==null||f.call(d,h,this),(y=(p=ee(this,Ss).config).onSettled)==null||y.call(p,h,this.state.error,this),this.scheduleGc()},onError:a,onFail:(h,d)=>{kt(this,ro,ya).call(this,{type:"failed",failureCount:h,error:d})},onPause:()=>{kt(this,ro,ya).call(this,{type:"pause"})},onContinue:()=>{kt(this,ro,ya).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),ee(this,qr).start()}},sf=new WeakMap,of=new WeakMap,Ss=new WeakMap,qr=new WeakMap,Yg=new WeakMap,Su=new WeakMap,ro=new WeakSet,ya=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...f4(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Q1(i)&&i.revert&&ee(this,of)?{...ee(this,of),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Fr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ee(this,Ss).notify({query:this,type:"updated",action:e})})},yB);function f4(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:c4(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function fq(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Io,vB,pq=(vB=class extends ay{constructor(e={}){super();yt(this,Io);this.config=e,tt(this,Io,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??pN(i,t);let o=this.get(s);return o||(o=new dq({cache:this,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ee(this,Io).has(e.queryHash)||(ee(this,Io).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ee(this,Io).get(e.queryHash);t&&(e.destroy(),t===e&&ee(this,Io).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Fr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ee(this,Io).get(e)}getAll(){return[...ee(this,Io).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>wL(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>wL(e,r)):t}notify(e){Fr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Io=new WeakMap,vB),Lo,ai,bu,Do,Dl,_B,mq=(_B=class extends d4{constructor(e){super();yt(this,Do);yt(this,Lo);yt(this,ai);yt(this,bu);this.mutationId=e.mutationId,tt(this,ai,e.mutationCache),tt(this,Lo,[]),this.state=e.state||gq(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ee(this,Lo).includes(e)||(ee(this,Lo).push(e),this.clearGcTimeout(),ee(this,ai).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){tt(this,Lo,ee(this,Lo).filter(t=>t!==e)),this.scheduleGc(),ee(this,ai).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ee(this,Lo).length||(this.state.status==="pending"?this.scheduleGc():ee(this,ai).remove(this))}continue(){var e;return((e=ee(this,bu))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,s,o,a,l,c,u,h,d,f,p,y,g,m,_,v,x,b,T,w;tt(this,bu,h4({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,A)=>{kt(this,Do,Dl).call(this,{type:"failed",failureCount:M,error:A})},onPause:()=>{kt(this,Do,Dl).call(this,{type:"pause"})},onContinue:()=>{kt(this,Do,Dl).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ee(this,ai).canRun(this)}));const t=this.state.status==="pending",r=!ee(this,bu).canStart();try{if(!t){kt(this,Do,Dl).call(this,{type:"pending",variables:e,isPaused:r}),await((s=(i=ee(this,ai).config).onMutate)==null?void 0:s.call(i,e,this));const A=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));A!==this.state.context&&kt(this,Do,Dl).call(this,{type:"pending",context:A,variables:e,isPaused:r})}const M=await ee(this,bu).start();return await((c=(l=ee(this,ai).config).onSuccess)==null?void 0:c.call(l,M,e,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,M,e,this.state.context)),await((f=(d=ee(this,ai).config).onSettled)==null?void 0:f.call(d,M,null,this.state.variables,this.state.context,this)),await((y=(p=this.options).onSettled)==null?void 0:y.call(p,M,null,e,this.state.context)),kt(this,Do,Dl).call(this,{type:"success",data:M}),M}catch(M){try{throw await((m=(g=ee(this,ai).config).onError)==null?void 0:m.call(g,M,e,this.state.context,this)),await((v=(_=this.options).onError)==null?void 0:v.call(_,M,e,this.state.context)),await((b=(x=ee(this,ai).config).onSettled)==null?void 0:b.call(x,void 0,M,this.state.variables,this.state.context,this)),await((w=(T=this.options).onSettled)==null?void 0:w.call(T,void 0,M,e,this.state.context)),M}finally{kt(this,Do,Dl).call(this,{type:"error",error:M})}}finally{ee(this,ai).runNext(this)}}},Lo=new WeakMap,ai=new WeakMap,bu=new WeakMap,Do=new WeakSet,Dl=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Fr.batch(()=>{ee(this,Lo).forEach(r=>{r.onMutationUpdate(e)}),ee(this,ai).notify({mutation:this,type:"updated",action:e})})},_B);function gq(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ns,Zg,xB,yq=(xB=class extends ay{constructor(e={}){super();yt(this,ns);yt(this,Zg);this.config=e,tt(this,ns,new Map),tt(this,Zg,Date.now())}build(e,t,r){const i=new mq({mutationCache:this,mutationId:++Uy(this,Zg)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){const t=n0(e),r=ee(this,ns).get(t)??[];r.push(e),ee(this,ns).set(t,r),this.notify({type:"added",mutation:e})}remove(e){var r;const t=n0(e);if(ee(this,ns).has(t)){const i=(r=ee(this,ns).get(t))==null?void 0:r.filter(s=>s!==e);i&&(i.length===0?ee(this,ns).delete(t):ee(this,ns).set(t,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const t=(r=ee(this,ns).get(n0(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!t||t===e}runNext(e){var r;const t=(r=ee(this,ns).get(n0(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){Fr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...ee(this,ns).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(r=>TL(t,r))}findAll(e={}){return this.getAll().filter(t=>TL(e,t))}notify(e){Fr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Fr.batch(()=>Promise.all(e.map(t=>t.continue().catch(bs))))}},ns=new WeakMap,Zg=new WeakMap,xB);function n0(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function CL(n){return{onFetch:(e,t)=>{var u,h,d,f,p;const r=e.options,i=(d=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:d.direction,s=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let y=!1;const g=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},m=l4(e.options,e.fetchOptions),_=async(v,x,b)=>{if(y)return Promise.reject();if(x==null&&v.pages.length)return Promise.resolve(v);const T={queryKey:e.queryKey,pageParam:x,direction:b?"backward":"forward",meta:e.options.meta};g(T);const w=await m(T),{maxPages:M}=e.options,A=b?aq:oq;return{pages:A(v.pages,w,M),pageParams:A(v.pageParams,x,M)}};if(i&&s.length){const v=i==="backward",x=v?vq:AL,b={pages:s,pageParams:o},T=x(r,b);a=await _(b,T,v)}else{const v=n??s.length;do{const x=l===0?o[0]??r.initialPageParam:AL(r,a);if(l>0&&x==null)break;a=await _(a,x),l++}while(l<v)}return a};e.options.persister?e.fetchFn=()=>{var y,g;return(g=(y=e.options).persister)==null?void 0:g.call(y,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function AL(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function vq(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Wn,Kl,Yl,af,lf,Zl,cf,uf,SB,_q=(SB=class{constructor(n={}){yt(this,Wn);yt(this,Kl);yt(this,Yl);yt(this,af);yt(this,lf);yt(this,Zl);yt(this,cf);yt(this,uf);tt(this,Wn,n.queryCache||new pq),tt(this,Kl,n.mutationCache||new yq),tt(this,Yl,n.defaultOptions||{}),tt(this,af,new Map),tt(this,lf,new Map),tt(this,Zl,0)}mount(){Uy(this,Zl)._++,ee(this,Zl)===1&&(tt(this,cf,gN.subscribe(async n=>{n&&(await this.resumePausedMutations(),ee(this,Wn).onFocus())})),tt(this,uf,ex.subscribe(async n=>{n&&(await this.resumePausedMutations(),ee(this,Wn).onOnline())})))}unmount(){var n,e;Uy(this,Zl)._--,ee(this,Zl)===0&&((n=ee(this,cf))==null||n.call(this),tt(this,cf,void 0),(e=ee(this,uf))==null||e.call(this),tt(this,uf,void 0))}isFetching(n){return ee(this,Wn).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ee(this,Kl).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ee(this,Wn).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),r=ee(this,Wn).build(this,t);return n.revalidateIfStale&&r.isStaleByTime(Ud(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return ee(this,Wn).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=ee(this,Wn).get(r.queryHash),s=i==null?void 0:i.state.data,o=iq(e,s);if(o!==void 0)return ee(this,Wn).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Fr.batch(()=>ee(this,Wn).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ee(this,Wn).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ee(this,Wn);Fr.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ee(this,Wn),r={type:"active",...n};return Fr.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},r=Fr.batch(()=>ee(this,Wn).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(bs).catch(bs)}invalidateQueries(n={},e={}){return Fr.batch(()=>{if(ee(this,Wn).findAll(n).forEach(r=>{r.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Fr.batch(()=>ee(this,Wn).findAll(n).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(bs)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(bs)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ee(this,Wn).build(this,e);return t.isStaleByTime(Ud(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(bs).catch(bs)}fetchInfiniteQuery(n){return n.behavior=CL(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(bs).catch(bs)}ensureInfiniteQueryData(n){return n.behavior=CL(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return ex.isOnline()?ee(this,Kl).resumePausedMutations():Promise.resolve()}getQueryCache(){return ee(this,Wn)}getMutationCache(){return ee(this,Kl)}getDefaultOptions(){return ee(this,Yl)}setDefaultOptions(n){tt(this,Yl,n)}setQueryDefaults(n,e){ee(this,af).set(wg(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ee(this,af).values()];let t={};return e.forEach(r=>{Tg(n,r.queryKey)&&(t={...t,...r.defaultOptions})}),t}setMutationDefaults(n,e){ee(this,lf).set(wg(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ee(this,lf).values()];let t={};return e.forEach(r=>{Tg(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ee(this,Yl).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=pN(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===mN&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ee(this,Yl).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ee(this,Wn).clear(),ee(this,Kl).clear()}},Wn=new WeakMap,Kl=new WeakMap,Yl=new WeakMap,af=new WeakMap,lf=new WeakMap,Zl=new WeakMap,cf=new WeakMap,uf=new WeakMap,SB),bi,Ut,Qg,li,wu,hf,Ql,Fo,Jg,df,ff,Tu,Mu,Jl,pf,nn,vm,CE,AE,RE,NE,PE,IE,LE,p4,bB,xq=(bB=class extends ay{constructor(e,t){super();yt(this,nn);yt(this,bi);yt(this,Ut);yt(this,Qg);yt(this,li);yt(this,wu);yt(this,hf);yt(this,Ql);yt(this,Fo);yt(this,Jg);yt(this,df);yt(this,ff);yt(this,Tu);yt(this,Mu);yt(this,Jl);yt(this,pf,new Set);this.options=t,tt(this,bi,e),tt(this,Fo,null),tt(this,Ql,EE()),this.options.experimental_prefetchInRender||ee(this,Ql).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ee(this,Ut).addObserver(this),RL(ee(this,Ut),this.options)?kt(this,nn,vm).call(this):this.updateResult(),kt(this,nn,NE).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return DE(ee(this,Ut),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return DE(ee(this,Ut),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,kt(this,nn,PE).call(this),kt(this,nn,IE).call(this),ee(this,Ut).removeObserver(this)}setOptions(e,t){const r=this.options,i=ee(this,Ut);if(this.options=ee(this,bi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ao(this.options.enabled,ee(this,Ut))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");kt(this,nn,LE).call(this),ee(this,Ut).setOptions(this.options),r._defaulted&&!wE(this.options,r)&&ee(this,bi).getQueryCache().notify({type:"observerOptionsUpdated",query:ee(this,Ut),observer:this});const s=this.hasListeners();s&&NL(ee(this,Ut),i,this.options,r)&&kt(this,nn,vm).call(this),this.updateResult(t),s&&(ee(this,Ut)!==i||ao(this.options.enabled,ee(this,Ut))!==ao(r.enabled,ee(this,Ut))||Ud(this.options.staleTime,ee(this,Ut))!==Ud(r.staleTime,ee(this,Ut)))&&kt(this,nn,CE).call(this);const o=kt(this,nn,AE).call(this);s&&(ee(this,Ut)!==i||ao(this.options.enabled,ee(this,Ut))!==ao(r.enabled,ee(this,Ut))||o!==ee(this,Jl))&&kt(this,nn,RE).call(this,o)}getOptimisticResult(e){const t=ee(this,bi).getQueryCache().build(ee(this,bi),e),r=this.createResult(t,e);return bq(this,r)&&(tt(this,li,r),tt(this,hf,this.options),tt(this,wu,ee(this,Ut).state)),r}getCurrentResult(){return ee(this,li)}trackResult(e,t){const r={};return Object.keys(e).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),t==null||t(i),e[i])})}),r}trackProp(e){ee(this,pf).add(e)}getCurrentQuery(){return ee(this,Ut)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=ee(this,bi).defaultQueryOptions(e),r=ee(this,bi).getQueryCache().build(ee(this,bi),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return kt(this,nn,vm).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ee(this,li)))}createResult(e,t){var M;const r=ee(this,Ut),i=this.options,s=ee(this,li),o=ee(this,wu),a=ee(this,hf),c=e!==r?e.state:ee(this,Qg),{state:u}=e;let h={...u},d=!1,f;if(t._optimisticResults){const A=this.hasListeners(),S=!A&&RL(e,t),E=A&&NL(e,r,t,i);(S||E)&&(h={...h,...f4(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:p,errorUpdatedAt:y,status:g}=h;if(t.select&&h.data!==void 0)if(s&&h.data===(o==null?void 0:o.data)&&t.select===ee(this,Jg))f=ee(this,df);else try{tt(this,Jg,t.select),f=t.select(h.data),f=ME(s==null?void 0:s.data,f,t),tt(this,df,f),tt(this,Fo,null)}catch(A){tt(this,Fo,A)}else f=h.data;if(t.placeholderData!==void 0&&f===void 0&&g==="pending"){let A;if(s!=null&&s.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData))A=s.data;else if(A=typeof t.placeholderData=="function"?t.placeholderData((M=ee(this,ff))==null?void 0:M.state.data,ee(this,ff)):t.placeholderData,t.select&&A!==void 0)try{A=t.select(A),tt(this,Fo,null)}catch(S){tt(this,Fo,S)}A!==void 0&&(g="success",f=ME(s==null?void 0:s.data,A,t),d=!0)}ee(this,Fo)&&(p=ee(this,Fo),f=ee(this,df),y=Date.now(),g="error");const m=h.fetchStatus==="fetching",_=g==="pending",v=g==="error",x=_&&m,b=f!==void 0,w={status:g,fetchStatus:h.fetchStatus,isPending:_,isSuccess:g==="success",isError:v,isInitialLoading:x,isLoading:x,data:f,dataUpdatedAt:h.dataUpdatedAt,error:p,errorUpdatedAt:y,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:m,isRefetching:m&&!_,isLoadingError:v&&!b,isPaused:h.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:v&&b,isStale:yN(e,t),refetch:this.refetch,promise:ee(this,Ql)};if(this.options.experimental_prefetchInRender){const A=I=>{w.status==="error"?I.reject(w.error):w.data!==void 0&&I.resolve(w.data)},S=()=>{const I=tt(this,Ql,w.promise=EE());A(I)},E=ee(this,Ql);switch(E.status){case"pending":e.queryHash===r.queryHash&&A(E);break;case"fulfilled":(w.status==="error"||w.data!==E.value)&&S();break;case"rejected":(w.status!=="error"||w.error!==E.reason)&&S();break}}return w}updateResult(e){const t=ee(this,li),r=this.createResult(ee(this,Ut),this.options);if(tt(this,wu,ee(this,Ut).state),tt(this,hf,this.options),ee(this,wu).data!==void 0&&tt(this,ff,ee(this,Ut)),wE(r,t))return;tt(this,li,r);const i={},s=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!ee(this,pf).size)return!0;const l=new Set(a??ee(this,pf));return this.options.throwOnError&&l.add("error"),Object.keys(ee(this,li)).some(c=>{const u=c;return ee(this,li)[u]!==t[u]&&l.has(u)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),kt(this,nn,p4).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&kt(this,nn,NE).call(this)}},bi=new WeakMap,Ut=new WeakMap,Qg=new WeakMap,li=new WeakMap,wu=new WeakMap,hf=new WeakMap,Ql=new WeakMap,Fo=new WeakMap,Jg=new WeakMap,df=new WeakMap,ff=new WeakMap,Tu=new WeakMap,Mu=new WeakMap,Jl=new WeakMap,pf=new WeakMap,nn=new WeakSet,vm=function(e){kt(this,nn,LE).call(this);let t=ee(this,Ut).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(bs)),t},CE=function(){kt(this,nn,PE).call(this);const e=Ud(this.options.staleTime,ee(this,Ut));if($u||ee(this,li).isStale||!bE(e))return;const r=o4(ee(this,li).dataUpdatedAt,e)+1;tt(this,Tu,setTimeout(()=>{ee(this,li).isStale||this.updateResult()},r))},AE=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ee(this,Ut)):this.options.refetchInterval)??!1},RE=function(e){kt(this,nn,IE).call(this),tt(this,Jl,e),!($u||ao(this.options.enabled,ee(this,Ut))===!1||!bE(ee(this,Jl))||ee(this,Jl)===0)&&tt(this,Mu,setInterval(()=>{(this.options.refetchIntervalInBackground||gN.isFocused())&&kt(this,nn,vm).call(this)},ee(this,Jl)))},NE=function(){kt(this,nn,CE).call(this),kt(this,nn,RE).call(this,kt(this,nn,AE).call(this))},PE=function(){ee(this,Tu)&&(clearTimeout(ee(this,Tu)),tt(this,Tu,void 0))},IE=function(){ee(this,Mu)&&(clearInterval(ee(this,Mu)),tt(this,Mu,void 0))},LE=function(){const e=ee(this,bi).getQueryCache().build(ee(this,bi),this.options);if(e===ee(this,Ut))return;const t=ee(this,Ut);tt(this,Ut,e),tt(this,Qg,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},p4=function(e){Fr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(ee(this,li))}),ee(this,bi).getQueryCache().notify({query:ee(this,Ut),type:"observerResultsUpdated"})})},bB);function Sq(n,e){return ao(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function RL(n,e){return Sq(n,e)||n.state.data!==void 0&&DE(n,e,e.refetchOnMount)}function DE(n,e,t){if(ao(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&yN(n,e)}return!1}function NL(n,e,t,r){return(n!==e||ao(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&yN(n,t)}function yN(n,e){return ao(e.enabled,n)!==!1&&n.isStaleByTime(Ud(e.staleTime,n))}function bq(n,e){return!wE(n.getCurrentResult(),e)}var m4=P.createContext(void 0),wq=n=>{const e=P.useContext(m4);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Tq=({client:n,children:e})=>(P.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),H.jsx(m4.Provider,{value:n,children:e})),g4=P.createContext(!1),Mq=()=>P.useContext(g4);g4.Provider;function Eq(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var Cq=P.createContext(Eq()),Aq=()=>P.useContext(Cq);function Rq(n,e){return typeof n=="function"?n(...e):!!n}function Nq(){}var Pq=(n,e)=>{(n.suspense||n.throwOnError)&&(e.isReset()||(n.retryOnMount=!1))},Iq=n=>{P.useEffect(()=>{n.clearReset()},[n])},Lq=({result:n,errorResetBoundary:e,throwOnError:t,query:r})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&Rq(t,[n.error,r]),Dq=n=>{n.suspense&&(n.staleTime===void 0&&(n.staleTime=1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},Fq=(n,e)=>n.isLoading&&n.isFetching&&!e,Oq=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,PL=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function kq(n,e,t){var u,h,d,f,p;const r=wq(),i=Mq(),s=Aq(),o=r.defaultQueryOptions(n);(h=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||h.call(u,o),o._optimisticResults=i?"isRestoring":"optimistic",Dq(o),Pq(o,s),Iq(s);const a=!r.getQueryCache().get(o.queryHash),[l]=P.useState(()=>new e(r,o)),c=l.getOptimisticResult(o);if(P.useSyncExternalStore(P.useCallback(y=>{const g=i?()=>{}:l.subscribe(Fr.batchCalls(y));return l.updateResult(),g},[l,i]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),P.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),Oq(o,c))throw PL(o,l,s);if(Lq({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw c.error;if((f=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_afterQuery)==null||f.call(d,o,c),o.experimental_prefetchInRender&&!$u&&Fq(c,i)){const y=a?PL(o,l,s):(p=r.getQueryCache().get(o.queryHash))==null?void 0:p.promise;y==null||y.catch(Nq).finally(()=>{l.hasListeners()||l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function y4(n,e){return kq(n,xq)}const Uq=n=>y4({queryKey:["championList",n],queryFn:async()=>await nq(n)}),Bq=(n,e)=>y4({queryKey:["championDetail",n],queryFn:async()=>await rq(n),enabled:!!n.champId}),Mg={black:"#000",white:"#fff"},fh={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},ph={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},v4={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},mh={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},gh={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},yh={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Ep={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},zq={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},tx={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64"};function tl(n,...e){const t=new URL(`https://mui.com/production-error/?code=${n}`);return e.forEach(r=>t.searchParams.append("args[]",r)),`Minified MUI error #${n}; visit ${t} for the full message.`}const vo="$$material";function ni(){return ni=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ni.apply(null,arguments)}function $q(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var Vq=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Gq=$q(function(n){return Vq.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),Hq=!1;function Wq(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function jq(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var qq=function(){function n(t){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!Hq:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(jq(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Wq(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},n}(),jr="-ms-",nx="-moz-",qt="-webkit-",_4="comm",vN="rule",_N="decl",Xq="@import",x4="@keyframes",Kq="@layer",Yq=Math.abs,MS=String.fromCharCode,Zq=Object.assign;function Qq(n,e){return Lr(n,0)^45?(((e<<2^Lr(n,0))<<2^Lr(n,1))<<2^Lr(n,2))<<2^Lr(n,3):0}function S4(n){return n.trim()}function Jq(n,e){return(n=e.exec(n))?n[0]:n}function Xt(n,e,t){return n.replace(e,t)}function FE(n,e){return n.indexOf(e)}function Lr(n,e){return n.charCodeAt(e)|0}function Eg(n,e,t){return n.slice(e,t)}function Oo(n){return n.length}function xN(n){return n.length}function r0(n,e){return e.push(n),n}function eX(n,e){return n.map(e).join("")}var ES=1,bf=1,b4=0,ki=0,rr=0,ep="";function CS(n,e,t,r,i,s,o){return{value:n,root:e,parent:t,type:r,props:i,children:s,line:ES,column:bf,length:o,return:""}}function Cp(n,e){return Zq(CS("",null,null,"",null,null,0),n,{length:-n.length},e)}function tX(){return rr}function nX(){return rr=ki>0?Lr(ep,--ki):0,bf--,rr===10&&(bf=1,ES--),rr}function us(){return rr=ki<b4?Lr(ep,ki++):0,bf++,rr===10&&(bf=1,ES++),rr}function jo(){return Lr(ep,ki)}function Xv(){return ki}function ly(n,e){return Eg(ep,n,e)}function Cg(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function w4(n){return ES=bf=1,b4=Oo(ep=n),ki=0,[]}function T4(n){return ep="",n}function Kv(n){return S4(ly(ki-1,OE(n===91?n+2:n===40?n+1:n)))}function rX(n){for(;(rr=jo())&&rr<33;)us();return Cg(n)>2||Cg(rr)>3?"":" "}function iX(n,e){for(;--e&&us()&&!(rr<48||rr>102||rr>57&&rr<65||rr>70&&rr<97););return ly(n,Xv()+(e<6&&jo()==32&&us()==32))}function OE(n){for(;us();)switch(rr){case n:return ki;case 34:case 39:n!==34&&n!==39&&OE(rr);break;case 40:n===41&&OE(n);break;case 92:us();break}return ki}function sX(n,e){for(;us()&&n+rr!==57;)if(n+rr===84&&jo()===47)break;return"/*"+ly(e,ki-1)+"*"+MS(n===47?n:us())}function oX(n){for(;!Cg(jo());)us();return ly(n,ki)}function aX(n){return T4(Yv("",null,null,null,[""],n=w4(n),0,[0],n))}function Yv(n,e,t,r,i,s,o,a,l){for(var c=0,u=0,h=o,d=0,f=0,p=0,y=1,g=1,m=1,_=0,v="",x=i,b=s,T=r,w=v;g;)switch(p=_,_=us()){case 40:if(p!=108&&Lr(w,h-1)==58){FE(w+=Xt(Kv(_),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:w+=Kv(_);break;case 9:case 10:case 13:case 32:w+=rX(p);break;case 92:w+=iX(Xv()-1,7);continue;case 47:switch(jo()){case 42:case 47:r0(lX(sX(us(),Xv()),e,t),l);break;default:w+="/"}break;case 123*y:a[c++]=Oo(w)*m;case 125*y:case 59:case 0:switch(_){case 0:case 125:g=0;case 59+u:m==-1&&(w=Xt(w,/\f/g,"")),f>0&&Oo(w)-h&&r0(f>32?LL(w+";",r,t,h-1):LL(Xt(w," ","")+";",r,t,h-2),l);break;case 59:w+=";";default:if(r0(T=IL(w,e,t,c,u,i,a,v,x=[],b=[],h),s),_===123)if(u===0)Yv(w,e,T,T,x,s,h,a,b);else switch(d===99&&Lr(w,3)===110?100:d){case 100:case 108:case 109:case 115:Yv(n,T,T,r&&r0(IL(n,T,T,0,0,i,a,v,i,x=[],h),b),i,b,h,a,r?x:b);break;default:Yv(w,T,T,T,[""],b,0,a,b)}}c=u=f=0,y=m=1,v=w="",h=o;break;case 58:h=1+Oo(w),f=p;default:if(y<1){if(_==123)--y;else if(_==125&&y++==0&&nX()==125)continue}switch(w+=MS(_),_*y){case 38:m=u>0?1:(w+="\f",-1);break;case 44:a[c++]=(Oo(w)-1)*m,m=1;break;case 64:jo()===45&&(w+=Kv(us())),d=jo(),u=h=Oo(v=w+=oX(Xv())),_++;break;case 45:p===45&&Oo(w)==2&&(y=0)}}return s}function IL(n,e,t,r,i,s,o,a,l,c,u){for(var h=i-1,d=i===0?s:[""],f=xN(d),p=0,y=0,g=0;p<r;++p)for(var m=0,_=Eg(n,h+1,h=Yq(y=o[p])),v=n;m<f;++m)(v=S4(y>0?d[m]+" "+_:Xt(_,/&\f/g,d[m])))&&(l[g++]=v);return CS(n,e,t,i===0?vN:a,l,c,u)}function lX(n,e,t){return CS(n,e,t,_4,MS(tX()),Eg(n,2,-2),0)}function LL(n,e,t,r){return CS(n,e,t,_N,Eg(n,0,r),Eg(n,r+1,-1),r)}function Bd(n,e){for(var t="",r=xN(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function cX(n,e,t,r){switch(n.type){case Kq:if(n.children.length)break;case Xq:case _N:return n.return=n.return||n.value;case _4:return"";case x4:return n.return=n.value+"{"+Bd(n.children,r)+"}";case vN:n.value=n.props.join(",")}return Oo(t=Bd(n.children,r))?n.return=n.value+"{"+t+"}":""}function uX(n){var e=xN(n);return function(t,r,i,s){for(var o="",a=0;a<e;a++)o+=n[a](t,r,i,s)||"";return o}}function hX(n){return function(e){e.root||(e=e.return)&&n(e)}}var dX=function(e,t,r){for(var i=0,s=0;i=s,s=jo(),i===38&&s===12&&(t[r]=1),!Cg(s);)us();return ly(e,ki)},fX=function(e,t){var r=-1,i=44;do switch(Cg(i)){case 0:i===38&&jo()===12&&(t[r]=1),e[r]+=dX(ki-1,t,r);break;case 2:e[r]+=Kv(i);break;case 4:if(i===44){e[++r]=jo()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=MS(i)}while(i=us());return e},pX=function(e,t){return T4(fX(w4(e),t))},DL=new WeakMap,mX=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!DL.get(r))&&!i){DL.set(e,!0);for(var s=[],o=pX(t,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},gX=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function M4(n,e){switch(Qq(n,e)){case 5103:return qt+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return qt+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return qt+n+nx+n+jr+n+n;case 6828:case 4268:return qt+n+jr+n+n;case 6165:return qt+n+jr+"flex-"+n+n;case 5187:return qt+n+Xt(n,/(\w+).+(:[^]+)/,qt+"box-$1$2"+jr+"flex-$1$2")+n;case 5443:return qt+n+jr+"flex-item-"+Xt(n,/flex-|-self/,"")+n;case 4675:return qt+n+jr+"flex-line-pack"+Xt(n,/align-content|flex-|-self/,"")+n;case 5548:return qt+n+jr+Xt(n,"shrink","negative")+n;case 5292:return qt+n+jr+Xt(n,"basis","preferred-size")+n;case 6060:return qt+"box-"+Xt(n,"-grow","")+qt+n+jr+Xt(n,"grow","positive")+n;case 4554:return qt+Xt(n,/([^-])(transform)/g,"$1"+qt+"$2")+n;case 6187:return Xt(Xt(Xt(n,/(zoom-|grab)/,qt+"$1"),/(image-set)/,qt+"$1"),n,"")+n;case 5495:case 3959:return Xt(n,/(image-set\([^]*)/,qt+"$1$`$1");case 4968:return Xt(Xt(n,/(.+:)(flex-)?(.*)/,qt+"box-pack:$3"+jr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+qt+n+n;case 4095:case 3583:case 4068:case 2532:return Xt(n,/(.+)-inline(.+)/,qt+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Oo(n)-1-e>6)switch(Lr(n,e+1)){case 109:if(Lr(n,e+4)!==45)break;case 102:return Xt(n,/(.+:)(.+)-([^]+)/,"$1"+qt+"$2-$3$1"+nx+(Lr(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~FE(n,"stretch")?M4(Xt(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Lr(n,e+1)!==115)break;case 6444:switch(Lr(n,Oo(n)-3-(~FE(n,"!important")&&10))){case 107:return Xt(n,":",":"+qt)+n;case 101:return Xt(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+qt+(Lr(n,14)===45?"inline-":"")+"box$3$1"+qt+"$2$3$1"+jr+"$2box$3")+n}break;case 5936:switch(Lr(n,e+11)){case 114:return qt+n+jr+Xt(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return qt+n+jr+Xt(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return qt+n+jr+Xt(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return qt+n+jr+n+n}return n}var yX=function(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case _N:e.return=M4(e.value,e.length);break;case x4:return Bd([Cp(e,{value:Xt(e.value,"@","@"+qt)})],i);case vN:if(e.length)return eX(e.props,function(s){switch(Jq(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Bd([Cp(e,{props:[Xt(s,/:(read-\w+)/,":"+nx+"$1")]})],i);case"::placeholder":return Bd([Cp(e,{props:[Xt(s,/:(plac\w+)/,":"+qt+"input-$1")]}),Cp(e,{props:[Xt(s,/:(plac\w+)/,":"+nx+"$1")]}),Cp(e,{props:[Xt(s,/:(plac\w+)/,jr+"input-$1")]})],i)}return""})}},vX=[yX],_X=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){var g=y.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var i=e.stylisPlugins||vX,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var g=y.getAttribute("data-emotion").split(" "),m=1;m<g.length;m++)s[g[m]]=!0;a.push(y)});var l,c=[mX,gX];{var u,h=[cX,hX(function(y){u.insert(y)})],d=uX(c.concat(i,h)),f=function(g){return Bd(aX(g),d)};l=function(g,m,_,v){u=_,f(g?g+"{"+m.styles+"}":m.styles),v&&(p.inserted[m.name]=!0)}}var p={key:t,sheet:new qq({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p},E4={exports:{}},hn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ar=typeof Symbol=="function"&&Symbol.for,SN=Ar?Symbol.for("react.element"):60103,bN=Ar?Symbol.for("react.portal"):60106,AS=Ar?Symbol.for("react.fragment"):60107,RS=Ar?Symbol.for("react.strict_mode"):60108,NS=Ar?Symbol.for("react.profiler"):60114,PS=Ar?Symbol.for("react.provider"):60109,IS=Ar?Symbol.for("react.context"):60110,wN=Ar?Symbol.for("react.async_mode"):60111,LS=Ar?Symbol.for("react.concurrent_mode"):60111,DS=Ar?Symbol.for("react.forward_ref"):60112,FS=Ar?Symbol.for("react.suspense"):60113,xX=Ar?Symbol.for("react.suspense_list"):60120,OS=Ar?Symbol.for("react.memo"):60115,kS=Ar?Symbol.for("react.lazy"):60116,SX=Ar?Symbol.for("react.block"):60121,bX=Ar?Symbol.for("react.fundamental"):60117,wX=Ar?Symbol.for("react.responder"):60118,TX=Ar?Symbol.for("react.scope"):60119;function ms(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case SN:switch(n=n.type,n){case wN:case LS:case AS:case NS:case RS:case FS:return n;default:switch(n=n&&n.$$typeof,n){case IS:case DS:case kS:case OS:case PS:return n;default:return e}}case bN:return e}}}function C4(n){return ms(n)===LS}hn.AsyncMode=wN;hn.ConcurrentMode=LS;hn.ContextConsumer=IS;hn.ContextProvider=PS;hn.Element=SN;hn.ForwardRef=DS;hn.Fragment=AS;hn.Lazy=kS;hn.Memo=OS;hn.Portal=bN;hn.Profiler=NS;hn.StrictMode=RS;hn.Suspense=FS;hn.isAsyncMode=function(n){return C4(n)||ms(n)===wN};hn.isConcurrentMode=C4;hn.isContextConsumer=function(n){return ms(n)===IS};hn.isContextProvider=function(n){return ms(n)===PS};hn.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===SN};hn.isForwardRef=function(n){return ms(n)===DS};hn.isFragment=function(n){return ms(n)===AS};hn.isLazy=function(n){return ms(n)===kS};hn.isMemo=function(n){return ms(n)===OS};hn.isPortal=function(n){return ms(n)===bN};hn.isProfiler=function(n){return ms(n)===NS};hn.isStrictMode=function(n){return ms(n)===RS};hn.isSuspense=function(n){return ms(n)===FS};hn.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===AS||n===LS||n===NS||n===RS||n===FS||n===xX||typeof n=="object"&&n!==null&&(n.$$typeof===kS||n.$$typeof===OS||n.$$typeof===PS||n.$$typeof===IS||n.$$typeof===DS||n.$$typeof===bX||n.$$typeof===wX||n.$$typeof===TX||n.$$typeof===SX)};hn.typeOf=ms;E4.exports=hn;var MX=E4.exports,A4=MX,EX={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},CX={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},R4={};R4[A4.ForwardRef]=EX;R4[A4.Memo]=CX;var AX=!0;function RX(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):i&&(r+=i+" ")}),r}var N4=function(e,t,r){var i=e.key+"-"+t.name;(r===!1||AX===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},P4=function(e,t,r){N4(e,t,r);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function NX(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var PX={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function IX(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var LX=!1,DX=/[A-Z]|^ms/g,FX=/_EMO_([^_]+?)_([^]*?)_EMO_/g,I4=function(e){return e.charCodeAt(1)===45},FL=function(e){return e!=null&&typeof e!="boolean"},J1=IX(function(n){return I4(n)?n:n.replace(DX,"-$&").toLowerCase()}),OL=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(FX,function(r,i,s){return ko={name:i,styles:s,next:ko},i})}return PX[e]!==1&&!I4(e)&&typeof t=="number"&&t!==0?t+"px":t},OX="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Ag(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return ko={name:i.name,styles:i.styles,next:ko},i.name;var s=t;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)ko={name:o.name,styles:o.styles,next:ko},o=o.next;var a=s.styles+";";return a}return kX(n,e,t)}case"function":{if(n!==void 0){var l=ko,c=t(n);return ko=l,Ag(n,e,c)}break}}var u=t;if(e==null)return u;var h=e[u];return h!==void 0?h:u}function kX(n,e,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=Ag(n,e,t[i])+";";else for(var s in t){var o=t[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?r+=s+"{"+e[a]+"}":FL(a)&&(r+=J1(s)+":"+OL(s,a)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&LX)throw new Error(OX);if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)FL(o[l])&&(r+=J1(s)+":"+OL(s,o[l])+";");else{var c=Ag(n,e,o);switch(s){case"animation":case"animationName":{r+=J1(s)+":"+c+";";break}default:r+=s+"{"+c+"}"}}}}return r}var kL=/label:\s*([^\s;{]+)\s*(;|$)/g,ko;function US(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,i="";ko=void 0;var s=n[0];if(s==null||s.raw===void 0)r=!1,i+=Ag(t,e,s);else{var o=s;i+=o[0]}for(var a=1;a<n.length;a++)if(i+=Ag(t,e,n[a]),r){var l=s;i+=l[a]}kL.lastIndex=0;for(var c="",u;(u=kL.exec(i))!==null;)c+="-"+u[1];var h=NX(i)+c;return{name:h,styles:i,next:ko}}var UX=function(e){return e()},L4=C_.useInsertionEffect?C_.useInsertionEffect:!1,BX=L4||UX,UL=L4||P.useLayoutEffect,D4=P.createContext(typeof HTMLElement<"u"?_X({key:"css"}):null);D4.Provider;var F4=function(e){return P.forwardRef(function(t,r){var i=P.useContext(D4);return e(t,i,r)})},BS=P.createContext({}),zX=F4(function(n,e){var t=n.styles,r=US([t],void 0,P.useContext(BS)),i=P.useRef();return UL(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),UL(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&P4(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function TN(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return US(e)}var cy=function(){var e=TN.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},$X=Gq,VX=function(e){return e!=="theme"},BL=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?$X:VX},zL=function(e,t,r){var i;if(t){var s=t.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},GX=!1,HX=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return N4(t,r,i),BX(function(){return P4(t,r,i)}),null},WX=function n(e,t){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;t!==void 0&&(s=t.label,o=t.target);var a=zL(e,t,r),l=a||BL(i),c=!l("as");return function(){var u=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&h.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)h.push.apply(h,u);else{h.push(u[0][0]);for(var d=u.length,f=1;f<d;f++)h.push(u[f],u[0][f])}var p=F4(function(y,g,m){var _=c&&y.as||i,v="",x=[],b=y;if(y.theme==null){b={};for(var T in y)b[T]=y[T];b.theme=P.useContext(BS)}typeof y.className=="string"?v=RX(g.registered,x,y.className):y.className!=null&&(v=y.className+" ");var w=US(h.concat(x),g.registered,b);v+=g.key+"-"+w.name,o!==void 0&&(v+=" "+o);var M=c&&a===void 0?BL(_):l,A={};for(var S in y)c&&S==="as"||M(S)&&(A[S]=y[S]);return A.className=v,m&&(A.ref=m),P.createElement(P.Fragment,null,P.createElement(HX,{cache:g,serialized:w,isStringTag:typeof _=="string"}),P.createElement(_,A))});return p.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=h,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return o===void 0&&GX?"NO_COMPONENT_SELECTOR":"."+o}}),p.withComponent=function(y,g){return n(y,ni({},t,g,{shouldForwardProp:zL(p,g,!0)})).apply(void 0,h)},p}},jX=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],kE=WX.bind();jX.forEach(function(n){kE[n]=kE(n)});var O4={exports:{}},qX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",XX=qX,KX=XX;function k4(){}function U4(){}U4.resetWarningCache=k4;var YX=function(){function n(r,i,s,o,a,l){if(l!==KX){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:U4,resetWarningCache:k4};return t.PropTypes=t,t};O4.exports=YX();var ZX=O4.exports;const ne=Xf(ZX);function QX(n){return n==null||Object.keys(n).length===0}function B4(n){const{styles:e,defaultTheme:t={}}=n,r=typeof e=="function"?i=>e(QX(i)?t:i):e;return H.jsx(zX,{styles:r})}/**
 * @mui/styled-engine v6.1.4
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function z4(n,e){return kE(n,e)}function JX(n,e){Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))}const $L=[];function VL(n){return $L[0]=n,US($L)}function Vo(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function $4(n){if(!Vo(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=$4(n[t])}),e}function Qr(n,e,t={clone:!0}){const r=t.clone?{...n}:n;return Vo(n)&&Vo(e)&&Object.keys(e).forEach(i=>{Vo(e[i])&&Object.prototype.hasOwnProperty.call(n,i)&&Vo(n[i])?r[i]=Qr(n[i],e[i],t):t.clone?r[i]=Vo(e[i])?$4(e[i]):e[i]:r[i]=e[i]}),r}const eK=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>({...t,[r.key]:r.val}),{})};function tK(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5,...i}=n,s=eK(e),o=Object.keys(s);function a(d){return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${t})`}function l(d){return`@media (max-width:${(typeof e[d]=="number"?e[d]:d)-r/100}${t})`}function c(d,f){const p=o.indexOf(f);return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${t}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:f)-r/100}${t})`}function u(d){return o.indexOf(d)+1<o.length?c(d,o[o.indexOf(d)+1]):a(d)}function h(d){const f=o.indexOf(d);return f===0?a(o[1]):f===o.length-1?l(o[f]):c(d,o[o.indexOf(d)+1]).replace("@media","@media not all and")}return{keys:o,values:s,up:a,down:l,between:c,only:u,not:h,unit:t,...i}}function nK(n,e){if(!n.containerQueries)return e;const t=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var o,a;const s=/min-width:\s*([0-9.]+)/;return+(((o=r.match(s))==null?void 0:o[1])||0)-+(((a=i.match(s))==null?void 0:a[1])||0)});return t.length?t.reduce((r,i)=>{const s=e[i];return delete r[i],r[i]=s,r},{...e}):e}function rK(n,e){return e==="@"||e.startsWith("@")&&(n.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function iK(n,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,r,i]=t,s=Number.isNaN(+r)?r||0:+r;return n.containerQueries(i).up(s)}function sK(n){const e=(s,o)=>s.replace("@media",o?`@container ${o}`:"@container");function t(s,o){s.up=(...a)=>e(n.breakpoints.up(...a),o),s.down=(...a)=>e(n.breakpoints.down(...a),o),s.between=(...a)=>e(n.breakpoints.between(...a),o),s.only=(...a)=>e(n.breakpoints.only(...a),o),s.not=(...a)=>{const l=e(n.breakpoints.not(...a),o);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},i=s=>(t(r,s),r);return t(i),{...n,containerQueries:i}}const oK={borderRadius:4};function Vm(n,e){return e?Qr(n,e,{clone:!1}):n}const zS={xs:0,sm:600,md:900,lg:1200,xl:1536},GL={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${zS[n]}px)`},aK={containerQueries:n=>({up:e=>{let t=typeof e=="number"?e:zS[e]||e;return typeof t=="number"&&(t=`${t}px`),n?`@container ${n} (min-width:${t})`:`@container (min-width:${t})`}})};function nl(n,e,t){const r=n.theme||{};if(Array.isArray(e)){const s=r.breakpoints||GL;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=t(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||GL;return Object.keys(e).reduce((o,a)=>{if(rK(s.keys,a)){const l=iK(r.containerQueries?r:aK,a);l&&(o[l]=t(e[a],a))}else if(Object.keys(s.values||zS).includes(a)){const l=s.up(a);o[l]=t(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return t(e)}function lK(n={}){var t;return((t=n.keys)==null?void 0:t.reduce((r,i)=>{const s=n.up(i);return r[s]={},r},{}))||{}}function cK(n,e){return n.reduce((t,r)=>{const i=t[r];return(!i||Object.keys(i).length===0)&&delete t[r],t},e)}function Ve(n){if(typeof n!="string")throw new Error(tl(7));return n.charAt(0).toUpperCase()+n.slice(1)}function $S(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,n);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,n)}function rx(n,e,t,r=t){let i;return typeof n=="function"?i=n(t):Array.isArray(n)?i=n[t]||r:i=$S(n,t)||r,e&&(i=e(i,r,n)),i}function Qn(n){const{prop:e,cssProperty:t=n.prop,themeKey:r,transform:i}=n,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=$S(l,r)||{};return nl(o,a,h=>{let d=rx(c,i,h);return h===d&&typeof h=="string"&&(d=rx(c,i,`${e}${h==="default"?"":Ve(h)}`,h)),t===!1?d:{[t]:d}})};return s.propTypes={},s.filterProps=[e],s}function uK(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const hK={m:"margin",p:"padding"},dK={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},HL={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},fK=uK(n=>{if(n.length>2)if(HL[n])n=HL[n];else return[n];const[e,t]=n.split(""),r=hK[e],i=dK[t]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),MN=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],EN=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...MN,...EN];function uy(n,e,t,r){const i=$S(n,e,!0)??t;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const o=Math.abs(s),a=i[o];return s>=0?a:typeof a=="number"?-a:`-${a}`}:typeof i=="function"?i:()=>{}}function CN(n){return uy(n,"spacing",8)}function hy(n,e){return typeof e=="string"||e==null?e:n(e)}function pK(n,e){return t=>n.reduce((r,i)=>(r[i]=hy(e,t),r),{})}function mK(n,e,t,r){if(!e.includes(t))return null;const i=fK(t),s=pK(i,r),o=n[t];return nl(n,o,s)}function V4(n,e){const t=CN(n.theme);return Object.keys(n).map(r=>mK(n,e,r,t)).reduce(Vm,{})}function Gn(n){return V4(n,MN)}Gn.propTypes={};Gn.filterProps=MN;function Hn(n){return V4(n,EN)}Hn.propTypes={};Hn.filterProps=EN;function G4(n=8,e=CN({spacing:n})){if(n.mui)return n;const t=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return t.mui=!0,t}function VS(...n){const e=n.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),t=r=>Object.keys(r).reduce((i,s)=>e[s]?Vm(i,e[s](r)):i,{});return t.propTypes={},t.filterProps=n.reduce((r,i)=>r.concat(i.filterProps),[]),t}function As(n){return typeof n!="number"?n:`${n}px solid`}function zs(n,e){return Qn({prop:n,themeKey:"borders",transform:e})}const gK=zs("border",As),yK=zs("borderTop",As),vK=zs("borderRight",As),_K=zs("borderBottom",As),xK=zs("borderLeft",As),SK=zs("borderColor"),bK=zs("borderTopColor"),wK=zs("borderRightColor"),TK=zs("borderBottomColor"),MK=zs("borderLeftColor"),EK=zs("outline",As),CK=zs("outlineColor"),GS=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=uy(n.theme,"shape.borderRadius",4),t=r=>({borderRadius:hy(e,r)});return nl(n,n.borderRadius,t)}return null};GS.propTypes={};GS.filterProps=["borderRadius"];VS(gK,yK,vK,_K,xK,SK,bK,wK,TK,MK,GS,EK,CK);const HS=n=>{if(n.gap!==void 0&&n.gap!==null){const e=uy(n.theme,"spacing",8),t=r=>({gap:hy(e,r)});return nl(n,n.gap,t)}return null};HS.propTypes={};HS.filterProps=["gap"];const WS=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=uy(n.theme,"spacing",8),t=r=>({columnGap:hy(e,r)});return nl(n,n.columnGap,t)}return null};WS.propTypes={};WS.filterProps=["columnGap"];const jS=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=uy(n.theme,"spacing",8),t=r=>({rowGap:hy(e,r)});return nl(n,n.rowGap,t)}return null};jS.propTypes={};jS.filterProps=["rowGap"];const AK=Qn({prop:"gridColumn"}),RK=Qn({prop:"gridRow"}),NK=Qn({prop:"gridAutoFlow"}),PK=Qn({prop:"gridAutoColumns"}),IK=Qn({prop:"gridAutoRows"}),LK=Qn({prop:"gridTemplateColumns"}),DK=Qn({prop:"gridTemplateRows"}),FK=Qn({prop:"gridTemplateAreas"}),OK=Qn({prop:"gridArea"});VS(HS,WS,jS,AK,RK,NK,PK,IK,LK,DK,FK,OK);function zd(n,e){return e==="grey"?e:n}const kK=Qn({prop:"color",themeKey:"palette",transform:zd}),UK=Qn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:zd}),BK=Qn({prop:"backgroundColor",themeKey:"palette",transform:zd});VS(kK,UK,BK);function ss(n){return n<=1&&n!==0?`${n*100}%`:n}const zK=Qn({prop:"width",transform:ss}),AN=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var i,s,o,a,l;const r=((o=(s=(i=n.theme)==null?void 0:i.breakpoints)==null?void 0:s.values)==null?void 0:o[t])||zS[t];return r?((l=(a=n.theme)==null?void 0:a.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${n.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:ss(t)}};return nl(n,n.maxWidth,e)}return null};AN.filterProps=["maxWidth"];const $K=Qn({prop:"minWidth",transform:ss}),VK=Qn({prop:"height",transform:ss}),GK=Qn({prop:"maxHeight",transform:ss}),HK=Qn({prop:"minHeight",transform:ss});Qn({prop:"size",cssProperty:"width",transform:ss});Qn({prop:"size",cssProperty:"height",transform:ss});const WK=Qn({prop:"boxSizing"});VS(zK,AN,$K,VK,GK,HK,WK);const dy={border:{themeKey:"borders",transform:As},borderTop:{themeKey:"borders",transform:As},borderRight:{themeKey:"borders",transform:As},borderBottom:{themeKey:"borders",transform:As},borderLeft:{themeKey:"borders",transform:As},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:As},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:GS},color:{themeKey:"palette",transform:zd},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:zd},backgroundColor:{themeKey:"palette",transform:zd},p:{style:Hn},pt:{style:Hn},pr:{style:Hn},pb:{style:Hn},pl:{style:Hn},px:{style:Hn},py:{style:Hn},padding:{style:Hn},paddingTop:{style:Hn},paddingRight:{style:Hn},paddingBottom:{style:Hn},paddingLeft:{style:Hn},paddingX:{style:Hn},paddingY:{style:Hn},paddingInline:{style:Hn},paddingInlineStart:{style:Hn},paddingInlineEnd:{style:Hn},paddingBlock:{style:Hn},paddingBlockStart:{style:Hn},paddingBlockEnd:{style:Hn},m:{style:Gn},mt:{style:Gn},mr:{style:Gn},mb:{style:Gn},ml:{style:Gn},mx:{style:Gn},my:{style:Gn},margin:{style:Gn},marginTop:{style:Gn},marginRight:{style:Gn},marginBottom:{style:Gn},marginLeft:{style:Gn},marginX:{style:Gn},marginY:{style:Gn},marginInline:{style:Gn},marginInlineStart:{style:Gn},marginInlineEnd:{style:Gn},marginBlock:{style:Gn},marginBlockStart:{style:Gn},marginBlockEnd:{style:Gn},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:HS},rowGap:{style:jS},columnGap:{style:WS},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ss},maxWidth:{style:AN},minWidth:{transform:ss},height:{transform:ss},maxHeight:{transform:ss},minHeight:{transform:ss},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function jK(...n){const e=n.reduce((r,i)=>r.concat(Object.keys(i)),[]),t=new Set(e);return n.every(r=>t.size===Object.keys(r).length)}function qK(n,e){return typeof n=="function"?n(e):n}function XK(){function n(t,r,i,s){const o={[t]:r,theme:i},a=s[t];if(!a)return{[t]:r};const{cssProperty:l=t,themeKey:c,transform:u,style:h}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[t]:r};const d=$S(i,c)||{};return h?h(o):nl(o,r,p=>{let y=rx(d,u,p);return p===y&&typeof p=="string"&&(y=rx(d,u,`${t}${p==="default"?"":Ve(p)}`,p)),l===!1?y:{[l]:y}})}function e(t){const{sx:r,theme:i={}}=t||{};if(!r)return null;const s=i.unstable_sxConfig??dy;function o(a){let l=a;if(typeof a=="function")l=a(i);else if(typeof a!="object")return a;if(!l)return null;const c=lK(i.breakpoints),u=Object.keys(c);let h=c;return Object.keys(l).forEach(d=>{const f=qK(l[d],i);if(f!=null)if(typeof f=="object")if(s[d])h=Vm(h,n(d,f,i,s));else{const p=nl({theme:i},f,y=>({[d]:y}));jK(p,f)?h[d]=e({sx:f,theme:i}):h=Vm(h,p)}else h=Vm(h,n(d,f,i,s))}),nK(i,cK(u,h))}return Array.isArray(r)?r.map(o):o(r)}return e}const mc=XK();mc.filterProps=["sx"];function KK(n,e){var r;const t=this;if(t.vars){if(!((r=t.colorSchemes)!=null&&r[n])||typeof t.getColorSchemeSelector!="function")return{};let i=t.getColorSchemeSelector(n);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return t.palette.mode===n?e:{}}function RN(n={},...e){const{breakpoints:t={},palette:r={},spacing:i,shape:s={},...o}=n,a=tK(t),l=G4(i);let c=Qr({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...oK,...s}},o);return c=sK(c),c.applyStyles=KK,c=e.reduce((u,h)=>Qr(u,h),c),c.unstable_sxConfig={...dy,...o==null?void 0:o.unstable_sxConfig},c.unstable_sx=function(h){return mc({sx:h,theme:this})},c}function YK(n){return Object.keys(n).length===0}function NN(n=null){const e=P.useContext(BS);return!e||YK(e)?n:e}const ZK=RN();function qS(n=ZK){return NN(n)}function QK({styles:n,themeId:e,defaultTheme:t={}}){const r=qS(t),i=typeof n=="function"?n(e&&r[e]||r):n;return H.jsx(B4,{styles:i})}const JK=n=>{var r;const e={systemProps:{},otherProps:{}},t=((r=n==null?void 0:n.theme)==null?void 0:r.unstable_sxConfig)??dy;return Object.keys(n).forEach(i=>{t[i]?e.systemProps[i]=n[i]:e.otherProps[i]=n[i]}),e};function H4(n){const{sx:e,...t}=n,{systemProps:r,otherProps:i}=JK(t);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return Vo(a)?{...r,...a}:r}:s={...r,...e},{...i,sx:s}}const WL=n=>n,eY=()=>{let n=WL;return{configure(e){n=e},generate(e){return n(e)},reset(){n=WL}}},W4=eY();function j4(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=j4(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function it(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=j4(n))&&(r&&(r+=" "),r+=e);return r}function tY(n={}){const{themeId:e,defaultTheme:t,defaultClassName:r="MuiBox-root",generateClassName:i}=n,s=z4("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(mc);return P.forwardRef(function(l,c){const u=qS(t),{className:h,component:d="div",...f}=H4(l);return H.jsx(s,{as:d,ref:c,className:it(h,i?i(r):r),theme:e&&u[e]||u,...f})})}const nY={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Bt(n,e,t="Mui"){const r=nY[e];return r?`${t}-${r}`:`${W4.generate(n)}-${e}`}function Pt(n,e,t="Mui"){const r={};return e.forEach(i=>{r[i]=Bt(n,i,t)}),r}function q4(n){const{variants:e,...t}=n,r={variants:e,style:VL(t),isProcessed:!0};return r.style===t||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=VL(i.style))}),r}const rY=RN();function ew(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}function iY(n){return n?(e,t)=>t[n]:null}function sY(n,e,t){n.theme=lY(n.theme)?t:n.theme[e]||n.theme}function Zv(n,e){const t=typeof e=="function"?e(n):e;if(Array.isArray(t))return t.flatMap(r=>Zv(n,r));if(Array.isArray(t==null?void 0:t.variants)){let r;if(t.isProcessed)r=t.style;else{const{variants:i,...s}=t;r=s}return X4(n,t.variants,[r])}return t!=null&&t.isProcessed?t.style:t}function X4(n,e,t=[]){var i;let r;e:for(let s=0;s<e.length;s+=1){const o=e[s];if(typeof o.props=="function"){if(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),!o.props(r))continue}else for(const a in o.props)if(n[a]!==o.props[a]&&((i=n.ownerState)==null?void 0:i[a])!==o.props[a])continue e;typeof o.style=="function"?(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),t.push(o.style(r))):t.push(o.style)}return t}function oY(n={}){const{themeId:e,defaultTheme:t=rY,rootShouldForwardProp:r=ew,slotShouldForwardProp:i=ew}=n;function s(a){sY(a,e,t)}return(a,l={})=>{JX(a,b=>b.filter(T=>T!==mc));const{name:c,slot:u,skipVariantsResolver:h,skipSx:d,overridesResolver:f=iY(uY(u)),...p}=l,y=h!==void 0?h:u&&u!=="Root"&&u!=="root"||!1,g=d||!1;let m=ew;u==="Root"||u==="root"?m=r:u?m=i:cY(a)&&(m=void 0);const _=z4(a,{shouldForwardProp:m,label:aY(),...p}),v=b=>{if(typeof b=="function"&&b.__emotion_real!==b)return function(w){return Zv(w,b)};if(Vo(b)){const T=q4(b);return T.variants?function(M){return Zv(M,T)}:T.style}return b},x=(...b)=>{const T=[],w=b.map(v),M=[];if(T.push(s),c&&f&&M.push(function(I){var D,q;const N=(q=(D=I.theme.components)==null?void 0:D[c])==null?void 0:q.styleOverrides;if(!N)return null;const R={};for(const L in N)R[L]=Zv(I,N[L]);return f(I,R)}),c&&!y&&M.push(function(I){var R,D;const O=I.theme,N=(D=(R=O==null?void 0:O.components)==null?void 0:R[c])==null?void 0:D.variants;return N?X4(I,N):null}),g||M.push(mc),Array.isArray(w[0])){const E=w.shift(),I=new Array(T.length).fill(""),O=new Array(M.length).fill("");let N;N=[...I,...E,...O],N.raw=[...I,...E.raw,...O],T.unshift(N)}const A=[...T,...w,...M],S=_(...A);return a.muiName&&(S.muiName=a.muiName),S};return _.withConfig&&(x.withConfig=_.withConfig),x}}function aY(n,e){return void 0}function lY(n){for(const e in n)return!1;return!0}function cY(n){return typeof n=="string"&&n.charCodeAt(0)>96}function uY(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}function ix(n,e){const t={...e};for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const i=r;if(i==="components"||i==="slots")t[i]={...n[i],...t[i]};else if(i==="componentsProps"||i==="slotProps"){const s=n[i],o=e[i];if(!o)t[i]=s||{};else if(!s)t[i]=o;else{t[i]={...o};for(const a in s)if(Object.prototype.hasOwnProperty.call(s,a)){const l=a;t[i][l]=ix(s[l],o[l])}}}else t[i]===void 0&&(t[i]=n[i])}return t}function K4(n){const{theme:e,name:t,props:r}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?r:ix(e.components[t].defaultProps,r)}function hY({props:n,name:e,defaultTheme:t,themeId:r}){let i=qS(t);return r&&(i=i[r]||i),K4({theme:i,name:e,props:n})}const rl=typeof window<"u"?P.useLayoutEffect:P.useEffect;function dY(n,e,t,r,i){const[s,o]=P.useState(()=>i&&t?t(n).matches:r?r(n).matches:e);return rl(()=>{if(!t)return;const a=t(n),l=()=>{o(a.matches)};return l(),a.addEventListener("change",l),()=>{a.removeEventListener("change",l)}},[n,t]),s}const fY={...C_},Y4=fY.useSyncExternalStore;function pY(n,e,t,r,i){const s=P.useCallback(()=>e,[e]),o=P.useMemo(()=>{if(i&&t)return()=>t(n).matches;if(r!==null){const{matches:u}=r(n);return()=>u}return s},[s,n,r,i,t]),[a,l]=P.useMemo(()=>{if(t===null)return[s,()=>()=>{}];const u=t(n);return[()=>u.matches,h=>(u.addEventListener("change",h),()=>{u.removeEventListener("change",h)})]},[s,t,n]);return Y4(l,a,o)}function mY(n,e={}){const t=NN(),r=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:s=r?window.matchMedia:null,ssrMatchMedia:o=null,noSsr:a=!1}=K4({name:"MuiUseMediaQuery",props:e,theme:t});let l=typeof n=="function"?n(t):n;return l=l.replace(/^@media( ?)/m,""),(Y4!==void 0?pY:dY)(l,i,s,o,a)}function gY(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}function PN(n,e=0,t=1){return gY(n,e,t)}function yY(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function gc(n){if(n.type)return n;if(n.charAt(0)==="#")return gc(yY(n));const e=n.indexOf("("),t=n.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(tl(9,n));let r=n.substring(e+1,n.length-1),i;if(t==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(tl(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:t,values:r,colorSpace:i}}const vY=n=>{const e=gc(n);return e.values.slice(0,3).map((t,r)=>e.type.includes("hsl")&&r!==0?`${t}%`:t).join(" ")},_m=(n,e)=>{try{return vY(n)}catch{return n}};function XS(n){const{type:e,colorSpace:t}=n;let{values:r}=n;return e.includes("rgb")?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function Z4(n){n=gc(n);const{values:e}=n,t=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,u=(c+t/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return n.type==="hsla"&&(a+="a",l.push(e[3])),XS({type:a,values:l})}function UE(n){n=gc(n);let e=n.type==="hsl"||n.type==="hsla"?gc(Z4(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function _Y(n,e){const t=UE(n),r=UE(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function Fn(n,e){return n=gc(n),e=PN(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,XS(n)}function i0(n,e,t){try{return Fn(n,e)}catch{return n}}function Rg(n,e){if(n=gc(n),e=PN(e),n.type.includes("hsl"))n.values[2]*=1-e;else if(n.type.includes("rgb")||n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]*=1-e;return XS(n)}function mn(n,e,t){try{return Rg(n,e)}catch{return n}}function Ng(n,e){if(n=gc(n),e=PN(e),n.type.includes("hsl"))n.values[2]+=(100-n.values[2])*e;else if(n.type.includes("rgb"))for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return XS(n)}function gn(n,e,t){try{return Ng(n,e)}catch{return n}}function Q4(n,e=.15){return UE(n)>.5?Rg(n,e):Ng(n,e)}function s0(n,e,t){try{return Q4(n,e)}catch{return n}}function jL(...n){return n.reduce((e,t)=>t==null?e:function(...i){e.apply(this,i),t.apply(this,i)},()=>{})}function IN(n,e=166){let t;function r(...i){const s=()=>{n.apply(this,i)};clearTimeout(t),t=setTimeout(s,e)}return r.clear=()=>{clearTimeout(t)},r}function tw(n,e){var t,r,i;return P.isValidElement(n)&&e.indexOf(n.type.muiName??((i=(r=(t=n.type)==null?void 0:t._payload)==null?void 0:r.value)==null?void 0:i.muiName))!==-1}function Fi(n){return n&&n.ownerDocument||document}function So(n){return Fi(n).defaultView||window}function BE(n,e){typeof n=="function"?n(e):n&&(n.current=e)}let qL=0;function xY(n){const[e,t]=P.useState(n),r=n||e;return P.useEffect(()=>{e==null&&(qL+=1,t(`mui-${qL}`))},[e]),r}const SY={...C_},XL=SY.useId;function LN(n){if(XL!==void 0){const e=XL();return n??e}return xY(n)}function zE({controlled:n,default:e,name:t,state:r="value"}){const{current:i}=P.useRef(n!==void 0),[s,o]=P.useState(e),a=i?n:s,l=P.useCallback(c=>{i||o(c)},[]);return[a,l]}function Fa(n){const e=P.useRef(n);return rl(()=>{e.current=n}),P.useRef((...t)=>(0,e.current)(...t)).current}function ur(...n){return P.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{BE(t,e)})},n)}const KL={};function J4(n,e){const t=P.useRef(KL);return t.current===KL&&(t.current=n(e)),t}const bY=[];function wY(n){P.useEffect(n,bY)}class DN{constructor(){gp(this,"currentId",null);gp(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});gp(this,"disposeEffect",()=>this.clear)}static create(){return new DN}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function FN(){const n=J4(DN.create).current;return wY(n.disposeEffect),n}function YL(n){try{return n.matches(":focus-visible")}catch{}return!1}function e$(n=window){const e=n.document.documentElement.clientWidth;return n.innerWidth-e}function Vt(n,e,t=void 0){const r={};for(const i in n){const s=n[i];let o="",a=!0;for(let l=0;l<s.length;l+=1){const c=s[l];c&&(o+=(a===!0?"":" ")+e(c),a=!1,t&&t[c]&&(o+=" "+t[c]))}r[i]=o}return r}function TY(n){return typeof n=="string"}function t$(n,e,t){return n===void 0||TY(n)?e:{...e,ownerState:{...e.ownerState,...t}}}function sx(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(r=>r.match(/^on[A-Z]/)&&typeof n[r]=="function"&&!e.includes(r)).forEach(r=>{t[r]=n[r]}),t}function ZL(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function n$(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:r,externalForwardedProps:i,className:s}=n;if(!e){const f=it(t==null?void 0:t.className,s,i==null?void 0:i.className,r==null?void 0:r.className),p={...t==null?void 0:t.style,...i==null?void 0:i.style,...r==null?void 0:r.style},y={...t,...i,...r};return f.length>0&&(y.className=f),Object.keys(p).length>0&&(y.style=p),{props:y,internalRef:void 0}}const o=sx({...i,...r}),a=ZL(r),l=ZL(i),c=e(o),u=it(c==null?void 0:c.className,t==null?void 0:t.className,s,i==null?void 0:i.className,r==null?void 0:r.className),h={...c==null?void 0:c.style,...t==null?void 0:t.style,...i==null?void 0:i.style,...r==null?void 0:r.style},d={...c,...t,...l,...a};return u.length>0&&(d.className=u),Object.keys(h).length>0&&(d.style=h),{props:d,internalRef:c.ref}}function r$(n,e,t){return typeof n=="function"?n(e,t):n}function $E(n){var h;const{elementType:e,externalSlotProps:t,ownerState:r,skipResolvingSlotProps:i=!1,...s}=n,o=i?{}:r$(t,r),{props:a,internalRef:l}=n$({...s,externalSlotProps:o}),c=ur(l,o==null?void 0:o.ref,(h=n.additionalProps)==null?void 0:h.ref);return t$(e,{...a,ref:c},r)}function th(n){var e;return parseInt(P.version,10)>=19?((e=n==null?void 0:n.props)==null?void 0:e.ref)||null:(n==null?void 0:n.ref)||null}const i$=P.createContext(null);function ON(){return P.useContext(i$)}const MY=typeof Symbol=="function"&&Symbol.for,EY=MY?Symbol.for("mui.nested"):"__THEME_NESTED__";function CY(n,e){return typeof e=="function"?e(n):{...n,...e}}function AY(n){const{children:e,theme:t}=n,r=ON(),i=P.useMemo(()=>{const s=r===null?{...t}:CY(r,t);return s!=null&&(s[EY]=r!==null),s},[t,r]);return H.jsx(i$.Provider,{value:i,children:e})}const s$=P.createContext();function RY({value:n,...e}){return H.jsx(s$.Provider,{value:n??!0,...e})}const o$=()=>P.useContext(s$)??!1,a$=P.createContext(void 0);function NY({value:n,children:e}){return H.jsx(a$.Provider,{value:n,children:e})}function PY(n){const{theme:e,name:t,props:r}=n;if(!e||!e.components||!e.components[t])return r;const i=e.components[t];return i.defaultProps?ix(i.defaultProps,r):!i.styleOverrides&&!i.variants?ix(i,r):r}function IY({props:n,name:e}){const t=P.useContext(a$);return PY({props:n,name:e,theme:{components:t}})}const QL={};function JL(n,e,t,r=!1){return P.useMemo(()=>{const i=n&&e[n]||e;if(typeof t=="function"){const s=t(i),o=n?{...e,[n]:s}:s;return r?()=>o:o}return n?{...e,[n]:t}:{...e,...t}},[n,e,t,r])}function l$(n){const{children:e,theme:t,themeId:r}=n,i=NN(QL),s=ON()||QL,o=JL(r,i,t),a=JL(r,s,t,!0),l=o.direction==="rtl";return H.jsx(AY,{theme:a,children:H.jsx(BS.Provider,{value:o,children:H.jsx(RY,{value:l,children:H.jsx(NY,{value:o==null?void 0:o.components,children:e})})})})}const eD={theme:void 0};function LY(n){let e,t;return function(i){let s=e;return(s===void 0||i.theme!==t)&&(eD.theme=i.theme,s=q4(n(eD)),e=s,t=i.theme),s}}const kN="mode",UN="color-scheme",DY="data-color-scheme";function FY(n){const{defaultLightColorScheme:e="light",defaultDarkColorScheme:t="dark",modeStorageKey:r=kN,colorSchemeStorageKey:i=UN,attribute:s=DY,colorSchemeNode:o="document.documentElement",nonce:a}=n||{};let l="",c=s;if(s==="class"&&(c=".%s"),s==="data"&&(c="[data-%s]"),c.startsWith(".")){const h=c.substring(1);l+=`${o}.classList.remove('${h}'.replace('%s', light), '${h}'.replace('%s', dark));
      ${o}.classList.add('${h}'.replace('%s', colorScheme));`}const u=c.match(/\[([^\]]+)\]/);if(u){const[h,d]=u[1].split("=");d||(l+=`${o}.removeAttribute('${h}'.replace('%s', light));
      ${o}.removeAttribute('${h}'.replace('%s', dark));`),l+=`
      ${o}.setAttribute('${h}'.replace('%s', colorScheme), ${d?`${d}.replace('%s', colorScheme)`:'""'});`}else l+=`${o}.setAttribute('${c}', colorScheme);`;return H.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?a:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${r}') || 'system';
  const dark = localStorage.getItem('${i}-dark') || '${t}';
  const light = localStorage.getItem('${i}-light') || '${e}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${l}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function tD(n){if(typeof window<"u"&&typeof window.matchMedia=="function"&&n==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function c$(n,e){if(n.mode==="light"||n.mode==="system"&&n.systemMode==="light")return e("light");if(n.mode==="dark"||n.mode==="system"&&n.systemMode==="dark")return e("dark")}function OY(n){return c$(n,e=>{if(e==="light")return n.lightColorScheme;if(e==="dark")return n.darkColorScheme})}function nw(n,e){if(typeof window>"u")return;let t;try{t=localStorage.getItem(n)||void 0,t||localStorage.setItem(n,e)}catch{}return t||e}function kY(n){const{defaultMode:e="light",defaultLightColorScheme:t,defaultDarkColorScheme:r,supportedColorSchemes:i=[],modeStorageKey:s=kN,colorSchemeStorageKey:o=UN,storageWindow:a=typeof window>"u"?void 0:window}=n,l=i.join(","),c=i.length>1,[u,h]=P.useState(()=>{const v=nw(s,e),x=nw(`${o}-light`,t),b=nw(`${o}-dark`,r);return{mode:v,systemMode:tD(v),lightColorScheme:x,darkColorScheme:b}}),[,d]=P.useState(!1),f=P.useRef(!1);P.useEffect(()=>{c&&d(!0),f.current=!0},[c]);const p=OY(u),y=P.useCallback(v=>{h(x=>{if(v===x.mode)return x;const b=v??e;try{localStorage.setItem(s,b)}catch{}return{...x,mode:b,systemMode:tD(b)}})},[s,e]),g=P.useCallback(v=>{v?typeof v=="string"?v&&!l.includes(v)?console.error(`\`${v}\` does not exist in \`theme.colorSchemes\`.`):h(x=>{const b={...x};return c$(x,T=>{try{localStorage.setItem(`${o}-${T}`,v)}catch{}T==="light"&&(b.lightColorScheme=v),T==="dark"&&(b.darkColorScheme=v)}),b}):h(x=>{const b={...x},T=v.light===null?t:v.light,w=v.dark===null?r:v.dark;if(T)if(!l.includes(T))console.error(`\`${T}\` does not exist in \`theme.colorSchemes\`.`);else{b.lightColorScheme=T;try{localStorage.setItem(`${o}-light`,T)}catch{}}if(w)if(!l.includes(w))console.error(`\`${w}\` does not exist in \`theme.colorSchemes\`.`);else{b.darkColorScheme=w;try{localStorage.setItem(`${o}-dark`,w)}catch{}}return b}):h(x=>{try{localStorage.setItem(`${o}-light`,t),localStorage.setItem(`${o}-dark`,r)}catch{}return{...x,lightColorScheme:t,darkColorScheme:r}})},[l,o,t,r]),m=P.useCallback(v=>{u.mode==="system"&&h(x=>{const b=v!=null&&v.matches?"dark":"light";return x.systemMode===b?x:{...x,systemMode:b}})},[u.mode]),_=P.useRef(m);return _.current=m,P.useEffect(()=>{if(typeof window.matchMedia!="function"||!c)return;const v=(...b)=>_.current(...b),x=window.matchMedia("(prefers-color-scheme: dark)");return x.addListener(v),v(x),()=>{x.removeListener(v)}},[c]),P.useEffect(()=>{if(a&&c){const v=x=>{const b=x.newValue;typeof x.key=="string"&&x.key.startsWith(o)&&(!b||l.match(b))&&(x.key.endsWith("light")&&g({light:b}),x.key.endsWith("dark")&&g({dark:b})),x.key===s&&(!b||["light","dark","system"].includes(b))&&y(b||e)};return a.addEventListener("storage",v),()=>{a.removeEventListener("storage",v)}}},[g,y,s,o,l,e,a,c]),{...u,mode:f.current||!c?u.mode:void 0,systemMode:f.current||!c?u.systemMode:void 0,colorScheme:f.current||!c?p:void 0,setMode:y,setColorScheme:g}}const UY="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function BY(n){const{themeId:e,theme:t={},modeStorageKey:r=kN,colorSchemeStorageKey:i=UN,disableTransitionOnChange:s=!1,defaultColorScheme:o,resolveTheme:a}=n,l={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},c=P.createContext(void 0),u=()=>P.useContext(c)||l;function h(y){var ae,oe,Te,Se,Xe;const{children:g,theme:m,modeStorageKey:_=r,colorSchemeStorageKey:v=i,disableTransitionOnChange:x=s,storageWindow:b=typeof window>"u"?void 0:window,documentNode:T=typeof document>"u"?void 0:document,colorSchemeNode:w=typeof document>"u"?void 0:document.documentElement,disableNestedContext:M=!1,disableStyleSheetGeneration:A=!1,defaultMode:S="system"}=y,E=P.useRef(!1),I=ON(),O=P.useContext(c),N=!!O&&!M,R=P.useMemo(()=>m||(typeof t=="function"?t():t),[m]),D=R[e],{colorSchemes:q={},components:L={},cssVarPrefix:j,...z}=D||R,K=Object.keys(q).filter(Ie=>!!q[Ie]).join(","),U=P.useMemo(()=>K.split(","),[K]),te=typeof o=="string"?o:o.light,k=typeof o=="string"?o:o.dark,V=q[te]&&q[k]?S:((oe=(ae=q[z.defaultColorScheme])==null?void 0:ae.palette)==null?void 0:oe.mode)||((Te=z.palette)==null?void 0:Te.mode),{mode:Q,setMode:le,systemMode:pe,lightColorScheme:ue,darkColorScheme:be,colorScheme:Pe,setColorScheme:we}=kY({supportedColorSchemes:U,defaultLightColorScheme:te,defaultDarkColorScheme:k,modeStorageKey:_,colorSchemeStorageKey:v,defaultMode:V,storageWindow:b});let G=Q,He=Pe;N&&(G=O.mode,He=O.colorScheme);const $e=He||z.defaultColorScheme,Ze=((Se=z.generateThemeVars)==null?void 0:Se.call(z))||z.vars,De={...z,components:L,colorSchemes:q,cssVarPrefix:j,vars:Ze};if(typeof De.generateSpacing=="function"&&(De.spacing=De.generateSpacing()),$e){const Ie=q[$e];Ie&&typeof Ie=="object"&&Object.keys(Ie).forEach(Oe=>{Ie[Oe]&&typeof Ie[Oe]=="object"?De[Oe]={...De[Oe],...Ie[Oe]}:De[Oe]=Ie[Oe]})}const ot=z.colorSchemeSelector;P.useEffect(()=>{if(He&&w&&ot&&ot!=="media"){const Ie=ot;let Oe=ot;if(Ie==="class"&&(Oe=".%s"),Ie==="data"&&(Oe="[data-%s]"),Ie!=null&&Ie.startsWith("data-")&&!Ie.includes("%s")&&(Oe=`[${Ie}="%s"]`),Oe.startsWith("."))w.classList.remove(...U.map(pt=>Oe.substring(1).replace("%s",pt))),w.classList.add(Oe.substring(1).replace("%s",He));else{const pt=Oe.replace("%s",He).match(/\[([^\]]+)\]/);if(pt){const[Le,Fe]=pt[1].split("=");Fe||U.forEach(at=>{w.removeAttribute(Le.replace(He,at))}),w.setAttribute(Le,Fe?Fe.replace(/"|'/g,""):"")}else w.setAttribute(Oe,He)}}},[He,ot,w,U]),P.useEffect(()=>{let Ie;if(x&&E.current&&T){const Oe=T.createElement("style");Oe.appendChild(T.createTextNode(UY)),T.head.appendChild(Oe),window.getComputedStyle(T.body),Ie=setTimeout(()=>{T.head.removeChild(Oe)},1)}return()=>{clearTimeout(Ie)}},[He,x,T]),P.useEffect(()=>(E.current=!0,()=>{E.current=!1}),[]);const Je=P.useMemo(()=>({allColorSchemes:U,colorScheme:He,darkColorScheme:be,lightColorScheme:ue,mode:G,setColorScheme:we,setMode:le,systemMode:pe}),[U,He,be,ue,G,we,le,pe]);let B=!0;(A||z.cssVariables===!1||N&&(I==null?void 0:I.cssVarPrefix)===j)&&(B=!1);const C=H.jsxs(P.Fragment,{children:[H.jsx(l$,{themeId:D?e:void 0,theme:a?a(De):De,children:g}),B&&H.jsx(B4,{styles:((Xe=De.generateStyleSheets)==null?void 0:Xe.call(De))||[]})]});return N?C:H.jsx(c.Provider,{value:Je,children:C})}const d=typeof o=="string"?o:o.light,f=typeof o=="string"?o:o.dark;return{CssVarsProvider:h,useColorScheme:u,getInitColorSchemeScript:y=>FY({colorSchemeStorageKey:i,defaultLightColorScheme:d,defaultDarkColorScheme:f,modeStorageKey:r,...y})}}function zY(n=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${n?`${n}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${n?`${n}-`:""}${r}${e(...i)})`}const nD=(n,e,t,r=[])=>{let i=n;e.forEach((s,o)=>{o===e.length-1?Array.isArray(i)?i[Number(s)]=t:i&&typeof i=="object"&&(i[s]=t):i&&typeof i=="object"&&(i[s]||(i[s]=r.includes(s)?[]:{}),i=i[s])})},$Y=(n,e,t)=>{function r(i,s=[],o=[]){Object.entries(i).forEach(([a,l])=>{(!t||t&&!t([...s,a]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...s,a],Array.isArray(l)?[...o,a]:o):e([...s,a],l,o))})}r(n)},VY=(n,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>n.includes(r))||n[n.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function rw(n,e){const{prefix:t,shouldSkipGeneratingVar:r}=e||{},i={},s={},o={};return $Y(n,(a,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(a,l))){const u=`--${t?`${t}-`:""}${a.join("-")}`,h=VY(a,l);Object.assign(i,{[u]:h}),nD(s,a,`var(${u})`,c),nD(o,a,`var(${u}, ${h})`,c)}},a=>a[0]==="vars"),{css:i,vars:s,varsWithDefaults:o}}function GY(n,e={}){const{getSelector:t=g,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:s={},components:o,defaultColorScheme:a="light",...l}=n,{vars:c,css:u,varsWithDefaults:h}=rw(l,e);let d=h;const f={},{[a]:p,...y}=s;if(Object.entries(y||{}).forEach(([v,x])=>{const{vars:b,css:T,varsWithDefaults:w}=rw(x,e);d=Qr(d,w),f[v]={css:T,vars:b}}),p){const{css:v,vars:x,varsWithDefaults:b}=rw(p,e);d=Qr(d,b),f[a]={css:v,vars:x}}function g(v,x){var T,w;let b=i;if(i==="class"&&(b=".%s"),i==="data"&&(b="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(b=`[${i}="%s"]`),v){if(b==="media")return n.defaultColorScheme===v?":root":{[`@media (prefers-color-scheme: ${((w=(T=s[v])==null?void 0:T.palette)==null?void 0:w.mode)||v})`]:{":root":x}};if(b)return n.defaultColorScheme===v?`:root, ${b.replace("%s",String(v))}`:b.replace("%s",String(v))}return":root"}return{vars:d,generateThemeVars:()=>{let v={...c};return Object.entries(f).forEach(([,{vars:x}])=>{v=Qr(v,x)}),v},generateStyleSheets:()=>{var M,A;const v=[],x=n.defaultColorScheme||"light";function b(S,E){Object.keys(E).length&&v.push(typeof S=="string"?{[S]:{...E}}:S)}b(t(void 0,{...u}),u);const{[x]:T,...w}=f;if(T){const{css:S}=T,E=(A=(M=s[x])==null?void 0:M.palette)==null?void 0:A.mode,I=!r&&E?{colorScheme:E,...S}:{...S};b(t(x,{...I}),I)}return Object.entries(w).forEach(([S,{css:E}])=>{var N,R;const I=(R=(N=s[S])==null?void 0:N.palette)==null?void 0:R.mode,O=!r&&I?{colorScheme:I,...E}:{...E};b(t(S,{...O}),O)}),v}}}function HY(n){return function(t){return n==="media"?`@media (prefers-color-scheme: ${t})`:n?n.startsWith("data-")&&!n.includes("%s")?`[${n}="${t}"] &`:n==="class"?`.${t} &`:n==="data"?`[data-${t}] &`:`${n.replace("%s",t)} &`:"&"}}function u$(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Mg.white,default:Mg.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const WY=u$();function h$(){return{text:{primary:Mg.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Mg.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const rD=h$();function iD(n,e,t,r){const i=r.light||r,s=r.dark||r*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=Ng(n.main,i):e==="dark"&&(n.dark=Rg(n.main,s)))}function jY(n="light"){return n==="dark"?{main:mh[200],light:mh[50],dark:mh[400]}:{main:mh[700],light:mh[400],dark:mh[800]}}function qY(n="light"){return n==="dark"?{main:ph[200],light:ph[50],dark:ph[400]}:{main:ph[500],light:ph[300],dark:ph[700]}}function XY(n="light"){return n==="dark"?{main:fh[500],light:fh[300],dark:fh[700]}:{main:fh[700],light:fh[400],dark:fh[800]}}function KY(n="light"){return n==="dark"?{main:gh[400],light:gh[300],dark:gh[700]}:{main:gh[700],light:gh[500],dark:gh[900]}}function YY(n="light"){return n==="dark"?{main:yh[400],light:yh[300],dark:yh[700]}:{main:yh[800],light:yh[500],dark:yh[900]}}function ZY(n="light"){return n==="dark"?{main:Ep[400],light:Ep[300],dark:Ep[700]}:{main:"#ed6c02",light:Ep[500],dark:Ep[900]}}function BN(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2,...i}=n,s=n.primary||jY(e),o=n.secondary||qY(e),a=n.error||XY(e),l=n.info||KY(e),c=n.success||YY(e),u=n.warning||ZY(e);function h(y){return _Y(y,rD.text.primary)>=t?rD.text.primary:WY.text.primary}const d=({color:y,name:g,mainShade:m=500,lightShade:_=300,darkShade:v=700})=>{if(y={...y},!y.main&&y[m]&&(y.main=y[m]),!y.hasOwnProperty("main"))throw new Error(tl(11,g?` (${g})`:"",m));if(typeof y.main!="string")throw new Error(tl(12,g?` (${g})`:"",JSON.stringify(y.main)));return iD(y,"light",_,r),iD(y,"dark",v,r),y.contrastText||(y.contrastText=h(y.main)),y};let f;return e==="light"?f=u$():e==="dark"&&(f=h$()),Qr({common:{...Mg},mode:e,primary:d({color:s,name:"primary"}),secondary:d({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:a,name:"error"}),warning:d({color:u,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:zq,contrastThreshold:t,getContrastText:h,augmentColor:d,tonalOffset:r,...f},i)}function QY(n){const e={};return Object.entries(n).forEach(r=>{const[i,s]=r;typeof s=="object"&&(e[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function JY(n,e){return{toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}},...e}}function eZ(n){return Math.round(n*1e5)/1e5}const sD={textTransform:"uppercase"},oD='"Roboto", "Helvetica", "Arial", sans-serif';function d$(n,e){const{fontFamily:t=oD,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:o=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...h}=typeof e=="function"?e(n):e,d=r/14,f=u||(g=>`${g/l*d}rem`),p=(g,m,_,v,x)=>({fontFamily:t,fontWeight:g,fontSize:f(m),lineHeight:_,...t===oD?{letterSpacing:`${eZ(v/m)}em`}:{},...x,...c}),y={h1:p(i,96,1.167,-1.5),h2:p(i,60,1.2,-.5),h3:p(s,48,1.167,0),h4:p(s,34,1.235,.25),h5:p(s,24,1.334,0),h6:p(o,20,1.6,.15),subtitle1:p(s,16,1.75,.15),subtitle2:p(o,14,1.57,.1),body1:p(s,16,1.5,.15),body2:p(s,14,1.43,.15),button:p(o,14,1.75,.4,sD),caption:p(s,12,1.66,.4),overline:p(s,12,2.66,1,sD),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Qr({htmlFontSize:l,pxToRem:f,fontFamily:t,fontSize:r,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:o,fontWeightBold:a,...y},h,{clone:!1})}const tZ=.2,nZ=.14,rZ=.12;function Rn(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${tZ})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${nZ})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${rZ})`].join(",")}const iZ=["none",Rn(0,2,1,-1,0,1,1,0,0,1,3,0),Rn(0,3,1,-2,0,2,2,0,0,1,5,0),Rn(0,3,3,-2,0,3,4,0,0,1,8,0),Rn(0,2,4,-1,0,4,5,0,0,1,10,0),Rn(0,3,5,-1,0,5,8,0,0,1,14,0),Rn(0,3,5,-1,0,6,10,0,0,1,18,0),Rn(0,4,5,-2,0,7,10,1,0,2,16,1),Rn(0,5,5,-3,0,8,10,1,0,3,14,2),Rn(0,5,6,-3,0,9,12,1,0,3,16,2),Rn(0,6,6,-3,0,10,14,1,0,4,18,3),Rn(0,6,7,-4,0,11,15,1,0,4,20,3),Rn(0,7,8,-4,0,12,17,2,0,5,22,4),Rn(0,7,8,-4,0,13,19,2,0,5,24,4),Rn(0,7,9,-4,0,14,21,2,0,5,26,4),Rn(0,8,9,-5,0,15,22,2,0,6,28,5),Rn(0,8,10,-5,0,16,24,2,0,6,30,5),Rn(0,8,11,-5,0,17,26,2,0,6,32,5),Rn(0,9,11,-5,0,18,28,2,0,7,34,6),Rn(0,9,12,-6,0,19,29,2,0,7,36,6),Rn(0,10,13,-6,0,20,31,3,0,8,38,7),Rn(0,10,13,-6,0,21,33,3,0,8,40,7),Rn(0,10,14,-6,0,22,35,3,0,8,42,7),Rn(0,11,14,-7,0,23,36,3,0,9,44,8),Rn(0,11,15,-7,0,24,38,3,0,9,46,8)],sZ={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},oZ={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function aD(n){return`${Math.round(n)}ms`}function aZ(n){if(!n)return 0;const e=n/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function lZ(n){const e={...sZ,...n.easing},t={...oZ,...n.duration};return{getAutoHeightDuration:aZ,create:(i=["all"],s={})=>{const{duration:o=t.standard,easing:a=e.easeInOut,delay:l=0,...c}=s;return(Array.isArray(i)?i:[i]).map(u=>`${u} ${typeof o=="string"?o:aD(o)} ${a} ${typeof l=="string"?l:aD(l)}`).join(",")},...n,easing:e,duration:t}}const cZ={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function VE(n={},...e){const{breakpoints:t,mixins:r={},spacing:i,palette:s={},transitions:o={},typography:a={},shape:l,...c}=n;if(n.vars)throw new Error(tl(20));const u=BN(s),h=RN(n);let d=Qr(h,{mixins:JY(h.breakpoints,r),palette:u,shadows:iZ.slice(),typography:d$(u,a),transitions:lZ(o),zIndex:{...cZ}});return d=Qr(d,c),d=e.reduce((f,p)=>Qr(f,p),d),d.unstable_sxConfig={...dy,...c==null?void 0:c.unstable_sxConfig},d.unstable_sx=function(p){return mc({sx:p,theme:this})},d}function GE(n){let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,Math.round(e*10)/1e3}const uZ=[...Array(25)].map((n,e)=>{if(e===0)return"none";const t=GE(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function f$(n){return{inputPlaceholder:n==="dark"?.5:.42,inputUnderline:n==="dark"?.7:.42,switchTrackDisabled:n==="dark"?.2:.12,switchTrack:n==="dark"?.3:.38}}function p$(n){return n==="dark"?uZ:[]}function hZ(n){const{palette:e={mode:"light"},opacity:t,overlays:r,...i}=n,s=BN(e);return{palette:s,opacity:{...f$(s.mode),...t},overlays:r||p$(s.mode),...i}}function dZ(n){var e;return!!n[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!n[0].match(/sxConfig$/)||n[0]==="palette"&&!!((e=n[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const fZ=n=>[...[...Array(25)].map((e,t)=>`--${n?`${n}-`:""}overlays-${t}`),`--${n?`${n}-`:""}palette-AppBar-darkBg`,`--${n?`${n}-`:""}palette-AppBar-darkColor`],pZ=n=>(e,t)=>{const r=n.rootSelector||":root",i=n.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),n.defaultColorScheme===e){if(e==="dark"){const o={};return fZ(n.cssVarPrefix).forEach(a=>{o[a]=t[a],delete t[a]}),s==="media"?{[r]:t,"@media (prefers-color-scheme: dark)":{[r]:o}}:s?{[s.replace("%s",e)]:o,[`${r}, ${s.replace("%s",e)}`]:t}:{[r]:{...t,...o}}}if(s&&s!=="media")return`${r}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:t}};if(s)return s.replace("%s",String(e))}return r};function mZ(n){return Vo(n)||typeof n>"u"||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||Array.isArray(n)}function gZ(n={}){const e={...n};function t(r){const i=Object.entries(r);for(let s=0;s<i.length;s++){const[o,a]=i[s];!mZ(a)||o.startsWith("unstable_")?delete r[o]:Vo(a)&&(r[o]={...a},t(r[o]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function yZ(n,e){e.forEach(t=>{n[t]||(n[t]={})})}function _e(n,e,t){!n[e]&&t&&(n[e]=t)}function xm(n){return!n||!n.startsWith("hsl")?n:Z4(n)}function ia(n,e){`${e}Channel`in n||(n[`${e}Channel`]=_m(xm(n[e]),`MUI: Can't create \`palette.${e}Channel\` because \`palette.${e}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${e}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function vZ(n){return typeof n=="number"?`${n}px`:typeof n=="string"||typeof n=="function"||Array.isArray(n)?n:"8px"}const Ao=n=>{try{return n()}catch{}},_Z=(n="mui")=>zY(n);function iw(n,e,t,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!t){n[r]=hZ({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:s,...o}=VE({...t,palette:{mode:i,...e==null?void 0:e.palette}});return n[r]={...e,palette:s,opacity:{...f$(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||p$(i)},o}function xZ(n={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:o=dZ,colorSchemeSelector:a=t.light&&t.dark?"media":void 0,rootSelector:l=":root",...c}=n,u=Object.keys(t)[0],h=r||(t.light&&u!=="light"?"light":u),d=_Z(s),{[h]:f,light:p,dark:y,...g}=t,m={...g};let _=f;if((h==="dark"&&!("dark"in t)||h==="light"&&!("light"in t))&&(_=!0),!_)throw new Error(tl(21,h));const v=iw(m,_,c,h);p&&!m.light&&iw(m,p,void 0,"light"),y&&!m.dark&&iw(m,y,void 0,"dark");let x={defaultColorScheme:h,...v,cssVarPrefix:s,colorSchemeSelector:a,rootSelector:l,getCssVar:d,colorSchemes:m,font:{...QY(v.typography),...v.font},spacing:vZ(c.spacing)};Object.keys(x.colorSchemes).forEach(A=>{const S=x.colorSchemes[A].palette,E=I=>{const O=I.split("-"),N=O[1],R=O[2];return d(I,S[N][R])};if(S.mode==="light"&&(_e(S.common,"background","#fff"),_e(S.common,"onBackground","#000")),S.mode==="dark"&&(_e(S.common,"background","#000"),_e(S.common,"onBackground","#fff")),yZ(S,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),S.mode==="light"){_e(S.Alert,"errorColor",mn(S.error.light,.6)),_e(S.Alert,"infoColor",mn(S.info.light,.6)),_e(S.Alert,"successColor",mn(S.success.light,.6)),_e(S.Alert,"warningColor",mn(S.warning.light,.6)),_e(S.Alert,"errorFilledBg",E("palette-error-main")),_e(S.Alert,"infoFilledBg",E("palette-info-main")),_e(S.Alert,"successFilledBg",E("palette-success-main")),_e(S.Alert,"warningFilledBg",E("palette-warning-main")),_e(S.Alert,"errorFilledColor",Ao(()=>S.getContrastText(S.error.main))),_e(S.Alert,"infoFilledColor",Ao(()=>S.getContrastText(S.info.main))),_e(S.Alert,"successFilledColor",Ao(()=>S.getContrastText(S.success.main))),_e(S.Alert,"warningFilledColor",Ao(()=>S.getContrastText(S.warning.main))),_e(S.Alert,"errorStandardBg",gn(S.error.light,.9)),_e(S.Alert,"infoStandardBg",gn(S.info.light,.9)),_e(S.Alert,"successStandardBg",gn(S.success.light,.9)),_e(S.Alert,"warningStandardBg",gn(S.warning.light,.9)),_e(S.Alert,"errorIconColor",E("palette-error-main")),_e(S.Alert,"infoIconColor",E("palette-info-main")),_e(S.Alert,"successIconColor",E("palette-success-main")),_e(S.Alert,"warningIconColor",E("palette-warning-main")),_e(S.AppBar,"defaultBg",E("palette-grey-100")),_e(S.Avatar,"defaultBg",E("palette-grey-400")),_e(S.Button,"inheritContainedBg",E("palette-grey-300")),_e(S.Button,"inheritContainedHoverBg",E("palette-grey-A100")),_e(S.Chip,"defaultBorder",E("palette-grey-400")),_e(S.Chip,"defaultAvatarColor",E("palette-grey-700")),_e(S.Chip,"defaultIconColor",E("palette-grey-700")),_e(S.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),_e(S.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),_e(S.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),_e(S.LinearProgress,"primaryBg",gn(S.primary.main,.62)),_e(S.LinearProgress,"secondaryBg",gn(S.secondary.main,.62)),_e(S.LinearProgress,"errorBg",gn(S.error.main,.62)),_e(S.LinearProgress,"infoBg",gn(S.info.main,.62)),_e(S.LinearProgress,"successBg",gn(S.success.main,.62)),_e(S.LinearProgress,"warningBg",gn(S.warning.main,.62)),_e(S.Skeleton,"bg",`rgba(${E("palette-text-primaryChannel")} / 0.11)`),_e(S.Slider,"primaryTrack",gn(S.primary.main,.62)),_e(S.Slider,"secondaryTrack",gn(S.secondary.main,.62)),_e(S.Slider,"errorTrack",gn(S.error.main,.62)),_e(S.Slider,"infoTrack",gn(S.info.main,.62)),_e(S.Slider,"successTrack",gn(S.success.main,.62)),_e(S.Slider,"warningTrack",gn(S.warning.main,.62));const I=s0(S.background.default,.8);_e(S.SnackbarContent,"bg",I),_e(S.SnackbarContent,"color",Ao(()=>S.getContrastText(I))),_e(S.SpeedDialAction,"fabHoverBg",s0(S.background.paper,.15)),_e(S.StepConnector,"border",E("palette-grey-400")),_e(S.StepContent,"border",E("palette-grey-400")),_e(S.Switch,"defaultColor",E("palette-common-white")),_e(S.Switch,"defaultDisabledColor",E("palette-grey-100")),_e(S.Switch,"primaryDisabledColor",gn(S.primary.main,.62)),_e(S.Switch,"secondaryDisabledColor",gn(S.secondary.main,.62)),_e(S.Switch,"errorDisabledColor",gn(S.error.main,.62)),_e(S.Switch,"infoDisabledColor",gn(S.info.main,.62)),_e(S.Switch,"successDisabledColor",gn(S.success.main,.62)),_e(S.Switch,"warningDisabledColor",gn(S.warning.main,.62)),_e(S.TableCell,"border",gn(i0(S.divider,1),.88)),_e(S.Tooltip,"bg",i0(S.grey[700],.92))}if(S.mode==="dark"){_e(S.Alert,"errorColor",gn(S.error.light,.6)),_e(S.Alert,"infoColor",gn(S.info.light,.6)),_e(S.Alert,"successColor",gn(S.success.light,.6)),_e(S.Alert,"warningColor",gn(S.warning.light,.6)),_e(S.Alert,"errorFilledBg",E("palette-error-dark")),_e(S.Alert,"infoFilledBg",E("palette-info-dark")),_e(S.Alert,"successFilledBg",E("palette-success-dark")),_e(S.Alert,"warningFilledBg",E("palette-warning-dark")),_e(S.Alert,"errorFilledColor",Ao(()=>S.getContrastText(S.error.dark))),_e(S.Alert,"infoFilledColor",Ao(()=>S.getContrastText(S.info.dark))),_e(S.Alert,"successFilledColor",Ao(()=>S.getContrastText(S.success.dark))),_e(S.Alert,"warningFilledColor",Ao(()=>S.getContrastText(S.warning.dark))),_e(S.Alert,"errorStandardBg",mn(S.error.light,.9)),_e(S.Alert,"infoStandardBg",mn(S.info.light,.9)),_e(S.Alert,"successStandardBg",mn(S.success.light,.9)),_e(S.Alert,"warningStandardBg",mn(S.warning.light,.9)),_e(S.Alert,"errorIconColor",E("palette-error-main")),_e(S.Alert,"infoIconColor",E("palette-info-main")),_e(S.Alert,"successIconColor",E("palette-success-main")),_e(S.Alert,"warningIconColor",E("palette-warning-main")),_e(S.AppBar,"defaultBg",E("palette-grey-900")),_e(S.AppBar,"darkBg",E("palette-background-paper")),_e(S.AppBar,"darkColor",E("palette-text-primary")),_e(S.Avatar,"defaultBg",E("palette-grey-600")),_e(S.Button,"inheritContainedBg",E("palette-grey-800")),_e(S.Button,"inheritContainedHoverBg",E("palette-grey-700")),_e(S.Chip,"defaultBorder",E("palette-grey-700")),_e(S.Chip,"defaultAvatarColor",E("palette-grey-300")),_e(S.Chip,"defaultIconColor",E("palette-grey-300")),_e(S.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),_e(S.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),_e(S.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),_e(S.LinearProgress,"primaryBg",mn(S.primary.main,.5)),_e(S.LinearProgress,"secondaryBg",mn(S.secondary.main,.5)),_e(S.LinearProgress,"errorBg",mn(S.error.main,.5)),_e(S.LinearProgress,"infoBg",mn(S.info.main,.5)),_e(S.LinearProgress,"successBg",mn(S.success.main,.5)),_e(S.LinearProgress,"warningBg",mn(S.warning.main,.5)),_e(S.Skeleton,"bg",`rgba(${E("palette-text-primaryChannel")} / 0.13)`),_e(S.Slider,"primaryTrack",mn(S.primary.main,.5)),_e(S.Slider,"secondaryTrack",mn(S.secondary.main,.5)),_e(S.Slider,"errorTrack",mn(S.error.main,.5)),_e(S.Slider,"infoTrack",mn(S.info.main,.5)),_e(S.Slider,"successTrack",mn(S.success.main,.5)),_e(S.Slider,"warningTrack",mn(S.warning.main,.5));const I=s0(S.background.default,.98);_e(S.SnackbarContent,"bg",I),_e(S.SnackbarContent,"color",Ao(()=>S.getContrastText(I))),_e(S.SpeedDialAction,"fabHoverBg",s0(S.background.paper,.15)),_e(S.StepConnector,"border",E("palette-grey-600")),_e(S.StepContent,"border",E("palette-grey-600")),_e(S.Switch,"defaultColor",E("palette-grey-300")),_e(S.Switch,"defaultDisabledColor",E("palette-grey-600")),_e(S.Switch,"primaryDisabledColor",mn(S.primary.main,.55)),_e(S.Switch,"secondaryDisabledColor",mn(S.secondary.main,.55)),_e(S.Switch,"errorDisabledColor",mn(S.error.main,.55)),_e(S.Switch,"infoDisabledColor",mn(S.info.main,.55)),_e(S.Switch,"successDisabledColor",mn(S.success.main,.55)),_e(S.Switch,"warningDisabledColor",mn(S.warning.main,.55)),_e(S.TableCell,"border",mn(i0(S.divider,1),.68)),_e(S.Tooltip,"bg",i0(S.grey[700],.92))}ia(S.background,"default"),ia(S.background,"paper"),ia(S.common,"background"),ia(S.common,"onBackground"),ia(S,"divider"),Object.keys(S).forEach(I=>{const O=S[I];O&&typeof O=="object"&&(O.main&&_e(S[I],"mainChannel",_m(xm(O.main))),O.light&&_e(S[I],"lightChannel",_m(xm(O.light))),O.dark&&_e(S[I],"darkChannel",_m(xm(O.dark))),O.contrastText&&_e(S[I],"contrastTextChannel",_m(xm(O.contrastText))),I==="text"&&(ia(S[I],"primary"),ia(S[I],"secondary")),I==="action"&&(O.active&&ia(S[I],"active"),O.selected&&ia(S[I],"selected")))})}),x=e.reduce((A,S)=>Qr(A,S),x);const b={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:o,getSelector:pZ(x)},{vars:T,generateThemeVars:w,generateStyleSheets:M}=GY(x,b);return x.vars=T,Object.entries(x.colorSchemes[x.defaultColorScheme]).forEach(([A,S])=>{x[A]=S}),x.generateThemeVars=w,x.generateStyleSheets=M,x.generateSpacing=function(){return G4(c.spacing,CN(this))},x.getColorSchemeSelector=HY(a),x.spacing=x.generateSpacing(),x.shouldSkipGeneratingVar=o,x.unstable_sxConfig={...dy,...c==null?void 0:c.unstable_sxConfig},x.unstable_sx=function(S){return mc({sx:S,theme:this})},x.toRuntimeSource=gZ,x}function lD(n,e,t){n.colorSchemes&&t&&(n.colorSchemes[e]={...t!==!0&&t,palette:BN({...t===!0?{}:t.palette,mode:e})})}function fy(n={},...e){const{palette:t,cssVariables:r=!1,colorSchemes:i=t?void 0:{light:!0},defaultColorScheme:s=t==null?void 0:t.mode,...o}=n,a=s||"light",l=i==null?void 0:i[a],c={...i,...t?{[a]:{...typeof l!="boolean"&&l,palette:t}}:void 0};if(r===!1){if(!("colorSchemes"in n))return VE(n,...e);let u=t;"palette"in n||c[a]&&(c[a]!==!0?u=c[a].palette:a==="dark"&&(u={mode:"dark"}));const h=VE({...n,palette:u},...e);return h.defaultColorScheme=a,h.colorSchemes=c,h.palette.mode==="light"&&(h.colorSchemes.light={...c.light!==!0&&c.light,palette:h.palette},lD(h,"dark",c.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:h.palette},lD(h,"light",c.light)),h}return!t&&!("light"in c)&&a==="light"&&(c.light=!0),xZ({...o,colorSchemes:c,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}function SZ(n){return String(n).match(/[\d.\-+]*\s*(.*)/)[1]||""}function bZ(n){return parseFloat(n)}const KS=fy();function Cc(){const n=qS(KS);return n[vo]||n}function wZ({props:n,name:e}){return hY({props:n,name:e,defaultTheme:KS,themeId:vo})}function m$(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const $i=n=>m$(n)&&n!=="classes",Ye=oY({themeId:vo,defaultTheme:KS,rootShouldForwardProp:$i});function cD({theme:n,...e}){const t=vo in n?n[vo]:void 0;return H.jsx(l$,{...e,themeId:t?vo:void 0,theme:t||n})}const o0={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:TZ,useColorScheme:JPe,getInitColorSchemeScript:e2e}=BY({themeId:vo,theme:()=>fy({cssVariables:!0}),colorSchemeStorageKey:o0.colorSchemeStorageKey,modeStorageKey:o0.modeStorageKey,defaultColorScheme:{light:o0.defaultLightColorScheme,dark:o0.defaultDarkColorScheme},resolveTheme:n=>{const e={...n,typography:d$(n.palette,n.typography)};return e.unstable_sx=function(r){return mc({sx:r,theme:this})},e}}),MZ=TZ;function EZ({theme:n,...e}){return typeof n=="function"?H.jsx(cD,{theme:n,...e}):"colorSchemes"in(vo in n?n[vo]:n)?H.jsx(MZ,{theme:n,...e}):H.jsx(cD,{theme:n,...e})}function CZ(n){return H.jsx(QK,{...n,defaultTheme:KS,themeId:vo})}function zN(n){return function(t){return H.jsx(CZ,{styles:typeof n=="function"?r=>n({theme:r,...t}):n})}}function AZ(){return H4}const $t=LY;function Ht(n){return IY(n)}function RZ(n){return Bt("MuiSvgIcon",n)}Pt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const NZ=n=>{const{color:e,fontSize:t,classes:r}=n,i={root:["root",e!=="inherit"&&`color${Ve(e)}`,`fontSize${Ve(t)}`]};return Vt(i,RZ,r)},PZ=Ye("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${Ve(t.color)}`],e[`fontSize${Ve(t.fontSize)}`]]}})($t(({theme:n})=>{var e,t,r,i,s,o,a,l,c,u,h,d,f,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(e=n.transitions)==null?void 0:e.create)==null?void 0:i.call(e,"fill",{duration:(r=(t=(n.vars??n).transitions)==null?void 0:t.duration)==null?void 0:r.shorter}),variants:[{props:y=>!y.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(s=n.typography)==null?void 0:s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(a=n.typography)==null?void 0:a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(c=n.typography)==null?void 0:c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((n.vars??n).palette).filter(([,y])=>y&&y.main).map(([y])=>{var g,m;return{props:{color:y},style:{color:(m=(g=(n.vars??n).palette)==null?void 0:g[y])==null?void 0:m.main}}}),{props:{color:"action"},style:{color:(d=(h=(n.vars??n).palette)==null?void 0:h.action)==null?void 0:d.active}},{props:{color:"disabled"},style:{color:(p=(f=(n.vars??n).palette)==null?void 0:f.action)==null?void 0:p.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),ox=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:h,viewBox:d="0 0 24 24",...f}=r,p=P.isValidElement(i)&&i.type==="svg",y={...r,color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:d,hasSvgAsChild:p},g={};u||(g.viewBox=d);const m=NZ(y);return H.jsxs(PZ,{as:a,className:it(m.root,s),focusable:"false",color:c,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:t,...g,...f,...p&&i.props,ownerState:y,children:[p?i.props.children:i,h?H.jsx("title",{children:h}):null]})});ox&&(ox.muiName="SvgIcon");function _i(n,e){function t(r,i){return H.jsx(ox,{"data-testid":`${e}Icon`,ref:i,...r,children:n})}return t.muiName=ox.muiName,P.memo(P.forwardRef(t))}var fn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $N=Symbol.for("react.element"),VN=Symbol.for("react.portal"),YS=Symbol.for("react.fragment"),ZS=Symbol.for("react.strict_mode"),QS=Symbol.for("react.profiler"),JS=Symbol.for("react.provider"),eb=Symbol.for("react.context"),IZ=Symbol.for("react.server_context"),tb=Symbol.for("react.forward_ref"),nb=Symbol.for("react.suspense"),rb=Symbol.for("react.suspense_list"),ib=Symbol.for("react.memo"),sb=Symbol.for("react.lazy"),LZ=Symbol.for("react.offscreen"),g$;g$=Symbol.for("react.module.reference");function $s(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case $N:switch(n=n.type,n){case YS:case QS:case ZS:case nb:case rb:return n;default:switch(n=n&&n.$$typeof,n){case IZ:case eb:case tb:case sb:case ib:case JS:return n;default:return e}}case VN:return e}}}fn.ContextConsumer=eb;fn.ContextProvider=JS;fn.Element=$N;fn.ForwardRef=tb;fn.Fragment=YS;fn.Lazy=sb;fn.Memo=ib;fn.Portal=VN;fn.Profiler=QS;fn.StrictMode=ZS;fn.Suspense=nb;fn.SuspenseList=rb;fn.isAsyncMode=function(){return!1};fn.isConcurrentMode=function(){return!1};fn.isContextConsumer=function(n){return $s(n)===eb};fn.isContextProvider=function(n){return $s(n)===JS};fn.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===$N};fn.isForwardRef=function(n){return $s(n)===tb};fn.isFragment=function(n){return $s(n)===YS};fn.isLazy=function(n){return $s(n)===sb};fn.isMemo=function(n){return $s(n)===ib};fn.isPortal=function(n){return $s(n)===VN};fn.isProfiler=function(n){return $s(n)===QS};fn.isStrictMode=function(n){return $s(n)===ZS};fn.isSuspense=function(n){return $s(n)===nb};fn.isSuspenseList=function(n){return $s(n)===rb};fn.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===YS||n===QS||n===ZS||n===nb||n===rb||n===LZ||typeof n=="object"&&n!==null&&(n.$$typeof===sb||n.$$typeof===ib||n.$$typeof===JS||n.$$typeof===eb||n.$$typeof===tb||n.$$typeof===g$||n.getModuleId!==void 0)};fn.typeOf=$s;function y$(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.includes(r))continue;t[r]=n[r]}return t}function Pg(n,e){return Pg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Pg(n,e)}function GN(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Pg(n,e)}const uD={disabled:!1},ax=Et.createContext(null);var DZ=function(e){return e.scrollTop},Sm="unmounted",Qc="exited",Jc="entering",sd="entered",HE="exiting",Eo=function(n){GN(e,n);function e(r,i){var s;s=n.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Qc,s.appearStatus=Jc):l=sd:r.unmountOnExit||r.mountOnEnter?l=Sm:l=Qc,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Sm?{status:Qc}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Jc&&o!==sd&&(s=Jc):(o===Jc||o===sd)&&(s=HE)}this.updateStatus(!1,s)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},t.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Jc){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:ym.findDOMNode(this);o&&DZ(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Qc&&this.setState({status:Sm})},t.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[ym.findDOMNode(this),a],c=l[0],u=l[1],h=this.getTimeouts(),d=a?h.appear:h.enter;if(!i&&!o||uD.disabled){this.safeSetState({status:sd},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Jc},function(){s.props.onEntering(c,u),s.onTransitionEnd(d,function(){s.safeSetState({status:sd},function(){s.props.onEntered(c,u)})})})},t.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:ym.findDOMNode(this);if(!s||uD.disabled){this.safeSetState({status:Qc},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:HE},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Qc},function(){i.props.onExited(a)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},t.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},t.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:ym.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},t.render=function(){var i=this.state.status;if(i===Sm)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=y$(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Et.createElement(ax.Provider,{value:null},typeof o=="function"?o(i,a):Et.cloneElement(Et.Children.only(o),a))},e}(Et.Component);Eo.contextType=ax;Eo.propTypes={};function vh(){}Eo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:vh,onEntering:vh,onEntered:vh,onExit:vh,onExiting:vh,onExited:vh};Eo.UNMOUNTED=Sm;Eo.EXITED=Qc;Eo.ENTERING=Jc;Eo.ENTERED=sd;Eo.EXITING=HE;function v$(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function HN(n,e){var t=function(s){return e&&P.isValidElement(s)?e(s):s},r=Object.create(null);return n&&P.Children.map(n,function(i){return i}).forEach(function(i){r[i.key]=t(i)}),r}function FZ(n,e){n=n||{},e=e||{};function t(u){return u in e?e[u]:n[u]}var r=Object.create(null),i=[];for(var s in n)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=t(c)}a[l]=t(l)}for(o=0;o<i.length;o++)a[i[o]]=t(i[o]);return a}function mu(n,e,t){return t[e]!=null?t[e]:n.props[e]}function OZ(n,e){return HN(n.children,function(t){return P.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:mu(t,"appear",n),enter:mu(t,"enter",n),exit:mu(t,"exit",n)})})}function kZ(n,e,t){var r=HN(n.children),i=FZ(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(P.isValidElement(o)){var a=s in e,l=s in r,c=e[s],u=P.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=P.cloneElement(o,{onExited:t.bind(null,o),in:!0,exit:mu(o,"exit",n),enter:mu(o,"enter",n)}):!l&&a&&!u?i[s]=P.cloneElement(o,{in:!1}):l&&a&&P.isValidElement(c)&&(i[s]=P.cloneElement(o,{onExited:t.bind(null,o),in:c.props.in,exit:mu(o,"exit",n),enter:mu(o,"enter",n)}))}}),i}var UZ=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},BZ={component:"div",childFactory:function(e){return e}},WN=function(n){GN(e,n);function e(r,i){var s;s=n.call(this,r,i)||this;var o=s.handleExited.bind(v$(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?OZ(i,a):kZ(i,o,a),firstRender:!1}},t.handleExited=function(i,s){var o=HN(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=ni({},a.children);return delete l[i.key],{children:l}}))},t.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=y$(i,["component","childFactory"]),l=this.state.contextValue,c=UZ(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Et.createElement(ax.Provider,{value:l},c):Et.createElement(ax.Provider,{value:l},Et.createElement(s,a,c))},e}(Et.Component);WN.propTypes={};WN.defaultProps=BZ;const jN=n=>n.scrollTop;function wf(n,e){const{timeout:t,easing:r,style:i={}}=n;return{duration:i.transitionDuration??(typeof t=="number"?t:t[e.mode]||0),easing:i.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:i.transitionDelay}}function zZ(n){return Bt("MuiPaper",n)}Pt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const $Z=n=>{const{square:e,elevation:t,variant:r,classes:i}=n,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${t}`]};return Vt(s,zZ,i)},VZ=Ye("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})($t(({theme:n})=>({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:n.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(n.vars||n).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),tp=P.forwardRef(function(e,t){var f;const r=Ht({props:e,name:"MuiPaper"}),i=Cc(),{className:s,component:o="div",elevation:a=1,square:l=!1,variant:c="elevation",...u}=r,h={...r,component:o,elevation:a,square:l,variant:c},d=$Z(h);return H.jsx(VZ,{as:o,ownerState:h,className:it(d.root,s),ref:t,...u,style:{...c==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[a],...i.vars&&{"--Paper-overlay":(f=i.vars.overlays)==null?void 0:f[a]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Fn("#fff",GE(a))}, ${Fn("#fff",GE(a))})`}},...u.style}})});function Mi(n,e){const{className:t,elementType:r,ownerState:i,externalForwardedProps:s,getSlotOwnerState:o,internalForwardedProps:a,...l}=e,{component:c,slots:u={[n]:void 0},slotProps:h={[n]:void 0},...d}=s,f=u[n]||r,p=r$(h[n],i),{props:{component:y,...g},internalRef:m}=n$({className:t,...l,externalForwardedProps:n==="root"?d:void 0,externalSlotProps:p}),_=ur(m,p==null?void 0:p.ref,e.ref),v=o?o(g):{},x={...i,...v},b=n==="root"?y||c:y,T=t$(f,{...n==="root"&&!c&&!u[n]&&a,...n!=="root"&&!u[n]&&a,...g,...b&&{as:b},ref:_},x);return Object.keys(v).forEach(w=>{delete T[w]}),[f,T]}class lx{constructor(){gp(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new lx}static use(){const e=J4(lx.create).current,[t,r]=P.useState(!1);return e.shouldMount=t,e.setShouldMount=r,P.useEffect(e.mountEffect,[t]),e}mount(){return this.mounted||(this.mounted=HZ(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.start(...e)})}stop(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.stop(...e)})}pulsate(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.pulsate(...e)})}}function GZ(){return lx.use()}function HZ(){let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t}function WZ(n){const{className:e,classes:t,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=n,[u,h]=P.useState(!1),d=it(e,t.ripple,t.rippleVisible,r&&t.ripplePulsate),f={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},p=it(t.child,u&&t.childLeaving,r&&t.childPulsate);return!a&&!u&&h(!0),P.useEffect(()=>{if(!a&&l!=null){const y=setTimeout(l,c);return()=>{clearTimeout(y)}}},[l,a,c]),H.jsx("span",{className:d,style:f,children:H.jsx("span",{className:p})})}const ws=Pt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),WE=550,jZ=80,qZ=cy`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,XZ=cy`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,KZ=cy`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,YZ=Ye("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ZZ=Ye(WZ,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${ws.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${qZ};
    animation-duration: ${WE}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  &.${ws.ripplePulsate} {
    animation-duration: ${({theme:n})=>n.transitions.duration.shorter}ms;
  }

  & .${ws.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${ws.childLeaving} {
    opacity: 0;
    animation-name: ${XZ};
    animation-duration: ${WE}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  & .${ws.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${KZ};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,QZ=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o,...a}=r,[l,c]=P.useState([]),u=P.useRef(0),h=P.useRef(null);P.useEffect(()=>{h.current&&(h.current(),h.current=null)},[l]);const d=P.useRef(!1),f=FN(),p=P.useRef(null),y=P.useRef(null),g=P.useCallback(x=>{const{pulsate:b,rippleX:T,rippleY:w,rippleSize:M,cb:A}=x;c(S=>[...S,H.jsx(ZZ,{classes:{ripple:it(s.ripple,ws.ripple),rippleVisible:it(s.rippleVisible,ws.rippleVisible),ripplePulsate:it(s.ripplePulsate,ws.ripplePulsate),child:it(s.child,ws.child),childLeaving:it(s.childLeaving,ws.childLeaving),childPulsate:it(s.childPulsate,ws.childPulsate)},timeout:WE,pulsate:b,rippleX:T,rippleY:w,rippleSize:M},u.current)]),u.current+=1,h.current=A},[s]),m=P.useCallback((x={},b={},T=()=>{})=>{const{pulsate:w=!1,center:M=i||b.pulsate,fakeElement:A=!1}=b;if((x==null?void 0:x.type)==="mousedown"&&d.current){d.current=!1;return}(x==null?void 0:x.type)==="touchstart"&&(d.current=!0);const S=A?null:y.current,E=S?S.getBoundingClientRect():{width:0,height:0,left:0,top:0};let I,O,N;if(M||x===void 0||x.clientX===0&&x.clientY===0||!x.clientX&&!x.touches)I=Math.round(E.width/2),O=Math.round(E.height/2);else{const{clientX:R,clientY:D}=x.touches&&x.touches.length>0?x.touches[0]:x;I=Math.round(R-E.left),O=Math.round(D-E.top)}if(M)N=Math.sqrt((2*E.width**2+E.height**2)/3),N%2===0&&(N+=1);else{const R=Math.max(Math.abs((S?S.clientWidth:0)-I),I)*2+2,D=Math.max(Math.abs((S?S.clientHeight:0)-O),O)*2+2;N=Math.sqrt(R**2+D**2)}x!=null&&x.touches?p.current===null&&(p.current=()=>{g({pulsate:w,rippleX:I,rippleY:O,rippleSize:N,cb:T})},f.start(jZ,()=>{p.current&&(p.current(),p.current=null)})):g({pulsate:w,rippleX:I,rippleY:O,rippleSize:N,cb:T})},[i,g,f]),_=P.useCallback(()=>{m({},{pulsate:!0})},[m]),v=P.useCallback((x,b)=>{if(f.clear(),(x==null?void 0:x.type)==="touchend"&&p.current){p.current(),p.current=null,f.start(0,()=>{v(x,b)});return}p.current=null,c(T=>T.length>0?T.slice(1):T),h.current=b},[f]);return P.useImperativeHandle(t,()=>({pulsate:_,start:m,stop:v}),[_,m,v]),H.jsx(YZ,{className:it(ws.root,s.root,o),ref:y,...a,children:H.jsx(WN,{component:null,exit:!0,children:l})})});function JZ(n){return Bt("MuiButtonBase",n)}const eQ=Pt("MuiButtonBase",["root","disabled","focusVisible"]),tQ=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:r,classes:i}=n,o=Vt({root:["root",e&&"disabled",t&&"focusVisible"]},JZ,i);return t&&r&&(o.root+=` ${r}`),o},nQ=Ye("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${eQ.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Ig=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:d=!1,focusVisibleClassName:f,LinkComponent:p="a",onBlur:y,onClick:g,onContextMenu:m,onDragLeave:_,onFocus:v,onFocusVisible:x,onKeyDown:b,onKeyUp:T,onMouseDown:w,onMouseLeave:M,onMouseUp:A,onTouchEnd:S,onTouchMove:E,onTouchStart:I,tabIndex:O=0,TouchRippleProps:N,touchRippleRef:R,type:D,...q}=r,L=P.useRef(null),j=GZ(),z=ur(j.ref,R),[K,U]=P.useState(!1);c&&K&&U(!1),P.useImperativeHandle(i,()=>({focusVisible:()=>{U(!0),L.current.focus()}}),[]);const te=j.shouldMount&&!u&&!c;P.useEffect(()=>{K&&d&&!u&&j.pulsate()},[u,d,K,j]);function k(oe,Te,Se=h){return Fa(Xe=>(Te&&Te(Xe),Se||j[oe](Xe),!0))}const V=k("start",w),Q=k("stop",m),le=k("stop",_),pe=k("stop",A),ue=k("stop",oe=>{K&&oe.preventDefault(),M&&M(oe)}),be=k("start",I),Pe=k("stop",S),we=k("stop",E),G=k("stop",oe=>{YL(oe.target)||U(!1),y&&y(oe)},!1),He=Fa(oe=>{L.current||(L.current=oe.currentTarget),YL(oe.target)&&(U(!0),x&&x(oe)),v&&v(oe)}),$e=()=>{const oe=L.current;return l&&l!=="button"&&!(oe.tagName==="A"&&oe.href)},Ze=Fa(oe=>{d&&!oe.repeat&&K&&oe.key===" "&&j.stop(oe,()=>{j.start(oe)}),oe.target===oe.currentTarget&&$e()&&oe.key===" "&&oe.preventDefault(),b&&b(oe),oe.target===oe.currentTarget&&$e()&&oe.key==="Enter"&&!c&&(oe.preventDefault(),g&&g(oe))}),De=Fa(oe=>{d&&oe.key===" "&&K&&!oe.defaultPrevented&&j.stop(oe,()=>{j.pulsate(oe)}),T&&T(oe),g&&oe.target===oe.currentTarget&&$e()&&oe.key===" "&&!oe.defaultPrevented&&g(oe)});let ot=l;ot==="button"&&(q.href||q.to)&&(ot=p);const Je={};ot==="button"?(Je.type=D===void 0?"button":D,Je.disabled=c):(!q.href&&!q.to&&(Je.role="button"),c&&(Je["aria-disabled"]=c));const B=ur(t,L),C={...r,centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:d,tabIndex:O,focusVisible:K},ae=tQ(C);return H.jsxs(nQ,{as:ot,className:it(ae.root,a),ownerState:C,onBlur:G,onClick:g,onContextMenu:Q,onFocus:He,onKeyDown:Ze,onKeyUp:De,onMouseDown:V,onMouseLeave:ue,onMouseUp:pe,onDragLeave:le,onTouchEnd:Pe,onTouchMove:we,onTouchStart:be,ref:B,tabIndex:c?-1:O,type:D,...Je,...q,children:[o,te?H.jsx(QZ,{ref:z,center:s,...N}):null]})});function rQ(n){return typeof n.main=="string"}function iQ(n,e=[]){if(!rQ(n))return!1;for(const t of e)if(!n.hasOwnProperty(t)||typeof n[t]!="string")return!1;return!0}function Yr(n=[]){return([,e])=>e&&iQ(e,n)}function sQ(n){return Bt("MuiAlert",n)}const hD=Pt("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function oQ(n){return Bt("MuiIconButton",n)}const aQ=Pt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),lQ=n=>{const{classes:e,disabled:t,color:r,edge:i,size:s}=n,o={root:["root",t&&"disabled",r!=="default"&&`color${Ve(r)}`,i&&`edge${Ve(i)}`,`size${Ve(s)}`]};return Vt(o,oQ,e)},cQ=Ye(Ig,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="default"&&e[`color${Ve(t.color)}`],t.edge&&e[`edge${Ve(t.edge)}`],e[`size${Ve(t.size)}`]]}})($t(({theme:n})=>({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Fn(n.palette.action.active,n.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),$t(({theme:n})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(n.palette).filter(Yr()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}})),...Object.entries(n.palette).filter(Yr()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":n.vars?`rgba(${(n.vars||n).palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Fn((n.vars||n).palette[e].main,n.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:n.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:n.typography.pxToRem(28)}}],[`&.${aQ.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}}))),Lg=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium",...h}=r,d={...r,edge:i,color:a,disabled:l,disableFocusRipple:c,size:u},f=lQ(d);return H.jsx(cQ,{className:it(f.root,o),centerRipple:!0,focusRipple:!c,disabled:l,ref:t,...h,ownerState:d,children:s})}),uQ=_i(H.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),hQ=_i(H.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),dQ=_i(H.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),fQ=_i(H.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),pQ=_i(H.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),mQ=n=>{const{variant:e,color:t,severity:r,classes:i}=n,s={root:["root",`color${Ve(t||r)}`,`${e}${Ve(t||r)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return Vt(s,sQ,i)},gQ=Ye(tp,{name:"MuiAlert",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`${t.variant}${Ve(t.color||t.severity)}`]]}})($t(({theme:n})=>{const e=n.palette.mode==="light"?Rg:Ng,t=n.palette.mode==="light"?Ng:Rg;return{...n.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(n.palette).filter(Yr(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:n.vars?n.vars.palette.Alert[`${r}Color`]:e(n.palette[r].light,.6),backgroundColor:n.vars?n.vars.palette.Alert[`${r}StandardBg`]:t(n.palette[r].light,.9),[`& .${hD.icon}`]:n.vars?{color:n.vars.palette.Alert[`${r}IconColor`]}:{color:n.palette[r].main}}})),...Object.entries(n.palette).filter(Yr(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:n.vars?n.vars.palette.Alert[`${r}Color`]:e(n.palette[r].light,.6),border:`1px solid ${(n.vars||n).palette[r].light}`,[`& .${hD.icon}`]:n.vars?{color:n.vars.palette.Alert[`${r}IconColor`]}:{color:n.palette[r].main}}})),...Object.entries(n.palette).filter(Yr(["dark"])).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:{fontWeight:n.typography.fontWeightMedium,...n.vars?{color:n.vars.palette.Alert[`${r}FilledColor`],backgroundColor:n.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:n.palette.mode==="dark"?n.palette[r].dark:n.palette[r].main,color:n.palette.getContrastText(n.palette[r].main)}}}))]}})),yQ=Ye("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(n,e)=>e.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),vQ=Ye("div",{name:"MuiAlert",slot:"Message",overridesResolver:(n,e)=>e.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),dD=Ye("div",{name:"MuiAlert",slot:"Action",overridesResolver:(n,e)=>e.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),fD={success:H.jsx(uQ,{fontSize:"inherit"}),warning:H.jsx(hQ,{fontSize:"inherit"}),error:H.jsx(dQ,{fontSize:"inherit"}),info:H.jsx(fQ,{fontSize:"inherit"})},_Q=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiAlert"}),{action:i,children:s,className:o,closeText:a="Close",color:l,components:c={},componentsProps:u={},icon:h,iconMapping:d=fD,onClose:f,role:p="alert",severity:y="success",slotProps:g={},slots:m={},variant:_="standard",...v}=r,x={...r,color:l,severity:y,variant:_,colorSeverity:l||y},b=mQ(x),T={slots:{closeButton:c.CloseButton,closeIcon:c.CloseIcon,...m},slotProps:{...u,...g}},[w,M]=Mi("closeButton",{elementType:Lg,externalForwardedProps:T,ownerState:x}),[A,S]=Mi("closeIcon",{elementType:pQ,externalForwardedProps:T,ownerState:x});return H.jsxs(gQ,{role:p,elevation:0,ownerState:x,className:it(b.root,o),ref:t,...v,children:[h!==!1?H.jsx(yQ,{ownerState:x,className:b.icon,children:h||d[y]||fD[y]}):null,H.jsx(vQ,{ownerState:x,className:b.message,children:s}),i!=null?H.jsx(dD,{ownerState:x,className:b.action,children:i}):null,i==null&&f?H.jsx(dD,{ownerState:x,className:b.action,children:H.jsx(w,{size:"small","aria-label":a,title:a,color:"inherit",onClick:f,...M,children:H.jsx(A,{fontSize:"small",...S})})}):null]})});function xQ(n){return Bt("MuiTypography",n)}Pt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const SQ={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},bQ=AZ(),wQ=n=>{const{align:e,gutterBottom:t,noWrap:r,paragraph:i,variant:s,classes:o}=n,a={root:["root",s,n.align!=="inherit"&&`align${Ve(e)}`,t&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Vt(a,xQ,o)},TQ=Ye("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${Ve(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})($t(({theme:n})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(n.palette).filter(Yr()).map(([t])=>({props:{color:t},style:{color:(n.vars||n).palette[t].main}})),...Object.entries(((e=n.palette)==null?void 0:e.text)||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Ve(t)}`},style:{color:(n.vars||n).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}})),pD={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Oa=P.forwardRef(function(e,t){const{color:r,...i}=Ht({props:e,name:"MuiTypography"}),s=!SQ[r],o=bQ({...i,...s&&{color:r}}),{align:a="inherit",className:l,component:c,gutterBottom:u=!1,noWrap:h=!1,paragraph:d=!1,variant:f="body1",variantMapping:p=pD,...y}=o,g={...o,align:a,color:r,className:l,component:c,gutterBottom:u,noWrap:h,paragraph:d,variant:f,variantMapping:p},m=c||(d?"p":p[f]||pD[f])||"span",_=wQ(g);return H.jsx(TQ,{as:m,ref:t,className:it(_.root,l),...y,ownerState:g,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...y.style}})});function MQ(n){return typeof n=="function"?n():n}const EQ=P.forwardRef(function(e,t){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=P.useState(null),l=ur(P.isValidElement(r)?th(r):null,t);if(rl(()=>{s||a(MQ(i)||document.body)},[i,s]),rl(()=>{if(o&&!s)return BE(t,o),()=>{BE(t,null)}},[t,o,s]),s){if(P.isValidElement(r)){const c={ref:l};return P.cloneElement(r,c)}return H.jsx(P.Fragment,{children:r})}return H.jsx(P.Fragment,{children:o&&lN.createPortal(r,o)})}),CQ=_i(H.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function AQ(n){return Bt("MuiChip",n)}const Lt=Pt("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),RQ=n=>{const{classes:e,disabled:t,size:r,color:i,iconColor:s,onDelete:o,clickable:a,variant:l}=n,c={root:["root",l,t&&"disabled",`size${Ve(r)}`,`color${Ve(i)}`,a&&"clickable",a&&`clickableColor${Ve(i)}`,o&&"deletable",o&&`deletableColor${Ve(i)}`,`${l}${Ve(i)}`],label:["label",`label${Ve(r)}`],avatar:["avatar",`avatar${Ve(r)}`,`avatarColor${Ve(i)}`],icon:["icon",`icon${Ve(r)}`,`iconColor${Ve(s)}`],deleteIcon:["deleteIcon",`deleteIcon${Ve(r)}`,`deleteIconColor${Ve(i)}`,`deleteIcon${Ve(l)}Color${Ve(i)}`]};return Vt(c,AQ,e)},NQ=Ye("div",{name:"MuiChip",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n,{color:r,iconColor:i,clickable:s,onDelete:o,size:a,variant:l}=t;return[{[`& .${Lt.avatar}`]:e.avatar},{[`& .${Lt.avatar}`]:e[`avatar${Ve(a)}`]},{[`& .${Lt.avatar}`]:e[`avatarColor${Ve(r)}`]},{[`& .${Lt.icon}`]:e.icon},{[`& .${Lt.icon}`]:e[`icon${Ve(a)}`]},{[`& .${Lt.icon}`]:e[`iconColor${Ve(i)}`]},{[`& .${Lt.deleteIcon}`]:e.deleteIcon},{[`& .${Lt.deleteIcon}`]:e[`deleteIcon${Ve(a)}`]},{[`& .${Lt.deleteIcon}`]:e[`deleteIconColor${Ve(r)}`]},{[`& .${Lt.deleteIcon}`]:e[`deleteIcon${Ve(l)}Color${Ve(r)}`]},e.root,e[`size${Ve(a)}`],e[`color${Ve(r)}`],s&&e.clickable,s&&r!=="default"&&e[`clickableColor${Ve(r)})`],o&&e.deletable,o&&r!=="default"&&e[`deletableColor${Ve(r)}`],e[l],e[`${l}${Ve(r)}`]]}})($t(({theme:n})=>{const e=n.palette.mode==="light"?n.palette.grey[700]:n.palette.grey[300];return{maxWidth:"100%",fontFamily:n.typography.fontFamily,fontSize:n.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(n.vars||n).palette.text.primary,backgroundColor:(n.vars||n).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:n.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${Lt.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${Lt.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:n.vars?n.vars.palette.Chip.defaultAvatarColor:e,fontSize:n.typography.pxToRem(12)},[`& .${Lt.avatarColorPrimary}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.dark},[`& .${Lt.avatarColorSecondary}`]:{color:(n.vars||n).palette.secondary.contrastText,backgroundColor:(n.vars||n).palette.secondary.dark},[`& .${Lt.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:n.typography.pxToRem(10)},[`& .${Lt.icon}`]:{marginLeft:5,marginRight:-6},[`& .${Lt.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / 0.26)`:Fn(n.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / 0.4)`:Fn(n.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${Lt.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${Lt.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(n.palette).filter(Yr(["contrastText"])).map(([t])=>({props:{color:t},style:{backgroundColor:(n.vars||n).palette[t].main,color:(n.vars||n).palette[t].contrastText,[`& .${Lt.deleteIcon}`]:{color:n.vars?`rgba(${n.vars.palette[t].contrastTextChannel} / 0.7)`:Fn(n.palette[t].contrastText,.7),"&:hover, &:active":{color:(n.vars||n).palette[t].contrastText}}}})),{props:t=>t.iconColor===t.color,style:{[`& .${Lt.icon}`]:{color:n.vars?n.vars.palette.Chip.defaultIconColor:e}}},{props:t=>t.iconColor===t.color&&t.color!=="default",style:{[`& .${Lt.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${Lt.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.action.selectedChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:Fn(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}}},...Object.entries(n.palette).filter(Yr(["dark"])).map(([t])=>({props:{color:t,onDelete:!0},style:{[`&.${Lt.focusVisible}`]:{background:(n.vars||n).palette[t].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.selectedChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:Fn(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity)},[`&.${Lt.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.action.selectedChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:Fn(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)},"&:active":{boxShadow:(n.vars||n).shadows[1]}}},...Object.entries(n.palette).filter(Yr(["dark"])).map(([t])=>({props:{color:t,clickable:!0},style:{[`&:hover, &.${Lt.focusVisible}`]:{backgroundColor:(n.vars||n).palette[t].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:n.vars?`1px solid ${n.vars.palette.Chip.defaultBorder}`:`1px solid ${n.palette.mode==="light"?n.palette.grey[400]:n.palette.grey[700]}`,[`&.${Lt.clickable}:hover`]:{backgroundColor:(n.vars||n).palette.action.hover},[`&.${Lt.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`& .${Lt.avatar}`]:{marginLeft:4},[`& .${Lt.avatarSmall}`]:{marginLeft:2},[`& .${Lt.icon}`]:{marginLeft:4},[`& .${Lt.iconSmall}`]:{marginLeft:2},[`& .${Lt.deleteIcon}`]:{marginRight:5},[`& .${Lt.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(n.palette).filter(Yr()).map(([t])=>({props:{variant:"outlined",color:t},style:{color:(n.vars||n).palette[t].main,border:`1px solid ${n.vars?`rgba(${n.vars.palette[t].mainChannel} / 0.7)`:Fn(n.palette[t].main,.7)}`,[`&.${Lt.clickable}:hover`]:{backgroundColor:n.vars?`rgba(${n.vars.palette[t].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Fn(n.palette[t].main,n.palette.action.hoverOpacity)},[`&.${Lt.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette[t].mainChannel} / ${n.vars.palette.action.focusOpacity})`:Fn(n.palette[t].main,n.palette.action.focusOpacity)},[`& .${Lt.deleteIcon}`]:{color:n.vars?`rgba(${n.vars.palette[t].mainChannel} / 0.7)`:Fn(n.palette[t].main,.7),"&:hover, &:active":{color:(n.vars||n).palette[t].main}}}}))]}})),PQ=Ye("span",{name:"MuiChip",slot:"Label",overridesResolver:(n,e)=>{const{ownerState:t}=n,{size:r}=t;return[e.label,e[`label${Ve(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function mD(n){return n.key==="Backspace"||n.key==="Delete"}const IQ=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiChip"}),{avatar:i,className:s,clickable:o,color:a="default",component:l,deleteIcon:c,disabled:u=!1,icon:h,label:d,onClick:f,onDelete:p,onKeyDown:y,onKeyUp:g,size:m="medium",variant:_="filled",tabIndex:v,skipFocusWhenDisabled:x=!1,...b}=r,T=P.useRef(null),w=ur(T,t),M=j=>{j.stopPropagation(),p&&p(j)},A=j=>{j.currentTarget===j.target&&mD(j)&&j.preventDefault(),y&&y(j)},S=j=>{j.currentTarget===j.target&&p&&mD(j)&&p(j),g&&g(j)},E=o!==!1&&f?!0:o,I=E||p?Ig:l||"div",O={...r,component:I,disabled:u,size:m,color:a,iconColor:P.isValidElement(h)&&h.props.color||a,onDelete:!!p,clickable:E,variant:_},N=RQ(O),R=I===Ig?{component:l||"div",focusVisibleClassName:N.focusVisible,...p&&{disableRipple:!0}}:{};let D=null;p&&(D=c&&P.isValidElement(c)?P.cloneElement(c,{className:it(c.props.className,N.deleteIcon),onClick:M}):H.jsx(CQ,{className:it(N.deleteIcon),onClick:M}));let q=null;i&&P.isValidElement(i)&&(q=P.cloneElement(i,{className:it(N.avatar,i.props.className)}));let L=null;return h&&P.isValidElement(h)&&(L=P.cloneElement(h,{className:it(N.icon,h.props.className)})),H.jsxs(NQ,{as:I,className:it(N.root,s),disabled:E&&u?!0:void 0,onClick:f,onKeyDown:A,onKeyUp:S,ref:w,tabIndex:x&&u?-1:v,ownerState:O,...R,...b,children:[q||L,H.jsx(PQ,{className:it(N.label),ownerState:O,children:d}),D]})});function a0(n){return parseInt(n,10)||0}const LQ={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function DQ(n){return n==null||Object.keys(n).length===0||n.outerHeightStyle===0&&!n.overflowing}const FQ=P.forwardRef(function(e,t){const{onChange:r,maxRows:i,minRows:s=1,style:o,value:a,...l}=e,{current:c}=P.useRef(a!=null),u=P.useRef(null),h=ur(t,u),d=P.useRef(null),f=P.useRef(null),p=P.useCallback(()=>{const m=u.current,v=So(m).getComputedStyle(m);if(v.width==="0px")return{outerHeightStyle:0,overflowing:!1};const x=f.current;x.style.width=v.width,x.value=m.value||e.placeholder||"x",x.value.slice(-1)===`
`&&(x.value+=" ");const b=v.boxSizing,T=a0(v.paddingBottom)+a0(v.paddingTop),w=a0(v.borderBottomWidth)+a0(v.borderTopWidth),M=x.scrollHeight;x.value="x";const A=x.scrollHeight;let S=M;s&&(S=Math.max(Number(s)*A,S)),i&&(S=Math.min(Number(i)*A,S)),S=Math.max(S,A);const E=S+(b==="border-box"?T+w:0),I=Math.abs(S-M)<=1;return{outerHeightStyle:E,overflowing:I}},[i,s,e.placeholder]),y=P.useCallback(()=>{const m=p();if(DQ(m))return;const _=m.outerHeightStyle,v=u.current;d.current!==_&&(d.current=_,v.style.height=`${_}px`),v.style.overflow=m.overflowing?"hidden":""},[p]);rl(()=>{const m=()=>{y()};let _;const v=IN(m),x=u.current,b=So(x);b.addEventListener("resize",v);let T;return typeof ResizeObserver<"u"&&(T=new ResizeObserver(m),T.observe(x)),()=>{v.clear(),cancelAnimationFrame(_),b.removeEventListener("resize",v),T&&T.disconnect()}},[p,y]),rl(()=>{y()});const g=m=>{c||y(),r&&r(m)};return H.jsxs(P.Fragment,{children:[H.jsx("textarea",{value:a,onChange:g,ref:h,rows:s,style:o,...l}),H.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:f,tabIndex:-1,style:{...LQ.shadow,...o,paddingTop:0,paddingBottom:0}})]})});function jE(n){return typeof n=="string"}function nh({props:n,states:e,muiFormControl:t}){return e.reduce((r,i)=>(r[i]=n[i],t&&typeof n[i]>"u"&&(r[i]=t[i]),r),{})}const qN=P.createContext(void 0);function Ac(){return P.useContext(qN)}function gD(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function cx(n,e=!1){return n&&(gD(n.value)&&n.value!==""||e&&gD(n.defaultValue)&&n.defaultValue!=="")}function OQ(n){return n.startAdornment}function kQ(n){return Bt("MuiInputBase",n)}const Tf=Pt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var yD;const ob=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${Ve(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},ab=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},UQ=n=>{const{classes:e,color:t,disabled:r,error:i,endAdornment:s,focused:o,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:h,size:d,startAdornment:f,type:p}=n,y={root:["root",`color${Ve(t)}`,r&&"disabled",i&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",d&&d!=="medium"&&`size${Ve(d)}`,u&&"multiline",f&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled",p==="search"&&"inputTypeSearch",u&&"inputMultiline",d==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",s&&"inputAdornedEnd",h&&"readOnly"]};return Vt(y,kQ,e)},lb=Ye("div",{name:"MuiInputBase",slot:"Root",overridesResolver:ob})($t(({theme:n})=>({...n.typography.body1,color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Tf.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:t})=>e.multiline&&t==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),cb=Ye("input",{name:"MuiInputBase",slot:"Input",overridesResolver:ab})($t(({theme:n})=>{const e=n.palette.mode==="light",t={color:"currentColor",...n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},r={opacity:"0 !important"},i=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Tf.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${Tf.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},variants:[{props:({ownerState:s})=>!s.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:s})=>s.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),vD=zN({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),XN=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:s,autoFocus:o,className:a,color:l,components:c={},componentsProps:u={},defaultValue:h,disabled:d,disableInjectingGlobalStyles:f,endAdornment:p,error:y,fullWidth:g=!1,id:m,inputComponent:_="input",inputProps:v={},inputRef:x,margin:b,maxRows:T,minRows:w,multiline:M=!1,name:A,onBlur:S,onChange:E,onClick:I,onFocus:O,onKeyDown:N,onKeyUp:R,placeholder:D,readOnly:q,renderSuffix:L,rows:j,size:z,slotProps:K={},slots:U={},startAdornment:te,type:k="text",value:V,...Q}=r,le=v.value!=null?v.value:V,{current:pe}=P.useRef(le!=null),ue=P.useRef(),be=P.useCallback(Fe=>{},[]),Pe=ur(ue,x,v.ref,be),[we,G]=P.useState(!1),He=Ac(),$e=nh({props:r,muiFormControl:He,states:["color","disabled","error","hiddenLabel","size","required","filled"]});$e.focused=He?He.focused:we,P.useEffect(()=>{!He&&d&&we&&(G(!1),S&&S())},[He,d,we,S]);const Ze=He&&He.onFilled,De=He&&He.onEmpty,ot=P.useCallback(Fe=>{cx(Fe)?Ze&&Ze():De&&De()},[Ze,De]);rl(()=>{pe&&ot({value:le})},[le,ot,pe]);const Je=Fe=>{O&&O(Fe),v.onFocus&&v.onFocus(Fe),He&&He.onFocus?He.onFocus(Fe):G(!0)},B=Fe=>{S&&S(Fe),v.onBlur&&v.onBlur(Fe),He&&He.onBlur?He.onBlur(Fe):G(!1)},C=(Fe,...at)=>{if(!pe){const ut=Fe.target||ue.current;if(ut==null)throw new Error(tl(1));ot({value:ut.value})}v.onChange&&v.onChange(Fe,...at),E&&E(Fe,...at)};P.useEffect(()=>{ot(ue.current)},[]);const ae=Fe=>{ue.current&&Fe.currentTarget===Fe.target&&ue.current.focus(),I&&I(Fe)};let oe=_,Te=v;M&&oe==="input"&&(j?Te={type:void 0,minRows:j,maxRows:j,...Te}:Te={type:void 0,maxRows:T,minRows:w,...Te},oe=FQ);const Se=Fe=>{ot(Fe.animationName==="mui-auto-fill-cancel"?ue.current:{value:"x"})};P.useEffect(()=>{He&&He.setAdornedStart(!!te)},[He,te]);const Xe={...r,color:$e.color||"primary",disabled:$e.disabled,endAdornment:p,error:$e.error,focused:$e.focused,formControl:He,fullWidth:g,hiddenLabel:$e.hiddenLabel,multiline:M,size:$e.size,startAdornment:te,type:k},Ie=UQ(Xe),Oe=U.root||c.Root||lb,pt=K.root||u.root||{},Le=U.input||c.Input||cb;return Te={...Te,...K.input??u.input},H.jsxs(P.Fragment,{children:[!f&&typeof vD=="function"&&(yD||(yD=H.jsx(vD,{}))),H.jsxs(Oe,{...pt,ref:t,onClick:ae,...Q,...!jE(Oe)&&{ownerState:{...Xe,...pt.ownerState}},className:it(Ie.root,pt.className,a,q&&"MuiInputBase-readOnly"),children:[te,H.jsx(qN.Provider,{value:null,children:H.jsx(Le,{"aria-invalid":$e.error,"aria-describedby":i,autoComplete:s,autoFocus:o,defaultValue:h,disabled:$e.disabled,id:m,onAnimationStart:Se,name:A,placeholder:D,readOnly:q,required:$e.required,rows:j,value:le,onKeyDown:N,onKeyUp:R,type:k,...Te,...!jE(Le)&&{as:oe,ownerState:{...Xe,...Te.ownerState}},ref:Pe,className:it(Ie.input,Te.className,q&&"MuiInputBase-readOnly"),onBlur:B,onChange:C,onFocus:Je})}),p,L?L({...$e,startAdornment:te}):null]})]})});function BQ(n){return Bt("MuiInput",n)}const Ap={...Tf,...Pt("MuiInput",["root","underline","input"])};function zQ(n){return Bt("MuiOutlinedInput",n)}const Ro={...Tf,...Pt("MuiOutlinedInput",["root","notchedOutline","input"])};function $Q(n){return Bt("MuiFilledInput",n)}const Uc={...Tf,...Pt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},VQ=_i(H.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),GQ={entering:{opacity:1},entered:{opacity:1}},_$=P.forwardRef(function(e,t){const r=Cc(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:h,onEntering:d,onExit:f,onExited:p,onExiting:y,style:g,timeout:m=i,TransitionComponent:_=Eo,...v}=e,x=P.useRef(null),b=ur(x,th(a),t),T=N=>R=>{if(N){const D=x.current;R===void 0?N(D):N(D,R)}},w=T(d),M=T((N,R)=>{jN(N);const D=wf({style:g,timeout:m,easing:l},{mode:"enter"});N.style.webkitTransition=r.transitions.create("opacity",D),N.style.transition=r.transitions.create("opacity",D),u&&u(N,R)}),A=T(h),S=T(y),E=T(N=>{const R=wf({style:g,timeout:m,easing:l},{mode:"exit"});N.style.webkitTransition=r.transitions.create("opacity",R),N.style.transition=r.transitions.create("opacity",R),f&&f(N)}),I=T(p),O=N=>{s&&s(x.current,N)};return H.jsx(_,{appear:o,in:c,nodeRef:x,onEnter:M,onEntered:A,onEntering:w,onExit:E,onExited:I,onExiting:S,addEndListener:O,timeout:m,...v,children:(N,R)=>P.cloneElement(a,{style:{opacity:0,visibility:N==="exited"&&!c?"hidden":void 0,...GQ[N],...g,...a.props.style},ref:b,...R})})});function HQ(n){return Bt("MuiBackdrop",n)}Pt("MuiBackdrop",["root","invisible"]);const WQ=n=>{const{ownerState:e,...t}=n;return t},jQ=n=>{const{classes:e,invisible:t}=n;return Vt({root:["root",t&&"invisible"]},HQ,e)},qQ=Ye("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),x$=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiBackdrop"}),{children:i,className:s,component:o="div",invisible:a=!1,open:l,components:c={},componentsProps:u={},slotProps:h={},slots:d={},TransitionComponent:f,transitionDuration:p,...y}=r,g={...r,component:o,invisible:a},m=jQ(g),_={transition:f,root:c.Root,...d},v={...u,...h},x={slots:_,slotProps:v},[b,T]=Mi("root",{elementType:qQ,externalForwardedProps:x,className:it(m.root,s),ownerState:g}),[w,M]=Mi("transition",{elementType:_$,externalForwardedProps:x,ownerState:g}),A=WQ(M);return H.jsx(w,{in:l,timeout:p,...y,...A,children:H.jsx(b,{"aria-hidden":!0,...T,classes:m,ref:t,children:i})})}),XQ=Pt("MuiBox",["root"]),KQ=fy(),S$=tY({themeId:vo,defaultTheme:KQ,defaultClassName:XQ.root,generateClassName:W4.generate});function YQ(n){return Bt("PrivateSwitchBase",n)}Pt("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const ZQ=n=>{const{classes:e,checked:t,disabled:r,edge:i}=n,s={root:["root",t&&"checked",r&&"disabled",i&&`edge${Ve(i)}`],input:["input"]};return Vt(s,YQ,e)},QQ=Ye(Ig)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:n,ownerState:e})=>n==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:n,ownerState:e})=>n==="end"&&e.size!=="small",style:{marginRight:-12}}]}),JQ=Ye("input",{shouldForwardProp:$i})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),eJ=P.forwardRef(function(e,t){const{autoFocus:r,checked:i,checkedIcon:s,className:o,defaultChecked:a,disabled:l,disableFocusRipple:c=!1,edge:u=!1,icon:h,id:d,inputProps:f,inputRef:p,name:y,onBlur:g,onChange:m,onFocus:_,readOnly:v,required:x=!1,tabIndex:b,type:T,value:w,...M}=e,[A,S]=zE({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),E=Ac(),I=j=>{_&&_(j),E&&E.onFocus&&E.onFocus(j)},O=j=>{g&&g(j),E&&E.onBlur&&E.onBlur(j)},N=j=>{if(j.nativeEvent.defaultPrevented)return;const z=j.target.checked;S(z),m&&m(j,z)};let R=l;E&&typeof R>"u"&&(R=E.disabled);const D=T==="checkbox"||T==="radio",q={...e,checked:A,disabled:R,disableFocusRipple:c,edge:u},L=ZQ(q);return H.jsxs(QQ,{component:"span",className:it(L.root,o),centerRipple:!0,focusRipple:!c,disabled:R,tabIndex:null,role:void 0,onFocus:I,onBlur:O,ownerState:q,ref:t,...M,children:[H.jsx(JQ,{autoFocus:r,checked:i,defaultChecked:a,className:L.input,disabled:R,id:D?d:void 0,name:y,onChange:N,readOnly:v,ref:p,required:x,ownerState:q,tabIndex:b,type:T,...T==="checkbox"&&w===void 0?{}:{value:w},...f}),A?s:h]})}),tJ=_i(H.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),nJ=_i(H.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),rJ=_i(H.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function iJ(n){return Bt("MuiCheckbox",n)}const sw=Pt("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),sJ=n=>{const{classes:e,indeterminate:t,color:r,size:i}=n,s={root:["root",t&&"indeterminate",`color${Ve(r)}`,`size${Ve(i)}`]},o=Vt(s,iJ,e);return{...e,...o}},oJ=Ye(eJ,{shouldForwardProp:n=>$i(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.indeterminate&&e.indeterminate,e[`size${Ve(t.size)}`],t.color!=="default"&&e[`color${Ve(t.color)}`]]}})($t(({theme:n})=>({color:(n.vars||n).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Fn(n.palette.action.active,n.palette.action.hoverOpacity)}}},...Object.entries(n.palette).filter(Yr()).map(([e])=>({props:{color:e,disableRipple:!1},style:{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Fn(n.palette[e].main,n.palette.action.hoverOpacity)}}})),...Object.entries(n.palette).filter(Yr()).map(([e])=>({props:{color:e},style:{[`&.${sw.checked}, &.${sw.indeterminate}`]:{color:(n.vars||n).palette[e].main},[`&.${sw.disabled}`]:{color:(n.vars||n).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),aJ=H.jsx(nJ,{}),lJ=H.jsx(tJ,{}),cJ=H.jsx(rJ,{}),l0=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiCheckbox"}),{checkedIcon:i=aJ,color:s="primary",icon:o=lJ,indeterminate:a=!1,indeterminateIcon:l=cJ,inputProps:c,size:u="medium",disableRipple:h=!1,className:d,...f}=r,p=a?l:o,y=a?l:i,g={...r,disableRipple:h,color:s,indeterminate:a,size:u},m=sJ(g);return H.jsx(oJ,{type:"checkbox",inputProps:{"data-indeterminate":a,...c},icon:P.cloneElement(p,{fontSize:p.props.fontSize??u}),checkedIcon:P.cloneElement(y,{fontSize:y.props.fontSize??u}),ownerState:g,ref:t,className:it(m.root,d),disableRipple:h,...f,classes:m})});function _D(n){return n.substring(2).toLowerCase()}function uJ(n,e){return e.documentElement.clientWidth<n.clientX||e.documentElement.clientHeight<n.clientY}function hJ(n){const{children:e,disableReactTree:t=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:s="onTouchEnd"}=n,o=P.useRef(!1),a=P.useRef(null),l=P.useRef(!1),c=P.useRef(!1);P.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const u=ur(th(e),a),h=Fa(p=>{const y=c.current;c.current=!1;const g=Fi(a.current);if(!l.current||!a.current||"clientX"in p&&uJ(p,g))return;if(o.current){o.current=!1;return}let m;p.composedPath?m=p.composedPath().includes(a.current):m=!g.documentElement.contains(p.target)||a.current.contains(p.target),!m&&(t||!y)&&i(p)}),d=p=>y=>{c.current=!0;const g=e.props[p];g&&g(y)},f={ref:u};return s!==!1&&(f[s]=d(s)),P.useEffect(()=>{if(s!==!1){const p=_D(s),y=Fi(a.current),g=()=>{o.current=!0};return y.addEventListener(p,h),y.addEventListener("touchmove",g),()=>{y.removeEventListener(p,h),y.removeEventListener("touchmove",g)}}},[h,s]),r!==!1&&(f[r]=d(r)),P.useEffect(()=>{if(r!==!1){const p=_D(r),y=Fi(a.current);return y.addEventListener(p,h),()=>{y.removeEventListener(p,h)}}},[h,r]),H.jsx(P.Fragment,{children:P.cloneElement(e,f)})}const qE=typeof zN({})=="function",dJ=(n,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!n.vars&&{colorScheme:n.palette.mode}}),fJ=n=>({color:(n.vars||n).palette.text.primary,...n.typography.body1,backgroundColor:(n.vars||n).palette.background.default,"@media print":{backgroundColor:(n.vars||n).palette.common.white}}),b$=(n,e=!1)=>{var s,o;const t={};e&&n.colorSchemes&&typeof n.getColorSchemeSelector=="function"&&Object.entries(n.colorSchemes).forEach(([a,l])=>{var u,h;const c=n.getColorSchemeSelector(a);c.startsWith("@")?t[c]={":root":{colorScheme:(u=l.palette)==null?void 0:u.mode}}:t[c.replace(/\s*&/,"")]={colorScheme:(h=l.palette)==null?void 0:h.mode}});let r={html:dJ(n,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:n.typography.fontWeightBold},body:{margin:0,...fJ(n),"&::backdrop":{backgroundColor:(n.vars||n).palette.background.default}},...t};const i=(o=(s=n.components)==null?void 0:s.MuiCssBaseline)==null?void 0:o.styleOverrides;return i&&(r=[r,i]),r},Qv="mui-ecs",pJ=n=>{const e=b$(n,!1),t=Array.isArray(e)?e[0]:e;return!n.vars&&t&&(t.html[`:root:has(${Qv})`]={colorScheme:n.palette.mode}),n.colorSchemes&&Object.entries(n.colorSchemes).forEach(([r,i])=>{var o,a;const s=n.getColorSchemeSelector(r);s.startsWith("@")?t[s]={[`:root:not(:has(.${Qv}))`]:{colorScheme:(o=i.palette)==null?void 0:o.mode}}:t[s.replace(/\s*&/,"")]={[`&:not(:has(.${Qv}))`]:{colorScheme:(a=i.palette)==null?void 0:a.mode}}}),e},mJ=zN(qE?({theme:n,enableColorScheme:e})=>b$(n,e):({theme:n})=>pJ(n));function gJ(n){const e=Ht({props:n,name:"MuiCssBaseline"}),{children:t,enableColorScheme:r=!1}=e;return H.jsxs(P.Fragment,{children:[qE&&H.jsx(mJ,{enableColorScheme:r}),!qE&&!r&&H.jsx("span",{className:Qv,style:{display:"none"}}),t]})}function yJ(n){const e=Fi(n);return e.body===n?So(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function Gm(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function xD(n){return parseInt(So(n).getComputedStyle(n).paddingRight,10)||0}function vJ(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(n.tagName),r=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||r}function SD(n,e,t,r,i){const s=[e,t,...r];[].forEach.call(n.children,o=>{const a=!s.includes(o),l=!vJ(o);a&&l&&Gm(o,i)})}function ow(n,e){let t=-1;return n.some((r,i)=>e(r)?(t=i,!0):!1),t}function _J(n,e){const t=[],r=n.container;if(!e.disableScrollLock){if(yJ(r)){const o=e$(So(r));t.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${xD(r)+o}px`;const a=Fi(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{t.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${xD(l)+o}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=Fi(r).body;else{const o=r.parentElement,a=So(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}t.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{t.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function xJ(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class SJ{constructor(){this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&Gm(e.modalRef,!1);const i=xJ(t);SD(t,e.mount,e.modalRef,i,!0);const s=ow(this.containers,o=>o.container===t);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:i}),r)}mount(e,t){const r=ow(this.containers,s=>s.modals.includes(e)),i=this.containers[r];i.restore||(i.restore=_J(i,t))}remove(e,t=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=ow(this.containers,o=>o.modals.includes(e)),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&Gm(e.modalRef,t),SD(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&Gm(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const bJ=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function wJ(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function TJ(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=r=>n.ownerDocument.querySelector(`input[type="radio"]${r}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function MJ(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||TJ(n))}function EJ(n){const e=[],t=[];return Array.from(n.querySelectorAll(bJ)).forEach((r,i)=>{const s=wJ(r);s===-1||!MJ(r)||(s===0?e.push(r):t.push({documentOrder:i,tabIndex:s,node:r}))}),t.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function CJ(){return!0}function AJ(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=EJ,isEnabled:o=CJ,open:a}=n,l=P.useRef(!1),c=P.useRef(null),u=P.useRef(null),h=P.useRef(null),d=P.useRef(null),f=P.useRef(!1),p=P.useRef(null),y=ur(th(e),p),g=P.useRef(null);P.useEffect(()=>{!a||!p.current||(f.current=!t)},[t,a]),P.useEffect(()=>{if(!a||!p.current)return;const v=Fi(p.current);return p.current.contains(v.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),f.current&&p.current.focus()),()=>{i||(h.current&&h.current.focus&&(l.current=!0,h.current.focus()),h.current=null)}},[a]),P.useEffect(()=>{if(!a||!p.current)return;const v=Fi(p.current),x=w=>{g.current=w,!(r||!o()||w.key!=="Tab")&&v.activeElement===p.current&&w.shiftKey&&(l.current=!0,u.current&&u.current.focus())},b=()=>{var A,S;const w=p.current;if(w===null)return;if(!v.hasFocus()||!o()||l.current){l.current=!1;return}if(w.contains(v.activeElement)||r&&v.activeElement!==c.current&&v.activeElement!==u.current)return;if(v.activeElement!==d.current)d.current=null;else if(d.current!==null)return;if(!f.current)return;let M=[];if((v.activeElement===c.current||v.activeElement===u.current)&&(M=s(p.current)),M.length>0){const E=!!((A=g.current)!=null&&A.shiftKey&&((S=g.current)==null?void 0:S.key)==="Tab"),I=M[0],O=M[M.length-1];typeof I!="string"&&typeof O!="string"&&(E?O.focus():I.focus())}else w.focus()};v.addEventListener("focusin",b),v.addEventListener("keydown",x,!0);const T=setInterval(()=>{v.activeElement&&v.activeElement.tagName==="BODY"&&b()},50);return()=>{clearInterval(T),v.removeEventListener("focusin",b),v.removeEventListener("keydown",x,!0)}},[t,r,i,o,a,s]);const m=v=>{h.current===null&&(h.current=v.relatedTarget),f.current=!0,d.current=v.target;const x=e.props.onFocus;x&&x(v)},_=v=>{h.current===null&&(h.current=v.relatedTarget),f.current=!0};return H.jsxs(P.Fragment,{children:[H.jsx("div",{tabIndex:a?0:-1,onFocus:_,ref:c,"data-testid":"sentinelStart"}),P.cloneElement(e,{ref:y,onFocus:m}),H.jsx("div",{tabIndex:a?0:-1,onFocus:_,ref:u,"data-testid":"sentinelEnd"})]})}function RJ(n){return typeof n=="function"?n():n}function NJ(n){return n?n.props.hasOwnProperty("in"):!1}const c0=new SJ;function PJ(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:r=!1,closeAfterTransition:i=!1,onTransitionEnter:s,onTransitionExited:o,children:a,onClose:l,open:c,rootRef:u}=n,h=P.useRef({}),d=P.useRef(null),f=P.useRef(null),p=ur(f,u),[y,g]=P.useState(!c),m=NJ(a);let _=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(_=!1);const v=()=>Fi(d.current),x=()=>(h.current.modalRef=f.current,h.current.mount=d.current,h.current),b=()=>{c0.mount(x(),{disableScrollLock:r}),f.current&&(f.current.scrollTop=0)},T=Fa(()=>{const R=RJ(e)||v().body;c0.add(x(),R),f.current&&b()}),w=()=>c0.isTopModal(x()),M=Fa(R=>{d.current=R,R&&(c&&w()?b():f.current&&Gm(f.current,_))}),A=P.useCallback(()=>{c0.remove(x(),_)},[_]);P.useEffect(()=>()=>{A()},[A]),P.useEffect(()=>{c?T():(!m||!i)&&A()},[c,A,m,i,T]);const S=R=>D=>{var q;(q=R.onKeyDown)==null||q.call(R,D),!(D.key!=="Escape"||D.which===229||!w())&&(t||(D.stopPropagation(),l&&l(D,"escapeKeyDown")))},E=R=>D=>{var q;(q=R.onClick)==null||q.call(R,D),D.target===D.currentTarget&&l&&l(D,"backdropClick")};return{getRootProps:(R={})=>{const D=sx(n);delete D.onTransitionEnter,delete D.onTransitionExited;const q={...D,...R};return{role:"presentation",...q,onKeyDown:S(q),ref:p}},getBackdropProps:(R={})=>{const D=R;return{"aria-hidden":!0,...D,onClick:E(D),open:c}},getTransitionProps:()=>{const R=()=>{g(!1),s&&s()},D=()=>{g(!0),o&&o(),i&&A()};return{onEnter:jL(R,a==null?void 0:a.props.onEnter),onExited:jL(D,a==null?void 0:a.props.onExited)}},rootRef:p,portalRef:M,isTopModal:w,exited:y,hasTransition:m}}function IJ(n){return Bt("MuiModal",n)}Pt("MuiModal",["root","hidden","backdrop"]);const LJ=n=>{const{open:e,exited:t,classes:r}=n;return Vt({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},IJ,r)},DJ=Ye("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})($t(({theme:n})=>({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),FJ=Ye(x$,{name:"MuiModal",slot:"Backdrop",overridesResolver:(n,e)=>e.backdrop})({zIndex:-1}),KN=P.forwardRef(function(e,t){const r=Ht({name:"MuiModal",props:e}),{BackdropComponent:i=FJ,BackdropProps:s,classes:o,className:a,closeAfterTransition:l=!1,children:c,container:u,component:h,components:d={},componentsProps:f={},disableAutoFocus:p=!1,disableEnforceFocus:y=!1,disableEscapeKeyDown:g=!1,disablePortal:m=!1,disableRestoreFocus:_=!1,disableScrollLock:v=!1,hideBackdrop:x=!1,keepMounted:b=!1,onBackdropClick:T,onClose:w,onTransitionEnter:M,onTransitionExited:A,open:S,slotProps:E={},slots:I={},theme:O,...N}=r,R={...r,closeAfterTransition:l,disableAutoFocus:p,disableEnforceFocus:y,disableEscapeKeyDown:g,disablePortal:m,disableRestoreFocus:_,disableScrollLock:v,hideBackdrop:x,keepMounted:b},{getRootProps:D,getBackdropProps:q,getTransitionProps:L,portalRef:j,isTopModal:z,exited:K,hasTransition:U}=PJ({...R,rootRef:t}),te={...R,exited:K},k=LJ(te),V={};if(c.props.tabIndex===void 0&&(V.tabIndex="-1"),U){const{onEnter:we,onExited:G}=L();V.onEnter=we,V.onExited=G}const Q={...N,slots:{root:d.Root,backdrop:d.Backdrop,...I},slotProps:{...f,...E}},[le,pe]=Mi("root",{elementType:DJ,externalForwardedProps:Q,getSlotProps:D,additionalProps:{ref:t,as:h},ownerState:te,className:it(a,k==null?void 0:k.root,!te.open&&te.exited&&(k==null?void 0:k.hidden))}),[ue,be]=Mi("backdrop",{elementType:i,externalForwardedProps:Q,additionalProps:s,getSlotProps:we=>q({...we,onClick:G=>{T&&T(G),we!=null&&we.onClick&&we.onClick(G)}}),className:it(s==null?void 0:s.className,k==null?void 0:k.backdrop),ownerState:te}),Pe=ur(s==null?void 0:s.ref,be.ref);return!b&&!S&&(!U||K)?null:H.jsx(EQ,{ref:j,container:u,disablePortal:m,children:H.jsxs(le,{...pe,children:[!x&&i?H.jsx(ue,{...be,ref:Pe}):null,H.jsx(AJ,{disableEnforceFocus:y,disableAutoFocus:p,disableRestoreFocus:_,isEnabled:z,open:S,children:P.cloneElement(c,V)})]})})});function OJ(n){return Bt("MuiDialog",n)}const aw=Pt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),kJ=P.createContext({}),UJ=Ye(x$,{name:"MuiDialog",slot:"Backdrop",overrides:(n,e)=>e.backdrop})({zIndex:-1}),BJ=n=>{const{classes:e,scroll:t,maxWidth:r,fullWidth:i,fullScreen:s}=n,o={root:["root"],container:["container",`scroll${Ve(t)}`],paper:["paper",`paperScroll${Ve(t)}`,`paperWidth${Ve(String(r))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return Vt(o,OJ,e)},zJ=Ye(KN,{name:"MuiDialog",slot:"Root",overridesResolver:(n,e)=>e.root})({"@media print":{position:"absolute !important"}}),$J=Ye("div",{name:"MuiDialog",slot:"Container",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.container,e[`scroll${Ve(t.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),VJ=Ye(tp,{name:"MuiDialog",slot:"Paper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.paper,e[`scrollPaper${Ve(t.scroll)}`],e[`paperWidth${Ve(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})($t(({theme:n})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:n.breakpoints.unit==="px"?Math.max(n.breakpoints.values.xs,444):`max(${n.breakpoints.values.xs}${n.breakpoints.unit}, 444px)`,[`&.${aw.paperScrollBody}`]:{[n.breakpoints.down(Math.max(n.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(n.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${n.breakpoints.values[e]}${n.breakpoints.unit}`,[`&.${aw.paperScrollBody}`]:{[n.breakpoints.down(n.breakpoints.values[e]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${aw.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),GJ=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiDialog"}),i=Cc(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":a,BackdropComponent:l,BackdropProps:c,children:u,className:h,disableEscapeKeyDown:d=!1,fullScreen:f=!1,fullWidth:p=!1,maxWidth:y="sm",onBackdropClick:g,onClick:m,onClose:_,open:v,PaperComponent:x=tp,PaperProps:b={},scroll:T="paper",TransitionComponent:w=_$,transitionDuration:M=s,TransitionProps:A,...S}=r,E={...r,disableEscapeKeyDown:d,fullScreen:f,fullWidth:p,maxWidth:y,scroll:T},I=BJ(E),O=P.useRef(),N=L=>{O.current=L.target===L.currentTarget},R=L=>{m&&m(L),O.current&&(O.current=null,g&&g(L),_&&_(L,"backdropClick"))},D=LN(a),q=P.useMemo(()=>({titleId:D}),[D]);return H.jsx(zJ,{className:it(I.root,h),closeAfterTransition:!0,components:{Backdrop:UJ},componentsProps:{backdrop:{transitionDuration:M,as:l,...c}},disableEscapeKeyDown:d,onClose:_,open:v,ref:t,onClick:R,ownerState:E,...S,children:H.jsx(w,{appear:!0,in:v,timeout:M,role:"presentation",...A,children:H.jsx($J,{className:it(I.container),onMouseDown:N,ownerState:E,children:H.jsx(VJ,{as:x,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":D,...b,className:it(I.paper,b.className),ownerState:E,children:H.jsx(kJ.Provider,{value:q,children:u})})})})})});function HJ(n){return Bt("MuiDialogContent",n)}Pt("MuiDialogContent",["root","dividers"]);const WJ=Pt("MuiDialogTitle",["root"]),jJ=n=>{const{classes:e,dividers:t}=n;return Vt({root:["root",t&&"dividers"]},HJ,e)},qJ=Ye("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.dividers&&e.dividers]}})($t(({theme:n})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(n.vars||n).palette.divider}`,borderBottom:`1px solid ${(n.vars||n).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${WJ.root} + &`]:{paddingTop:0}}}]}))),XJ=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1,...o}=r,a={...r,dividers:s},l=jJ(a);return H.jsx(qJ,{className:it(l.root,i),ownerState:a,ref:t,...o})});function KJ(n){return Bt("MuiDivider",n)}const bD=Pt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),YJ=n=>{const{absolute:e,children:t,classes:r,flexItem:i,light:s,orientation:o,textAlign:a,variant:l}=n;return Vt({root:["root",e&&"absolute",l,s&&"light",o==="vertical"&&"vertical",i&&"flexItem",t&&"withChildren",t&&o==="vertical"&&"withChildrenVertical",a==="right"&&o!=="vertical"&&"textAlignRight",a==="left"&&o!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",o==="vertical"&&"wrapperVertical"]},KJ,r)},ZJ=Ye("div",{name:"MuiDivider",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.absolute&&e.absolute,e[t.variant],t.light&&e.light,t.orientation==="vertical"&&e.vertical,t.flexItem&&e.flexItem,t.children&&e.withChildren,t.children&&t.orientation==="vertical"&&e.withChildrenVertical,t.textAlign==="right"&&t.orientation!=="vertical"&&e.textAlignRight,t.textAlign==="left"&&t.orientation!=="vertical"&&e.textAlignLeft]}})($t(({theme:n})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(n.vars||n).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:n.vars?`rgba(${n.vars.palette.dividerChannel} / 0.08)`:Fn(n.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:n.spacing(2),marginRight:n.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:n.spacing(1),marginBottom:n.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(n.vars||n).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(n.vars||n).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),QJ=Ye("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.wrapper,t.orientation==="vertical"&&e.wrapperVertical]}})($t(({theme:n})=>({display:"inline-block",paddingLeft:`calc(${n.spacing(1)} * 1.2)`,paddingRight:`calc(${n.spacing(1)} * 1.2)`,variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${n.spacing(1)} * 1.2)`,paddingBottom:`calc(${n.spacing(1)} * 1.2)`}}]}))),XE=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiDivider"}),{absolute:i=!1,children:s,className:o,orientation:a="horizontal",component:l=s||a==="vertical"?"div":"hr",flexItem:c=!1,light:u=!1,role:h=l!=="hr"?"separator":void 0,textAlign:d="center",variant:f="fullWidth",...p}=r,y={...r,absolute:i,component:l,flexItem:c,light:u,orientation:a,role:h,textAlign:d,variant:f},g=YJ(y);return H.jsx(ZJ,{as:l,className:it(g.root,o),role:h,ref:t,ownerState:y,"aria-orientation":h==="separator"&&(l!=="hr"||a==="vertical")?a:void 0,...p,children:s?H.jsx(QJ,{className:g.wrapper,ownerState:y,children:s}):null})});XE&&(XE.muiSkipListHighlight=!0);function JJ(n,e,t){const r=e.getBoundingClientRect(),i=t&&t.getBoundingClientRect(),s=So(e);let o;if(e.fakeTransform)o=e.fakeTransform;else{const c=s.getComputedStyle(e);o=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("transform")}let a=0,l=0;if(o&&o!=="none"&&typeof o=="string"){const c=o.split("(")[1].split(")")[0].split(",");a=parseInt(c[4],10),l=parseInt(c[5],10)}return n==="left"?i?`translateX(${i.right+a-r.left}px)`:`translateX(${s.innerWidth+a-r.left}px)`:n==="right"?i?`translateX(-${r.right-i.left-a}px)`:`translateX(-${r.left+r.width-a}px)`:n==="up"?i?`translateY(${i.bottom+l-r.top}px)`:`translateY(${s.innerHeight+l-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}function eee(n){return typeof n=="function"?n():n}function u0(n,e,t){const r=eee(t),i=JJ(n,e,r);i&&(e.style.webkitTransform=i,e.style.transform=i)}const tee=P.forwardRef(function(e,t){const r=Cc(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:l,container:c,direction:u="down",easing:h=i,in:d,onEnter:f,onEntered:p,onEntering:y,onExit:g,onExited:m,onExiting:_,style:v,timeout:x=s,TransitionComponent:b=Eo,...T}=e,w=P.useRef(null),M=ur(th(l),w,t),A=L=>j=>{L&&(j===void 0?L(w.current):L(w.current,j))},S=A((L,j)=>{u0(u,L,c),jN(L),f&&f(L,j)}),E=A((L,j)=>{const z=wf({timeout:x,style:v,easing:h},{mode:"enter"});L.style.webkitTransition=r.transitions.create("-webkit-transform",{...z}),L.style.transition=r.transitions.create("transform",{...z}),L.style.webkitTransform="none",L.style.transform="none",y&&y(L,j)}),I=A(p),O=A(_),N=A(L=>{const j=wf({timeout:x,style:v,easing:h},{mode:"exit"});L.style.webkitTransition=r.transitions.create("-webkit-transform",j),L.style.transition=r.transitions.create("transform",j),u0(u,L,c),g&&g(L)}),R=A(L=>{L.style.webkitTransition="",L.style.transition="",m&&m(L)}),D=L=>{o&&o(w.current,L)},q=P.useCallback(()=>{w.current&&u0(u,w.current,c)},[u,c]);return P.useEffect(()=>{if(d||u==="down"||u==="right")return;const L=IN(()=>{w.current&&u0(u,w.current,c)}),j=So(w.current);return j.addEventListener("resize",L),()=>{L.clear(),j.removeEventListener("resize",L)}},[u,d,c]),P.useEffect(()=>{d||q()},[d,q]),H.jsx(b,{nodeRef:w,onEnter:S,onEntered:I,onEntering:E,onExit:N,onExited:R,onExiting:O,addEndListener:D,appear:a,in:d,timeout:x,...T,children:(L,j)=>P.cloneElement(l,{ref:M,style:{visibility:L==="exited"&&!d?"hidden":void 0,...v,...l.props.style},...j})})});function nee(n){return Bt("MuiDrawer",n)}Pt("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const w$=(n,e)=>{const{ownerState:t}=n;return[e.root,(t.variant==="permanent"||t.variant==="persistent")&&e.docked,e.modal]},ree=n=>{const{classes:e,anchor:t,variant:r}=n,i={root:["root"],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Ve(t)}`,r!=="temporary"&&`paperAnchorDocked${Ve(t)}`]};return Vt(i,nee,e)},iee=Ye(KN,{name:"MuiDrawer",slot:"Root",overridesResolver:w$})($t(({theme:n})=>({zIndex:(n.vars||n).zIndex.drawer}))),wD=Ye("div",{shouldForwardProp:$i,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:w$})({flex:"0 0 auto"}),see=Ye(tp,{name:"MuiDrawer",slot:"Paper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.paper,e[`paperAnchor${Ve(t.anchor)}`],t.variant!=="temporary"&&e[`paperAnchorDocked${Ve(t.anchor)}`]]}})($t(({theme:n})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(n.vars||n).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:e})=>e.anchor==="left"&&e.variant!=="temporary",style:{borderRight:`1px solid ${(n.vars||n).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="top"&&e.variant!=="temporary",style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="right"&&e.variant!=="temporary",style:{borderLeft:`1px solid ${(n.vars||n).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="bottom"&&e.variant!=="temporary",style:{borderTop:`1px solid ${(n.vars||n).palette.divider}`}}]}))),T$={left:"right",right:"left",top:"down",bottom:"up"};function oee(n){return["left","right"].includes(n)}function aee({direction:n},e){return n==="rtl"&&oee(e)?T$[e]:e}const lee=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiDrawer"}),i=Cc(),s=o$(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:l,children:c,className:u,elevation:h=16,hideBackdrop:d=!1,ModalProps:{BackdropProps:f,...p}={},onClose:y,open:g=!1,PaperProps:m={},SlideProps:_,TransitionComponent:v=tee,transitionDuration:x=o,variant:b="temporary",...T}=r,w=P.useRef(!1);P.useEffect(()=>{w.current=!0},[]);const M=aee({direction:s?"rtl":"ltr"},a),S={...r,anchor:a,elevation:h,open:g,variant:b,...T},E=ree(S),I=H.jsx(see,{elevation:b==="temporary"?h:0,square:!0,...m,className:it(E.paper,m.className),ownerState:S,children:c});if(b==="permanent")return H.jsx(wD,{className:it(E.root,E.docked,u),ownerState:S,ref:t,...T,children:I});const O=H.jsx(v,{in:g,direction:T$[M],timeout:x,appear:w.current,..._,children:I});return b==="persistent"?H.jsx(wD,{className:it(E.root,E.docked,u),ownerState:S,ref:t,...T,children:O}):H.jsx(iee,{BackdropProps:{...l,...f,transitionDuration:x},className:it(E.root,E.modal,u),open:g,ownerState:S,onClose:y,hideBackdrop:d,ref:t,...T,...p,children:O})}),cee=n=>{const{classes:e,disableUnderline:t,startAdornment:r,endAdornment:i,size:s,hiddenLabel:o,multiline:a}=n,l={root:["root",!t&&"underline",r&&"adornedStart",i&&"adornedEnd",s==="small"&&`size${Ve(s)}`,o&&"hiddenLabel",a&&"multiline"],input:["input"]},c=Vt(l,$Q,e);return{...e,...c}},uee=Ye(lb,{shouldForwardProp:n=>$i(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...ob(n,e),!t.disableUnderline&&e.underline]}})($t(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r}},[`&.${Uc.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r},[`&.${Uc.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:s},variants:[{props:({ownerState:o})=>!o.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Uc.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Uc.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Uc.disabled}, .${Uc.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${Uc.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Yr()).map(([o])=>{var a;return{props:{disableUnderline:!1,color:o},style:{"&::after":{borderBottom:`2px solid ${(a=(n.vars||n).palette[o])==null?void 0:a.main}`}}}}),{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:12}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:12}},{props:({ownerState:o})=>o.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:o,size:a})=>o.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel&&o.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),hee=Ye(cb,{name:"MuiFilledInput",slot:"Input",overridesResolver:ab})($t(({theme:n})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),ux=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:s={},componentsProps:o,fullWidth:a=!1,hiddenLabel:l,inputComponent:c="input",multiline:u=!1,slotProps:h,slots:d={},type:f="text",...p}=r,y={...r,disableUnderline:i,fullWidth:a,inputComponent:c,multiline:u,type:f},g=cee(r),m={root:{ownerState:y},input:{ownerState:y}},_=h??o?Qr(m,h??o):m,v=d.root??s.Root??uee,x=d.input??s.Input??hee;return H.jsx(XN,{slots:{root:v,input:x},componentsProps:_,fullWidth:a,inputComponent:c,multiline:u,ref:t,type:f,...p,classes:g})});ux&&(ux.muiName="Input");function dee(n){return Bt("MuiFormControl",n)}Pt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const fee=n=>{const{classes:e,margin:t,fullWidth:r}=n,i={root:["root",t!=="none"&&`margin${Ve(t)}`,r&&"fullWidth"]};return Vt(i,dee,e)},pee=Ye("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:n},e)=>({...e.root,...e[`margin${Ve(n.margin)}`],...n.fullWidth&&e.fullWidth})})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),mee=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiFormControl"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:h=!1,hiddenLabel:d=!1,margin:f="none",required:p=!1,size:y="medium",variant:g="outlined",...m}=r,_={...r,color:o,component:a,disabled:l,error:c,fullWidth:h,hiddenLabel:d,margin:f,required:p,size:y,variant:g},v=fee(_),[x,b]=P.useState(()=>{let O=!1;return i&&P.Children.forEach(i,N=>{if(!tw(N,["Input","Select"]))return;const R=tw(N,["Select"])?N.props.input:N;R&&OQ(R.props)&&(O=!0)}),O}),[T,w]=P.useState(()=>{let O=!1;return i&&P.Children.forEach(i,N=>{tw(N,["Input","Select"])&&(cx(N.props,!0)||cx(N.props.inputProps,!0))&&(O=!0)}),O}),[M,A]=P.useState(!1);l&&M&&A(!1);const S=u!==void 0&&!l?u:M;let E;P.useRef(!1);const I=P.useMemo(()=>({adornedStart:x,setAdornedStart:b,color:o,disabled:l,error:c,filled:T,focused:S,fullWidth:h,hiddenLabel:d,size:y,onBlur:()=>{A(!1)},onEmpty:()=>{w(!1)},onFilled:()=>{w(!0)},onFocus:()=>{A(!0)},registerEffect:E,required:p,variant:g}),[x,o,l,c,T,S,h,d,E,p,y,g]);return H.jsx(qN.Provider,{value:I,children:H.jsx(pee,{as:a,ownerState:_,className:it(v.root,s),ref:t,...m,children:i})})});function gee(n){return Bt("MuiFormControlLabel",n)}const bm=Pt("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),yee=n=>{const{classes:e,disabled:t,labelPlacement:r,error:i,required:s}=n,o={root:["root",t&&"disabled",`labelPlacement${Ve(r)}`,i&&"error",s&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",i&&"error"]};return Vt(o,gee,e)},vee=Ye("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${bm.label}`]:e.label},e.root,e[`labelPlacement${Ve(t.labelPlacement)}`]]}})($t(({theme:n})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${bm.disabled}`]:{cursor:"default"},[`& .${bm.label}`]:{[`&.${bm.disabled}`]:{color:(n.vars||n).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),_ee=Ye("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})($t(({theme:n})=>({[`&.${bm.error}`]:{color:(n.vars||n).palette.error.main}}))),h0=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiFormControlLabel"}),{checked:i,className:s,componentsProps:o={},control:a,disabled:l,disableTypography:c,inputRef:u,label:h,labelPlacement:d="end",name:f,onChange:p,required:y,slots:g={},slotProps:m={},value:_,...v}=r,x=Ac(),b=l??a.props.disabled??(x==null?void 0:x.disabled),T=y??a.props.required,w={disabled:b,required:T};["checked","name","onChange","value","inputRef"].forEach(R=>{typeof a.props[R]>"u"&&typeof r[R]<"u"&&(w[R]=r[R])});const M=nh({props:r,muiFormControl:x,states:["error"]}),A={...r,disabled:b,labelPlacement:d,required:T,error:M.error},S=yee(A),E={slots:g,slotProps:{...o,...m}},[I,O]=Mi("typography",{elementType:Oa,externalForwardedProps:E,ownerState:A});let N=h;return N!=null&&N.type!==Oa&&!c&&(N=H.jsx(I,{component:"span",...O,className:it(S.label,O==null?void 0:O.className),children:N})),H.jsxs(vee,{className:it(S.root,s),ownerState:A,ref:t,...v,children:[P.cloneElement(a,w),T?H.jsxs("div",{children:[N,H.jsxs(_ee,{ownerState:A,"aria-hidden":!0,className:S.asterisk,children:[" ","*"]})]}):N]})});function xee(n){return Bt("MuiFormHelperText",n)}const TD=Pt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var MD;const See=n=>{const{classes:e,contained:t,size:r,disabled:i,error:s,filled:o,focused:a,required:l}=n,c={root:["root",i&&"disabled",s&&"error",r&&`size${Ve(r)}`,t&&"contained",a&&"focused",o&&"filled",l&&"required"]};return Vt(c,xee,e)},bee=Ye("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${Ve(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})($t(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${TD.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${TD.error}`]:{color:(n.vars||n).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),wee=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:o="p",disabled:a,error:l,filled:c,focused:u,margin:h,required:d,variant:f,...p}=r,y=Ac(),g=nh({props:r,muiFormControl:y,states:["variant","size","disabled","error","filled","focused","required"]}),m={...r,component:o,contained:g.variant==="filled"||g.variant==="outlined",variant:g.variant,size:g.size,disabled:g.disabled,error:g.error,filled:g.filled,focused:g.focused,required:g.required};delete m.ownerState;const _=See(m);return H.jsx(bee,{as:o,className:it(_.root,s),ref:t,...p,ownerState:m,children:i===" "?MD||(MD=H.jsx("span",{className:"notranslate",children:"​"})):i})});function Tee(n){return Bt("MuiFormLabel",n)}const Hm=Pt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Mee=n=>{const{classes:e,color:t,focused:r,disabled:i,error:s,filled:o,required:a}=n,l={root:["root",`color${Ve(t)}`,i&&"disabled",s&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return Vt(l,Tee,e)},Eee=Ye("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:n},e)=>({...e.root,...n.color==="secondary"&&e.colorSecondary,...n.filled&&e.filled})})($t(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(n.palette).filter(Yr()).map(([e])=>({props:{color:e},style:{[`&.${Hm.focused}`]:{color:(n.vars||n).palette[e].main}}})),{props:{},style:{[`&.${Hm.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${Hm.error}`]:{color:(n.vars||n).palette.error.main}}}]}))),Cee=Ye("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})($t(({theme:n})=>({[`&.${Hm.error}`]:{color:(n.vars||n).palette.error.main}}))),Aee=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiFormLabel"}),{children:i,className:s,color:o,component:a="label",disabled:l,error:c,filled:u,focused:h,required:d,...f}=r,p=Ac(),y=nh({props:r,muiFormControl:p,states:["color","required","focused","disabled","error","filled"]}),g={...r,color:y.color||"primary",component:a,disabled:y.disabled,error:y.error,filled:y.filled,focused:y.focused,required:y.required},m=Mee(g);return H.jsxs(Eee,{as:a,ownerState:g,className:it(m.root,s),ref:t,...f,children:[i,y.required&&H.jsxs(Cee,{ownerState:g,"aria-hidden":!0,className:m.asterisk,children:[" ","*"]})]})});function KE(n){return`scale(${n}, ${n**2})`}const Ree={entering:{opacity:1,transform:KE(1)},entered:{opacity:1,transform:"none"}},lw=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),hx=P.forwardRef(function(e,t){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:h,onExited:d,onExiting:f,style:p,timeout:y="auto",TransitionComponent:g=Eo,...m}=e,_=FN(),v=P.useRef(),x=Cc(),b=P.useRef(null),T=ur(b,th(s),t),w=R=>D=>{if(R){const q=b.current;D===void 0?R(q):R(q,D)}},M=w(u),A=w((R,D)=>{jN(R);const{duration:q,delay:L,easing:j}=wf({style:p,timeout:y,easing:o},{mode:"enter"});let z;y==="auto"?(z=x.transitions.getAutoHeightDuration(R.clientHeight),v.current=z):z=q,R.style.transition=[x.transitions.create("opacity",{duration:z,delay:L}),x.transitions.create("transform",{duration:lw?z:z*.666,delay:L,easing:j})].join(","),l&&l(R,D)}),S=w(c),E=w(f),I=w(R=>{const{duration:D,delay:q,easing:L}=wf({style:p,timeout:y,easing:o},{mode:"exit"});let j;y==="auto"?(j=x.transitions.getAutoHeightDuration(R.clientHeight),v.current=j):j=D,R.style.transition=[x.transitions.create("opacity",{duration:j,delay:q}),x.transitions.create("transform",{duration:lw?j:j*.666,delay:lw?q:q||j*.333,easing:L})].join(","),R.style.opacity=0,R.style.transform=KE(.75),h&&h(R)}),O=w(d),N=R=>{y==="auto"&&_.start(v.current||0,R),r&&r(b.current,R)};return H.jsx(g,{appear:i,in:a,nodeRef:b,onEnter:A,onEntered:S,onEntering:M,onExit:I,onExited:O,onExiting:E,addEndListener:N,timeout:y==="auto"?null:y,...m,children:(R,D)=>P.cloneElement(s,{style:{opacity:0,transform:KE(.75),visibility:R==="exited"&&!a?"hidden":void 0,...Ree[R],...p,...s.props.style},ref:T,...D})})});hx&&(hx.muiSupportAuto=!0);const Nee=n=>{const{classes:e,disableUnderline:t}=n,i=Vt({root:["root",!t&&"underline"],input:["input"]},BQ,e);return{...e,...i}},Pee=Ye(lb,{shouldForwardProp:n=>$i(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...ob(n,e),!t.disableUnderline&&e.underline]}})($t(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Ap.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Ap.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Ap.disabled}, .${Ap.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${Ap.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Yr()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[r].main}`}}}))]}})),Iee=Ye(cb,{name:"MuiInput",slot:"Input",overridesResolver:ab})({}),dx=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiInput"}),{disableUnderline:i=!1,components:s={},componentsProps:o,fullWidth:a=!1,inputComponent:l="input",multiline:c=!1,slotProps:u,slots:h={},type:d="text",...f}=r,p=Nee(r),g={root:{ownerState:{disableUnderline:i}}},m=u??o?Qr(u??o,g):g,_=h.root??s.Root??Pee,v=h.input??s.Input??Iee;return H.jsx(XN,{slots:{root:_,input:v},slotProps:m,fullWidth:a,inputComponent:l,multiline:c,ref:t,type:d,...f,classes:p})});dx&&(dx.muiName="Input");function Lee(n){return Bt("MuiInputLabel",n)}Pt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Dee=n=>{const{classes:e,formControl:t,size:r,shrink:i,disableAnimation:s,variant:o,required:a}=n,l={root:["root",t&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="normal"&&`size${Ve(r)}`,o],asterisk:[a&&"asterisk"]},c=Vt(l,Lee,e);return{...e,...c}},Fee=Ye(Aee,{shouldForwardProp:n=>$i(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${Hm.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})($t(({theme:n})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="filled"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:t,size:r})=>e==="filled"&&t.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="outlined"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),Oee=P.forwardRef(function(e,t){const r=Ht({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,margin:s,shrink:o,variant:a,className:l,...c}=r,u=Ac();let h=o;typeof h>"u"&&u&&(h=u.filled||u.focused||u.adornedStart);const d=nh({props:r,muiFormControl:u,states:["size","variant","required","focused"]}),f={...r,disableAnimation:i,formControl:u,shrink:h,size:d.size,variant:d.variant,required:d.required,focused:d.focused},p=Dee(f);return H.jsx(Fee,{"data-shrink":h,ref:t,className:it(p.root,l),...c,ownerState:f,classes:p})}),YE=P.createContext({});function kee(n){return Bt("MuiList",n)}Pt("MuiList",["root","padding","dense","subheader"]);const Uee=n=>{const{classes:e,disablePadding:t,dense:r,subheader:i}=n;return Vt({root:["root",!t&&"padding",r&&"dense",i&&"subheader"]},kee,e)},Bee=Ye("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:n})=>!n.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:n})=>n.subheader,style:{paddingTop:0}}]}),zee=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiList"}),{children:i,className:s,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:c,...u}=r,h=P.useMemo(()=>({dense:a}),[a]),d={...r,component:o,dense:a,disablePadding:l},f=Uee(d);return H.jsx(YE.Provider,{value:h,children:H.jsxs(Bee,{as:o,className:it(f.root,s),ref:t,ownerState:d,...u,children:[c,i]})})}),ED=Pt("MuiListItemIcon",["root","alignItemsFlexStart"]),CD=Pt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function cw(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function AD(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function M$(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.startsWith(e.keys.join(""))}function Rp(n,e,t,r,i,s){let o=!1,a=i(n,e,e?t:!1);for(;a;){if(a===n.firstChild){if(o)return!1;o=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!M$(a,s)||l)a=i(n,a,t);else return a.focus(),!0}return!1}const $ee=P.forwardRef(function(e,t){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:h="selectedMenu",...d}=e,f=P.useRef(null),p=P.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});rl(()=>{i&&f.current.focus()},[i]),P.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(v,{direction:x})=>{const b=!f.current.style.width;if(v.clientHeight<f.current.clientHeight&&b){const T=`${e$(So(v))}px`;f.current.style[x==="rtl"?"paddingLeft":"paddingRight"]=T,f.current.style.width=`calc(100% + ${T})`}return f.current}}),[]);const y=v=>{const x=f.current,b=v.key;if(v.ctrlKey||v.metaKey||v.altKey){u&&u(v);return}const w=Fi(x).activeElement;if(b==="ArrowDown")v.preventDefault(),Rp(x,w,c,l,cw);else if(b==="ArrowUp")v.preventDefault(),Rp(x,w,c,l,AD);else if(b==="Home")v.preventDefault(),Rp(x,null,c,l,cw);else if(b==="End")v.preventDefault(),Rp(x,null,c,l,AD);else if(b.length===1){const M=p.current,A=b.toLowerCase(),S=performance.now();M.keys.length>0&&(S-M.lastTime>500?(M.keys=[],M.repeating=!0,M.previousKeyMatched=!0):M.repeating&&A!==M.keys[0]&&(M.repeating=!1)),M.lastTime=S,M.keys.push(A);const E=w&&!M.repeating&&M$(w,M);M.previousKeyMatched&&(E||Rp(x,w,!1,l,cw,M))?v.preventDefault():M.previousKeyMatched=!1}u&&u(v)},g=ur(f,t);let m=-1;P.Children.forEach(o,(v,x)=>{if(!P.isValidElement(v)){m===x&&(m+=1,m>=o.length&&(m=-1));return}v.props.disabled||(h==="selectedMenu"&&v.props.selected||m===-1)&&(m=x),m===x&&(v.props.disabled||v.props.muiSkipListHighlight||v.type.muiSkipListHighlight)&&(m+=1,m>=o.length&&(m=-1))});const _=P.Children.map(o,(v,x)=>{if(x===m){const b={};return s&&(b.autoFocus=!0),v.props.tabIndex===void 0&&h==="selectedMenu"&&(b.tabIndex=0),P.cloneElement(v,b)}return v});return H.jsx(zee,{role:"menu",ref:g,className:a,onKeyDown:y,tabIndex:i?0:-1,...d,children:_})});function Vee(n){return Bt("MuiPopover",n)}Pt("MuiPopover",["root","paper"]);function RD(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function ND(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function PD(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function uw(n){return typeof n=="function"?n():n}const Gee=n=>{const{classes:e}=n;return Vt({root:["root"],paper:["paper"]},Vee,e)},Hee=Ye(KN,{name:"MuiPopover",slot:"Root",overridesResolver:(n,e)=>e.root})({}),E$=Ye(tp,{name:"MuiPopover",slot:"Paper",overridesResolver:(n,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Wee=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiPopover"}),{action:i,anchorEl:s,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:l="anchorEl",children:c,className:u,container:h,elevation:d=8,marginThreshold:f=16,open:p,PaperProps:y={},slots:g={},slotProps:m={},transformOrigin:_={vertical:"top",horizontal:"left"},TransitionComponent:v=hx,transitionDuration:x="auto",TransitionProps:{onEntering:b,...T}={},disableScrollLock:w=!1,...M}=r,A=(m==null?void 0:m.paper)??y,S=P.useRef(),E={...r,anchorOrigin:o,anchorReference:l,elevation:d,marginThreshold:f,externalPaperSlotProps:A,transformOrigin:_,TransitionComponent:v,transitionDuration:x,TransitionProps:T},I=Gee(E),O=P.useCallback(()=>{if(l==="anchorPosition")return a;const be=uw(s),we=(be&&be.nodeType===1?be:Fi(S.current).body).getBoundingClientRect();return{top:we.top+RD(we,o.vertical),left:we.left+ND(we,o.horizontal)}},[s,o.horizontal,o.vertical,a,l]),N=P.useCallback(be=>({vertical:RD(be,_.vertical),horizontal:ND(be,_.horizontal)}),[_.horizontal,_.vertical]),R=P.useCallback(be=>{const Pe={width:be.offsetWidth,height:be.offsetHeight},we=N(Pe);if(l==="none")return{top:null,left:null,transformOrigin:PD(we)};const G=O();let He=G.top-we.vertical,$e=G.left-we.horizontal;const Ze=He+Pe.height,De=$e+Pe.width,ot=So(uw(s)),Je=ot.innerHeight-f,B=ot.innerWidth-f;if(f!==null&&He<f){const C=He-f;He-=C,we.vertical+=C}else if(f!==null&&Ze>Je){const C=Ze-Je;He-=C,we.vertical+=C}if(f!==null&&$e<f){const C=$e-f;$e-=C,we.horizontal+=C}else if(De>B){const C=De-B;$e-=C,we.horizontal+=C}return{top:`${Math.round(He)}px`,left:`${Math.round($e)}px`,transformOrigin:PD(we)}},[s,l,O,N,f]),[D,q]=P.useState(p),L=P.useCallback(()=>{const be=S.current;if(!be)return;const Pe=R(be);Pe.top!==null&&be.style.setProperty("top",Pe.top),Pe.left!==null&&(be.style.left=Pe.left),be.style.transformOrigin=Pe.transformOrigin,q(!0)},[R]);P.useEffect(()=>(w&&window.addEventListener("scroll",L),()=>window.removeEventListener("scroll",L)),[s,w,L]);const j=(be,Pe)=>{b&&b(be,Pe),L()},z=()=>{q(!1)};P.useEffect(()=>{p&&L()}),P.useImperativeHandle(i,()=>p?{updatePosition:()=>{L()}}:null,[p,L]),P.useEffect(()=>{if(!p)return;const be=IN(()=>{L()}),Pe=So(s);return Pe.addEventListener("resize",be),()=>{be.clear(),Pe.removeEventListener("resize",be)}},[s,p,L]);let K=x;x==="auto"&&!v.muiSupportAuto&&(K=void 0);const U=h||(s?Fi(uw(s)).body:void 0),te={slots:g,slotProps:{...m,paper:A}},[k,V]=Mi("paper",{elementType:E$,externalForwardedProps:te,additionalProps:{elevation:d,className:it(I.paper,A==null?void 0:A.className),style:D?A.style:{...A.style,opacity:0}},ownerState:E}),[Q,{slotProps:le,...pe}]=Mi("root",{elementType:Hee,externalForwardedProps:te,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:U,open:p},ownerState:E,className:it(I.root,u)}),ue=ur(S,V.ref);return H.jsx(Q,{...pe,...!jE(Q)&&{slotProps:le,disableScrollLock:w},...M,ref:t,children:H.jsx(v,{appear:!0,in:p,onEntering:j,onExited:z,timeout:K,...T,children:H.jsx(k,{...V,ref:ue,children:c})})})});function jee(n){return Bt("MuiMenu",n)}Pt("MuiMenu",["root","paper","list"]);const qee={vertical:"top",horizontal:"right"},Xee={vertical:"top",horizontal:"left"},Kee=n=>{const{classes:e}=n;return Vt({root:["root"],paper:["paper"],list:["list"]},jee,e)},Yee=Ye(Wee,{shouldForwardProp:n=>$i(n)||n==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(n,e)=>e.root})({}),Zee=Ye(E$,{name:"MuiMenu",slot:"Paper",overridesResolver:(n,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Qee=Ye($ee,{name:"MuiMenu",slot:"List",overridesResolver:(n,e)=>e.list})({outline:0}),Jee=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:s,className:o,disableAutoFocusItem:a=!1,MenuListProps:l={},onClose:c,open:u,PaperProps:h={},PopoverClasses:d,transitionDuration:f="auto",TransitionProps:{onEntering:p,...y}={},variant:g="selectedMenu",slots:m={},slotProps:_={},...v}=r,x=o$(),b={...r,autoFocus:i,disableAutoFocusItem:a,MenuListProps:l,onEntering:p,PaperProps:h,transitionDuration:f,TransitionProps:y,variant:g},T=Kee(b),w=i&&!a&&u,M=P.useRef(null),A=(D,q)=>{M.current&&M.current.adjustStyleForScrollbar(D,{direction:x?"rtl":"ltr"}),p&&p(D,q)},S=D=>{D.key==="Tab"&&(D.preventDefault(),c&&c(D,"tabKeyDown"))};let E=-1;P.Children.map(s,(D,q)=>{P.isValidElement(D)&&(D.props.disabled||(g==="selectedMenu"&&D.props.selected||E===-1)&&(E=q))});const I=m.paper??Zee,O=_.paper??h,N=$E({elementType:m.root,externalSlotProps:_.root,ownerState:b,className:[T.root,o]}),R=$E({elementType:I,externalSlotProps:O,ownerState:b,className:T.paper});return H.jsx(Yee,{onClose:c,anchorOrigin:{vertical:"bottom",horizontal:x?"right":"left"},transformOrigin:x?qee:Xee,slots:{paper:I,root:m.root},slotProps:{root:N,paper:R},open:u,ref:t,transitionDuration:f,TransitionProps:{onEntering:A,...y},ownerState:b,...v,classes:d,children:H.jsx(Qee,{onKeyDown:S,actions:M,autoFocus:i&&(E===-1||a),autoFocusItem:w,variant:g,...l,className:it(T.list,l.className),children:s})})});function ete(n){return Bt("MuiMenuItem",n)}const Np=Pt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),tte=(n,e)=>{const{ownerState:t}=n;return[e.root,t.dense&&e.dense,t.divider&&e.divider,!t.disableGutters&&e.gutters]},nte=n=>{const{disabled:e,dense:t,divider:r,disableGutters:i,selected:s,classes:o}=n,l=Vt({root:["root",t&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},ete,o);return{...o,...l}},rte=Ye(Ig,{shouldForwardProp:n=>$i(n)||n==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:tte})($t(({theme:n})=>({...n.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Np.selected}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:Fn(n.palette.primary.main,n.palette.action.selectedOpacity),[`&.${Np.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:Fn(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}},[`&.${Np.selected}:hover`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:Fn(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:Fn(n.palette.primary.main,n.palette.action.selectedOpacity)}},[`&.${Np.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`&.${Np.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity},[`& + .${bD.root}`]:{marginTop:n.spacing(1),marginBottom:n.spacing(1)},[`& + .${bD.inset}`]:{marginLeft:52},[`& .${CD.root}`]:{marginTop:0,marginBottom:0},[`& .${CD.inset}`]:{paddingLeft:36},[`& .${ED.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[n.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...n.typography.body2,[`& .${ED.root} svg`]:{fontSize:"1.25rem"}}}]}))),ite=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:o=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:h,className:d,...f}=r,p=P.useContext(YE),y=P.useMemo(()=>({dense:o||p.dense||!1,disableGutters:l}),[p.dense,o,l]),g=P.useRef(null);rl(()=>{i&&g.current&&g.current.focus()},[i]);const m={...r,dense:y.dense,divider:a,disableGutters:l},_=nte(r),v=ur(g,t);let x;return r.disabled||(x=h!==void 0?h:-1),H.jsx(YE.Provider,{value:y,children:H.jsx(rte,{ref:v,role:u,tabIndex:x,component:s,focusVisibleClassName:it(_.focusVisible,c),className:it(_.root,d),...f,ownerState:m,classes:_})})});function ste(n){return Bt("MuiNativeSelect",n)}const YN=Pt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),ote=n=>{const{classes:e,variant:t,disabled:r,multiple:i,open:s,error:o}=n,a={select:["select",t,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${Ve(t)}`,s&&"iconOpen",r&&"disabled"]};return Vt(a,ste,e)},C$=Ye("select")(({theme:n})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${YN.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}}}]})),ate=Ye(C$,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:$i,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${YN.multiple}`]:e.multiple}]}})({}),A$=Ye("svg")(({theme:n})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${YN.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),lte=Ye(A$,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${Ve(t.variant)}`],t.open&&e.iconOpen]}})({}),cte=P.forwardRef(function(e,t){const{className:r,disabled:i,error:s,IconComponent:o,inputRef:a,variant:l="standard",...c}=e,u={...e,disabled:i,variant:l,error:s},h=ote(u);return H.jsxs(P.Fragment,{children:[H.jsx(ate,{ownerState:u,className:it(h.select,r),disabled:i,ref:a||t,...c}),e.multiple?null:H.jsx(lte,{as:o,ownerState:u,className:h.icon})]})});var ID;const ute=Ye("fieldset",{shouldForwardProp:$i})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),hte=Ye("legend",{shouldForwardProp:$i})($t(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]})));function dte(n){const{children:e,classes:t,className:r,label:i,notched:s,...o}=n,a=i!=null&&i!=="",l={...n,notched:s,withLabel:a};return H.jsx(ute,{"aria-hidden":!0,className:r,ownerState:l,...o,children:H.jsx(hte,{ownerState:l,children:a?H.jsx("span",{children:i}):ID||(ID=H.jsx("span",{className:"notranslate",children:"​"}))})})}const fte=n=>{const{classes:e}=n,r=Vt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},zQ,e);return{...e,...r}},pte=Ye(lb,{shouldForwardProp:n=>$i(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:ob})($t(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Ro.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ro.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Ro.focused} .${Ro.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(n.palette).filter(Yr()).map(([t])=>({props:{color:t},style:{[`&.${Ro.focused} .${Ro.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}})),{props:{},style:{[`&.${Ro.error} .${Ro.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${Ro.disabled} .${Ro.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:14}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:14}},{props:({ownerState:t})=>t.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),mte=Ye(dte,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(n,e)=>e.notchedOutline})($t(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),gte=Ye(cb,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:ab})($t(({theme:n})=>({padding:"16.5px 14px",...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),fx=P.forwardRef(function(e,t){var r;const i=Ht({props:e,name:"MuiOutlinedInput"}),{components:s={},fullWidth:o=!1,inputComponent:a="input",label:l,multiline:c=!1,notched:u,slots:h={},type:d="text",...f}=i,p=fte(i),y=Ac(),g=nh({props:i,muiFormControl:y,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),m={...i,color:g.color||"primary",disabled:g.disabled,error:g.error,focused:g.focused,formControl:y,fullWidth:o,hiddenLabel:g.hiddenLabel,multiline:c,size:g.size,type:d},_=h.root??s.Root??pte,v=h.input??s.Input??gte;return H.jsx(XN,{slots:{root:_,input:v},renderSuffix:x=>H.jsx(mte,{ownerState:m,className:p.notchedOutline,label:l!=null&&l!==""&&g.required?r||(r=H.jsxs(P.Fragment,{children:[l," ","*"]})):l,notched:typeof u<"u"?u:!!(x.startAdornment||x.filled||x.focused)}),fullWidth:o,inputComponent:a,multiline:c,ref:t,type:d,...f,classes:{...p,notchedOutline:null}})});fx&&(fx.muiName="Input");function yte(n){return Bt("MuiSelect",n)}const Pp=Pt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var LD;const vte=Ye(C$,{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${Pp.select}`]:e.select},{[`&.${Pp.select}`]:e[t.variant]},{[`&.${Pp.error}`]:e.error},{[`&.${Pp.multiple}`]:e.multiple}]}})({[`&.${Pp.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),_te=Ye(A$,{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${Ve(t.variant)}`],t.open&&e.iconOpen]}})({}),xte=Ye("input",{shouldForwardProp:n=>m$(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(n,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function DD(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function Ste(n){return n==null||typeof n=="string"&&!n.trim()}const bte=n=>{const{classes:e,variant:t,disabled:r,multiple:i,open:s,error:o}=n,a={select:["select",t,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${Ve(t)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Vt(a,yte,e)},wte=P.forwardRef(function(e,t){var ut;const{"aria-describedby":r,"aria-label":i,autoFocus:s,autoWidth:o,children:a,className:l,defaultOpen:c,defaultValue:u,disabled:h,displayEmpty:d,error:f=!1,IconComponent:p,inputRef:y,labelId:g,MenuProps:m={},multiple:_,name:v,onBlur:x,onChange:b,onClose:T,onFocus:w,onOpen:M,open:A,readOnly:S,renderValue:E,SelectDisplayProps:I={},tabIndex:O,type:N,value:R,variant:D="standard",...q}=e,[L,j]=zE({controlled:R,default:u,name:"Select"}),[z,K]=zE({controlled:A,default:c,name:"Select"}),U=P.useRef(null),te=P.useRef(null),[k,V]=P.useState(null),{current:Q}=P.useRef(A!=null),[le,pe]=P.useState(),ue=ur(t,y),be=P.useCallback(Ne=>{te.current=Ne,Ne&&V(Ne)},[]),Pe=k==null?void 0:k.parentNode;P.useImperativeHandle(ue,()=>({focus:()=>{te.current.focus()},node:U.current,value:L}),[L]),P.useEffect(()=>{c&&z&&k&&!Q&&(pe(o?null:Pe.clientWidth),te.current.focus())},[k,o]),P.useEffect(()=>{s&&te.current.focus()},[s]),P.useEffect(()=>{if(!g)return;const Ne=Fi(te.current).getElementById(g);if(Ne){const Y=()=>{getSelection().isCollapsed&&te.current.focus()};return Ne.addEventListener("click",Y),()=>{Ne.removeEventListener("click",Y)}}},[g]);const we=(Ne,Y)=>{Ne?M&&M(Y):T&&T(Y),Q||(pe(o?null:Pe.clientWidth),K(Ne))},G=Ne=>{Ne.button===0&&(Ne.preventDefault(),te.current.focus(),we(!0,Ne))},He=Ne=>{we(!1,Ne)},$e=P.Children.toArray(a),Ze=Ne=>{const Y=$e.find(W=>W.props.value===Ne.target.value);Y!==void 0&&(j(Y.props.value),b&&b(Ne,Y))},De=Ne=>Y=>{let W;if(Y.currentTarget.hasAttribute("tabindex")){if(_){W=Array.isArray(L)?L.slice():[];const ve=L.indexOf(Ne.props.value);ve===-1?W.push(Ne.props.value):W.splice(ve,1)}else W=Ne.props.value;if(Ne.props.onClick&&Ne.props.onClick(Y),L!==W&&(j(W),b)){const ve=Y.nativeEvent||Y,$=new ve.constructor(ve.type,ve);Object.defineProperty($,"target",{writable:!0,value:{value:W,name:v}}),b($,Ne)}_||we(!1,Y)}},ot=Ne=>{S||[" ","ArrowUp","ArrowDown","Enter"].includes(Ne.key)&&(Ne.preventDefault(),we(!0,Ne))},Je=k!==null&&z,B=Ne=>{!Je&&x&&(Object.defineProperty(Ne,"target",{writable:!0,value:{value:L,name:v}}),x(Ne))};delete q["aria-invalid"];let C,ae;const oe=[];let Te=!1;(cx({value:L})||d)&&(E?C=E(L):Te=!0);const Se=$e.map(Ne=>{if(!P.isValidElement(Ne))return null;let Y;if(_){if(!Array.isArray(L))throw new Error(tl(2));Y=L.some(W=>DD(W,Ne.props.value)),Y&&Te&&oe.push(Ne.props.children)}else Y=DD(L,Ne.props.value),Y&&Te&&(ae=Ne.props.children);return P.cloneElement(Ne,{"aria-selected":Y?"true":"false",onClick:De(Ne),onKeyUp:W=>{W.key===" "&&W.preventDefault(),Ne.props.onKeyUp&&Ne.props.onKeyUp(W)},role:"option",selected:Y,value:void 0,"data-value":Ne.props.value})});Te&&(_?oe.length===0?C=null:C=oe.reduce((Ne,Y,W)=>(Ne.push(Y),W<oe.length-1&&Ne.push(", "),Ne),[]):C=ae);let Xe=le;!o&&Q&&k&&(Xe=Pe.clientWidth);let Ie;typeof O<"u"?Ie=O:Ie=h?null:0;const Oe=I.id||(v?`mui-component-select-${v}`:void 0),pt={...e,variant:D,value:L,open:Je,error:f},Le=bte(pt),Fe={...m.PaperProps,...(ut=m.slotProps)==null?void 0:ut.paper},at=LN();return H.jsxs(P.Fragment,{children:[H.jsx(vte,{as:"div",ref:be,tabIndex:Ie,role:"combobox","aria-controls":at,"aria-disabled":h?"true":void 0,"aria-expanded":Je?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[g,Oe].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:ot,onMouseDown:h||S?null:G,onBlur:B,onFocus:w,...I,ownerState:pt,className:it(I.className,Le.select,l),id:Oe,children:Ste(C)?LD||(LD=H.jsx("span",{className:"notranslate",children:"​"})):C}),H.jsx(xte,{"aria-invalid":f,value:Array.isArray(L)?L.join(","):L,name:v,ref:U,"aria-hidden":!0,onChange:Ze,tabIndex:-1,disabled:h,className:Le.nativeInput,autoFocus:s,...q,ownerState:pt}),H.jsx(_te,{as:p,className:Le.icon,ownerState:pt}),H.jsx(Jee,{id:`menu-${v||""}`,anchorEl:Pe,open:Je,onClose:He,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...m,MenuListProps:{"aria-labelledby":g,role:"listbox","aria-multiselectable":_?"true":void 0,disableListWrap:!0,id:at,...m.MenuListProps},slotProps:{...m.slotProps,paper:{...Fe,style:{minWidth:Xe,...Fe!=null?Fe.style:null}}},children:Se})]})}),Tte=n=>{const{classes:e}=n;return e},ZN={name:"MuiSelect",overridesResolver:(n,e)=>e.root,shouldForwardProp:n=>$i(n)&&n!=="variant",slot:"Root"},Mte=Ye(dx,ZN)(""),Ete=Ye(fx,ZN)(""),Cte=Ye(ux,ZN)(""),QN=P.forwardRef(function(e,t){const r=wZ({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=VQ,id:h,input:d,inputProps:f,label:p,labelId:y,MenuProps:g,multiple:m=!1,native:_=!1,onClose:v,onOpen:x,open:b,renderValue:T,SelectDisplayProps:w,variant:M="outlined",...A}=r,S=_?cte:wte,E=Ac(),I=nh({props:r,muiFormControl:E,states:["variant","error"]}),O=I.variant||M,N={...r,variant:O,classes:o},R=Tte(N),{root:D,...q}=R,L=d||{standard:H.jsx(Mte,{ownerState:N}),outlined:H.jsx(Ete,{label:p,ownerState:N}),filled:H.jsx(Cte,{ownerState:N})}[O],j=ur(t,th(L));return H.jsx(P.Fragment,{children:P.cloneElement(L,{inputComponent:S,inputProps:{children:s,error:I.error,IconComponent:u,variant:O,type:void 0,multiple:m,..._?{id:h}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:y,MenuProps:g,onClose:v,onOpen:x,open:b,renderValue:T,SelectDisplayProps:{id:h,...w}},...f,classes:f?Qr(q,f.classes):q,...d?d.props.inputProps:{}},...(m&&_||c)&&O==="outlined"?{notched:!0}:{},ref:j,className:it(L.props.className,a,R.root),...!d&&{variant:O},...A})})});QN.muiName="Select";function Ate(n){return Bt("MuiSkeleton",n)}Pt("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const Rte=n=>{const{classes:e,variant:t,animation:r,hasChildren:i,width:s,height:o}=n;return Vt({root:["root",t,r,i&&"withChildren",i&&!s&&"fitContent",i&&!o&&"heightAuto"]},Ate,e)},ZE=cy`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`,QE=cy`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`,Nte=typeof ZE!="string"?TN`
        animation: ${ZE} 2s ease-in-out 0.5s infinite;
      `:null,Pte=typeof QE!="string"?TN`
        &::after {
          animation: ${QE} 2s linear 0.5s infinite;
        }
      `:null,Ite=Ye("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],t.animation!==!1&&e[t.animation],t.hasChildren&&e.withChildren,t.hasChildren&&!t.width&&e.fitContent,t.hasChildren&&!t.height&&e.heightAuto]}})($t(({theme:n})=>{const e=SZ(n.shape.borderRadius)||"px",t=bZ(n.shape.borderRadius);return{display:"block",backgroundColor:n.vars?n.vars.palette.Skeleton.bg:Fn(n.palette.text.primary,n.palette.mode==="light"?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${t}${e}/${Math.round(t/.6*10)/10}${e}`,"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(n.vars||n).shape.borderRadius}},{props:({ownerState:r})=>r.hasChildren,style:{"& > *":{visibility:"hidden"}}},{props:({ownerState:r})=>r.hasChildren&&!r.width,style:{maxWidth:"fit-content"}},{props:({ownerState:r})=>r.hasChildren&&!r.height,style:{height:"auto"}},{props:{animation:"pulse"},style:Nte||{animation:`${ZE} 2s ease-in-out 0.5s infinite`}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:`linear-gradient(
                90deg,
                transparent,
                ${(n.vars||n).palette.action.hover},
                transparent
              )`,content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:Pte||{"&::after":{animation:`${QE} 2s linear 0.5s infinite`}}}]}})),d0=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiSkeleton"}),{animation:i="pulse",className:s,component:o="span",height:a,style:l,variant:c="text",width:u,...h}=r,d={...r,animation:i,component:o,variant:c,hasChildren:!!h.children},f=Rte(d);return H.jsx(Ite,{as:o,ref:t,className:it(f.root,s),ownerState:d,...h,style:{width:u,height:a,...l}})});function Lte(n={}){const{autoHideDuration:e=null,disableWindowBlurListener:t=!1,onClose:r,open:i,resumeHideDuration:s}=n,o=FN();P.useEffect(()=>{if(!i)return;function m(_){_.defaultPrevented||_.key==="Escape"&&(r==null||r(_,"escapeKeyDown"))}return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[i,r]);const a=Fa((m,_)=>{r==null||r(m,_)}),l=Fa(m=>{!r||m==null||o.start(m,()=>{a(null,"timeout")})});P.useEffect(()=>(i&&l(e),o.clear),[i,e,l,o]);const c=m=>{r==null||r(m,"clickaway")},u=o.clear,h=P.useCallback(()=>{e!=null&&l(s??e*.5)},[e,s,l]),d=m=>_=>{const v=m.onBlur;v==null||v(_),h()},f=m=>_=>{const v=m.onFocus;v==null||v(_),u()},p=m=>_=>{const v=m.onMouseEnter;v==null||v(_),u()},y=m=>_=>{const v=m.onMouseLeave;v==null||v(_),h()};return P.useEffect(()=>{if(!t&&i)return window.addEventListener("focus",h),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",u)}},[t,i,h,u]),{getRootProps:(m={})=>{const _={...sx(n),...sx(m)};return{role:"presentation",...m,..._,onBlur:d(_),onFocus:f(_),onMouseEnter:p(_),onMouseLeave:y(_)}},onClickAway:c}}function Dte(n){return Bt("MuiSnackbarContent",n)}Pt("MuiSnackbarContent",["root","message","action"]);const Fte=n=>{const{classes:e}=n;return Vt({root:["root"],action:["action"],message:["message"]},Dte,e)},Ote=Ye(tp,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(n,e)=>e.root})($t(({theme:n})=>{const e=n.palette.mode==="light"?.8:.98,t=Q4(n.palette.background.default,e);return{...n.typography.body2,color:n.vars?n.vars.palette.SnackbarContent.color:n.palette.getContrastText(t),backgroundColor:n.vars?n.vars.palette.SnackbarContent.bg:t,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(n.vars||n).shape.borderRadius,flexGrow:1,[n.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),kte=Ye("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(n,e)=>e.message})({padding:"8px 0"}),Ute=Ye("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(n,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Bte=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiSnackbarContent"}),{action:i,className:s,message:o,role:a="alert",...l}=r,c=r,u=Fte(c);return H.jsxs(Ote,{role:a,square:!0,elevation:6,className:it(u.root,s),ownerState:c,ref:t,...l,children:[H.jsx(kte,{className:u.message,ownerState:c,children:o}),i?H.jsx(Ute,{className:u.action,ownerState:c,children:i}):null]})});function zte(n){return Bt("MuiSnackbar",n)}Pt("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const $te=n=>{const{classes:e,anchorOrigin:t}=n,r={root:["root",`anchorOrigin${Ve(t.vertical)}${Ve(t.horizontal)}`]};return Vt(r,zte,e)},FD=Ye("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`anchorOrigin${Ve(t.anchorOrigin.vertical)}${Ve(t.anchorOrigin.horizontal)}`]]}})($t(({theme:n})=>({zIndex:(n.vars||n).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:e})=>e.anchorOrigin.vertical==="top",style:{top:8,[n.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:e})=>e.anchorOrigin.vertical!=="top",style:{bottom:8,[n.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[n.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[n.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="center",style:{[n.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),Vte=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiSnackbar"}),i=Cc(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:o,anchorOrigin:{vertical:a,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:u,className:h,ClickAwayListenerProps:d,ContentProps:f,disableWindowBlurListener:p=!1,message:y,onBlur:g,onClose:m,onFocus:_,onMouseEnter:v,onMouseLeave:x,open:b,resumeHideDuration:T,TransitionComponent:w=hx,transitionDuration:M=s,TransitionProps:{onEnter:A,onExited:S,...E}={},...I}=r,O={...r,anchorOrigin:{vertical:a,horizontal:l},autoHideDuration:c,disableWindowBlurListener:p,TransitionComponent:w,transitionDuration:M},N=$te(O),{getRootProps:R,onClickAway:D}=Lte({...O}),[q,L]=P.useState(!0),j=$E({elementType:FD,getSlotProps:R,externalForwardedProps:I,ownerState:O,additionalProps:{ref:t},className:[N.root,h]}),z=U=>{L(!0),S&&S(U)},K=(U,te)=>{L(!1),A&&A(U,te)};return!b&&q?null:H.jsx(hJ,{onClickAway:D,...d,children:H.jsx(FD,{...j,children:H.jsx(w,{appear:!0,in:b,timeout:M,direction:a==="top"?"down":"up",onEnter:K,onExited:z,...E,children:u||H.jsx(Bte,{message:y,action:o,...f})})})})});function Gte(n){return Bt("MuiTextField",n)}Pt("MuiTextField",["root"]);const Hte={standard:dx,filled:ux,outlined:fx},Wte=n=>{const{classes:e}=n;return Vt({root:["root"]},Gte,e)},jte=Ye(mee,{name:"MuiTextField",slot:"Root",overridesResolver:(n,e)=>e.root})({}),qte=P.forwardRef(function(e,t){const r=Ht({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:o,className:a,color:l="primary",defaultValue:c,disabled:u=!1,error:h=!1,FormHelperTextProps:d,fullWidth:f=!1,helperText:p,id:y,InputLabelProps:g,inputProps:m,InputProps:_,inputRef:v,label:x,maxRows:b,minRows:T,multiline:w=!1,name:M,onBlur:A,onChange:S,onFocus:E,placeholder:I,required:O=!1,rows:N,select:R=!1,SelectProps:D,slots:q={},slotProps:L={},type:j,value:z,variant:K="outlined",...U}=r,te={...r,autoFocus:s,color:l,disabled:u,error:h,fullWidth:f,multiline:w,required:O,select:R,variant:K},k=Wte(te),V=LN(y),Q=p&&V?`${V}-helper-text`:void 0,le=x&&V?`${V}-label`:void 0,pe=Hte[K],ue={slots:q,slotProps:{input:_,inputLabel:g,htmlInput:m,formHelperText:d,select:D,...L}},be={},Pe=ue.slotProps.inputLabel;K==="outlined"&&(Pe&&typeof Pe.shrink<"u"&&(be.notched=Pe.shrink),be.label=x),R&&((!D||!D.native)&&(be.id=void 0),be["aria-describedby"]=void 0);const[we,G]=Mi("input",{elementType:pe,externalForwardedProps:ue,additionalProps:be,ownerState:te}),[He,$e]=Mi("inputLabel",{elementType:Oee,externalForwardedProps:ue,ownerState:te}),[Ze,De]=Mi("htmlInput",{elementType:"input",externalForwardedProps:ue,ownerState:te}),[ot,Je]=Mi("formHelperText",{elementType:wee,externalForwardedProps:ue,ownerState:te}),[B,C]=Mi("select",{elementType:QN,externalForwardedProps:ue,ownerState:te}),ae=H.jsx(we,{"aria-describedby":Q,autoComplete:i,autoFocus:s,defaultValue:c,fullWidth:f,multiline:w,name:M,rows:N,maxRows:b,minRows:T,type:j,value:z,id:V,inputRef:v,onBlur:A,onChange:S,onFocus:E,placeholder:I,inputProps:De,slots:{input:q.htmlInput?Ze:void 0},...G});return H.jsxs(jte,{className:it(k.root,a),disabled:u,error:h,fullWidth:f,ref:t,required:O,color:l,variant:K,ownerState:te,...U,children:[x!=null&&x!==""&&H.jsx(He,{htmlFor:V,id:le,...$e,children:x}),R?H.jsx(B,{"aria-describedby":Q,id:V,labelId:le,value:z,input:ae,...C,children:o}):ae,p&&H.jsx(ot,{id:Q,...Je,children:p})]})});var Ci=function(){return Ci=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ci.apply(this,arguments)};function px(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var wn="-ms-",Wm="-moz-",Qt="-webkit-",R$="comm",ub="rule",JN="decl",Xte="@import",N$="@keyframes",Kte="@layer",P$=Math.abs,eP=String.fromCharCode,JE=Object.assign;function Yte(n,e){return br(n,0)^45?(((e<<2^br(n,0))<<2^br(n,1))<<2^br(n,2))<<2^br(n,3):0}function I$(n){return n.trim()}function xa(n,e){return(n=e.exec(n))?n[0]:n}function At(n,e,t){return n.replace(e,t)}function Jv(n,e,t){return n.indexOf(e,t)}function br(n,e){return n.charCodeAt(e)|0}function Mf(n,e,t){return n.slice(e,t)}function Uo(n){return n.length}function L$(n){return n.length}function wm(n,e){return e.push(n),n}function Zte(n,e){return n.map(e).join("")}function OD(n,e){return n.filter(function(t){return!xa(t,e)})}var hb=1,Ef=1,D$=0,Bs=0,ir=0,np="";function db(n,e,t,r,i,s,o,a){return{value:n,root:e,parent:t,type:r,props:i,children:s,line:hb,column:Ef,length:o,return:"",siblings:a}}function Fl(n,e){return JE(db("",null,null,"",null,null,0,n.siblings),n,{length:-n.length},e)}function _h(n){for(;n.root;)n=Fl(n.root,{children:[n]});wm(n,n.siblings)}function Qte(){return ir}function Jte(){return ir=Bs>0?br(np,--Bs):0,Ef--,ir===10&&(Ef=1,hb--),ir}function _o(){return ir=Bs<D$?br(np,Bs++):0,Ef++,ir===10&&(Ef=1,hb++),ir}function Ru(){return br(np,Bs)}function e_(){return Bs}function fb(n,e){return Mf(np,n,e)}function eC(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ene(n){return hb=Ef=1,D$=Uo(np=n),Bs=0,[]}function tne(n){return np="",n}function hw(n){return I$(fb(Bs-1,tC(n===91?n+2:n===40?n+1:n)))}function nne(n){for(;(ir=Ru())&&ir<33;)_o();return eC(n)>2||eC(ir)>3?"":" "}function rne(n,e){for(;--e&&_o()&&!(ir<48||ir>102||ir>57&&ir<65||ir>70&&ir<97););return fb(n,e_()+(e<6&&Ru()==32&&_o()==32))}function tC(n){for(;_o();)switch(ir){case n:return Bs;case 34:case 39:n!==34&&n!==39&&tC(ir);break;case 40:n===41&&tC(n);break;case 92:_o();break}return Bs}function ine(n,e){for(;_o()&&n+ir!==57;)if(n+ir===84&&Ru()===47)break;return"/*"+fb(e,Bs-1)+"*"+eP(n===47?n:_o())}function sne(n){for(;!eC(Ru());)_o();return fb(n,Bs)}function one(n){return tne(t_("",null,null,null,[""],n=ene(n),0,[0],n))}function t_(n,e,t,r,i,s,o,a,l){for(var c=0,u=0,h=o,d=0,f=0,p=0,y=1,g=1,m=1,_=0,v="",x=i,b=s,T=r,w=v;g;)switch(p=_,_=_o()){case 40:if(p!=108&&br(w,h-1)==58){Jv(w+=At(hw(_),"&","&\f"),"&\f",P$(c?a[c-1]:0))!=-1&&(m=-1);break}case 34:case 39:case 91:w+=hw(_);break;case 9:case 10:case 13:case 32:w+=nne(p);break;case 92:w+=rne(e_()-1,7);continue;case 47:switch(Ru()){case 42:case 47:wm(ane(ine(_o(),e_()),e,t,l),l);break;default:w+="/"}break;case 123*y:a[c++]=Uo(w)*m;case 125*y:case 59:case 0:switch(_){case 0:case 125:g=0;case 59+u:m==-1&&(w=At(w,/\f/g,"")),f>0&&Uo(w)-h&&wm(f>32?UD(w+";",r,t,h-1,l):UD(At(w," ","")+";",r,t,h-2,l),l);break;case 59:w+=";";default:if(wm(T=kD(w,e,t,c,u,i,a,v,x=[],b=[],h,s),s),_===123)if(u===0)t_(w,e,T,T,x,s,h,a,b);else switch(d===99&&br(w,3)===110?100:d){case 100:case 108:case 109:case 115:t_(n,T,T,r&&wm(kD(n,T,T,0,0,i,a,v,i,x=[],h,b),b),i,b,h,a,r?x:b);break;default:t_(w,T,T,T,[""],b,0,a,b)}}c=u=f=0,y=m=1,v=w="",h=o;break;case 58:h=1+Uo(w),f=p;default:if(y<1){if(_==123)--y;else if(_==125&&y++==0&&Jte()==125)continue}switch(w+=eP(_),_*y){case 38:m=u>0?1:(w+="\f",-1);break;case 44:a[c++]=(Uo(w)-1)*m,m=1;break;case 64:Ru()===45&&(w+=hw(_o())),d=Ru(),u=h=Uo(v=w+=sne(e_())),_++;break;case 45:p===45&&Uo(w)==2&&(y=0)}}return s}function kD(n,e,t,r,i,s,o,a,l,c,u,h){for(var d=i-1,f=i===0?s:[""],p=L$(f),y=0,g=0,m=0;y<r;++y)for(var _=0,v=Mf(n,d+1,d=P$(g=o[y])),x=n;_<p;++_)(x=I$(g>0?f[_]+" "+v:At(v,/&\f/g,f[_])))&&(l[m++]=x);return db(n,e,t,i===0?ub:a,l,c,u,h)}function ane(n,e,t,r){return db(n,e,t,R$,eP(Qte()),Mf(n,2,-2),0,r)}function UD(n,e,t,r,i){return db(n,e,t,JN,Mf(n,0,r),Mf(n,r+1,-1),r,i)}function F$(n,e,t){switch(Yte(n,e)){case 5103:return Qt+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Qt+n+n;case 4789:return Wm+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Qt+n+Wm+n+wn+n+n;case 5936:switch(br(n,e+11)){case 114:return Qt+n+wn+At(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Qt+n+wn+At(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Qt+n+wn+At(n,/[svh]\w+-[tblr]{2}/,"lr")+n}case 6828:case 4268:case 2903:return Qt+n+wn+n+n;case 6165:return Qt+n+wn+"flex-"+n+n;case 5187:return Qt+n+At(n,/(\w+).+(:[^]+)/,Qt+"box-$1$2"+wn+"flex-$1$2")+n;case 5443:return Qt+n+wn+"flex-item-"+At(n,/flex-|-self/g,"")+(xa(n,/flex-|baseline/)?"":wn+"grid-row-"+At(n,/flex-|-self/g,""))+n;case 4675:return Qt+n+wn+"flex-line-pack"+At(n,/align-content|flex-|-self/g,"")+n;case 5548:return Qt+n+wn+At(n,"shrink","negative")+n;case 5292:return Qt+n+wn+At(n,"basis","preferred-size")+n;case 6060:return Qt+"box-"+At(n,"-grow","")+Qt+n+wn+At(n,"grow","positive")+n;case 4554:return Qt+At(n,/([^-])(transform)/g,"$1"+Qt+"$2")+n;case 6187:return At(At(At(n,/(zoom-|grab)/,Qt+"$1"),/(image-set)/,Qt+"$1"),n,"")+n;case 5495:case 3959:return At(n,/(image-set\([^]*)/,Qt+"$1$`$1");case 4968:return At(At(n,/(.+:)(flex-)?(.*)/,Qt+"box-pack:$3"+wn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Qt+n+n;case 4200:if(!xa(n,/flex-|baseline/))return wn+"grid-column-align"+Mf(n,e)+n;break;case 2592:case 3360:return wn+At(n,"template-","")+n;case 4384:case 3616:return t&&t.some(function(r,i){return e=i,xa(r.props,/grid-\w+-end/)})?~Jv(n+(t=t[e].value),"span",0)?n:wn+At(n,"-start","")+n+wn+"grid-row-span:"+(~Jv(t,"span",0)?xa(t,/\d+/):+xa(t,/\d+/)-+xa(n,/\d+/))+";":wn+At(n,"-start","")+n;case 4896:case 4128:return t&&t.some(function(r){return xa(r.props,/grid-\w+-start/)})?n:wn+At(At(n,"-end","-span"),"span ","")+n;case 4095:case 3583:case 4068:case 2532:return At(n,/(.+)-inline(.+)/,Qt+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Uo(n)-1-e>6)switch(br(n,e+1)){case 109:if(br(n,e+4)!==45)break;case 102:return At(n,/(.+:)(.+)-([^]+)/,"$1"+Qt+"$2-$3$1"+Wm+(br(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~Jv(n,"stretch",0)?F$(At(n,"stretch","fill-available"),e,t)+n:n}break;case 5152:case 5920:return At(n,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,s,o,a,l,c){return wn+i+":"+s+c+(o?wn+i+"-span:"+(a?l:+l-+s)+c:"")+n});case 4949:if(br(n,e+6)===121)return At(n,":",":"+Qt)+n;break;case 6444:switch(br(n,br(n,14)===45?18:11)){case 120:return At(n,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Qt+(br(n,14)===45?"inline-":"")+"box$3$1"+Qt+"$2$3$1"+wn+"$2box$3")+n;case 100:return At(n,":",":"+wn)+n}break;case 5719:case 2647:case 2135:case 3927:case 2391:return At(n,"scroll-","scroll-snap-")+n}return n}function mx(n,e){for(var t="",r=0;r<n.length;r++)t+=e(n[r],r,n,e)||"";return t}function lne(n,e,t,r){switch(n.type){case Kte:if(n.children.length)break;case Xte:case JN:return n.return=n.return||n.value;case R$:return"";case N$:return n.return=n.value+"{"+mx(n.children,r)+"}";case ub:if(!Uo(n.value=n.props.join(",")))return""}return Uo(t=mx(n.children,r))?n.return=n.value+"{"+t+"}":""}function cne(n){var e=L$(n);return function(t,r,i,s){for(var o="",a=0;a<e;a++)o+=n[a](t,r,i,s)||"";return o}}function une(n){return function(e){e.root||(e=e.return)&&n(e)}}function hne(n,e,t,r){if(n.length>-1&&!n.return)switch(n.type){case JN:n.return=F$(n.value,n.length,t);return;case N$:return mx([Fl(n,{value:At(n.value,"@","@"+Qt)})],r);case ub:if(n.length)return Zte(t=n.props,function(i){switch(xa(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":_h(Fl(n,{props:[At(i,/:(read-\w+)/,":"+Wm+"$1")]})),_h(Fl(n,{props:[i]})),JE(n,{props:OD(t,r)});break;case"::placeholder":_h(Fl(n,{props:[At(i,/:(plac\w+)/,":"+Qt+"input-$1")]})),_h(Fl(n,{props:[At(i,/:(plac\w+)/,":"+Wm+"$1")]})),_h(Fl(n,{props:[At(i,/:(plac\w+)/,wn+"input-$1")]})),_h(Fl(n,{props:[i]})),JE(n,{props:OD(t,r)});break}return""})}}var dne={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ts={},Cf=typeof process<"u"&&ts!==void 0&&(ts.REACT_APP_SC_ATTR||ts.SC_ATTR)||"data-styled",O$="active",k$="data-styled-version",pb="6.1.13",tP=`/*!sc*/
`,gx=typeof window<"u"&&"HTMLElement"in window,fne=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&ts!==void 0&&ts.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&ts.REACT_APP_SC_DISABLE_SPEEDY!==""?ts.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&ts.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&ts!==void 0&&ts.SC_DISABLE_SPEEDY!==void 0&&ts.SC_DISABLE_SPEEDY!==""&&ts.SC_DISABLE_SPEEDY!=="false"&&ts.SC_DISABLE_SPEEDY),mb=Object.freeze([]),Af=Object.freeze({});function pne(n,e,t){return t===void 0&&(t=Af),n.theme!==t.theme&&n.theme||e||t.theme}var U$=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),mne=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,gne=/(^-|-$)/g;function BD(n){return n.replace(mne,"-").replace(gne,"")}var yne=/(a)(d)/gi,f0=52,zD=function(n){return String.fromCharCode(n+(n>25?39:97))};function nC(n){var e,t="";for(e=Math.abs(n);e>f0;e=e/f0|0)t=zD(e%f0)+t;return(zD(e%f0)+t).replace(yne,"$1-$2")}var dw,B$=5381,Sd=function(n,e){for(var t=e.length;t;)n=33*n^e.charCodeAt(--t);return n},z$=function(n){return Sd(B$,n)};function vne(n){return nC(z$(n)>>>0)}function _ne(n){return n.displayName||n.name||"Component"}function fw(n){return typeof n=="string"&&!0}var $$=typeof Symbol=="function"&&Symbol.for,V$=$$?Symbol.for("react.memo"):60115,xne=$$?Symbol.for("react.forward_ref"):60112,Sne={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},bne={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},G$={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},wne=((dw={})[xne]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},dw[V$]=G$,dw);function $D(n){return("type"in(e=n)&&e.type.$$typeof)===V$?G$:"$$typeof"in n?wne[n.$$typeof]:Sne;var e}var Tne=Object.defineProperty,Mne=Object.getOwnPropertyNames,VD=Object.getOwnPropertySymbols,Ene=Object.getOwnPropertyDescriptor,Cne=Object.getPrototypeOf,GD=Object.prototype;function H$(n,e,t){if(typeof e!="string"){if(GD){var r=Cne(e);r&&r!==GD&&H$(n,r,t)}var i=Mne(e);VD&&(i=i.concat(VD(e)));for(var s=$D(n),o=$D(e),a=0;a<i.length;++a){var l=i[a];if(!(l in bne||t&&t[l]||o&&l in o||s&&l in s)){var c=Ene(e,l);try{Tne(n,l,c)}catch{}}}}return n}function Rf(n){return typeof n=="function"}function nP(n){return typeof n=="object"&&"styledComponentId"in n}function gu(n,e){return n&&e?"".concat(n," ").concat(e):n||e||""}function HD(n,e){if(n.length===0)return"";for(var t=n[0],r=1;r<n.length;r++)t+=n[r];return t}function Dg(n){return n!==null&&typeof n=="object"&&n.constructor.name===Object.name&&!("props"in n&&n.$$typeof)}function rC(n,e,t){if(t===void 0&&(t=!1),!t&&!Dg(n)&&!Array.isArray(n))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)n[r]=rC(n[r],e[r]);else if(Dg(e))for(var r in e)n[r]=rC(n[r],e[r]);return n}function rP(n,e){Object.defineProperty(n,"toString",{value:e})}function py(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(n," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var Ane=function(){function n(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return n.prototype.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},n.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,s=i;e>=s;)if((s<<=1)<0)throw py(16,"".concat(e));this.groupSizes=new Uint32Array(s),this.groupSizes.set(r),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),l=(o=0,t.length);o<l;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[e]++,a++)},n.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),i=r+t;this.groupSizes[e]=0;for(var s=r;s<i;s++)this.tag.deleteRule(r)}},n.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),s=i+r,o=i;o<s;o++)t+="".concat(this.tag.getRule(o)).concat(tP);return t},n}(),n_=new Map,yx=new Map,r_=1,p0=function(n){if(n_.has(n))return n_.get(n);for(;yx.has(r_);)r_++;var e=r_++;return n_.set(n,e),yx.set(e,n),e},Rne=function(n,e){r_=e+1,n_.set(n,e),yx.set(e,n)},Nne="style[".concat(Cf,"][").concat(k$,'="').concat(pb,'"]'),Pne=new RegExp("^".concat(Cf,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Ine=function(n,e,t){for(var r,i=t.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&n.registerName(e,r)},Lne=function(n,e){for(var t,r=((t=e.textContent)!==null&&t!==void 0?t:"").split(tP),i=[],s=0,o=r.length;s<o;s++){var a=r[s].trim();if(a){var l=a.match(Pne);if(l){var c=0|parseInt(l[1],10),u=l[2];c!==0&&(Rne(u,c),Ine(n,u,l[3]),n.getTag().insertRules(c,i)),i.length=0}else i.push(a)}}},WD=function(n){for(var e=document.querySelectorAll(Nne),t=0,r=e.length;t<r;t++){var i=e[t];i&&i.getAttribute(Cf)!==O$&&(Lne(n,i),i.parentNode&&i.parentNode.removeChild(i))}};function Dne(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var W$=function(n){var e=document.head,t=n||e,r=document.createElement("style"),i=function(a){var l=Array.from(a.querySelectorAll("style[".concat(Cf,"]")));return l[l.length-1]}(t),s=i!==void 0?i.nextSibling:null;r.setAttribute(Cf,O$),r.setAttribute(k$,pb);var o=Dne();return o&&r.setAttribute("nonce",o),t.insertBefore(r,s),r},Fne=function(){function n(e){this.element=W$(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var r=document.styleSheets,i=0,s=r.length;i<s;i++){var o=r[i];if(o.ownerNode===t)return o}throw py(17)}(this.element),this.length=0}return n.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},n.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},n}(),One=function(){function n(e){this.element=W$(e),this.nodes=this.element.childNodes,this.length=0}return n.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},n.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},n}(),kne=function(){function n(e){this.rules=[],this.length=0}return n.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},n.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},n}(),jD=gx,Une={isServer:!gx,useCSSOMInjection:!fne},j$=function(){function n(e,t,r){e===void 0&&(e=Af),t===void 0&&(t={});var i=this;this.options=Ci(Ci({},Une),e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&gx&&jD&&(jD=!1,WD(this)),rP(this,function(){return function(s){for(var o=s.getTag(),a=o.length,l="",c=function(h){var d=function(m){return yx.get(m)}(h);if(d===void 0)return"continue";var f=s.names.get(d),p=o.getGroup(h);if(f===void 0||!f.size||p.length===0)return"continue";var y="".concat(Cf,".g").concat(h,'[id="').concat(d,'"]'),g="";f!==void 0&&f.forEach(function(m){m.length>0&&(g+="".concat(m,","))}),l+="".concat(p).concat(y,'{content:"').concat(g,'"}').concat(tP)},u=0;u<a;u++)c(u);return l}(i)})}return n.registerId=function(e){return p0(e)},n.prototype.rehydrate=function(){!this.server&&gx&&WD(this)},n.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new n(Ci(Ci({},this.options),e),this.gs,t&&this.names||void 0)},n.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.prototype.getTag=function(){return this.tag||(this.tag=(e=function(t){var r=t.useCSSOMInjection,i=t.target;return t.isServer?new kne(i):r?new Fne(i):new One(i)}(this.options),new Ane(e)));var e},n.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},n.prototype.registerName=function(e,t){if(p0(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},n.prototype.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(p0(e),r)},n.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.prototype.clearRules=function(e){this.getTag().clearGroup(p0(e)),this.clearNames(e)},n.prototype.clearTag=function(){this.tag=void 0},n}(),Bne=/&/g,zne=/^\s*\/\/.*$/gm;function q$(n,e){return n.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=q$(t.children,e)),t})}function $ne(n){var e,t,r,i=Af,s=i.options,o=s===void 0?Af:s,a=i.plugins,l=a===void 0?mb:a,c=function(d,f,p){return p.startsWith(t)&&p.endsWith(t)&&p.replaceAll(t,"").length>0?".".concat(e):d},u=l.slice();u.push(function(d){d.type===ub&&d.value.includes("&")&&(d.props[0]=d.props[0].replace(Bne,t).replace(r,c))}),o.prefix&&u.push(hne),u.push(lne);var h=function(d,f,p,y){f===void 0&&(f=""),p===void 0&&(p=""),y===void 0&&(y="&"),e=y,t=f,r=new RegExp("\\".concat(t,"\\b"),"g");var g=d.replace(zne,""),m=one(p||f?"".concat(p," ").concat(f," { ").concat(g," }"):g);o.namespace&&(m=q$(m,o.namespace));var _=[];return mx(m,cne(u.concat(une(function(v){return _.push(v)})))),_};return h.hash=l.length?l.reduce(function(d,f){return f.name||py(15),Sd(d,f.name)},B$).toString():"",h}var Vne=new j$,iC=$ne(),X$=Et.createContext({shouldForwardProp:void 0,styleSheet:Vne,stylis:iC});X$.Consumer;Et.createContext(void 0);function qD(){return P.useContext(X$)}var Gne=function(){function n(e,t){var r=this;this.inject=function(i,s){s===void 0&&(s=iC);var o=r.name+s.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,s(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,rP(this,function(){throw py(12,String(r.name))})}return n.prototype.getName=function(e){return e===void 0&&(e=iC),this.name+e.hash},n}(),Hne=function(n){return n>="A"&&n<="Z"};function XD(n){for(var e="",t=0;t<n.length;t++){var r=n[t];if(t===1&&r==="-"&&n[0]==="-")return n;Hne(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var K$=function(n){return n==null||n===!1||n===""},Y$=function(n){var e,t,r=[];for(var i in n){var s=n[i];n.hasOwnProperty(i)&&!K$(s)&&(Array.isArray(s)&&s.isCss||Rf(s)?r.push("".concat(XD(i),":"),s,";"):Dg(s)?r.push.apply(r,px(px(["".concat(i," {")],Y$(s),!1),["}"],!1)):r.push("".concat(XD(i),": ").concat((e=i,(t=s)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in dne||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return r};function Nu(n,e,t,r){if(K$(n))return[];if(nP(n))return[".".concat(n.styledComponentId)];if(Rf(n)){if(!Rf(s=n)||s.prototype&&s.prototype.isReactComponent||!e)return[n];var i=n(e);return Nu(i,e,t,r)}var s;return n instanceof Gne?t?(n.inject(t,r),[n.getName(r)]):[n]:Dg(n)?Y$(n):Array.isArray(n)?Array.prototype.concat.apply(mb,n.map(function(o){return Nu(o,e,t,r)})):[n.toString()]}function Wne(n){for(var e=0;e<n.length;e+=1){var t=n[e];if(Rf(t)&&!nP(t))return!1}return!0}var jne=z$(pb),qne=function(){function n(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&Wne(e),this.componentId=t,this.baseHash=Sd(jne,t),this.baseStyle=r,j$.registerId(t)}return n.prototype.generateAndInjectStyles=function(e,t,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=gu(i,this.staticRulesId);else{var s=HD(Nu(this.rules,e,t,r)),o=nC(Sd(this.baseHash,s)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=r(s,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}i=gu(i,o),this.staticRulesId=o}else{for(var l=Sd(this.baseHash,r.hash),c="",u=0;u<this.rules.length;u++){var h=this.rules[u];if(typeof h=="string")c+=h;else if(h){var d=HD(Nu(h,e,t,r));l=Sd(l,d+u),c+=d}}if(c){var f=nC(l>>>0);t.hasNameForId(this.componentId,f)||t.insertRules(this.componentId,f,r(c,".".concat(f),void 0,this.componentId)),i=gu(i,f)}}return i},n}(),Z$=Et.createContext(void 0);Z$.Consumer;var pw={};function Xne(n,e,t){var r=nP(n),i=n,s=!fw(n),o=e.attrs,a=o===void 0?mb:o,l=e.componentId,c=l===void 0?function(x,b){var T=typeof x!="string"?"sc":BD(x);pw[T]=(pw[T]||0)+1;var w="".concat(T,"-").concat(vne(pb+T+pw[T]));return b?"".concat(b,"-").concat(w):w}(e.displayName,e.parentComponentId):l,u=e.displayName,h=u===void 0?function(x){return fw(x)?"styled.".concat(x):"Styled(".concat(_ne(x),")")}(n):u,d=e.displayName&&e.componentId?"".concat(BD(e.displayName),"-").concat(e.componentId):e.componentId||c,f=r&&i.attrs?i.attrs.concat(a).filter(Boolean):a,p=e.shouldForwardProp;if(r&&i.shouldForwardProp){var y=i.shouldForwardProp;if(e.shouldForwardProp){var g=e.shouldForwardProp;p=function(x,b){return y(x,b)&&g(x,b)}}else p=y}var m=new qne(t,d,r?i.componentStyle:void 0);function _(x,b){return function(T,w,M){var A=T.attrs,S=T.componentStyle,E=T.defaultProps,I=T.foldedComponentIds,O=T.styledComponentId,N=T.target,R=Et.useContext(Z$),D=qD(),q=T.shouldForwardProp||D.shouldForwardProp,L=pne(w,R,E)||Af,j=function(V,Q,le){for(var pe,ue=Ci(Ci({},Q),{className:void 0,theme:le}),be=0;be<V.length;be+=1){var Pe=Rf(pe=V[be])?pe(ue):pe;for(var we in Pe)ue[we]=we==="className"?gu(ue[we],Pe[we]):we==="style"?Ci(Ci({},ue[we]),Pe[we]):Pe[we]}return Q.className&&(ue.className=gu(ue.className,Q.className)),ue}(A,w,L),z=j.as||N,K={};for(var U in j)j[U]===void 0||U[0]==="$"||U==="as"||U==="theme"&&j.theme===L||(U==="forwardedAs"?K.as=j.forwardedAs:q&&!q(U,z)||(K[U]=j[U]));var te=function(V,Q){var le=qD(),pe=V.generateAndInjectStyles(Q,le.styleSheet,le.stylis);return pe}(S,j),k=gu(I,O);return te&&(k+=" "+te),j.className&&(k+=" "+j.className),K[fw(z)&&!U$.has(z)?"class":"className"]=k,K.ref=M,P.createElement(z,K)}(v,x,b)}_.displayName=h;var v=Et.forwardRef(_);return v.attrs=f,v.componentStyle=m,v.displayName=h,v.shouldForwardProp=p,v.foldedComponentIds=r?gu(i.foldedComponentIds,i.styledComponentId):"",v.styledComponentId=d,v.target=r?i.target:n,Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(x){this._foldedDefaultProps=r?function(b){for(var T=[],w=1;w<arguments.length;w++)T[w-1]=arguments[w];for(var M=0,A=T;M<A.length;M++)rC(b,A[M],!0);return b}({},i.defaultProps,x):x}}),rP(v,function(){return".".concat(v.styledComponentId)}),s&&H$(v,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),v}function KD(n,e){for(var t=[n[0]],r=0,i=e.length;r<i;r+=1)t.push(e[r],n[r+1]);return t}var YD=function(n){return Object.assign(n,{isCss:!0})};function Kne(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(Rf(n)||Dg(n))return YD(Nu(KD(mb,px([n],e,!0))));var r=n;return e.length===0&&r.length===1&&typeof r[0]=="string"?Nu(r):YD(Nu(KD(r,e)))}function sC(n,e,t){if(t===void 0&&(t=Af),!e)throw py(1,e);var r=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return n(e,t,Kne.apply(void 0,px([i],s,!1)))};return r.attrs=function(i){return sC(n,e,Ci(Ci({},t),{attrs:Array.prototype.concat(t.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return sC(n,e,Ci(Ci({},t),i))},r}var Q$=function(n){return sC(Xne,n)},gb=Q$;U$.forEach(function(n){gb[n]=Q$(n)});const Yne=gb(GJ)`
  .dialog-content {
    object-fit: cover;
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center;
    padding: 0;

    &-box {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;

      &-cancle {
        position: absolute;
        top: 8px;
        right: 8px;
      }

      &-subtitle {
        font-style: italic;
      }

      &-tags {
        display: flex;
        align-items: center;
        gap: 8px;
      }
    }
  }
`;var $d=(n=>(n.ERROR="error",n.SUCCESS="success",n.INFO="info",n))($d||{}),J$={};function Zne(n){const e=new Error(n);if(e.stack===void 0)try{throw e}catch{}return e}var Qne=Zne,Rt=Qne;function Jne(n){return!!n&&typeof n.then=="function"}var Cn=Jne;function ere(n,e){if(n!=null)return n;throw Rt(e??"Got unexpected null or undefined")}var Ln=ere;function bt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class yb{getValue(){throw Rt("BaseLoadable")}toPromise(){throw Rt("BaseLoadable")}valueMaybe(){throw Rt("BaseLoadable")}valueOrThrow(){throw Rt(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Rt("BaseLoadable")}promiseOrThrow(){throw Rt(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Rt("BaseLoadable")}errorOrThrow(){throw Rt(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw Rt("BaseLoadable")}}class tre extends yb{constructor(e){super(),bt(this,"state","hasValue"),bt(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const t=e(this.contents);return Cn(t)?Vu(t):Nf(t)?t:my(t)}catch(t){return Cn(t)?Vu(t.next(()=>this.map(e))):vb(t)}}}class nre extends yb{constructor(e){super(),bt(this,"state","hasError"),bt(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class e5 extends yb{constructor(e){super(),bt(this,"state","loading"),bt(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return Vu(this.contents.then(t=>{const r=e(t);if(Nf(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(t=>{if(Cn(t))return t.then(()=>this.map(e).contents);throw t}))}}function my(n){return Object.freeze(new tre(n))}function vb(n){return Object.freeze(new nre(n))}function Vu(n){return Object.freeze(new e5(n))}function t5(){return Object.freeze(new e5(new Promise(()=>{})))}function rre(n){return n.every(e=>e.state==="hasValue")?my(n.map(e=>e.contents)):n.some(e=>e.state==="hasError")?vb(Ln(n.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):Vu(Promise.all(n.map(e=>e.contents)))}function n5(n){const t=(Array.isArray(n)?n:Object.getOwnPropertyNames(n).map(i=>n[i])).map(i=>Nf(i)?i:Cn(i)?Vu(i):my(i)),r=rre(t);return Array.isArray(n)?r:r.map(i=>Object.getOwnPropertyNames(n).reduce((s,o,a)=>({...s,[o]:i[a]}),{}))}function Nf(n){return n instanceof yb}const ire={of:n=>Cn(n)?Vu(n):Nf(n)?n:my(n),error:n=>vb(n),loading:()=>t5(),all:n5,isLoadable:Nf};var rh={loadableWithValue:my,loadableWithError:vb,loadableWithPromise:Vu,loadableLoading:t5,loadableAll:n5,isLoadable:Nf,RecoilLoadable:ire},sre=rh.loadableWithValue,ore=rh.loadableWithError,are=rh.loadableWithPromise,lre=rh.loadableLoading,cre=rh.loadableAll,ure=rh.isLoadable,hre=rh.RecoilLoadable,gy=Object.freeze({__proto__:null,loadableWithValue:sre,loadableWithError:ore,loadableWithPromise:are,loadableLoading:lre,loadableAll:cre,isLoadable:ure,RecoilLoadable:hre});const oC={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function dre(n,e){var t,r;const i=(t=J$[n])===null||t===void 0||(r=t.toLowerCase())===null||r===void 0?void 0:r.trim();if(i==null||i==="")return;if(!["true","false"].includes(i))throw Rt(`process.env.${n} value must be 'true', 'false', or empty: ${i}`);e(i==="true")}function fre(n,e){var t;const r=(t=J$[n])===null||t===void 0?void 0:t.trim();r==null||r===""||e(r.split(/\s*,\s*|\s+/))}function pre(){var n;typeof process>"u"||((n=process)===null||n===void 0?void 0:n.env)!=null&&(dre("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{oC.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),fre("RECOIL_GKS_ENABLED",e=>{e.forEach(t=>{oC.RECOIL_GKS_ENABLED.add(t)})}))}pre();var rp=oC;function _b(n){return rp.RECOIL_GKS_ENABLED.has(n)}_b.setPass=n=>{rp.RECOIL_GKS_ENABLED.add(n)};_b.setFail=n=>{rp.RECOIL_GKS_ENABLED.delete(n)};_b.clear=()=>{rp.RECOIL_GKS_ENABLED.clear()};var vn=_b;function mre(n,e,{error:t}={}){return null}var gre=mre,iP=gre,mw,gw,yw;const yre=(mw=Et.createMutableSource)!==null&&mw!==void 0?mw:Et.unstable_createMutableSource,r5=(gw=Et.useMutableSource)!==null&&gw!==void 0?gw:Et.unstable_useMutableSource,i5=(yw=Et.useSyncExternalStore)!==null&&yw!==void 0?yw:Et.unstable_useSyncExternalStore;function vre(){var n;const{ReactCurrentDispatcher:e,ReactCurrentOwner:t}=Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((n=e==null?void 0:e.current)!==null&&n!==void 0?n:t.currentDispatcher).useSyncExternalStore!=null}function _re(){return vn("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:vn("recoil_sync_external_store")&&i5!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:vn("recoil_mutable_source")&&r5!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?vn("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:vn("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function xre(){return!1}var yy={createMutableSource:yre,useMutableSource:r5,useSyncExternalStore:i5,currentRendererSupportsUseSyncExternalStore:vre,reactMode:_re,isFastRefreshEnabled:xre};class sP{constructor(e){bt(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class s5 extends sP{}class o5 extends sP{}function Sre(n){return n instanceof s5||n instanceof o5}var xb={AbstractRecoilValue:sP,RecoilState:s5,RecoilValueReadOnly:o5,isRecoilValue:Sre},bre=xb.AbstractRecoilValue,wre=xb.RecoilState,Tre=xb.RecoilValueReadOnly,Mre=xb.isRecoilValue,Pf=Object.freeze({__proto__:null,AbstractRecoilValue:bre,RecoilState:wre,RecoilValueReadOnly:Tre,isRecoilValue:Mre});function Ere(n,e){return function*(){let t=0;for(const r of n)yield e(r,t++)}()}var Sb=Ere;class a5{}const Cre=new a5,Gu=new Map,oP=new Map;function Are(n){return Sb(n,e=>Ln(oP.get(e)))}function Rre(n){if(Gu.has(n)){const e=`Duplicate atom key "${n}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function Nre(n){rp.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&Rre(n.key),Gu.set(n.key,n);const e=n.set==null?new Pf.RecoilValueReadOnly(n.key):new Pf.RecoilState(n.key);return oP.set(n.key,e),e}class l5 extends Error{}function Pre(n){const e=Gu.get(n);if(e==null)throw new l5(`Missing definition for RecoilValue: "${n}""`);return e}function Ire(n){return Gu.get(n)}const vx=new Map;function Lre(n){var e;if(!vn("recoil_memory_managament_2020"))return;const t=Gu.get(n);if(t!=null&&(e=t.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(t)){var r;Gu.delete(n),(r=c5(n))===null||r===void 0||r(),vx.delete(n)}}function Dre(n,e){vn("recoil_memory_managament_2020")&&(e===void 0?vx.delete(n):vx.set(n,e))}function c5(n){return vx.get(n)}var Vi={nodes:Gu,recoilValues:oP,registerNode:Nre,getNode:Pre,getNodeMaybe:Ire,deleteNodeConfigIfPossible:Lre,setConfigDeletionHandler:Dre,getConfigDeletionHandler:c5,recoilValuesForKeys:Are,NodeMissingError:l5,DefaultValue:a5,DEFAULT_VALUE:Cre};function Fre(n,e){e()}var Ore={enqueueExecution:Fre};function kre(n,e){return e={exports:{}},n(e,e.exports),e.exports}var Ure=kre(function(n){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},t={},r=5,i=Math.pow(2,r),s=i-1,o=i/2,a=i/4,l={},c=function(W){return function(){return W}},u=t.hash=function(Y){var W=typeof Y>"u"?"undefined":e(Y);if(W==="number")return Y;W!=="string"&&(Y+="");for(var ve=0,$=0,me=Y.length;$<me;++$){var J=Y.charCodeAt($);ve=(ve<<5)-ve+J|0}return ve},h=function(W){return W-=W>>1&1431655765,W=(W&858993459)+(W>>2&858993459),W=W+(W>>4)&252645135,W+=W>>8,W+=W>>16,W&127},d=function(W,ve){return ve>>>W&s},f=function(W){return 1<<W},p=function(W,ve){return h(W&ve-1)},y=function(W,ve,$,me){var J=me;if(!W){var he=me.length;J=new Array(he);for(var Ee=0;Ee<he;++Ee)J[Ee]=me[Ee]}return J[ve]=$,J},g=function(W,ve,$){var me=$.length-1,J=0,he=0,Ee=$;if(W)J=he=ve;else for(Ee=new Array(me);J<ve;)Ee[he++]=$[J++];for(++J;J<=me;)Ee[he++]=$[J++];return W&&(Ee.length=me),Ee},m=function(W,ve,$,me){var J=me.length;if(W){for(var he=J;he>=ve;)me[he--]=me[he];return me[ve]=$,me}for(var Ee=0,Re=0,qe=new Array(J+1);Ee<ve;)qe[Re++]=me[Ee++];for(qe[ve]=$;Ee<J;)qe[++Re]=me[Ee++];return qe},_=1,v=2,x=3,b=4,T={__hamt_isEmpty:!0},w=function(W){return W===T||W&&W.__hamt_isEmpty},M=function(W,ve,$,me){return{type:_,edit:W,hash:ve,key:$,value:me,_modify:L}},A=function(W,ve,$){return{type:v,edit:W,hash:ve,children:$,_modify:j}},S=function(W,ve,$){return{type:x,edit:W,mask:ve,children:$,_modify:z}},E=function(W,ve,$){return{type:b,edit:W,size:ve,children:$,_modify:K}},I=function(W){return W===T||W.type===_||W.type===v},O=function(W,ve,$,me,J){for(var he=[],Ee=me,Re=0,qe=0;Ee;++qe)Ee&1&&(he[qe]=J[Re++]),Ee>>>=1;return he[ve]=$,E(W,Re+1,he)},N=function(W,ve,$,me){for(var J=new Array(ve-1),he=0,Ee=0,Re=0,qe=me.length;Re<qe;++Re)if(Re!==$){var vt=me[Re];vt&&!w(vt)&&(J[he++]=vt,Ee|=1<<Re)}return S(W,Ee,J)},R=function Y(W,ve,$,me,J,he){if($===J)return A(W,$,[he,me]);var Ee=d(ve,$),Re=d(ve,J);return S(W,f(Ee)|f(Re),Ee===Re?[Y(W,ve+r,$,me,J,he)]:Ee<Re?[me,he]:[he,me])},D=function(W,ve,$,me,J,he,Ee,Re){for(var qe=J.length,vt=0;vt<qe;++vt){var on=J[vt];if($(Ee,on.key)){var dt=on.value,pn=he(dt);return pn===dt?J:pn===l?(--Re.value,g(W,vt,J)):y(W,vt,M(ve,me,Ee,pn),J)}}var Kn=he();return Kn===l?J:(++Re.value,y(W,qe,M(ve,me,Ee,Kn),J))},q=function(W,ve){return W===ve.edit},L=function(W,ve,$,me,J,he,Ee){if(ve(he,this.key)){var Re=me(this.value);return Re===this.value?this:Re===l?(--Ee.value,T):q(W,this)?(this.value=Re,this):M(W,J,he,Re)}var qe=me();return qe===l?this:(++Ee.value,R(W,$,this.hash,this,J,M(W,J,he,qe)))},j=function(W,ve,$,me,J,he,Ee){if(J===this.hash){var Re=q(W,this),qe=D(Re,W,ve,this.hash,this.children,me,he,Ee);return qe===this.children?this:qe.length>1?A(W,this.hash,qe):qe[0]}var vt=me();return vt===l?this:(++Ee.value,R(W,$,this.hash,this,J,M(W,J,he,vt)))},z=function(W,ve,$,me,J,he,Ee){var Re=this.mask,qe=this.children,vt=d($,J),on=f(vt),dt=p(Re,on),pn=Re&on,Kn=pn?qe[dt]:T,na=Kn._modify(W,ve,$+r,me,J,he,Ee);if(Kn===na)return this;var kc=q(W,this),Hi=Re,ra=void 0;if(pn&&w(na)){if(Hi&=~on,!Hi)return T;if(qe.length<=2&&I(qe[dt^1]))return qe[dt^1];ra=g(kc,dt,qe)}else if(!pn&&!w(na)){if(qe.length>=o)return O(W,vt,na,Re,qe);Hi|=on,ra=m(kc,dt,na,qe)}else ra=y(kc,dt,na,qe);return kc?(this.mask=Hi,this.children=ra,this):S(W,Hi,ra)},K=function(W,ve,$,me,J,he,Ee){var Re=this.size,qe=this.children,vt=d($,J),on=qe[vt],dt=(on||T)._modify(W,ve,$+r,me,J,he,Ee);if(on===dt)return this;var pn=q(W,this),Kn=void 0;if(w(on)&&!w(dt))++Re,Kn=y(pn,vt,dt,qe);else if(!w(on)&&w(dt)){if(--Re,Re<=a)return N(W,Re,vt,qe);Kn=y(pn,vt,T,qe)}else Kn=y(pn,vt,dt,qe);return pn?(this.size=Re,this.children=Kn,this):E(W,Re,Kn)};T._modify=function(Y,W,ve,$,me,J,he){var Ee=$();return Ee===l?T:(++he.value,M(Y,me,J,Ee))};function U(Y,W,ve,$,me){this._editable=Y,this._edit=W,this._config=ve,this._root=$,this._size=me}U.prototype.setTree=function(Y,W){return this._editable?(this._root=Y,this._size=W,this):Y===this._root?this:new U(this._editable,this._edit,this._config,Y,W)};var te=t.tryGetHash=function(Y,W,ve,$){for(var me=$._root,J=0,he=$._config.keyEq;;)switch(me.type){case _:return he(ve,me.key)?me.value:Y;case v:{if(W===me.hash)for(var Ee=me.children,Re=0,qe=Ee.length;Re<qe;++Re){var vt=Ee[Re];if(he(ve,vt.key))return vt.value}return Y}case x:{var on=d(J,W),dt=f(on);if(me.mask&dt){me=me.children[p(me.mask,dt)],J+=r;break}return Y}case b:{if(me=me.children[d(J,W)],me){J+=r;break}return Y}default:return Y}};U.prototype.tryGetHash=function(Y,W,ve){return te(Y,W,ve,this)};var k=t.tryGet=function(Y,W,ve){return te(Y,ve._config.hash(W),W,ve)};U.prototype.tryGet=function(Y,W){return k(Y,W,this)};var V=t.getHash=function(Y,W,ve){return te(void 0,Y,W,ve)};U.prototype.getHash=function(Y,W){return V(Y,W,this)},t.get=function(Y,W){return te(void 0,W._config.hash(Y),Y,W)},U.prototype.get=function(Y,W){return k(W,Y,this)};var Q=t.has=function(Y,W,ve){return te(l,Y,W,ve)!==l};U.prototype.hasHash=function(Y,W){return Q(Y,W,this)};var le=t.has=function(Y,W){return Q(W._config.hash(Y),Y,W)};U.prototype.has=function(Y){return le(Y,this)};var pe=function(W,ve){return W===ve};t.make=function(Y){return new U(0,0,{keyEq:Y&&Y.keyEq||pe,hash:Y&&Y.hash||u},T,0)},t.empty=t.make();var ue=t.isEmpty=function(Y){return Y&&!!w(Y._root)};U.prototype.isEmpty=function(){return ue(this)};var be=t.modifyHash=function(Y,W,ve,$){var me={value:$._size},J=$._root._modify($._editable?$._edit:NaN,$._config.keyEq,0,Y,W,ve,me);return $.setTree(J,me.value)};U.prototype.modifyHash=function(Y,W,ve){return be(ve,Y,W,this)};var Pe=t.modify=function(Y,W,ve){return be(Y,ve._config.hash(W),W,ve)};U.prototype.modify=function(Y,W){return Pe(W,Y,this)};var we=t.setHash=function(Y,W,ve,$){return be(c(ve),Y,W,$)};U.prototype.setHash=function(Y,W,ve){return we(Y,W,ve,this)};var G=t.set=function(Y,W,ve){return we(ve._config.hash(Y),Y,W,ve)};U.prototype.set=function(Y,W){return G(Y,W,this)};var He=c(l),$e=t.removeHash=function(Y,W,ve){return be(He,Y,W,ve)};U.prototype.removeHash=U.prototype.deleteHash=function(Y,W){return $e(Y,W,this)};var Ze=t.remove=function(Y,W){return $e(W._config.hash(Y),Y,W)};U.prototype.remove=U.prototype.delete=function(Y){return Ze(Y,this)};var De=t.beginMutation=function(Y){return new U(Y._editable+1,Y._edit+1,Y._config,Y._root,Y._size)};U.prototype.beginMutation=function(){return De(this)};var ot=t.endMutation=function(Y){return Y._editable=Y._editable&&Y._editable-1,Y};U.prototype.endMutation=function(){return ot(this)};var Je=t.mutate=function(Y,W){var ve=De(W);return Y(ve),ot(ve)};U.prototype.mutate=function(Y){return Je(Y,this)};var B=function(W){return W&&C(W[0],W[1],W[2],W[3],W[4])},C=function(W,ve,$,me,J){for(;$<W;){var he=ve[$++];if(he&&!w(he))return ae(he,me,[W,ve,$,me,J])}return B(J)},ae=function(W,ve,$){switch(W.type){case _:return{value:ve(W),rest:$};case v:case b:case x:var me=W.children;return C(me.length,me,0,ve,$);default:return B($)}},oe={done:!0};function Te(Y){this.v=Y}Te.prototype.next=function(){if(!this.v)return oe;var Y=this.v;return this.v=B(Y.rest),Y},Te.prototype[Symbol.iterator]=function(){return this};var Se=function(W,ve){return new Te(ae(W._root,ve))},Xe=function(W){return[W.key,W.value]},Ie=t.entries=function(Y){return Se(Y,Xe)};U.prototype.entries=U.prototype[Symbol.iterator]=function(){return Ie(this)};var Oe=function(W){return W.key},pt=t.keys=function(Y){return Se(Y,Oe)};U.prototype.keys=function(){return pt(this)};var Le=function(W){return W.value},Fe=t.values=U.prototype.values=function(Y){return Se(Y,Le)};U.prototype.values=function(){return Fe(this)};var at=t.fold=function(Y,W,ve){var $=ve._root;if($.type===_)return Y(W,$.value,$.key);for(var me=[$.children],J=void 0;J=me.pop();)for(var he=0,Ee=J.length;he<Ee;){var Re=J[he++];Re&&Re.type&&(Re.type===_?W=Y(W,Re.value,Re.key):me.push(Re.children))}return W};U.prototype.fold=function(Y,W){return at(Y,W,this)};var ut=t.forEach=function(Y,W){return at(function(ve,$,me){return Y($,me,W)},null,W)};U.prototype.forEach=function(Y){return ut(Y,this)};var Ne=t.count=function(Y){return Y._size};U.prototype.count=function(){return Ne(this)},Object.defineProperty(U.prototype,"size",{get:U.prototype.count}),n.exports?n.exports=t:(void 0).hamt=t});class Bre{constructor(e){bt(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,t){return this._map.set(e,t),this}delete(e){return this._map.delete(e),this}clone(){return lP(this)}toMap(){return new Map(this._map)}}class aP{constructor(e){if(bt(this,"_hamt",Ure.empty.beginMutation()),e instanceof aP){const t=e._hamt.endMutation();e._hamt=t.beginMutation(),this._hamt=t.beginMutation()}else if(e)for(const[t,r]of e.entries())this._hamt.set(t,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,t){return this._hamt.set(e,t),this}delete(e){return this._hamt.delete(e),this}clone(){return lP(this)}toMap(){return new Map(this._hamt)}}function lP(n){return vn("recoil_hamt_2020")?new aP(n):new Bre(n)}var zre={persistentMap:lP},$re=zre.persistentMap,Vre=Object.freeze({__proto__:null,persistentMap:$re});function Gre(n,...e){const t=new Set;e:for(const r of n){for(const i of e)if(i.has(r))continue e;t.add(r)}return t}var jm=Gre;function Hre(n,e){const t=new Map;return n.forEach((r,i)=>{t.set(i,e(r,i))}),t}var _x=Hre;function Wre(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function jre(n){return{nodeDeps:_x(n.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:_x(n.nodeToNodeSubscriptions,e=>new Set(e))}}function vw(n,e,t,r){const{nodeDeps:i,nodeToNodeSubscriptions:s}=t,o=i.get(n);if(o&&r&&o!==r.nodeDeps.get(n))return;i.set(n,e);const a=o==null?e:jm(e,o);for(const l of a)s.has(l)||s.set(l,new Set),Ln(s.get(l)).add(n);if(o){const l=jm(o,e);for(const c of l){if(!s.has(c))return;const u=Ln(s.get(c));u.delete(n),u.size===0&&s.delete(c)}}}function qre(n,e,t,r){var i,s,o,a;const l=t.getState();r===l.currentTree.version||r===((i=l.nextTree)===null||i===void 0?void 0:i.version)||((s=l.previousTree)===null||s===void 0||s.version);const c=t.getGraph(r);if(vw(n,e,c),r===((o=l.previousTree)===null||o===void 0?void 0:o.version)){const h=t.getGraph(l.currentTree.version);vw(n,e,h,c)}if(r===((a=l.previousTree)===null||a===void 0?void 0:a.version)||r===l.currentTree.version){var u;const h=(u=l.nextTree)===null||u===void 0?void 0:u.version;if(h!==void 0){const d=t.getGraph(h);vw(n,e,d,c)}}}var vy={cloneGraph:jre,graph:Wre,saveDepsToStore:qre};let Xre=0;const Kre=()=>Xre++;let Yre=0;const Zre=()=>Yre++;let Qre=0;const Jre=()=>Qre++;var bb={getNextTreeStateVersion:Kre,getNextStoreID:Zre,getNextComponentID:Jre};const{persistentMap:ZD}=Vre,{graph:eie}=vy,{getNextTreeStateVersion:u5}=bb;function h5(){const n=u5();return{version:n,stateID:n,transactionMetadata:{},dirtyAtoms:new Set,atomValues:ZD(),nonvalidatedAtoms:ZD()}}function tie(){const n=h5();return{currentTree:n,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(n.version,eie()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var d5={makeEmptyTreeState:h5,makeEmptyStoreState:tie,getNextTreeStateVersion:u5};class f5{}function nie(){return new f5}var wb={RetentionZone:f5,retentionZone:nie};function rie(n,e){const t=new Set(n);return t.add(e),t}function iie(n,e){const t=new Set(n);return t.delete(e),t}function sie(n,e,t){const r=new Map(n);return r.set(e,t),r}function oie(n,e,t){const r=new Map(n);return r.set(e,t(r.get(e))),r}function aie(n,e){const t=new Map(n);return t.delete(e),t}function lie(n,e){const t=new Map(n);return e.forEach(r=>t.delete(r)),t}var p5={setByAddingToSet:rie,setByDeletingFromSet:iie,mapBySettingInMap:sie,mapByUpdatingInMap:oie,mapByDeletingFromMap:aie,mapByDeletingMultipleFromMap:lie};function*cie(n,e){let t=0;for(const r of n)e(r,t++)&&(yield r)}var cP=cie;function uie(n,e){return new Proxy(n,{get:(r,i)=>(!(i in r)&&i in e&&(r[i]=e[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var m5=uie;const{getNode:_y,getNodeMaybe:hie,recoilValuesForKeys:QD}=Vi,{RetentionZone:JD}=wb,{setByAddingToSet:die}=p5,fie=Object.freeze(new Set);class pie extends Error{}function mie(n,e,t){if(!vn("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=n.getState().retention;function i(s){let o=r.get(s);o||r.set(s,o=new Set),o.add(e)}if(t instanceof JD)i(t);else if(Array.isArray(t))for(const s of t)i(s);return()=>{if(!vn("recoil_memory_managament_2020"))return;const{retention:s}=n.getState();function o(a){const l=s.nodesRetainedByZone.get(a);l==null||l.delete(e),l&&l.size===0&&s.nodesRetainedByZone.delete(a)}if(t instanceof JD)o(t);else if(Array.isArray(t))for(const a of t)o(a)}}function uP(n,e,t,r){const i=n.getState();if(i.nodeCleanupFunctions.has(t))return;const s=_y(t),o=mie(n,t,s.retainedBy),a=s.init(n,e,r);i.nodeCleanupFunctions.set(t,()=>{a(),o()})}function gie(n,e,t){uP(n,n.getState().currentTree,e,t)}function yie(n,e){var t;const r=n.getState();(t=r.nodeCleanupFunctions.get(e))===null||t===void 0||t(),r.nodeCleanupFunctions.delete(e)}function vie(n,e,t){return uP(n,e,t,"get"),_y(t).get(n,e)}function g5(n,e,t){return _y(t).peek(n,e)}function _ie(n,e,t){var r;const i=hie(e);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,n),{...n,atomValues:n.atomValues.clone().delete(e),nonvalidatedAtoms:n.nonvalidatedAtoms.clone().set(e,t),dirtyAtoms:die(n.dirtyAtoms,e)}}function xie(n,e,t,r){const i=_y(t);if(i.set==null)throw new pie(`Attempt to set read-only RecoilValue: ${t}`);const s=i.set;return uP(n,e,t,"set"),s(n,e,r)}function Sie(n,e,t){const r=n.getState(),i=n.getGraph(e.version),s=_y(t).nodeType;return m5({type:s},{loadable:()=>g5(n,e,t),isActive:()=>r.knownAtoms.has(t)||r.knownSelectors.has(t),isSet:()=>s==="selector"?!1:e.atomValues.has(t),isModified:()=>e.dirtyAtoms.has(t),deps:()=>{var o;return QD((o=i.nodeDeps.get(t))!==null&&o!==void 0?o:[])},subscribers:()=>{var o,a;return{nodes:QD(cP(y5(n,e,new Set([t])),l=>l!==t)),components:Sb((o=(a=r.nodeToComponentSubscriptions.get(t))===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[],([l])=>({name:l}))}}})}function y5(n,e,t){const r=new Set,i=Array.from(t),s=n.getGraph(e.version);for(let a=i.pop();a;a=i.pop()){var o;r.add(a);const l=(o=s.nodeToNodeSubscriptions.get(a))!==null&&o!==void 0?o:fie;for(const c of l)r.has(c)||i.push(c)}return r}var Rc={getNodeLoadable:vie,peekNodeLoadable:g5,setNodeValue:xie,initializeNode:gie,cleanUpNode:yie,setUnvalidatedAtomValue_DEPRECATED:_ie,peekNodeInfo:Sie,getDownstreamNodes:y5};let v5=null;function bie(n){v5=n}function wie(){var n;(n=v5)===null||n===void 0||n()}var _5={setInvalidateMemoizedSnapshot:bie,invalidateMemoizedSnapshot:wie};const{getDownstreamNodes:Tie,getNodeLoadable:x5,setNodeValue:Mie}=Rc,{getNextComponentID:Eie}=bb,{getNode:Cie,getNodeMaybe:S5}=Vi,{DefaultValue:hP}=Vi,{reactMode:Aie}=yy,{AbstractRecoilValue:Rie,RecoilState:Nie,RecoilValueReadOnly:Pie,isRecoilValue:Iie}=Pf,{invalidateMemoizedSnapshot:Lie}=_5;function Die(n,{key:e},t=n.getState().currentTree){var r,i;const s=n.getState();t.version===s.currentTree.version||t.version===((r=s.nextTree)===null||r===void 0?void 0:r.version)||(t.version,(i=s.previousTree)===null||i===void 0||i.version);const o=x5(n,t,e);return o.state==="loading"&&o.contents.catch(()=>{}),o}function Fie(n,e){const t=n.clone();return e.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof hP?t.delete(i):t.set(i,r)}),t}function Oie(n,e,{key:t},r){if(typeof r=="function"){const i=x5(n,e,t);if(i.state==="loading"){const s=`Tried to set atom or selector "${t}" using an updater function while the current state is pending, this is not currently supported.`;throw Rt(s)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function kie(n,e,t){if(t.type==="set"){const{recoilValue:i,valueOrUpdater:s}=t,o=Oie(n,e,i,s),a=Mie(n,e,i.key,o);for(const[l,c]of a.entries())aC(e,l,c)}else if(t.type==="setLoadable"){const{recoilValue:{key:i},loadable:s}=t;aC(e,i,s)}else if(t.type==="markModified"){const{recoilValue:{key:i}}=t;e.dirtyAtoms.add(i)}else if(t.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:s}=t,o=S5(i);o==null||(r=o.invalidate)===null||r===void 0||r.call(o,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,s),e.dirtyAtoms.add(i)}else iP(`Unknown action ${t.type}`)}function aC(n,e,t){t.state==="hasValue"&&t.contents instanceof hP?n.atomValues.delete(e):n.atomValues.set(e,t),n.dirtyAtoms.add(e),n.nonvalidatedAtoms.delete(e)}function b5(n,e){n.replaceState(t=>{const r=w5(t);for(const i of e)kie(n,r,i);return T5(n,r),Lie(),r})}function Tb(n,e){if(qm.length){const t=qm[qm.length-1];let r=t.get(n);r||t.set(n,r=[]),r.push(e)}else b5(n,[e])}const qm=[];function Uie(){const n=new Map;return qm.push(n),()=>{for(const[e,t]of n)b5(e,t);qm.pop()}}function w5(n){return{...n,atomValues:n.atomValues.clone(),nonvalidatedAtoms:n.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(n.dirtyAtoms)}}function T5(n,e){const t=Tie(n,e,e.dirtyAtoms);for(const s of t){var r,i;(r=S5(s))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,e)}}function M5(n,e,t){Tb(n,{type:"set",recoilValue:e,valueOrUpdater:t})}function Bie(n,e,t){if(t instanceof hP)return M5(n,e,t);Tb(n,{type:"setLoadable",recoilValue:e,loadable:t})}function zie(n,e){Tb(n,{type:"markModified",recoilValue:e})}function $ie(n,e,t){Tb(n,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:t})}function Vie(n,{key:e},t,r=null){const i=Eie(),s=n.getState();s.nodeToComponentSubscriptions.has(e)||s.nodeToComponentSubscriptions.set(e,new Map),Ln(s.nodeToComponentSubscriptions.get(e)).set(i,[r??"<not captured>",t]);const o=Aie();if(o.early&&(o.mode==="LEGACY"||o.mode==="MUTABLE_SOURCE")){const a=n.getState().nextTree;a&&a.dirtyAtoms.has(e)&&t(a)}return{release:()=>{const a=n.getState(),l=a.nodeToComponentSubscriptions.get(e);l===void 0||!l.has(i)||(l.delete(i),l.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function Gie(n,e){var t;const{currentTree:r}=n.getState(),i=Cie(e.key);(t=i.clearCache)===null||t===void 0||t.call(i,n,r)}var Jo={RecoilValueReadOnly:Pie,AbstractRecoilValue:Rie,RecoilState:Nie,getRecoilValueAsLoadable:Die,setRecoilValue:M5,setRecoilValueLoadable:Bie,markRecoilValueModified:zie,setUnvalidatedRecoilValue:$ie,subscribeToRecoilValue:Vie,isRecoilValue:Iie,applyAtomValueWrites:Fie,batchStart:Uie,writeLoadableToTreeState:aC,invalidateDownstreams:T5,copyTreeState:w5,refreshRecoilValue:Gie};function Hie(n,e,t){const r=n.entries();let i=r.next();for(;!i.done;){const s=i.value;if(e.call(t,s[1],s[0],n))return!0;i=r.next()}return!1}var Wie=Hie;const{cleanUpNode:jie}=Rc,{deleteNodeConfigIfPossible:qie,getNode:E5}=Vi,{RetentionZone:C5}=wb,Xie=12e4,A5=new Set;function R5(n,e){const t=n.getState(),r=t.currentTree;if(t.nextTree)return;const i=new Set;for(const o of e)if(o instanceof C5)for(const a of Qie(t,o))i.add(a);else i.add(o);const s=Kie(n,i);for(const o of s)Zie(n,r,o)}function Kie(n,e){const t=n.getState(),r=t.currentTree,i=n.getGraph(r.version),s=new Set,o=new Set;return a(e),s;function a(l){const c=new Set,u=Yie(n,r,l,s,o);for(const p of u){var h;if(E5(p).retainedBy==="recoilRoot"){o.add(p);continue}if(((h=t.retention.referenceCounts.get(p))!==null&&h!==void 0?h:0)>0){o.add(p);continue}if(N5(p).some(g=>t.retention.referenceCounts.get(g))){o.add(p);continue}const y=i.nodeToNodeSubscriptions.get(p);if(y&&Wie(y,g=>o.has(g))){o.add(p);continue}s.add(p),c.add(p)}const d=new Set;for(const p of c)for(const y of(f=i.nodeDeps.get(p))!==null&&f!==void 0?f:A5){var f;s.has(y)||d.add(y)}d.size&&a(d)}}function Yie(n,e,t,r,i){const s=n.getGraph(e.version),o=[],a=new Set;for(;t.size>0;)l(Ln(t.values().next().value));return o;function l(c){if(r.has(c)||i.has(c)){t.delete(c);return}if(a.has(c))return;const u=s.nodeToNodeSubscriptions.get(c);if(u)for(const h of u)l(h);a.add(c),t.delete(c),o.push(c)}}function Zie(n,e,t){if(!vn("recoil_memory_managament_2020"))return;jie(n,t);const r=n.getState();r.knownAtoms.delete(t),r.knownSelectors.delete(t),r.nodeTransactionSubscriptions.delete(t),r.retention.referenceCounts.delete(t);const i=N5(t);for(const l of i){var s;(s=r.retention.nodesRetainedByZone.get(l))===null||s===void 0||s.delete(t)}e.atomValues.delete(t),e.dirtyAtoms.delete(t),e.nonvalidatedAtoms.delete(t);const o=r.graphsByVersion.get(e.version);if(o){const l=o.nodeDeps.get(t);if(l!==void 0){o.nodeDeps.delete(t);for(const c of l){var a;(a=o.nodeToNodeSubscriptions.get(c))===null||a===void 0||a.delete(t)}}o.nodeToNodeSubscriptions.delete(t)}qie(t)}function Qie(n,e){var t;return(t=n.retention.nodesRetainedByZone.get(e))!==null&&t!==void 0?t:A5}function N5(n){const e=E5(n).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof C5?[e]:e}function Jie(n,e){const t=n.getState();t.nextTree?t.retention.retainablesToCheckForRelease.add(e):R5(n,new Set([e]))}function ese(n,e,t){var r;if(!vn("recoil_memory_managament_2020"))return;const i=n.getState().retention.referenceCounts,s=((r=i.get(e))!==null&&r!==void 0?r:0)+t;s===0?P5(n,e):i.set(e,s)}function P5(n,e){if(!vn("recoil_memory_managament_2020"))return;n.getState().retention.referenceCounts.delete(e),Jie(n,e)}function tse(n){if(!vn("recoil_memory_managament_2020"))return;const e=n.getState();R5(n,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function nse(n){return n===void 0?"recoilRoot":n}var ih={SUSPENSE_TIMEOUT_MS:Xie,updateRetainCount:ese,updateRetainCountToZero:P5,releaseScheduledRetainablesNow:tse,retainedByOptionWithDefault:nse};const{unstable_batchedUpdates:rse}=ym;var ise={unstable_batchedUpdates:rse};const{unstable_batchedUpdates:sse}=ise;var ose={unstable_batchedUpdates:sse};const{batchStart:ase}=Jo,{unstable_batchedUpdates:lse}=ose;let dP=lse||(n=>n());const cse=n=>{dP=n},use=()=>dP,hse=n=>{dP(()=>{let e=()=>{};try{e=ase(),n()}finally{e()}})};var Mb={getBatcher:use,setBatcher:cse,batchUpdates:hse};function*dse(n){for(const e of n)for(const t of e)yield t}var I5=dse;const L5=typeof Window>"u"||typeof window>"u",fse=n=>!L5&&(n===window||n instanceof Window),pse=typeof navigator<"u"&&navigator.product==="ReactNative";var Eb={isSSR:L5,isReactNative:pse,isWindow:fse};function mse(n,e){let t;return(...r)=>{t||(t={});const i=e(...r);return Object.hasOwnProperty.call(t,i)||(t[i]=n(...r)),t[i]}}function gse(n,e){let t,r;return(...i)=>{const s=e(...i);return t===s||(t=s,r=n(...i)),r}}function yse(n,e){let t,r;return[(...o)=>{const a=e(...o);return t===a||(t=a,r=n(...o)),r},()=>{t=null}]}var vse={memoizeWithArgsHash:mse,memoizeOneWithArgsHash:gse,memoizeOneWithArgsHashAndInvalidation:yse};const{batchUpdates:lC}=Mb,{initializeNode:_se,peekNodeInfo:xse}=Rc,{graph:Sse}=vy,{getNextStoreID:bse}=bb,{DEFAULT_VALUE:wse,recoilValues:eF,recoilValuesForKeys:tF}=Vi,{AbstractRecoilValue:Tse,getRecoilValueAsLoadable:Mse,setRecoilValue:nF,setUnvalidatedRecoilValue:Ese}=Jo,{updateRetainCount:i_}=ih,{setInvalidateMemoizedSnapshot:Cse}=_5,{getNextTreeStateVersion:Ase,makeEmptyStoreState:Rse}=d5,{isSSR:Nse}=Eb,{memoizeOneWithArgsHashAndInvalidation:Pse}=vse;class Cb{constructor(e,t){bt(this,"_store",void 0),bt(this,"_refCount",1),bt(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),Mse(this._store,r))),bt(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),bt(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const o=this._store.getState().currentTree;return tF(o.dirtyAtoms)}const i=this._store.getState().knownAtoms,s=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?eF.values():r.isInitialized===!0?tF(I5([i,s])):cP(eF.values(),({key:o})=>!i.has(o)&&!s.has(o))}),bt(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),xse(this._store,this._store.getState().currentTree,r))),bt(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new cC(this,lC);return r(i),i}),bt(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new cC(this,lC);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:bse(),parentStoreID:t,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const i=e.graphsByVersion;if(i.has(r))return Ln(i.get(r));const s=Sse();return i.set(r,s),s},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Rt("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)_se(this._store,r,"get"),i_(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){Nse||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!vn("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){vn("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function D5(n,e,t=!1){const r=n.getState(),i=t?Ase():e.version;return{currentTree:{version:t?i:e.version,stateID:t?i:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,n.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Sb(r.nodeCleanupFunctions.entries(),([s])=>[s,()=>{}]))}}function Ise(n){const e=new Cb(Rse());return n!=null?e.map(n):e}const[rF,F5]=Pse((n,e)=>{var t;const r=n.getState(),i=e==="latest"?(t=r.nextTree)!==null&&t!==void 0?t:r.currentTree:Ln(r.previousTree);return new Cb(D5(n,i),n.storeID)},(n,e)=>{var t,r;return String(e)+String(n.storeID)+String((t=n.getState().nextTree)===null||t===void 0?void 0:t.version)+String(n.getState().currentTree.version)+String((r=n.getState().previousTree)===null||r===void 0?void 0:r.version)});Cse(F5);function Lse(n,e="latest"){const t=rF(n,e);return t.isRetained()?t:(F5(),rF(n,e))}class cC extends Cb{constructor(e,t){super(D5(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),bt(this,"_batch",void 0),bt(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{i_(s,r.key,1),nF(this.getStore_INTERNAL(),r,i)})}),bt(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{i_(i,r.key,1),nF(this.getStore_INTERNAL(),r,wse)})}),bt(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();lC(()=>{for(const[s,o]of r.entries())i_(i,s,1),Ese(i,new Tse(s),o)})}),this._batch=t}}var Ab={Snapshot:Cb,MutableSnapshot:cC,freshSnapshot:Ise,cloneSnapshot:Lse},Dse=Ab.Snapshot,Fse=Ab.MutableSnapshot,Ose=Ab.freshSnapshot,kse=Ab.cloneSnapshot,Rb=Object.freeze({__proto__:null,Snapshot:Dse,MutableSnapshot:Fse,freshSnapshot:Ose,cloneSnapshot:kse});function Use(...n){const e=new Set;for(const t of n)for(const r of t)e.add(r);return e}var Bse=Use;const{useRef:zse}=Et;function $se(n){const e=zse(n);return e.current===n&&typeof n=="function"&&(e.current=n()),e}var iF=$se;const{getNextTreeStateVersion:Vse,makeEmptyStoreState:O5}=d5,{cleanUpNode:Gse,getDownstreamNodes:Hse,initializeNode:Wse,setNodeValue:jse,setUnvalidatedAtomValue_DEPRECATED:qse}=Rc,{graph:Xse}=vy,{cloneGraph:Kse}=vy,{getNextStoreID:k5}=bb,{createMutableSource:_w,reactMode:U5}=yy,{applyAtomValueWrites:Yse}=Jo,{releaseScheduledRetainablesNow:B5}=ih,{freshSnapshot:Zse}=Rb,{useCallback:Qse,useContext:z5,useEffect:uC,useMemo:Jse,useRef:eoe,useState:toe}=Et;function Ip(){throw Rt("This component must be used inside a <RecoilRoot> component.")}const $5=Object.freeze({storeID:k5(),getState:Ip,replaceState:Ip,getGraph:Ip,subscribeToTransactions:Ip,addTransactionMetadata:Ip});let hC=!1;function sF(n){if(hC)throw Rt("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=n.getState();if(e.nextTree===null){vn("recoil_memory_managament_2020")&&vn("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&B5(n);const t=e.currentTree.version,r=Vse();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,Kse(Ln(e.graphsByVersion.get(t))))}}const V5=Et.createContext({current:$5}),Nb=()=>z5(V5),G5=Et.createContext(null);function noe(){return z5(G5)}function fP(n,e,t){const r=Hse(n,t,t.dirtyAtoms);for(const i of r){const s=e.nodeToComponentSubscriptions.get(i);if(s)for(const[o,[a,l]]of s)l(t)}}function H5(n){const e=n.getState(),t=e.currentTree,r=t.dirtyAtoms;if(r.size){for(const[i,s]of e.nodeTransactionSubscriptions)if(r.has(i))for(const[o,a]of s)a(n);for(const[i,s]of e.transactionSubscriptions)s(n);(!U5().early||e.suspendedComponentResolvers.size>0)&&(fP(n,e,t),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(t)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function roe(n){const e=n.getState();e.commitDepth++;try{const{nextTree:t}=e;if(t==null)return;e.previousTree=e.currentTree,e.currentTree=t,e.nextTree=null,H5(n),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):iP("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,vn("recoil_memory_managament_2020")&&t==null&&B5(n)}finally{e.commitDepth--}}function ioe({setNotifyBatcherOfChange:n}){const e=Nb(),[,t]=toe([]);return n(()=>t({})),uC(()=>(n(()=>t({})),()=>{n(()=>{})}),[n]),uC(()=>{Ore.enqueueExecution("Batcher",()=>{roe(e.current)})}),null}function soe(n,e){const t=O5();return e({set:(r,i)=>{const s=t.currentTree,o=jse(n,s,r.key,i),a=new Set(o.keys()),l=s.nonvalidatedAtoms.clone();for(const c of a)l.delete(c);t.currentTree={...s,dirtyAtoms:Bse(s.dirtyAtoms,a),atomValues:Yse(s.atomValues,o),nonvalidatedAtoms:l}},setUnvalidatedAtomValues:r=>{r.forEach((i,s)=>{t.currentTree=qse(t.currentTree,s,i)})}}),t}function ooe(n){const e=Zse(n),t=e.getStore_INTERNAL().getState();return e.retain(),t.nodeCleanupFunctions.forEach(r=>r()),t.nodeCleanupFunctions.clear(),t}let oF=0;function aoe({initializeState_DEPRECATED:n,initializeState:e,store_INTERNAL:t,children:r}){let i;const s=f=>{const p=i.current.graphsByVersion;if(p.has(f))return Ln(p.get(f));const y=Xse();return p.set(f,y),y},o=(f,p)=>{if(p==null){const{transactionSubscriptions:y}=h.current.getState(),g=oF++;return y.set(g,f),{release:()=>{y.delete(g)}}}else{const{nodeTransactionSubscriptions:y}=h.current.getState();y.has(p)||y.set(p,new Map);const g=oF++;return Ln(y.get(p)).set(g,f),{release:()=>{const m=y.get(p);m&&(m.delete(g),m.size===0&&y.delete(p))}}}},a=f=>{sF(h.current);for(const p of Object.keys(f))Ln(h.current.getState().nextTree).transactionMetadata[p]=f[p]},l=f=>{sF(h.current);const p=Ln(i.current.nextTree);let y;try{hC=!0,y=f(p)}finally{hC=!1}y!==p&&(i.current.nextTree=y,U5().early&&fP(h.current,i.current,y),Ln(c.current)())},c=eoe(null),u=Qse(f=>{c.current=f},[c]),h=iF(()=>t??{storeID:k5(),getState:()=>i.current,replaceState:l,getGraph:s,subscribeToTransactions:o,addTransactionMetadata:a});t!=null&&(h.current=t),i=iF(()=>n!=null?soe(h.current,n):e!=null?ooe(e):O5());const d=Jse(()=>_w==null?void 0:_w(i,()=>i.current.currentTree.version),[i]);return uC(()=>{const f=h.current;for(const p of new Set(f.getState().knownAtoms))Wse(f,p,"get");return()=>{for(const p of f.getState().knownAtoms)Gse(f,p)}},[h]),Et.createElement(V5.Provider,{value:h},Et.createElement(G5.Provider,{value:d},Et.createElement(ioe,{setNotifyBatcherOfChange:u}),r))}function loe(n){const{override:e,...t}=n,r=Nb();return e===!1&&r.current!==$5?n.children:Et.createElement(aoe,t)}function coe(){return Nb().current.storeID}var ll={RecoilRoot:loe,useStoreRef:Nb,useRecoilMutableSource:noe,useRecoilStoreID:coe,notifyComponents_FOR_TESTING:fP,sendEndOfBatchNotifications_FOR_TESTING:H5};function uoe(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}var hoe=uoe;const{useEffect:doe,useRef:foe}=Et;function poe(n){const e=foe();return doe(()=>{e.current=n}),e.current}var W5=poe;const{useStoreRef:moe}=ll,{SUSPENSE_TIMEOUT_MS:goe}=ih,{updateRetainCount:Lp}=ih,{RetentionZone:yoe}=wb,{useEffect:voe,useRef:_oe}=Et,{isSSR:aF}=Eb;function xoe(n){if(vn("recoil_memory_managament_2020"))return Soe(n)}function Soe(n){const t=(Array.isArray(n)?n:[n]).map(o=>o instanceof yoe?o:o.key),r=moe();voe(()=>{if(!vn("recoil_memory_managament_2020"))return;const o=r.current;if(i.current&&!aF)window.clearTimeout(i.current),i.current=null;else for(const a of t)Lp(o,a,1);return()=>{for(const a of t)Lp(o,a,-1)}},[r,...t]);const i=_oe(),s=W5(t);if(!aF&&(s===void 0||!hoe(s,t))){const o=r.current;for(const a of t)Lp(o,a,1);if(s)for(const a of s)Lp(o,a,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const a of t)Lp(o,a,-1)},goe)}}var pP=xoe;function boe(){return"<component name not available>"}var xy=boe;const{batchUpdates:woe}=Mb,{DEFAULT_VALUE:j5}=Vi,{currentRendererSupportsUseSyncExternalStore:Toe,reactMode:ip,useMutableSource:Moe,useSyncExternalStore:Eoe}=yy,{useRecoilMutableSource:Coe,useStoreRef:ea}=ll,{AbstractRecoilValue:dC,getRecoilValueAsLoadable:Sy,setRecoilValue:xx,setUnvalidatedRecoilValue:Aoe,subscribeToRecoilValue:If}=Jo,{useCallback:Oi,useEffect:Lf,useMemo:q5,useRef:Xm,useState:mP}=Et,{setByAddingToSet:Roe}=p5,{isSSR:Noe}=Eb;function gP(n,e,t){if(n.state==="hasValue")return n.contents;throw n.state==="loading"?new Promise(i=>{const s=t.current.getState().suspendedComponentResolvers;s.add(i),Noe&&Cn(n.contents)&&n.contents.finally(()=>{s.delete(i)})}):n.state==="hasError"?n.contents:Rt(`Invalid value of loadable atom "${e.key}"`)}function Poe(){const n=xy(),e=ea(),[,t]=mP([]),r=Xm(new Set);r.current=new Set;const i=Xm(new Set),s=Xm(new Map),o=Oi(l=>{const c=s.current.get(l);c&&(c.release(),s.current.delete(l))},[s]),a=Oi((l,c)=>{s.current.has(c)&&t([])},[]);return Lf(()=>{const l=e.current;jm(r.current,i.current).forEach(c=>{if(s.current.has(c))return;const u=If(l,new dC(c),d=>a(d,c),n);s.current.set(c,u),l.getState().nextTree?l.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(l.getState(),c)}):a(l.getState(),c)}),jm(i.current,r.current).forEach(c=>{o(c)}),i.current=r.current}),Lf(()=>{const l=s.current;return jm(r.current,new Set(l.keys())).forEach(c=>{const u=If(e.current,new dC(c),h=>a(h,c),n);l.set(c,u)}),()=>l.forEach((c,u)=>o(u))},[n,e,o,a]),q5(()=>{function l(p){return y=>{xx(e.current,p,y)}}function c(p){return()=>xx(e.current,p,j5)}function u(p){var y;r.current.has(p.key)||(r.current=Roe(r.current,p.key));const g=e.current.getState();return Sy(e.current,p,ip().early&&(y=g.nextTree)!==null&&y!==void 0?y:g.currentTree)}function h(p){const y=u(p);return gP(y,p,e)}function d(p){return[h(p),l(p)]}function f(p){return[u(p),l(p)]}return{getRecoilValue:h,getRecoilValueLoadable:u,getRecoilState:d,getRecoilStateLoadable:f,getSetRecoilState:l,getResetRecoilState:c}},[r,e])}const Ioe={current:0};function Loe(n){const e=ea(),t=xy(),r=Oi(()=>{var a;const l=e.current,c=l.getState(),u=ip().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return{loadable:Sy(l,n,u),key:n.key}},[e,n]),i=Oi(a=>{let l;return()=>{var c,u;const h=a();return(c=l)!==null&&c!==void 0&&c.loadable.is(h.loadable)&&((u=l)===null||u===void 0?void 0:u.key)===h.key?l:(l=h,h)}},[]),s=q5(()=>i(r),[r,i]),o=Oi(a=>{const l=e.current;return If(l,n,a,t).release},[e,n,t]);return Eoe(o,s,s).loadable}function Doe(n){const e=ea(),t=Oi(()=>{var c;const u=e.current,h=u.getState(),d=ip().early&&(c=h.nextTree)!==null&&c!==void 0?c:h.currentTree;return Sy(u,n,d)},[e,n]),r=Oi(()=>t(),[t]),i=xy(),s=Oi((c,u)=>{const h=e.current;return If(h,n,()=>{if(!vn("recoil_suppress_rerender_in_callback"))return u();const f=t();l.current.is(f)||u(),l.current=f},i).release},[e,n,i,t]),o=Coe();if(o==null)throw Rt("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=Moe(o,r,s),l=Xm(a);return Lf(()=>{l.current=a}),a}function fC(n){const e=ea(),t=xy(),r=Oi(()=>{var l;const c=e.current,u=c.getState(),h=ip().early&&(l=u.nextTree)!==null&&l!==void 0?l:u.currentTree;return Sy(c,n,h)},[e,n]),i=Oi(()=>({loadable:r(),key:n.key}),[r,n.key]),s=Oi(l=>{const c=i();return l.loadable.is(c.loadable)&&l.key===c.key?l:c},[i]);Lf(()=>{const l=If(e.current,n,c=>{a(s)},t);return a(s),l.release},[t,n,e,s]);const[o,a]=mP(i);return o.key!==n.key?i().loadable:o.loadable}function Foe(n){const e=ea(),[,t]=mP([]),r=xy(),i=Oi(()=>{var a;const l=e.current,c=l.getState(),u=ip().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return Sy(l,n,u)},[e,n]),s=i(),o=Xm(s);return Lf(()=>{o.current=s}),Lf(()=>{const a=e.current,l=a.getState(),c=If(a,n,h=>{var d;if(!vn("recoil_suppress_rerender_in_callback"))return t([]);const f=i();(d=o.current)!==null&&d!==void 0&&d.is(f)||t(f),o.current=f},r);if(l.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{o.current=null,t([])});else{var u;if(!vn("recoil_suppress_rerender_in_callback"))return t([]);const h=i();(u=o.current)!==null&&u!==void 0&&u.is(h)||t(h),o.current=h}return c.release},[r,i,n,e]),s}function yP(n){return vn("recoil_memory_managament_2020")&&pP(n),{TRANSITION_SUPPORT:fC,SYNC_EXTERNAL_STORE:Toe()?Loe:fC,MUTABLE_SOURCE:Doe,LEGACY:Foe}[ip().mode](n)}function X5(n){const e=ea(),t=yP(n);return gP(t,n,e)}function Pb(n){const e=ea();return Oi(t=>{xx(e.current,n,t)},[e,n])}function Ooe(n){const e=ea();return Oi(()=>{xx(e.current,n,j5)},[e,n])}function koe(n){return[X5(n),Pb(n)]}function Uoe(n){return[yP(n),Pb(n)]}function Boe(){const n=ea();return(e,t={})=>{woe(()=>{n.current.addTransactionMetadata(t),e.forEach((r,i)=>Aoe(n.current,new dC(i),r))})}}function K5(n){return vn("recoil_memory_managament_2020")&&pP(n),fC(n)}function Y5(n){const e=ea(),t=K5(n);return gP(t,n,e)}function zoe(n){return[Y5(n),Pb(n)]}var $oe={recoilComponentGetRecoilValueCount_FOR_TESTING:Ioe,useRecoilInterface:Poe,useRecoilState:koe,useRecoilStateLoadable:Uoe,useRecoilValue:X5,useRecoilValueLoadable:yP,useResetRecoilState:Ooe,useSetRecoilState:Pb,useSetUnvalidatedAtomValues:Boe,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:K5,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Y5,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:zoe};function Voe(n,e){const t=new Map;for(const[r,i]of n)e(i,r)&&t.set(r,i);return t}var Goe=Voe;function Hoe(n,e){const t=new Set;for(const r of n)e(r)&&t.add(r);return t}var Woe=Hoe;function joe(...n){const e=new Map;for(let t=0;t<n.length;t++){const r=n[t].keys();let i;for(;!(i=r.next()).done;)e.set(i.value,n[t].get(i.value))}return e}var qoe=joe;const{batchUpdates:Xoe}=Mb,{DEFAULT_VALUE:Koe,getNode:Z5,nodes:Yoe}=Vi,{useStoreRef:vP}=ll,{AbstractRecoilValue:Zoe,setRecoilValueLoadable:Qoe}=Jo,{SUSPENSE_TIMEOUT_MS:Joe}=ih,{cloneSnapshot:Sx}=Rb,{useCallback:Ib,useEffect:Q5,useRef:lF,useState:eae}=Et,{isSSR:cF}=Eb;function Lb(n){const e=vP();Q5(()=>e.current.subscribeToTransactions(n).release,[n,e])}function uF(n){const e=n.atomValues.toMap(),t=_x(Goe(e,(r,i)=>{const o=Z5(i).persistence_UNSTABLE;return o!=null&&o.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return qoe(n.nonvalidatedAtoms.toMap(),t)}function tae(n){Lb(Ib(e=>{let t=e.getState().previousTree;const r=e.getState().currentTree;t||(t=e.getState().currentTree);const i=uF(r),s=uF(t),o=_x(Yoe,l=>{var c,u,h,d;return{persistence_UNSTABLE:{type:(c=(u=l.persistence_UNSTABLE)===null||u===void 0?void 0:u.type)!==null&&c!==void 0?c:"none",backButton:(h=(d=l.persistence_UNSTABLE)===null||d===void 0?void 0:d.backButton)!==null&&h!==void 0?h:!1}}}),a=Woe(r.dirtyAtoms,l=>i.has(l)||s.has(l));n({atomValues:i,previousAtomValues:s,atomInfo:o,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[n]))}function nae(n){Lb(Ib(e=>{const t=Sx(e,"latest"),r=Sx(e,"previous");n({snapshot:t,previousSnapshot:r})},[n]))}function rae(){const n=vP(),[e,t]=eae(()=>Sx(n.current)),r=W5(e),i=lF(),s=lF();if(Lb(Ib(a=>t(Sx(a)),[])),Q5(()=>{const a=e.retain();if(i.current&&!cF){var l;window.clearTimeout(i.current),i.current=null,(l=s.current)===null||l===void 0||l.call(s),s.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!cF){if(i.current){var o;window.clearTimeout(i.current),i.current=null,(o=s.current)===null||o===void 0||o.call(s),s.current=null}s.current=e.retain(),i.current=window.setTimeout(()=>{var a;i.current=null,(a=s.current)===null||a===void 0||a.call(s),s.current=null},Joe)}return e}function J5(n,e){var t;const r=n.getState(),i=(t=r.nextTree)!==null&&t!==void 0?t:r.currentTree,s=e.getStore_INTERNAL().getState().currentTree;Xoe(()=>{const o=new Set;for(const c of[i.atomValues.keys(),s.atomValues.keys()])for(const u of c){var a,l;((a=i.atomValues.get(u))===null||a===void 0?void 0:a.contents)!==((l=s.atomValues.get(u))===null||l===void 0?void 0:l.contents)&&Z5(u).shouldRestoreFromSnapshots&&o.add(u)}o.forEach(c=>{Qoe(n,new Zoe(c),s.atomValues.has(c)?Ln(s.atomValues.get(c)):Koe)}),n.replaceState(c=>({...c,stateID:e.getID()}))})}function iae(){const n=vP();return Ib(e=>J5(n.current,e),[n])}var eV={useRecoilSnapshot:rae,gotoSnapshot:J5,useGotoRecoilSnapshot:iae,useRecoilTransactionObserver:nae,useTransactionObservation_DEPRECATED:tae,useTransactionSubscription_DEPRECATED:Lb};const{peekNodeInfo:sae}=Rc,{useStoreRef:oae}=ll;function aae(){const n=oae();return({key:e})=>sae(n.current,n.current.getState().currentTree,e)}var lae=aae;const{reactMode:cae}=yy,{RecoilRoot:uae,useStoreRef:hae}=ll,{useMemo:dae}=Et;function fae(){cae().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const n=hae().current;return dae(()=>{function e({children:t}){return Et.createElement(uae,{store_INTERNAL:n},t)}return e},[n])}var pae=fae;const{loadableWithValue:mae}=gy,{initializeNode:gae}=Rc,{DEFAULT_VALUE:yae,getNode:vae}=Vi,{copyTreeState:_ae,getRecoilValueAsLoadable:xae,invalidateDownstreams:Sae,writeLoadableToTreeState:bae}=Jo;function hF(n){return vae(n.key).nodeType==="atom"}class wae{constructor(e,t){bt(this,"_store",void 0),bt(this,"_treeState",void 0),bt(this,"_changes",void 0),bt(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!hF(r))throw Rt("Reading selectors within atomicUpdate is not supported");const i=xae(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:Rt(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),bt(this,"set",(r,i)=>{if(!hF(r))throw Rt("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const s=this.get(r);this._changes.set(r.key,i(s))}else gae(this._store,r.key,"set"),this._changes.set(r.key,i)}),bt(this,"reset",r=>{this.set(r,yae)}),this._store=e,this._treeState=t,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=_ae(this._treeState);for(const[t,r]of this._changes)bae(e,t,mae(r));return Sae(this._store,e),e}}function Tae(n){return e=>{n.replaceState(t=>{const r=new wae(n,t);return e(r),r.newTreeState_INTERNAL()})}}var Mae={atomicUpdater:Tae},Eae=Mae.atomicUpdater,tV=Object.freeze({__proto__:null,atomicUpdater:Eae});function Cae(n,e){if(!n)throw new Error(e)}var Aae=Cae,Tm=Aae;const{atomicUpdater:Rae}=tV,{batchUpdates:Nae}=Mb,{DEFAULT_VALUE:Pae}=Vi,{useStoreRef:Iae}=ll,{refreshRecoilValue:Lae,setRecoilValue:dF}=Jo,{cloneSnapshot:Dae}=Rb,{gotoSnapshot:Fae}=eV,{useCallback:Oae}=Et;class nV{}const kae=new nV;function rV(n,e,t,r){let i=kae,s;if(Nae(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw Rt(a);const l=m5({...r??{},set:(u,h)=>dF(n,u,h),reset:u=>dF(n,u,Pae),refresh:u=>Lae(n,u),gotoSnapshot:u=>Fae(n,u),transact_UNSTABLE:u=>Rae(n)(u)},{snapshot:()=>{const u=Dae(n);return s=u.retain(),u}}),c=e(l);if(typeof c!="function")throw Rt(a);i=c(...t)}),i instanceof nV&&Tm(!1),Cn(i))i=i.finally(()=>{var a;(a=s)===null||a===void 0||a()});else{var o;(o=s)===null||o===void 0||o()}return i}function Uae(n,e){const t=Iae();return Oae((...r)=>rV(t.current,n,r),e!=null?[...e,t]:void 0)}var iV={recoilCallback:rV,useRecoilCallback:Uae};const{useStoreRef:Bae}=ll,{refreshRecoilValue:zae}=Jo,{useCallback:$ae}=Et;function Vae(n){const e=Bae();return $ae(()=>{const t=e.current;zae(t,n)},[n,e])}var Gae=Vae;const{atomicUpdater:Hae}=tV,{useStoreRef:Wae}=ll,{useMemo:jae}=Et;function qae(n,e){const t=Wae();return jae(()=>(...r)=>{Hae(t.current)(s=>{n(s)(...r)})},e!=null?[...e,t]:void 0)}var Xae=qae;class Kae{constructor(e){bt(this,"value",void 0),this.value=e}}var Yae={WrappedValue:Kae},Zae=Yae.WrappedValue,sV=Object.freeze({__proto__:null,WrappedValue:Zae});const{isFastRefreshEnabled:Qae}=yy;class fF extends Error{}class Jae{constructor(e){var t,r,i;bt(this,"_name",void 0),bt(this,"_numLeafs",void 0),bt(this,"_root",void 0),bt(this,"_onHit",void 0),bt(this,"_onSet",void 0),bt(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(t=e==null?void 0:e.onHit)!==null&&t!==void 0?t:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:s=>s}size(){return this._numLeafs}root(){return this._root}get(e,t){var r;return(r=this.getLeafNode(e,t))===null||r===void 0?void 0:r.value}getLeafNode(e,t){if(this._root==null)return;let r=this._root;for(;r;){if(t==null||t.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(i)}}set(e,t,r){const i=()=>{var s,o,a,l;let c,u;for(const[g,m]of e){var h,d,f;const _=this._root;if((_==null?void 0:_.type)==="leaf")throw this.invalidCacheError();const v=c;if(c=v?v.branches.get(u):_,c=(h=c)!==null&&h!==void 0?h:{type:"branch",nodeKey:g,parent:v,branches:new Map,branchKey:u},c.type!=="branch"||c.nodeKey!==g)throw this.invalidCacheError();v==null||v.branches.set(u,c),r==null||(d=r.onNodeVisit)===null||d===void 0||d.call(r,c),u=this._mapNodeValue(m),this._root=(f=this._root)!==null&&f!==void 0?f:c}const p=c?(s=c)===null||s===void 0?void 0:s.branches.get(u):this._root;if(p!=null&&(p.type!=="leaf"||p.branchKey!==u))throw this.invalidCacheError();const y={type:"leaf",value:t,parent:c,branchKey:u};(o=c)===null||o===void 0||o.branches.set(u,y),this._root=(a=this._root)!==null&&a!==void 0?a:y,this._numLeafs++,this._onSet(y),r==null||(l=r.onNodeVisit)===null||l===void 0||l.call(r,y)};try{i()}catch(s){if(s instanceof fF)this.clear(),i();else throw s}}delete(e){const t=this.root();if(!t)return!1;if(e===t)return this._root=null,this._numLeafs=0,!0;let r=e.parent,i=e.branchKey;for(;r;){var s;if(r.branches.delete(i),r===t)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(s=r)===null||s===void 0?void 0:s.branchKey,r=r.parent}for(;r!==t;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=Qae()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw iP(e+(this._name!=null?` - ${this._name}`:"")),new fF}}var ele={TreeCache:Jae},tle=ele.TreeCache,oV=Object.freeze({__proto__:null,TreeCache:tle});class nle{constructor(e){var t;bt(this,"_maxSize",void 0),bt(this,"_size",void 0),bt(this,"_head",void 0),bt(this,"_tail",void 0),bt(this,"_map",void 0),bt(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(t=e.mapKey)!==null&&t!==void 0?t:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const t=this._keyMapper(e),r=this._map.get(t);if(r)return this.set(e,r.value),r.value}set(e,t){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const s=this.head(),o={key:e,right:s,left:null,value:t};s?s.left=o:this._tail=o,this._map.set(r,o),this._head=o,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const t=this._keyMapper(e);if(!this._size||!this._map.has(t))return;const r=Ln(this._map.get(t)),i=r.right,s=r.left;i&&(i.left=r.left),s&&(s.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=s),this._map.delete(t),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var rle={LRUCache:nle},ile=rle.LRUCache,aV=Object.freeze({__proto__:null,LRUCache:ile});const{LRUCache:sle}=aV,{TreeCache:ole}=oV;function ale({name:n,maxSize:e,mapNodeValue:t=r=>r}){const r=new sle({maxSize:e}),i=new ole({name:n,mapNodeValue:t,onHit:s=>{r.set(s,!0)},onSet:s=>{const o=r.tail();r.set(s,!0),o&&i.size()>e&&i.delete(o.key)}});return i}var pF=ale;function Js(n,e,t){if(typeof n=="string"&&!n.includes('"')&&!n.includes("\\"))return`"${n}"`;switch(typeof n){case"undefined":return"";case"boolean":return n?"true":"false";case"number":case"symbol":return String(n);case"string":return JSON.stringify(n);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw Rt("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${n.name})__`}if(n===null)return"null";if(typeof n!="object"){var r;return(r=JSON.stringify(n))!==null&&r!==void 0?r:""}if(Cn(n))return"__PROMISE__";if(Array.isArray(n))return`[${n.map((i,s)=>Js(i,e,s.toString()))}]`;if(typeof n.toJSON=="function")return Js(n.toJSON(t),e,t);if(n instanceof Map){const i={};for(const[s,o]of n)i[typeof s=="string"?s:Js(s,e)]=o;return Js(i,e,t)}return n instanceof Set?Js(Array.from(n).sort((i,s)=>Js(i,e).localeCompare(Js(s,e))),e,t):Symbol!==void 0&&n[Symbol.iterator]!=null&&typeof n[Symbol.iterator]=="function"?Js(Array.from(n),e,t):`{${Object.keys(n).filter(i=>n[i]!==void 0).sort().map(i=>`${Js(i,e)}:${Js(n[i],e,i)}`).join(",")}}`}function lle(n,e={allowFunctions:!1}){return Js(n,e)}var Db=lle;const{TreeCache:cle}=oV,m0={equality:"reference",eviction:"keep-all",maxSize:1/0};function ule({equality:n=m0.equality,eviction:e=m0.eviction,maxSize:t=m0.maxSize}=m0,r){const i=hle(n);return dle(e,t,i,r)}function hle(n){switch(n){case"reference":return e=>e;case"value":return e=>Db(e)}throw Rt(`Unrecognized equality policy ${n}`)}function dle(n,e,t,r){switch(n){case"keep-all":return new cle({name:r,mapNodeValue:t});case"lru":return pF({name:r,maxSize:Ln(e),mapNodeValue:t});case"most-recent":return pF({name:r,maxSize:1,mapNodeValue:t})}throw Rt(`Unrecognized eviction policy ${n}`)}var fle=ule;function ple(n){return()=>null}var mle={startPerfBlock:ple};const{isLoadable:gle,loadableWithError:g0,loadableWithPromise:yle,loadableWithValue:xw}=gy,{WrappedValue:lV}=sV,{getNodeLoadable:y0,peekNodeLoadable:vle,setNodeValue:_le}=Rc,{saveDepsToStore:xle}=vy,{DEFAULT_VALUE:Sle,getConfigDeletionHandler:ble,getNode:wle,registerNode:mF}=Vi,{isRecoilValue:Tle}=Pf,{markRecoilValueModified:gF}=Jo,{retainedByOptionWithDefault:Mle}=ih,{recoilCallback:Ele}=iV,{startPerfBlock:Cle}=mle;class cV{}const Dp=new cV,Fp=[],v0=new Map,Ale=(()=>{let n=0;return()=>n++})();function uV(n){let e=null;const{key:t,get:r,cachePolicy_UNSTABLE:i}=n,s=n.set!=null?n.set:void 0,o=new Set,a=fle(i??{equality:"reference",eviction:"keep-all"},t),l=Mle(n.retainedBy_UNSTABLE),c=new Map;let u=0;function h(){return!vn("recoil_memory_managament_2020")||u>0}function d(U){return U.getState().knownSelectors.add(t),u++,()=>{u--}}function f(){return ble(t)!==void 0&&!h()}function p(U,te,k,V,Q){D(te,V,Q),y(U,k)}function y(U,te){N(U,te)&&O(U),m(te,!0)}function g(U,te){N(U,te)&&(Ln(S(U)).stateVersions.clear(),m(te,!1))}function m(U,te){const k=v0.get(U);if(k!=null){for(const V of k)gF(V,Ln(e));te&&v0.delete(U)}}function _(U,te){let k=v0.get(te);k==null&&v0.set(te,k=new Set),k.add(U)}function v(U,te,k,V,Q,le){return te.then(pe=>{if(!h())throw O(U),Dp;const ue=xw(pe);return p(U,k,Q,ue,V),pe}).catch(pe=>{if(!h())throw O(U),Dp;if(Cn(pe))return x(U,pe,k,V,Q,le);const ue=g0(pe);throw p(U,k,Q,ue,V),pe})}function x(U,te,k,V,Q,le){return te.then(pe=>{if(!h())throw O(U),Dp;le.loadingDepKey!=null&&le.loadingDepPromise===te?k.atomValues.set(le.loadingDepKey,xw(pe)):U.getState().knownSelectors.forEach(we=>{k.atomValues.delete(we)});const ue=w(U,k);if(ue&&ue.state!=="loading"){if((N(U,Q)||S(U)==null)&&y(U,Q),ue.state==="hasValue")return ue.contents;throw ue.contents}if(!N(U,Q)){const we=A(U,k);if(we!=null)return we.loadingLoadable.contents}const[be,Pe]=T(U,k,Q);if(be.state!=="loading"&&p(U,k,Q,be,Pe),be.state==="hasError")throw be.contents;return be.contents}).catch(pe=>{if(pe instanceof cV)throw Dp;if(!h())throw O(U),Dp;const ue=g0(pe);throw p(U,k,Q,ue,V),pe})}function b(U,te,k,V){var Q,le,pe,ue;if(N(U,V)||te.version===((Q=U.getState())===null||Q===void 0||(le=Q.currentTree)===null||le===void 0?void 0:le.version)||te.version===((pe=U.getState())===null||pe===void 0||(ue=pe.nextTree)===null||ue===void 0?void 0:ue.version)){var be,Pe,we;xle(t,k,U,(be=(Pe=U.getState())===null||Pe===void 0||(we=Pe.nextTree)===null||we===void 0?void 0:we.version)!==null&&be!==void 0?be:U.getState().currentTree.version)}for(const G of k)o.add(G)}function T(U,te,k){const V=Cle(t);let Q=!0,le=!0;const pe=()=>{V(),le=!1};let ue,be=!1,Pe;const we={loadingDepKey:null,loadingDepPromise:null},G=new Map;function He({key:Ze}){const De=y0(U,te,Ze);switch(G.set(Ze,De),Q||(b(U,te,new Set(G.keys()),k),g(U,k)),De.state){case"hasValue":return De.contents;case"hasError":throw De.contents;case"loading":throw we.loadingDepKey=Ze,we.loadingDepPromise=De.contents,De.contents}throw Rt("Invalid Loadable state")}const $e=Ze=>(...De)=>{if(le)throw Rt("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&Tm(!1),Ele(U,Ze,De,{node:e})};try{ue=r({get:He,getCallback:$e}),ue=Tle(ue)?He(ue):ue,gle(ue)&&(ue.state==="hasError"&&(be=!0),ue=ue.contents),Cn(ue)?ue=v(U,ue,te,G,k,we).finally(pe):pe(),ue=ue instanceof lV?ue.value:ue}catch(Ze){ue=Ze,Cn(ue)?ue=x(U,ue,te,G,k,we).finally(pe):(be=!0,pe())}return be?Pe=g0(ue):Cn(ue)?Pe=yle(ue):Pe=xw(ue),Q=!1,I(U,k,G),b(U,te,new Set(G.keys()),k),[Pe,G]}function w(U,te){let k=te.atomValues.get(t);if(k!=null)return k;const V=new Set;try{k=a.get(le=>(typeof le!="string"&&Tm(!1),y0(U,te,le).contents),{onNodeVisit:le=>{le.type==="branch"&&le.nodeKey!==t&&V.add(le.nodeKey)}})}catch(le){throw Rt(`Problem with cache lookup for selector "${t}": ${le.message}`)}if(k){var Q;te.atomValues.set(t,k),b(U,te,V,(Q=S(U))===null||Q===void 0?void 0:Q.executionID)}return k}function M(U,te){const k=w(U,te);if(k!=null)return O(U),k;const V=A(U,te);if(V!=null){var Q;return((Q=V.loadingLoadable)===null||Q===void 0?void 0:Q.state)==="loading"&&_(U,V.executionID),V.loadingLoadable}const le=Ale(),[pe,ue]=T(U,te,le);return pe.state==="loading"?(E(U,le,pe,ue,te),_(U,le)):(O(U),D(te,pe,ue)),pe}function A(U,te){const k=I5([c.has(U)?[Ln(c.get(U))]:[],Sb(cP(c,([Q])=>Q!==U),([,Q])=>Q)]);function V(Q){for(const[le,pe]of Q)if(!y0(U,te,le).is(pe))return!0;return!1}for(const Q of k){if(Q.stateVersions.get(te.version)||!V(Q.depValuesDiscoveredSoFarDuringAsyncWork))return Q.stateVersions.set(te.version,!0),Q;Q.stateVersions.set(te.version,!1)}}function S(U){return c.get(U)}function E(U,te,k,V,Q){c.set(U,{depValuesDiscoveredSoFarDuringAsyncWork:V,executionID:te,loadingLoadable:k,stateVersions:new Map([[Q.version,!0]])})}function I(U,te,k){if(N(U,te)){const V=S(U);V!=null&&(V.depValuesDiscoveredSoFarDuringAsyncWork=k)}}function O(U){c.delete(U)}function N(U,te){var k;return te===((k=S(U))===null||k===void 0?void 0:k.executionID)}function R(U){return Array.from(U.entries()).map(([te,k])=>[te,k.contents])}function D(U,te,k){U.atomValues.set(t,te);try{a.set(R(k),te)}catch(V){throw Rt(`Problem with setting cache for selector "${t}": ${V.message}`)}}function q(U){if(Fp.includes(t)){const te=`Recoil selector has circular dependencies: ${Fp.slice(Fp.indexOf(t)).join(" → ")}`;return g0(Rt(te))}Fp.push(t);try{return U()}finally{Fp.pop()}}function L(U,te){const k=te.atomValues.get(t);return k??a.get(V=>{var Q;return typeof V!="string"&&Tm(!1),(Q=vle(U,te,V))===null||Q===void 0?void 0:Q.contents})}function j(U,te){return q(()=>M(U,te))}function z(U){U.atomValues.delete(t)}function K(U,te){e==null&&Tm(!1);for(const V of o){var k;const Q=wle(V);(k=Q.clearCache)===null||k===void 0||k.call(Q,U,te)}o.clear(),z(te),a.clear(),gF(U,e)}return s!=null?e=mF({key:t,nodeType:"selector",peek:L,get:j,set:(te,k,V)=>{let Q=!1;const le=new Map;function pe({key:we}){if(Q)throw Rt("Recoil: Async selector sets are not currently supported.");const G=y0(te,k,we);if(G.state==="hasValue")return G.contents;if(G.state==="loading"){const He=`Getting value of asynchronous atom or selector "${we}" in a pending state while setting selector "${t}" is not yet supported.`;throw Rt(He)}else throw G.contents}function ue(we,G){if(Q)throw Rt("Recoil: Async selector sets are not currently supported.");const He=typeof G=="function"?G(pe(we)):G;_le(te,k,we.key,He).forEach((Ze,De)=>le.set(De,Ze))}function be(we){ue(we,Sle)}const Pe=s({set:ue,get:pe,reset:be},V);if(Pe!==void 0)throw Cn(Pe)?Rt("Recoil: Async selector sets are not currently supported."):Rt("Recoil: selector set should be a void function.");return Q=!0,le},init:d,invalidate:z,clearCache:K,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:n.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):e=mF({key:t,nodeType:"selector",peek:L,get:j,init:d,invalidate:z,clearCache:K,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:n.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}uV.value=n=>new lV(n);var Df=uV;const{isLoadable:Rle,loadableWithError:Sw,loadableWithPromise:bw,loadableWithValue:xh}=gy,{WrappedValue:hV}=sV,{peekNodeInfo:Nle}=Rc,{DEFAULT_VALUE:au,DefaultValue:Ul,getConfigDeletionHandler:dV,registerNode:Ple,setConfigDeletionHandler:Ile}=Vi,{isRecoilValue:Lle}=Pf,{getRecoilValueAsLoadable:Dle,markRecoilValueModified:Fle,setRecoilValue:yF,setRecoilValueLoadable:Ole}=Jo,{retainedByOptionWithDefault:kle}=ih,Op=n=>n instanceof hV?n.value:n;function Ule(n){const{key:e,persistence_UNSTABLE:t}=n,r=kle(n.retainedBy_UNSTABLE);let i=0;function s(_){return bw(_.then(v=>(o=xh(v),v)).catch(v=>{throw o=Sw(v),v}))}let o=Cn(n.default)?s(n.default):Rle(n.default)?n.default.state==="loading"?s(n.default.contents):n.default:xh(Op(n.default));o.contents;let a;const l=new Map;function c(_){return _}function u(_,v){const x=v.then(b=>{var T,w;return((w=((T=_.getState().nextTree)!==null&&T!==void 0?T:_.getState().currentTree).atomValues.get(e))===null||w===void 0?void 0:w.contents)===x&&yF(_,m,b),b}).catch(b=>{var T,w;throw((w=((T=_.getState().nextTree)!==null&&T!==void 0?T:_.getState().currentTree).atomValues.get(e))===null||w===void 0?void 0:w.contents)===x&&Ole(_,m,Sw(b)),b});return x}function h(_,v,x){var b;i++;const T=()=>{var S;i--,(S=l.get(_))===null||S===void 0||S.forEach(E=>E()),l.delete(_)};if(_.getState().knownAtoms.add(e),o.state==="loading"){const S=()=>{var E;((E=_.getState().nextTree)!==null&&E!==void 0?E:_.getState().currentTree).atomValues.has(e)||Fle(_,m)};o.contents.finally(S)}const w=(b=n.effects)!==null&&b!==void 0?b:n.effects_UNSTABLE;if(w!=null){let S=function(z){if(N&&z.key===e){const K=O;return K instanceof Ul?d(_,v):Cn(K)?bw(K.then(U=>U instanceof Ul?o.toPromise():U)):xh(K)}return Dle(_,z)},E=function(z){return S(z).toPromise()},I=function(z){var K;const U=Nle(_,(K=_.getState().nextTree)!==null&&K!==void 0?K:_.getState().currentTree,z.key);return N&&z.key===e&&!(O instanceof Ul)?{...U,isSet:!0,loadable:S(z)}:U},O=au,N=!0,R=!1,D=null;const q=z=>K=>{if(N){const U=S(m),te=U.state==="hasValue"?U.contents:au;O=typeof K=="function"?K(te):K,Cn(O)&&(O=O.then(k=>(D={effect:z,value:k},k)))}else{if(Cn(K))throw Rt("Setting atoms to async values is not implemented.");typeof K!="function"&&(D={effect:z,value:Op(K)}),yF(_,m,typeof K=="function"?U=>{const te=Op(K(U));return D={effect:z,value:te},te}:Op(K))}},L=z=>()=>q(z)(au),j=z=>K=>{var U;const{release:te}=_.subscribeToTransactions(k=>{var V;let{currentTree:Q,previousTree:le}=k.getState();le||(le=Q);const pe=(V=Q.atomValues.get(e))!==null&&V!==void 0?V:o;if(pe.state==="hasValue"){var ue,be,Pe,we;const G=pe.contents,He=(ue=le.atomValues.get(e))!==null&&ue!==void 0?ue:o,$e=He.state==="hasValue"?He.contents:au;((be=D)===null||be===void 0?void 0:be.effect)!==z||((Pe=D)===null||Pe===void 0?void 0:Pe.value)!==G?K(G,$e,!Q.atomValues.has(e)):((we=D)===null||we===void 0?void 0:we.effect)===z&&(D=null)}},e);l.set(_,[...(U=l.get(_))!==null&&U!==void 0?U:[],te])};for(const z of w)try{const K=z({node:m,storeID:_.storeID,parentStoreID_UNSTABLE:_.parentStoreID,trigger:x,setSelf:q(z),resetSelf:L(z),onSet:j(z),getPromise:E,getLoadable:S,getInfo_UNSTABLE:I});if(K!=null){var M;l.set(_,[...(M=l.get(_))!==null&&M!==void 0?M:[],K])}}catch(K){O=K,R=!0}if(N=!1,!(O instanceof Ul)){var A;const z=R?Sw(O):Cn(O)?bw(u(_,O)):xh(Op(O));z.contents,v.atomValues.set(e,z),(A=_.getState().nextTree)===null||A===void 0||A.atomValues.set(e,z)}}return T}function d(_,v){var x,b;return(x=(b=v.atomValues.get(e))!==null&&b!==void 0?b:a)!==null&&x!==void 0?x:o}function f(_,v){if(v.atomValues.has(e))return Ln(v.atomValues.get(e));if(v.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(t==null)return o;const x=v.nonvalidatedAtoms.get(e),b=t.validator(x,au);return a=b instanceof Ul?o:xh(b),a}else return o}function p(){a=void 0}function y(_,v,x){if(v.atomValues.has(e)){const b=Ln(v.atomValues.get(e));if(b.state==="hasValue"&&x===b.contents)return new Map}else if(!v.nonvalidatedAtoms.has(e)&&x instanceof Ul)return new Map;return a=void 0,new Map().set(e,xh(x))}function g(){return dV(e)!==void 0&&i<=0}const m=Ple({key:e,nodeType:"atom",peek:d,get:f,set:y,init:h,invalidate:p,shouldDeleteConfigOnRelease:g,dangerouslyAllowMutability:n.dangerouslyAllowMutability,persistence_UNSTABLE:n.persistence_UNSTABLE?{type:n.persistence_UNSTABLE.type,backButton:n.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return m}function _P(n){const{...e}=n,t="default"in n?n.default:new Promise(()=>{});return Lle(t)?Ble({...e,default:t}):Ule({...e,default:t})}function Ble(n){const e=_P({...n,default:au,persistence_UNSTABLE:n.persistence_UNSTABLE===void 0?void 0:{...n.persistence_UNSTABLE,validator:r=>r instanceof Ul?r:Ln(n.persistence_UNSTABLE).validator(r,au)},effects:n.effects,effects_UNSTABLE:n.effects_UNSTABLE}),t=Df({key:`${n.key}__withFallback`,get:({get:r})=>{const i=r(e);return i instanceof Ul?n.default:i},set:({set:r},i)=>r(e,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:n.dangerouslyAllowMutability});return Ile(t.key,dV(n.key)),t}_P.value=n=>new hV(n);var fV=_P;class zle{constructor(e){var t;bt(this,"_map",void 0),bt(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(t=e==null?void 0:e.mapKey)!==null&&t!==void 0?t:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,t){this._map.set(this._keyMapper(e),t)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var $le={MapCache:zle},Vle=$le.MapCache,Gle=Object.freeze({__proto__:null,MapCache:Vle});const{LRUCache:vF}=aV,{MapCache:Hle}=Gle,_0={equality:"reference",eviction:"none",maxSize:1/0};function Wle({equality:n=_0.equality,eviction:e=_0.eviction,maxSize:t=_0.maxSize}=_0){const r=jle(n);return qle(e,t,r)}function jle(n){switch(n){case"reference":return e=>e;case"value":return e=>Db(e)}throw Rt(`Unrecognized equality policy ${n}`)}function qle(n,e,t){switch(n){case"keep-all":return new Hle({mapKey:t});case"lru":return new vF({mapKey:t,maxSize:Ln(e)});case"most-recent":return new vF({mapKey:t,maxSize:1})}throw Rt(`Unrecognized eviction policy ${n}`)}var pV=Wle;const{setConfigDeletionHandler:Xle}=Vi;function Kle(n){var e,t;const r=pV({equality:(e=(t=n.cachePolicyForParams_UNSTABLE)===null||t===void 0?void 0:t.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s,o;const a=r.get(i);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:l,...c}=n,u="default"in n?n.default:new Promise(()=>{}),h=fV({...c,key:`${n.key}__${(s=Db(i))!==null&&s!==void 0?s:"void"}`,default:typeof u=="function"?u(i):u,retainedBy_UNSTABLE:typeof n.retainedBy_UNSTABLE=="function"?n.retainedBy_UNSTABLE(i):n.retainedBy_UNSTABLE,effects:typeof n.effects=="function"?n.effects(i):typeof n.effects_UNSTABLE=="function"?n.effects_UNSTABLE(i):(o=n.effects)!==null&&o!==void 0?o:n.effects_UNSTABLE});return r.set(i,h),Xle(h.key,()=>{r.delete(i)}),h}}var Yle=Kle;const{setConfigDeletionHandler:Zle}=Vi;let Qle=0;function Jle(n){var e,t;const r=pV({equality:(e=(t=n.cachePolicyForParams_UNSTABLE)===null||t===void 0?void 0:t.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s;let o;try{o=r.get(i)}catch(d){throw Rt(`Problem with cache lookup for selector ${n.key}: ${d.message}`)}if(o!=null)return o;const a=`${n.key}__selectorFamily/${(s=Db(i,{allowFunctions:!0}))!==null&&s!==void 0?s:"void"}/${Qle++}`,l=d=>n.get(i)(d),c=n.cachePolicy_UNSTABLE,u=typeof n.retainedBy_UNSTABLE=="function"?n.retainedBy_UNSTABLE(i):n.retainedBy_UNSTABLE;let h;if(n.set!=null){const d=n.set;h=Df({key:a,get:l,set:(p,y)=>d(i)(p,y),cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:n.dangerouslyAllowMutability,retainedBy_UNSTABLE:u})}else h=Df({key:a,get:l,cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:n.dangerouslyAllowMutability,retainedBy_UNSTABLE:u});return r.set(i,h),Zle(h.key,()=>{r.delete(i)}),h}}var Nc=Jle;const ece=Nc({key:"__constant",get:n=>()=>n,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function tce(n){return ece(n)}var nce=tce;const rce=Nc({key:"__error",get:n=>()=>{throw Rt(n)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function ice(n){return rce(n)}var sce=ice;function oce(n){return n}var ace=oce;const{loadableWithError:mV,loadableWithPromise:gV,loadableWithValue:yV}=gy;function Fb(n,e){const t=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[i,s]of e.entries())try{t[i]=n(s)}catch(o){r[i]=o}return[t,r]}function lce(n){return n!=null&&!Cn(n)}function Ob(n){return Array.isArray(n)?n:Object.getOwnPropertyNames(n).map(e=>n[e])}function pC(n,e){return Array.isArray(n)?e:Object.getOwnPropertyNames(n).reduce((t,r,i)=>({...t,[r]:e[i]}),{})}function Vd(n,e,t){const r=t.map((i,s)=>i==null?yV(e[s]):Cn(i)?gV(i):mV(i));return pC(n,r)}function cce(n,e){return e.map((t,r)=>t===void 0?n[r]:t)}const uce=Nc({key:"__waitForNone",get:n=>({get:e})=>{const t=Ob(n),[r,i]=Fb(e,t);return Vd(n,r,i)},dangerouslyAllowMutability:!0}),hce=Nc({key:"__waitForAny",get:n=>({get:e})=>{const t=Ob(n),[r,i]=Fb(e,t);return i.some(s=>!Cn(s))?Vd(n,r,i):new Promise(s=>{for(const[o,a]of i.entries())Cn(a)&&a.then(l=>{r[o]=l,i[o]=void 0,s(Vd(n,r,i))}).catch(l=>{i[o]=l,s(Vd(n,r,i))})})},dangerouslyAllowMutability:!0}),dce=Nc({key:"__waitForAll",get:n=>({get:e})=>{const t=Ob(n),[r,i]=Fb(e,t);if(i.every(o=>o==null))return pC(n,r);const s=i.find(lce);if(s!=null)throw s;return Promise.all(i).then(o=>pC(n,cce(r,o)))},dangerouslyAllowMutability:!0}),fce=Nc({key:"__waitForAllSettled",get:n=>({get:e})=>{const t=Ob(n),[r,i]=Fb(e,t);return i.every(s=>!Cn(s))?Vd(n,r,i):Promise.all(i.map((s,o)=>Cn(s)?s.then(a=>{r[o]=a,i[o]=void 0}).catch(a=>{r[o]=void 0,i[o]=a}):null)).then(()=>Vd(n,r,i))},dangerouslyAllowMutability:!0}),pce=Nc({key:"__noWait",get:n=>({get:e})=>{try{return Df.value(yV(e(n)))}catch(t){return Df.value(Cn(t)?gV(t):mV(t))}},dangerouslyAllowMutability:!0});var mce={waitForNone:uce,waitForAny:hce,waitForAll:dce,waitForAllSettled:fce,noWait:pce};const{RecoilLoadable:gce}=gy,{DefaultValue:yce}=Vi,{RecoilRoot:vce,useRecoilStoreID:_ce}=ll,{isRecoilValue:xce}=Pf,{retentionZone:Sce}=wb,{freshSnapshot:bce}=Rb,{useRecoilState:wce,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Tce,useRecoilStateLoadable:Mce,useRecoilValue:Ece,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Cce,useRecoilValueLoadable:Ace,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Rce,useResetRecoilState:Nce,useSetRecoilState:Pce}=$oe,{useGotoRecoilSnapshot:Ice,useRecoilSnapshot:Lce,useRecoilTransactionObserver:Dce}=eV,{useRecoilCallback:Fce}=iV,{noWait:Oce,waitForAll:kce,waitForAllSettled:Uce,waitForAny:Bce,waitForNone:zce}=mce;var kb={DefaultValue:yce,isRecoilValue:xce,RecoilLoadable:gce,RecoilEnv:rp,RecoilRoot:vce,useRecoilStoreID:_ce,useRecoilBridgeAcrossReactRoots_UNSTABLE:pae,atom:fV,selector:Df,atomFamily:Yle,selectorFamily:Nc,constSelector:nce,errorSelector:sce,readOnlySelector:ace,noWait:Oce,waitForNone:zce,waitForAny:Bce,waitForAll:kce,waitForAllSettled:Uce,useRecoilValue:Ece,useRecoilValueLoadable:Ace,useRecoilState:wce,useRecoilStateLoadable:Mce,useSetRecoilState:Pce,useResetRecoilState:Nce,useGetRecoilValueInfo_UNSTABLE:lae,useRecoilRefresher_UNSTABLE:Gae,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Rce,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Cce,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Tce,useRecoilCallback:Fce,useRecoilTransaction_UNSTABLE:Xae,useGotoRecoilSnapshot:Ice,useRecoilSnapshot:Lce,useRecoilTransactionObserver_UNSTABLE:Dce,snapshot_UNSTABLE:bce,useRetain:pP,retentionZone:Sce},$ce=kb.RecoilRoot,by=kb.atom,Vce=kb.useRecoilValue,wy=kb.useRecoilState;const Gce=by({key:"alertState_key",default:{isOpen:!1,hideDuration:5e3,message:"",type:$d.ERROR}}),vV=()=>{const[n,e]=wy(Gce),t=P.useCallback(({message:i,hideDuration:s=5e3,alertType:o=$d.INFO})=>{e(a=>({...a,message:i,hideDuration:s,type:o,isOpen:!0}))},[e]),r=P.useCallback(()=>{e(i=>({...i,isOpen:!1}))},[e]);return{isOpen:n.isOpen,alertOption:n,onAlertOpen:t,onAlertClose:r}};var Gd=(n=>(n[n.LIGHT=0]="LIGHT",n[n.DARK=1]="DARK",n))(Gd||{});const Hce=()=>{const{LIGHT:n,DARK:e}=Gd;return window.matchMedia("(prefers-color-scheme: dark)").matches?e:n},_V=by({key:"themeState",default:Hce()}),xV=()=>{const[n,e]=wy(_V),{LIGHT:t,DARK:r}=Gd,i=P.useCallback(()=>{e(n===Gd.LIGHT?r:t)},[e,n]);return{isThemeLight:P.useMemo(()=>n===Gd.LIGHT,[n]),onChangeTheme:i}};var bx=(n=>(n.ar_AE="ar_AE",n.en_US="en_US",n.cs_CZ="cs_CZ",n.de_DE="de_DE",n.el_GR="el_GR",n.en_AU="en_AU",n.en_GB="en_GB",n.en_PH="en_PH",n.en_SG="en_SG",n.es_ES="es_ES",n.es_MX="es_MX",n.fr_FR="fr_FR",n.hu_HU="hu_HU",n.it_IT="it_IT",n.ja_JP="ja_JP",n.ko_KR="ko_KR",n.pl_PL="pl_PL",n.pt_BR="pt_BR",n.ro_RO="ro_RO",n.ru_RU="ru_RU",n.th_TH="th_TH",n.tr_TR="tr_TR",n.vi_VN="vi_VN",n.zh_CN="zh_CN",n.zh_TW="zh_TW",n))(bx||{});const Wce={ar_AE:"العربية",en_US:"English (NA)",cs_CZ:"Čeština",de_DE:"Deutsch",el_GR:"Ελληνικά",en_AU:"English (OCE)",en_GB:"English (EUW)",en_PH:"English (PH)",en_SG:"English (SG)",es_ES:"Español (EUW)",es_MX:"Español (LATAM)",fr_FR:"Français",hu_HU:"Magyar",it_IT:"Italiano",ja_JP:"日本語",ko_KR:"한국어",pl_PL:"Polski",pt_BR:"Português",ro_RO:"Română",ru_RU:"Русский",th_TH:"ภาษาไทย",tr_TR:"Türkçe",vi_VN:"Tiếng Việt",zh_CN:"中文",zh_TW:"繁體中文"};var s_=(n=>(n.FAMILY="Family",n.LOVERS="Lovers",n.EX_LOVERS="Ex-lovers",n))(s_||{});const jce=()=>{let n=navigator.language.replace("-","_");switch(n){case"ar":n="ar_AE";break;case"cs":n="cs_CZ";break;case"de":n="de_DE";break;case"el":n="el_GR";break;case"en":n="en_US";break;case"es":n="es_ES";break;case"fr":n="fr_FR";break;case"hu":n="hu_HU";break;case"it":n="it_IT";break;case"ja":n="ja_JP";break;case"ko":n="ko_KR";break;case"pl":n="pl_PL";break;case"pt":n="pt_BR";break;case"ro":n="ro_RO";break;case"ru":n="ru_RU";break;case"th":n="th_TH";break;case"tr":n="tr_TR";break;case"vi":n="vi_VN";break;case"zh":n="zh_CN";break}return bx[n]||bx.en_US},_F=n=>{var e=/[a-zA-Z]/;return e.test(n)},eu=[s_.FAMILY,s_.LOVERS,s_.EX_LOVERS],tu=["Demacia","Noxus","Bilgewater","Freljord","ShadowIsles","Shurima","Ixtal","Ionia","BandleCity","Targon","Zaun","Void","Piltover","Runeterra"],qce=by({key:"filterState_key",default:{language:jce(),relation:eu,region:tu}}),Xce=by({key:"modalState",default:{isOpen:!1,champId:""}}),Kce=by({key:"searchState",default:""}),xP=()=>{const[n,e]=wy(qce),t=P.useCallback(s=>{e(o=>({...o,language:s}))},[e]),r=P.useCallback(s=>{e(o=>({...o,relation:s}))},[e]),i=P.useCallback(s=>{e(o=>({...o,region:s}))},[e]);return{filterOptions:n,language:n.language,onChangeLanguage:t,onChangeRelation:r,onChangeRegion:i}},SV=()=>{const[n,e]=wy(Xce),t=P.useCallback(i=>{e({isOpen:!0,champId:i})},[e]),r=P.useCallback(()=>{e({isOpen:!1,champId:""})},[e]);return{open:n.isOpen,championId:n.champId,openModal:t,closeModal:r}},SP=()=>{const[n,e]=wy(Kce),t=P.useCallback(i=>{e(i)},[]),r=P.useCallback(()=>{e("")},[]);return{searchParams:n,onSearch:t,onResetSearch:r}},Yce=_i(H.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel"),Zce=_i(H.jsx("path",{d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59 7.11 5.7a.996.996 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41s1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4"}),"CloseRounded"),Qce=_i(H.jsx("path",{d:"M11.01 3.05C6.51 3.54 3 7.36 3 12c0 4.97 4.03 9 9 9 4.63 0 8.45-3.5 8.95-8 .09-.79-.78-1.42-1.54-.95-.84.54-1.84.85-2.91.85-2.98 0-5.4-2.42-5.4-5.4 0-1.06.31-2.06.84-2.89.45-.67-.04-1.63-.93-1.56"}),"DarkModeRounded"),Jce=_i(H.jsx("path",{d:"M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0s.41-1.08 0-1.49zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"SearchRounded"),eue=_i(H.jsx("path",{d:"M19.5 12c0-.23-.01-.45-.03-.68l1.86-1.41c.4-.3.51-.86.26-1.3l-1.87-3.23c-.25-.44-.79-.62-1.25-.42l-2.15.91c-.37-.26-.76-.49-1.17-.68l-.29-2.31c-.06-.5-.49-.88-.99-.88h-3.73c-.51 0-.94.38-1 .88l-.29 2.31c-.41.19-.8.42-1.17.68l-2.15-.91c-.46-.2-1-.02-1.25.42L2.41 8.62c-.25.44-.14.99.26 1.3l1.86 1.41c-.02.22-.03.44-.03.67s.01.45.03.68l-1.86 1.41c-.4.3-.51.86-.26 1.3l1.87 3.23c.25.44.79.62 1.25.42l2.15-.91c.37.26.76.49 1.17.68l.29 2.31c.06.5.49.88.99.88h3.73c.5 0 .93-.38.99-.88l.29-2.31c.41-.19.8-.42 1.17-.68l2.15.91c.46.2 1 .02 1.25-.42l1.87-3.23c.25-.44.14-.99-.26-1.3l-1.86-1.41c.03-.23.04-.45.04-.68m-7.46 3.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5"}),"SettingsRounded"),tue=({isOpen:n,handleClose:e,champData:t,isLoading:r})=>{var a;const{isThemeLight:i}=xV(),s=Cc(),o=mY(s.breakpoints.down("sm"));return H.jsx(Yne,{open:n,onClose:e,fullWidth:!0,maxWidth:"lg",fullScreen:o,children:H.jsx(XJ,{className:"dialog-content",sx:{backgroundImage:`url(${o?t.bgImgMb:t.bgImg})`,height:{xs:"100vh",sm:"90vh",md:"80vh"}},children:H.jsxs(S$,{className:"dialog-content-box",sx:{padding:{xs:"20px 16px",sm:"30px",md:"50px 52px",lg:"70px 72px"},background:i?"linear-gradient(45deg, #ffffff, #ffffff42, #fff0)":"linear-gradient(45deg, #000000, #00000042, #fff0)"},children:[H.jsx(Lg,{className:"dialog-content-box-cancle",size:"large",onClick:e,children:H.jsx(Yce,{})}),r?H.jsxs(H.Fragment,{children:[H.jsx(d0,{variant:"rounded",width:"60%",height:20}),H.jsx(d0,{variant:"rounded",width:"50%",height:50,sx:{mt:2,mb:2}}),H.jsx(d0,{variant:"text",width:"30%",height:40}),H.jsx(d0,{variant:"rounded",sx:{width:{xs:"100%",sm:"65%"},mt:2},height:200})]}):H.jsxs(H.Fragment,{children:[H.jsx(Oa,{className:"dialog-content-box-subtitle",variant:"h5",fontWeight:"regular",textAlign:"left",children:t==null?void 0:t.champTitle}),H.jsx(Oa,{variant:"h2",fontWeight:"bold",textAlign:"left",children:t.champName}),t.champTags.length>0&&H.jsx("div",{className:"dialog-content-box-tags",children:(a=t.champTags)==null?void 0:a.map(l=>H.jsx(IQ,{label:`#${l}`,size:"small",itemType:"detail"},`${t.champId}_${l}`))}),H.jsx(Oa,{variant:"body1",textAlign:"left",sx:{width:{xs:"100%",sm:"65%"},mt:2},children:t.champLore})]})]})})})},nue=()=>{const{alertOption:n,onAlertClose:e}=vV();return H.jsx(Vte,{open:n.isOpen,autoHideDuration:n.hideDuration,onClose:e,children:H.jsx(_Q,{severity:n.type,variant:"filled",sx:{width:"100%",color:"white"},children:n.message})})},rue=({})=>{const{closeModal:n,open:e,championId:t}=SV(),{language:r}=xP(),{data:i,isLoading:s}=Bq({champId:t,language:r}),o=P.useMemo(()=>{var l;const a=((l=i==null?void 0:i.data)==null?void 0:l[t])||{};return{champId:t,bgImgMb:`https://ddragon.leagueoflegends.com/cdn/img/champion/loading/${t}_0.jpg`,bgImg:`https://ddragon.leagueoflegends.com/cdn/img/champion/splash/${t}_0.jpg`,champName:a.name||"",champTitle:a.title||"",champLore:a.lore||"",champTags:a.tags||[]}},[t,i]);return H.jsx(tue,{isOpen:e,handleClose:n,isLoading:s,champData:o})},iue=gb(lee)`
  .drawer-wrapper {
    padding: 24px 0;
    height: 100%;
    display: flex;
    flex-direction: column;

    &-top {
      width: 100%;
      display: flex;
      justify-content: space-between;
      padding: 0 24px;
      align-items: center;
    }

    &-middle {
      width: 100%;
      flex: 1;
      text-align: left;
      padding: 0 24px;
      margin: 12px 0 24px 0;

      > p {
        font-weight: bold;
      }

      &-selects {
        overflow-y: scroll;
        max-height: 50vh;

        &-box {
          margin-top: 8px;
          display: flex;
          flex-direction: column;

          > p {
            opacity: 0.6;
          }

          > label:nth-child(2) {
            margin-left: 4px;
          }

          > label:not(:nth-child(2)) {
            margin-left: 16px;
          }
        }
      }
    }

    &-bottom {
      width: 100%;

      &-lang {
        margin-bottom: 24px;
        padding: 0 24px;
        text-align: left;

        > p {
          text-align: left;
          font-weight: bold;
          margin-bottom: 4px;
        }
      }

      &-footer {
        padding: 24px 0 0 24px;

        > p {
          text-align: left;
          font-size: 0.9rem;
        }
      }
    }
  }
`,sue=n=>Object.entries(n.data).map(([e,t])=>({id:t.id,img:`https://ddragon.leagueoflegends.com/cdn/14.21.1/img/champion/${t.image.full}`,name:t.name})),oue=n=>Object.entries(n).map(([e,t])=>({key:e,value:t}));/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ub="169",Tr={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ka={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},aue=0,xF=1,lue=2,bV=1,cue=2,va=3,yc=0,pi=1,Aa=2,Ha=0,Hd=1,SF=2,bF=3,wF=4,uue=5,lu=100,hue=101,due=102,fue=103,pue=104,mue=200,gue=201,yue=202,vue=203,mC=204,gC=205,_ue=206,xue=207,Sue=208,bue=209,wue=210,Tue=211,Mue=212,Eue=213,Cue=214,yC=0,vC=1,_C=2,Ff=3,xC=4,SC=5,bC=6,wC=7,bP=0,Aue=1,Rue=2,uc=0,Nue=1,Pue=2,Iue=3,Lue=4,Due=5,Fue=6,Oue=7,wV=300,Of=301,kf=302,TC=303,MC=304,Bb=306,EC=1e3,yu=1001,CC=1002,Ps=1003,kue=1004,x0=1005,lo=1006,ww=1007,vu=1008,il=1009,TV=1010,MV=1011,Fg=1012,wP=1013,Hu=1014,Ua=1015,sp=1016,TP=1017,MP=1018,Uf=1020,EV=35902,CV=1021,AV=1022,ho=1023,RV=1024,NV=1025,Wd=1026,Bf=1027,PV=1028,EP=1029,IV=1030,CP=1031,AP=1033,o_=33776,a_=33777,l_=33778,c_=33779,AC=35840,RC=35841,NC=35842,PC=35843,IC=36196,LC=37492,DC=37496,FC=37808,OC=37809,kC=37810,UC=37811,BC=37812,zC=37813,$C=37814,VC=37815,GC=37816,HC=37817,WC=37818,jC=37819,qC=37820,XC=37821,u_=36492,KC=36494,YC=36495,LV=36283,ZC=36284,QC=36285,JC=36286,Uue=3200,Bue=3201,DV=0,zue=1,Gl="",Ts="srgb",Pc="srgb-linear",RP="display-p3",zb="display-p3-linear",wx="linear",Tn="srgb",Tx="rec709",Mx="p3",Sh=7680,TF=519,$ue=512,Vue=513,Gue=514,FV=515,Hue=516,Wue=517,jue=518,que=519,eA=35044,MF="300 es",Ba=2e3,Ex=2001;let Ic=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Vr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let EF=1234567;const Km=Math.PI/180,Og=180/Math.PI;function Wa(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Vr[n&255]+Vr[n>>8&255]+Vr[n>>16&255]+Vr[n>>24&255]+"-"+Vr[e&255]+Vr[e>>8&255]+"-"+Vr[e>>16&15|64]+Vr[e>>24&255]+"-"+Vr[t&63|128]+Vr[t>>8&255]+"-"+Vr[t>>16&255]+Vr[t>>24&255]+Vr[r&255]+Vr[r>>8&255]+Vr[r>>16&255]+Vr[r>>24&255]).toLowerCase()}function wr(n,e,t){return Math.max(e,Math.min(t,n))}function NP(n,e){return(n%e+e)%e}function Xue(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function Kue(n,e,t){return n!==e?(t-n)/(e-n):0}function Ym(n,e,t){return(1-t)*n+t*e}function Yue(n,e,t,r){return Ym(n,e,1-Math.exp(-t*r))}function Zue(n,e=1){return e-Math.abs(NP(n,e*2)-e)}function Que(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Jue(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function ehe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function the(n,e){return n+Math.random()*(e-n)}function nhe(n){return n*(.5-Math.random())}function rhe(n){n!==void 0&&(EF=n);let e=EF+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function ihe(n){return n*Km}function she(n){return n*Og}function ohe(n){return(n&n-1)===0&&n!==0}function ahe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function lhe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function che(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),h=s((e-r)/2),d=o((e-r)/2),f=s((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*h,l*d,a*c);break;case"YZY":n.set(l*d,a*u,l*h,a*c);break;case"ZXZ":n.set(l*h,l*d,a*u,a*c);break;case"XZX":n.set(a*u,l*p,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*p,a*c);break;case"ZYZ":n.set(l*p,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function co(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ln(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const tA={DEG2RAD:Km,RAD2DEG:Og,generateUUID:Wa,clamp:wr,euclideanModulo:NP,mapLinear:Xue,inverseLerp:Kue,lerp:Ym,damp:Yue,pingpong:Zue,smoothstep:Que,smootherstep:Jue,randInt:ehe,randFloat:the,randFloatSpread:nhe,seededRandom:rhe,degToRad:ihe,radToDeg:she,isPowerOfTwo:ohe,ceilPowerOfTwo:ahe,floorPowerOfTwo:lhe,setQuaternionFromProperEuler:che,normalize:ln,denormalize:co};let Ge=class OV{constructor(e=0,t=0){OV.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(wr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},It=class kV{constructor(e,t,r,i,s,o,a,l,c){kV.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],h=r[7],d=r[2],f=r[5],p=r[8],y=i[0],g=i[3],m=i[6],_=i[1],v=i[4],x=i[7],b=i[2],T=i[5],w=i[8];return s[0]=o*y+a*_+l*b,s[3]=o*g+a*v+l*T,s[6]=o*m+a*x+l*w,s[1]=c*y+u*_+h*b,s[4]=c*g+u*v+h*T,s[7]=c*m+u*x+h*w,s[2]=d*y+f*_+p*b,s[5]=d*g+f*v+p*T,s[8]=d*m+f*x+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*s,f=c*s-o*l,p=t*h+r*d+i*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/p;return e[0]=h*y,e[1]=(i*c-u*r)*y,e[2]=(a*r-i*o)*y,e[3]=d*y,e[4]=(u*t-i*l)*y,e[5]=(i*s-a*t)*y,e[6]=f*y,e[7]=(r*l-c*t)*y,e[8]=(o*t-r*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Tw.makeScale(e,t)),this}rotate(e){return this.premultiply(Tw.makeRotation(-e)),this}translate(e,t){return this.premultiply(Tw.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const Tw=new It;function UV(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function kg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function uhe(){const n=kg("canvas");return n.style.display="block",n}const CF={};function h_(n){n in CF||(CF[n]=!0,console.warn(n))}function hhe(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}function dhe(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function fhe(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const AF=new It().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),RF=new It().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),kp={[Pc]:{transfer:wx,primaries:Tx,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n,fromReference:n=>n},[Ts]:{transfer:Tn,primaries:Tx,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[zb]:{transfer:wx,primaries:Mx,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.applyMatrix3(RF),fromReference:n=>n.applyMatrix3(AF)},[RP]:{transfer:Tn,primaries:Mx,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.convertSRGBToLinear().applyMatrix3(RF),fromReference:n=>n.applyMatrix3(AF).convertLinearToSRGB()}},phe=new Set([Pc,zb]),Jt={enabled:!0,_workingColorSpace:Pc,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!phe.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=kp[e].toReference,i=kp[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return kp[n].primaries},getTransfer:function(n){return n===Gl?wx:kp[n].transfer},getLuminanceCoefficients:function(n,e=this._workingColorSpace){return n.fromArray(kp[e].luminanceCoefficients)}};function jd(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Mw(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let bh,mhe=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{bh===void 0&&(bh=kg("canvas")),bh.width=e.width,bh.height=e.height;const r=bh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=bh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=kg("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=jd(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(jd(t[r]/255)*255):t[r]=jd(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},ghe=0,BV=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ghe++}),this.uuid=Wa(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(Ew(i[o].image)):s.push(Ew(i[o]))}else s=Ew(i);r.url=s}return t||(e.images[this.uuid]=r),r}};function Ew(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?mhe.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let yhe=0,Vs=class d_ extends Ic{constructor(e=d_.DEFAULT_IMAGE,t=d_.DEFAULT_MAPPING,r=yu,i=yu,s=lo,o=vu,a=ho,l=il,c=d_.DEFAULT_ANISOTROPY,u=Gl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:yhe++}),this.uuid=Wa(),this.name="",this.source=new BV(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ge(0,0),this.repeat=new Ge(1,1),this.center=new Ge(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new It,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==wV)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case EC:e.x=e.x-Math.floor(e.x);break;case yu:e.x=e.x<0?0:1;break;case CC:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case EC:e.y=e.y-Math.floor(e.y);break;case yu:e.y=e.y<0?0:1;break;case CC:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};Vs.DEFAULT_IMAGE=null;Vs.DEFAULT_MAPPING=wV;Vs.DEFAULT_ANISOTROPY=1;let ar=class zV{constructor(e=0,t=0,r=0,i=1){zV.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],p=l[9],y=l[2],g=l[6],m=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-y)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+y)<.1&&Math.abs(p+g)<.1&&Math.abs(c+f+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(c+1)/2,x=(f+1)/2,b=(m+1)/2,T=(u+d)/4,w=(h+y)/4,M=(p+g)/4;return v>x&&v>b?v<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(v),i=T/r,s=w/r):x>b?x<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(x),r=T/i,s=M/i):b<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(b),r=w/s,i=M/s),this.set(r,i,s,t),this}let _=Math.sqrt((g-p)*(g-p)+(h-y)*(h-y)+(d-u)*(d-u));return Math.abs(_)<.001&&(_=1),this.x=(g-p)/_,this.y=(h-y)/_,this.z=(d-u)/_,this.w=Math.acos((c+f+m-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},vhe=class extends Ic{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ar(0,0,e,t),this.scissorTest=!1,this.viewport=new ar(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:lo,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new Vs(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new BV(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},vc=class extends vhe{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}},$V=class extends Vs{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ps,this.minFilter=Ps,this.wrapR=yu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};class _he extends Vs{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ps,this.minFilter=Ps,this.wrapR=yu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let bo=class{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],h=r[i+3];const d=s[o+0],f=s[o+1],p=s[o+2],y=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=p,e[t+3]=y;return}if(h!==y||l!==d||c!==f||u!==p){let g=1-a;const m=l*d+c*f+u*p+h*y,_=m>=0?1:-1,v=1-m*m;if(v>Number.EPSILON){const b=Math.sqrt(v),T=Math.atan2(b,m*_);g=Math.sin(g*T)/b,a=Math.sin(a*T)/b}const x=a*_;if(l=l*g+d*x,c=c*g+f*x,u=u*g+p*x,h=h*g+y*x,g===1-a){const b=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=b,c*=b,u*=b,h*=b}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],h=s[o],d=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*h+l*f-c*d,e[t+1]=l*p+u*d+c*h-a*f,e[t+2]=c*p+u*f+a*d-l*h,e[t+3]=u*p-a*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),h=a(s/2),d=l(r/2),f=l(i/2),p=l(s/2);switch(o){case"XYZ":this._x=d*u*h+c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h-d*f*p;break;case"YXZ":this._x=d*u*h+c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h+d*f*p;break;case"ZXY":this._x=d*u*h-c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h-d*f*p;break;case"ZYX":this._x=d*u*h-c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h+d*f*p;break;case"YZX":this._x=d*u*h+c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h-d*f*p;break;case"XZY":this._x=d*u*h-c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=r+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-i)*f}else if(r>a&&r>h){const f=2*Math.sqrt(1+r-a-h);this._w=(u-l)/f,this._x=.25*f,this._y=(i+o)/f,this._z=(s+c)/f}else if(a>h){const f=2*Math.sqrt(1+a-r-h);this._w=(s-c)/f,this._x=(i+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-r-a);this._w=(o-i)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(wr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=r*h+this._x*d,this._y=i*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},X=class VV{constructor(e=0,t=0,r=0){VV.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(NF.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(NF.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*t-s*i),h=2*(s*r-o*t);return this.x=t+l*c+o*h-a*u,this.y=r+l*u+a*c-s*h,this.z=i+l*h+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Cw.copy(this).projectOnVector(e),this.sub(Cw)}reflect(e){return this.sub(Cw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(wr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const Cw=new X,NF=new bo;let sh=class{constructor(e=new X(1/0,1/0,1/0),t=new X(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(js.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(js.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=js.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,js):js.fromBufferAttribute(s,o),js.applyMatrix4(e.matrixWorld),this.expandByPoint(js);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),S0.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),S0.copy(r.boundingBox)),S0.applyMatrix4(e.matrixWorld),this.union(S0)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,js),js.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Up),b0.subVectors(this.max,Up),wh.subVectors(e.a,Up),Th.subVectors(e.b,Up),Mh.subVectors(e.c,Up),yl.subVectors(Th,wh),vl.subVectors(Mh,Th),Bc.subVectors(wh,Mh);let t=[0,-yl.z,yl.y,0,-vl.z,vl.y,0,-Bc.z,Bc.y,yl.z,0,-yl.x,vl.z,0,-vl.x,Bc.z,0,-Bc.x,-yl.y,yl.x,0,-vl.y,vl.x,0,-Bc.y,Bc.x,0];return!Aw(t,wh,Th,Mh,b0)||(t=[1,0,0,0,1,0,0,0,1],!Aw(t,wh,Th,Mh,b0))?!1:(w0.crossVectors(yl,vl),t=[w0.x,w0.y,w0.z],Aw(t,wh,Th,Mh,b0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,js).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(js).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(sa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),sa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),sa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),sa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),sa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),sa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),sa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),sa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(sa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const sa=[new X,new X,new X,new X,new X,new X,new X,new X],js=new X,S0=new sh,wh=new X,Th=new X,Mh=new X,yl=new X,vl=new X,Bc=new X,Up=new X,b0=new X,w0=new X,zc=new X;function Aw(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){zc.fromArray(n,s);const a=i.x*Math.abs(zc.x)+i.y*Math.abs(zc.y)+i.z*Math.abs(zc.z),l=e.dot(zc),c=t.dot(zc),u=r.dot(zc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const xhe=new sh,Bp=new X,Rw=new X;let $b=class{constructor(e=new X,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):xhe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Bp.subVectors(e,this.center);const t=Bp.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Bp,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Rw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Bp.copy(e.center).add(Rw)),this.expandByPoint(Bp.copy(e.center).sub(Rw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const oa=new X,Nw=new X,T0=new X,_l=new X,Pw=new X,M0=new X,Iw=new X;let Vb=class{constructor(e=new X,t=new X(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,oa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=oa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(oa.copy(this.origin).addScaledVector(this.direction,t),oa.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){Nw.copy(e).add(t).multiplyScalar(.5),T0.copy(t).sub(e).normalize(),_l.copy(this.origin).sub(Nw);const s=e.distanceTo(t)*.5,o=-this.direction.dot(T0),a=_l.dot(this.direction),l=-_l.dot(T0),c=_l.lengthSq(),u=Math.abs(1-o*o);let h,d,f,p;if(u>0)if(h=o*l-a,d=o*a-l,p=s*u,h>=0)if(d>=-p)if(d<=p){const y=1/u;h*=y,d*=y,f=h*(h+o*d+2*a)+d*(o*h+d+2*l)+c}else d=s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d=-s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d<=-p?(h=Math.max(0,-(-o*s+a)),d=h>0?-s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c):d<=p?(h=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(h=Math.max(0,-(o*s+a)),d=h>0?s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c);else d=o>0?-s:s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(Nw).addScaledVector(T0,d),f}intersectSphere(e,t){oa.subVectors(e.center,this.origin);const r=oa.dot(this.direction),i=oa.dot(oa)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(r=(e.min.x-d.x)*c,i=(e.max.x-d.x)*c):(r=(e.max.x-d.x)*c,i=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,oa)!==null}intersectTriangle(e,t,r,i,s){Pw.subVectors(t,e),M0.subVectors(r,e),Iw.crossVectors(Pw,M0);let o=this.direction.dot(Iw),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;_l.subVectors(this.origin,e);const l=a*this.direction.dot(M0.crossVectors(_l,M0));if(l<0)return null;const c=a*this.direction.dot(Pw.cross(_l));if(c<0||l+c>o)return null;const u=-a*_l.dot(Iw);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},_n=class nA{constructor(e,t,r,i,s,o,a,l,c,u,h,d,f,p,y,g){nA.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,u,h,d,f,p,y,g)}set(e,t,r,i,s,o,a,l,c,u,h,d,f,p,y,g){const m=this.elements;return m[0]=e,m[4]=t,m[8]=r,m[12]=i,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=u,m[10]=h,m[14]=d,m[3]=f,m[7]=p,m[11]=y,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new nA().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Eh.setFromMatrixColumn(e,0).length(),s=1/Eh.setFromMatrixColumn(e,1).length(),o=1/Eh.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=o*u,f=o*h,p=a*u,y=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+p*c,t[5]=d-y*c,t[9]=-a*l,t[2]=y-d*c,t[6]=p+f*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,p=c*u,y=c*h;t[0]=d+y*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=y+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,p=c*u,y=c*h;t[0]=d-y*a,t[4]=-o*h,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=y-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,f=o*h,p=a*u,y=a*h;t[0]=l*u,t[4]=p*c-f,t[8]=d*c+y,t[1]=l*h,t[5]=y*c+d,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,p=a*l,y=a*c;t[0]=l*u,t[4]=y-d*h,t[8]=p*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*h+p,t[10]=d-y*h}else if(e.order==="XZY"){const d=o*l,f=o*c,p=a*l,y=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+y,t[5]=o*u,t[9]=f*h-p,t[2]=p*h-f,t[6]=a*u,t[10]=y*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(She,e,bhe)}lookAt(e,t,r){const i=this.elements;return qi.subVectors(e,t),qi.lengthSq()===0&&(qi.z=1),qi.normalize(),xl.crossVectors(r,qi),xl.lengthSq()===0&&(Math.abs(r.z)===1?qi.x+=1e-4:qi.z+=1e-4,qi.normalize(),xl.crossVectors(r,qi)),xl.normalize(),E0.crossVectors(qi,xl),i[0]=xl.x,i[4]=E0.x,i[8]=qi.x,i[1]=xl.y,i[5]=E0.y,i[9]=qi.y,i[2]=xl.z,i[6]=E0.z,i[10]=qi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],h=r[5],d=r[9],f=r[13],p=r[2],y=r[6],g=r[10],m=r[14],_=r[3],v=r[7],x=r[11],b=r[15],T=i[0],w=i[4],M=i[8],A=i[12],S=i[1],E=i[5],I=i[9],O=i[13],N=i[2],R=i[6],D=i[10],q=i[14],L=i[3],j=i[7],z=i[11],K=i[15];return s[0]=o*T+a*S+l*N+c*L,s[4]=o*w+a*E+l*R+c*j,s[8]=o*M+a*I+l*D+c*z,s[12]=o*A+a*O+l*q+c*K,s[1]=u*T+h*S+d*N+f*L,s[5]=u*w+h*E+d*R+f*j,s[9]=u*M+h*I+d*D+f*z,s[13]=u*A+h*O+d*q+f*K,s[2]=p*T+y*S+g*N+m*L,s[6]=p*w+y*E+g*R+m*j,s[10]=p*M+y*I+g*D+m*z,s[14]=p*A+y*O+g*q+m*K,s[3]=_*T+v*S+x*N+b*L,s[7]=_*w+v*E+x*R+b*j,s[11]=_*M+v*I+x*D+b*z,s[15]=_*A+v*O+x*q+b*K,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],p=e[3],y=e[7],g=e[11],m=e[15];return p*(+s*l*h-i*c*h-s*a*d+r*c*d+i*a*f-r*l*f)+y*(+t*l*f-t*c*d+s*o*d-i*o*f+i*c*u-s*l*u)+g*(+t*c*h-t*a*f-s*o*h+r*o*f+s*a*u-r*c*u)+m*(-i*a*u-t*l*h+t*a*d+i*o*h-r*o*d+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],y=e[13],g=e[14],m=e[15],_=h*g*c-y*d*c+y*l*f-a*g*f-h*l*m+a*d*m,v=p*d*c-u*g*c-p*l*f+o*g*f+u*l*m-o*d*m,x=u*y*c-p*h*c+p*a*f-o*y*f-u*a*m+o*h*m,b=p*h*l-u*y*l-p*a*d+o*y*d+u*a*g-o*h*g,T=t*_+r*v+i*x+s*b;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/T;return e[0]=_*w,e[1]=(y*d*s-h*g*s-y*i*f+r*g*f+h*i*m-r*d*m)*w,e[2]=(a*g*s-y*l*s+y*i*c-r*g*c-a*i*m+r*l*m)*w,e[3]=(h*l*s-a*d*s-h*i*c+r*d*c+a*i*f-r*l*f)*w,e[4]=v*w,e[5]=(u*g*s-p*d*s+p*i*f-t*g*f-u*i*m+t*d*m)*w,e[6]=(p*l*s-o*g*s-p*i*c+t*g*c+o*i*m-t*l*m)*w,e[7]=(o*d*s-u*l*s+u*i*c-t*d*c-o*i*f+t*l*f)*w,e[8]=x*w,e[9]=(p*h*s-u*y*s-p*r*f+t*y*f+u*r*m-t*h*m)*w,e[10]=(o*y*s-p*a*s+p*r*c-t*y*c-o*r*m+t*a*m)*w,e[11]=(u*a*s-o*h*s-u*r*c+t*h*c+o*r*f-t*a*f)*w,e[12]=b*w,e[13]=(u*y*i-p*h*i+p*r*d-t*y*d-u*r*g+t*h*g)*w,e[14]=(p*a*i-o*y*i-p*r*l+t*y*l+o*r*g-t*a*g)*w,e[15]=(o*h*i-u*a*i+u*r*l-t*h*l-o*r*d+t*a*d)*w,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,d=s*c,f=s*u,p=s*h,y=o*u,g=o*h,m=a*h,_=l*c,v=l*u,x=l*h,b=r.x,T=r.y,w=r.z;return i[0]=(1-(y+m))*b,i[1]=(f+x)*b,i[2]=(p-v)*b,i[3]=0,i[4]=(f-x)*T,i[5]=(1-(d+m))*T,i[6]=(g+_)*T,i[7]=0,i[8]=(p+v)*w,i[9]=(g-_)*w,i[10]=(1-(d+y))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Eh.set(i[0],i[1],i[2]).length();const o=Eh.set(i[4],i[5],i[6]).length(),a=Eh.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],qs.copy(this);const c=1/s,u=1/o,h=1/a;return qs.elements[0]*=c,qs.elements[1]*=c,qs.elements[2]*=c,qs.elements[4]*=u,qs.elements[5]*=u,qs.elements[6]*=u,qs.elements[8]*=h,qs.elements[9]*=h,qs.elements[10]*=h,t.setFromRotationMatrix(qs),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=Ba){const l=this.elements,c=2*s/(t-e),u=2*s/(r-i),h=(t+e)/(t-e),d=(r+i)/(r-i);let f,p;if(a===Ba)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===Ex)f=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=Ba){const l=this.elements,c=1/(t-e),u=1/(r-i),h=1/(o-s),d=(t+e)*c,f=(r+i)*u;let p,y;if(a===Ba)p=(o+s)*h,y=-2*h;else if(a===Ex)p=s*h,y=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=y,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}};const Eh=new X,qs=new _n,She=new X(0,0,0),bhe=new X(1,1,1),xl=new X,E0=new X,qi=new X,PF=new _n,IF=new bo;let _c=class GV{constructor(e=0,t=0,r=0,i=GV.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],h=i[2],d=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(wr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-wr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(wr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-wr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(wr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-wr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return PF.makeRotationFromQuaternion(e),this.setFromRotationMatrix(PF,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return IF.setFromEuler(this),this.setFromQuaternion(IF,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};_c.DEFAULT_ORDER="XYZ";let PP=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},whe=0;const LF=new X,Ch=new bo,aa=new _n,C0=new X,zp=new X,The=new X,Mhe=new bo,DF=new X(1,0,0),FF=new X(0,1,0),OF=new X(0,0,1),kF={type:"added"},Ehe={type:"removed"},Ah={type:"childadded",child:null},Lw={type:"childremoved",child:null};let gi=class f_ extends Ic{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:whe++}),this.uuid=Wa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=f_.DEFAULT_UP.clone();const e=new X,t=new _c,r=new bo,i=new X(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new _n},normalMatrix:{value:new It}}),this.matrix=new _n,this.matrixWorld=new _n,this.matrixAutoUpdate=f_.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=f_.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new PP,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ch.setFromAxisAngle(e,t),this.quaternion.multiply(Ch),this}rotateOnWorldAxis(e,t){return Ch.setFromAxisAngle(e,t),this.quaternion.premultiply(Ch),this}rotateX(e){return this.rotateOnAxis(DF,e)}rotateY(e){return this.rotateOnAxis(FF,e)}rotateZ(e){return this.rotateOnAxis(OF,e)}translateOnAxis(e,t){return LF.copy(e).applyQuaternion(this.quaternion),this.position.add(LF.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(DF,e)}translateY(e){return this.translateOnAxis(FF,e)}translateZ(e){return this.translateOnAxis(OF,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(aa.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?C0.copy(e):C0.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),zp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?aa.lookAt(zp,C0,this.up):aa.lookAt(C0,zp,this.up),this.quaternion.setFromRotationMatrix(aa),i&&(aa.extractRotation(i.matrixWorld),Ch.setFromRotationMatrix(aa),this.quaternion.premultiply(Ch.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(kF),Ah.child=e,this.dispatchEvent(Ah),Ah.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Ehe),Lw.child=e,this.dispatchEvent(Lw),Lw.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),aa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),aa.multiply(e.parent.matrixWorld)),e.applyMatrix4(aa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(kF),Ah.child=e,this.dispatchEvent(Ah),Ah.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zp,e,The),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zp,Mhe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),p=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),d.length>0&&(r.skeletons=d),f.length>0&&(r.animations=f),p.length>0&&(r.nodes=p)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}};gi.DEFAULT_UP=new X(0,1,0);gi.DEFAULT_MATRIX_AUTO_UPDATE=!0;gi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Xs=new X,la=new X,Dw=new X,ca=new X,Rh=new X,Nh=new X,UF=new X,Fw=new X,Ow=new X,kw=new X,Uw=new ar,Bw=new ar,zw=new ar;let od=class ad{constructor(e=new X,t=new X,r=new X){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Xs.subVectors(e,t),i.cross(Xs);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Xs.subVectors(i,t),la.subVectors(r,t),Dw.subVectors(e,t);const o=Xs.dot(Xs),a=Xs.dot(la),l=Xs.dot(Dw),c=la.dot(la),u=la.dot(Dw),h=o*c-a*a;if(h===0)return s.set(0,0,0),null;const d=1/h,f=(c*l-a*u)*d,p=(o*u-a*l)*d;return s.set(1-f-p,p,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,ca)===null?!1:ca.x>=0&&ca.y>=0&&ca.x+ca.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,ca)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ca.x),l.addScaledVector(o,ca.y),l.addScaledVector(a,ca.z),l)}static getInterpolatedAttribute(e,t,r,i,s,o){return Uw.setScalar(0),Bw.setScalar(0),zw.setScalar(0),Uw.fromBufferAttribute(e,t),Bw.fromBufferAttribute(e,r),zw.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(Uw,s.x),o.addScaledVector(Bw,s.y),o.addScaledVector(zw,s.z),o}static isFrontFacing(e,t,r,i){return Xs.subVectors(r,t),la.subVectors(e,t),Xs.cross(la).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xs.subVectors(this.c,this.b),la.subVectors(this.a,this.b),Xs.cross(la).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ad.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ad.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return ad.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return ad.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ad.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Rh.subVectors(i,r),Nh.subVectors(s,r),Fw.subVectors(e,r);const l=Rh.dot(Fw),c=Nh.dot(Fw);if(l<=0&&c<=0)return t.copy(r);Ow.subVectors(e,i);const u=Rh.dot(Ow),h=Nh.dot(Ow);if(u>=0&&h<=u)return t.copy(i);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(Rh,o);kw.subVectors(e,s);const f=Rh.dot(kw),p=Nh.dot(kw);if(p>=0&&f<=p)return t.copy(s);const y=f*c-l*p;if(y<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(r).addScaledVector(Nh,a);const g=u*p-f*h;if(g<=0&&h-u>=0&&f-p>=0)return UF.subVectors(s,i),a=(h-u)/(h-u+(f-p)),t.copy(i).addScaledVector(UF,a);const m=1/(g+y+d);return o=y*m,a=d*m,t.copy(r).addScaledVector(Rh,o).addScaledVector(Nh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}};const HV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Sl={h:0,s:0,l:0},A0={h:0,s:0,l:0};function $w(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Ot=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ts){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Jt.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Jt.workingColorSpace){return this.r=e,this.g=t,this.b=r,Jt.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Jt.workingColorSpace){if(e=NP(e,1),t=wr(t,0,1),r=wr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=$w(o,s,e+1/3),this.g=$w(o,s,e),this.b=$w(o,s,e-1/3)}return Jt.toWorkingColorSpace(this,i),this}setStyle(e,t=Ts){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ts){const r=HV[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=jd(e.r),this.g=jd(e.g),this.b=jd(e.b),this}copyLinearToSRGB(e){return this.r=Mw(e.r),this.g=Mw(e.g),this.b=Mw(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ts){return Jt.fromWorkingColorSpace(Gr.copy(this),e),Math.round(wr(Gr.r*255,0,255))*65536+Math.round(wr(Gr.g*255,0,255))*256+Math.round(wr(Gr.b*255,0,255))}getHexString(e=Ts){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Jt.workingColorSpace){Jt.fromWorkingColorSpace(Gr.copy(this),t);const r=Gr.r,i=Gr.g,s=Gr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Jt.workingColorSpace){return Jt.fromWorkingColorSpace(Gr.copy(this),t),e.r=Gr.r,e.g=Gr.g,e.b=Gr.b,e}getStyle(e=Ts){Jt.fromWorkingColorSpace(Gr.copy(this),e);const t=Gr.r,r=Gr.g,i=Gr.b;return e!==Ts?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Sl),this.setHSL(Sl.h+e,Sl.s+t,Sl.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Sl),e.getHSL(A0);const r=Ym(Sl.h,A0.h,t),i=Ym(Sl.s,A0.s,t),s=Ym(Sl.l,A0.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Gr=new Ot;Ot.NAMES=HV;let Che=0,oh=class extends Ic{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Che++}),this.uuid=Wa(),this.name="",this.type="Material",this.blending=Hd,this.side=yc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=mC,this.blendDst=gC,this.blendEquation=lu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ot(0,0,0),this.blendAlpha=0,this.depthFunc=Ff,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=TF,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Sh,this.stencilZFail=Sh,this.stencilZPass=Sh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Hd&&(r.blending=this.blending),this.side!==yc&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==mC&&(r.blendSrc=this.blendSrc),this.blendDst!==gC&&(r.blendDst=this.blendDst),this.blendEquation!==lu&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Ff&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==TF&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Sh&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Sh&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Sh&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}},IP=class extends oh{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new _c,this.combine=bP,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};const Jn=new X,R0=new Ge;let Ds=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=eA,this.updateRanges=[],this.gpuType=Ua,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)R0.fromBufferAttribute(this,t),R0.applyMatrix3(e),this.setXY(t,R0.x,R0.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.applyMatrix3(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.applyMatrix4(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.applyNormalMatrix(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.transformDirection(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=co(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=ln(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=co(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=co(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=co(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=co(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==eA&&(e.usage=this.usage),e}},WV=class extends Ds{constructor(e,t,r){super(new Uint16Array(e),t,r)}},jV=class extends Ds{constructor(e,t,r){super(new Uint32Array(e),t,r)}},gr=class extends Ds{constructor(e,t,r){super(new Float32Array(e),t,r)}},Ahe=0;const _s=new _n,Vw=new gi,Ph=new X,Xi=new sh,$p=new sh,_r=new X;let Gs=class qV extends Ic{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ahe++}),this.uuid=Wa(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(UV(e)?jV:WV)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new It().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return _s.makeRotationFromQuaternion(e),this.applyMatrix4(_s),this}rotateX(e){return _s.makeRotationX(e),this.applyMatrix4(_s),this}rotateY(e){return _s.makeRotationY(e),this.applyMatrix4(_s),this}rotateZ(e){return _s.makeRotationZ(e),this.applyMatrix4(_s),this}translate(e,t,r){return _s.makeTranslation(e,t,r),this.applyMatrix4(_s),this}scale(e,t,r){return _s.makeScale(e,t,r),this.applyMatrix4(_s),this}lookAt(e){return Vw.lookAt(e),Vw.updateMatrix(),this.applyMatrix4(Vw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ph).negate(),this.translate(Ph.x,Ph.y,Ph.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new gr(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new sh);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new X(-1/0,-1/0,-1/0),new X(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Xi.setFromBufferAttribute(s),this.morphTargetsRelative?(_r.addVectors(this.boundingBox.min,Xi.min),this.boundingBox.expandByPoint(_r),_r.addVectors(this.boundingBox.max,Xi.max),this.boundingBox.expandByPoint(_r)):(this.boundingBox.expandByPoint(Xi.min),this.boundingBox.expandByPoint(Xi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $b);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new X,1/0);return}if(e){const r=this.boundingSphere.center;if(Xi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];$p.setFromBufferAttribute(a),this.morphTargetsRelative?(_r.addVectors(Xi.min,$p.min),Xi.expandByPoint(_r),_r.addVectors(Xi.max,$p.max),Xi.expandByPoint(_r)):(Xi.expandByPoint($p.min),Xi.expandByPoint($p.max))}Xi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)_r.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(_r));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)_r.fromBufferAttribute(a,c),l&&(Ph.fromBufferAttribute(e,c),_r.add(Ph)),i=Math.max(i,r.distanceToSquared(_r))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ds(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let M=0;M<r.count;M++)a[M]=new X,l[M]=new X;const c=new X,u=new X,h=new X,d=new Ge,f=new Ge,p=new Ge,y=new X,g=new X;function m(M,A,S){c.fromBufferAttribute(r,M),u.fromBufferAttribute(r,A),h.fromBufferAttribute(r,S),d.fromBufferAttribute(s,M),f.fromBufferAttribute(s,A),p.fromBufferAttribute(s,S),u.sub(c),h.sub(c),f.sub(d),p.sub(d);const E=1/(f.x*p.y-p.x*f.y);isFinite(E)&&(y.copy(u).multiplyScalar(p.y).addScaledVector(h,-f.y).multiplyScalar(E),g.copy(h).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(E),a[M].add(y),a[A].add(y),a[S].add(y),l[M].add(g),l[A].add(g),l[S].add(g))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let M=0,A=_.length;M<A;++M){const S=_[M],E=S.start,I=S.count;for(let O=E,N=E+I;O<N;O+=3)m(e.getX(O+0),e.getX(O+1),e.getX(O+2))}const v=new X,x=new X,b=new X,T=new X;function w(M){b.fromBufferAttribute(i,M),T.copy(b);const A=a[M];v.copy(A),v.sub(b.multiplyScalar(b.dot(A))).normalize(),x.crossVectors(T,A);const E=x.dot(l[M])<0?-1:1;o.setXYZW(M,v.x,v.y,v.z,E)}for(let M=0,A=_.length;M<A;++M){const S=_[M],E=S.start,I=S.count;for(let O=E,N=E+I;O<N;O+=3)w(e.getX(O+0)),w(e.getX(O+1)),w(e.getX(O+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Ds(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,f=r.count;d<f;d++)r.setXYZ(d,0,0,0);const i=new X,s=new X,o=new X,a=new X,l=new X,c=new X,u=new X,h=new X;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),y=e.getX(d+1),g=e.getX(d+2);i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,g),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),a.fromBufferAttribute(r,p),l.fromBufferAttribute(r,y),c.fromBufferAttribute(r,g),a.add(u),l.add(u),c.add(u),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(g,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),r.setXYZ(d+0,u.x,u.y,u.z),r.setXYZ(d+1,u.x,u.y,u.z),r.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)_r.fromBufferAttribute(e,t),_r.normalize(),e.setXYZ(t,_r.x,_r.y,_r.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,d=new c.constructor(l.length*u);let f=0,p=0;for(let y=0,g=l.length;y<g;y++){a.isInterleavedBufferAttribute?f=l[y]*a.data.stride+a.offset:f=l[y]*u;for(let m=0;m<u;m++)d[p++]=c[f++]}return new Ds(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new qV,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const d=c[u],f=e(d,r);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h];u.push(f.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}};const BF=new _n,$c=new Vb,N0=new $b,zF=new X,P0=new X,I0=new X,L0=new X,Gw=new X,D0=new X,$F=new X,F0=new X;let Is=class extends gi{constructor(e=new Gs,t=new IP){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){D0.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],h=s[l];u!==0&&(Gw.fromBufferAttribute(h,e),o?D0.addScaledVector(Gw,u):D0.addScaledVector(Gw.sub(t),u))}t.add(D0)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),N0.copy(r.boundingSphere),N0.applyMatrix4(s),$c.copy(e.ray).recast(e.near),!(N0.containsPoint($c.origin)===!1&&($c.intersectSphere(N0,zF)===null||$c.origin.distanceToSquared(zF)>(e.far-e.near)**2))&&(BF.copy(s).invert(),$c.copy(e.ray).applyMatrix4(BF),!(r.boundingBox!==null&&$c.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,$c)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,d=s.groups,f=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,y=d.length;p<y;p++){const g=d[p],m=o[g.materialIndex],_=Math.max(g.start,f.start),v=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));for(let x=_,b=v;x<b;x+=3){const T=a.getX(x),w=a.getX(x+1),M=a.getX(x+2);i=O0(this,m,e,r,c,u,h,T,w,M),i&&(i.faceIndex=Math.floor(x/3),i.face.materialIndex=g.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),y=Math.min(a.count,f.start+f.count);for(let g=p,m=y;g<m;g+=3){const _=a.getX(g),v=a.getX(g+1),x=a.getX(g+2);i=O0(this,o,e,r,c,u,h,_,v,x),i&&(i.faceIndex=Math.floor(g/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,y=d.length;p<y;p++){const g=d[p],m=o[g.materialIndex],_=Math.max(g.start,f.start),v=Math.min(l.count,Math.min(g.start+g.count,f.start+f.count));for(let x=_,b=v;x<b;x+=3){const T=x,w=x+1,M=x+2;i=O0(this,m,e,r,c,u,h,T,w,M),i&&(i.faceIndex=Math.floor(x/3),i.face.materialIndex=g.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),y=Math.min(l.count,f.start+f.count);for(let g=p,m=y;g<m;g+=3){const _=g,v=g+1,x=g+2;i=O0(this,o,e,r,c,u,h,_,v,x),i&&(i.faceIndex=Math.floor(g/3),t.push(i))}}}};function Rhe(n,e,t,r,i,s,o,a){let l;if(e.side===pi?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===yc,a),l===null)return null;F0.copy(a),F0.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(F0);return c<t.near||c>t.far?null:{distance:c,point:F0.clone(),object:n}}function O0(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,P0),n.getVertexPosition(l,I0),n.getVertexPosition(c,L0);const u=Rhe(n,e,t,r,P0,I0,L0,$F);if(u){const h=new X;od.getBarycoord($F,P0,I0,L0,h),i&&(u.uv=od.getInterpolatedAttribute(i,a,l,c,h,new Ge)),s&&(u.uv1=od.getInterpolatedAttribute(s,a,l,c,h,new Ge)),o&&(u.normal=od.getInterpolatedAttribute(o,a,l,c,h,new X),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new X,materialIndex:0};od.getNormal(P0,I0,L0,d.normal),u.face=d,u.barycoord=h}return u}let LP=class XV extends Gs{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let d=0,f=0;p("z","y","x",-1,-1,r,t,e,o,s,0),p("z","y","x",1,-1,r,t,-e,o,s,1),p("x","z","y",1,1,e,r,t,i,o,2),p("x","z","y",1,-1,e,r,-t,i,o,3),p("x","y","z",1,-1,e,t,r,i,s,4),p("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new gr(c,3)),this.setAttribute("normal",new gr(u,3)),this.setAttribute("uv",new gr(h,2));function p(y,g,m,_,v,x,b,T,w,M,A){const S=x/w,E=b/M,I=x/2,O=b/2,N=T/2,R=w+1,D=M+1;let q=0,L=0;const j=new X;for(let z=0;z<D;z++){const K=z*E-O;for(let U=0;U<R;U++){const te=U*S-I;j[y]=te*_,j[g]=K*v,j[m]=N,c.push(j.x,j.y,j.z),j[y]=0,j[g]=0,j[m]=T>0?1:-1,u.push(j.x,j.y,j.z),h.push(U/w),h.push(1-z/M),q+=1}}for(let z=0;z<M;z++)for(let K=0;K<w;K++){const U=d+K+R*z,te=d+K+R*(z+1),k=d+(K+1)+R*(z+1),V=d+(K+1)+R*z;l.push(U,te,V),l.push(te,k,V),L+=6}a.addGroup(f,L,A),f+=L,d+=q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new XV(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function zf(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function oi(n){const e={};for(let t=0;t<n.length;t++){const r=zf(n[t]);for(const i in r)e[i]=r[i]}return e}function Nhe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function KV(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Jt.workingColorSpace}const YV={clone:zf,merge:oi};var Phe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ihe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;let Xo=class extends oh{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Phe,this.fragmentShader=Ihe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zf(e.uniforms),this.uniformsGroups=Nhe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},ZV=class extends gi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new _n,this.projectionMatrix=new _n,this.projectionMatrixInverse=new _n,this.coordinateSystem=Ba}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const bl=new X,VF=new Ge,GF=new Ge;let Rs=class extends ZV{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Og*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Km*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Og*2*Math.atan(Math.tan(Km*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){bl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(bl.x,bl.y).multiplyScalar(-e/bl.z),bl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(bl.x,bl.y).multiplyScalar(-e/bl.z)}getViewSize(e,t){return this.getViewBounds(e,VF,GF),t.subVectors(GF,VF)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Km*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Ih=-90,Lh=1;let Lhe=class extends gi{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Rs(Ih,Lh,e,t);i.layers=this.layers,this.add(i);const s=new Rs(Ih,Lh,e,t);s.layers=this.layers,this.add(s);const o=new Rs(Ih,Lh,e,t);o.layers=this.layers,this.add(o);const a=new Rs(Ih,Lh,e,t);a.layers=this.layers,this.add(a);const l=new Rs(Ih,Lh,e,t);l.layers=this.layers,this.add(l);const c=new Rs(Ih,Lh,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Ba)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Ex)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,h=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const y=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=y,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(h,d,f),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}},QV=class extends Vs{constructor(e,t,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Of,super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Dhe=class extends vc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new QV(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:lo}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new LP(5,5,5),s=new Xo({name:"CubemapFromEquirect",uniforms:zf(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:pi,blending:Ha});s.uniforms.tEquirect.value=t;const o=new Is(i,s),a=t.minFilter;return t.minFilter===vu&&(t.minFilter=lo),new Lhe(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}};const Hw=new X,Fhe=new X,Ohe=new It;let wa=class{constructor(e=new X(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=Hw.subVectors(r,t).cross(Fhe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(Hw),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Ohe.getNormalMatrix(e),i=this.coplanarPoint(Hw).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Vc=new $b,k0=new X;let DP=class{constructor(e=new wa,t=new wa,r=new wa,i=new wa,s=new wa,o=new wa){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Ba){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],h=i[6],d=i[7],f=i[8],p=i[9],y=i[10],g=i[11],m=i[12],_=i[13],v=i[14],x=i[15];if(r[0].setComponents(l-s,d-c,g-f,x-m).normalize(),r[1].setComponents(l+s,d+c,g+f,x+m).normalize(),r[2].setComponents(l+o,d+u,g+p,x+_).normalize(),r[3].setComponents(l-o,d-u,g-p,x-_).normalize(),r[4].setComponents(l-a,d-h,g-y,x-v).normalize(),t===Ba)r[5].setComponents(l+a,d+h,g+y,x+v).normalize();else if(t===Ex)r[5].setComponents(a,h,y,v).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Vc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Vc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Vc)}intersectsSprite(e){return Vc.center.set(0,0,0),Vc.radius=.7071067811865476,Vc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Vc)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(k0.x=i.normal.x>0?e.max.x:e.min.x,k0.y=i.normal.y>0?e.max.y:e.min.y,k0.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(k0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function JV(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function khe(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,h=c.byteLength,d=n.createBuffer();n.bindBuffer(l,d),n.bufferData(l,c,u),a.onUploadCallback();let f;if(c instanceof Float32Array)f=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=n.SHORT;else if(c instanceof Uint32Array)f=n.UNSIGNED_INT;else if(c instanceof Int32Array)f=n.INT;else if(c instanceof Int8Array)f=n.BYTE;else if(c instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:d,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:h}}function r(a,l,c){const u=l.array,h=l.updateRanges;if(n.bindBuffer(c,a),h.length===0)n.bufferSubData(c,0,u);else{h.sort((f,p)=>f.start-p.start);let d=0;for(let f=1;f<h.length;f++){const p=h[d],y=h[f];y.start<=p.start+p.count+1?p.count=Math.max(p.count,y.start+y.count-p.start):(++d,h[d]=y)}h.length=d+1;for(let f=0,p=h.length;f<p;f++){const y=h[f];n.bufferSubData(c,y.start*u.BYTES_PER_ELEMENT,u,y.start,y.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:s,update:o}}class Gb extends Gs{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,h=e/a,d=t/l,f=[],p=[],y=[],g=[];for(let m=0;m<u;m++){const _=m*d-o;for(let v=0;v<c;v++){const x=v*h-s;p.push(x,-_,0),y.push(0,0,1),g.push(v/a),g.push(1-m/l)}}for(let m=0;m<l;m++)for(let _=0;_<a;_++){const v=_+c*m,x=_+c*(m+1),b=_+1+c*(m+1),T=_+1+c*m;f.push(v,x,T),f.push(x,b,T)}this.setIndex(f),this.setAttribute("position",new gr(p,3)),this.setAttribute("normal",new gr(y,3)),this.setAttribute("uv",new gr(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gb(e.width,e.height,e.widthSegments,e.heightSegments)}}var Uhe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Bhe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,zhe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,$he=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Vhe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Ghe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Hhe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Whe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,jhe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,qhe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Xhe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Khe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Yhe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Zhe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Qhe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Jhe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,ede=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,tde=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,nde=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,rde=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,ide=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,sde=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,ode=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,ade=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,lde=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,cde=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ude=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,hde=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,dde=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,fde=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,pde="gl_FragColor = linearToOutputTexel( gl_FragColor );",mde=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,gde=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,yde=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,vde=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,_de=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,xde=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Sde=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,bde=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,wde=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Tde=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Mde=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Ede=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Cde=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ade=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Rde=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Nde=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Pde=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Ide=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Lde=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Dde=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Fde=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Ode=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,kde=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Ude=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Bde=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,zde=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,$de=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Vde=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Gde=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Hde=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Wde=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,jde=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,qde=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Xde=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Kde=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Yde=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Zde=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Qde=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Jde=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,efe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,tfe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,nfe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,rfe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ife=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,sfe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ofe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,afe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,lfe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,cfe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,ufe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,hfe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,dfe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ffe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,pfe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,mfe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,gfe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,yfe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,vfe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,_fe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,xfe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Sfe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,bfe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,wfe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Tfe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Mfe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Efe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Cfe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Afe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Rfe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Nfe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Pfe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Ife=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Lfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Dfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ffe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Ofe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const kfe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Ufe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Bfe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,zfe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$fe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Vfe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Gfe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Hfe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Wfe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,jfe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,qfe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Xfe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Kfe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Yfe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Zfe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Qfe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jfe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,epe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tpe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,npe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rpe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,ipe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,spe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ope=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ape=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,lpe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cpe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,upe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hpe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,dpe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,fpe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ppe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,mpe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,gpe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ct={alphahash_fragment:Uhe,alphahash_pars_fragment:Bhe,alphamap_fragment:zhe,alphamap_pars_fragment:$he,alphatest_fragment:Vhe,alphatest_pars_fragment:Ghe,aomap_fragment:Hhe,aomap_pars_fragment:Whe,batching_pars_vertex:jhe,batching_vertex:qhe,begin_vertex:Xhe,beginnormal_vertex:Khe,bsdfs:Yhe,iridescence_fragment:Zhe,bumpmap_pars_fragment:Qhe,clipping_planes_fragment:Jhe,clipping_planes_pars_fragment:ede,clipping_planes_pars_vertex:tde,clipping_planes_vertex:nde,color_fragment:rde,color_pars_fragment:ide,color_pars_vertex:sde,color_vertex:ode,common:ade,cube_uv_reflection_fragment:lde,defaultnormal_vertex:cde,displacementmap_pars_vertex:ude,displacementmap_vertex:hde,emissivemap_fragment:dde,emissivemap_pars_fragment:fde,colorspace_fragment:pde,colorspace_pars_fragment:mde,envmap_fragment:gde,envmap_common_pars_fragment:yde,envmap_pars_fragment:vde,envmap_pars_vertex:_de,envmap_physical_pars_fragment:Nde,envmap_vertex:xde,fog_vertex:Sde,fog_pars_vertex:bde,fog_fragment:wde,fog_pars_fragment:Tde,gradientmap_pars_fragment:Mde,lightmap_pars_fragment:Ede,lights_lambert_fragment:Cde,lights_lambert_pars_fragment:Ade,lights_pars_begin:Rde,lights_toon_fragment:Pde,lights_toon_pars_fragment:Ide,lights_phong_fragment:Lde,lights_phong_pars_fragment:Dde,lights_physical_fragment:Fde,lights_physical_pars_fragment:Ode,lights_fragment_begin:kde,lights_fragment_maps:Ude,lights_fragment_end:Bde,logdepthbuf_fragment:zde,logdepthbuf_pars_fragment:$de,logdepthbuf_pars_vertex:Vde,logdepthbuf_vertex:Gde,map_fragment:Hde,map_pars_fragment:Wde,map_particle_fragment:jde,map_particle_pars_fragment:qde,metalnessmap_fragment:Xde,metalnessmap_pars_fragment:Kde,morphinstance_vertex:Yde,morphcolor_vertex:Zde,morphnormal_vertex:Qde,morphtarget_pars_vertex:Jde,morphtarget_vertex:efe,normal_fragment_begin:tfe,normal_fragment_maps:nfe,normal_pars_fragment:rfe,normal_pars_vertex:ife,normal_vertex:sfe,normalmap_pars_fragment:ofe,clearcoat_normal_fragment_begin:afe,clearcoat_normal_fragment_maps:lfe,clearcoat_pars_fragment:cfe,iridescence_pars_fragment:ufe,opaque_fragment:hfe,packing:dfe,premultiplied_alpha_fragment:ffe,project_vertex:pfe,dithering_fragment:mfe,dithering_pars_fragment:gfe,roughnessmap_fragment:yfe,roughnessmap_pars_fragment:vfe,shadowmap_pars_fragment:_fe,shadowmap_pars_vertex:xfe,shadowmap_vertex:Sfe,shadowmask_pars_fragment:bfe,skinbase_vertex:wfe,skinning_pars_vertex:Tfe,skinning_vertex:Mfe,skinnormal_vertex:Efe,specularmap_fragment:Cfe,specularmap_pars_fragment:Afe,tonemapping_fragment:Rfe,tonemapping_pars_fragment:Nfe,transmission_fragment:Pfe,transmission_pars_fragment:Ife,uv_pars_fragment:Lfe,uv_pars_vertex:Dfe,uv_vertex:Ffe,worldpos_vertex:Ofe,background_vert:kfe,background_frag:Ufe,backgroundCube_vert:Bfe,backgroundCube_frag:zfe,cube_vert:$fe,cube_frag:Vfe,depth_vert:Gfe,depth_frag:Hfe,distanceRGBA_vert:Wfe,distanceRGBA_frag:jfe,equirect_vert:qfe,equirect_frag:Xfe,linedashed_vert:Kfe,linedashed_frag:Yfe,meshbasic_vert:Zfe,meshbasic_frag:Qfe,meshlambert_vert:Jfe,meshlambert_frag:epe,meshmatcap_vert:tpe,meshmatcap_frag:npe,meshnormal_vert:rpe,meshnormal_frag:ipe,meshphong_vert:spe,meshphong_frag:ope,meshphysical_vert:ape,meshphysical_frag:lpe,meshtoon_vert:cpe,meshtoon_frag:upe,points_vert:hpe,points_frag:dpe,shadow_vert:fpe,shadow_frag:ppe,sprite_vert:mpe,sprite_frag:gpe},We={common:{diffuse:{value:new Ot(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new It},alphaMap:{value:null},alphaMapTransform:{value:new It},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new It}},envmap:{envMap:{value:null},envMapRotation:{value:new It},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new It}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new It}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new It},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new It},normalScale:{value:new Ge(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new It},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new It}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new It}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new It}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ot(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ot(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new It},alphaTest:{value:0},uvTransform:{value:new It}},sprite:{diffuse:{value:new Ot(16777215)},opacity:{value:1},center:{value:new Ge(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new It},alphaMap:{value:null},alphaMapTransform:{value:new It},alphaTest:{value:0}}},Bo={basic:{uniforms:oi([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.fog]),vertexShader:Ct.meshbasic_vert,fragmentShader:Ct.meshbasic_frag},lambert:{uniforms:oi([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.fog,We.lights,{emissive:{value:new Ot(0)}}]),vertexShader:Ct.meshlambert_vert,fragmentShader:Ct.meshlambert_frag},phong:{uniforms:oi([We.common,We.specularmap,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.fog,We.lights,{emissive:{value:new Ot(0)},specular:{value:new Ot(1118481)},shininess:{value:30}}]),vertexShader:Ct.meshphong_vert,fragmentShader:Ct.meshphong_frag},standard:{uniforms:oi([We.common,We.envmap,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.roughnessmap,We.metalnessmap,We.fog,We.lights,{emissive:{value:new Ot(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ct.meshphysical_vert,fragmentShader:Ct.meshphysical_frag},toon:{uniforms:oi([We.common,We.aomap,We.lightmap,We.emissivemap,We.bumpmap,We.normalmap,We.displacementmap,We.gradientmap,We.fog,We.lights,{emissive:{value:new Ot(0)}}]),vertexShader:Ct.meshtoon_vert,fragmentShader:Ct.meshtoon_frag},matcap:{uniforms:oi([We.common,We.bumpmap,We.normalmap,We.displacementmap,We.fog,{matcap:{value:null}}]),vertexShader:Ct.meshmatcap_vert,fragmentShader:Ct.meshmatcap_frag},points:{uniforms:oi([We.points,We.fog]),vertexShader:Ct.points_vert,fragmentShader:Ct.points_frag},dashed:{uniforms:oi([We.common,We.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ct.linedashed_vert,fragmentShader:Ct.linedashed_frag},depth:{uniforms:oi([We.common,We.displacementmap]),vertexShader:Ct.depth_vert,fragmentShader:Ct.depth_frag},normal:{uniforms:oi([We.common,We.bumpmap,We.normalmap,We.displacementmap,{opacity:{value:1}}]),vertexShader:Ct.meshnormal_vert,fragmentShader:Ct.meshnormal_frag},sprite:{uniforms:oi([We.sprite,We.fog]),vertexShader:Ct.sprite_vert,fragmentShader:Ct.sprite_frag},background:{uniforms:{uvTransform:{value:new It},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ct.background_vert,fragmentShader:Ct.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new It}},vertexShader:Ct.backgroundCube_vert,fragmentShader:Ct.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ct.cube_vert,fragmentShader:Ct.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ct.equirect_vert,fragmentShader:Ct.equirect_frag},distanceRGBA:{uniforms:oi([We.common,We.displacementmap,{referencePosition:{value:new X},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ct.distanceRGBA_vert,fragmentShader:Ct.distanceRGBA_frag},shadow:{uniforms:oi([We.lights,We.fog,{color:{value:new Ot(0)},opacity:{value:1}}]),vertexShader:Ct.shadow_vert,fragmentShader:Ct.shadow_frag}};Bo.physical={uniforms:oi([Bo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new It},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new It},clearcoatNormalScale:{value:new Ge(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new It},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new It},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new It},sheen:{value:0},sheenColor:{value:new Ot(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new It},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new It},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new It},transmissionSamplerSize:{value:new Ge},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new It},attenuationDistance:{value:0},attenuationColor:{value:new Ot(0)},specularColor:{value:new Ot(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new It},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new It},anisotropyVector:{value:new Ge},anisotropyMap:{value:null},anisotropyMapTransform:{value:new It}}]),vertexShader:Ct.meshphysical_vert,fragmentShader:Ct.meshphysical_frag};const U0={r:0,b:0,g:0},Gc=new _c,ype=new _n;function vpe(n,e,t,r,i,s,o){const a=new Ot(0);let l=s===!0?0:1,c,u,h=null,d=0,f=null;function p(_){let v=_.isScene===!0?_.background:null;return v&&v.isTexture&&(v=(_.backgroundBlurriness>0?t:e).get(v)),v}function y(_){let v=!1;const x=p(_);x===null?m(a,l):x&&x.isColor&&(m(x,1),v=!0);const b=n.xr.getEnvironmentBlendMode();b==="additive"?r.buffers.color.setClear(0,0,0,1,o):b==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||v)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function g(_,v){const x=p(v);x&&(x.isCubeTexture||x.mapping===Bb)?(u===void 0&&(u=new Is(new LP(1,1,1),new Xo({name:"BackgroundCubeMaterial",uniforms:zf(Bo.backgroundCube.uniforms),vertexShader:Bo.backgroundCube.vertexShader,fragmentShader:Bo.backgroundCube.fragmentShader,side:pi,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(b,T,w){this.matrixWorld.copyPosition(w.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),Gc.copy(v.backgroundRotation),Gc.x*=-1,Gc.y*=-1,Gc.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(Gc.y*=-1,Gc.z*=-1),u.material.uniforms.envMap.value=x,u.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(ype.makeRotationFromEuler(Gc)),u.material.toneMapped=Jt.getTransfer(x.colorSpace)!==Tn,(h!==x||d!==x.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,h=x,d=x.version,f=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new Is(new Gb(2,2),new Xo({name:"BackgroundMaterial",uniforms:zf(Bo.background.uniforms),vertexShader:Bo.background.vertexShader,fragmentShader:Bo.background.fragmentShader,side:yc,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=Jt.getTransfer(x.colorSpace)!==Tn,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(h!==x||d!==x.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,h=x,d=x.version,f=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function m(_,v){_.getRGB(U0,KV(n)),r.buffers.color.setClear(U0.r,U0.g,U0.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(_,v=1){a.set(_),l=v,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,m(a,l)},render:y,addToRenderList:g}}function _pe(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=d(null);let s=i,o=!1;function a(S,E,I,O,N){let R=!1;const D=h(O,I,E);s!==D&&(s=D,c(s.object)),R=f(S,O,I,N),R&&p(S,O,I,N),N!==null&&e.update(N,n.ELEMENT_ARRAY_BUFFER),(R||o)&&(o=!1,x(S,E,I,O),N!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(N).buffer))}function l(){return n.createVertexArray()}function c(S){return n.bindVertexArray(S)}function u(S){return n.deleteVertexArray(S)}function h(S,E,I){const O=I.wireframe===!0;let N=r[S.id];N===void 0&&(N={},r[S.id]=N);let R=N[E.id];R===void 0&&(R={},N[E.id]=R);let D=R[O];return D===void 0&&(D=d(l()),R[O]=D),D}function d(S){const E=[],I=[],O=[];for(let N=0;N<t;N++)E[N]=0,I[N]=0,O[N]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:E,enabledAttributes:I,attributeDivisors:O,object:S,attributes:{},index:null}}function f(S,E,I,O){const N=s.attributes,R=E.attributes;let D=0;const q=I.getAttributes();for(const L in q)if(q[L].location>=0){const z=N[L];let K=R[L];if(K===void 0&&(L==="instanceMatrix"&&S.instanceMatrix&&(K=S.instanceMatrix),L==="instanceColor"&&S.instanceColor&&(K=S.instanceColor)),z===void 0||z.attribute!==K||K&&z.data!==K.data)return!0;D++}return s.attributesNum!==D||s.index!==O}function p(S,E,I,O){const N={},R=E.attributes;let D=0;const q=I.getAttributes();for(const L in q)if(q[L].location>=0){let z=R[L];z===void 0&&(L==="instanceMatrix"&&S.instanceMatrix&&(z=S.instanceMatrix),L==="instanceColor"&&S.instanceColor&&(z=S.instanceColor));const K={};K.attribute=z,z&&z.data&&(K.data=z.data),N[L]=K,D++}s.attributes=N,s.attributesNum=D,s.index=O}function y(){const S=s.newAttributes;for(let E=0,I=S.length;E<I;E++)S[E]=0}function g(S){m(S,0)}function m(S,E){const I=s.newAttributes,O=s.enabledAttributes,N=s.attributeDivisors;I[S]=1,O[S]===0&&(n.enableVertexAttribArray(S),O[S]=1),N[S]!==E&&(n.vertexAttribDivisor(S,E),N[S]=E)}function _(){const S=s.newAttributes,E=s.enabledAttributes;for(let I=0,O=E.length;I<O;I++)E[I]!==S[I]&&(n.disableVertexAttribArray(I),E[I]=0)}function v(S,E,I,O,N,R,D){D===!0?n.vertexAttribIPointer(S,E,I,N,R):n.vertexAttribPointer(S,E,I,O,N,R)}function x(S,E,I,O){y();const N=O.attributes,R=I.getAttributes(),D=E.defaultAttributeValues;for(const q in R){const L=R[q];if(L.location>=0){let j=N[q];if(j===void 0&&(q==="instanceMatrix"&&S.instanceMatrix&&(j=S.instanceMatrix),q==="instanceColor"&&S.instanceColor&&(j=S.instanceColor)),j!==void 0){const z=j.normalized,K=j.itemSize,U=e.get(j);if(U===void 0)continue;const te=U.buffer,k=U.type,V=U.bytesPerElement,Q=k===n.INT||k===n.UNSIGNED_INT||j.gpuType===wP;if(j.isInterleavedBufferAttribute){const le=j.data,pe=le.stride,ue=j.offset;if(le.isInstancedInterleavedBuffer){for(let be=0;be<L.locationSize;be++)m(L.location+be,le.meshPerAttribute);S.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let be=0;be<L.locationSize;be++)g(L.location+be);n.bindBuffer(n.ARRAY_BUFFER,te);for(let be=0;be<L.locationSize;be++)v(L.location+be,K/L.locationSize,k,z,pe*V,(ue+K/L.locationSize*be)*V,Q)}else{if(j.isInstancedBufferAttribute){for(let le=0;le<L.locationSize;le++)m(L.location+le,j.meshPerAttribute);S.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=j.meshPerAttribute*j.count)}else for(let le=0;le<L.locationSize;le++)g(L.location+le);n.bindBuffer(n.ARRAY_BUFFER,te);for(let le=0;le<L.locationSize;le++)v(L.location+le,K/L.locationSize,k,z,K*V,K/L.locationSize*le*V,Q)}}else if(D!==void 0){const z=D[q];if(z!==void 0)switch(z.length){case 2:n.vertexAttrib2fv(L.location,z);break;case 3:n.vertexAttrib3fv(L.location,z);break;case 4:n.vertexAttrib4fv(L.location,z);break;default:n.vertexAttrib1fv(L.location,z)}}}}_()}function b(){M();for(const S in r){const E=r[S];for(const I in E){const O=E[I];for(const N in O)u(O[N].object),delete O[N];delete E[I]}delete r[S]}}function T(S){if(r[S.id]===void 0)return;const E=r[S.id];for(const I in E){const O=E[I];for(const N in O)u(O[N].object),delete O[N];delete E[I]}delete r[S.id]}function w(S){for(const E in r){const I=r[E];if(I[S.id]===void 0)continue;const O=I[S.id];for(const N in O)u(O[N].object),delete O[N];delete I[S.id]}}function M(){A(),o=!0,s!==i&&(s=i,c(s.object))}function A(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:M,resetDefaultState:A,dispose:b,releaseStatesOfGeometry:T,releaseStatesOfProgram:w,initAttributes:y,enableAttribute:g,disableUnusedAttributes:_}}function xpe(n,e,t){let r;function i(c){r=c}function s(c,u){n.drawArrays(r,c,u),t.update(u,r,1)}function o(c,u,h){h!==0&&(n.drawArraysInstanced(r,c,u,h),t.update(u,r,h))}function a(c,u,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,h);let f=0;for(let p=0;p<h;p++)f+=u[p];t.update(f,r,1)}function l(c,u,h,d){if(h===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<c.length;p++)o(c[p],u[p],d[p]);else{f.multiDrawArraysInstancedWEBGL(r,c,0,u,0,d,0,h);let p=0;for(let y=0;y<h;y++)p+=u[y];for(let y=0;y<d.length;y++)t.update(p,r,d[y])}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Spe(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const w=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(w.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(w){return!(w!==ho&&r.convert(w)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(w){const M=w===sp&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(w!==il&&r.convert(w)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&w!==Ua&&!M)}function l(w){if(w==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";w="mediump"}return w==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const h=t.logarithmicDepthBuffer===!0,d=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control");if(d===!0){const w=e.get("EXT_clip_control");w.clipControlEXT(w.LOWER_LEFT_EXT,w.ZERO_TO_ONE_EXT)}const f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),x=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),b=p>0,T=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:h,reverseDepthBuffer:d,maxTextures:f,maxVertexTextures:p,maxTextureSize:y,maxCubemapSize:g,maxAttributes:m,maxVertexUniforms:_,maxVaryings:v,maxFragmentUniforms:x,vertexTextures:b,maxSamples:T}}function bpe(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new wa,a=new It,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||r!==0||i;return i=d,r=h.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,f){const p=h.clippingPlanes,y=h.clipIntersection,g=h.clipShadows,m=n.get(h);if(!i||p===null||p.length===0||s&&!g)s?u(null):c();else{const _=s?0:r,v=_*4;let x=m.clippingState||null;l.value=x,x=u(p,d,v,f);for(let b=0;b!==v;++b)x[b]=t[b];m.clippingState=x,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(h,d,f,p){const y=h!==null?h.length:0;let g=null;if(y!==0){if(g=l.value,p!==!0||g===null){const m=f+y*4,_=d.matrixWorldInverse;a.getNormalMatrix(_),(g===null||g.length<m)&&(g=new Float32Array(m));for(let v=0,x=f;v!==y;++v,x+=4)o.copy(h[v]).applyMatrix4(_,a),o.normal.toArray(g,x),g[x+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,g}}function wpe(n){let e=new WeakMap;function t(o,a){return a===TC?o.mapping=Of:a===MC&&(o.mapping=kf),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===TC||a===MC)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new Dhe(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}let FP=class extends ZV{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const bd=4,HF=[.125,.215,.35,.446,.526,.582],cu=20,Ww=new FP,WF=new Ot;let jw=null,qw=0,Xw=0,Kw=!1;const nu=(1+Math.sqrt(5))/2,Dh=1/nu,jF=[new X(-nu,Dh,0),new X(nu,Dh,0),new X(-Dh,0,nu),new X(Dh,0,nu),new X(0,nu,-Dh),new X(0,nu,Dh),new X(-1,1,-1),new X(1,1,-1),new X(-1,1,1),new X(1,1,1)];let qF=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){jw=this._renderer.getRenderTarget(),qw=this._renderer.getActiveCubeFace(),Xw=this._renderer.getActiveMipmapLevel(),Kw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=YF(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=KF(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(jw,qw,Xw),this._renderer.xr.enabled=Kw,e.scissorTest=!1,B0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Of||e.mapping===kf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),jw=this._renderer.getRenderTarget(),qw=this._renderer.getActiveCubeFace(),Xw=this._renderer.getActiveMipmapLevel(),Kw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:lo,minFilter:lo,generateMipmaps:!1,type:sp,format:ho,colorSpace:Pc,depthBuffer:!1},i=XF(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=XF(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Tpe(s)),this._blurMaterial=Mpe(s,e,t)}return i}_compileMaterial(e){const t=new Is(this._lodPlanes[0],e);this._renderer.compile(t,Ww)}_sceneToCubeUV(e,t,r,i){const a=new Rs(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,d=u.toneMapping;u.getClearColor(WF),u.toneMapping=uc,u.autoClear=!1;const f=new IP({name:"PMREM.Background",side:pi,depthWrite:!1,depthTest:!1}),p=new Is(new LP,f);let y=!1;const g=e.background;g?g.isColor&&(f.color.copy(g),e.background=null,y=!0):(f.color.copy(WF),y=!0);for(let m=0;m<6;m++){const _=m%3;_===0?(a.up.set(0,l[m],0),a.lookAt(c[m],0,0)):_===1?(a.up.set(0,0,l[m]),a.lookAt(0,c[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,c[m]));const v=this._cubeSize;B0(i,_*v,m>2?v:0,v,v),u.setRenderTarget(i),y&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=d,u.autoClear=h,e.background=g}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Of||e.mapping===kf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=YF()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=KF());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Is(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;B0(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,Ww)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=jF[(i-s-1)%jF.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new Is(this._lodPlanes[i],c),d=c.uniforms,f=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*cu-1),y=s/p,g=isFinite(s)?1+Math.floor(u*y):cu;g>cu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${cu}`);const m=[];let _=0;for(let w=0;w<cu;++w){const M=w/y,A=Math.exp(-M*M/2);m.push(A),w===0?_+=A:w<g&&(_+=2*A)}for(let w=0;w<m.length;w++)m[w]=m[w]/_;d.envMap.value=e.texture,d.samples.value=g,d.weights.value=m,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:v}=this;d.dTheta.value=p,d.mipInt.value=v-r;const x=this._sizeLods[i],b=3*x*(i>v-bd?i-v+bd:0),T=4*(this._cubeSize-x);B0(t,b,T,3*x,2*x),l.setRenderTarget(t),l.render(h,Ww)}};function Tpe(n){const e=[],t=[],r=[];let i=n;const s=n-bd+1+HF.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-bd?l=HF[o-n+bd-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,p=6,y=3,g=2,m=1,_=new Float32Array(y*p*f),v=new Float32Array(g*p*f),x=new Float32Array(m*p*f);for(let T=0;T<f;T++){const w=T%3*2/3-1,M=T>2?0:-1,A=[w,M,0,w+2/3,M,0,w+2/3,M+1,0,w,M,0,w+2/3,M+1,0,w,M+1,0];_.set(A,y*p*T),v.set(d,g*p*T);const S=[T,T,T,T,T,T];x.set(S,m*p*T)}const b=new Gs;b.setAttribute("position",new Ds(_,y)),b.setAttribute("uv",new Ds(v,g)),b.setAttribute("faceIndex",new Ds(x,m)),e.push(b),i>bd&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function XF(n,e,t){const r=new vc(n,e,t);return r.texture.mapping=Bb,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function B0(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function Mpe(n,e,t){const r=new Float32Array(cu),i=new X(0,1,0);return new Xo({name:"SphericalGaussianBlur",defines:{n:cu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:OP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ha,depthTest:!1,depthWrite:!1})}function KF(){return new Xo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:OP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ha,depthTest:!1,depthWrite:!1})}function YF(){return new Xo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:OP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ha,depthTest:!1,depthWrite:!1})}function OP(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Epe(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===TC||l===MC,u=l===Of||l===kf;if(c||u){let h=e.get(a);const d=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==d)return t===null&&(t=new qF(n)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{const f=a.image;return c&&f&&f.height>0||u&&f&&i(f)?(t===null&&(t=new qF(n)),h=c?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",s),h.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function Cpe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&h_("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Ape(n,e,t,r){const i={},s=new WeakMap;function o(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);for(const p in d.morphAttributes){const y=d.morphAttributes[p];for(let g=0,m=y.length;g<m;g++)e.remove(y[g])}d.removeEventListener("dispose",o),delete i[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(h,d){return i[d.id]===!0||(d.addEventListener("dispose",o),i[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const p in d)e.update(d[p],n.ARRAY_BUFFER);const f=h.morphAttributes;for(const p in f){const y=f[p];for(let g=0,m=y.length;g<m;g++)e.update(y[g],n.ARRAY_BUFFER)}}function c(h){const d=[],f=h.index,p=h.attributes.position;let y=0;if(f!==null){const _=f.array;y=f.version;for(let v=0,x=_.length;v<x;v+=3){const b=_[v+0],T=_[v+1],w=_[v+2];d.push(b,T,T,w,w,b)}}else if(p!==void 0){const _=p.array;y=p.version;for(let v=0,x=_.length/3-1;v<x;v+=3){const b=v+0,T=v+1,w=v+2;d.push(b,T,T,w,w,b)}}else return;const g=new(UV(d)?jV:WV)(d,1);g.version=y;const m=s.get(h);m&&e.remove(m),s.set(h,g)}function u(h){const d=s.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function Rpe(n,e,t){let r;function i(d){r=d}let s,o;function a(d){s=d.type,o=d.bytesPerElement}function l(d,f){n.drawElements(r,f,s,d*o),t.update(f,r,1)}function c(d,f,p){p!==0&&(n.drawElementsInstanced(r,f,s,d*o,p),t.update(f,r,p))}function u(d,f,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,f,0,s,d,0,p);let g=0;for(let m=0;m<p;m++)g+=f[m];t.update(g,r,1)}function h(d,f,p,y){if(p===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let m=0;m<d.length;m++)c(d[m]/o,f[m],y[m]);else{g.multiDrawElementsInstancedWEBGL(r,f,0,s,d,0,y,0,p);let m=0;for(let _=0;_<p;_++)m+=f[_];for(let _=0;_<y.length;_++)t.update(m,r,y[_])}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function Npe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Ppe(n,e,t){const r=new WeakMap,i=new ar;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=u!==void 0?u.length:0;let d=r.get(a);if(d===void 0||d.count!==h){let S=function(){M.dispose(),r.delete(a),a.removeEventListener("dispose",S)};var f=S;d!==void 0&&d.texture.dispose();const p=a.morphAttributes.position!==void 0,y=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,m=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],v=a.morphAttributes.color||[];let x=0;p===!0&&(x=1),y===!0&&(x=2),g===!0&&(x=3);let b=a.attributes.position.count*x,T=1;b>e.maxTextureSize&&(T=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);const w=new Float32Array(b*T*4*h),M=new $V(w,b,T,h);M.type=Ua,M.needsUpdate=!0;const A=x*4;for(let E=0;E<h;E++){const I=m[E],O=_[E],N=v[E],R=b*T*4*E;for(let D=0;D<I.count;D++){const q=D*A;p===!0&&(i.fromBufferAttribute(I,D),w[R+q+0]=i.x,w[R+q+1]=i.y,w[R+q+2]=i.z,w[R+q+3]=0),y===!0&&(i.fromBufferAttribute(O,D),w[R+q+4]=i.x,w[R+q+5]=i.y,w[R+q+6]=i.z,w[R+q+7]=0),g===!0&&(i.fromBufferAttribute(N,D),w[R+q+8]=i.x,w[R+q+9]=i.y,w[R+q+10]=i.z,w[R+q+11]=N.itemSize===4?i.w:1)}}d={count:h,texture:M,size:new Ge(b,T)},r.set(a,d),a.addEventListener("dispose",S)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let p=0;for(let g=0;g<c.length;g++)p+=c[g];const y=a.morphTargetsRelative?1:1-p;l.getUniforms().setValue(n,"morphTargetBaseInfluence",y),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",d.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",d.size)}return{update:s}}function Ipe(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,h=e.get(l,u);if(i.get(h)!==c&&(e.update(h),i.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;i.get(d)!==c&&(d.update(),i.set(d,c))}return h}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}let eG=class extends Vs{constructor(e,t,r,i,s,o,a,l,c,u=Wd){if(u!==Wd&&u!==Bf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Wd&&(r=Hu),r===void 0&&u===Bf&&(r=Uf),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ps,this.minFilter=l!==void 0?l:Ps,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}};const tG=new Vs,ZF=new eG(1,1),nG=new $V,rG=new _he,iG=new QV,QF=[],JF=[],eO=new Float32Array(16),tO=new Float32Array(9),nO=new Float32Array(4);function op(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=QF[i];if(s===void 0&&(s=new Float32Array(i),QF[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function yr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function vr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Hb(n,e){let t=JF[e];t===void 0&&(t=new Int32Array(e),JF[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Lpe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Dpe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(yr(t,e))return;n.uniform2fv(this.addr,e),vr(t,e)}}function Fpe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(yr(t,e))return;n.uniform3fv(this.addr,e),vr(t,e)}}function Ope(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(yr(t,e))return;n.uniform4fv(this.addr,e),vr(t,e)}}function kpe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(yr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),vr(t,e)}else{if(yr(t,r))return;nO.set(r),n.uniformMatrix2fv(this.addr,!1,nO),vr(t,r)}}function Upe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(yr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),vr(t,e)}else{if(yr(t,r))return;tO.set(r),n.uniformMatrix3fv(this.addr,!1,tO),vr(t,r)}}function Bpe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(yr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),vr(t,e)}else{if(yr(t,r))return;eO.set(r),n.uniformMatrix4fv(this.addr,!1,eO),vr(t,r)}}function zpe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function $pe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(yr(t,e))return;n.uniform2iv(this.addr,e),vr(t,e)}}function Vpe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(yr(t,e))return;n.uniform3iv(this.addr,e),vr(t,e)}}function Gpe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(yr(t,e))return;n.uniform4iv(this.addr,e),vr(t,e)}}function Hpe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Wpe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(yr(t,e))return;n.uniform2uiv(this.addr,e),vr(t,e)}}function jpe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(yr(t,e))return;n.uniform3uiv(this.addr,e),vr(t,e)}}function qpe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(yr(t,e))return;n.uniform4uiv(this.addr,e),vr(t,e)}}function Xpe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(ZF.compareFunction=FV,s=ZF):s=tG,t.setTexture2D(e||s,i)}function Kpe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||rG,i)}function Ype(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||iG,i)}function Zpe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||nG,i)}function Qpe(n){switch(n){case 5126:return Lpe;case 35664:return Dpe;case 35665:return Fpe;case 35666:return Ope;case 35674:return kpe;case 35675:return Upe;case 35676:return Bpe;case 5124:case 35670:return zpe;case 35667:case 35671:return $pe;case 35668:case 35672:return Vpe;case 35669:case 35673:return Gpe;case 5125:return Hpe;case 36294:return Wpe;case 36295:return jpe;case 36296:return qpe;case 35678:case 36198:case 36298:case 36306:case 35682:return Xpe;case 35679:case 36299:case 36307:return Kpe;case 35680:case 36300:case 36308:case 36293:return Ype;case 36289:case 36303:case 36311:case 36292:return Zpe}}function Jpe(n,e){n.uniform1fv(this.addr,e)}function eme(n,e){const t=op(e,this.size,2);n.uniform2fv(this.addr,t)}function tme(n,e){const t=op(e,this.size,3);n.uniform3fv(this.addr,t)}function nme(n,e){const t=op(e,this.size,4);n.uniform4fv(this.addr,t)}function rme(n,e){const t=op(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function ime(n,e){const t=op(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function sme(n,e){const t=op(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function ome(n,e){n.uniform1iv(this.addr,e)}function ame(n,e){n.uniform2iv(this.addr,e)}function lme(n,e){n.uniform3iv(this.addr,e)}function cme(n,e){n.uniform4iv(this.addr,e)}function ume(n,e){n.uniform1uiv(this.addr,e)}function hme(n,e){n.uniform2uiv(this.addr,e)}function dme(n,e){n.uniform3uiv(this.addr,e)}function fme(n,e){n.uniform4uiv(this.addr,e)}function pme(n,e,t){const r=this.cache,i=e.length,s=Hb(t,i);yr(r,s)||(n.uniform1iv(this.addr,s),vr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||tG,s[o])}function mme(n,e,t){const r=this.cache,i=e.length,s=Hb(t,i);yr(r,s)||(n.uniform1iv(this.addr,s),vr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||rG,s[o])}function gme(n,e,t){const r=this.cache,i=e.length,s=Hb(t,i);yr(r,s)||(n.uniform1iv(this.addr,s),vr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||iG,s[o])}function yme(n,e,t){const r=this.cache,i=e.length,s=Hb(t,i);yr(r,s)||(n.uniform1iv(this.addr,s),vr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||nG,s[o])}function vme(n){switch(n){case 5126:return Jpe;case 35664:return eme;case 35665:return tme;case 35666:return nme;case 35674:return rme;case 35675:return ime;case 35676:return sme;case 5124:case 35670:return ome;case 35667:case 35671:return ame;case 35668:case 35672:return lme;case 35669:case 35673:return cme;case 5125:return ume;case 36294:return hme;case 36295:return dme;case 36296:return fme;case 35678:case 36198:case 36298:case 36306:case 35682:return pme;case 35679:case 36299:case 36307:return mme;case 35680:case 36300:case 36308:case 36293:return gme;case 36289:case 36303:case 36311:case 36292:return yme}}class _me{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=Qpe(t.type)}}class xme{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=vme(t.type)}}class Sme{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const Yw=/(\w+)(\])?(\[|\.)?/g;function rO(n,e){n.seq.push(e),n.map[e.id]=e}function bme(n,e,t){const r=n.name,i=r.length;for(Yw.lastIndex=0;;){const s=Yw.exec(r),o=Yw.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){rO(t,c===void 0?new _me(a,n,e):new xme(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new Sme(a),rO(t,h)),t=h}}}class p_{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);bme(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function iO(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const wme=37297;let Tme=0;function Mme(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function Eme(n){const e=Jt.getPrimaries(Jt.workingColorSpace),t=Jt.getPrimaries(n);let r;switch(e===t?r="":e===Mx&&t===Tx?r="LinearDisplayP3ToLinearSRGB":e===Tx&&t===Mx&&(r="LinearSRGBToLinearDisplayP3"),n){case Pc:case zb:return[r,"LinearTransferOETF"];case Ts:case RP:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function sO(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+Mme(n.getShaderSource(e),o)}else return i}function Cme(n,e){const t=Eme(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Ame(n,e){let t;switch(e){case Nue:t="Linear";break;case Pue:t="Reinhard";break;case Iue:t="Cineon";break;case Lue:t="ACESFilmic";break;case Fue:t="AgX";break;case Oue:t="Neutral";break;case Due:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const z0=new X;function Rme(){Jt.getLuminanceCoefficients(z0);const n=z0.x.toFixed(4),e=z0.y.toFixed(4),t=z0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Nme(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Mm).join(`
`)}function Pme(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Ime(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Mm(n){return n!==""}function oO(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function aO(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Lme=/^[ \t]*#include +<([\w\d./]+)>/gm;function rA(n){return n.replace(Lme,Fme)}const Dme=new Map;function Fme(n,e){let t=Ct[e];if(t===void 0){const r=Dme.get(e);if(r!==void 0)t=Ct[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return rA(t)}const Ome=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function lO(n){return n.replace(Ome,kme)}function kme(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function cO(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Ume(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===bV?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===cue?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===va&&(e="SHADOWMAP_TYPE_VSM"),e}function Bme(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Of:case kf:e="ENVMAP_TYPE_CUBE";break;case Bb:e="ENVMAP_TYPE_CUBE_UV";break}return e}function zme(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case kf:e="ENVMAP_MODE_REFRACTION";break}return e}function $me(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case bP:e="ENVMAP_BLENDING_MULTIPLY";break;case Aue:e="ENVMAP_BLENDING_MIX";break;case Rue:e="ENVMAP_BLENDING_ADD";break}return e}function Vme(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Gme(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Ume(t),c=Bme(t),u=zme(t),h=$me(t),d=Vme(t),f=Nme(t),p=Pme(s),y=i.createProgram();let g,m,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Mm).join(`
`),g.length>0&&(g+=`
`),m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Mm).join(`
`),m.length>0&&(m+=`
`)):(g=[cO(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Mm).join(`
`),m=[cO(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==uc?"#define TONE_MAPPING":"",t.toneMapping!==uc?Ct.tonemapping_pars_fragment:"",t.toneMapping!==uc?Ame("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Ct.colorspace_pars_fragment,Cme("linearToOutputTexel",t.outputColorSpace),Rme(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Mm).join(`
`)),o=rA(o),o=oO(o,t),o=aO(o,t),a=rA(a),a=oO(a,t),a=aO(a,t),o=lO(o),a=lO(a),t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,m=["#define varying in",t.glslVersion===MF?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===MF?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const v=_+g+o,x=_+m+a,b=iO(i,i.VERTEX_SHADER,v),T=iO(i,i.FRAGMENT_SHADER,x);i.attachShader(y,b),i.attachShader(y,T),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y);function w(E){if(n.debug.checkShaderErrors){const I=i.getProgramInfoLog(y).trim(),O=i.getShaderInfoLog(b).trim(),N=i.getShaderInfoLog(T).trim();let R=!0,D=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(R=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,y,b,T);else{const q=sO(i,b,"vertex"),L=sO(i,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Material Name: `+E.name+`
Material Type: `+E.type+`

Program Info Log: `+I+`
`+q+`
`+L)}else I!==""?console.warn("THREE.WebGLProgram: Program Info Log:",I):(O===""||N==="")&&(D=!1);D&&(E.diagnostics={runnable:R,programLog:I,vertexShader:{log:O,prefix:g},fragmentShader:{log:N,prefix:m}})}i.deleteShader(b),i.deleteShader(T),M=new p_(i,y),A=Ime(i,y)}let M;this.getUniforms=function(){return M===void 0&&w(this),M};let A;this.getAttributes=function(){return A===void 0&&w(this),A};let S=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return S===!1&&(S=i.getProgramParameter(y,wme)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Tme++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=b,this.fragmentShader=T,this}let Hme=0;class Wme{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new jme(e),t.set(e,r)),r}}class jme{constructor(e){this.id=Hme++,this.code=e,this.usedTimes=0}}function qme(n,e,t,r,i,s,o){const a=new PP,l=new Wme,c=new Set,u=[],h=i.logarithmicDepthBuffer,d=i.reverseDepthBuffer,f=i.vertexTextures;let p=i.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(S){return c.add(S),S===0?"uv":`uv${S}`}function m(S,E,I,O,N){const R=O.fog,D=N.geometry,q=S.isMeshStandardMaterial?O.environment:null,L=(S.isMeshStandardMaterial?t:e).get(S.envMap||q),j=L&&L.mapping===Bb?L.image.height:null,z=y[S.type];S.precision!==null&&(p=i.getMaxPrecision(S.precision),p!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",p,"instead."));const K=D.morphAttributes.position||D.morphAttributes.normal||D.morphAttributes.color,U=K!==void 0?K.length:0;let te=0;D.morphAttributes.position!==void 0&&(te=1),D.morphAttributes.normal!==void 0&&(te=2),D.morphAttributes.color!==void 0&&(te=3);let k,V,Q,le;if(z){const pn=Bo[z];k=pn.vertexShader,V=pn.fragmentShader}else k=S.vertexShader,V=S.fragmentShader,l.update(S),Q=l.getVertexShaderID(S),le=l.getFragmentShaderID(S);const pe=n.getRenderTarget(),ue=N.isInstancedMesh===!0,be=N.isBatchedMesh===!0,Pe=!!S.map,we=!!S.matcap,G=!!L,He=!!S.aoMap,$e=!!S.lightMap,Ze=!!S.bumpMap,De=!!S.normalMap,ot=!!S.displacementMap,Je=!!S.emissiveMap,B=!!S.metalnessMap,C=!!S.roughnessMap,ae=S.anisotropy>0,oe=S.clearcoat>0,Te=S.dispersion>0,Se=S.iridescence>0,Xe=S.sheen>0,Ie=S.transmission>0,Oe=ae&&!!S.anisotropyMap,pt=oe&&!!S.clearcoatMap,Le=oe&&!!S.clearcoatNormalMap,Fe=oe&&!!S.clearcoatRoughnessMap,at=Se&&!!S.iridescenceMap,ut=Se&&!!S.iridescenceThicknessMap,Ne=Xe&&!!S.sheenColorMap,Y=Xe&&!!S.sheenRoughnessMap,W=!!S.specularMap,ve=!!S.specularColorMap,$=!!S.specularIntensityMap,me=Ie&&!!S.transmissionMap,J=Ie&&!!S.thicknessMap,he=!!S.gradientMap,Ee=!!S.alphaMap,Re=S.alphaTest>0,qe=!!S.alphaHash,vt=!!S.extensions;let on=uc;S.toneMapped&&(pe===null||pe.isXRRenderTarget===!0)&&(on=n.toneMapping);const dt={shaderID:z,shaderType:S.type,shaderName:S.name,vertexShader:k,fragmentShader:V,defines:S.defines,customVertexShaderID:Q,customFragmentShaderID:le,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:p,batching:be,batchingColor:be&&N._colorsTexture!==null,instancing:ue,instancingColor:ue&&N.instanceColor!==null,instancingMorph:ue&&N.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:pe===null?n.outputColorSpace:pe.isXRRenderTarget===!0?pe.texture.colorSpace:Pc,alphaToCoverage:!!S.alphaToCoverage,map:Pe,matcap:we,envMap:G,envMapMode:G&&L.mapping,envMapCubeUVHeight:j,aoMap:He,lightMap:$e,bumpMap:Ze,normalMap:De,displacementMap:f&&ot,emissiveMap:Je,normalMapObjectSpace:De&&S.normalMapType===zue,normalMapTangentSpace:De&&S.normalMapType===DV,metalnessMap:B,roughnessMap:C,anisotropy:ae,anisotropyMap:Oe,clearcoat:oe,clearcoatMap:pt,clearcoatNormalMap:Le,clearcoatRoughnessMap:Fe,dispersion:Te,iridescence:Se,iridescenceMap:at,iridescenceThicknessMap:ut,sheen:Xe,sheenColorMap:Ne,sheenRoughnessMap:Y,specularMap:W,specularColorMap:ve,specularIntensityMap:$,transmission:Ie,transmissionMap:me,thicknessMap:J,gradientMap:he,opaque:S.transparent===!1&&S.blending===Hd&&S.alphaToCoverage===!1,alphaMap:Ee,alphaTest:Re,alphaHash:qe,combine:S.combine,mapUv:Pe&&g(S.map.channel),aoMapUv:He&&g(S.aoMap.channel),lightMapUv:$e&&g(S.lightMap.channel),bumpMapUv:Ze&&g(S.bumpMap.channel),normalMapUv:De&&g(S.normalMap.channel),displacementMapUv:ot&&g(S.displacementMap.channel),emissiveMapUv:Je&&g(S.emissiveMap.channel),metalnessMapUv:B&&g(S.metalnessMap.channel),roughnessMapUv:C&&g(S.roughnessMap.channel),anisotropyMapUv:Oe&&g(S.anisotropyMap.channel),clearcoatMapUv:pt&&g(S.clearcoatMap.channel),clearcoatNormalMapUv:Le&&g(S.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Fe&&g(S.clearcoatRoughnessMap.channel),iridescenceMapUv:at&&g(S.iridescenceMap.channel),iridescenceThicknessMapUv:ut&&g(S.iridescenceThicknessMap.channel),sheenColorMapUv:Ne&&g(S.sheenColorMap.channel),sheenRoughnessMapUv:Y&&g(S.sheenRoughnessMap.channel),specularMapUv:W&&g(S.specularMap.channel),specularColorMapUv:ve&&g(S.specularColorMap.channel),specularIntensityMapUv:$&&g(S.specularIntensityMap.channel),transmissionMapUv:me&&g(S.transmissionMap.channel),thicknessMapUv:J&&g(S.thicknessMap.channel),alphaMapUv:Ee&&g(S.alphaMap.channel),vertexTangents:!!D.attributes.tangent&&(De||ae),vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!D.attributes.color&&D.attributes.color.itemSize===4,pointsUvs:N.isPoints===!0&&!!D.attributes.uv&&(Pe||Ee),fog:!!R,useFog:S.fog===!0,fogExp2:!!R&&R.isFogExp2,flatShading:S.flatShading===!0,sizeAttenuation:S.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:d,skinning:N.isSkinnedMesh===!0,morphTargets:D.morphAttributes.position!==void 0,morphNormals:D.morphAttributes.normal!==void 0,morphColors:D.morphAttributes.color!==void 0,morphTargetsCount:U,morphTextureStride:te,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:S.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:on,decodeVideoTexture:Pe&&S.map.isVideoTexture===!0&&Jt.getTransfer(S.map.colorSpace)===Tn,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===Aa,flipSided:S.side===pi,useDepthPacking:S.depthPacking>=0,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionClipCullDistance:vt&&S.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(vt&&S.extensions.multiDraw===!0||be)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:S.customProgramCacheKey()};return dt.vertexUv1s=c.has(1),dt.vertexUv2s=c.has(2),dt.vertexUv3s=c.has(3),c.clear(),dt}function _(S){const E=[];if(S.shaderID?E.push(S.shaderID):(E.push(S.customVertexShaderID),E.push(S.customFragmentShaderID)),S.defines!==void 0)for(const I in S.defines)E.push(I),E.push(S.defines[I]);return S.isRawShaderMaterial===!1&&(v(E,S),x(E,S),E.push(n.outputColorSpace)),E.push(S.customProgramCacheKey),E.join()}function v(S,E){S.push(E.precision),S.push(E.outputColorSpace),S.push(E.envMapMode),S.push(E.envMapCubeUVHeight),S.push(E.mapUv),S.push(E.alphaMapUv),S.push(E.lightMapUv),S.push(E.aoMapUv),S.push(E.bumpMapUv),S.push(E.normalMapUv),S.push(E.displacementMapUv),S.push(E.emissiveMapUv),S.push(E.metalnessMapUv),S.push(E.roughnessMapUv),S.push(E.anisotropyMapUv),S.push(E.clearcoatMapUv),S.push(E.clearcoatNormalMapUv),S.push(E.clearcoatRoughnessMapUv),S.push(E.iridescenceMapUv),S.push(E.iridescenceThicknessMapUv),S.push(E.sheenColorMapUv),S.push(E.sheenRoughnessMapUv),S.push(E.specularMapUv),S.push(E.specularColorMapUv),S.push(E.specularIntensityMapUv),S.push(E.transmissionMapUv),S.push(E.thicknessMapUv),S.push(E.combine),S.push(E.fogExp2),S.push(E.sizeAttenuation),S.push(E.morphTargetsCount),S.push(E.morphAttributeCount),S.push(E.numDirLights),S.push(E.numPointLights),S.push(E.numSpotLights),S.push(E.numSpotLightMaps),S.push(E.numHemiLights),S.push(E.numRectAreaLights),S.push(E.numDirLightShadows),S.push(E.numPointLightShadows),S.push(E.numSpotLightShadows),S.push(E.numSpotLightShadowsWithMaps),S.push(E.numLightProbes),S.push(E.shadowMapType),S.push(E.toneMapping),S.push(E.numClippingPlanes),S.push(E.numClipIntersection),S.push(E.depthPacking)}function x(S,E){a.disableAll(),E.supportsVertexTextures&&a.enable(0),E.instancing&&a.enable(1),E.instancingColor&&a.enable(2),E.instancingMorph&&a.enable(3),E.matcap&&a.enable(4),E.envMap&&a.enable(5),E.normalMapObjectSpace&&a.enable(6),E.normalMapTangentSpace&&a.enable(7),E.clearcoat&&a.enable(8),E.iridescence&&a.enable(9),E.alphaTest&&a.enable(10),E.vertexColors&&a.enable(11),E.vertexAlphas&&a.enable(12),E.vertexUv1s&&a.enable(13),E.vertexUv2s&&a.enable(14),E.vertexUv3s&&a.enable(15),E.vertexTangents&&a.enable(16),E.anisotropy&&a.enable(17),E.alphaHash&&a.enable(18),E.batching&&a.enable(19),E.dispersion&&a.enable(20),E.batchingColor&&a.enable(21),S.push(a.mask),a.disableAll(),E.fog&&a.enable(0),E.useFog&&a.enable(1),E.flatShading&&a.enable(2),E.logarithmicDepthBuffer&&a.enable(3),E.reverseDepthBuffer&&a.enable(4),E.skinning&&a.enable(5),E.morphTargets&&a.enable(6),E.morphNormals&&a.enable(7),E.morphColors&&a.enable(8),E.premultipliedAlpha&&a.enable(9),E.shadowMapEnabled&&a.enable(10),E.doubleSided&&a.enable(11),E.flipSided&&a.enable(12),E.useDepthPacking&&a.enable(13),E.dithering&&a.enable(14),E.transmission&&a.enable(15),E.sheen&&a.enable(16),E.opaque&&a.enable(17),E.pointsUvs&&a.enable(18),E.decodeVideoTexture&&a.enable(19),E.alphaToCoverage&&a.enable(20),S.push(a.mask)}function b(S){const E=y[S.type];let I;if(E){const O=Bo[E];I=YV.clone(O.uniforms)}else I=S.uniforms;return I}function T(S,E){let I;for(let O=0,N=u.length;O<N;O++){const R=u[O];if(R.cacheKey===E){I=R,++I.usedTimes;break}}return I===void 0&&(I=new Gme(n,E,S,s),u.push(I)),I}function w(S){if(--S.usedTimes===0){const E=u.indexOf(S);u[E]=u[u.length-1],u.pop(),S.destroy()}}function M(S){l.remove(S)}function A(){l.dispose()}return{getParameters:m,getProgramCacheKey:_,getUniforms:b,acquireProgram:T,releaseProgram:w,releaseShaderCache:M,programs:u,dispose:A}}function Xme(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function Kme(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function uO(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function hO(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(h,d,f,p,y,g){let m=n[e];return m===void 0?(m={id:h.id,object:h,geometry:d,material:f,groupOrder:p,renderOrder:h.renderOrder,z:y,group:g},n[e]=m):(m.id=h.id,m.object=h,m.geometry=d,m.material=f,m.groupOrder=p,m.renderOrder=h.renderOrder,m.z=y,m.group=g),e++,m}function a(h,d,f,p,y,g){const m=o(h,d,f,p,y,g);f.transmission>0?r.push(m):f.transparent===!0?i.push(m):t.push(m)}function l(h,d,f,p,y,g){const m=o(h,d,f,p,y,g);f.transmission>0?r.unshift(m):f.transparent===!0?i.unshift(m):t.unshift(m)}function c(h,d){t.length>1&&t.sort(h||Kme),r.length>1&&r.sort(d||uO),i.length>1&&i.sort(d||uO)}function u(){for(let h=e,d=n.length;h<d;h++){const f=n[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function Yme(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new hO,n.set(r,[o])):i>=s.length?(o=new hO,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function Zme(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new X,color:new Ot};break;case"SpotLight":t={position:new X,direction:new X,color:new Ot,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new X,color:new Ot,distance:0,decay:0};break;case"HemisphereLight":t={direction:new X,skyColor:new Ot,groundColor:new Ot};break;case"RectAreaLight":t={color:new Ot,position:new X,halfWidth:new X,halfHeight:new X};break}return n[e.id]=t,t}}}function Qme(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Jme=0;function ege(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function tge(n){const e=new Zme,t=Qme(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new X);const i=new X,s=new _n,o=new _n;function a(c){let u=0,h=0,d=0;for(let A=0;A<9;A++)r.probe[A].set(0,0,0);let f=0,p=0,y=0,g=0,m=0,_=0,v=0,x=0,b=0,T=0,w=0;c.sort(ege);for(let A=0,S=c.length;A<S;A++){const E=c[A],I=E.color,O=E.intensity,N=E.distance,R=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)u+=I.r*O,h+=I.g*O,d+=I.b*O;else if(E.isLightProbe){for(let D=0;D<9;D++)r.probe[D].addScaledVector(E.sh.coefficients[D],O);w++}else if(E.isDirectionalLight){const D=e.get(E);if(D.color.copy(E.color).multiplyScalar(E.intensity),E.castShadow){const q=E.shadow,L=t.get(E);L.shadowIntensity=q.intensity,L.shadowBias=q.bias,L.shadowNormalBias=q.normalBias,L.shadowRadius=q.radius,L.shadowMapSize=q.mapSize,r.directionalShadow[f]=L,r.directionalShadowMap[f]=R,r.directionalShadowMatrix[f]=E.shadow.matrix,_++}r.directional[f]=D,f++}else if(E.isSpotLight){const D=e.get(E);D.position.setFromMatrixPosition(E.matrixWorld),D.color.copy(I).multiplyScalar(O),D.distance=N,D.coneCos=Math.cos(E.angle),D.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),D.decay=E.decay,r.spot[y]=D;const q=E.shadow;if(E.map&&(r.spotLightMap[b]=E.map,b++,q.updateMatrices(E),E.castShadow&&T++),r.spotLightMatrix[y]=q.matrix,E.castShadow){const L=t.get(E);L.shadowIntensity=q.intensity,L.shadowBias=q.bias,L.shadowNormalBias=q.normalBias,L.shadowRadius=q.radius,L.shadowMapSize=q.mapSize,r.spotShadow[y]=L,r.spotShadowMap[y]=R,x++}y++}else if(E.isRectAreaLight){const D=e.get(E);D.color.copy(I).multiplyScalar(O),D.halfWidth.set(E.width*.5,0,0),D.halfHeight.set(0,E.height*.5,0),r.rectArea[g]=D,g++}else if(E.isPointLight){const D=e.get(E);if(D.color.copy(E.color).multiplyScalar(E.intensity),D.distance=E.distance,D.decay=E.decay,E.castShadow){const q=E.shadow,L=t.get(E);L.shadowIntensity=q.intensity,L.shadowBias=q.bias,L.shadowNormalBias=q.normalBias,L.shadowRadius=q.radius,L.shadowMapSize=q.mapSize,L.shadowCameraNear=q.camera.near,L.shadowCameraFar=q.camera.far,r.pointShadow[p]=L,r.pointShadowMap[p]=R,r.pointShadowMatrix[p]=E.shadow.matrix,v++}r.point[p]=D,p++}else if(E.isHemisphereLight){const D=e.get(E);D.skyColor.copy(E.color).multiplyScalar(O),D.groundColor.copy(E.groundColor).multiplyScalar(O),r.hemi[m]=D,m++}}g>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=We.LTC_FLOAT_1,r.rectAreaLTC2=We.LTC_FLOAT_2):(r.rectAreaLTC1=We.LTC_HALF_1,r.rectAreaLTC2=We.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=h,r.ambient[2]=d;const M=r.hash;(M.directionalLength!==f||M.pointLength!==p||M.spotLength!==y||M.rectAreaLength!==g||M.hemiLength!==m||M.numDirectionalShadows!==_||M.numPointShadows!==v||M.numSpotShadows!==x||M.numSpotMaps!==b||M.numLightProbes!==w)&&(r.directional.length=f,r.spot.length=y,r.rectArea.length=g,r.point.length=p,r.hemi.length=m,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=v,r.pointShadowMap.length=v,r.spotShadow.length=x,r.spotShadowMap.length=x,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=v,r.spotLightMatrix.length=x+b-T,r.spotLightMap.length=b,r.numSpotLightShadowsWithMaps=T,r.numLightProbes=w,M.directionalLength=f,M.pointLength=p,M.spotLength=y,M.rectAreaLength=g,M.hemiLength=m,M.numDirectionalShadows=_,M.numPointShadows=v,M.numSpotShadows=x,M.numSpotMaps=b,M.numLightProbes=w,r.version=Jme++)}function l(c,u){let h=0,d=0,f=0,p=0,y=0;const g=u.matrixWorldInverse;for(let m=0,_=c.length;m<_;m++){const v=c[m];if(v.isDirectionalLight){const x=r.directional[h];x.direction.setFromMatrixPosition(v.matrixWorld),i.setFromMatrixPosition(v.target.matrixWorld),x.direction.sub(i),x.direction.transformDirection(g),h++}else if(v.isSpotLight){const x=r.spot[f];x.position.setFromMatrixPosition(v.matrixWorld),x.position.applyMatrix4(g),x.direction.setFromMatrixPosition(v.matrixWorld),i.setFromMatrixPosition(v.target.matrixWorld),x.direction.sub(i),x.direction.transformDirection(g),f++}else if(v.isRectAreaLight){const x=r.rectArea[p];x.position.setFromMatrixPosition(v.matrixWorld),x.position.applyMatrix4(g),o.identity(),s.copy(v.matrixWorld),s.premultiply(g),o.extractRotation(s),x.halfWidth.set(v.width*.5,0,0),x.halfHeight.set(0,v.height*.5,0),x.halfWidth.applyMatrix4(o),x.halfHeight.applyMatrix4(o),p++}else if(v.isPointLight){const x=r.point[d];x.position.setFromMatrixPosition(v.matrixWorld),x.position.applyMatrix4(g),d++}else if(v.isHemisphereLight){const x=r.hemi[y];x.direction.setFromMatrixPosition(v.matrixWorld),x.direction.transformDirection(g),y++}}}return{setup:a,setupView:l,state:r}}function dO(n){const e=new tge(n),t=[],r=[];function i(u){c.camera=u,t.length=0,r.length=0}function s(u){t.push(u)}function o(u){r.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function nge(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new dO(n),e.set(i,[a])):s>=o.length?(a=new dO(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}class rge extends oh{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Uue,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ige extends oh{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const sge=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,oge=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function age(n,e,t){let r=new DP;const i=new Ge,s=new Ge,o=new ar,a=new rge({depthPacking:Bue}),l=new ige,c={},u=t.maxTextureSize,h={[yc]:pi,[pi]:yc,[Aa]:Aa},d=new Xo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ge},radius:{value:4}},vertexShader:sge,fragmentShader:oge}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new Gs;p.setAttribute("position",new Ds(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Is(p,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=bV;let m=this.type;this.render=function(T,w,M){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||T.length===0)return;const A=n.getRenderTarget(),S=n.getActiveCubeFace(),E=n.getActiveMipmapLevel(),I=n.state;I.setBlending(Ha),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);const O=m!==va&&this.type===va,N=m===va&&this.type!==va;for(let R=0,D=T.length;R<D;R++){const q=T[R],L=q.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",q,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;i.copy(L.mapSize);const j=L.getFrameExtents();if(i.multiply(j),s.copy(L.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/j.x),i.x=s.x*j.x,L.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/j.y),i.y=s.y*j.y,L.mapSize.y=s.y)),L.map===null||O===!0||N===!0){const K=this.type!==va?{minFilter:Ps,magFilter:Ps}:{};L.map!==null&&L.map.dispose(),L.map=new vc(i.x,i.y,K),L.map.texture.name=q.name+".shadowMap",L.camera.updateProjectionMatrix()}n.setRenderTarget(L.map),n.clear();const z=L.getViewportCount();for(let K=0;K<z;K++){const U=L.getViewport(K);o.set(s.x*U.x,s.y*U.y,s.x*U.z,s.y*U.w),I.viewport(o),L.updateMatrices(q,K),r=L.getFrustum(),x(w,M,L.camera,q,this.type)}L.isPointLightShadow!==!0&&this.type===va&&_(L,M),L.needsUpdate=!1}m=this.type,g.needsUpdate=!1,n.setRenderTarget(A,S,E)};function _(T,w){const M=e.update(y);d.defines.VSM_SAMPLES!==T.blurSamples&&(d.defines.VSM_SAMPLES=T.blurSamples,f.defines.VSM_SAMPLES=T.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new vc(i.x,i.y)),d.uniforms.shadow_pass.value=T.map.texture,d.uniforms.resolution.value=T.mapSize,d.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(w,null,M,d,y,null),f.uniforms.shadow_pass.value=T.mapPass.texture,f.uniforms.resolution.value=T.mapSize,f.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(w,null,M,f,y,null)}function v(T,w,M,A){let S=null;const E=M.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(E!==void 0)S=E;else if(S=M.isPointLight===!0?l:a,n.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){const I=S.uuid,O=w.uuid;let N=c[I];N===void 0&&(N={},c[I]=N);let R=N[O];R===void 0&&(R=S.clone(),N[O]=R,w.addEventListener("dispose",b)),S=R}if(S.visible=w.visible,S.wireframe=w.wireframe,A===va?S.side=w.shadowSide!==null?w.shadowSide:w.side:S.side=w.shadowSide!==null?w.shadowSide:h[w.side],S.alphaMap=w.alphaMap,S.alphaTest=w.alphaTest,S.map=w.map,S.clipShadows=w.clipShadows,S.clippingPlanes=w.clippingPlanes,S.clipIntersection=w.clipIntersection,S.displacementMap=w.displacementMap,S.displacementScale=w.displacementScale,S.displacementBias=w.displacementBias,S.wireframeLinewidth=w.wireframeLinewidth,S.linewidth=w.linewidth,M.isPointLight===!0&&S.isMeshDistanceMaterial===!0){const I=n.properties.get(S);I.light=M}return S}function x(T,w,M,A,S){if(T.visible===!1)return;if(T.layers.test(w.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&S===va)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,T.matrixWorld);const O=e.update(T),N=T.material;if(Array.isArray(N)){const R=O.groups;for(let D=0,q=R.length;D<q;D++){const L=R[D],j=N[L.materialIndex];if(j&&j.visible){const z=v(T,j,A,S);T.onBeforeShadow(n,T,w,M,O,z,L),n.renderBufferDirect(M,null,O,z,T,L),T.onAfterShadow(n,T,w,M,O,z,L)}}}else if(N.visible){const R=v(T,N,A,S);T.onBeforeShadow(n,T,w,M,O,R,null),n.renderBufferDirect(M,null,O,R,T,null),T.onAfterShadow(n,T,w,M,O,R,null)}}const I=T.children;for(let O=0,N=I.length;O<N;O++)x(I[O],w,M,A,S)}function b(T){T.target.removeEventListener("dispose",b);for(const M in c){const A=c[M],S=T.target.uuid;S in A&&(A[S].dispose(),delete A[S])}}}const lge={[yC]:vC,[_C]:bC,[xC]:wC,[Ff]:SC,[vC]:yC,[bC]:_C,[wC]:xC,[SC]:Ff};function cge(n){function e(){let $=!1;const me=new ar;let J=null;const he=new ar(0,0,0,0);return{setMask:function(Ee){J!==Ee&&!$&&(n.colorMask(Ee,Ee,Ee,Ee),J=Ee)},setLocked:function(Ee){$=Ee},setClear:function(Ee,Re,qe,vt,on){on===!0&&(Ee*=vt,Re*=vt,qe*=vt),me.set(Ee,Re,qe,vt),he.equals(me)===!1&&(n.clearColor(Ee,Re,qe,vt),he.copy(me))},reset:function(){$=!1,J=null,he.set(-1,0,0,0)}}}function t(){let $=!1,me=!1,J=null,he=null,Ee=null;return{setReversed:function(Re){me=Re},setTest:function(Re){Re?Q(n.DEPTH_TEST):le(n.DEPTH_TEST)},setMask:function(Re){J!==Re&&!$&&(n.depthMask(Re),J=Re)},setFunc:function(Re){if(me&&(Re=lge[Re]),he!==Re){switch(Re){case yC:n.depthFunc(n.NEVER);break;case vC:n.depthFunc(n.ALWAYS);break;case _C:n.depthFunc(n.LESS);break;case Ff:n.depthFunc(n.LEQUAL);break;case xC:n.depthFunc(n.EQUAL);break;case SC:n.depthFunc(n.GEQUAL);break;case bC:n.depthFunc(n.GREATER);break;case wC:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}he=Re}},setLocked:function(Re){$=Re},setClear:function(Re){Ee!==Re&&(n.clearDepth(Re),Ee=Re)},reset:function(){$=!1,J=null,he=null,Ee=null}}}function r(){let $=!1,me=null,J=null,he=null,Ee=null,Re=null,qe=null,vt=null,on=null;return{setTest:function(dt){$||(dt?Q(n.STENCIL_TEST):le(n.STENCIL_TEST))},setMask:function(dt){me!==dt&&!$&&(n.stencilMask(dt),me=dt)},setFunc:function(dt,pn,Kn){(J!==dt||he!==pn||Ee!==Kn)&&(n.stencilFunc(dt,pn,Kn),J=dt,he=pn,Ee=Kn)},setOp:function(dt,pn,Kn){(Re!==dt||qe!==pn||vt!==Kn)&&(n.stencilOp(dt,pn,Kn),Re=dt,qe=pn,vt=Kn)},setLocked:function(dt){$=dt},setClear:function(dt){on!==dt&&(n.clearStencil(dt),on=dt)},reset:function(){$=!1,me=null,J=null,he=null,Ee=null,Re=null,qe=null,vt=null,on=null}}}const i=new e,s=new t,o=new r,a=new WeakMap,l=new WeakMap;let c={},u={},h=new WeakMap,d=[],f=null,p=!1,y=null,g=null,m=null,_=null,v=null,x=null,b=null,T=new Ot(0,0,0),w=0,M=!1,A=null,S=null,E=null,I=null,O=null;const N=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let R=!1,D=0;const q=n.getParameter(n.VERSION);q.indexOf("WebGL")!==-1?(D=parseFloat(/^WebGL (\d)/.exec(q)[1]),R=D>=1):q.indexOf("OpenGL ES")!==-1&&(D=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),R=D>=2);let L=null,j={};const z=n.getParameter(n.SCISSOR_BOX),K=n.getParameter(n.VIEWPORT),U=new ar().fromArray(z),te=new ar().fromArray(K);function k($,me,J,he){const Ee=new Uint8Array(4),Re=n.createTexture();n.bindTexture($,Re),n.texParameteri($,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri($,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let qe=0;qe<J;qe++)$===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY?n.texImage3D(me,0,n.RGBA,1,1,he,0,n.RGBA,n.UNSIGNED_BYTE,Ee):n.texImage2D(me+qe,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ee);return Re}const V={};V[n.TEXTURE_2D]=k(n.TEXTURE_2D,n.TEXTURE_2D,1),V[n.TEXTURE_CUBE_MAP]=k(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),V[n.TEXTURE_2D_ARRAY]=k(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),V[n.TEXTURE_3D]=k(n.TEXTURE_3D,n.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Q(n.DEPTH_TEST),s.setFunc(Ff),$e(!1),Ze(xF),Q(n.CULL_FACE),G(Ha);function Q($){c[$]!==!0&&(n.enable($),c[$]=!0)}function le($){c[$]!==!1&&(n.disable($),c[$]=!1)}function pe($,me){return u[$]!==me?(n.bindFramebuffer($,me),u[$]=me,$===n.DRAW_FRAMEBUFFER&&(u[n.FRAMEBUFFER]=me),$===n.FRAMEBUFFER&&(u[n.DRAW_FRAMEBUFFER]=me),!0):!1}function ue($,me){let J=d,he=!1;if($){J=h.get(me),J===void 0&&(J=[],h.set(me,J));const Ee=$.textures;if(J.length!==Ee.length||J[0]!==n.COLOR_ATTACHMENT0){for(let Re=0,qe=Ee.length;Re<qe;Re++)J[Re]=n.COLOR_ATTACHMENT0+Re;J.length=Ee.length,he=!0}}else J[0]!==n.BACK&&(J[0]=n.BACK,he=!0);he&&n.drawBuffers(J)}function be($){return f!==$?(n.useProgram($),f=$,!0):!1}const Pe={[lu]:n.FUNC_ADD,[hue]:n.FUNC_SUBTRACT,[due]:n.FUNC_REVERSE_SUBTRACT};Pe[fue]=n.MIN,Pe[pue]=n.MAX;const we={[mue]:n.ZERO,[gue]:n.ONE,[yue]:n.SRC_COLOR,[mC]:n.SRC_ALPHA,[wue]:n.SRC_ALPHA_SATURATE,[Sue]:n.DST_COLOR,[_ue]:n.DST_ALPHA,[vue]:n.ONE_MINUS_SRC_COLOR,[gC]:n.ONE_MINUS_SRC_ALPHA,[bue]:n.ONE_MINUS_DST_COLOR,[xue]:n.ONE_MINUS_DST_ALPHA,[Tue]:n.CONSTANT_COLOR,[Mue]:n.ONE_MINUS_CONSTANT_COLOR,[Eue]:n.CONSTANT_ALPHA,[Cue]:n.ONE_MINUS_CONSTANT_ALPHA};function G($,me,J,he,Ee,Re,qe,vt,on,dt){if($===Ha){p===!0&&(le(n.BLEND),p=!1);return}if(p===!1&&(Q(n.BLEND),p=!0),$!==uue){if($!==y||dt!==M){if((g!==lu||v!==lu)&&(n.blendEquation(n.FUNC_ADD),g=lu,v=lu),dt)switch($){case Hd:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case SF:n.blendFunc(n.ONE,n.ONE);break;case bF:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case wF:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}else switch($){case Hd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case SF:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case bF:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case wF:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}m=null,_=null,x=null,b=null,T.set(0,0,0),w=0,y=$,M=dt}return}Ee=Ee||me,Re=Re||J,qe=qe||he,(me!==g||Ee!==v)&&(n.blendEquationSeparate(Pe[me],Pe[Ee]),g=me,v=Ee),(J!==m||he!==_||Re!==x||qe!==b)&&(n.blendFuncSeparate(we[J],we[he],we[Re],we[qe]),m=J,_=he,x=Re,b=qe),(vt.equals(T)===!1||on!==w)&&(n.blendColor(vt.r,vt.g,vt.b,on),T.copy(vt),w=on),y=$,M=!1}function He($,me){$.side===Aa?le(n.CULL_FACE):Q(n.CULL_FACE);let J=$.side===pi;me&&(J=!J),$e(J),$.blending===Hd&&$.transparent===!1?G(Ha):G($.blending,$.blendEquation,$.blendSrc,$.blendDst,$.blendEquationAlpha,$.blendSrcAlpha,$.blendDstAlpha,$.blendColor,$.blendAlpha,$.premultipliedAlpha),s.setFunc($.depthFunc),s.setTest($.depthTest),s.setMask($.depthWrite),i.setMask($.colorWrite);const he=$.stencilWrite;o.setTest(he),he&&(o.setMask($.stencilWriteMask),o.setFunc($.stencilFunc,$.stencilRef,$.stencilFuncMask),o.setOp($.stencilFail,$.stencilZFail,$.stencilZPass)),ot($.polygonOffset,$.polygonOffsetFactor,$.polygonOffsetUnits),$.alphaToCoverage===!0?Q(n.SAMPLE_ALPHA_TO_COVERAGE):le(n.SAMPLE_ALPHA_TO_COVERAGE)}function $e($){A!==$&&($?n.frontFace(n.CW):n.frontFace(n.CCW),A=$)}function Ze($){$!==aue?(Q(n.CULL_FACE),$!==S&&($===xF?n.cullFace(n.BACK):$===lue?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):le(n.CULL_FACE),S=$}function De($){$!==E&&(R&&n.lineWidth($),E=$)}function ot($,me,J){$?(Q(n.POLYGON_OFFSET_FILL),(I!==me||O!==J)&&(n.polygonOffset(me,J),I=me,O=J)):le(n.POLYGON_OFFSET_FILL)}function Je($){$?Q(n.SCISSOR_TEST):le(n.SCISSOR_TEST)}function B($){$===void 0&&($=n.TEXTURE0+N-1),L!==$&&(n.activeTexture($),L=$)}function C($,me,J){J===void 0&&(L===null?J=n.TEXTURE0+N-1:J=L);let he=j[J];he===void 0&&(he={type:void 0,texture:void 0},j[J]=he),(he.type!==$||he.texture!==me)&&(L!==J&&(n.activeTexture(J),L=J),n.bindTexture($,me||V[$]),he.type=$,he.texture=me)}function ae(){const $=j[L];$!==void 0&&$.type!==void 0&&(n.bindTexture($.type,null),$.type=void 0,$.texture=void 0)}function oe(){try{n.compressedTexImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Te(){try{n.compressedTexImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Se(){try{n.texSubImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Xe(){try{n.texSubImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ie(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Oe(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function pt(){try{n.texStorage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Le(){try{n.texStorage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Fe(){try{n.texImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function at(){try{n.texImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function ut($){U.equals($)===!1&&(n.scissor($.x,$.y,$.z,$.w),U.copy($))}function Ne($){te.equals($)===!1&&(n.viewport($.x,$.y,$.z,$.w),te.copy($))}function Y($,me){let J=l.get(me);J===void 0&&(J=new WeakMap,l.set(me,J));let he=J.get($);he===void 0&&(he=n.getUniformBlockIndex(me,$.name),J.set($,he))}function W($,me){const he=l.get(me).get($);a.get(me)!==he&&(n.uniformBlockBinding(me,he,$.__bindingPointIndex),a.set(me,he))}function ve(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},L=null,j={},u={},h=new WeakMap,d=[],f=null,p=!1,y=null,g=null,m=null,_=null,v=null,x=null,b=null,T=new Ot(0,0,0),w=0,M=!1,A=null,S=null,E=null,I=null,O=null,U.set(0,0,n.canvas.width,n.canvas.height),te.set(0,0,n.canvas.width,n.canvas.height),i.reset(),s.reset(),o.reset()}return{buffers:{color:i,depth:s,stencil:o},enable:Q,disable:le,bindFramebuffer:pe,drawBuffers:ue,useProgram:be,setBlending:G,setMaterial:He,setFlipSided:$e,setCullFace:Ze,setLineWidth:De,setPolygonOffset:ot,setScissorTest:Je,activeTexture:B,bindTexture:C,unbindTexture:ae,compressedTexImage2D:oe,compressedTexImage3D:Te,texImage2D:Fe,texImage3D:at,updateUBOMapping:Y,uniformBlockBinding:W,texStorage2D:pt,texStorage3D:Le,texSubImage2D:Se,texSubImage3D:Xe,compressedTexSubImage2D:Ie,compressedTexSubImage3D:Oe,scissor:ut,viewport:Ne,reset:ve}}function fO(n,e,t,r){const i=uge(r);switch(t){case CV:return n*e;case RV:return n*e;case NV:return n*e*2;case PV:return n*e/i.components*i.byteLength;case EP:return n*e/i.components*i.byteLength;case IV:return n*e*2/i.components*i.byteLength;case CP:return n*e*2/i.components*i.byteLength;case AV:return n*e*3/i.components*i.byteLength;case ho:return n*e*4/i.components*i.byteLength;case AP:return n*e*4/i.components*i.byteLength;case o_:case a_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case l_:case c_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case RC:case PC:return Math.max(n,16)*Math.max(e,8)/4;case AC:case NC:return Math.max(n,8)*Math.max(e,8)/2;case IC:case LC:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case DC:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case FC:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case OC:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case kC:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case UC:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case BC:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case zC:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case $C:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case VC:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case GC:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case HC:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case WC:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case jC:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case qC:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case XC:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case u_:case KC:case YC:return Math.ceil(n/4)*Math.ceil(e/4)*16;case LV:case ZC:return Math.ceil(n/4)*Math.ceil(e/4)*8;case QC:case JC:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function uge(n){switch(n){case il:case TV:return{byteLength:1,components:1};case Fg:case MV:case sp:return{byteLength:2,components:1};case TP:case MP:return{byteLength:2,components:4};case Hu:case wP:case Ua:return{byteLength:4,components:1};case EV:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}function hge(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ge,u=new WeakMap;let h;const d=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(B,C){return f?new OffscreenCanvas(B,C):kg("canvas")}function y(B,C,ae){let oe=1;const Te=Je(B);if((Te.width>ae||Te.height>ae)&&(oe=ae/Math.max(Te.width,Te.height)),oe<1)if(typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap||typeof VideoFrame<"u"&&B instanceof VideoFrame){const Se=Math.floor(oe*Te.width),Xe=Math.floor(oe*Te.height);h===void 0&&(h=p(Se,Xe));const Ie=C?p(Se,Xe):h;return Ie.width=Se,Ie.height=Xe,Ie.getContext("2d").drawImage(B,0,0,Se,Xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Te.width+"x"+Te.height+") to ("+Se+"x"+Xe+")."),Ie}else return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Te.width+"x"+Te.height+")."),B;return B}function g(B){return B.generateMipmaps&&B.minFilter!==Ps&&B.minFilter!==lo}function m(B){n.generateMipmap(B)}function _(B,C,ae,oe,Te=!1){if(B!==null){if(n[B]!==void 0)return n[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let Se=C;if(C===n.RED&&(ae===n.FLOAT&&(Se=n.R32F),ae===n.HALF_FLOAT&&(Se=n.R16F),ae===n.UNSIGNED_BYTE&&(Se=n.R8)),C===n.RED_INTEGER&&(ae===n.UNSIGNED_BYTE&&(Se=n.R8UI),ae===n.UNSIGNED_SHORT&&(Se=n.R16UI),ae===n.UNSIGNED_INT&&(Se=n.R32UI),ae===n.BYTE&&(Se=n.R8I),ae===n.SHORT&&(Se=n.R16I),ae===n.INT&&(Se=n.R32I)),C===n.RG&&(ae===n.FLOAT&&(Se=n.RG32F),ae===n.HALF_FLOAT&&(Se=n.RG16F),ae===n.UNSIGNED_BYTE&&(Se=n.RG8)),C===n.RG_INTEGER&&(ae===n.UNSIGNED_BYTE&&(Se=n.RG8UI),ae===n.UNSIGNED_SHORT&&(Se=n.RG16UI),ae===n.UNSIGNED_INT&&(Se=n.RG32UI),ae===n.BYTE&&(Se=n.RG8I),ae===n.SHORT&&(Se=n.RG16I),ae===n.INT&&(Se=n.RG32I)),C===n.RGB_INTEGER&&(ae===n.UNSIGNED_BYTE&&(Se=n.RGB8UI),ae===n.UNSIGNED_SHORT&&(Se=n.RGB16UI),ae===n.UNSIGNED_INT&&(Se=n.RGB32UI),ae===n.BYTE&&(Se=n.RGB8I),ae===n.SHORT&&(Se=n.RGB16I),ae===n.INT&&(Se=n.RGB32I)),C===n.RGBA_INTEGER&&(ae===n.UNSIGNED_BYTE&&(Se=n.RGBA8UI),ae===n.UNSIGNED_SHORT&&(Se=n.RGBA16UI),ae===n.UNSIGNED_INT&&(Se=n.RGBA32UI),ae===n.BYTE&&(Se=n.RGBA8I),ae===n.SHORT&&(Se=n.RGBA16I),ae===n.INT&&(Se=n.RGBA32I)),C===n.RGB&&ae===n.UNSIGNED_INT_5_9_9_9_REV&&(Se=n.RGB9_E5),C===n.RGBA){const Xe=Te?wx:Jt.getTransfer(oe);ae===n.FLOAT&&(Se=n.RGBA32F),ae===n.HALF_FLOAT&&(Se=n.RGBA16F),ae===n.UNSIGNED_BYTE&&(Se=Xe===Tn?n.SRGB8_ALPHA8:n.RGBA8),ae===n.UNSIGNED_SHORT_4_4_4_4&&(Se=n.RGBA4),ae===n.UNSIGNED_SHORT_5_5_5_1&&(Se=n.RGB5_A1)}return(Se===n.R16F||Se===n.R32F||Se===n.RG16F||Se===n.RG32F||Se===n.RGBA16F||Se===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Se}function v(B,C){let ae;return B?C===null||C===Hu||C===Uf?ae=n.DEPTH24_STENCIL8:C===Ua?ae=n.DEPTH32F_STENCIL8:C===Fg&&(ae=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):C===null||C===Hu||C===Uf?ae=n.DEPTH_COMPONENT24:C===Ua?ae=n.DEPTH_COMPONENT32F:C===Fg&&(ae=n.DEPTH_COMPONENT16),ae}function x(B,C){return g(B)===!0||B.isFramebufferTexture&&B.minFilter!==Ps&&B.minFilter!==lo?Math.log2(Math.max(C.width,C.height))+1:B.mipmaps!==void 0&&B.mipmaps.length>0?B.mipmaps.length:B.isCompressedTexture&&Array.isArray(B.image)?C.mipmaps.length:1}function b(B){const C=B.target;C.removeEventListener("dispose",b),w(C),C.isVideoTexture&&u.delete(C)}function T(B){const C=B.target;C.removeEventListener("dispose",T),A(C)}function w(B){const C=r.get(B);if(C.__webglInit===void 0)return;const ae=B.source,oe=d.get(ae);if(oe){const Te=oe[C.__cacheKey];Te.usedTimes--,Te.usedTimes===0&&M(B),Object.keys(oe).length===0&&d.delete(ae)}r.remove(B)}function M(B){const C=r.get(B);n.deleteTexture(C.__webglTexture);const ae=B.source,oe=d.get(ae);delete oe[C.__cacheKey],o.memory.textures--}function A(B){const C=r.get(B);if(B.depthTexture&&B.depthTexture.dispose(),B.isWebGLCubeRenderTarget)for(let oe=0;oe<6;oe++){if(Array.isArray(C.__webglFramebuffer[oe]))for(let Te=0;Te<C.__webglFramebuffer[oe].length;Te++)n.deleteFramebuffer(C.__webglFramebuffer[oe][Te]);else n.deleteFramebuffer(C.__webglFramebuffer[oe]);C.__webglDepthbuffer&&n.deleteRenderbuffer(C.__webglDepthbuffer[oe])}else{if(Array.isArray(C.__webglFramebuffer))for(let oe=0;oe<C.__webglFramebuffer.length;oe++)n.deleteFramebuffer(C.__webglFramebuffer[oe]);else n.deleteFramebuffer(C.__webglFramebuffer);if(C.__webglDepthbuffer&&n.deleteRenderbuffer(C.__webglDepthbuffer),C.__webglMultisampledFramebuffer&&n.deleteFramebuffer(C.__webglMultisampledFramebuffer),C.__webglColorRenderbuffer)for(let oe=0;oe<C.__webglColorRenderbuffer.length;oe++)C.__webglColorRenderbuffer[oe]&&n.deleteRenderbuffer(C.__webglColorRenderbuffer[oe]);C.__webglDepthRenderbuffer&&n.deleteRenderbuffer(C.__webglDepthRenderbuffer)}const ae=B.textures;for(let oe=0,Te=ae.length;oe<Te;oe++){const Se=r.get(ae[oe]);Se.__webglTexture&&(n.deleteTexture(Se.__webglTexture),o.memory.textures--),r.remove(ae[oe])}r.remove(B)}let S=0;function E(){S=0}function I(){const B=S;return B>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+i.maxTextures),S+=1,B}function O(B){const C=[];return C.push(B.wrapS),C.push(B.wrapT),C.push(B.wrapR||0),C.push(B.magFilter),C.push(B.minFilter),C.push(B.anisotropy),C.push(B.internalFormat),C.push(B.format),C.push(B.type),C.push(B.generateMipmaps),C.push(B.premultiplyAlpha),C.push(B.flipY),C.push(B.unpackAlignment),C.push(B.colorSpace),C.join()}function N(B,C){const ae=r.get(B);if(B.isVideoTexture&&De(B),B.isRenderTargetTexture===!1&&B.version>0&&ae.__version!==B.version){const oe=B.image;if(oe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{te(ae,B,C);return}}t.bindTexture(n.TEXTURE_2D,ae.__webglTexture,n.TEXTURE0+C)}function R(B,C){const ae=r.get(B);if(B.version>0&&ae.__version!==B.version){te(ae,B,C);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ae.__webglTexture,n.TEXTURE0+C)}function D(B,C){const ae=r.get(B);if(B.version>0&&ae.__version!==B.version){te(ae,B,C);return}t.bindTexture(n.TEXTURE_3D,ae.__webglTexture,n.TEXTURE0+C)}function q(B,C){const ae=r.get(B);if(B.version>0&&ae.__version!==B.version){k(ae,B,C);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ae.__webglTexture,n.TEXTURE0+C)}const L={[EC]:n.REPEAT,[yu]:n.CLAMP_TO_EDGE,[CC]:n.MIRRORED_REPEAT},j={[Ps]:n.NEAREST,[kue]:n.NEAREST_MIPMAP_NEAREST,[x0]:n.NEAREST_MIPMAP_LINEAR,[lo]:n.LINEAR,[ww]:n.LINEAR_MIPMAP_NEAREST,[vu]:n.LINEAR_MIPMAP_LINEAR},z={[$ue]:n.NEVER,[que]:n.ALWAYS,[Vue]:n.LESS,[FV]:n.LEQUAL,[Gue]:n.EQUAL,[jue]:n.GEQUAL,[Hue]:n.GREATER,[Wue]:n.NOTEQUAL};function K(B,C){if(C.type===Ua&&e.has("OES_texture_float_linear")===!1&&(C.magFilter===lo||C.magFilter===ww||C.magFilter===x0||C.magFilter===vu||C.minFilter===lo||C.minFilter===ww||C.minFilter===x0||C.minFilter===vu)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(B,n.TEXTURE_WRAP_S,L[C.wrapS]),n.texParameteri(B,n.TEXTURE_WRAP_T,L[C.wrapT]),(B===n.TEXTURE_3D||B===n.TEXTURE_2D_ARRAY)&&n.texParameteri(B,n.TEXTURE_WRAP_R,L[C.wrapR]),n.texParameteri(B,n.TEXTURE_MAG_FILTER,j[C.magFilter]),n.texParameteri(B,n.TEXTURE_MIN_FILTER,j[C.minFilter]),C.compareFunction&&(n.texParameteri(B,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(B,n.TEXTURE_COMPARE_FUNC,z[C.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(C.magFilter===Ps||C.minFilter!==x0&&C.minFilter!==vu||C.type===Ua&&e.has("OES_texture_float_linear")===!1)return;if(C.anisotropy>1||r.get(C).__currentAnisotropy){const ae=e.get("EXT_texture_filter_anisotropic");n.texParameterf(B,ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(C.anisotropy,i.getMaxAnisotropy())),r.get(C).__currentAnisotropy=C.anisotropy}}}function U(B,C){let ae=!1;B.__webglInit===void 0&&(B.__webglInit=!0,C.addEventListener("dispose",b));const oe=C.source;let Te=d.get(oe);Te===void 0&&(Te={},d.set(oe,Te));const Se=O(C);if(Se!==B.__cacheKey){Te[Se]===void 0&&(Te[Se]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ae=!0),Te[Se].usedTimes++;const Xe=Te[B.__cacheKey];Xe!==void 0&&(Te[B.__cacheKey].usedTimes--,Xe.usedTimes===0&&M(C)),B.__cacheKey=Se,B.__webglTexture=Te[Se].texture}return ae}function te(B,C,ae){let oe=n.TEXTURE_2D;(C.isDataArrayTexture||C.isCompressedArrayTexture)&&(oe=n.TEXTURE_2D_ARRAY),C.isData3DTexture&&(oe=n.TEXTURE_3D);const Te=U(B,C),Se=C.source;t.bindTexture(oe,B.__webglTexture,n.TEXTURE0+ae);const Xe=r.get(Se);if(Se.version!==Xe.__version||Te===!0){t.activeTexture(n.TEXTURE0+ae);const Ie=Jt.getPrimaries(Jt.workingColorSpace),Oe=C.colorSpace===Gl?null:Jt.getPrimaries(C.colorSpace),pt=C.colorSpace===Gl||Ie===Oe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,C.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,C.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,pt);let Le=y(C.image,!1,i.maxTextureSize);Le=ot(C,Le);const Fe=s.convert(C.format,C.colorSpace),at=s.convert(C.type);let ut=_(C.internalFormat,Fe,at,C.colorSpace,C.isVideoTexture);K(oe,C);let Ne;const Y=C.mipmaps,W=C.isVideoTexture!==!0,ve=Xe.__version===void 0||Te===!0,$=Se.dataReady,me=x(C,Le);if(C.isDepthTexture)ut=v(C.format===Bf,C.type),ve&&(W?t.texStorage2D(n.TEXTURE_2D,1,ut,Le.width,Le.height):t.texImage2D(n.TEXTURE_2D,0,ut,Le.width,Le.height,0,Fe,at,null));else if(C.isDataTexture)if(Y.length>0){W&&ve&&t.texStorage2D(n.TEXTURE_2D,me,ut,Y[0].width,Y[0].height);for(let J=0,he=Y.length;J<he;J++)Ne=Y[J],W?$&&t.texSubImage2D(n.TEXTURE_2D,J,0,0,Ne.width,Ne.height,Fe,at,Ne.data):t.texImage2D(n.TEXTURE_2D,J,ut,Ne.width,Ne.height,0,Fe,at,Ne.data);C.generateMipmaps=!1}else W?(ve&&t.texStorage2D(n.TEXTURE_2D,me,ut,Le.width,Le.height),$&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Le.width,Le.height,Fe,at,Le.data)):t.texImage2D(n.TEXTURE_2D,0,ut,Le.width,Le.height,0,Fe,at,Le.data);else if(C.isCompressedTexture)if(C.isCompressedArrayTexture){W&&ve&&t.texStorage3D(n.TEXTURE_2D_ARRAY,me,ut,Y[0].width,Y[0].height,Le.depth);for(let J=0,he=Y.length;J<he;J++)if(Ne=Y[J],C.format!==ho)if(Fe!==null)if(W){if($)if(C.layerUpdates.size>0){const Ee=fO(Ne.width,Ne.height,C.format,C.type);for(const Re of C.layerUpdates){const qe=Ne.data.subarray(Re*Ee/Ne.data.BYTES_PER_ELEMENT,(Re+1)*Ee/Ne.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,J,0,0,Re,Ne.width,Ne.height,1,Fe,qe,0,0)}C.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,J,0,0,0,Ne.width,Ne.height,Le.depth,Fe,Ne.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,J,ut,Ne.width,Ne.height,Le.depth,0,Ne.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else W?$&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,J,0,0,0,Ne.width,Ne.height,Le.depth,Fe,at,Ne.data):t.texImage3D(n.TEXTURE_2D_ARRAY,J,ut,Ne.width,Ne.height,Le.depth,0,Fe,at,Ne.data)}else{W&&ve&&t.texStorage2D(n.TEXTURE_2D,me,ut,Y[0].width,Y[0].height);for(let J=0,he=Y.length;J<he;J++)Ne=Y[J],C.format!==ho?Fe!==null?W?$&&t.compressedTexSubImage2D(n.TEXTURE_2D,J,0,0,Ne.width,Ne.height,Fe,Ne.data):t.compressedTexImage2D(n.TEXTURE_2D,J,ut,Ne.width,Ne.height,0,Ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):W?$&&t.texSubImage2D(n.TEXTURE_2D,J,0,0,Ne.width,Ne.height,Fe,at,Ne.data):t.texImage2D(n.TEXTURE_2D,J,ut,Ne.width,Ne.height,0,Fe,at,Ne.data)}else if(C.isDataArrayTexture)if(W){if(ve&&t.texStorage3D(n.TEXTURE_2D_ARRAY,me,ut,Le.width,Le.height,Le.depth),$)if(C.layerUpdates.size>0){const J=fO(Le.width,Le.height,C.format,C.type);for(const he of C.layerUpdates){const Ee=Le.data.subarray(he*J/Le.data.BYTES_PER_ELEMENT,(he+1)*J/Le.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,he,Le.width,Le.height,1,Fe,at,Ee)}C.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Le.width,Le.height,Le.depth,Fe,at,Le.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ut,Le.width,Le.height,Le.depth,0,Fe,at,Le.data);else if(C.isData3DTexture)W?(ve&&t.texStorage3D(n.TEXTURE_3D,me,ut,Le.width,Le.height,Le.depth),$&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Le.width,Le.height,Le.depth,Fe,at,Le.data)):t.texImage3D(n.TEXTURE_3D,0,ut,Le.width,Le.height,Le.depth,0,Fe,at,Le.data);else if(C.isFramebufferTexture){if(ve)if(W)t.texStorage2D(n.TEXTURE_2D,me,ut,Le.width,Le.height);else{let J=Le.width,he=Le.height;for(let Ee=0;Ee<me;Ee++)t.texImage2D(n.TEXTURE_2D,Ee,ut,J,he,0,Fe,at,null),J>>=1,he>>=1}}else if(Y.length>0){if(W&&ve){const J=Je(Y[0]);t.texStorage2D(n.TEXTURE_2D,me,ut,J.width,J.height)}for(let J=0,he=Y.length;J<he;J++)Ne=Y[J],W?$&&t.texSubImage2D(n.TEXTURE_2D,J,0,0,Fe,at,Ne):t.texImage2D(n.TEXTURE_2D,J,ut,Fe,at,Ne);C.generateMipmaps=!1}else if(W){if(ve){const J=Je(Le);t.texStorage2D(n.TEXTURE_2D,me,ut,J.width,J.height)}$&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Fe,at,Le)}else t.texImage2D(n.TEXTURE_2D,0,ut,Fe,at,Le);g(C)&&m(oe),Xe.__version=Se.version,C.onUpdate&&C.onUpdate(C)}B.__version=C.version}function k(B,C,ae){if(C.image.length!==6)return;const oe=U(B,C),Te=C.source;t.bindTexture(n.TEXTURE_CUBE_MAP,B.__webglTexture,n.TEXTURE0+ae);const Se=r.get(Te);if(Te.version!==Se.__version||oe===!0){t.activeTexture(n.TEXTURE0+ae);const Xe=Jt.getPrimaries(Jt.workingColorSpace),Ie=C.colorSpace===Gl?null:Jt.getPrimaries(C.colorSpace),Oe=C.colorSpace===Gl||Xe===Ie?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,C.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,C.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,C.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Oe);const pt=C.isCompressedTexture||C.image[0].isCompressedTexture,Le=C.image[0]&&C.image[0].isDataTexture,Fe=[];for(let he=0;he<6;he++)!pt&&!Le?Fe[he]=y(C.image[he],!0,i.maxCubemapSize):Fe[he]=Le?C.image[he].image:C.image[he],Fe[he]=ot(C,Fe[he]);const at=Fe[0],ut=s.convert(C.format,C.colorSpace),Ne=s.convert(C.type),Y=_(C.internalFormat,ut,Ne,C.colorSpace),W=C.isVideoTexture!==!0,ve=Se.__version===void 0||oe===!0,$=Te.dataReady;let me=x(C,at);K(n.TEXTURE_CUBE_MAP,C);let J;if(pt){W&&ve&&t.texStorage2D(n.TEXTURE_CUBE_MAP,me,Y,at.width,at.height);for(let he=0;he<6;he++){J=Fe[he].mipmaps;for(let Ee=0;Ee<J.length;Ee++){const Re=J[Ee];C.format!==ho?ut!==null?W?$&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee,0,0,Re.width,Re.height,ut,Re.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee,Y,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):W?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee,0,0,Re.width,Re.height,ut,Ne,Re.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee,Y,Re.width,Re.height,0,ut,Ne,Re.data)}}}else{if(J=C.mipmaps,W&&ve){J.length>0&&me++;const he=Je(Fe[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,me,Y,he.width,he.height)}for(let he=0;he<6;he++)if(Le){W?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,0,0,Fe[he].width,Fe[he].height,ut,Ne,Fe[he].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,Y,Fe[he].width,Fe[he].height,0,ut,Ne,Fe[he].data);for(let Ee=0;Ee<J.length;Ee++){const qe=J[Ee].image[he].image;W?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee+1,0,0,qe.width,qe.height,ut,Ne,qe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee+1,Y,qe.width,qe.height,0,ut,Ne,qe.data)}}else{W?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,0,0,ut,Ne,Fe[he]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,Y,ut,Ne,Fe[he]);for(let Ee=0;Ee<J.length;Ee++){const Re=J[Ee];W?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee+1,0,0,ut,Ne,Re.image[he]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee+1,Y,ut,Ne,Re.image[he])}}}g(C)&&m(n.TEXTURE_CUBE_MAP),Se.__version=Te.version,C.onUpdate&&C.onUpdate(C)}B.__version=C.version}function V(B,C,ae,oe,Te,Se){const Xe=s.convert(ae.format,ae.colorSpace),Ie=s.convert(ae.type),Oe=_(ae.internalFormat,Xe,Ie,ae.colorSpace);if(!r.get(C).__hasExternalTextures){const Le=Math.max(1,C.width>>Se),Fe=Math.max(1,C.height>>Se);Te===n.TEXTURE_3D||Te===n.TEXTURE_2D_ARRAY?t.texImage3D(Te,Se,Oe,Le,Fe,C.depth,0,Xe,Ie,null):t.texImage2D(Te,Se,Oe,Le,Fe,0,Xe,Ie,null)}t.bindFramebuffer(n.FRAMEBUFFER,B),Ze(C)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,oe,Te,r.get(ae).__webglTexture,0,$e(C)):(Te===n.TEXTURE_2D||Te>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Te<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,oe,Te,r.get(ae).__webglTexture,Se),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Q(B,C,ae){if(n.bindRenderbuffer(n.RENDERBUFFER,B),C.depthBuffer){const oe=C.depthTexture,Te=oe&&oe.isDepthTexture?oe.type:null,Se=v(C.stencilBuffer,Te),Xe=C.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ie=$e(C);Ze(C)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ie,Se,C.width,C.height):ae?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ie,Se,C.width,C.height):n.renderbufferStorage(n.RENDERBUFFER,Se,C.width,C.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Xe,n.RENDERBUFFER,B)}else{const oe=C.textures;for(let Te=0;Te<oe.length;Te++){const Se=oe[Te],Xe=s.convert(Se.format,Se.colorSpace),Ie=s.convert(Se.type),Oe=_(Se.internalFormat,Xe,Ie,Se.colorSpace),pt=$e(C);ae&&Ze(C)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,pt,Oe,C.width,C.height):Ze(C)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,pt,Oe,C.width,C.height):n.renderbufferStorage(n.RENDERBUFFER,Oe,C.width,C.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function le(B,C){if(C&&C.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,B),!(C.depthTexture&&C.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(C.depthTexture).__webglTexture||C.depthTexture.image.width!==C.width||C.depthTexture.image.height!==C.height)&&(C.depthTexture.image.width=C.width,C.depthTexture.image.height=C.height,C.depthTexture.needsUpdate=!0),N(C.depthTexture,0);const oe=r.get(C.depthTexture).__webglTexture,Te=$e(C);if(C.depthTexture.format===Wd)Ze(C)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,oe,0,Te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,oe,0);else if(C.depthTexture.format===Bf)Ze(C)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,oe,0,Te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,oe,0);else throw new Error("Unknown depthTexture format")}function pe(B){const C=r.get(B),ae=B.isWebGLCubeRenderTarget===!0;if(C.__boundDepthTexture!==B.depthTexture){const oe=B.depthTexture;if(C.__depthDisposeCallback&&C.__depthDisposeCallback(),oe){const Te=()=>{delete C.__boundDepthTexture,delete C.__depthDisposeCallback,oe.removeEventListener("dispose",Te)};oe.addEventListener("dispose",Te),C.__depthDisposeCallback=Te}C.__boundDepthTexture=oe}if(B.depthTexture&&!C.__autoAllocateDepthBuffer){if(ae)throw new Error("target.depthTexture not supported in Cube render targets");le(C.__webglFramebuffer,B)}else if(ae){C.__webglDepthbuffer=[];for(let oe=0;oe<6;oe++)if(t.bindFramebuffer(n.FRAMEBUFFER,C.__webglFramebuffer[oe]),C.__webglDepthbuffer[oe]===void 0)C.__webglDepthbuffer[oe]=n.createRenderbuffer(),Q(C.__webglDepthbuffer[oe],B,!1);else{const Te=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Se=C.__webglDepthbuffer[oe];n.bindRenderbuffer(n.RENDERBUFFER,Se),n.framebufferRenderbuffer(n.FRAMEBUFFER,Te,n.RENDERBUFFER,Se)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,C.__webglFramebuffer),C.__webglDepthbuffer===void 0)C.__webglDepthbuffer=n.createRenderbuffer(),Q(C.__webglDepthbuffer,B,!1);else{const oe=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Te=C.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Te),n.framebufferRenderbuffer(n.FRAMEBUFFER,oe,n.RENDERBUFFER,Te)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function ue(B,C,ae){const oe=r.get(B);C!==void 0&&V(oe.__webglFramebuffer,B,B.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ae!==void 0&&pe(B)}function be(B){const C=B.texture,ae=r.get(B),oe=r.get(C);B.addEventListener("dispose",T);const Te=B.textures,Se=B.isWebGLCubeRenderTarget===!0,Xe=Te.length>1;if(Xe||(oe.__webglTexture===void 0&&(oe.__webglTexture=n.createTexture()),oe.__version=C.version,o.memory.textures++),Se){ae.__webglFramebuffer=[];for(let Ie=0;Ie<6;Ie++)if(C.mipmaps&&C.mipmaps.length>0){ae.__webglFramebuffer[Ie]=[];for(let Oe=0;Oe<C.mipmaps.length;Oe++)ae.__webglFramebuffer[Ie][Oe]=n.createFramebuffer()}else ae.__webglFramebuffer[Ie]=n.createFramebuffer()}else{if(C.mipmaps&&C.mipmaps.length>0){ae.__webglFramebuffer=[];for(let Ie=0;Ie<C.mipmaps.length;Ie++)ae.__webglFramebuffer[Ie]=n.createFramebuffer()}else ae.__webglFramebuffer=n.createFramebuffer();if(Xe)for(let Ie=0,Oe=Te.length;Ie<Oe;Ie++){const pt=r.get(Te[Ie]);pt.__webglTexture===void 0&&(pt.__webglTexture=n.createTexture(),o.memory.textures++)}if(B.samples>0&&Ze(B)===!1){ae.__webglMultisampledFramebuffer=n.createFramebuffer(),ae.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ae.__webglMultisampledFramebuffer);for(let Ie=0;Ie<Te.length;Ie++){const Oe=Te[Ie];ae.__webglColorRenderbuffer[Ie]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ae.__webglColorRenderbuffer[Ie]);const pt=s.convert(Oe.format,Oe.colorSpace),Le=s.convert(Oe.type),Fe=_(Oe.internalFormat,pt,Le,Oe.colorSpace,B.isXRRenderTarget===!0),at=$e(B);n.renderbufferStorageMultisample(n.RENDERBUFFER,at,Fe,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ie,n.RENDERBUFFER,ae.__webglColorRenderbuffer[Ie])}n.bindRenderbuffer(n.RENDERBUFFER,null),B.depthBuffer&&(ae.__webglDepthRenderbuffer=n.createRenderbuffer(),Q(ae.__webglDepthRenderbuffer,B,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Se){t.bindTexture(n.TEXTURE_CUBE_MAP,oe.__webglTexture),K(n.TEXTURE_CUBE_MAP,C);for(let Ie=0;Ie<6;Ie++)if(C.mipmaps&&C.mipmaps.length>0)for(let Oe=0;Oe<C.mipmaps.length;Oe++)V(ae.__webglFramebuffer[Ie][Oe],B,C,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Oe);else V(ae.__webglFramebuffer[Ie],B,C,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0);g(C)&&m(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Xe){for(let Ie=0,Oe=Te.length;Ie<Oe;Ie++){const pt=Te[Ie],Le=r.get(pt);t.bindTexture(n.TEXTURE_2D,Le.__webglTexture),K(n.TEXTURE_2D,pt),V(ae.__webglFramebuffer,B,pt,n.COLOR_ATTACHMENT0+Ie,n.TEXTURE_2D,0),g(pt)&&m(n.TEXTURE_2D)}t.unbindTexture()}else{let Ie=n.TEXTURE_2D;if((B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(Ie=B.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ie,oe.__webglTexture),K(Ie,C),C.mipmaps&&C.mipmaps.length>0)for(let Oe=0;Oe<C.mipmaps.length;Oe++)V(ae.__webglFramebuffer[Oe],B,C,n.COLOR_ATTACHMENT0,Ie,Oe);else V(ae.__webglFramebuffer,B,C,n.COLOR_ATTACHMENT0,Ie,0);g(C)&&m(Ie),t.unbindTexture()}B.depthBuffer&&pe(B)}function Pe(B){const C=B.textures;for(let ae=0,oe=C.length;ae<oe;ae++){const Te=C[ae];if(g(Te)){const Se=B.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Xe=r.get(Te).__webglTexture;t.bindTexture(Se,Xe),m(Se),t.unbindTexture()}}}const we=[],G=[];function He(B){if(B.samples>0){if(Ze(B)===!1){const C=B.textures,ae=B.width,oe=B.height;let Te=n.COLOR_BUFFER_BIT;const Se=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Xe=r.get(B),Ie=C.length>1;if(Ie)for(let Oe=0;Oe<C.length;Oe++)t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Oe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Oe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Xe.__webglFramebuffer);for(let Oe=0;Oe<C.length;Oe++){if(B.resolveDepthBuffer&&(B.depthBuffer&&(Te|=n.DEPTH_BUFFER_BIT),B.stencilBuffer&&B.resolveStencilBuffer&&(Te|=n.STENCIL_BUFFER_BIT)),Ie){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Xe.__webglColorRenderbuffer[Oe]);const pt=r.get(C[Oe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,pt,0)}n.blitFramebuffer(0,0,ae,oe,0,0,ae,oe,Te,n.NEAREST),l===!0&&(we.length=0,G.length=0,we.push(n.COLOR_ATTACHMENT0+Oe),B.depthBuffer&&B.resolveDepthBuffer===!1&&(we.push(Se),G.push(Se),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,G)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,we))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ie)for(let Oe=0;Oe<C.length;Oe++){t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Oe,n.RENDERBUFFER,Xe.__webglColorRenderbuffer[Oe]);const pt=r.get(C[Oe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Oe,n.TEXTURE_2D,pt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer)}else if(B.depthBuffer&&B.resolveDepthBuffer===!1&&l){const C=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[C])}}}function $e(B){return Math.min(i.maxSamples,B.samples)}function Ze(B){const C=r.get(B);return B.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&C.__useRenderToTexture!==!1}function De(B){const C=o.render.frame;u.get(B)!==C&&(u.set(B,C),B.update())}function ot(B,C){const ae=B.colorSpace,oe=B.format,Te=B.type;return B.isCompressedTexture===!0||B.isVideoTexture===!0||ae!==Pc&&ae!==Gl&&(Jt.getTransfer(ae)===Tn?(oe!==ho||Te!==il)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ae)),C}function Je(B){return typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement?(c.width=B.naturalWidth||B.width,c.height=B.naturalHeight||B.height):typeof VideoFrame<"u"&&B instanceof VideoFrame?(c.width=B.displayWidth,c.height=B.displayHeight):(c.width=B.width,c.height=B.height),c}this.allocateTextureUnit=I,this.resetTextureUnits=E,this.setTexture2D=N,this.setTexture2DArray=R,this.setTexture3D=D,this.setTextureCube=q,this.rebindTextures=ue,this.setupRenderTarget=be,this.updateRenderTargetMipmap=Pe,this.updateMultisampleRenderTarget=He,this.setupDepthRenderbuffer=pe,this.setupFrameBufferTexture=V,this.useMultisampledRTT=Ze}function dge(n,e){function t(r,i=Gl){let s;const o=Jt.getTransfer(i);if(r===il)return n.UNSIGNED_BYTE;if(r===TP)return n.UNSIGNED_SHORT_4_4_4_4;if(r===MP)return n.UNSIGNED_SHORT_5_5_5_1;if(r===EV)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===TV)return n.BYTE;if(r===MV)return n.SHORT;if(r===Fg)return n.UNSIGNED_SHORT;if(r===wP)return n.INT;if(r===Hu)return n.UNSIGNED_INT;if(r===Ua)return n.FLOAT;if(r===sp)return n.HALF_FLOAT;if(r===CV)return n.ALPHA;if(r===AV)return n.RGB;if(r===ho)return n.RGBA;if(r===RV)return n.LUMINANCE;if(r===NV)return n.LUMINANCE_ALPHA;if(r===Wd)return n.DEPTH_COMPONENT;if(r===Bf)return n.DEPTH_STENCIL;if(r===PV)return n.RED;if(r===EP)return n.RED_INTEGER;if(r===IV)return n.RG;if(r===CP)return n.RG_INTEGER;if(r===AP)return n.RGBA_INTEGER;if(r===o_||r===a_||r===l_||r===c_)if(o===Tn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===o_)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===a_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===l_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===c_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===o_)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===a_)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===l_)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===c_)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===AC||r===RC||r===NC||r===PC)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===AC)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===RC)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===NC)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===PC)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===IC||r===LC||r===DC)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===IC||r===LC)return o===Tn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===DC)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===FC||r===OC||r===kC||r===UC||r===BC||r===zC||r===$C||r===VC||r===GC||r===HC||r===WC||r===jC||r===qC||r===XC)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===FC)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===OC)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===kC)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===UC)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===BC)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===zC)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===$C)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===VC)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===GC)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===HC)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===WC)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===jC)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===qC)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===XC)return o===Tn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===u_||r===KC||r===YC)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===u_)return o===Tn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===KC)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===YC)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===LV||r===ZC||r===QC||r===JC)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===u_)return s.COMPRESSED_RED_RGTC1_EXT;if(r===ZC)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===QC)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===JC)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Uf?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}class fge extends Rs{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let wd=class extends gi{constructor(){super(),this.isGroup=!0,this.type="Group"}};const pge={type:"move"};class Zw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new wd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new wd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new X,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new X),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new wd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new X,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new X),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const y of e.hand.values()){const g=t.getJointPose(y,r),m=this._getHandJoint(c,y);g!==null&&(m.matrix.fromArray(g.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=g.radius),m.visible=g!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],d=u.position.distanceTo(h.position),f=.02,p=.005;c.inputState.pinching&&d>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(pge)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new wd;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const mge=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,gge=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class yge{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Vs,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Xo({vertexShader:mge,fragmentShader:gge,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Is(new Gb(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class vge extends Ic{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,d=null,f=null,p=null;const y=new yge,g=t.getContextAttributes();let m=null,_=null;const v=[],x=[],b=new Ge;let T=null;const w=new Rs;w.layers.enable(1),w.viewport=new ar;const M=new Rs;M.layers.enable(2),M.viewport=new ar;const A=[w,M],S=new fge;S.layers.enable(1),S.layers.enable(2);let E=null,I=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(k){let V=v[k];return V===void 0&&(V=new Zw,v[k]=V),V.getTargetRaySpace()},this.getControllerGrip=function(k){let V=v[k];return V===void 0&&(V=new Zw,v[k]=V),V.getGripSpace()},this.getHand=function(k){let V=v[k];return V===void 0&&(V=new Zw,v[k]=V),V.getHandSpace()};function O(k){const V=x.indexOf(k.inputSource);if(V===-1)return;const Q=v[V];Q!==void 0&&(Q.update(k.inputSource,k.frame,c||o),Q.dispatchEvent({type:k.type,data:k.inputSource}))}function N(){i.removeEventListener("select",O),i.removeEventListener("selectstart",O),i.removeEventListener("selectend",O),i.removeEventListener("squeeze",O),i.removeEventListener("squeezestart",O),i.removeEventListener("squeezeend",O),i.removeEventListener("end",N),i.removeEventListener("inputsourceschange",R);for(let k=0;k<v.length;k++){const V=x[k];V!==null&&(x[k]=null,v[k].disconnect(V))}E=null,I=null,y.reset(),e.setRenderTarget(m),f=null,d=null,h=null,i=null,_=null,te.stop(),r.isPresenting=!1,e.setPixelRatio(T),e.setSize(b.width,b.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(k){s=k,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(k){a=k,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(k){c=k},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(k){if(i=k,i!==null){if(m=e.getRenderTarget(),i.addEventListener("select",O),i.addEventListener("selectstart",O),i.addEventListener("selectend",O),i.addEventListener("squeeze",O),i.addEventListener("squeezestart",O),i.addEventListener("squeezeend",O),i.addEventListener("end",N),i.addEventListener("inputsourceschange",R),g.xrCompatible!==!0&&await t.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(b),i.renderState.layers===void 0){const V={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(i,t,V),i.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),_=new vc(f.framebufferWidth,f.framebufferHeight,{format:ho,type:il,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let V=null,Q=null,le=null;g.depth&&(le=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,V=g.stencil?Bf:Wd,Q=g.stencil?Uf:Hu);const pe={colorFormat:t.RGBA8,depthFormat:le,scaleFactor:s};h=new XRWebGLBinding(i,t),d=h.createProjectionLayer(pe),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),_=new vc(d.textureWidth,d.textureHeight,{format:ho,type:il,depthTexture:new eG(d.textureWidth,d.textureHeight,Q,void 0,void 0,void 0,void 0,void 0,void 0,V),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),te.setContext(i),te.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return y.getDepthTexture()};function R(k){for(let V=0;V<k.removed.length;V++){const Q=k.removed[V],le=x.indexOf(Q);le>=0&&(x[le]=null,v[le].disconnect(Q))}for(let V=0;V<k.added.length;V++){const Q=k.added[V];let le=x.indexOf(Q);if(le===-1){for(let ue=0;ue<v.length;ue++)if(ue>=x.length){x.push(Q),le=ue;break}else if(x[ue]===null){x[ue]=Q,le=ue;break}if(le===-1)break}const pe=v[le];pe&&pe.connect(Q)}}const D=new X,q=new X;function L(k,V,Q){D.setFromMatrixPosition(V.matrixWorld),q.setFromMatrixPosition(Q.matrixWorld);const le=D.distanceTo(q),pe=V.projectionMatrix.elements,ue=Q.projectionMatrix.elements,be=pe[14]/(pe[10]-1),Pe=pe[14]/(pe[10]+1),we=(pe[9]+1)/pe[5],G=(pe[9]-1)/pe[5],He=(pe[8]-1)/pe[0],$e=(ue[8]+1)/ue[0],Ze=be*He,De=be*$e,ot=le/(-He+$e),Je=ot*-He;if(V.matrixWorld.decompose(k.position,k.quaternion,k.scale),k.translateX(Je),k.translateZ(ot),k.matrixWorld.compose(k.position,k.quaternion,k.scale),k.matrixWorldInverse.copy(k.matrixWorld).invert(),pe[10]===-1)k.projectionMatrix.copy(V.projectionMatrix),k.projectionMatrixInverse.copy(V.projectionMatrixInverse);else{const B=be+ot,C=Pe+ot,ae=Ze-Je,oe=De+(le-Je),Te=we*Pe/C*B,Se=G*Pe/C*B;k.projectionMatrix.makePerspective(ae,oe,Te,Se,B,C),k.projectionMatrixInverse.copy(k.projectionMatrix).invert()}}function j(k,V){V===null?k.matrixWorld.copy(k.matrix):k.matrixWorld.multiplyMatrices(V.matrixWorld,k.matrix),k.matrixWorldInverse.copy(k.matrixWorld).invert()}this.updateCamera=function(k){if(i===null)return;let V=k.near,Q=k.far;y.texture!==null&&(y.depthNear>0&&(V=y.depthNear),y.depthFar>0&&(Q=y.depthFar)),S.near=M.near=w.near=V,S.far=M.far=w.far=Q,(E!==S.near||I!==S.far)&&(i.updateRenderState({depthNear:S.near,depthFar:S.far}),E=S.near,I=S.far);const le=k.parent,pe=S.cameras;j(S,le);for(let ue=0;ue<pe.length;ue++)j(pe[ue],le);pe.length===2?L(S,w,M):S.projectionMatrix.copy(w.projectionMatrix),z(k,S,le)};function z(k,V,Q){Q===null?k.matrix.copy(V.matrixWorld):(k.matrix.copy(Q.matrixWorld),k.matrix.invert(),k.matrix.multiply(V.matrixWorld)),k.matrix.decompose(k.position,k.quaternion,k.scale),k.updateMatrixWorld(!0),k.projectionMatrix.copy(V.projectionMatrix),k.projectionMatrixInverse.copy(V.projectionMatrixInverse),k.isPerspectiveCamera&&(k.fov=Og*2*Math.atan(1/k.projectionMatrix.elements[5]),k.zoom=1)}this.getCamera=function(){return S},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(k){l=k,d!==null&&(d.fixedFoveation=k),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=k)},this.hasDepthSensing=function(){return y.texture!==null},this.getDepthSensingMesh=function(){return y.getMesh(S)};let K=null;function U(k,V){if(u=V.getViewerPose(c||o),p=V,u!==null){const Q=u.views;f!==null&&(e.setRenderTargetFramebuffer(_,f.framebuffer),e.setRenderTarget(_));let le=!1;Q.length!==S.cameras.length&&(S.cameras.length=0,le=!0);for(let ue=0;ue<Q.length;ue++){const be=Q[ue];let Pe=null;if(f!==null)Pe=f.getViewport(be);else{const G=h.getViewSubImage(d,be);Pe=G.viewport,ue===0&&(e.setRenderTargetTextures(_,G.colorTexture,d.ignoreDepthValues?void 0:G.depthStencilTexture),e.setRenderTarget(_))}let we=A[ue];we===void 0&&(we=new Rs,we.layers.enable(ue),we.viewport=new ar,A[ue]=we),we.matrix.fromArray(be.transform.matrix),we.matrix.decompose(we.position,we.quaternion,we.scale),we.projectionMatrix.fromArray(be.projectionMatrix),we.projectionMatrixInverse.copy(we.projectionMatrix).invert(),we.viewport.set(Pe.x,Pe.y,Pe.width,Pe.height),ue===0&&(S.matrix.copy(we.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),le===!0&&S.cameras.push(we)}const pe=i.enabledFeatures;if(pe&&pe.includes("depth-sensing")){const ue=h.getDepthInformation(Q[0]);ue&&ue.isValid&&ue.texture&&y.init(e,ue,i.renderState)}}for(let Q=0;Q<v.length;Q++){const le=x[Q],pe=v[Q];le!==null&&pe!==void 0&&pe.update(le,V,c||o)}K&&K(k,V),V.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:V}),p=null}const te=new JV;te.setAnimationLoop(U),this.setAnimationLoop=function(k){K=k},this.dispose=function(){}}}const Hc=new _c,_ge=new _n;function xge(n,e){function t(g,m){g.matrixAutoUpdate===!0&&g.updateMatrix(),m.value.copy(g.matrix)}function r(g,m){m.color.getRGB(g.fogColor.value,KV(n)),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)}function i(g,m,_,v,x){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(g,m):m.isMeshToonMaterial?(s(g,m),h(g,m)):m.isMeshPhongMaterial?(s(g,m),u(g,m)):m.isMeshStandardMaterial?(s(g,m),d(g,m),m.isMeshPhysicalMaterial&&f(g,m,x)):m.isMeshMatcapMaterial?(s(g,m),p(g,m)):m.isMeshDepthMaterial?s(g,m):m.isMeshDistanceMaterial?(s(g,m),y(g,m)):m.isMeshNormalMaterial?s(g,m):m.isLineBasicMaterial?(o(g,m),m.isLineDashedMaterial&&a(g,m)):m.isPointsMaterial?l(g,m,_,v):m.isSpriteMaterial?c(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map,t(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.bumpMap&&(g.bumpMap.value=m.bumpMap,t(m.bumpMap,g.bumpMapTransform),g.bumpScale.value=m.bumpScale,m.side===pi&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,t(m.normalMap,g.normalMapTransform),g.normalScale.value.copy(m.normalScale),m.side===pi&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,t(m.displacementMap,g.displacementMapTransform),g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,g.emissiveMapTransform)),m.specularMap&&(g.specularMap.value=m.specularMap,t(m.specularMap,g.specularMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);const _=e.get(m),v=_.envMap,x=_.envMapRotation;v&&(g.envMap.value=v,Hc.copy(x),Hc.x*=-1,Hc.y*=-1,Hc.z*=-1,v.isCubeTexture&&v.isRenderTargetTexture===!1&&(Hc.y*=-1,Hc.z*=-1),g.envMapRotation.value.setFromMatrix4(_ge.makeRotationFromEuler(Hc)),g.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap&&(g.lightMap.value=m.lightMap,g.lightMapIntensity.value=m.lightMapIntensity,t(m.lightMap,g.lightMapTransform)),m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,g.aoMapTransform))}function o(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,m.map&&(g.map.value=m.map,t(m.map,g.mapTransform))}function a(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}function l(g,m,_,v){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*_,g.scale.value=v*.5,m.map&&(g.map.value=m.map,t(m.map,g.uvTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function c(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map,t(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function u(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}function h(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}function d(g,m){g.metalness.value=m.metalness,m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,g.metalnessMapTransform)),g.roughness.value=m.roughness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,g.roughnessMapTransform)),m.envMap&&(g.envMapIntensity.value=m.envMapIntensity)}function f(g,m,_){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,g.sheenColorMapTransform)),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,g.sheenRoughnessMapTransform))),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,g.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(g.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===pi&&g.clearcoatNormalScale.value.negate())),m.dispersion>0&&(g.dispersion.value=m.dispersion),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,g.iridescenceMapTransform)),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=_.texture,g.transmissionSamplerSize.value.set(_.width,_.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,g.transmissionMapTransform)),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(g.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(g.anisotropyMap.value=m.anisotropyMap,t(m.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,g.specularColorMapTransform)),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,g.specularIntensityMapTransform))}function p(g,m){m.matcap&&(g.matcap.value=m.matcap)}function y(g,m){const _=e.get(m).light;g.referencePosition.value.setFromMatrixPosition(_.matrixWorld),g.nearDistance.value=_.shadow.camera.near,g.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Sge(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,v){const x=v.program;r.uniformBlockBinding(_,x)}function c(_,v){let x=i[_.id];x===void 0&&(p(_),x=u(_),i[_.id]=x,_.addEventListener("dispose",g));const b=v.program;r.updateUBOMapping(_,b);const T=e.render.frame;s[_.id]!==T&&(d(_),s[_.id]=T)}function u(_){const v=h();_.__bindingPointIndex=v;const x=n.createBuffer(),b=_.__size,T=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,x),n.bufferData(n.UNIFORM_BUFFER,b,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,v,x),x}function h(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(_){const v=i[_.id],x=_.uniforms,b=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,v);for(let T=0,w=x.length;T<w;T++){const M=Array.isArray(x[T])?x[T]:[x[T]];for(let A=0,S=M.length;A<S;A++){const E=M[A];if(f(E,T,A,b)===!0){const I=E.__offset,O=Array.isArray(E.value)?E.value:[E.value];let N=0;for(let R=0;R<O.length;R++){const D=O[R],q=y(D);typeof D=="number"||typeof D=="boolean"?(E.__data[0]=D,n.bufferSubData(n.UNIFORM_BUFFER,I+N,E.__data)):D.isMatrix3?(E.__data[0]=D.elements[0],E.__data[1]=D.elements[1],E.__data[2]=D.elements[2],E.__data[3]=0,E.__data[4]=D.elements[3],E.__data[5]=D.elements[4],E.__data[6]=D.elements[5],E.__data[7]=0,E.__data[8]=D.elements[6],E.__data[9]=D.elements[7],E.__data[10]=D.elements[8],E.__data[11]=0):(D.toArray(E.__data,N),N+=q.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,I,E.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(_,v,x,b){const T=_.value,w=v+"_"+x;if(b[w]===void 0)return typeof T=="number"||typeof T=="boolean"?b[w]=T:b[w]=T.clone(),!0;{const M=b[w];if(typeof T=="number"||typeof T=="boolean"){if(M!==T)return b[w]=T,!0}else if(M.equals(T)===!1)return M.copy(T),!0}return!1}function p(_){const v=_.uniforms;let x=0;const b=16;for(let w=0,M=v.length;w<M;w++){const A=Array.isArray(v[w])?v[w]:[v[w]];for(let S=0,E=A.length;S<E;S++){const I=A[S],O=Array.isArray(I.value)?I.value:[I.value];for(let N=0,R=O.length;N<R;N++){const D=O[N],q=y(D),L=x%b,j=L%q.boundary,z=L+j;x+=j,z!==0&&b-z<q.storage&&(x+=b-z),I.__data=new Float32Array(q.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=x,x+=q.storage}}}const T=x%b;return T>0&&(x+=b-T),_.__size=x,_.__cache={},this}function y(_){const v={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(v.boundary=4,v.storage=4):_.isVector2?(v.boundary=8,v.storage=8):_.isVector3||_.isColor?(v.boundary=16,v.storage=12):_.isVector4?(v.boundary=16,v.storage=16):_.isMatrix3?(v.boundary=48,v.storage=48):_.isMatrix4?(v.boundary=64,v.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),v}function g(_){const v=_.target;v.removeEventListener("dispose",g);const x=o.indexOf(v.__bindingPointIndex);o.splice(x,1),n.deleteBuffer(i[v.id]),delete i[v.id],delete s[v.id]}function m(){for(const _ in i)n.deleteBuffer(i[_]);o=[],i={},s={}}return{bind:l,update:c,dispose:m}}class bge{constructor(e={}){const{canvas:t=uhe(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let d;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=r.getContextAttributes().alpha}else d=o;const f=new Uint32Array(4),p=new Int32Array(4);let y=null,g=null;const m=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ts,this.toneMapping=uc,this.toneMappingExposure=1;const v=this;let x=!1,b=0,T=0,w=null,M=-1,A=null;const S=new ar,E=new ar;let I=null;const O=new Ot(0);let N=0,R=t.width,D=t.height,q=1,L=null,j=null;const z=new ar(0,0,R,D),K=new ar(0,0,R,D);let U=!1;const te=new DP;let k=!1,V=!1;const Q=new _n,le=new _n,pe=new X,ue=new ar,be={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Pe=!1;function we(){return w===null?q:1}let G=r;function He(F,ie){return t.getContext(F,ie)}try{const F={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ub}`),t.addEventListener("webglcontextlost",he,!1),t.addEventListener("webglcontextrestored",Ee,!1),t.addEventListener("webglcontextcreationerror",Re,!1),G===null){const ie="webgl2";if(G=He(ie,F),G===null)throw He(ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(F){throw console.error("THREE.WebGLRenderer: "+F.message),F}let $e,Ze,De,ot,Je,B,C,ae,oe,Te,Se,Xe,Ie,Oe,pt,Le,Fe,at,ut,Ne,Y,W,ve,$;function me(){$e=new Cpe(G),$e.init(),W=new dge(G,$e),Ze=new Spe(G,$e,e,W),De=new cge(G),Ze.reverseDepthBuffer&&De.buffers.depth.setReversed(!0),ot=new Npe(G),Je=new Xme,B=new hge(G,$e,De,Je,Ze,W,ot),C=new wpe(v),ae=new Epe(v),oe=new khe(G),ve=new _pe(G,oe),Te=new Ape(G,oe,ot,ve),Se=new Ipe(G,Te,oe,ot),ut=new Ppe(G,Ze,B),Le=new bpe(Je),Xe=new qme(v,C,ae,$e,Ze,ve,Le),Ie=new xge(v,Je),Oe=new Yme,pt=new nge($e),at=new vpe(v,C,ae,De,Se,d,l),Fe=new age(v,Se,Ze),$=new Sge(G,ot,Ze,De),Ne=new xpe(G,$e,ot),Y=new Rpe(G,$e,ot),ot.programs=Xe.programs,v.capabilities=Ze,v.extensions=$e,v.properties=Je,v.renderLists=Oe,v.shadowMap=Fe,v.state=De,v.info=ot}me();const J=new vge(v,G);this.xr=J,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){const F=$e.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=$e.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(F){F!==void 0&&(q=F,this.setSize(R,D,!1))},this.getSize=function(F){return F.set(R,D)},this.setSize=function(F,ie,de=!0){if(J.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}R=F,D=ie,t.width=Math.floor(F*q),t.height=Math.floor(ie*q),de===!0&&(t.style.width=F+"px",t.style.height=ie+"px"),this.setViewport(0,0,F,ie)},this.getDrawingBufferSize=function(F){return F.set(R*q,D*q).floor()},this.setDrawingBufferSize=function(F,ie,de){R=F,D=ie,q=de,t.width=Math.floor(F*de),t.height=Math.floor(ie*de),this.setViewport(0,0,F,ie)},this.getCurrentViewport=function(F){return F.copy(S)},this.getViewport=function(F){return F.copy(z)},this.setViewport=function(F,ie,de,fe){F.isVector4?z.set(F.x,F.y,F.z,F.w):z.set(F,ie,de,fe),De.viewport(S.copy(z).multiplyScalar(q).round())},this.getScissor=function(F){return F.copy(K)},this.setScissor=function(F,ie,de,fe){F.isVector4?K.set(F.x,F.y,F.z,F.w):K.set(F,ie,de,fe),De.scissor(E.copy(K).multiplyScalar(q).round())},this.getScissorTest=function(){return U},this.setScissorTest=function(F){De.setScissorTest(U=F)},this.setOpaqueSort=function(F){L=F},this.setTransparentSort=function(F){j=F},this.getClearColor=function(F){return F.copy(at.getClearColor())},this.setClearColor=function(){at.setClearColor.apply(at,arguments)},this.getClearAlpha=function(){return at.getClearAlpha()},this.setClearAlpha=function(){at.setClearAlpha.apply(at,arguments)},this.clear=function(F=!0,ie=!0,de=!0){let fe=0;if(F){let se=!1;if(w!==null){const Be=w.texture.format;se=Be===AP||Be===CP||Be===EP}if(se){const Be=w.texture.type,Qe=Be===il||Be===Hu||Be===Fg||Be===Uf||Be===TP||Be===MP,nt=at.getClearColor(),rt=at.getClearAlpha(),mt=nt.r,gt=nt.g,lt=nt.b;Qe?(f[0]=mt,f[1]=gt,f[2]=lt,f[3]=rt,G.clearBufferuiv(G.COLOR,0,f)):(p[0]=mt,p[1]=gt,p[2]=lt,p[3]=rt,G.clearBufferiv(G.COLOR,0,p))}else fe|=G.COLOR_BUFFER_BIT}ie&&(fe|=G.DEPTH_BUFFER_BIT,G.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),de&&(fe|=G.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),G.clear(fe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",he,!1),t.removeEventListener("webglcontextrestored",Ee,!1),t.removeEventListener("webglcontextcreationerror",Re,!1),Oe.dispose(),pt.dispose(),Je.dispose(),C.dispose(),ae.dispose(),Se.dispose(),ve.dispose(),$.dispose(),Xe.dispose(),J.dispose(),J.removeEventListener("sessionstart",na),J.removeEventListener("sessionend",kc),Hi.stop()};function he(F){F.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Ee(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const F=ot.autoReset,ie=Fe.enabled,de=Fe.autoUpdate,fe=Fe.needsUpdate,se=Fe.type;me(),ot.autoReset=F,Fe.enabled=ie,Fe.autoUpdate=de,Fe.needsUpdate=fe,Fe.type=se}function Re(F){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function qe(F){const ie=F.target;ie.removeEventListener("dispose",qe),vt(ie)}function vt(F){on(F),Je.remove(F)}function on(F){const ie=Je.get(F).programs;ie!==void 0&&(ie.forEach(function(de){Xe.releaseProgram(de)}),F.isShaderMaterial&&Xe.releaseShaderCache(F))}this.renderBufferDirect=function(F,ie,de,fe,se,Be){ie===null&&(ie=be);const Qe=se.isMesh&&se.matrixWorld.determinant()<0,nt=K8(F,ie,de,fe,se);De.setMaterial(fe,Qe);let rt=de.index,mt=1;if(fe.wireframe===!0){if(rt=Te.getWireframeAttribute(de),rt===void 0)return;mt=2}const gt=de.drawRange,lt=de.attributes.position;let an=gt.start*mt,Sn=(gt.start+gt.count)*mt;Be!==null&&(an=Math.max(an,Be.start*mt),Sn=Math.min(Sn,(Be.start+Be.count)*mt)),rt!==null?(an=Math.max(an,0),Sn=Math.min(Sn,rt.count)):lt!=null&&(an=Math.max(an,0),Sn=Math.min(Sn,lt.count));const Vn=Sn-an;if(Vn<0||Vn===1/0)return;ve.setup(se,fe,nt,de,rt);let Wi,Yt=Ne;if(rt!==null&&(Wi=oe.get(rt),Yt=Y,Yt.setIndex(Wi)),se.isMesh)fe.wireframe===!0?(De.setLineWidth(fe.wireframeLinewidth*we()),Yt.setMode(G.LINES)):Yt.setMode(G.TRIANGLES);else if(se.isLine){let ct=fe.linewidth;ct===void 0&&(ct=1),De.setLineWidth(ct*we()),se.isLineSegments?Yt.setMode(G.LINES):se.isLineLoop?Yt.setMode(G.LINE_LOOP):Yt.setMode(G.LINE_STRIP)}else se.isPoints?Yt.setMode(G.POINTS):se.isSprite&&Yt.setMode(G.TRIANGLES);if(se.isBatchedMesh)if(se._multiDrawInstances!==null)Yt.renderMultiDrawInstances(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount,se._multiDrawInstances);else if($e.get("WEBGL_multi_draw"))Yt.renderMultiDraw(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount);else{const ct=se._multiDrawStarts,Rr=se._multiDrawCounts,Zt=se._multiDrawCount,Hs=rt?oe.get(rt).bytesPerElement:1,hh=Je.get(fe).currentProgram.getUniforms();for(let ji=0;ji<Zt;ji++)hh.setValue(G,"_gl_DrawID",ji),Yt.render(ct[ji]/Hs,Rr[ji])}else if(se.isInstancedMesh)Yt.renderInstances(an,Vn,se.count);else if(de.isInstancedBufferGeometry){const ct=de._maxInstanceCount!==void 0?de._maxInstanceCount:1/0,Rr=Math.min(de.instanceCount,ct);Yt.renderInstances(an,Vn,Rr)}else Yt.render(an,Vn)};function dt(F,ie,de){F.transparent===!0&&F.side===Aa&&F.forceSinglePass===!1?(F.side=pi,F.needsUpdate=!0,ky(F,ie,de),F.side=yc,F.needsUpdate=!0,ky(F,ie,de),F.side=Aa):ky(F,ie,de)}this.compile=function(F,ie,de=null){de===null&&(de=F),g=pt.get(de),g.init(ie),_.push(g),de.traverseVisible(function(se){se.isLight&&se.layers.test(ie.layers)&&(g.pushLight(se),se.castShadow&&g.pushShadow(se))}),F!==de&&F.traverseVisible(function(se){se.isLight&&se.layers.test(ie.layers)&&(g.pushLight(se),se.castShadow&&g.pushShadow(se))}),g.setupLights();const fe=new Set;return F.traverse(function(se){if(!(se.isMesh||se.isPoints||se.isLine||se.isSprite))return;const Be=se.material;if(Be)if(Array.isArray(Be))for(let Qe=0;Qe<Be.length;Qe++){const nt=Be[Qe];dt(nt,de,se),fe.add(nt)}else dt(Be,de,se),fe.add(Be)}),_.pop(),g=null,fe},this.compileAsync=function(F,ie,de=null){const fe=this.compile(F,ie,de);return new Promise(se=>{function Be(){if(fe.forEach(function(Qe){Je.get(Qe).currentProgram.isReady()&&fe.delete(Qe)}),fe.size===0){se(F);return}setTimeout(Be,10)}$e.get("KHR_parallel_shader_compile")!==null?Be():setTimeout(Be,10)})};let pn=null;function Kn(F){pn&&pn(F)}function na(){Hi.stop()}function kc(){Hi.start()}const Hi=new JV;Hi.setAnimationLoop(Kn),typeof self<"u"&&Hi.setContext(self),this.setAnimationLoop=function(F){pn=F,J.setAnimationLoop(F),F===null?Hi.stop():Hi.start()},J.addEventListener("sessionstart",na),J.addEventListener("sessionend",kc),this.render=function(F,ie){if(ie!==void 0&&ie.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;if(F.matrixWorldAutoUpdate===!0&&F.updateMatrixWorld(),ie.parent===null&&ie.matrixWorldAutoUpdate===!0&&ie.updateMatrixWorld(),J.enabled===!0&&J.isPresenting===!0&&(J.cameraAutoUpdate===!0&&J.updateCamera(ie),ie=J.getCamera()),F.isScene===!0&&F.onBeforeRender(v,F,ie,w),g=pt.get(F,_.length),g.init(ie),_.push(g),le.multiplyMatrices(ie.projectionMatrix,ie.matrixWorldInverse),te.setFromProjectionMatrix(le),V=this.localClippingEnabled,k=Le.init(this.clippingPlanes,V),y=Oe.get(F,m.length),y.init(),m.push(y),J.enabled===!0&&J.isPresenting===!0){const Be=v.xr.getDepthSensingMesh();Be!==null&&ra(Be,ie,-1/0,v.sortObjects)}ra(F,ie,0,v.sortObjects),y.finish(),v.sortObjects===!0&&y.sort(L,j),Pe=J.enabled===!1||J.isPresenting===!1||J.hasDepthSensing()===!1,Pe&&at.addToRenderList(y,F),this.info.render.frame++,k===!0&&Le.beginShadows();const de=g.state.shadowsArray;Fe.render(de,F,ie),k===!0&&Le.endShadows(),this.info.autoReset===!0&&this.info.reset();const fe=y.opaque,se=y.transmissive;if(g.setupLights(),ie.isArrayCamera){const Be=ie.cameras;if(se.length>0)for(let Qe=0,nt=Be.length;Qe<nt;Qe++){const rt=Be[Qe];X2(fe,se,F,rt)}Pe&&at.render(F);for(let Qe=0,nt=Be.length;Qe<nt;Qe++){const rt=Be[Qe];q2(y,F,rt,rt.viewport)}}else se.length>0&&X2(fe,se,F,ie),Pe&&at.render(F),q2(y,F,ie);w!==null&&(B.updateMultisampleRenderTarget(w),B.updateRenderTargetMipmap(w)),F.isScene===!0&&F.onAfterRender(v,F,ie),ve.resetDefaultState(),M=-1,A=null,_.pop(),_.length>0?(g=_[_.length-1],k===!0&&Le.setGlobalState(v.clippingPlanes,g.state.camera)):g=null,m.pop(),m.length>0?y=m[m.length-1]:y=null};function ra(F,ie,de,fe){if(F.visible===!1)return;if(F.layers.test(ie.layers)){if(F.isGroup)de=F.renderOrder;else if(F.isLOD)F.autoUpdate===!0&&F.update(ie);else if(F.isLight)g.pushLight(F),F.castShadow&&g.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||te.intersectsSprite(F)){fe&&ue.setFromMatrixPosition(F.matrixWorld).applyMatrix4(le);const Qe=Se.update(F),nt=F.material;nt.visible&&y.push(F,Qe,nt,de,ue.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||te.intersectsObject(F))){const Qe=Se.update(F),nt=F.material;if(fe&&(F.boundingSphere!==void 0?(F.boundingSphere===null&&F.computeBoundingSphere(),ue.copy(F.boundingSphere.center)):(Qe.boundingSphere===null&&Qe.computeBoundingSphere(),ue.copy(Qe.boundingSphere.center)),ue.applyMatrix4(F.matrixWorld).applyMatrix4(le)),Array.isArray(nt)){const rt=Qe.groups;for(let mt=0,gt=rt.length;mt<gt;mt++){const lt=rt[mt],an=nt[lt.materialIndex];an&&an.visible&&y.push(F,Qe,an,de,ue.z,lt)}}else nt.visible&&y.push(F,Qe,nt,de,ue.z,null)}}const Be=F.children;for(let Qe=0,nt=Be.length;Qe<nt;Qe++)ra(Be[Qe],ie,de,fe)}function q2(F,ie,de,fe){const se=F.opaque,Be=F.transmissive,Qe=F.transparent;g.setupLightsView(de),k===!0&&Le.setGlobalState(v.clippingPlanes,de),fe&&De.viewport(S.copy(fe)),se.length>0&&Oy(se,ie,de),Be.length>0&&Oy(Be,ie,de),Qe.length>0&&Oy(Qe,ie,de),De.buffers.depth.setTest(!0),De.buffers.depth.setMask(!0),De.buffers.color.setMask(!0),De.setPolygonOffset(!1)}function X2(F,ie,de,fe){if((de.isScene===!0?de.overrideMaterial:null)!==null)return;g.state.transmissionRenderTarget[fe.id]===void 0&&(g.state.transmissionRenderTarget[fe.id]=new vc(1,1,{generateMipmaps:!0,type:$e.has("EXT_color_buffer_half_float")||$e.has("EXT_color_buffer_float")?sp:il,minFilter:vu,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Jt.workingColorSpace}));const Be=g.state.transmissionRenderTarget[fe.id],Qe=fe.viewport||S;Be.setSize(Qe.z,Qe.w);const nt=v.getRenderTarget();v.setRenderTarget(Be),v.getClearColor(O),N=v.getClearAlpha(),N<1&&v.setClearColor(16777215,.5),v.clear(),Pe&&at.render(de);const rt=v.toneMapping;v.toneMapping=uc;const mt=fe.viewport;if(fe.viewport!==void 0&&(fe.viewport=void 0),g.setupLightsView(fe),k===!0&&Le.setGlobalState(v.clippingPlanes,fe),Oy(F,de,fe),B.updateMultisampleRenderTarget(Be),B.updateRenderTargetMipmap(Be),$e.has("WEBGL_multisampled_render_to_texture")===!1){let gt=!1;for(let lt=0,an=ie.length;lt<an;lt++){const Sn=ie[lt],Vn=Sn.object,Wi=Sn.geometry,Yt=Sn.material,ct=Sn.group;if(Yt.side===Aa&&Vn.layers.test(fe.layers)){const Rr=Yt.side;Yt.side=pi,Yt.needsUpdate=!0,K2(Vn,de,fe,Wi,Yt,ct),Yt.side=Rr,Yt.needsUpdate=!0,gt=!0}}gt===!0&&(B.updateMultisampleRenderTarget(Be),B.updateRenderTargetMipmap(Be))}v.setRenderTarget(nt),v.setClearColor(O,N),mt!==void 0&&(fe.viewport=mt),v.toneMapping=rt}function Oy(F,ie,de){const fe=ie.isScene===!0?ie.overrideMaterial:null;for(let se=0,Be=F.length;se<Be;se++){const Qe=F[se],nt=Qe.object,rt=Qe.geometry,mt=fe===null?Qe.material:fe,gt=Qe.group;nt.layers.test(de.layers)&&K2(nt,ie,de,rt,mt,gt)}}function K2(F,ie,de,fe,se,Be){F.onBeforeRender(v,ie,de,fe,se,Be),F.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),se.onBeforeRender(v,ie,de,fe,F,Be),se.transparent===!0&&se.side===Aa&&se.forceSinglePass===!1?(se.side=pi,se.needsUpdate=!0,v.renderBufferDirect(de,ie,fe,se,F,Be),se.side=yc,se.needsUpdate=!0,v.renderBufferDirect(de,ie,fe,se,F,Be),se.side=Aa):v.renderBufferDirect(de,ie,fe,se,F,Be),F.onAfterRender(v,ie,de,fe,se,Be)}function ky(F,ie,de){ie.isScene!==!0&&(ie=be);const fe=Je.get(F),se=g.state.lights,Be=g.state.shadowsArray,Qe=se.state.version,nt=Xe.getParameters(F,se.state,Be,ie,de),rt=Xe.getProgramCacheKey(nt);let mt=fe.programs;fe.environment=F.isMeshStandardMaterial?ie.environment:null,fe.fog=ie.fog,fe.envMap=(F.isMeshStandardMaterial?ae:C).get(F.envMap||fe.environment),fe.envMapRotation=fe.environment!==null&&F.envMap===null?ie.environmentRotation:F.envMapRotation,mt===void 0&&(F.addEventListener("dispose",qe),mt=new Map,fe.programs=mt);let gt=mt.get(rt);if(gt!==void 0){if(fe.currentProgram===gt&&fe.lightsStateVersion===Qe)return Z2(F,nt),gt}else nt.uniforms=Xe.getUniforms(F),F.onBeforeCompile(nt,v),gt=Xe.acquireProgram(nt,rt),mt.set(rt,gt),fe.uniforms=nt.uniforms;const lt=fe.uniforms;return(!F.isShaderMaterial&&!F.isRawShaderMaterial||F.clipping===!0)&&(lt.clippingPlanes=Le.uniform),Z2(F,nt),fe.needsLights=Z8(F),fe.lightsStateVersion=Qe,fe.needsLights&&(lt.ambientLightColor.value=se.state.ambient,lt.lightProbe.value=se.state.probe,lt.directionalLights.value=se.state.directional,lt.directionalLightShadows.value=se.state.directionalShadow,lt.spotLights.value=se.state.spot,lt.spotLightShadows.value=se.state.spotShadow,lt.rectAreaLights.value=se.state.rectArea,lt.ltc_1.value=se.state.rectAreaLTC1,lt.ltc_2.value=se.state.rectAreaLTC2,lt.pointLights.value=se.state.point,lt.pointLightShadows.value=se.state.pointShadow,lt.hemisphereLights.value=se.state.hemi,lt.directionalShadowMap.value=se.state.directionalShadowMap,lt.directionalShadowMatrix.value=se.state.directionalShadowMatrix,lt.spotShadowMap.value=se.state.spotShadowMap,lt.spotLightMatrix.value=se.state.spotLightMatrix,lt.spotLightMap.value=se.state.spotLightMap,lt.pointShadowMap.value=se.state.pointShadowMap,lt.pointShadowMatrix.value=se.state.pointShadowMatrix),fe.currentProgram=gt,fe.uniformsList=null,gt}function Y2(F){if(F.uniformsList===null){const ie=F.currentProgram.getUniforms();F.uniformsList=p_.seqWithValue(ie.seq,F.uniforms)}return F.uniformsList}function Z2(F,ie){const de=Je.get(F);de.outputColorSpace=ie.outputColorSpace,de.batching=ie.batching,de.batchingColor=ie.batchingColor,de.instancing=ie.instancing,de.instancingColor=ie.instancingColor,de.instancingMorph=ie.instancingMorph,de.skinning=ie.skinning,de.morphTargets=ie.morphTargets,de.morphNormals=ie.morphNormals,de.morphColors=ie.morphColors,de.morphTargetsCount=ie.morphTargetsCount,de.numClippingPlanes=ie.numClippingPlanes,de.numIntersection=ie.numClipIntersection,de.vertexAlphas=ie.vertexAlphas,de.vertexTangents=ie.vertexTangents,de.toneMapping=ie.toneMapping}function K8(F,ie,de,fe,se){ie.isScene!==!0&&(ie=be),B.resetTextureUnits();const Be=ie.fog,Qe=fe.isMeshStandardMaterial?ie.environment:null,nt=w===null?v.outputColorSpace:w.isXRRenderTarget===!0?w.texture.colorSpace:Pc,rt=(fe.isMeshStandardMaterial?ae:C).get(fe.envMap||Qe),mt=fe.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,gt=!!de.attributes.tangent&&(!!fe.normalMap||fe.anisotropy>0),lt=!!de.morphAttributes.position,an=!!de.morphAttributes.normal,Sn=!!de.morphAttributes.color;let Vn=uc;fe.toneMapped&&(w===null||w.isXRRenderTarget===!0)&&(Vn=v.toneMapping);const Wi=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,Yt=Wi!==void 0?Wi.length:0,ct=Je.get(fe),Rr=g.state.lights;if(k===!0&&(V===!0||F!==A)){const vs=F===A&&fe.id===M;Le.setState(fe,F,vs)}let Zt=!1;fe.version===ct.__version?(ct.needsLights&&ct.lightsStateVersion!==Rr.state.version||ct.outputColorSpace!==nt||se.isBatchedMesh&&ct.batching===!1||!se.isBatchedMesh&&ct.batching===!0||se.isBatchedMesh&&ct.batchingColor===!0&&se.colorTexture===null||se.isBatchedMesh&&ct.batchingColor===!1&&se.colorTexture!==null||se.isInstancedMesh&&ct.instancing===!1||!se.isInstancedMesh&&ct.instancing===!0||se.isSkinnedMesh&&ct.skinning===!1||!se.isSkinnedMesh&&ct.skinning===!0||se.isInstancedMesh&&ct.instancingColor===!0&&se.instanceColor===null||se.isInstancedMesh&&ct.instancingColor===!1&&se.instanceColor!==null||se.isInstancedMesh&&ct.instancingMorph===!0&&se.morphTexture===null||se.isInstancedMesh&&ct.instancingMorph===!1&&se.morphTexture!==null||ct.envMap!==rt||fe.fog===!0&&ct.fog!==Be||ct.numClippingPlanes!==void 0&&(ct.numClippingPlanes!==Le.numPlanes||ct.numIntersection!==Le.numIntersection)||ct.vertexAlphas!==mt||ct.vertexTangents!==gt||ct.morphTargets!==lt||ct.morphNormals!==an||ct.morphColors!==Sn||ct.toneMapping!==Vn||ct.morphTargetsCount!==Yt)&&(Zt=!0):(Zt=!0,ct.__version=fe.version);let Hs=ct.currentProgram;Zt===!0&&(Hs=ky(fe,ie,se));let hh=!1,ji=!1,v1=!1;const Yn=Hs.getUniforms(),pl=ct.uniforms;if(De.useProgram(Hs.program)&&(hh=!0,ji=!0,v1=!0),fe.id!==M&&(M=fe.id,ji=!0),hh||A!==F){Ze.reverseDepthBuffer?(Q.copy(F.projectionMatrix),dhe(Q),fhe(Q),Yn.setValue(G,"projectionMatrix",Q)):Yn.setValue(G,"projectionMatrix",F.projectionMatrix),Yn.setValue(G,"viewMatrix",F.matrixWorldInverse);const vs=Yn.map.cameraPosition;vs!==void 0&&vs.setValue(G,pe.setFromMatrixPosition(F.matrixWorld)),Ze.logarithmicDepthBuffer&&Yn.setValue(G,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshLambertMaterial||fe.isMeshBasicMaterial||fe.isMeshStandardMaterial||fe.isShaderMaterial)&&Yn.setValue(G,"isOrthographic",F.isOrthographicCamera===!0),A!==F&&(A=F,ji=!0,v1=!0)}if(se.isSkinnedMesh){Yn.setOptional(G,se,"bindMatrix"),Yn.setOptional(G,se,"bindMatrixInverse");const vs=se.skeleton;vs&&(vs.boneTexture===null&&vs.computeBoneTexture(),Yn.setValue(G,"boneTexture",vs.boneTexture,B))}se.isBatchedMesh&&(Yn.setOptional(G,se,"batchingTexture"),Yn.setValue(G,"batchingTexture",se._matricesTexture,B),Yn.setOptional(G,se,"batchingIdTexture"),Yn.setValue(G,"batchingIdTexture",se._indirectTexture,B),Yn.setOptional(G,se,"batchingColorTexture"),se._colorsTexture!==null&&Yn.setValue(G,"batchingColorTexture",se._colorsTexture,B));const _1=de.morphAttributes;if((_1.position!==void 0||_1.normal!==void 0||_1.color!==void 0)&&ut.update(se,de,Hs),(ji||ct.receiveShadow!==se.receiveShadow)&&(ct.receiveShadow=se.receiveShadow,Yn.setValue(G,"receiveShadow",se.receiveShadow)),fe.isMeshGouraudMaterial&&fe.envMap!==null&&(pl.envMap.value=rt,pl.flipEnvMap.value=rt.isCubeTexture&&rt.isRenderTargetTexture===!1?-1:1),fe.isMeshStandardMaterial&&fe.envMap===null&&ie.environment!==null&&(pl.envMapIntensity.value=ie.environmentIntensity),ji&&(Yn.setValue(G,"toneMappingExposure",v.toneMappingExposure),ct.needsLights&&Y8(pl,v1),Be&&fe.fog===!0&&Ie.refreshFogUniforms(pl,Be),Ie.refreshMaterialUniforms(pl,fe,q,D,g.state.transmissionRenderTarget[F.id]),p_.upload(G,Y2(ct),pl,B)),fe.isShaderMaterial&&fe.uniformsNeedUpdate===!0&&(p_.upload(G,Y2(ct),pl,B),fe.uniformsNeedUpdate=!1),fe.isSpriteMaterial&&Yn.setValue(G,"center",se.center),Yn.setValue(G,"modelViewMatrix",se.modelViewMatrix),Yn.setValue(G,"normalMatrix",se.normalMatrix),Yn.setValue(G,"modelMatrix",se.matrixWorld),fe.isShaderMaterial||fe.isRawShaderMaterial){const vs=fe.uniformsGroups;for(let x1=0,Q8=vs.length;x1<Q8;x1++){const Q2=vs[x1];$.update(Q2,Hs),$.bind(Q2,Hs)}}return Hs}function Y8(F,ie){F.ambientLightColor.needsUpdate=ie,F.lightProbe.needsUpdate=ie,F.directionalLights.needsUpdate=ie,F.directionalLightShadows.needsUpdate=ie,F.pointLights.needsUpdate=ie,F.pointLightShadows.needsUpdate=ie,F.spotLights.needsUpdate=ie,F.spotLightShadows.needsUpdate=ie,F.rectAreaLights.needsUpdate=ie,F.hemisphereLights.needsUpdate=ie}function Z8(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&F.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(F,ie,de){Je.get(F.texture).__webglTexture=ie,Je.get(F.depthTexture).__webglTexture=de;const fe=Je.get(F);fe.__hasExternalTextures=!0,fe.__autoAllocateDepthBuffer=de===void 0,fe.__autoAllocateDepthBuffer||$e.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),fe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(F,ie){const de=Je.get(F);de.__webglFramebuffer=ie,de.__useDefaultFramebuffer=ie===void 0},this.setRenderTarget=function(F,ie=0,de=0){w=F,b=ie,T=de;let fe=!0,se=null,Be=!1,Qe=!1;if(F){const rt=Je.get(F);if(rt.__useDefaultFramebuffer!==void 0)De.bindFramebuffer(G.FRAMEBUFFER,null),fe=!1;else if(rt.__webglFramebuffer===void 0)B.setupRenderTarget(F);else if(rt.__hasExternalTextures)B.rebindTextures(F,Je.get(F.texture).__webglTexture,Je.get(F.depthTexture).__webglTexture);else if(F.depthBuffer){const lt=F.depthTexture;if(rt.__boundDepthTexture!==lt){if(lt!==null&&Je.has(lt)&&(F.width!==lt.image.width||F.height!==lt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");B.setupDepthRenderbuffer(F)}}const mt=F.texture;(mt.isData3DTexture||mt.isDataArrayTexture||mt.isCompressedArrayTexture)&&(Qe=!0);const gt=Je.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(Array.isArray(gt[ie])?se=gt[ie][de]:se=gt[ie],Be=!0):F.samples>0&&B.useMultisampledRTT(F)===!1?se=Je.get(F).__webglMultisampledFramebuffer:Array.isArray(gt)?se=gt[de]:se=gt,S.copy(F.viewport),E.copy(F.scissor),I=F.scissorTest}else S.copy(z).multiplyScalar(q).floor(),E.copy(K).multiplyScalar(q).floor(),I=U;if(De.bindFramebuffer(G.FRAMEBUFFER,se)&&fe&&De.drawBuffers(F,se),De.viewport(S),De.scissor(E),De.setScissorTest(I),Be){const rt=Je.get(F.texture);G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+ie,rt.__webglTexture,de)}else if(Qe){const rt=Je.get(F.texture),mt=ie||0;G.framebufferTextureLayer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,rt.__webglTexture,de||0,mt)}M=-1},this.readRenderTargetPixels=function(F,ie,de,fe,se,Be,Qe){if(!(F&&F.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let nt=Je.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&Qe!==void 0&&(nt=nt[Qe]),nt){De.bindFramebuffer(G.FRAMEBUFFER,nt);try{const rt=F.texture,mt=rt.format,gt=rt.type;if(!Ze.textureFormatReadable(mt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ze.textureTypeReadable(gt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ie>=0&&ie<=F.width-fe&&de>=0&&de<=F.height-se&&G.readPixels(ie,de,fe,se,W.convert(mt),W.convert(gt),Be)}finally{const rt=w!==null?Je.get(w).__webglFramebuffer:null;De.bindFramebuffer(G.FRAMEBUFFER,rt)}}},this.readRenderTargetPixelsAsync=async function(F,ie,de,fe,se,Be,Qe){if(!(F&&F.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let nt=Je.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&Qe!==void 0&&(nt=nt[Qe]),nt){const rt=F.texture,mt=rt.format,gt=rt.type;if(!Ze.textureFormatReadable(mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ze.textureTypeReadable(gt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ie>=0&&ie<=F.width-fe&&de>=0&&de<=F.height-se){De.bindFramebuffer(G.FRAMEBUFFER,nt);const lt=G.createBuffer();G.bindBuffer(G.PIXEL_PACK_BUFFER,lt),G.bufferData(G.PIXEL_PACK_BUFFER,Be.byteLength,G.STREAM_READ),G.readPixels(ie,de,fe,se,W.convert(mt),W.convert(gt),0);const an=w!==null?Je.get(w).__webglFramebuffer:null;De.bindFramebuffer(G.FRAMEBUFFER,an);const Sn=G.fenceSync(G.SYNC_GPU_COMMANDS_COMPLETE,0);return G.flush(),await hhe(G,Sn,4),G.bindBuffer(G.PIXEL_PACK_BUFFER,lt),G.getBufferSubData(G.PIXEL_PACK_BUFFER,0,Be),G.deleteBuffer(lt),G.deleteSync(Sn),Be}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(F,ie=null,de=0){F.isTexture!==!0&&(h_("WebGLRenderer: copyFramebufferToTexture function signature has changed."),ie=arguments[0]||null,F=arguments[1]);const fe=Math.pow(2,-de),se=Math.floor(F.image.width*fe),Be=Math.floor(F.image.height*fe),Qe=ie!==null?ie.x:0,nt=ie!==null?ie.y:0;B.setTexture2D(F,0),G.copyTexSubImage2D(G.TEXTURE_2D,de,0,0,Qe,nt,se,Be),De.unbindTexture()},this.copyTextureToTexture=function(F,ie,de=null,fe=null,se=0){F.isTexture!==!0&&(h_("WebGLRenderer: copyTextureToTexture function signature has changed."),fe=arguments[0]||null,F=arguments[1],ie=arguments[2],se=arguments[3]||0,de=null);let Be,Qe,nt,rt,mt,gt;de!==null?(Be=de.max.x-de.min.x,Qe=de.max.y-de.min.y,nt=de.min.x,rt=de.min.y):(Be=F.image.width,Qe=F.image.height,nt=0,rt=0),fe!==null?(mt=fe.x,gt=fe.y):(mt=0,gt=0);const lt=W.convert(ie.format),an=W.convert(ie.type);B.setTexture2D(ie,0),G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,ie.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,ie.unpackAlignment);const Sn=G.getParameter(G.UNPACK_ROW_LENGTH),Vn=G.getParameter(G.UNPACK_IMAGE_HEIGHT),Wi=G.getParameter(G.UNPACK_SKIP_PIXELS),Yt=G.getParameter(G.UNPACK_SKIP_ROWS),ct=G.getParameter(G.UNPACK_SKIP_IMAGES),Rr=F.isCompressedTexture?F.mipmaps[se]:F.image;G.pixelStorei(G.UNPACK_ROW_LENGTH,Rr.width),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,Rr.height),G.pixelStorei(G.UNPACK_SKIP_PIXELS,nt),G.pixelStorei(G.UNPACK_SKIP_ROWS,rt),F.isDataTexture?G.texSubImage2D(G.TEXTURE_2D,se,mt,gt,Be,Qe,lt,an,Rr.data):F.isCompressedTexture?G.compressedTexSubImage2D(G.TEXTURE_2D,se,mt,gt,Rr.width,Rr.height,lt,Rr.data):G.texSubImage2D(G.TEXTURE_2D,se,mt,gt,Be,Qe,lt,an,Rr),G.pixelStorei(G.UNPACK_ROW_LENGTH,Sn),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,Vn),G.pixelStorei(G.UNPACK_SKIP_PIXELS,Wi),G.pixelStorei(G.UNPACK_SKIP_ROWS,Yt),G.pixelStorei(G.UNPACK_SKIP_IMAGES,ct),se===0&&ie.generateMipmaps&&G.generateMipmap(G.TEXTURE_2D),De.unbindTexture()},this.copyTextureToTexture3D=function(F,ie,de=null,fe=null,se=0){F.isTexture!==!0&&(h_("WebGLRenderer: copyTextureToTexture3D function signature has changed."),de=arguments[0]||null,fe=arguments[1]||null,F=arguments[2],ie=arguments[3],se=arguments[4]||0);let Be,Qe,nt,rt,mt,gt,lt,an,Sn;const Vn=F.isCompressedTexture?F.mipmaps[se]:F.image;de!==null?(Be=de.max.x-de.min.x,Qe=de.max.y-de.min.y,nt=de.max.z-de.min.z,rt=de.min.x,mt=de.min.y,gt=de.min.z):(Be=Vn.width,Qe=Vn.height,nt=Vn.depth,rt=0,mt=0,gt=0),fe!==null?(lt=fe.x,an=fe.y,Sn=fe.z):(lt=0,an=0,Sn=0);const Wi=W.convert(ie.format),Yt=W.convert(ie.type);let ct;if(ie.isData3DTexture)B.setTexture3D(ie,0),ct=G.TEXTURE_3D;else if(ie.isDataArrayTexture||ie.isCompressedArrayTexture)B.setTexture2DArray(ie,0),ct=G.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,ie.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,ie.unpackAlignment);const Rr=G.getParameter(G.UNPACK_ROW_LENGTH),Zt=G.getParameter(G.UNPACK_IMAGE_HEIGHT),Hs=G.getParameter(G.UNPACK_SKIP_PIXELS),hh=G.getParameter(G.UNPACK_SKIP_ROWS),ji=G.getParameter(G.UNPACK_SKIP_IMAGES);G.pixelStorei(G.UNPACK_ROW_LENGTH,Vn.width),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,Vn.height),G.pixelStorei(G.UNPACK_SKIP_PIXELS,rt),G.pixelStorei(G.UNPACK_SKIP_ROWS,mt),G.pixelStorei(G.UNPACK_SKIP_IMAGES,gt),F.isDataTexture||F.isData3DTexture?G.texSubImage3D(ct,se,lt,an,Sn,Be,Qe,nt,Wi,Yt,Vn.data):ie.isCompressedArrayTexture?G.compressedTexSubImage3D(ct,se,lt,an,Sn,Be,Qe,nt,Wi,Vn.data):G.texSubImage3D(ct,se,lt,an,Sn,Be,Qe,nt,Wi,Yt,Vn),G.pixelStorei(G.UNPACK_ROW_LENGTH,Rr),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,Zt),G.pixelStorei(G.UNPACK_SKIP_PIXELS,Hs),G.pixelStorei(G.UNPACK_SKIP_ROWS,hh),G.pixelStorei(G.UNPACK_SKIP_IMAGES,ji),se===0&&ie.generateMipmaps&&G.generateMipmap(ct),De.unbindTexture()},this.initRenderTarget=function(F){Je.get(F).__webglFramebuffer===void 0&&B.setupRenderTarget(F)},this.initTexture=function(F){F.isCubeTexture?B.setTextureCube(F,0):F.isData3DTexture?B.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?B.setTexture2DArray(F,0):B.setTexture2D(F,0),De.unbindTexture()},this.resetState=function(){b=0,T=0,w=null,De.reset(),ve.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ba}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===RP?"display-p3":"srgb",t.unpackColorSpace=Jt.workingColorSpace===zb?"display-p3":"srgb"}}let wge=class extends gi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new _c,this.environmentIntensity=1,this.environmentRotation=new _c,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},Tge=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=eA,this.updateRanges=[],this.version=0,this.uuid=Wa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}};const ii=new X;let pO=class sG{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)ii.fromBufferAttribute(this,t),ii.applyMatrix4(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ii.fromBufferAttribute(this,t),ii.applyNormalMatrix(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ii.fromBufferAttribute(this,t),ii.transformDirection(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=co(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=ln(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=co(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=co(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=co(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=co(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Ds(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new sG(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},oG=class extends oh{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ot(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},Fh;const Vp=new X,Oh=new X,kh=new X,Uh=new Ge,Gp=new Ge,aG=new _n,$0=new X,Hp=new X,V0=new X,mO=new Ge,Qw=new Ge,gO=new Ge;class Mge extends gi{constructor(e=new oG){if(super(),this.isSprite=!0,this.type="Sprite",Fh===void 0){Fh=new Gs;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Tge(t,5);Fh.setIndex([0,1,2,0,2,3]),Fh.setAttribute("position",new pO(r,3,0,!1)),Fh.setAttribute("uv",new pO(r,2,3,!1))}this.geometry=Fh,this.material=e,this.center=new Ge(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Oh.setFromMatrixScale(this.matrixWorld),aG.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),kh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Oh.multiplyScalar(-kh.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;G0($0.set(-.5,-.5,0),kh,o,Oh,i,s),G0(Hp.set(.5,-.5,0),kh,o,Oh,i,s),G0(V0.set(.5,.5,0),kh,o,Oh,i,s),mO.set(0,0),Qw.set(1,0),gO.set(1,1);let a=e.ray.intersectTriangle($0,Hp,V0,!1,Vp);if(a===null&&(G0(Hp.set(-.5,.5,0),kh,o,Oh,i,s),Qw.set(0,1),a=e.ray.intersectTriangle($0,V0,Hp,!1,Vp),a===null))return;const l=e.ray.origin.distanceTo(Vp);l<e.near||l>e.far||t.push({distance:l,point:Vp.clone(),uv:od.getInterpolation(Vp,$0,Hp,V0,mO,Qw,gO,new Ge),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function G0(n,e,t,r,i,s){Uh.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(Gp.x=s*Uh.x-i*Uh.y,Gp.y=i*Uh.x+s*Uh.y):Gp.copy(Uh),n.copy(e),n.x+=Gp.x,n.y+=Gp.y,n.applyMatrix4(aG)}let lG=class extends oh{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ot(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}};const Cx=new X,Ax=new X,yO=new _n,Wp=new Vb,H0=new $b,Jw=new X,vO=new X;class Ege extends gi{constructor(e=new Gs,t=new lG){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)Cx.fromBufferAttribute(t,i-1),Ax.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=Cx.distanceTo(Ax);e.setAttribute("lineDistance",new gr(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),H0.copy(r.boundingSphere),H0.applyMatrix4(i),H0.radius+=s,e.ray.intersectsSphere(H0)===!1)return;yO.copy(i).invert(),Wp.copy(e.ray).applyMatrix4(yO);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=r.index,d=r.attributes.position;if(u!==null){const f=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let y=f,g=p-1;y<g;y+=c){const m=u.getX(y),_=u.getX(y+1),v=W0(this,e,Wp,l,m,_);v&&t.push(v)}if(this.isLineLoop){const y=u.getX(p-1),g=u.getX(f),m=W0(this,e,Wp,l,y,g);m&&t.push(m)}}else{const f=Math.max(0,o.start),p=Math.min(d.count,o.start+o.count);for(let y=f,g=p-1;y<g;y+=c){const m=W0(this,e,Wp,l,y,y+1);m&&t.push(m)}if(this.isLineLoop){const y=W0(this,e,Wp,l,p-1,f);y&&t.push(y)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function W0(n,e,t,r,i,s){const o=n.geometry.attributes.position;if(Cx.fromBufferAttribute(o,i),Ax.fromBufferAttribute(o,s),t.distanceSqToSegment(Cx,Ax,Jw,vO)>r)return;Jw.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(Jw);if(!(l<e.near||l>e.far))return{distance:l,point:vO.clone().applyMatrix4(n.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:n}}class cl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],d=r[i+1]-u,f=(o-u)/d;return(i+f)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Ge:new X);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new X,i=[],s=[],o=[],a=new X,l=new _n;for(let f=0;f<=e;f++){const p=f/e;i[f]=this.getTangentAt(p,new X)}s[0]=new X,o[0]=new X;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),h=Math.abs(i[0].y),d=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),h<=c&&(c=h,r.set(0,1,0)),d<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(i[f-1],i[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(wr(i[f-1].dot(i[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(i[f],s[f])}if(t===!0){let f=Math.acos(wr(s[0].dot(s[e]),-1,1));f/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(i[p],f*p)),o[p].crossVectors(i[p],s[p])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class cG extends cl{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Ge){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,f=c-this.aY;l=d*u-f*h+this.aX,c=d*h+f*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Cge extends cG{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function kP(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,h){let d=(o-s)/c-(a-s)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+h)+(l-a)/h;d*=u,f*=u,i(o,a,d,f)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const j0=new X,eT=new kP,tT=new kP,nT=new kP;class Age extends cl{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new X){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(j0.subVectors(i[0],i[1]).add(i[0]),c=j0);const h=i[a%s],d=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(j0.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=j0),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(h),f),y=Math.pow(h.distanceToSquared(d),f),g=Math.pow(d.distanceToSquared(u),f);y<1e-4&&(y=1),p<1e-4&&(p=y),g<1e-4&&(g=y),eT.initNonuniformCatmullRom(c.x,h.x,d.x,u.x,p,y,g),tT.initNonuniformCatmullRom(c.y,h.y,d.y,u.y,p,y,g),nT.initNonuniformCatmullRom(c.z,h.z,d.z,u.z,p,y,g)}else this.curveType==="catmullrom"&&(eT.initCatmullRom(c.x,h.x,d.x,u.x,this.tension),tT.initCatmullRom(c.y,h.y,d.y,u.y,this.tension),nT.initCatmullRom(c.z,h.z,d.z,u.z,this.tension));return r.set(eT.calc(l),tT.calc(l),nT.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new X().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function _O(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function Rge(n,e){const t=1-n;return t*t*e}function Nge(n,e){return 2*(1-n)*n*e}function Pge(n,e){return n*n*e}function Zm(n,e,t,r){return Rge(n,e)+Nge(n,t)+Pge(n,r)}function Ige(n,e){const t=1-n;return t*t*t*e}function Lge(n,e){const t=1-n;return 3*t*t*n*e}function Dge(n,e){return 3*(1-n)*n*n*e}function Fge(n,e){return n*n*n*e}function Qm(n,e,t,r,i){return Ige(n,e)+Lge(n,t)+Dge(n,r)+Fge(n,i)}class Oge extends cl{constructor(e=new Ge,t=new Ge,r=new Ge,i=new Ge){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Ge){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Qm(e,i.x,s.x,o.x,a.x),Qm(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class uG extends cl{constructor(e=new X,t=new X,r=new X,i=new X){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new X){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Qm(e,i.x,s.x,o.x,a.x),Qm(e,i.y,s.y,o.y,a.y),Qm(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class kge extends cl{constructor(e=new Ge,t=new Ge){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ge){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ge){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Uge extends cl{constructor(e=new X,t=new X){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new X){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new X){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Bge extends cl{constructor(e=new Ge,t=new Ge,r=new Ge){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ge){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Zm(e,i.x,s.x,o.x),Zm(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class UP extends cl{constructor(e=new X,t=new X,r=new X){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new X){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(Zm(e,i.x,s.x,o.x),Zm(e,i.y,s.y,o.y),Zm(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zge extends cl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ge){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(_O(a,l.x,c.x,u.x,h.x),_O(a,l.y,c.y,u.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Ge().fromArray(i))}return this}}var $ge=Object.freeze({__proto__:null,ArcCurve:Cge,CatmullRomCurve3:Age,CubicBezierCurve:Oge,CubicBezierCurve3:uG,EllipseCurve:cG,LineCurve:kge,LineCurve3:Uge,QuadraticBezierCurve:Bge,QuadraticBezierCurve3:UP,SplineCurve:zge});class Wb extends Gs{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],h=[],d=[],f=[];let p=0;const y=[],g=r/2;let m=0;_(),o===!1&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new gr(h,3)),this.setAttribute("normal",new gr(d,3)),this.setAttribute("uv",new gr(f,2));function _(){const x=new X,b=new X;let T=0;const w=(t-e)/r;for(let M=0;M<=s;M++){const A=[],S=M/s,E=S*(t-e)+e;for(let I=0;I<=i;I++){const O=I/i,N=O*l+a,R=Math.sin(N),D=Math.cos(N);b.x=E*R,b.y=-S*r+g,b.z=E*D,h.push(b.x,b.y,b.z),x.set(R,w,D).normalize(),d.push(x.x,x.y,x.z),f.push(O,1-S),A.push(p++)}y.push(A)}for(let M=0;M<i;M++)for(let A=0;A<s;A++){const S=y[A][M],E=y[A+1][M],I=y[A+1][M+1],O=y[A][M+1];e>0&&(u.push(S,E,O),T+=3),t>0&&(u.push(E,I,O),T+=3)}c.addGroup(m,T,0),m+=T}function v(x){const b=p,T=new Ge,w=new X;let M=0;const A=x===!0?e:t,S=x===!0?1:-1;for(let I=1;I<=i;I++)h.push(0,g*S,0),d.push(0,S,0),f.push(.5,.5),p++;const E=p;for(let I=0;I<=i;I++){const N=I/i*l+a,R=Math.cos(N),D=Math.sin(N);w.x=A*D,w.y=g*S,w.z=A*R,h.push(w.x,w.y,w.z),d.push(0,S,0),T.x=R*.5+.5,T.y=D*.5*S+.5,f.push(T.x,T.y),p++}for(let I=0;I<i;I++){const O=b+I,N=E+I;x===!0?u.push(N,N+1,O):u.push(N+1,N,O),M+=3}c.addGroup(m,M,x===!0?1:2),m+=M}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wb(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class BP extends Wb{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new BP(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}let hG=class dG extends Gs{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new X,d=new X,f=[],p=[],y=[],g=[];for(let m=0;m<=r;m++){const _=[],v=m/r;let x=0;m===0&&o===0?x=.5/t:m===r&&l===Math.PI&&(x=-.5/t);for(let b=0;b<=t;b++){const T=b/t;h.x=-e*Math.cos(i+T*s)*Math.sin(o+v*a),h.y=e*Math.cos(o+v*a),h.z=e*Math.sin(i+T*s)*Math.sin(o+v*a),p.push(h.x,h.y,h.z),d.copy(h).normalize(),y.push(d.x,d.y,d.z),g.push(T+x,1-v),_.push(c++)}u.push(_)}for(let m=0;m<r;m++)for(let _=0;_<t;_++){const v=u[m][_+1],x=u[m][_],b=u[m+1][_],T=u[m+1][_+1];(m!==0||o>0)&&f.push(v,x,T),(m!==r-1||l<Math.PI)&&f.push(x,b,T)}this.setIndex(f),this.setAttribute("position",new gr(p,3)),this.setAttribute("normal",new gr(y,3)),this.setAttribute("uv",new gr(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dG(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}};class zP extends Gs{constructor(e=new UP(new X(-1,-1,0),new X(-1,1,0),new X(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new X,l=new X,c=new Ge;let u=new X;const h=[],d=[],f=[],p=[];y(),this.setIndex(p),this.setAttribute("position",new gr(h,3)),this.setAttribute("normal",new gr(d,3)),this.setAttribute("uv",new gr(f,2));function y(){for(let v=0;v<t;v++)g(v);g(s===!1?t:0),_(),m()}function g(v){u=e.getPointAt(v/t,u);const x=o.normals[v],b=o.binormals[v];for(let T=0;T<=i;T++){const w=T/i*Math.PI*2,M=Math.sin(w),A=-Math.cos(w);l.x=A*x.x+M*b.x,l.y=A*x.y+M*b.y,l.z=A*x.z+M*b.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,h.push(a.x,a.y,a.z)}}function m(){for(let v=1;v<=t;v++)for(let x=1;x<=i;x++){const b=(i+1)*(v-1)+(x-1),T=(i+1)*v+(x-1),w=(i+1)*v+x,M=(i+1)*(v-1)+x;p.push(b,T,M),p.push(T,w,M)}}function _(){for(let v=0;v<=t;v++)for(let x=0;x<=i;x++)c.x=v/t,c.y=x/i,f.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new zP(new $ge[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}let Vge=class extends oh{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=DV,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new _c,this.combine=bP,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};const xO={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Gge{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const f=c[h],p=c[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}}const Hge=new Gge;class $P{constructor(e){this.manager=e!==void 0?e:Hge,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}$P.DEFAULT_MATERIAL_NAME="__DEFAULT";class Wge extends $P{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=xO.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=kg("img");function l(){u(),xO.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){u(),i&&i(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class fG extends $P{constructor(e){super(e)}load(e,t,r,i){const s=new Vs,o=new Wge(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}let pG=class extends gi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ot(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};const rT=new _n,SO=new X,bO=new X;let jge=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ge(512,512),this.map=null,this.mapPass=null,this.matrix=new _n,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new DP,this._frameExtents=new Ge(1,1),this._viewportCount=1,this._viewports=[new ar(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;SO.setFromMatrixPosition(e.matrixWorld),t.position.copy(SO),bO.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(bO),t.updateMatrixWorld(),rT.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rT),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(rT)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},qge=class extends jge{constructor(){super(new FP(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Xge=class extends pG{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(gi.DEFAULT_UP),this.updateMatrix(),this.target=new gi,this.shadow=new qge}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Kge=class extends pG{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};class mG{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=wO(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=wO();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function wO(){return performance.now()}const TO=new _n;class gG{constructor(e,t,r=0,i=1/0){this.ray=new Vb(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new PP,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return TO.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(TO),this}intersectObject(e,t=!0,r=[]){return iA(e,this,r,t),r.sort(MO),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)iA(e[i],this,r,t);return r.sort(MO),r}}function MO(n,e){return n.distance-e.distance}function iA(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)iA(s[o],e,t,!0)}}class sA{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(wr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class jb extends Ic{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ub}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ub);const Yge=(n,e)=>{const t=document.createElement("canvas"),r=t.getContext("2d"),i=new Image;i.src=n;const s=new Vs(t);return i.onload=()=>{const o=i.width*e,a=i.height*e;t.width=o,t.height=a,r==null||r.drawImage(i,0,0,o,a),s.needsUpdate=!0},s},Zge=({drawerOpen:n=!1,onDrawerClose:e})=>{const{onResetSearch:t}=SP(),{language:r,onChangeLanguage:i,onChangeRelation:s,onChangeRegion:o}=xP(),[a,l]=P.useState({lang:r}),[c,u]=P.useState(eu),[h,d]=P.useState(tu),f=P.useMemo(()=>oue(Wce),[]),p=async()=>{i(a.lang),s(c),o(h),t&&t(),e&&e()},y=x=>{l(b=>({...b,lang:x.target.value}))},g=()=>{eu.length===c.length?u([]):u(eu)},m=x=>{u(b=>b.includes(x)?b.filter(T=>T!==x):[...b,x])},_=()=>{tu.length===h.length?d([]):d(tu)},v=x=>{d(b=>b.includes(x)?b.filter(T=>T!==x):[...b,x])};return H.jsx(iue,{open:n,anchor:"right",onClose:p,children:H.jsxs(S$,{className:"drawer-wrapper",sx:{width:{xs:"100vw",sm:"300px"}},children:[H.jsxs("div",{className:"drawer-wrapper-top",children:[H.jsx(Oa,{variant:"h6",fontWeight:"bold",children:"SETTING"}),H.jsx(Lg,{onClick:p,children:H.jsx(Zce,{})})]}),H.jsxs("div",{className:"drawer-wrapper-middle",children:[H.jsx("p",{children:"FILTER"}),H.jsxs("div",{className:"drawer-wrapper-middle-selects",children:[H.jsxs("div",{className:"drawer-wrapper-middle-selects-box",children:[H.jsx("p",{children:"Relations"}),H.jsx(h0,{label:"ALL",control:H.jsx(l0,{checked:eu.length===c.length,indeterminate:c.length!==0&&eu.length!==c.length,onChange:g,color:"default"})}),eu.map(x=>H.jsx(h0,{label:x,id:x,control:H.jsx(l0,{checked:c.includes(x),value:x,onChange:()=>m(x),color:"default"})},x))]}),H.jsxs("div",{className:"drawer-wrapper-middle-selects-box",children:[H.jsx("p",{children:"Regions"}),H.jsx(h0,{label:"ALL",control:H.jsx(l0,{checked:tu.length===h.length,indeterminate:h.length!==0&&tu.length!==h.length,onChange:_,color:"default"})}),tu.map(x=>H.jsx(h0,{label:x,id:x,control:H.jsx(l0,{checked:h.includes(x),value:x,onChange:()=>v(x),color:"default"})},x))]})]})]}),H.jsxs("div",{className:"drawer-wrapper-bottom",children:[H.jsxs("div",{className:"drawer-wrapper-bottom-lang",children:[H.jsx("p",{children:"LANGUAGE"}),H.jsx(QN,{defaultValue:bx.en_US,value:a.lang,fullWidth:!0,size:"small",variant:"outlined",color:"secondary",onChange:y,children:f.map(({key:x,value:b})=>H.jsx(ite,{value:x,children:b},x))})]}),H.jsx(XE,{}),H.jsxs("div",{className:"drawer-wrapper-bottom-footer",children:[H.jsx(Oa,{color:"secondary",children:"@emyo.155"}),H.jsx(Oa,{color:"secondary",children:"https://github.com/leemyou"}),H.jsx(Oa,{color:"secondary",children:"contributor: THIRD[롤 백과사전]"})]})]})]})})},Qge=gb.div`
  height: 40px;
  padding: 0 40px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;

  .header-search-wrapper {
    display: flex;
    align-items: center;

    > svg {
      margin: 4px 2px 0 0;
      cursor: pointer;
    }
  }

  .header-btn-wrapper {
    display: flex;
    column-gap: 8px;
  }
`,Jge=()=>{const{onChangeTheme:n}=xV(),{onSearch:e,searchParams:t}=SP(),[r,i]=P.useState(!1),[s,o]=P.useState(t),a=()=>{i(!0)},l=()=>{i(!1)},c=()=>{n()},u=f=>{o(f.target.value)},h=()=>{e(s)},d=f=>{f.key==="Enter"&&h()};return H.jsxs(H.Fragment,{children:[H.jsxs(Qge,{style:{borderBottom:".5px solid #95959539"},children:[H.jsxs("div",{className:"header-search-wrapper",children:[H.jsx(qte,{id:"input-with-sx",label:"",variant:"standard",color:"secondary",placeholder:"검색어를 입력해주세요",value:s,onKeyDown:d,onChange:u}),H.jsx(Jce,{sx:{color:"action.active",mr:1,my:.5},onClick:h})]}),H.jsxs("div",{className:"header-btn-wrapper",children:[H.jsx(Lg,{onClick:c,children:H.jsx(Qce,{})}),H.jsx(Lg,{onClick:a,children:H.jsx(eue,{})})]})]}),H.jsx(Zge,{drawerOpen:r,onDrawerClose:l})]})},eye=[{id:"Demacia",img:""},{id:"Noxus",img:""},{id:"Bilgewater",img:""},{id:"Freljord",img:""},{id:"ShadowIsles",img:""},{id:"Shurima",img:""},{id:"Ixtal",img:""},{id:"Ionia",img:""},{id:"BandleCity",img:""},{id:"Targon",img:""},{id:"Zaun",img:""},{id:"Void",img:""},{id:"Piltover",img:""},{id:"Runeterra",img:""}],tye=[{source:"Runeterra",target:"Demacia",relation:"Region"},{source:"Runeterra",target:"Noxus",relation:"Region"},{source:"Runeterra",target:"Bilgewater",relation:"Region"},{source:"Runeterra",target:"Freljord",relation:"Region"},{source:"Runeterra",target:"ShadowIsles",relation:"Region"},{source:"Runeterra",target:"Ixtal",relation:"Region"},{source:"Runeterra",target:"Ionia",relation:"Region"},{source:"Runeterra",target:"Targon",relation:"Region"},{source:"Runeterra",target:"Zaun",relation:"Region"},{source:"Runeterra",target:"Piltover",relation:"Region"},{source:"Runeterra",target:"Shurima",relation:"Region"}],iT={nodes:eye,links:tye},nye=[{source:"Aatrox",target:"Runeterra",relation:"Runeterra"},{source:"Ahri",target:"Ionia",relation:"Ionia"},{source:"Akali",target:"Ionia",relation:"Ionia"},{source:"Akshan",target:"Shurima",relation:"Shurima"},{source:"Alistar",target:"Runeterra",relation:"Runeterra"},{source:"Amumu",target:"Shurima",relation:"Shurima"},{source:"Anivia",target:"Freljord",relation:"Freljord"},{source:"Annie",target:"Runeterra",relation:"Runeterra"},{source:"Aphelios",target:"Targon",relation:"Targon"},{source:"Ashe",target:"Freljord",relation:"Freljord"},{source:"AurelionSol",target:"Runeterra",relation:"Runeterra"},{source:"Aurora",target:"Freljord",relation:"Freljord"},{source:"Azir",target:"Shurima",relation:"Shurima"},{source:"Bard",target:"Runeterra",relation:"Runeterra"},{source:"Belveth",target:"Void",relation:"Void"},{source:"Blitzcrank",target:"Zaun",relation:"Zaun"},{source:"Brand",target:"Runeterra",relation:"Runeterra"},{source:"Braum",target:"Freljord",relation:"Freljord"},{source:"Briar",target:"Noxus",relation:"Noxus"},{source:"Caitlyn",target:"Piltover",relation:"Piltover"},{source:"Camille",target:"Piltover",relation:"Piltover"},{source:"Cassiopeia",target:"Noxus",relation:"Noxus"},{source:"Chogath",target:"Void",relation:"Void"},{source:"Corki",target:"BandleCity",relation:"BandleCity"},{source:"Darius",target:"Noxus",relation:"Noxus"},{source:"Diana",target:"Targon",relation:"Targon"},{source:"Draven",target:"Noxus",relation:"Noxus"},{source:"DrMundo",target:"Zaun",relation:"Zaun"},{source:"Ekko",target:"Zaun",relation:"Zaun"},{source:"Elise",target:"ShadowIsles",relation:"ShadowIsles"},{source:"Evelynn",target:"Runeterra",relation:"Runeterra"},{source:"Ezreal",target:"Piltover",relation:"Piltover"},{source:"Fiddlesticks",target:"Runeterra",relation:"Runeterra"},{source:"Fiora",target:"Demacia",relation:"Demacia"},{source:"Fizz",target:"Runeterra",relation:"Runeterra"},{source:"Galio",target:"Demacia",relation:"Demacia"},{source:"Gangplank",target:"Bilgewater",relation:"Bilgewater"},{source:"Garen",target:"Demacia",relation:"Demacia"},{source:"Gnar",target:"Freljord",relation:"Freljord"},{source:"Gragas",target:"Freljord",relation:"Freljord"},{source:"Graves",target:"Bilgewater",relation:"Bilgewater"},{source:"Gwen",target:"ShadowIsles",relation:"ShadowIsles"},{source:"Hecarim",target:"ShadowIsles",relation:"ShadowIsles"},{source:"Heimerdinger",target:"Piltover",relation:"Piltover"},{source:"Hwei",target:"Ionia",relation:"Ionia"},{source:"Illaoi",target:"Bilgewater",relation:"Bilgewater"},{source:"Irelia",target:"Ionia",relation:"Ionia"},{source:"Ivern",target:"Ionia",relation:"Ionia"},{source:"Janna",target:"Zaun",relation:"Zaun"},{source:"JarvanIV",target:"Demacia",relation:"Demacia"},{source:"Jax",target:"Runeterra",relation:"Runeterra"},{source:"Jayce",target:"Piltover",relation:"Piltover"},{source:"Jhin",target:"Ionia",relation:"Ionia"},{source:"Jinx",target:"Zaun",relation:"Zaun"},{source:"Kaisa",target:"Void",relation:"Void"},{source:"Kalista",target:"ShadowIsles",relation:"ShadowIsles"},{source:"Karma",target:"Ionia",relation:"Ionia"},{source:"Karthus",target:"ShadowIsles",relation:"ShadowIsles"},{source:"Kassadin",target:"Void",relation:"Void"},{source:"Katarina",target:"Noxus",relation:"Noxus"},{source:"Kayle",target:"Demacia",relation:"Demacia"},{source:"Kayn",target:"Ionia",relation:"Ionia"},{source:"Kennen",target:"Ionia",relation:"Ionia"},{source:"Khazix",target:"Void",relation:"Void"},{source:"Kindred",target:"Runeterra",relation:"Runeterra"},{source:"Kled",target:"Noxus",relation:"Noxus"},{source:"KogMaw",target:"Void",relation:"Void"},{source:"KSante",target:"Shurima",relation:"Shurima"},{source:"Leblanc",target:"Noxus",relation:"Noxus"},{source:"LeeSin",target:"Ionia",relation:"Ionia"},{source:"Leona",target:"Targon",relation:"Targon"},{source:"Lillia",target:"Ionia",relation:"Ionia"},{source:"Lissandra",target:"Freljord",relation:"Freljord"},{source:"Lucian",target:"Runeterra",relation:"Runeterra"},{source:"Lulu",target:"BandleCity",relation:"BandleCity"},{source:"Lux",target:"Demacia",relation:"Demacia"},{source:"Malphite",target:"Ixtal",relation:"Ixtal"},{source:"Malzahar",target:"Void",relation:"Void"},{source:"Maokai",target:"ShadowIsles",relation:"ShadowIsles"},{source:"MasterYi",target:"Ionia",relation:"Ionia"},{source:"Milio",target:"Ixtal",relation:"Ixtal"},{source:"MissFortune",target:"Bilgewater",relation:"Bilgewater"},{source:"MonkeyKing",target:"Ionia",relation:"Ionia"},{source:"Mordekaiser",target:"Noxus",relation:"Noxus"},{source:"Morgana",target:"Demacia",relation:"Demacia"},{source:"Naafiri",target:"Shurima",relation:"Shurima"},{source:"Nami",target:"Runeterra",relation:"Runeterra"},{source:"Nasus",target:"Shurima",relation:"Shurima"},{source:"Nautilus",target:"Bilgewater",relation:"Bilgewater"},{source:"Neeko",target:"Ixtal",relation:"Ixtal"},{source:"Nidalee",target:"Ixtal",relation:"Ixtal"},{source:"Nilah",target:"Bilgewater",relation:"Bilgewater"},{source:"Nocturne",target:"Runeterra",relation:"Runeterra"},{source:"Nunu",target:"Freljord",relation:"Freljord"},{source:"Olaf",target:"Freljord",relation:"Freljord"},{source:"Orianna",target:"Piltover",relation:"Piltover"},{source:"Ornn",target:"Freljord",relation:"Freljord"},{source:"Pantheon",target:"Targon",relation:"Targon"},{source:"Poppy",target:"Demacia",relation:"Demacia"},{source:"Pyke",target:"Bilgewater",relation:"Bilgewater"},{source:"Qiyana",target:"Ixtal",relation:"Ixtal"},{source:"Quinn",target:"Demacia",relation:"Demacia"},{source:"Rakan",target:"Ionia",relation:"Ionia"},{source:"Rammus",target:"Shurima",relation:"Shurima"},{source:"RekSai",target:"Void",relation:"Void"},{source:"Rell",target:"Noxus",relation:"Noxus"},{source:"Renata",target:"Zaun",relation:"Zaun"},{source:"Renekton",target:"Shurima",relation:"Shurima"},{source:"Rengar",target:"Ixtal",relation:"Ixtal"},{source:"Riven",target:"Noxus",relation:"Noxus"},{source:"Rumble",target:"BandleCity",relation:"BandleCity"},{source:"Ryze",target:"Runeterra",relation:"Runeterra"},{source:"Samira",target:"Noxus",relation:"Noxus"},{source:"Sejuani",target:"Freljord",relation:"Freljord"},{source:"Senna",target:"Runeterra",relation:"Runeterra"},{source:"Seraphine",target:"Piltover",relation:"Piltover"},{source:"Sett",target:"Ionia",relation:"Ionia"},{source:"Shaco",target:"Runeterra",relation:"Runeterra"},{source:"Shen",target:"Ionia",relation:"Ionia"},{source:"Shyvana",target:"Demacia",relation:"Demacia"},{source:"Singed",target:"Zaun",relation:"Zaun"},{source:"Sion",target:"Noxus",relation:"Noxus"},{source:"Sivir",target:"Shurima",relation:"Shurima"},{source:"Skarner",target:"Ixtal",relation:"Ixtal"},{source:"Smolder",target:"Runeterra",relation:"Runeterra"},{source:"Sona",target:"Demacia",relation:"Demacia"},{source:"Soraka",target:"Targon",relation:"Targon"},{source:"Swain",target:"Noxus",relation:"Noxus"},{source:"Sylas",target:"Demacia",relation:"Demacia"},{source:"Syndra",target:"Ionia",relation:"Ionia"},{source:"TahmKench",target:"Runeterra",relation:"Runeterra"},{source:"Taliyah",target:"Shurima",relation:"Shurima"},{source:"Talon",target:"Noxus",relation:"Noxus"},{source:"Taric",target:"Targon",relation:"Targon"},{source:"Teemo",target:"BandleCity",relation:"BandleCity"},{source:"Thresh",target:"ShadowIsles",relation:"ShadowIsles"},{source:"Tristana",target:"BandleCity",relation:"BandleCity"},{source:"Trundle",target:"Freljord",relation:"Freljord"},{source:"Tryndamere",target:"Freljord",relation:"Freljord"},{source:"TwistedFate",target:"Bilgewater",relation:"Bilgewater"},{source:"Twitch",target:"Zaun",relation:"Zaun"},{source:"Udyr",target:"Freljord",relation:"Freljord"},{source:"Urgot",target:"Zaun",relation:"Zaun"},{source:"Varus",target:"Ionia",relation:"Ionia"},{source:"Vayne",target:"Demacia",relation:"Demacia"},{source:"Veigar",target:"BandleCity",relation:"BandleCity"},{source:"Velkoz",target:"Void",relation:"Void"},{source:"Vex",target:"ShadowIsles",relation:"ShadowIsles"},{source:"Vi",target:"Piltover",relation:"Piltover"},{source:"Viego",target:"ShadowIsles",relation:"ShadowIsles"},{source:"Viktor",target:"Zaun",relation:"Zaun"},{source:"Vladimir",target:"Noxus",relation:"Noxus"},{source:"Volibear",target:"Freljord",relation:"Freljord"},{source:"Warwick",target:"Zaun",relation:"Zaun"},{source:"Xayah",target:"Ionia",relation:"Ionia"},{source:"Xerath",target:"Shurima",relation:"Shurima"},{source:"XinZhao",target:"Demacia",relation:"Demacia"},{source:"Yasuo",target:"Ionia",relation:"Ionia"},{source:"Yone",target:"Ionia",relation:"Ionia"},{source:"Yorick",target:"ShadowIsles",relation:"ShadowIsles"},{source:"Yuumi",target:"BandleCity",relation:"BandleCity"},{source:"Zac",target:"Zaun",relation:"Zaun"},{source:"Zed",target:"Ionia",relation:"Ionia"},{source:"Zeri",target:"Zaun",relation:"Zaun"},{source:"Ziggs",target:"Zaun",relation:"Zaun"},{source:"Zilean",target:"Runeterra",relation:"Runeterra"},{source:"Zoe",target:"Targon",relation:"Targon"},{source:"Zyra",target:"Ixtal",relation:"Ixtal"}],rye={links:nye},iye=[{source:"Viego",target:"Kalista",relation:"Family"},{source:"Viego",target:"Vladimir",relation:"Family"},{source:"Kalista",target:"Vladimir",relation:"Family"},{source:"Garen",target:"Lux",relation:"Family"},{source:"Nasus",target:"Renekton",relation:"Family"},{source:"Darius",target:"Draven",relation:"Family"},{source:"Lissandra",target:"Serilda",relation:"Family"},{source:"Serilda",target:"Sejuani",relation:"Family"},{source:"Ornn",target:"Volibear",relation:"Family"},{source:"Ornn",target:"Anivia",relation:"Family"},{source:"Morgana",target:"Kayle",relation:"Family"},{source:"Katarina",target:"Cassiopeia",relation:"Family"},{source:"Yasuo",target:"Yone",relation:"Family"},{source:"Kassadin",target:"Kai'Sa",relation:"Family"},{source:"Lucian",target:"Senna",relation:"Married"},{source:"Tristana",target:"Ashe",relation:"Married"},{source:"Vi",target:"Jinx",relation:"Family"},{source:"Azir",target:"Sivir",relation:"Family"},{source:"Viktor",target:"Blitzcrank",relation:"Creator_Creation"},{source:"Xayah",target:"Rakan",relation:"Lovers"},{source:"Garen",target:"Katarina",relation:"Lovers"},{source:"Illaoi",target:"Gangplank",relation:"Ex-lovers"},{source:"Evelynn",target:"Twisted Fate",relation:"Ex-lovers"}],sye={links:iye},wl={primary:v4[700],grey:tx[300],bg:tx[50],text:"#000",bgCardChip:"#ffffff70",bgDetailChip:"#00000050"},Tl={primary:v4[900],grey:tx[500],bg:"#000",text:tx[50],bgCardChip:"#00000070",bgDetailChip:"#ffffff50"},oye=50;function aye(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function lye(n,e,t){return e=gye(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function EO(n,e){return hye(n)||aye(n,e)||yG(n,e)||pye()}function cye(n){return uye(n)||dye(n)||yG(n)||fye()}function uye(n){if(Array.isArray(n))return oA(n)}function hye(n){if(Array.isArray(n))return n}function dye(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function yG(n,e){if(n){if(typeof n=="string")return oA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oA(n,e)}}function oA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function fye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mye(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function gye(n){var e=mye(n,"string");return typeof e=="symbol"?e:String(e)}var yye=function(e,t){var r=new Set(t);return Object.assign.apply(Object,[{}].concat(cye(Object.entries(e).filter(function(i){var s=EO(i,1),o=s[0];return!r.has(o)}).map(function(i){var s=EO(i,2),o=s[0],a=s[1];return lye({},o,a)}))))};/*! fromentries. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var vye=function(e){return[...e].reduce((t,[r,i])=>(t[r]=i,t),{})};const CO=Xf(vye);function aA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function _ye(n){if(Array.isArray(n))return n}function xye(n){if(Array.isArray(n))return aA(n)}function Sye(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function bye(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function wye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vG(n,e){return _ye(n)||bye(n,e)||_G(n,e)||wye()}function AO(n){return xye(n)||Sye(n)||_G(n)||Tye()}function lA(n){"@babel/helpers - typeof";return lA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lA(n)}function _G(n,e){if(n){if(typeof n=="string")return aA(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?aA(n,e):void 0}}function Mye(n,e){var t=lA(e)==="object"?e:{wrapperElementType:e,methodNames:(arguments.length<=2?void 0:arguments[2])||void 0,initPropNames:(arguments.length<=3?void 0:arguments[3])||void 0},r=t.wrapperElementType,i=r===void 0?"div":r,s=t.nodeMapper,o=s===void 0?function(h){return h}:s,a=t.methodNames,l=a===void 0?[]:a,c=t.initPropNames,u=c===void 0?[]:c;return P.forwardRef(function(h,d){var f=P.useRef(),p=P.useState({}),y=vG(p,2),g=y[0],m=y[1];P.useEffect(function(){return m(h)});var _=P.useMemo(function(){var b=CO(u.filter(function(T){return h.hasOwnProperty(T)}).map(function(T){return[T,h[T]]}));return n(b)},[]);RO(function(){_(o(f.current))},P.useLayoutEffect),RO(function(){return _._destructor instanceof Function?_._destructor:void 0});var v=P.useCallback(function(b){for(var T=arguments.length,w=new Array(T>1?T-1:0),M=1;M<T;M++)w[M-1]=arguments[M];return _[b]instanceof Function?_[b].apply(_,w):void 0},[_]),x=yye(h,[].concat(AO(l),AO(u)));return Object.keys(x).filter(function(b){return g[b]!==h[b]}).forEach(function(b){return v(b,h[b])}),P.useImperativeHandle(d,function(){return CO(l.map(function(b){return[b,function(){for(var T=arguments.length,w=new Array(T),M=0;M<T;M++)w[M]=arguments[M];return v.apply(void 0,[b].concat(w))}]}))}),Et.createElement(i,{ref:f})})}function RO(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P.useEffect,t=P.useRef(),r=P.useRef(!1),i=P.useRef(!1),s=P.useState(0),o=vG(s,2);o[0];var a=o[1];r.current&&(i.current=!0),e(function(){return r.current||(t.current=n(),r.current=!0),a(function(l){return l+1}),function(){i.current&&t.current&&t.current()}},[])}const qd=new wa,Ra=new Ge,xG=new X,sT=new Ge,m_=new Ge,Rx=new X,cA=new X,SG=new _n,bG=new X,wG=new X;let Ti=null,No=null;const Na=[],hc={NONE:-1,PAN:0,ROTATE:1};class Eye extends jb{constructor(e,t,r=null){super(t,r),this.objects=e,this.recursive=!0,this.transformGroup=!1,this.rotateSpeed=1,this.raycaster=new gG,this.mouseButtons={LEFT:Tr.PAN,MIDDLE:Tr.PAN,RIGHT:Tr.ROTATE},this.touches={ONE:ka.PAN},this._onPointerMove=Cye.bind(this),this._onPointerDown=Aye.bind(this),this._onPointerCancel=Rye.bind(this),this._onContextMenu=Nye.bind(this),r!==null&&this.connect()}connect(){this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerCancel),this.domElement.addEventListener("pointerleave",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerCancel),this.domElement.removeEventListener("pointerleave",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto",this.domElement.style.cursor=""}dispose(){this.disconnect()}_updatePointer(e){const t=this.domElement.getBoundingClientRect();Ra.x=(e.clientX-t.left)/t.width*2-1,Ra.y=-(e.clientY-t.top)/t.height*2+1}_updateState(e){let t;if(e.pointerType==="touch")t=this.touches.ONE;else switch(e.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=null}switch(t){case Tr.PAN:case ka.PAN:this.state=hc.PAN;break;case Tr.ROTATE:case ka.ROTATE:this.state=hc.ROTATE;break;default:this.state=hc.NONE}}getRaycaster(){return console.warn("THREE.DragControls: getRaycaster() has been deprecated. Use controls.raycaster instead."),this.raycaster}setObjects(e){console.warn("THREE.DragControls: setObjects() has been deprecated. Use controls.objects instead."),this.objects=e}getObjects(){return console.warn("THREE.DragControls: getObjects() has been deprecated. Use controls.objects instead."),this.objects}activate(){console.warn("THREE.DragControls: activate() has been renamed to connect()."),this.connect()}deactivate(){console.warn("THREE.DragControls: deactivate() has been renamed to disconnect()."),this.disconnect()}set mode(e){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}get mode(){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}}function Cye(n){const e=this.object,t=this.domElement,r=this.raycaster;if(this.enabled!==!1){if(this._updatePointer(n),r.setFromCamera(Ra,e),Ti)this.state===hc.PAN?r.ray.intersectPlane(qd,Rx)&&Ti.position.copy(Rx.sub(xG).applyMatrix4(SG)):this.state===hc.ROTATE&&(sT.subVectors(Ra,m_).multiplyScalar(this.rotateSpeed),Ti.rotateOnWorldAxis(bG,sT.x),Ti.rotateOnWorldAxis(wG.normalize(),-sT.y)),this.dispatchEvent({type:"drag",object:Ti}),m_.copy(Ra);else if(n.pointerType==="mouse"||n.pointerType==="pen")if(Na.length=0,r.setFromCamera(Ra,e),r.intersectObjects(this.objects,this.recursive,Na),Na.length>0){const i=Na[0].object;qd.setFromNormalAndCoplanarPoint(e.getWorldDirection(qd.normal),cA.setFromMatrixPosition(i.matrixWorld)),No!==i&&No!==null&&(this.dispatchEvent({type:"hoveroff",object:No}),t.style.cursor="auto",No=null),No!==i&&(this.dispatchEvent({type:"hoveron",object:i}),t.style.cursor="pointer",No=i)}else No!==null&&(this.dispatchEvent({type:"hoveroff",object:No}),t.style.cursor="auto",No=null);m_.copy(Ra)}}function Aye(n){const e=this.object,t=this.domElement,r=this.raycaster;this.enabled!==!1&&(this._updatePointer(n),this._updateState(n),Na.length=0,r.setFromCamera(Ra,e),r.intersectObjects(this.objects,this.recursive,Na),Na.length>0&&(this.transformGroup===!0?Ti=TG(Na[0].object):Ti=Na[0].object,qd.setFromNormalAndCoplanarPoint(e.getWorldDirection(qd.normal),cA.setFromMatrixPosition(Ti.matrixWorld)),r.ray.intersectPlane(qd,Rx)&&(this.state===hc.PAN?(SG.copy(Ti.parent.matrixWorld).invert(),xG.copy(Rx).sub(cA.setFromMatrixPosition(Ti.matrixWorld))):this.state===hc.ROTATE&&(bG.set(0,1,0).applyQuaternion(e.quaternion).normalize(),wG.set(1,0,0).applyQuaternion(e.quaternion).normalize())),t.style.cursor="move",this.dispatchEvent({type:"dragstart",object:Ti})),m_.copy(Ra))}function Rye(){this.enabled!==!1&&(Ti&&(this.dispatchEvent({type:"dragend",object:Ti}),Ti=null),this.domElement.style.cursor=No?"pointer":"auto",this.state=hc.NONE)}function Nye(n){this.enabled!==!1&&n.preventDefault()}function TG(n,e=null){return n.isGroup&&(e=n),n.parent===null?e:TG(n.parent,e)}function Pye(n,e,t){var r,i=1;n==null&&(n=0),e==null&&(e=0),t==null&&(t=0);function s(){var o,a=r.length,l,c=0,u=0,h=0;for(o=0;o<a;++o)l=r[o],c+=l.x||0,u+=l.y||0,h+=l.z||0;for(c=(c/a-n)*i,u=(u/a-e)*i,h=(h/a-t)*i,o=0;o<a;++o)l=r[o],c&&(l.x-=c),u&&(l.y-=u),h&&(l.z-=h)}return s.initialize=function(o){r=o},s.x=function(o){return arguments.length?(n=+o,s):n},s.y=function(o){return arguments.length?(e=+o,s):e},s.z=function(o){return arguments.length?(t=+o,s):t},s.strength=function(o){return arguments.length?(i=+o,s):i},s}function Iye(n){const e=+this._x.call(null,n);return MG(this.cover(e),e,n)}function MG(n,e,t){if(isNaN(e))return n;var r,i=n._root,s={data:t},o=n._x0,a=n._x1,l,c,u,h,d;if(!i)return n._root=s,n;for(;i.length;)if((u=e>=(l=(o+a)/2))?o=l:a=l,r=i,!(i=i[h=+u]))return r[h]=s,n;if(c=+n._x.call(null,i.data),e===c)return s.next=i,r?r[h]=s:n._root=s,n;do r=r?r[h]=new Array(2):n._root=new Array(2),(u=e>=(l=(o+a)/2))?o=l:a=l;while((h=+u)==(d=+(c>=l)));return r[d]=i,r[h]=s,n}function Lye(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e);let r=1/0,i=-1/0;for(let s=0,o;s<e;++s)isNaN(o=+this._x.call(null,n[s]))||(t[s]=o,o<r&&(r=o),o>i&&(i=o));if(r>i)return this;this.cover(r).cover(i);for(let s=0;s<e;++s)MG(this,t[s],n[s]);return this}function Dye(n){if(isNaN(n=+n))return this;var e=this._x0,t=this._x1;if(isNaN(e))t=(e=Math.floor(n))+1;else{for(var r=t-e||1,i=this._root,s,o;e>n||n>=t;)switch(o=+(n<e),s=new Array(2),s[o]=i,i=s,r*=2,o){case 0:t=e+r;break;case 1:e=t-r;break}this._root&&this._root.length&&(this._root=i)}return this._x0=e,this._x1=t,this}function Fye(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Oye(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function ja(n,e,t){this.node=n,this.x0=e,this.x1=t}function kye(n,e){var t,r=this._x0,i,s,o=this._x1,a=[],l=this._root,c,u;for(l&&a.push(new ja(l,r,o)),e==null?e=1/0:(r=n-e,o=n+e);c=a.pop();)if(!(!(l=c.node)||(i=c.x0)>o||(s=c.x1)<r))if(l.length){var h=(i+s)/2;a.push(new ja(l[1],h,s),new ja(l[0],i,h)),(u=+(n>=h))&&(c=a[a.length-1],a[a.length-1]=a[a.length-1-u],a[a.length-1-u]=c)}else{var d=Math.abs(n-+this._x.call(null,l.data));d<e&&(e=d,r=n-d,o=n+d,t=l.data)}return t}function Uye(n){if(isNaN(l=+this._x.call(null,n)))return this;var e,t=this._root,r,i,s,o=this._x0,a=this._x1,l,c,u,h,d;if(!t)return this;if(t.length)for(;;){if((u=l>=(c=(o+a)/2))?o=c:a=c,e=t,!(t=t[h=+u]))return this;if(!t.length)break;e[h+1&1]&&(r=e,d=h)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):e?(s?e[h]=s:delete e[h],(t=e[0]||e[1])&&t===(e[1]||e[0])&&!t.length&&(r?r[d]=t:this._root=t),this):(this._root=s,this)}function Bye(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function zye(){return this._root}function $ye(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Vye(n){var e=[],t,r=this._root,i,s,o;for(r&&e.push(new ja(r,this._x0,this._x1));t=e.pop();)if(!n(r=t.node,s=t.x0,o=t.x1)&&r.length){var a=(s+o)/2;(i=r[1])&&e.push(new ja(i,a,o)),(i=r[0])&&e.push(new ja(i,s,a))}return this}function Gye(n){var e=[],t=[],r;for(this._root&&e.push(new ja(this._root,this._x0,this._x1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.x1,l=(o+a)/2;(s=i[0])&&e.push(new ja(s,o,l)),(s=i[1])&&e.push(new ja(s,l,a))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.x1);return this}function Hye(n){return n[0]}function Wye(n){return arguments.length?(this._x=n,this):this._x}function EG(n,e){var t=new VP(e??Hye,NaN,NaN);return n==null?t:t.addAll(n)}function VP(n,e,t){this._x=n,this._x0=e,this._x1=t,this._root=void 0}function NO(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Gi=EG.prototype=VP.prototype;Gi.copy=function(){var n=new VP(this._x,this._x0,this._x1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=NO(e),n;for(t=[{source:e,target:n._root=new Array(2)}];e=t.pop();)for(var i=0;i<2;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(2)}):e.target[i]=NO(r));return n};Gi.add=Iye;Gi.addAll=Lye;Gi.cover=Dye;Gi.data=Fye;Gi.extent=Oye;Gi.find=kye;Gi.remove=Uye;Gi.removeAll=Bye;Gi.root=zye;Gi.size=$ye;Gi.visit=Vye;Gi.visitAfter=Gye;Gi.x=Wye;function jye(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return CG(this.cover(e,t),e,t,n)}function CG(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var i,s=n._root,o={data:r},a=n._x0,l=n._y0,c=n._x1,u=n._y1,h,d,f,p,y,g,m,_;if(!s)return n._root=o,n;for(;s.length;)if((y=e>=(h=(a+c)/2))?a=h:c=h,(g=t>=(d=(l+u)/2))?l=d:u=d,i=s,!(s=s[m=g<<1|y]))return i[m]=o,n;if(f=+n._x.call(null,s.data),p=+n._y.call(null,s.data),e===f&&t===p)return o.next=s,i?i[m]=o:n._root=o,n;do i=i?i[m]=new Array(4):n._root=new Array(4),(y=e>=(h=(a+c)/2))?a=h:c=h,(g=t>=(d=(l+u)/2))?l=d:u=d;while((m=g<<1|y)===(_=(p>=d)<<1|f>=h));return i[_]=s,i[m]=o,n}function qye(n){var e,t,r=n.length,i,s,o=new Array(r),a=new Array(r),l=1/0,c=1/0,u=-1/0,h=-1/0;for(t=0;t<r;++t)isNaN(i=+this._x.call(null,e=n[t]))||isNaN(s=+this._y.call(null,e))||(o[t]=i,a[t]=s,i<l&&(l=i),i>u&&(u=i),s<c&&(c=s),s>h&&(h=s));if(l>u||c>h)return this;for(this.cover(l,c).cover(u,h),t=0;t<r;++t)CG(this,o[t],a[t],n[t]);return this}function Xye(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(t))i=(t=Math.floor(n))+1,s=(r=Math.floor(e))+1;else{for(var o=i-t||1,a=this._root,l,c;t>n||n>=i||r>e||e>=s;)switch(c=(e<r)<<1|n<t,l=new Array(4),l[c]=a,a=l,o*=2,c){case 0:i=t+o,s=r+o;break;case 1:t=i-o,s=r+o;break;case 2:i=t+o,r=s-o;break;case 3:t=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._y0=r,this._x1=i,this._y1=s,this}function Kye(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Yye(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function hi(n,e,t,r,i){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=i}function Zye(n,e,t){var r,i=this._x0,s=this._y0,o,a,l,c,u=this._x1,h=this._y1,d=[],f=this._root,p,y;for(f&&d.push(new hi(f,i,s,u,h)),t==null?t=1/0:(i=n-t,s=e-t,u=n+t,h=e+t,t*=t);p=d.pop();)if(!(!(f=p.node)||(o=p.x0)>u||(a=p.y0)>h||(l=p.x1)<i||(c=p.y1)<s))if(f.length){var g=(o+l)/2,m=(a+c)/2;d.push(new hi(f[3],g,m,l,c),new hi(f[2],o,m,g,c),new hi(f[1],g,a,l,m),new hi(f[0],o,a,g,m)),(y=(e>=m)<<1|n>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-y],d[d.length-1-y]=p)}else{var _=n-+this._x.call(null,f.data),v=e-+this._y.call(null,f.data),x=_*_+v*v;if(x<t){var b=Math.sqrt(t=x);i=n-b,s=e-b,u=n+b,h=e+b,r=f.data}}return r}function Qye(n){if(isNaN(u=+this._x.call(null,n))||isNaN(h=+this._y.call(null,n)))return this;var e,t=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,c=this._y1,u,h,d,f,p,y,g,m;if(!t)return this;if(t.length)for(;;){if((p=u>=(d=(o+l)/2))?o=d:l=d,(y=h>=(f=(a+c)/2))?a=f:c=f,e=t,!(t=t[g=y<<1|p]))return this;if(!t.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(r=e,m=g)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):e?(s?e[g]=s:delete e[g],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[m]=t:this._root=t),this):(this._root=s,this)}function Jye(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function e0e(){return this._root}function t0e(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function n0e(n){var e=[],t,r=this._root,i,s,o,a,l;for(r&&e.push(new hi(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,s=t.x0,o=t.y0,a=t.x1,l=t.y1)&&r.length){var c=(s+a)/2,u=(o+l)/2;(i=r[3])&&e.push(new hi(i,c,u,a,l)),(i=r[2])&&e.push(new hi(i,s,u,c,l)),(i=r[1])&&e.push(new hi(i,c,o,a,u)),(i=r[0])&&e.push(new hi(i,s,o,c,u))}return this}function r0e(n){var e=[],t=[],r;for(this._root&&e.push(new hi(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,c=r.y1,u=(o+l)/2,h=(a+c)/2;(s=i[0])&&e.push(new hi(s,o,a,u,h)),(s=i[1])&&e.push(new hi(s,u,a,l,h)),(s=i[2])&&e.push(new hi(s,o,h,u,c)),(s=i[3])&&e.push(new hi(s,u,h,l,c))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function i0e(n){return n[0]}function s0e(n){return arguments.length?(this._x=n,this):this._x}function o0e(n){return n[1]}function a0e(n){return arguments.length?(this._y=n,this):this._y}function AG(n,e,t){var r=new GP(e??i0e,t??o0e,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function GP(n,e,t,r,i,s){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function PO(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var xi=AG.prototype=GP.prototype;xi.copy=function(){var n=new GP(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=PO(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=PO(r));return n};xi.add=jye;xi.addAll=qye;xi.cover=Xye;xi.data=Kye;xi.extent=Yye;xi.find=Zye;xi.remove=Qye;xi.removeAll=Jye;xi.root=e0e;xi.size=t0e;xi.visit=n0e;xi.visitAfter=r0e;xi.x=s0e;xi.y=a0e;function l0e(n){const e=+this._x.call(null,n),t=+this._y.call(null,n),r=+this._z.call(null,n);return RG(this.cover(e,t,r),e,t,r,n)}function RG(n,e,t,r,i){if(isNaN(e)||isNaN(t)||isNaN(r))return n;var s,o=n._root,a={data:i},l=n._x0,c=n._y0,u=n._z0,h=n._x1,d=n._y1,f=n._z1,p,y,g,m,_,v,x,b,T,w,M;if(!o)return n._root=a,n;for(;o.length;)if((x=e>=(p=(l+h)/2))?l=p:h=p,(b=t>=(y=(c+d)/2))?c=y:d=y,(T=r>=(g=(u+f)/2))?u=g:f=g,s=o,!(o=o[w=T<<2|b<<1|x]))return s[w]=a,n;if(m=+n._x.call(null,o.data),_=+n._y.call(null,o.data),v=+n._z.call(null,o.data),e===m&&t===_&&r===v)return a.next=o,s?s[w]=a:n._root=a,n;do s=s?s[w]=new Array(8):n._root=new Array(8),(x=e>=(p=(l+h)/2))?l=p:h=p,(b=t>=(y=(c+d)/2))?c=y:d=y,(T=r>=(g=(u+f)/2))?u=g:f=g;while((w=T<<2|b<<1|x)===(M=(v>=g)<<2|(_>=y)<<1|m>=p));return s[M]=o,s[w]=a,n}function c0e(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e),r=new Float64Array(e),i=new Float64Array(e);let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0;for(let h=0,d,f,p,y;h<e;++h)isNaN(f=+this._x.call(null,d=n[h]))||isNaN(p=+this._y.call(null,d))||isNaN(y=+this._z.call(null,d))||(t[h]=f,r[h]=p,i[h]=y,f<s&&(s=f),f>l&&(l=f),p<o&&(o=p),p>c&&(c=p),y<a&&(a=y),y>u&&(u=y));if(s>l||o>c||a>u)return this;this.cover(s,o,a).cover(l,c,u);for(let h=0;h<e;++h)RG(this,t[h],r[h],i[h],n[h]);return this}function u0e(n,e,t){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,i=this._y0,s=this._z0,o=this._x1,a=this._y1,l=this._z1;if(isNaN(r))o=(r=Math.floor(n))+1,a=(i=Math.floor(e))+1,l=(s=Math.floor(t))+1;else{for(var c=o-r||1,u=this._root,h,d;r>n||n>=o||i>e||e>=a||s>t||t>=l;)switch(d=(t<s)<<2|(e<i)<<1|n<r,h=new Array(8),h[d]=u,u=h,c*=2,d){case 0:o=r+c,a=i+c,l=s+c;break;case 1:r=o-c,a=i+c,l=s+c;break;case 2:o=r+c,i=a-c,l=s+c;break;case 3:r=o-c,i=a-c,l=s+c;break;case 4:o=r+c,a=i+c,s=l-c;break;case 5:r=o-c,a=i+c,s=l-c;break;case 6:o=r+c,i=a-c,s=l-c;break;case 7:r=o-c,i=a-c,s=l-c;break}this._root&&this._root.length&&(this._root=u)}return this._x0=r,this._y0=i,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this}function h0e(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function d0e(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function yn(n,e,t,r,i,s,o){this.node=n,this.x0=e,this.y0=t,this.z0=r,this.x1=i,this.y1=s,this.z1=o}function f0e(n,e,t,r){var i,s=this._x0,o=this._y0,a=this._z0,l,c,u,h,d,f,p=this._x1,y=this._y1,g=this._z1,m=[],_=this._root,v,x;for(_&&m.push(new yn(_,s,o,a,p,y,g)),r==null?r=1/0:(s=n-r,o=e-r,a=t-r,p=n+r,y=e+r,g=t+r,r*=r);v=m.pop();)if(!(!(_=v.node)||(l=v.x0)>p||(c=v.y0)>y||(u=v.z0)>g||(h=v.x1)<s||(d=v.y1)<o||(f=v.z1)<a))if(_.length){var b=(l+h)/2,T=(c+d)/2,w=(u+f)/2;m.push(new yn(_[7],b,T,w,h,d,f),new yn(_[6],l,T,w,b,d,f),new yn(_[5],b,c,w,h,T,f),new yn(_[4],l,c,w,b,T,f),new yn(_[3],b,T,u,h,d,w),new yn(_[2],l,T,u,b,d,w),new yn(_[1],b,c,u,h,T,w),new yn(_[0],l,c,u,b,T,w)),(x=(t>=w)<<2|(e>=T)<<1|n>=b)&&(v=m[m.length-1],m[m.length-1]=m[m.length-1-x],m[m.length-1-x]=v)}else{var M=n-+this._x.call(null,_.data),A=e-+this._y.call(null,_.data),S=t-+this._z.call(null,_.data),E=M*M+A*A+S*S;if(E<r){var I=Math.sqrt(r=E);s=n-I,o=e-I,a=t-I,p=n+I,y=e+I,g=t+I,i=_.data}}return i}function p0e(n){if(isNaN(d=+this._x.call(null,n))||isNaN(f=+this._y.call(null,n))||isNaN(p=+this._z.call(null,n)))return this;var e,t=this._root,r,i,s,o=this._x0,a=this._y0,l=this._z0,c=this._x1,u=this._y1,h=this._z1,d,f,p,y,g,m,_,v,x,b,T;if(!t)return this;if(t.length)for(;;){if((_=d>=(y=(o+c)/2))?o=y:c=y,(v=f>=(g=(a+u)/2))?a=g:u=g,(x=p>=(m=(l+h)/2))?l=m:h=m,e=t,!(t=t[b=x<<2|v<<1|_]))return this;if(!t.length)break;(e[b+1&7]||e[b+2&7]||e[b+3&7]||e[b+4&7]||e[b+5&7]||e[b+6&7]||e[b+7&7])&&(r=e,T=b)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):e?(s?e[b]=s:delete e[b],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[T]=t:this._root=t),this):(this._root=s,this)}function m0e(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function g0e(){return this._root}function y0e(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function v0e(n){var e=[],t,r=this._root,i,s,o,a,l,c,u;for(r&&e.push(new yn(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!n(r=t.node,s=t.x0,o=t.y0,a=t.z0,l=t.x1,c=t.y1,u=t.z1)&&r.length){var h=(s+l)/2,d=(o+c)/2,f=(a+u)/2;(i=r[7])&&e.push(new yn(i,h,d,f,l,c,u)),(i=r[6])&&e.push(new yn(i,s,d,f,h,c,u)),(i=r[5])&&e.push(new yn(i,h,o,f,l,d,u)),(i=r[4])&&e.push(new yn(i,s,o,f,h,d,u)),(i=r[3])&&e.push(new yn(i,h,d,a,l,c,f)),(i=r[2])&&e.push(new yn(i,s,d,a,h,c,f)),(i=r[1])&&e.push(new yn(i,h,o,a,l,d,f)),(i=r[0])&&e.push(new yn(i,s,o,a,h,d,f))}return this}function _0e(n){var e=[],t=[],r;for(this._root&&e.push(new yn(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.z0,c=r.x1,u=r.y1,h=r.z1,d=(o+c)/2,f=(a+u)/2,p=(l+h)/2;(s=i[0])&&e.push(new yn(s,o,a,l,d,f,p)),(s=i[1])&&e.push(new yn(s,d,a,l,c,f,p)),(s=i[2])&&e.push(new yn(s,o,f,l,d,u,p)),(s=i[3])&&e.push(new yn(s,d,f,l,c,u,p)),(s=i[4])&&e.push(new yn(s,o,a,p,d,f,h)),(s=i[5])&&e.push(new yn(s,d,a,p,c,f,h)),(s=i[6])&&e.push(new yn(s,o,f,p,d,u,h)),(s=i[7])&&e.push(new yn(s,d,f,p,c,u,h))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function x0e(n){return n[0]}function S0e(n){return arguments.length?(this._x=n,this):this._x}function b0e(n){return n[1]}function w0e(n){return arguments.length?(this._y=n,this):this._y}function T0e(n){return n[2]}function M0e(n){return arguments.length?(this._z=n,this):this._z}function NG(n,e,t,r){var i=new HP(e??x0e,t??b0e,r??T0e,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function HP(n,e,t,r,i,s,o,a,l){this._x=n,this._y=e,this._z=t,this._x0=r,this._y0=i,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this._root=void 0}function IO(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var ri=NG.prototype=HP.prototype;ri.copy=function(){var n=new HP(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=IO(e),n;for(t=[{source:e,target:n._root=new Array(8)}];e=t.pop();)for(var i=0;i<8;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(8)}):e.target[i]=IO(r));return n};ri.add=l0e;ri.addAll=c0e;ri.cover=u0e;ri.data=h0e;ri.extent=d0e;ri.find=f0e;ri.remove=p0e;ri.removeAll=m0e;ri.root=g0e;ri.size=y0e;ri.visit=v0e;ri.visitAfter=_0e;ri.x=S0e;ri.y=w0e;ri.z=M0e;function za(n){return function(){return n}}function Ta(n){return(n()-.5)*1e-6}function E0e(n){return n.index}function LO(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function C0e(n){var e=E0e,t=d,r,i=za(30),s,o,a,l,c,u,h=1;n==null&&(n=[]);function d(m){return 1/Math.min(l[m.source.index],l[m.target.index])}function f(m){for(var _=0,v=n.length;_<h;++_)for(var x=0,b,T,w,M=0,A=0,S=0,E,I;x<v;++x)b=n[x],T=b.source,w=b.target,M=w.x+w.vx-T.x-T.vx||Ta(u),a>1&&(A=w.y+w.vy-T.y-T.vy||Ta(u)),a>2&&(S=w.z+w.vz-T.z-T.vz||Ta(u)),E=Math.sqrt(M*M+A*A+S*S),E=(E-s[x])/E*m*r[x],M*=E,A*=E,S*=E,w.vx-=M*(I=c[x]),a>1&&(w.vy-=A*I),a>2&&(w.vz-=S*I),T.vx+=M*(I=1-I),a>1&&(T.vy+=A*I),a>2&&(T.vz+=S*I)}function p(){if(o){var m,_=o.length,v=n.length,x=new Map(o.map((T,w)=>[e(T,w,o),T])),b;for(m=0,l=new Array(_);m<v;++m)b=n[m],b.index=m,typeof b.source!="object"&&(b.source=LO(x,b.source)),typeof b.target!="object"&&(b.target=LO(x,b.target)),l[b.source.index]=(l[b.source.index]||0)+1,l[b.target.index]=(l[b.target.index]||0)+1;for(m=0,c=new Array(v);m<v;++m)b=n[m],c[m]=l[b.source.index]/(l[b.source.index]+l[b.target.index]);r=new Array(v),y(),s=new Array(v),g()}}function y(){if(o)for(var m=0,_=n.length;m<_;++m)r[m]=+t(n[m],m,n)}function g(){if(o)for(var m=0,_=n.length;m<_;++m)s[m]=+i(n[m],m,n)}return f.initialize=function(m,..._){o=m,u=_.find(v=>typeof v=="function")||Math.random,a=_.find(v=>[1,2,3].includes(v))||2,p()},f.links=function(m){return arguments.length?(n=m,p(),f):n},f.id=function(m){return arguments.length?(e=m,f):e},f.iterations=function(m){return arguments.length?(h=+m,f):h},f.strength=function(m){return arguments.length?(t=typeof m=="function"?m:za(+m),y(),f):t},f.distance=function(m){return arguments.length?(i=typeof m=="function"?m:za(+m),g(),f):i},f}var A0e={value:()=>{}};function PG(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new g_(t)}function g_(n){this._=n}function R0e(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}g_.prototype=PG.prototype={constructor:g_,on:function(n,e){var t=this._,r=R0e(n+"",t),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(n=r[s]).type)&&(i=N0e(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(n=r[s]).type)t[i]=DO(t[i],n.name,e);else if(e==null)for(i in t)t[i]=DO(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new g_(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,s;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],r=0,i=s.length;r<i;++r)s[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,s=r.length;i<s;++i)r[i].value.apply(e,t)}};function N0e(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function DO(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=A0e,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var $f=0,Em=0,jp=0,IG=1e3,Nx,Cm,Px=0,Wu=0,qb=0,Ug=typeof performance=="object"&&performance.now?performance:Date,LG=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function DG(){return Wu||(LG(P0e),Wu=Ug.now()+qb)}function P0e(){Wu=0}function uA(){this._call=this._time=this._next=null}uA.prototype=FG.prototype={constructor:uA,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?DG():+t)+(e==null?0:+e),!this._next&&Cm!==this&&(Cm?Cm._next=this:Nx=this,Cm=this),this._call=n,this._time=t,hA()},stop:function(){this._call&&(this._call=null,this._time=1/0,hA())}};function FG(n,e,t){var r=new uA;return r.restart(n,e,t),r}function I0e(){DG(),++$f;for(var n=Nx,e;n;)(e=Wu-n._time)>=0&&n._call.call(void 0,e),n=n._next;--$f}function FO(){Wu=(Px=Ug.now())+qb,$f=Em=0;try{I0e()}finally{$f=0,D0e(),Wu=0}}function L0e(){var n=Ug.now(),e=n-Px;e>IG&&(qb-=e,Px=n)}function D0e(){for(var n,e=Nx,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Nx=t);Cm=n,hA(r)}function hA(n){if(!$f){Em&&(Em=clearTimeout(Em));var e=n-Wu;e>24?(n<1/0&&(Em=setTimeout(FO,n-Ug.now()-qb)),jp&&(jp=clearInterval(jp))):(jp||(Px=Ug.now(),jp=setInterval(L0e,IG)),$f=1,LG(FO))}}const F0e=1664525,O0e=1013904223,OO=4294967296;function k0e(){let n=1;return()=>(n=(F0e*n+O0e)%OO)/OO}var kO=3;function oT(n){return n.x}function UO(n){return n.y}function U0e(n){return n.z}var B0e=10,z0e=Math.PI*(3-Math.sqrt(5)),$0e=Math.PI*20/(9+Math.sqrt(221));function V0e(n,e){e=e||2;var t=Math.min(kO,Math.max(1,Math.round(e))),r,i=1,s=.001,o=1-Math.pow(s,1/300),a=0,l=.6,c=new Map,u=FG(f),h=PG("tick","end"),d=k0e();n==null&&(n=[]);function f(){p(),h.call("tick",r),i<s&&(u.stop(),h.call("end",r))}function p(m){var _,v=n.length,x;m===void 0&&(m=1);for(var b=0;b<m;++b)for(i+=(a-i)*o,c.forEach(function(T){T(i)}),_=0;_<v;++_)x=n[_],x.fx==null?x.x+=x.vx*=l:(x.x=x.fx,x.vx=0),t>1&&(x.fy==null?x.y+=x.vy*=l:(x.y=x.fy,x.vy=0)),t>2&&(x.fz==null?x.z+=x.vz*=l:(x.z=x.fz,x.vz=0));return r}function y(){for(var m=0,_=n.length,v;m<_;++m){if(v=n[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),v.fz!=null&&(v.z=v.fz),isNaN(v.x)||t>1&&isNaN(v.y)||t>2&&isNaN(v.z)){var x=B0e*(t>2?Math.cbrt(.5+m):t>1?Math.sqrt(.5+m):m),b=m*z0e,T=m*$0e;t===1?v.x=x:t===2?(v.x=x*Math.cos(b),v.y=x*Math.sin(b)):(v.x=x*Math.sin(b)*Math.cos(T),v.y=x*Math.cos(b),v.z=x*Math.sin(b)*Math.sin(T))}(isNaN(v.vx)||t>1&&isNaN(v.vy)||t>2&&isNaN(v.vz))&&(v.vx=0,t>1&&(v.vy=0),t>2&&(v.vz=0))}}function g(m){return m.initialize&&m.initialize(n,d,t),m}return y(),r={tick:p,restart:function(){return u.restart(f),r},stop:function(){return u.stop(),r},numDimensions:function(m){return arguments.length?(t=Math.min(kO,Math.max(1,Math.round(m))),c.forEach(g),r):t},nodes:function(m){return arguments.length?(n=m,y(),c.forEach(g),r):n},alpha:function(m){return arguments.length?(i=+m,r):i},alphaMin:function(m){return arguments.length?(s=+m,r):s},alphaDecay:function(m){return arguments.length?(o=+m,r):+o},alphaTarget:function(m){return arguments.length?(a=+m,r):a},velocityDecay:function(m){return arguments.length?(l=1-m,r):1-l},randomSource:function(m){return arguments.length?(d=m,c.forEach(g),r):d},force:function(m,_){return arguments.length>1?(_==null?c.delete(m):c.set(m,g(_)),r):c.get(m)},find:function(){var m=Array.prototype.slice.call(arguments),_=m.shift()||0,v=(t>1?m.shift():null)||0,x=(t>2?m.shift():null)||0,b=m.shift()||1/0,T=0,w=n.length,M,A,S,E,I,O;for(b*=b,T=0;T<w;++T)I=n[T],M=_-I.x,A=v-(I.y||0),S=x-(I.z||0),E=M*M+A*A+S*S,E<b&&(O=I,b=E);return O},on:function(m,_){return arguments.length>1?(h.on(m,_),r):h.on(m)}}}function G0e(){var n,e,t,r,i,s=za(-30),o,a=1,l=1/0,c=.81;function u(p){var y,g=n.length,m=(e===1?EG(n,oT):e===2?AG(n,oT,UO):e===3?NG(n,oT,UO,U0e):null).visitAfter(d);for(i=p,y=0;y<g;++y)t=n[y],m.visit(f)}function h(){if(n){var p,y=n.length,g;for(o=new Array(y),p=0;p<y;++p)g=n[p],o[g.index]=+s(g,p,n)}}function d(p){var y=0,g,m,_=0,v,x,b,T,w=p.length;if(w){for(v=x=b=T=0;T<w;++T)(g=p[T])&&(m=Math.abs(g.value))&&(y+=g.value,_+=m,v+=m*(g.x||0),x+=m*(g.y||0),b+=m*(g.z||0));y*=Math.sqrt(4/w),p.x=v/_,e>1&&(p.y=x/_),e>2&&(p.z=b/_)}else{g=p,g.x=g.data.x,e>1&&(g.y=g.data.y),e>2&&(g.z=g.data.z);do y+=o[g.data.index];while(g=g.next)}p.value=y}function f(p,y,g,m,_){if(!p.value)return!0;var v=[g,m,_][e-1],x=p.x-t.x,b=e>1?p.y-t.y:0,T=e>2?p.z-t.z:0,w=v-y,M=x*x+b*b+T*T;if(w*w/c<M)return M<l&&(x===0&&(x=Ta(r),M+=x*x),e>1&&b===0&&(b=Ta(r),M+=b*b),e>2&&T===0&&(T=Ta(r),M+=T*T),M<a&&(M=Math.sqrt(a*M)),t.vx+=x*p.value*i/M,e>1&&(t.vy+=b*p.value*i/M),e>2&&(t.vz+=T*p.value*i/M)),!0;if(p.length||M>=l)return;(p.data!==t||p.next)&&(x===0&&(x=Ta(r),M+=x*x),e>1&&b===0&&(b=Ta(r),M+=b*b),e>2&&T===0&&(T=Ta(r),M+=T*T),M<a&&(M=Math.sqrt(a*M)));do p.data!==t&&(w=o[p.data.index]*i/M,t.vx+=x*w,e>1&&(t.vy+=b*w),e>2&&(t.vz+=T*w));while(p=p.next)}return u.initialize=function(p,...y){n=p,r=y.find(g=>typeof g=="function")||Math.random,e=y.find(g=>[1,2,3].includes(g))||2,h()},u.strength=function(p){return arguments.length?(s=typeof p=="function"?p:za(+p),h(),u):s},u.distanceMin=function(p){return arguments.length?(a=p*p,u):Math.sqrt(a)},u.distanceMax=function(p){return arguments.length?(l=p*p,u):Math.sqrt(l)},u.theta=function(p){return arguments.length?(c=p*p,u):Math.sqrt(c)},u}function H0e(n,e,t,r){var i,s,o=za(.1),a,l;typeof n!="function"&&(n=za(+n)),e==null&&(e=0),t==null&&(t=0),r==null&&(r=0);function c(h){for(var d=0,f=i.length;d<f;++d){var p=i[d],y=p.x-e||1e-6,g=(p.y||0)-t||1e-6,m=(p.z||0)-r||1e-6,_=Math.sqrt(y*y+g*g+m*m),v=(l[d]-_)*a[d]*h/_;p.vx+=y*v,s>1&&(p.vy+=g*v),s>2&&(p.vz+=m*v)}}function u(){if(i){var h,d=i.length;for(a=new Array(d),l=new Array(d),h=0;h<d;++h)l[h]=+n(i[h],h,i),a[h]=isNaN(l[h])?0:+o(i[h],h,i)}}return c.initialize=function(h,...d){i=h,s=d.find(f=>[1,2,3].includes(f))||2,u()},c.strength=function(h){return arguments.length?(o=typeof h=="function"?h:za(+h),u(),c):o},c.radius=function(h){return arguments.length?(n=typeof h=="function"?h:za(+h),u(),c):n},c.x=function(h){return arguments.length?(e=+h,c):e},c.y=function(h){return arguments.length?(t=+h,c):t},c.z=function(h){return arguments.length?(r=+h,c):r},c}var WP=function(e){j0e(e);var t=W0e(e);return e.on=t.on,e.off=t.off,e.fire=t.fire,e};function W0e(n){var e=Object.create(null);return{on:function(t,r,i){if(typeof r!="function")throw new Error("callback is expected to be a function");var s=e[t];return s||(s=e[t]=[]),s.push({callback:r,ctx:i}),n},off:function(t,r){var i=typeof t>"u";if(i)return e=Object.create(null),n;if(e[t]){var s=typeof r!="function";if(s)delete e[t];else for(var o=e[t],a=0;a<o.length;++a)o[a].callback===r&&o.splice(a,1)}return n},fire:function(t){var r=e[t];if(!r)return n;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var s=0;s<r.length;++s){var o=r[s];o.callback.apply(o.ctx,i)}return n}}}function j0e(n){if(!n)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],t=0;t<e.length;++t)if(n.hasOwnProperty(e[t]))throw new Error("Subject cannot be eventified, since it already has property '"+e[t]+"'")}var q0e=K0e,X0e=WP;function K0e(n){if(n=n||{},"uniqueLinkId"in n&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),n.multigraph=n.uniqueLinkId),n.multigraph===void 0&&(n.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,t=new Map,r={},i=0,s=n.multigraph?x:v,o=[],a=D,l=D,c=D,u=D,h={version:20,addNode:y,addLink:_,removeLink:M,removeNode:m,getNode:g,getNodeCount:b,getLinkCount:T,getEdgeCount:T,getLinksCount:T,getNodesCount:b,getLinks:w,forEachNode:j,forEachLinkedNode:O,forEachLink:I,beginUpdate:c,endUpdate:u,clear:E,hasLink:S,hasNode:g,getLink:S};return X0e(h),d(),h;function d(){var z=h.on;h.on=K;function K(){return h.beginUpdate=c=q,h.endUpdate=u=L,a=f,l=p,h.on=z,z.apply(h,arguments)}}function f(z,K){o.push({link:z,changeType:K})}function p(z,K){o.push({node:z,changeType:K})}function y(z,K){if(z===void 0)throw new Error("Invalid node identifier");c();var U=g(z);return U?(U.data=K,l(U,"update")):(U=new Y0e(z,K),l(U,"add")),e.set(z,U),u(),U}function g(z){return e.get(z)}function m(z){var K=g(z);if(!K)return!1;c();var U=K.links;return U&&(U.forEach(A),K.links=null),e.delete(z),l(K,"remove"),u(),!0}function _(z,K,U){c();var te=g(z)||y(z),k=g(K)||y(K),V=s(z,K,U),Q=t.has(V.id);return t.set(V.id,V),BO(te,V),z!==K&&BO(k,V),a(V,Q?"update":"add"),u(),V}function v(z,K,U){var te=q0(z,K),k=t.get(te);return k?(k.data=U,k):new zO(z,K,U,te)}function x(z,K,U){var te=q0(z,K),k=r.hasOwnProperty(te);if(k||S(z,K)){k||(r[te]=0);var V="@"+ ++r[te];te=q0(z+V,K+V)}return new zO(z,K,U,te)}function b(){return e.size}function T(){return t.size}function w(z){var K=g(z);return K?K.links:null}function M(z,K){return K!==void 0&&(z=S(z,K)),A(z)}function A(z){if(!z||!t.get(z.id))return!1;c(),t.delete(z.id);var K=g(z.fromId),U=g(z.toId);return K&&K.links.delete(z),U&&U.links.delete(z),a(z,"remove"),u(),!0}function S(z,K){if(!(z===void 0||K===void 0))return t.get(q0(z,K))}function E(){c(),j(function(z){m(z.id)}),u()}function I(z){if(typeof z=="function")for(var K=t.values(),U=K.next();!U.done;){if(z(U.value))return!0;U=K.next()}}function O(z,K,U){var te=g(z);if(te&&te.links&&typeof K=="function")return U?R(te.links,z,K):N(te.links,z,K)}function N(z,K,U){for(var te,k=z.values(),V=k.next();!V.done;){var Q=V.value,le=Q.fromId===K?Q.toId:Q.fromId;if(te=U(e.get(le),Q),te)return!0;V=k.next()}}function R(z,K,U){for(var te,k=z.values(),V=k.next();!V.done;){var Q=V.value;if(Q.fromId===K&&(te=U(e.get(Q.toId),Q),te))return!0;V=k.next()}}function D(){}function q(){i+=1}function L(){i-=1,i===0&&o.length>0&&(h.fire("changed",o),o.length=0)}function j(z){if(typeof z!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+z);for(var K=e.values(),U=K.next();!U.done;){if(z(U.value))return!0;U=K.next()}}}function Y0e(n,e){this.id=n,this.links=null,this.data=e}function BO(n,e){n.links?n.links.add(e):n.links=new Set([e])}function zO(n,e,t,r){this.fromId=n,this.toId=e,this.data=t,this.id=r}function q0(n,e){return n.toString()+"👉 "+e.toString()}const Z0e=Xf(q0e);var jP={exports:{}},Ty={exports:{}},OG=function(e){return e===0?"x":e===1?"y":e===2?"z":"c"+(e+1)};const Q0e=OG;var ap=function(e){return t;function t(r,i){let s=i&&i.indent||0,o=i&&i.join!==void 0?i.join:`
`,a=Array(s+1).join(" "),l=[];for(let c=0;c<e;++c){let u=Q0e(c),h=c===0?"":a;l.push(h+r.replace(/{var}/g,u))}return l.join(o)}};const kG=ap;Ty.exports=J0e;Ty.exports.generateCreateBodyFunctionBody=UG;Ty.exports.getVectorCode=zG;Ty.exports.getBodyCode=BG;function J0e(n,e){let t=UG(n,e),{Body:r}=new Function(t)();return r}function UG(n,e){return`
${zG(n,e)}
${BG(n)}
return {Body: Body, Vector: Vector};
`}function BG(n){let e=kG(n),t=e("{var}",{join:", "});return`
function Body(${t}) {
  this.isPinned = false;
  this.pos = new Vector(${t});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${t}) {
  ${e("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function zG(n,e){let t=kG(n),r="";return e&&(r=`${t(`
   var v{var};
Object.defineProperty(this, '{var}', {
  set: function(v) { 
    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
    v{var} = v; 
  },
  get: function() { return v{var}; }
});`)}`),`function Vector(${t("{var}",{join:", "})}) {
  ${r}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${t('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${t("this.{var} = v.{var};",{indent:4})}
    } else {
      ${t('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${t("this.{var} = ",{join:""})}0;
  };`}var eve=Ty.exports,Lc={exports:{}};const qP=ap,Ml=OG;Lc.exports=tve;Lc.exports.generateQuadTreeFunctionBody=$G;Lc.exports.getInsertStackCode=jG;Lc.exports.getQuadNodeCode=WG;Lc.exports.isSamePosition=VG;Lc.exports.getChildBodyCode=HG;Lc.exports.setChildBodyCode=GG;function tve(n){let e=$G(n);return new Function(e)()}function $G(n){let e=qP(n),t=Math.pow(2,n);return`
${jG()}
${WG(n)}
${VG(n)}
${HG(n)}
${GG(n)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${o("      node.")}
      node.body = null;
      node.mass = ${e("node.mass_{var} = ",{join:""})}0;
      ${e("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${e("var d{var};",{indent:4})}
    var r; 
    ${e("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${e("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${e("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${e("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < θ, treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${Ml(0)} - node.min_${Ml(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${e("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${s()}
        }
      }
    }

    ${e("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${e("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${e("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${e("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${e("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${e("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${e("root.min_{var} = {var}min;",{indent:4})}
    ${e("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${e("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${e("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${e("var min_{var} = node.min_{var};",{indent:8})}
        ${e("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${i(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${e("child.min_{var} = min_{var};",{indent:10})}
          ${e("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${e("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${e("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function i(a){let l=[],c=Array(a+1).join(" ");for(let u=0;u<n;++u)l.push(c+`if (${Ml(u)} > max_${Ml(u)}) {`),l.push(c+`  quadIdx = quadIdx + ${Math.pow(2,u)};`),l.push(c+`  min_${Ml(u)} = max_${Ml(u)};`),l.push(c+`  max_${Ml(u)} = node.max_${Ml(u)};`),l.push(c+"}");return l.join(`
`)}function s(){let a=Array(11).join(" "),l=[];for(let c=0;c<t;++c)l.push(a+`if (node.quad${c}) {`),l.push(a+`  queue[pushIdx] = node.quad${c};`),l.push(a+"  queueLength += 1;"),l.push(a+"  pushIdx += 1;"),l.push(a+"}");return l.join(`
`)}function o(a){let l=[];for(let c=0;c<t;++c)l.push(`${a}quad${c} = null;`);return l.join(`
`)}}function VG(n){let e=qP(n);return`
  function isSamePosition(point1, point2) {
    ${e("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${e("d{var} < 1e-8",{join:" && "})};
  }  
`}function GG(n){var e=Math.pow(2,n);return`
function setChild(node, idx, child) {
  ${t()}
}`;function t(){let r=[];for(let i=0;i<e;++i){let s=i===0?"  ":"  else ";r.push(`${s}if (idx === ${i}) node.quad${i} = child;`)}return r.join(`
`)}}function HG(n){return`function getChild(node, idx) {
${e()}
  return null;
}`;function e(){let t=[],r=Math.pow(2,n);for(let i=0;i<r;++i)t.push(`  if (idx === ${i}) return node.quad${i};`);return t.join(`
`)}}function WG(n){let e=qP(n),t=Math.pow(2,n);var r=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${i("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${e("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${e("this.min_{var} = 0;",{indent:2})}
  ${e("this.max_{var} = 0;",{indent:2})}
}
`;return r;function i(s){let o=[];for(let a=0;a<t;++a)o.push(`${s}quad${a} = null;`);return o.join(`
`)}}function jG(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}var nve=Lc.exports,XP={exports:{}};XP.exports=ive;XP.exports.generateFunctionBody=qG;const rve=ap;function ive(n){let e=qG(n);return new Function("bodies","settings","random",e)}function qG(n){let e=rve(n);return`
  var boundingBox = {
    ${e("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${e("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${e("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${e("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${e("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${e("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${e("var max_{var} = -Infinity;",{indent:4})}
    ${e("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${e("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${e("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${e("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${e("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${e("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}var sve=XP.exports,KP={exports:{}};const ove=ap;KP.exports=ave;KP.exports.generateCreateDragForceFunctionBody=XG;function ave(n){let e=XG(n);return new Function("options",e)}function XG(n){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${ove(n)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}var lve=KP.exports,YP={exports:{}};const cve=ap;YP.exports=uve;YP.exports.generateCreateSpringForceFunctionBody=KG;function uve(n){let e=KG(n);return new Function("options","random",e)}function KG(n){let e=cve(n);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${e("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${e("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${e("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}var hve=YP.exports,ZP={exports:{}};const dve=ap;ZP.exports=fve;ZP.exports.generateIntegratorFunctionBody=YG;function fve(n){let e=YG(n);return new Function("bodies","timeStep","adaptiveTimeStepWeight",e)}function YG(n){let e=dve(n);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${e("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${e("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${e("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${e("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${e("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${e("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${e("body.pos.{var} += d{var};",{indent:4})}

    ${e("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${e("t{var} * t{var}",{join:" + "})})/length;
`}var pve=ZP.exports,aT,$O;function mve(){if($O)return aT;$O=1,aT=n;function n(e,t,r,i){this.from=e,this.to=t,this.length=r,this.coefficient=i}return aT}var lT,VO;function gve(){if(VO)return lT;VO=1,lT=n;function n(e,t){var r;if(e||(e={}),t){for(r in t)if(t.hasOwnProperty(r)){var i=e.hasOwnProperty(r),s=typeof t[r],o=!i||typeof e[r]!==s;o?e[r]=t[r]:s==="object"&&(e[r]=n(e[r],t[r]))}}return e}return lT}var qp={exports:{}},GO;function yve(){if(GO)return qp.exports;GO=1,qp.exports=n,qp.exports.random=n,qp.exports.randomIterator=a;function n(l){var c=typeof l=="number"?l:+new Date;return new e(c)}function e(l){this.seed=l}e.prototype.next=o,e.prototype.nextDouble=s,e.prototype.uniform=s,e.prototype.gaussian=t;function t(){var l,c,u;do c=this.nextDouble()*2-1,u=this.nextDouble()*2-1,l=c*c+u*u;while(l>=1||l===0);return c*Math.sqrt(-2*Math.log(l)/l)}e.prototype.levy=r;function r(){var l=1.5,c=Math.pow(i(1+l)*Math.sin(Math.PI*l/2)/(i((1+l)/2)*l*Math.pow(2,(l-1)/2)),1/l);return this.gaussian()*c/Math.pow(Math.abs(this.gaussian()),1/l)}function i(l){return Math.sqrt(2*Math.PI/l)*Math.pow(1/Math.E*(l+1/(12*l-1/(10*l))),l)}function s(){var l=this.seed;return l=l+2127912214+(l<<12)&4294967295,l=(l^3345072700^l>>>19)&4294967295,l=l+374761393+(l<<5)&4294967295,l=(l+3550635116^l<<9)&4294967295,l=l+4251993797+(l<<3)&4294967295,l=(l^3042594569^l>>>16)&4294967295,this.seed=l,(l&268435455)/268435456}function o(l){return Math.floor(this.nextDouble()*l)}function a(l,c){var u=c||n();if(typeof u.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:d,shuffle:h};function h(){var f,p,y;for(f=l.length-1;f>0;--f)p=u.next(f+1),y=l[p],l[p]=l[f],l[f]=y;return l}function d(f){var p,y,g;for(p=l.length-1;p>0;--p)y=u.next(p+1),g=l[y],l[y]=l[p],l[p]=g,f(g);l.length&&f(l[0])}}return qp.exports}var ZG=Tve,vve=eve,_ve=nve,xve=sve,Sve=lve,bve=hve,wve=pve,HO={};function Tve(n){var e=mve(),t=gve(),r=WP;if(n){if(n.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(n.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}n=t(n,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var i=HO[n.dimensions];if(!i){var s=n.dimensions;i={Body:vve(s,n.debug),createQuadTree:_ve(s),createBounds:xve(s),createDragForce:Sve(s),createSpringForce:bve(s),integrate:wve(s)},HO[s]=i}var o=i.Body,a=i.createQuadTree,l=i.createBounds,c=i.createDragForce,u=i.createSpringForce,h=i.integrate,d=R=>new o(R),f=yve().random(42),p=[],y=[],g=a(n,f),m=l(p,n,f),_=u(n,f),v=c(n),x=0,b=[],T=new Map,w=0;S("nbody",O),S("spring",N);var M={bodies:p,quadTree:g,springs:y,settings:n,addForce:S,removeForce:E,getForces:I,step:function(){for(var R=0;R<b.length;++R)b[R](w);var D=h(p,n.timeStep,n.adaptiveTimeStepWeight);return w+=1,D},addBody:function(R){if(!R)throw new Error("Body is required");return p.push(R),R},addBodyAt:function(R){if(!R)throw new Error("Body position is required");var D=d(R);return p.push(D),D},removeBody:function(R){if(R){var D=p.indexOf(R);if(!(D<0))return p.splice(D,1),p.length===0&&m.reset(),!0}},addSpring:function(R,D,q,L){if(!R||!D)throw new Error("Cannot add null spring to force simulator");typeof q!="number"&&(q=-1);var j=new e(R,D,q,L>=0?L:-1);return y.push(j),j},getTotalMovement:function(){return x},removeSpring:function(R){if(R){var D=y.indexOf(R);if(D>-1)return y.splice(D,1),!0}},getBestNewBodyPosition:function(R){return m.getBestNewPosition(R)},getBBox:A,getBoundingBox:A,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(R){return R!==void 0?(n.gravity=R,g.options({gravity:R}),this):n.gravity},theta:function(R){return R!==void 0?(n.theta=R,g.options({theta:R}),this):n.theta},random:f};return Mve(n,M),r(M),M;function A(){return m.update(),m.box}function S(R,D){if(T.has(R))throw new Error("Force "+R+" is already added");T.set(R,D),b.push(D)}function E(R){var D=b.indexOf(T.get(R));D<0||(b.splice(D,1),T.delete(R))}function I(){return T}function O(){if(p.length!==0){g.insertBodies(p);for(var R=p.length;R--;){var D=p[R];D.isPinned||(D.reset(),g.updateBodyForce(D),v.update(D))}}}function N(){for(var R=y.length;R--;)_.update(y[R])}}function Mve(n,e){for(var t in n)Eve(n,e,t)}function Eve(n,e,t){if(n.hasOwnProperty(t)&&typeof e[t]!="function"){var r=Number.isFinite(n[t]);r?e[t]=function(i){if(i!==void 0){if(!Number.isFinite(i))throw new Error("Value of "+t+" should be a valid number.");return n[t]=i,e}return n[t]}:e[t]=function(i){return i!==void 0?(n[t]=i,e):n[t]}}}jP.exports=Ave;jP.exports.simulator=ZG;var Cve=WP;function Ave(n,e){if(!n)throw new Error("Graph structure cannot be undefined");var t=e&&e.createSimulator||ZG,r=t(e);if(Array.isArray(e))throw new Error("Physics settings is expected to be an object");var i=n.version>19?O:I;e&&typeof e.nodeMass=="function"&&(i=e.nodeMass);var s=new Map,o={},a=0,l=r.settings.springTransform||Rve;v(),g();var c=!1,u={step:function(){if(a===0)return h(!0),!0;var N=r.step();u.lastMove=N,u.fire("step");var R=N/a,D=R<=.01;return h(D),D},getNodePosition:function(N){return E(N).pos},setNodePosition:function(N){var R=E(N);R.setPosition.apply(R,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(N){var R=o[N];if(R)return{from:R.from.pos,to:R.to.pos}},getGraphRect:function(){return r.getBBox()},forEachBody:d,pinNode:function(N,R){var D=E(N.id);D.isPinned=!!R},isNodePinned:function(N){return E(N.id).isPinned},dispose:function(){n.off("changed",_),u.fire("disposed")},getBody:y,getSpring:p,getForceVectorLength:f,simulator:r,graph:n,lastMove:0};return Cve(u),u;function h(N){c!==N&&(c=N,m(N))}function d(N){s.forEach(N)}function f(){var N=0,R=0;return d(function(D){N+=Math.abs(D.force.x),R+=Math.abs(D.force.y)}),Math.sqrt(N*N+R*R)}function p(N,R){var D;if(R===void 0)typeof N!="object"?D=N:D=N.id;else{var q=n.hasLink(N,R);if(!q)return;D=q.id}return o[D]}function y(N){return s.get(N)}function g(){n.on("changed",_)}function m(N){u.fire("stable",N)}function _(N){for(var R=0;R<N.length;++R){var D=N[R];D.changeType==="add"?(D.node&&x(D.node.id),D.link&&T(D.link)):D.changeType==="remove"&&(D.node&&b(D.node),D.link&&w(D.link))}a=n.getNodesCount()}function v(){a=0,n.forEachNode(function(N){x(N.id),a+=1}),n.forEachLink(T)}function x(N){var R=s.get(N);if(!R){var D=n.getNode(N);if(!D)throw new Error("initBody() was called with unknown node id");var q=D.position;if(!q){var L=M(D);q=r.getBestNewBodyPosition(L)}R=r.addBodyAt(q),R.id=N,s.set(N,R),A(N),S(D)&&(R.isPinned=!0)}}function b(N){var R=N.id,D=s.get(R);D&&(s.delete(R),r.removeBody(D))}function T(N){A(N.fromId),A(N.toId);var R=s.get(N.fromId),D=s.get(N.toId),q=r.addSpring(R,D,N.length);l(N,q),o[N.id]=q}function w(N){var R=o[N.id];if(R){var D=n.getNode(N.fromId),q=n.getNode(N.toId);D&&A(D.id),q&&A(q.id),delete o[N.id],r.removeSpring(R)}}function M(N){var R=[];if(!N.links)return R;for(var D=Math.min(N.links.length,2),q=0;q<D;++q){var L=N.links[q],j=L.fromId!==N.id?s.get(L.fromId):s.get(L.toId);j&&j.pos&&R.push(j)}return R}function A(N){var R=s.get(N);if(R.mass=i(N),Number.isNaN(R.mass))throw new Error("Node mass should be a number")}function S(N){return N&&(N.isPinned||N.data&&N.data.isPinned)}function E(N){var R=s.get(N);return R||(x(N),R=s.get(N)),R}function I(N){var R=n.getLinks(N);return R?1+R.length/3:1}function O(N){var R=n.getLinks(N);return R?1+R.size/3:1}}function Rve(){}var Nve=jP.exports;const Pve=Xf(Nve);function dA(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Ive=typeof global=="object"&&global&&global.Object===Object&&global,Lve=typeof self=="object"&&self&&self.Object===Object&&self,QG=Ive||Lve||Function("return this")(),cT=function(){return QG.Date.now()},Dve=/\s/;function Fve(n){for(var e=n.length;e--&&Dve.test(n.charAt(e)););return e}var Ove=/^\s+/;function kve(n){return n&&n.slice(0,Fve(n)+1).replace(Ove,"")}var Ix=QG.Symbol,JG=Object.prototype,Uve=JG.hasOwnProperty,Bve=JG.toString,Xp=Ix?Ix.toStringTag:void 0;function zve(n){var e=Uve.call(n,Xp),t=n[Xp];try{n[Xp]=void 0;var r=!0}catch{}var i=Bve.call(n);return r&&(e?n[Xp]=t:delete n[Xp]),i}var $ve=Object.prototype,Vve=$ve.toString;function Gve(n){return Vve.call(n)}var Hve="[object Null]",Wve="[object Undefined]",WO=Ix?Ix.toStringTag:void 0;function jve(n){return n==null?n===void 0?Wve:Hve:WO&&WO in Object(n)?zve(n):Gve(n)}function qve(n){return n!=null&&typeof n=="object"}var Xve="[object Symbol]";function Kve(n){return typeof n=="symbol"||qve(n)&&jve(n)==Xve}var jO=NaN,Yve=/^[-+]0x[0-9a-f]+$/i,Zve=/^0b[01]+$/i,Qve=/^0o[0-7]+$/i,Jve=parseInt;function qO(n){if(typeof n=="number")return n;if(Kve(n))return jO;if(dA(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=dA(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=kve(n);var t=Zve.test(n);return t||Qve.test(n)?Jve(n.slice(2),t?2:8):Yve.test(n)?jO:+n}var e_e="Expected a function",t_e=Math.max,n_e=Math.min;function r_e(n,e,t){var r,i,s,o,a,l,c=0,u=!1,h=!1,d=!0;if(typeof n!="function")throw new TypeError(e_e);e=qO(e)||0,dA(t)&&(u=!!t.leading,h="maxWait"in t,s=h?t_e(qO(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function f(T){var w=r,M=i;return r=i=void 0,c=T,o=n.apply(M,w),o}function p(T){return c=T,a=setTimeout(m,e),u?f(T):o}function y(T){var w=T-l,M=T-c,A=e-w;return h?n_e(A,s-M):A}function g(T){var w=T-l,M=T-c;return l===void 0||w>=e||w<0||h&&M>=s}function m(){var T=cT();if(g(T))return _(T);a=setTimeout(m,y(T))}function _(T){return a=void 0,d&&r?f(T):(r=i=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function x(){return a===void 0?o:_(cT())}function b(){var T=cT(),w=g(T);if(r=arguments,i=this,l=T,w){if(a===void 0)return p(l);if(h)return clearTimeout(a),a=setTimeout(m,e),f(l)}return a===void 0&&(a=setTimeout(m,e)),o}return b.cancel=v,b.flush=x,b}function XO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function i_e(n){if(Array.isArray(n))return n}function s_e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function o_e(n,e,t){return Object.defineProperty(n,"prototype",{writable:!1}),n}function a_e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function l_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c_e(n,e){return i_e(n)||a_e(n,e)||u_e(n,e)||l_e()}function u_e(n,e){if(n){if(typeof n=="string")return XO(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?XO(n,e):void 0}}var h_e=o_e(function n(e,t){var r=t.default,i=r===void 0?null:r,s=t.triggerUpdate,o=s===void 0?!0:s,a=t.onChange,l=a===void 0?function(c,u){}:a;s_e(this,n),this.name=e,this.defaultVal=i,this.triggerUpdate=o,this.onChange=l});function QP(n){var e=n.stateInit,t=e===void 0?function(){return{}}:e,r=n.props,i=r===void 0?{}:r,s=n.methods,o=s===void 0?{}:s,a=n.aliases,l=a===void 0?{}:a,c=n.init,u=c===void 0?function(){}:c,h=n.update,d=h===void 0?function(){}:h,f=Object.keys(i).map(function(p){return new h_e(p,i[p])});return function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=Object.assign({},t instanceof Function?t(p):t,{initialised:!1}),g={};function m(x){return _(x,p),v(),m}var _=function(b,T){u.call(m,b,y,T),y.initialised=!0},v=r_e(function(){y.initialised&&(d.call(m,y,g),g={})},1);return f.forEach(function(x){m[x.name]=b(x);function b(T){var w=T.name,M=T.triggerUpdate,A=M===void 0?!1:M,S=T.onChange,E=S===void 0?function(N,R){}:S,I=T.defaultVal,O=I===void 0?null:I;return function(N){var R=y[w];if(!arguments.length)return R;var D=N===void 0?O:N;return y[w]=D,E.call(m,D,y,R),!g.hasOwnProperty(w)&&(g[w]=R),A&&v(),m}}}),Object.keys(o).forEach(function(x){m[x]=function(){for(var b,T=arguments.length,w=new Array(T),M=0;M<T;M++)w[M]=arguments[M];return(b=o[x]).call.apply(b,[m,y].concat(w))}}),Object.entries(l).forEach(function(x){var b=c_e(x,2),T=b[0],w=b[1];return m[T]=m[w]}),m.resetProps=function(){return f.forEach(function(x){m[x.name](x.defaultVal)}),m},m.resetProps(),y._rerender=v,m}}var Wt=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};class KO extends Map{constructor(e,t=p_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(YO(this,e))}has(e){return super.has(YO(this,e))}set(e,t){return super.set(d_e(this,e),t)}delete(e){return super.delete(f_e(this,e))}}function YO({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function d_e({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function f_e({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function p_e(n){return n!==null&&typeof n=="object"?n.valueOf():n}function m_e(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function g_e(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(t>i||t===void 0&&i>=i)&&(t=i)}return t}function fA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function y_e(n){if(Array.isArray(n))return n}function v_e(n){if(Array.isArray(n))return fA(n)}function __e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function x_e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function S_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w_e(n,e){if(n==null)return{};var t,r,i=T_e(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function T_e(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.includes(r))continue;t[r]=n[r]}return t}function M_e(n,e){return y_e(n)||x_e(n,e)||e6(n,e)||S_e()}function E_e(n){return v_e(n)||__e(n)||e6(n)||b_e()}function C_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function A_e(n){var e=C_e(n,"string");return typeof e=="symbol"?e:e+""}function e6(n,e){if(n){if(typeof n=="string")return fA(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?fA(n,e):void 0}}var ZO=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(a){return{keyAccessor:a,isProp:!(a instanceof Function)}}),s=n.reduce(function(a,l){var c=a,u=l;return i.forEach(function(h,d){var f=h.keyAccessor,p=h.isProp,y;if(p){var g=u,m=g[f],_=w_e(g,[f].map(A_e));y=m,u=_}else y=f(u,d);d+1<i.length?(c.hasOwnProperty(y)||(c[y]={}),c=c[y]):t?(c.hasOwnProperty(y)||(c[y]=[]),c[y].push(u)):c[y]=u}),a},{});t instanceof Function&&function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;c===i.length?Object.keys(l).forEach(function(u){return l[u]=t(l[u])}):Object.values(l).forEach(function(u){return a(u,c+1)})}(s);var o=s;return r&&(o=[],function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];c.length===i.length?o.push({keys:c,vals:l}):Object.entries(l).forEach(function(u){var h=M_e(u,2),d=h[0],f=h[1];return a(f,[].concat(E_e(c),[d]))})}(s),e instanceof Array&&e.length===0&&o.length===1&&(o[0].keys=[])),o};function R_e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function QO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function N_e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QO(Object(t),!0).forEach(function(r){t6(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):QO(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function t6(n,e,t){return e=B_e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function P_e(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function I_e(n,e){if(n==null)return{};var t=P_e(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function n6(n,e){return D_e(n)||R_e(n,e)||r6(n,e)||k_e()}function Lx(n){return L_e(n)||F_e(n)||r6(n)||O_e()}function L_e(n){if(Array.isArray(n))return pA(n)}function D_e(n){if(Array.isArray(n))return n}function F_e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function r6(n,e){if(n){if(typeof n=="string")return pA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pA(n,e)}}function pA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function O_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U_e(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function B_e(n){var e=U_e(n,"string");return typeof e=="symbol"?e:String(e)}var z_e=["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"];function $_e(n,e,t){var r={enter:[],update:[],exit:[]};if(t){var o=ZO(n,t,!1),a=ZO(e,t,!1),l=Object.assign({},o,a);Object.entries(l).forEach(function(c){var u=n6(c,2),h=u[0],d=u[1],f=o.hasOwnProperty(h)?a.hasOwnProperty(h)?"update":"exit":"enter";r[f].push(f==="update"?[o[h],a[h]]:d)})}else{var i=new Set(n),s=new Set(e);new Set([].concat(Lx(i),Lx(s))).forEach(function(c){var u=i.has(c)?s.has(c)?"update":"exit":"enter";r[u].push(u==="update"?[c,c]:c)})}return r}function V_e(n,e,t){var r=t.objBindAttr,i=r===void 0?"__obj":r,s=t.dataBindAttr,o=s===void 0?"__data":s,a=t.idAccessor,l=t.purge,c=l===void 0?!1:l,u=function(g){return g.hasOwnProperty(o)},h=e.filter(function(y){return!u(y)}),d=e.filter(u).map(function(y){return y[o]}),f=n,p=c?{enter:f,exit:d,update:[]}:$_e(d,f,a);return p.update=p.update.map(function(y){var g=n6(y,2),m=g[0],_=g[1];return m!==_&&(_[i]=m[i],_[i][o]=_),_}),p.exit=p.exit.concat(h.map(function(y){return t6({},i,y)})),p}function G_e(n,e,t,r,i){var s=i.createObj,o=s===void 0?function(M){return{}}:s,a=i.updateObj,l=a===void 0?function(M,A){}:a,c=i.exitObj,u=c===void 0?function(M){}:c,h=i.objBindAttr,d=h===void 0?"__obj":h,f=i.dataBindAttr,p=f===void 0?"__data":f,y=I_e(i,z_e),g=V_e(n,e,N_e({objBindAttr:d,dataBindAttr:p},y)),m=g.enter,_=g.update,v=g.exit;v.forEach(function(M){var A=M[d];delete M[d],u(A),r(A)});var x=T(m),b=[].concat(Lx(m),Lx(_));w(b),x.forEach(t);function T(M){var A=[];return M.forEach(function(S){var E=o(S);E&&(E[p]=S,S[d]=E,A.push(E))}),A}function w(M){M.forEach(function(A){var S=A[d];S&&(S[p]=A,l(S,A))})}}function H_e(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const JO=Symbol("implicit");function i6(){var n=new KO,e=[],t=[],r=JO;function i(s){let o=n.get(s);if(o===void 0){if(r!==JO)return r;n.set(s,o=e.push(s)-1)}return t[o%t.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new KO;for(const o of s)n.has(o)||n.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(t=Array.from(s),i):t.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return i6(e,t).unknown(r)},H_e.apply(i,arguments),i}function W_e(n){for(var e=n.length/6|0,t=new Array(e),r=0;r<e;)t[r]="#"+n.slice(r*6,++r*6);return t}const j_e=W_e("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function Dx(n){"@babel/helpers - typeof";return Dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dx(n)}var q_e=/^\s+/,X_e=/\s+$/;function st(n,e){if(n=n||"",e=e||{},n instanceof st)return n;if(!(this instanceof st))return new st(n,e);var t=K_e(n);this._originalInput=n,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}st.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,r,i,s,o,a;return t=e.r/255,r=e.g/255,i=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*o+.0722*a},setAlpha:function(e){return this._a=s6(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=tk(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=tk(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+i+"%)":"hsva("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=ek(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=ek(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+i+"%)":"hsla("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return nk(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return J_e(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Pn(this._r,255)*100)+"%",g:Math.round(Pn(this._g,255)*100)+"%",b:Math.round(Pn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Pn(this._r,255)*100)+"%, "+Math.round(Pn(this._g,255)*100)+"%, "+Math.round(Pn(this._b,255)*100)+"%)":"rgba("+Math.round(Pn(this._r,255)*100)+"%, "+Math.round(Pn(this._g,255)*100)+"%, "+Math.round(Pn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:hxe[nk(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+rk(this._r,this._g,this._b,this._a),r=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=st(e);r="#"+rk(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0,s=!t&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return st(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(rxe,arguments)},brighten:function(){return this._applyModification(ixe,arguments)},darken:function(){return this._applyModification(sxe,arguments)},desaturate:function(){return this._applyModification(exe,arguments)},saturate:function(){return this._applyModification(txe,arguments)},greyscale:function(){return this._applyModification(nxe,arguments)},spin:function(){return this._applyModification(oxe,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(cxe,arguments)},complement:function(){return this._applyCombination(axe,arguments)},monochromatic:function(){return this._applyCombination(uxe,arguments)},splitcomplement:function(){return this._applyCombination(lxe,arguments)},triad:function(){return this._applyCombination(ik,[3])},tetrad:function(){return this._applyCombination(ik,[4])}};st.fromRatio=function(n,e){if(Dx(n)=="object"){var t={};for(var r in n)n.hasOwnProperty(r)&&(r==="a"?t[r]=n[r]:t[r]=Am(n[r]));n=t}return st(n,e)};function K_e(n){var e={r:0,g:0,b:0},t=1,r=null,i=null,s=null,o=!1,a=!1;return typeof n=="string"&&(n=mxe(n)),Dx(n)=="object"&&(ua(n.r)&&ua(n.g)&&ua(n.b)?(e=Y_e(n.r,n.g,n.b),o=!0,a=String(n.r).substr(-1)==="%"?"prgb":"rgb"):ua(n.h)&&ua(n.s)&&ua(n.v)?(r=Am(n.s),i=Am(n.v),e=Q_e(n.h,r,i),o=!0,a="hsv"):ua(n.h)&&ua(n.s)&&ua(n.l)&&(r=Am(n.s),s=Am(n.l),e=Z_e(n.h,r,s),o=!0,a="hsl"),n.hasOwnProperty("a")&&(t=n.a)),t=s6(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function Y_e(n,e,t){return{r:Pn(n,255)*255,g:Pn(e,255)*255,b:Pn(t,255)*255}}function ek(n,e,t){n=Pn(n,255),e=Pn(e,255),t=Pn(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,o,a=(r+i)/2;if(r==i)s=o=0;else{var l=r-i;switch(o=a>.5?l/(2-r-i):l/(r+i),r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function Z_e(n,e,t){var r,i,s;n=Pn(n,360),e=Pn(e,100),t=Pn(t,100);function o(c,u,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?c+(u-c)*6*h:h<1/2?u:h<2/3?c+(u-c)*(2/3-h)*6:c}if(e===0)r=i=s=t;else{var a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=o(l,a,n+1/3),i=o(l,a,n),s=o(l,a,n-1/3)}return{r:r*255,g:i*255,b:s*255}}function tk(n,e,t){n=Pn(n,255),e=Pn(e,255),t=Pn(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,o,a=r,l=r-i;if(o=r===0?0:l/r,r==i)s=0;else{switch(r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,v:a}}function Q_e(n,e,t){n=Pn(n,360)*6,e=Pn(e,100),t=Pn(t,100);var r=Math.floor(n),i=n-r,s=t*(1-e),o=t*(1-i*e),a=t*(1-(1-i)*e),l=r%6,c=[t,o,s,s,a,t][l],u=[a,t,t,o,s,s][l],h=[s,s,a,t,t,o][l];return{r:c*255,g:u*255,b:h*255}}function nk(n,e,t,r){var i=[fo(Math.round(n).toString(16)),fo(Math.round(e).toString(16)),fo(Math.round(t).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function J_e(n,e,t,r,i){var s=[fo(Math.round(n).toString(16)),fo(Math.round(e).toString(16)),fo(Math.round(t).toString(16)),fo(o6(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function rk(n,e,t,r){var i=[fo(o6(r)),fo(Math.round(n).toString(16)),fo(Math.round(e).toString(16)),fo(Math.round(t).toString(16))];return i.join("")}st.equals=function(n,e){return!n||!e?!1:st(n).toRgbString()==st(e).toRgbString()};st.random=function(){return st.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function exe(n,e){e=e===0?0:e||10;var t=st(n).toHsl();return t.s-=e/100,t.s=Xb(t.s),st(t)}function txe(n,e){e=e===0?0:e||10;var t=st(n).toHsl();return t.s+=e/100,t.s=Xb(t.s),st(t)}function nxe(n){return st(n).desaturate(100)}function rxe(n,e){e=e===0?0:e||10;var t=st(n).toHsl();return t.l+=e/100,t.l=Xb(t.l),st(t)}function ixe(n,e){e=e===0?0:e||10;var t=st(n).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),st(t)}function sxe(n,e){e=e===0?0:e||10;var t=st(n).toHsl();return t.l-=e/100,t.l=Xb(t.l),st(t)}function oxe(n,e){var t=st(n).toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,st(t)}function axe(n){var e=st(n).toHsl();return e.h=(e.h+180)%360,st(e)}function ik(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=st(n).toHsl(),r=[st(n)],i=360/e,s=1;s<e;s++)r.push(st({h:(t.h+s*i)%360,s:t.s,l:t.l}));return r}function lxe(n){var e=st(n).toHsl(),t=e.h;return[st(n),st({h:(t+72)%360,s:e.s,l:e.l}),st({h:(t+216)%360,s:e.s,l:e.l})]}function cxe(n,e,t){e=e||6,t=t||30;var r=st(n).toHsl(),i=360/t,s=[st(n)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(st(r));return s}function uxe(n,e){e=e||6;for(var t=st(n).toHsv(),r=t.h,i=t.s,s=t.v,o=[],a=1/e;e--;)o.push(st({h:r,s:i,v:s})),s=(s+a)%1;return o}st.mix=function(n,e,t){t=t===0?0:t||50;var r=st(n).toRgb(),i=st(e).toRgb(),s=t/100,o={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return st(o)};st.readability=function(n,e){var t=st(n),r=st(e);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)};st.isReadable=function(n,e,t){var r=st.readability(n,e),i,s;switch(s=!1,i=gxe(t),i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};st.mostReadable=function(n,e,t){var r=null,i=0,s,o,a,l;t=t||{},o=t.includeFallbackColors,a=t.level,l=t.size;for(var c=0;c<e.length;c++)s=st.readability(n,e[c]),s>i&&(i=s,r=st(e[c]));return st.isReadable(n,r,{level:a,size:l})||!o?r:(t.includeFallbackColors=!1,st.mostReadable(n,["#fff","#000"],t))};var mA=st.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hxe=st.hexNames=dxe(mA);function dxe(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function s6(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Pn(n,e){fxe(n)&&(n="100%");var t=pxe(n);return n=Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function Xb(n){return Math.min(1,Math.max(0,n))}function Ji(n){return parseInt(n,16)}function fxe(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function pxe(n){return typeof n=="string"&&n.indexOf("%")!=-1}function fo(n){return n.length==1?"0"+n:""+n}function Am(n){return n<=1&&(n=n*100+"%"),n}function o6(n){return Math.round(parseFloat(n)*255).toString(16)}function sk(n){return Ji(n)/255}var eo=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+n+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ua(n){return!!eo.CSS_UNIT.exec(n)}function mxe(n){n=n.replace(q_e,"").replace(X_e,"").toLowerCase();var e=!1;if(mA[n])n=mA[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=eo.rgb.exec(n))?{r:t[1],g:t[2],b:t[3]}:(t=eo.rgba.exec(n))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=eo.hsl.exec(n))?{h:t[1],s:t[2],l:t[3]}:(t=eo.hsla.exec(n))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=eo.hsv.exec(n))?{h:t[1],s:t[2],v:t[3]}:(t=eo.hsva.exec(n))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=eo.hex8.exec(n))?{r:Ji(t[1]),g:Ji(t[2]),b:Ji(t[3]),a:sk(t[4]),format:e?"name":"hex8"}:(t=eo.hex6.exec(n))?{r:Ji(t[1]),g:Ji(t[2]),b:Ji(t[3]),format:e?"name":"hex"}:(t=eo.hex4.exec(n))?{r:Ji(t[1]+""+t[1]),g:Ji(t[2]+""+t[2]),b:Ji(t[3]+""+t[3]),a:sk(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=eo.hex3.exec(n))?{r:Ji(t[1]+""+t[1]),g:Ji(t[2]+""+t[2]),b:Ji(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function gxe(n){var e,t;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),t=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}function gA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function yxe(n){if(Array.isArray(n))return n}function vxe(n){if(Array.isArray(n))return gA(n)}function _xe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function xxe(n,e,t){return e=Fx(e),Pxe(n,e2()?Reflect.construct(e,t||[],Fx(n).constructor):e.apply(n,t))}function Sxe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function bxe(n,e,t){if(e2())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(n.bind.apply(n,r));return i}function wxe(n,e,t){return Object.defineProperty(n,"prototype",{writable:!1}),n}function JP(n,e,t){return(e=Lxe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fx(n){return Fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fx(n)}function Txe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&yA(n,e)}function e2(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e2=function(){return!!n})()}function Mxe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Exe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function Cxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Axe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ok(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function a6(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ok(Object(t),!0).forEach(function(r){JP(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ok(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Rxe(n,e){if(n==null)return{};var t,r,i=Nxe(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Nxe(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.includes(r))continue;t[r]=n[r]}return t}function Pxe(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _xe(n)}function yA(n,e){return yA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},yA(n,e)}function ak(n,e){return yxe(n)||Exe(n,e)||l6(n,e)||Cxe()}function so(n){return vxe(n)||Mxe(n)||l6(n)||Axe()}function Ixe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Lxe(n){var e=Ixe(n,"string");return typeof e=="symbol"?e:e+""}function vA(n){"@babel/helpers - typeof";return vA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vA(n)}function l6(n,e){if(n){if(typeof n=="string")return gA(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?gA(n,e):void 0}}var c6=function(e){e instanceof Array?e.forEach(c6):(e.map&&e.map.dispose(),e.dispose())},u6=function(e){e.geometry&&e.geometry.dispose(),e.material&&c6(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(u6)},_A=function(e){for(;e.children.length;){var t=e.children[0];e.remove(t),u6(t)}},Dxe=["objFilter"];function Kp(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=t.objFilter,i=r===void 0?function(){return!0}:r,s=Rxe(t,Dxe);return G_e(n,e.children.filter(i),function(o){return e.add(o)},function(o){e.remove(o),_A(o)},a6({objBindAttr:"__threeObj"},s))}var Yp=function(e){return isNaN(e)?parseInt(st(e).toHex(),16):e},uT=function(e){return isNaN(e)?st(e).getAlpha():1},Fxe=i6(j_e);function lk(n,e,t){!e||typeof t!="string"||n.filter(function(r){return!r[t]}).forEach(function(r){r[t]=Fxe(e(r))})}function Oxe(n,e){var t=n.nodes,r=n.links,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.nodeFilter,o=s===void 0?function(){return!0}:s,a=i.onLoopError,l=a===void 0?function(f){throw"Invalid DAG structure! Found cycle in node path: ".concat(f.join(" -> "),".")}:a,c={};t.forEach(function(f){return c[e(f)]={data:f,out:[],depth:-1,skip:!o(f)}}),r.forEach(function(f){var p=f.source,y=f.target,g=x(p),m=x(y);if(!c.hasOwnProperty(g))throw"Missing source node with id: ".concat(g);if(!c.hasOwnProperty(m))throw"Missing target node with id: ".concat(m);var _=c[g],v=c[m];_.out.push(v);function x(b){return vA(b)==="object"?e(b):b}});var u=[];d(Object.values(c));var h=Object.assign.apply(Object,[{}].concat(so(Object.entries(c).filter(function(f){var p=ak(f,2),y=p[1];return!y.skip}).map(function(f){var p=ak(f,2),y=p[0],g=p[1];return JP({},y,g.depth)}))));return h;function d(f){for(var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,g=function(){var x=f[m];if(p.indexOf(x)!==-1){var b=[].concat(so(p.slice(p.indexOf(x))),[x]).map(function(T){return e(T.data)});return u.some(function(T){return T.length===b.length&&T.every(function(w,M){return w===b[M]})})||(u.push(b),l(b)),1}y>x.depth&&(x.depth=y,d(x.out,[].concat(so(p),[x]),y+(x.skip?0:1)))},m=0,_=f.length;m<_;m++)g()}}var ft=window.THREE?window.THREE:{Group:wd,Mesh:Is,MeshLambertMaterial:Vge,Color:Ot,BufferGeometry:Gs,BufferAttribute:Ds,Matrix4:_n,Vector3:X,SphereGeometry:hG,CylinderGeometry:Wb,TubeGeometry:zP,ConeGeometry:BP,Line:Ege,LineBasicMaterial:lG,QuadraticBezierCurve3:UP,CubicBezierCurve3:uG,Box3:sh},ck={graph:Z0e,forcelayout:Pve},kxe=2,uk=new ft.BufferGeometry().setAttribute?"setAttribute":"addAttribute",X0=new ft.BufferGeometry().applyMatrix4?"applyMatrix4":"applyMatrix",Uxe=QP({props:{jsonUrl:{onChange:function(e,t){var r=this;e&&!t.fetchingJson&&(t.fetchingJson=!0,t.onLoading(),fetch(e).then(function(i){return i.json()}).then(function(i){t.fetchingJson=!1,t.onFinishLoading(i),r.graphData(i)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,t){t.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,t){var r=t.d3ForceLayout.force("charge");r&&r.strength(e>2?-60:-30),e<3&&i(t.graphData.nodes,"z"),e<2&&i(t.graphData.nodes,"y");function i(s,o){s.forEach(function(a){delete a[o],delete a["v".concat(o)]})}}},dagMode:{onChange:function(e,t){!e&&t.forceEngine==="d3"&&(t.graphData.nodes||[]).forEach(function(r){return r.fx=r.fy=r.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,t,r){return r===void 0?e.d3ForceLayout.force(t):(e.d3ForceLayout.force(t,r),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var t=e.forceEngine!=="ngraph";return e.engineRunning&&r(),i(),s(),this;function r(){++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||t&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[t?"tick":"step"](),e.onEngineTick());var o=Wt(e.nodeThreeObjectExtend);e.graphData.nodes.forEach(function(d){var f=d.__threeObj;if(f){var p=t?d:e.layout.getNodePosition(d[e.nodeId]),y=o(d);(!e.nodePositionUpdate||!e.nodePositionUpdate(y?f.children[0]:f,{x:p.x,y:p.y,z:p.z},d)||y)&&(f.position.x=p.x,f.position.y=p.y||0,f.position.z=p.z||0)}});var a=Wt(e.linkWidth),l=Wt(e.linkCurvature),c=Wt(e.linkCurveRotation),u=Wt(e.linkThreeObjectExtend);e.graphData.links.forEach(function(d){var f=d.__lineObj;if(f){var p=t?d:e.layout.getLinkPosition(e.layout.graph.getLink(d.source,d.target).id),y=p[t?"source":"from"],g=p[t?"target":"to"];if(!(!y||!g||!y.hasOwnProperty("x")||!g.hasOwnProperty("x"))){h(d);var m=u(d);if(!(e.linkPositionUpdate&&e.linkPositionUpdate(m?f.children[1]:f,{start:{x:y.x,y:y.y,z:y.z},end:{x:g.x,y:g.y,z:g.z}},d)&&!m)){var _=30,v=d.__curve,x=f.children.length?f.children[0]:f;if(x.type==="Line"){if(v)x.geometry.setFromPoints(v.getPoints(_));else{var b=x.geometry.getAttribute("position");(!b||!b.array||b.array.length!==6)&&x.geometry[uk]("position",b=new ft.BufferAttribute(new Float32Array(2*3),3)),b.array[0]=y.x,b.array[1]=y.y||0,b.array[2]=y.z||0,b.array[3]=g.x,b.array[4]=g.y||0,b.array[5]=g.z||0,b.needsUpdate=!0}x.geometry.computeBoundingSphere()}else if(x.type==="Mesh")if(v){x.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(x.position.set(0,0,0),x.rotation.set(0,0,0),x.scale.set(1,1,1));var I=Math.ceil(a(d)*10)/10,O=I/2,N=new ft.TubeGeometry(v,_,O,e.linkResolution,!1);x.geometry.dispose(),x.geometry=N}else{if(!x.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var T=Math.ceil(a(d)*10)/10,w=T/2,M=new ft.CylinderGeometry(w,w,1,e.linkResolution,1,!1);M[X0](new ft.Matrix4().makeTranslation(0,1/2,0)),M[X0](new ft.Matrix4().makeRotationX(Math.PI/2)),x.geometry.dispose(),x.geometry=M}var A=new ft.Vector3(y.x,y.y||0,y.z||0),S=new ft.Vector3(g.x,g.y||0,g.z||0),E=A.distanceTo(S);x.position.x=A.x,x.position.y=A.y,x.position.z=A.z,x.scale.z=E,x.parent.localToWorld(S),x.lookAt(S)}}}}});function h(d){var f=t?d:e.layout.getLinkPosition(e.layout.graph.getLink(d.source,d.target).id),p=f[t?"source":"from"],y=f[t?"target":"to"];if(!(!p||!y||!p.hasOwnProperty("x")||!y.hasOwnProperty("x"))){var g=l(d);if(!g)d.__curve=null;else{var m=new ft.Vector3(p.x,p.y||0,p.z||0),_=new ft.Vector3(y.x,y.y||0,y.z||0),v=m.distanceTo(_),x,b=c(d);if(v>0){var T=y.x-p.x,w=y.y-p.y||0,M=new ft.Vector3().subVectors(_,m),A=M.clone().multiplyScalar(g).cross(T!==0||w!==0?new ft.Vector3(0,0,1):new ft.Vector3(0,1,0)).applyAxisAngle(M.normalize(),b).add(new ft.Vector3().addVectors(m,_).divideScalar(2));x=new ft.QuadraticBezierCurve3(m,A,_)}else{var S=g*70,E=-b,I=E+Math.PI/2;x=new ft.CubicBezierCurve3(m,new ft.Vector3(S*Math.cos(I),S*Math.sin(I),0).add(m),new ft.Vector3(S*Math.cos(E),S*Math.sin(E),0).add(m),_)}d.__curve=x}}}}function i(){var o=Wt(e.linkDirectionalArrowRelPos),a=Wt(e.linkDirectionalArrowLength),l=Wt(e.nodeVal);e.graphData.links.forEach(function(c){var u=c.__arrowObj;if(u){var h=t?c:e.layout.getLinkPosition(e.layout.graph.getLink(c.source,c.target).id),d=h[t?"source":"from"],f=h[t?"target":"to"];if(!(!d||!f||!d.hasOwnProperty("x")||!f.hasOwnProperty("x"))){var p=Math.cbrt(Math.max(0,l(d)||1))*e.nodeRelSize,y=Math.cbrt(Math.max(0,l(f)||1))*e.nodeRelSize,g=a(c),m=o(c),_=c.__curve?function(M){return c.__curve.getPoint(M)}:function(M){var A=function(E,I,O,N){return I[E]+(O[E]-I[E])*N||0};return{x:A("x",d,f,M),y:A("y",d,f,M),z:A("z",d,f,M)}},v=c.__curve?c.__curve.getLength():Math.sqrt(["x","y","z"].map(function(M){return Math.pow((f[M]||0)-(d[M]||0),2)}).reduce(function(M,A){return M+A},0)),x=p+g+(v-p-y-g)*m,b=_(x/v),T=_((x-g)/v);["x","y","z"].forEach(function(M){return u.position[M]=T[M]});var w=bxe(ft.Vector3,so(["x","y","z"].map(function(M){return b[M]})));u.parent.localToWorld(w),u.lookAt(w)}}})}function s(){var o=Wt(e.linkDirectionalParticleSpeed);e.graphData.links.forEach(function(a){var l=a.__photonsObj&&a.__photonsObj.children,c=a.__singleHopPhotonsObj&&a.__singleHopPhotonsObj.children;if(!((!c||!c.length)&&(!l||!l.length))){var u=t?a:e.layout.getLinkPosition(e.layout.graph.getLink(a.source,a.target).id),h=u[t?"source":"from"],d=u[t?"target":"to"];if(!(!h||!d||!h.hasOwnProperty("x")||!d.hasOwnProperty("x"))){var f=o(a),p=a.__curve?function(g){return a.__curve.getPoint(g)}:function(g){var m=function(v,x,b,T){return x[v]+(b[v]-x[v])*T||0};return{x:m("x",h,d,g),y:m("y",h,d,g),z:m("z",h,d,g)}},y=[].concat(so(l||[]),so(c||[]));y.forEach(function(g,m){var _=g.parent.__linkThreeObjType==="singleHopPhotons";if(g.hasOwnProperty("__progressRatio")||(g.__progressRatio=_?0:m/l.length),g.__progressRatio+=f,g.__progressRatio>=1)if(!_)g.__progressRatio=g.__progressRatio%1;else{g.parent.remove(g),_A(g);return}var v=g.__progressRatio,x=p(v);["x","y","z"].forEach(function(b){return g.position[b]=x[b]})})}}})}},emitParticle:function(e,t){if(t&&e.graphData.links.includes(t)){if(!t.__singleHopPhotonsObj){var r=new ft.Group;r.__linkThreeObjType="singleHopPhotons",t.__singleHopPhotonsObj=r,e.graphScene.add(r)}var i=Wt(e.linkDirectionalParticleWidth),s=Math.ceil(i(t)*10)/10/2,o=e.linkDirectionalParticleResolution,a=new ft.SphereGeometry(s,o,o),l=Wt(e.linkColor),c=Wt(e.linkDirectionalParticleColor),u=c(t)||l(t)||"#f0f0f0",h=new ft.Color(Yp(u)),d=e.linkOpacity*3,f=new ft.MeshLambertMaterial({color:h,transparent:!0,opacity:d});t.__singleHopPhotonsObj.add(new ft.Mesh(a,f))}return this},getGraphBbox:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if(!e.initialised)return null;var r=function i(s){var o=[];if(s.geometry){s.geometry.computeBoundingBox();var a=new ft.Box3;a.copy(s.geometry.boundingBox).applyMatrix4(s.matrixWorld),o.push(a)}return o.concat.apply(o,so((s.children||[]).filter(function(l){return!l.hasOwnProperty("__graphObjType")||l.__graphObjType==="node"&&t(l.__data)}).map(i)))}(e.graphScene);return r.length?Object.assign.apply(Object,so(["x","y","z"].map(function(i){return JP({},i,[g_e(r,function(s){return s.min[i]}),m_e(r,function(s){return s.max[i]})])}))):null}},stateInit:function(){return{d3ForceLayout:V0e().force("link",C0e()).force("charge",G0e()).force("center",Pye()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,t){t.graphScene=e},update:function(e,t){var r=function(V){return V.some(function(Q){return t.hasOwnProperty(Q)})};if(e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&r(["nodeAutoColorBy","graphData","nodeColor"])&&lk(e.graphData.nodes,Wt(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&r(["linkAutoColorBy","graphData","linkColor"])&&lk(e.graphData.links,Wt(e.linkAutoColorBy),e.linkColor),e._flushObjects||r(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var i=Wt(e.nodeThreeObject),s=Wt(e.nodeThreeObjectExtend),o=Wt(e.nodeVal),a=Wt(e.nodeColor),l=Wt(e.nodeVisibility),c={},u={};Kp(e.graphData.nodes.filter(l),e.graphScene,{purge:e._flushObjects||r(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(V){return V.__graphObjType==="node"},createObj:function(V){var Q=i(V),le=s(V);Q&&e.nodeThreeObject===Q&&(Q=Q.clone());var pe;return Q&&!le?pe=Q:(pe=new ft.Mesh,pe.__graphDefaultObj=!0,Q&&le&&pe.add(Q)),pe.__graphObjType="node",pe},updateObj:function(V,Q){if(V.__graphDefaultObj){var le=o(Q)||1,pe=Math.cbrt(le)*e.nodeRelSize,ue=e.nodeResolution;(!V.geometry.type.match(/^Sphere(Buffer)?Geometry$/)||V.geometry.parameters.radius!==pe||V.geometry.parameters.widthSegments!==ue)&&(c.hasOwnProperty(le)||(c[le]=new ft.SphereGeometry(pe,ue,ue)),V.geometry.dispose(),V.geometry=c[le]);var be=a(Q),Pe=new ft.Color(Yp(be||"#ffffaa")),we=e.nodeOpacity*uT(be);(V.material.type!=="MeshLambertMaterial"||!V.material.color.equals(Pe)||V.material.opacity!==we)&&(u.hasOwnProperty(be)||(u[be]=new ft.MeshLambertMaterial({color:Pe,transparent:!0,opacity:we})),V.material.dispose(),V.material=u[be])}}})}if(e._flushObjects||r(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var h=Wt(e.linkThreeObject),d=Wt(e.linkThreeObjectExtend),f=Wt(e.linkMaterial),p=Wt(e.linkVisibility),y=Wt(e.linkColor),g=Wt(e.linkWidth),m={},_={},v={},x=e.graphData.links.filter(p);if(Kp(x,e.graphScene,{objBindAttr:"__lineObj",purge:e._flushObjects||r(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(V){return V.__graphObjType==="link"},exitObj:function(V){var Q=V.__data&&V.__data.__singleHopPhotonsObj;Q&&(Q.parent.remove(Q),_A(Q),delete V.__data.__singleHopPhotonsObj)},createObj:function(V){var Q=h(V),le=d(V);Q&&e.linkThreeObject===Q&&(Q=Q.clone());var pe;if(!Q||le){var ue=!!g(V);if(ue)pe=new ft.Mesh;else{var be=new ft.BufferGeometry;be[uk]("position",new ft.BufferAttribute(new Float32Array(2*3),3)),pe=new ft.Line(be)}}var Pe;return Q?le?(Pe=new ft.Group,Pe.__graphDefaultObj=!0,Pe.add(pe),Pe.add(Q)):Pe=Q:(Pe=pe,Pe.__graphDefaultObj=!0),Pe.renderOrder=10,Pe.__graphObjType="link",Pe},updateObj:function(V,Q){if(V.__graphDefaultObj){var le=V.children.length?V.children[0]:V,pe=Math.ceil(g(Q)*10)/10,ue=!!pe;if(ue){var be=pe/2,Pe=e.linkResolution;if(!le.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||le.geometry.parameters.radiusTop!==be||le.geometry.parameters.radialSegments!==Pe){if(!m.hasOwnProperty(pe)){var we=new ft.CylinderGeometry(be,be,1,Pe,1,!1);we[X0](new ft.Matrix4().makeTranslation(0,1/2,0)),we[X0](new ft.Matrix4().makeRotationX(Math.PI/2)),m[pe]=we}le.geometry.dispose(),le.geometry=m[pe]}}var G=f(Q);if(G)le.material=G;else{var He=y(Q),$e=new ft.Color(Yp(He||"#f0f0f0")),Ze=e.linkOpacity*uT(He),De=ue?"MeshLambertMaterial":"LineBasicMaterial";if(le.material.type!==De||!le.material.color.equals($e)||le.material.opacity!==Ze){var ot=ue?_:v;ot.hasOwnProperty(He)||(ot[He]=new ft[De]({color:$e,transparent:Ze<1,opacity:Ze,depthWrite:Ze>=1})),le.material.dispose(),le.material=ot[He]}}}}}),e.linkDirectionalArrowLength||t.hasOwnProperty("linkDirectionalArrowLength")){var b=Wt(e.linkDirectionalArrowLength),T=Wt(e.linkDirectionalArrowColor);Kp(x.filter(b),e.graphScene,{objBindAttr:"__arrowObj",objFilter:function(V){return V.__linkThreeObjType==="arrow"},createObj:function(){var V=new ft.Mesh(void 0,new ft.MeshLambertMaterial({transparent:!0}));return V.__linkThreeObjType="arrow",V},updateObj:function(V,Q){var le=b(Q),pe=e.linkDirectionalArrowResolution;if(!V.geometry.type.match(/^Cone(Buffer)?Geometry$/)||V.geometry.parameters.height!==le||V.geometry.parameters.radialSegments!==pe){var ue=new ft.ConeGeometry(le*.25,le,pe);ue.translate(0,le/2,0),ue.rotateX(Math.PI/2),V.geometry.dispose(),V.geometry=ue}var be=T(Q)||y(Q)||"#f0f0f0";V.material.color=new ft.Color(Yp(be)),V.material.opacity=e.linkOpacity*3*uT(be)}})}if(e.linkDirectionalParticles||t.hasOwnProperty("linkDirectionalParticles")){var w=Wt(e.linkDirectionalParticles),M=Wt(e.linkDirectionalParticleWidth),A=Wt(e.linkDirectionalParticleColor),S={},E={};Kp(x.filter(w),e.graphScene,{objBindAttr:"__photonsObj",objFilter:function(V){return V.__linkThreeObjType==="photons"},createObj:function(){var V=new ft.Group;return V.__linkThreeObjType="photons",V},updateObj:function(V,Q){var le=Math.round(Math.abs(w(Q))),pe=!!V.children.length&&V.children[0],ue=Math.ceil(M(Q)*10)/10/2,be=e.linkDirectionalParticleResolution,Pe;pe&&pe.geometry.parameters.radius===ue&&pe.geometry.parameters.widthSegments===be?Pe=pe.geometry:(E.hasOwnProperty(ue)||(E[ue]=new ft.SphereGeometry(ue,be,be)),Pe=E[ue],pe&&pe.geometry.dispose());var we=A(Q)||y(Q)||"#f0f0f0",G=new ft.Color(Yp(we)),He=e.linkOpacity*3,$e;pe&&pe.material.color.equals(G)&&pe.material.opacity===He?$e=pe.material:(S.hasOwnProperty(we)||(S[we]=new ft.MeshLambertMaterial({color:G,transparent:!0,opacity:He})),$e=S[we],pe&&pe.material.dispose()),Kp(so(new Array(le)).map(function(Ze,De){return{idx:De}}),V,{idAccessor:function(De){return De.idx},createObj:function(){return new ft.Mesh(Pe,$e)},updateObj:function(De){De.geometry=Pe,De.material=$e}})}})}}if(e._flushObjects=!1,r(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach(function(k){k.source=k[e.linkSource],k.target=k[e.linkTarget]});var I=e.forceEngine!=="ngraph",O;if(I){(O=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var N=e.d3ForceLayout.force("link");N&&N.id(function(k){return k[e.nodeId]}).links(e.graphData.links);var R=e.dagMode&&Oxe(e.graphData,function(k){return k[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),D=Math.max.apply(Math,so(Object.values(R||[]))),q=e.dagLevelDistance||e.graphData.nodes.length/(D||1)*kxe*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu","zin","zout"].includes(t.dagMode)){var L=["lr","rl"].includes(t.dagMode)?"fx":["td","bu"].includes(t.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(k){return delete k[L]})}if(["lr","rl","td","bu","zin","zout"].includes(e.dagMode)){var j=["rl","td","zout"].includes(e.dagMode),z=function(V){return(R[V[e.nodeId]]-D/2)*q*(j?-1:1)},K=["lr","rl"].includes(e.dagMode)?"fx":["td","bu"].includes(e.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(k){return k[K]=z(k)})}e.d3ForceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?H0e(function(k){var V=R[k[e.nodeId]]||-1;return(e.dagMode==="radialin"?D-V:V)*q}).strength(function(k){return e.dagNodeFilter(k)?1:0}):null)}else{var U=ck.graph();e.graphData.nodes.forEach(function(k){U.addNode(k[e.nodeId])}),e.graphData.links.forEach(function(k){U.addLink(k.source,k.target)}),O=ck.forcelayout(U,a6({dimensions:e.numDimensions},e.ngraphPhysics)),O.graph=U}for(var te=0;te<e.warmupTicks&&!(I&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);te++)O[I?"tick":"step"]();e.layout=O,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}});function Bxe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=function(i){function s(){var o;Sxe(this,s);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return o=xxe(this,s,[].concat(l)),o.__kapsuleInstance=n().apply(void 0,[].concat(so(t?[o]:[]),l)),o}return Txe(s,i),wxe(s)}(e);return Object.keys(n()).forEach(function(i){return r.prototype[i]=function(){var s,o=(s=this.__kapsuleInstance)[i].apply(s,arguments);return o===this.__kapsuleInstance?this:o}}),r}var zxe=window.THREE?window.THREE:{Group:wd},h6=Bxe(Uxe,zxe.Group,!0);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Kb="169",$xe=0,Vxe=1,Gxe=2,Hxe=1,K0=3,Bg=0,ul=1,Ox=2,Vf=0,dc=1,kx=2,Ux=3,Bx=4,d6=5,Hl=100,f6=101,p6=102,Wxe=103,jxe=104,m6=200,g6=201,y6=202,v6=203,zx=204,$x=205,_6=206,x6=207,S6=208,b6=209,w6=210,T6=0,M6=1,E6=2,Vx=3,C6=4,A6=5,R6=6,N6=7,Yb=0,qxe=1,Xxe=2,Xd=0,Kxe=1,Yxe=2,Zxe=3,Qxe=4,Jxe=6,eSe=7,P6=300,ju=301,Gf=302,My=303,Ey=304,xA=306,Gx=1e3,Td=1001,Hx=1002,kr=1003,SA=1004,Kd=1005,Ui=1006,bA=1007,qa=1008,$a=1009,Jm=1010,eg=1011,Md=1012,ui=1013,Dr=1014,os=1015,Xa=1016,tSe=1017,nSe=1018,Cy=1020,I6=35902,rSe=1021,t2=1022,lp=1023,iSe=1024,sSe=1025,Pu=1026,Hf=1027,n2=1028,r2=1029,zg=1030,i2=1031,oSe=1032,s2=1033,hT=33776,y_=33777,v_=33778,__=33779,hk=35840,dk=35841,fk=35842,pk=35843,mk=36196,wA=37492,TA=37496,MA=37808,EA=37809,CA=37810,AA=37811,RA=37812,NA=37813,PA=37814,IA=37815,LA=37816,DA=37817,FA=37818,OA=37819,kA=37820,UA=37821,dT=36492,aSe=36283,gk=36284,yk=36285,vk=36286,xc=0,lSe=1,qu="",ht="srgb",Fs="srgb-linear",cSe="display-p3",L6="display-p3-linear",BA="linear",_k="srgb",xk="rec709",Sk="p3",uSe=0,ru=7680,hSe=7681,dSe=7682,fSe=7683,pSe=34055,mSe=34056,gSe=5386,ySe=512,vSe=513,_Se=514,xSe=515,SSe=516,bSe=517,wSe=518,zA=519,D6=512,o2=513,F6=514,O6=515,k6=516,U6=517,B6=518,z6=519,Wx=35044,Ed=35048,po=2e3,Xu=2001;class cp{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Hr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let bk=1234567;const tg=Math.PI/180,$g=180/Math.PI;function Ka(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Hr[n&255]+Hr[n>>8&255]+Hr[n>>16&255]+Hr[n>>24&255]+"-"+Hr[e&255]+Hr[e>>8&255]+"-"+Hr[e>>16&15|64]+Hr[e>>24&255]+"-"+Hr[t&63|128]+Hr[t>>8&255]+"-"+Hr[t>>16&255]+Hr[t>>24&255]+Hr[r&255]+Hr[r>>8&255]+Hr[r>>16&255]+Hr[r>>24&255]).toLowerCase()}function Or(n,e,t){return Math.max(e,Math.min(t,n))}function a2(n,e){return(n%e+e)%e}function TSe(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function MSe(n,e,t){return n!==e?(t-n)/(e-n):0}function ng(n,e,t){return(1-t)*n+t*e}function ESe(n,e,t,r){return ng(n,e,1-Math.exp(-t*r))}function CSe(n,e=1){return e-Math.abs(a2(n,e*2)-e)}function ASe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function RSe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function NSe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function PSe(n,e){return n+Math.random()*(e-n)}function ISe(n){return n*(.5-Math.random())}function LSe(n){n!==void 0&&(bk=n);let e=bk+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function DSe(n){return n*tg}function FSe(n){return n*$g}function OSe(n){return(n&n-1)===0&&n!==0}function kSe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function USe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function BSe(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),h=s((e-r)/2),d=o((e-r)/2),f=s((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*h,l*d,a*c);break;case"YZY":n.set(l*d,a*u,l*h,a*c);break;case"ZXZ":n.set(l*h,l*d,a*u,a*c);break;case"XZX":n.set(a*u,l*p,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*p,a*c);break;case"ZYZ":n.set(l*p,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function di(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function xt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const zSe={DEG2RAD:tg,RAD2DEG:$g,generateUUID:Ka,clamp:Or,euclideanModulo:a2,mapLinear:TSe,inverseLerp:MSe,lerp:ng,damp:ESe,pingpong:CSe,smoothstep:ASe,smootherstep:RSe,randInt:NSe,randFloat:PSe,randFloatSpread:ISe,seededRandom:LSe,degToRad:DSe,radToDeg:FSe,isPowerOfTwo:OSe,ceilPowerOfTwo:kSe,floorPowerOfTwo:USe,setQuaternionFromProperEuler:BSe,normalize:xt,denormalize:di};class zt{constructor(e=0,t=0){zt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Or(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class gs{constructor(e,t,r,i,s,o,a,l,c){gs.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],h=r[7],d=r[2],f=r[5],p=r[8],y=i[0],g=i[3],m=i[6],_=i[1],v=i[4],x=i[7],b=i[2],T=i[5],w=i[8];return s[0]=o*y+a*_+l*b,s[3]=o*g+a*v+l*T,s[6]=o*m+a*x+l*w,s[1]=c*y+u*_+h*b,s[4]=c*g+u*v+h*T,s[7]=c*m+u*x+h*w,s[2]=d*y+f*_+p*b,s[5]=d*g+f*v+p*T,s[8]=d*m+f*x+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*s,f=c*s-o*l,p=t*h+r*d+i*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/p;return e[0]=h*y,e[1]=(i*c-u*r)*y,e[2]=(a*r-i*o)*y,e[3]=d*y,e[4]=(u*t-i*l)*y,e[5]=(i*s-a*t)*y,e[6]=f*y,e[7]=(r*l-c*t)*y,e[8]=(o*t-r*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(fT.makeScale(e,t)),this}rotate(e){return this.premultiply(fT.makeRotation(-e)),this}translate(e,t){return this.premultiply(fT.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const fT=new gs;function $Se(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function $A(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function VSe(){const n=$A("canvas");return n.style.display="block",n}const wk={};function GSe(n){n in wk||(wk[n]=!0,console.warn(n))}const Tk=new gs().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Mk=new gs().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Zp={[Fs]:{transfer:BA,primaries:xk,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n,fromReference:n=>n},[ht]:{transfer:_k,primaries:xk,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[L6]:{transfer:BA,primaries:Sk,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.applyMatrix3(Mk),fromReference:n=>n.applyMatrix3(Tk)},[cSe]:{transfer:_k,primaries:Sk,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.convertSRGBToLinear().applyMatrix3(Mk),fromReference:n=>n.applyMatrix3(Tk).convertLinearToSRGB()}},HSe=new Set([Fs,L6]),es={enabled:!0,_workingColorSpace:Fs,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!HSe.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=Zp[e].toReference,i=Zp[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Zp[n].primaries},getTransfer:function(n){return n===qu?BA:Zp[n].transfer},getLuminanceCoefficients:function(n,e=this._workingColorSpace){return n.fromArray(Zp[e].luminanceCoefficients)}};function Yd(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function pT(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Bh;class WSe{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Bh===void 0&&(Bh=$A("canvas")),Bh.width=e.width,Bh.height=e.height;const r=Bh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Bh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=$A("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Yd(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Yd(t[r]/255)*255):t[r]=Yd(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let jSe=0;class $6{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:jSe++}),this.uuid=Ka(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(mT(i[o].image)):s.push(mT(i[o]))}else s=mT(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function mT(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?WSe.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let qSe=0;class mi extends cp{constructor(e=mi.DEFAULT_IMAGE,t=mi.DEFAULT_MAPPING,r=Td,i=Td,s=Ui,o=qa,a=lp,l=$a,c=mi.DEFAULT_ANISOTROPY,u=qu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:qSe++}),this.uuid=Ka(),this.name="",this.source=new $6(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new zt(0,0),this.repeat=new zt(1,1),this.center=new zt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gs,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==P6)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Gx:e.x=e.x-Math.floor(e.x);break;case Td:e.x=e.x<0?0:1;break;case Hx:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Gx:e.y=e.y-Math.floor(e.y);break;case Td:e.y=e.y<0?0:1;break;case Hx:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}mi.DEFAULT_IMAGE=null;mi.DEFAULT_MAPPING=P6;mi.DEFAULT_ANISOTROPY=1;class tn{constructor(e=0,t=0,r=0,i=1){tn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],p=l[9],y=l[2],g=l[6],m=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-y)<.01&&Math.abs(p-g)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+y)<.1&&Math.abs(p+g)<.1&&Math.abs(c+f+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(c+1)/2,x=(f+1)/2,b=(m+1)/2,T=(u+d)/4,w=(h+y)/4,M=(p+g)/4;return v>x&&v>b?v<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(v),i=T/r,s=w/r):x>b?x<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(x),r=T/i,s=M/i):b<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(b),r=w/s,i=M/s),this.set(r,i,s,t),this}let _=Math.sqrt((g-p)*(g-p)+(h-y)*(h-y)+(d-u)*(d-u));return Math.abs(_)<.001&&(_=1),this.x=(g-p)/_,this.y=(h-y)/_,this.z=(d-u)/_,this.w=Math.acos((c+f+m-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class up extends cp{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new tn(0,0,e,t),this.scissorTest=!1,this.viewport=new tn(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ui,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new mi(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new $6(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class XSe extends up{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class KSe extends mi{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=kr,this.minFilter=kr,this.wrapR=Td,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Ay{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],h=r[i+3];const d=s[o+0],f=s[o+1],p=s[o+2],y=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=p,e[t+3]=y;return}if(h!==y||l!==d||c!==f||u!==p){let g=1-a;const m=l*d+c*f+u*p+h*y,_=m>=0?1:-1,v=1-m*m;if(v>Number.EPSILON){const b=Math.sqrt(v),T=Math.atan2(b,m*_);g=Math.sin(g*T)/b,a=Math.sin(a*T)/b}const x=a*_;if(l=l*g+d*x,c=c*g+f*x,u=u*g+p*x,h=h*g+y*x,g===1-a){const b=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=b,c*=b,u*=b,h*=b}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],h=s[o],d=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*h+l*f-c*d,e[t+1]=l*p+u*d+c*h-a*f,e[t+2]=c*p+u*f+a*d-l*h,e[t+3]=u*p-a*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),h=a(s/2),d=l(r/2),f=l(i/2),p=l(s/2);switch(o){case"XYZ":this._x=d*u*h+c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h-d*f*p;break;case"YXZ":this._x=d*u*h+c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h+d*f*p;break;case"ZXY":this._x=d*u*h-c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h-d*f*p;break;case"ZYX":this._x=d*u*h-c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h+d*f*p;break;case"YZX":this._x=d*u*h+c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h-d*f*p;break;case"XZY":this._x=d*u*h-c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=r+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-i)*f}else if(r>a&&r>h){const f=2*Math.sqrt(1+r-a-h);this._w=(u-l)/f,this._x=.25*f,this._y=(i+o)/f,this._z=(s+c)/f}else if(a>h){const f=2*Math.sqrt(1+a-r-h);this._w=(s-c)/f,this._x=(i+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-r-a);this._w=(o-i)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Or(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=r*h+this._x*d,this._y=i*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ce{constructor(e=0,t=0,r=0){ce.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Ek.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Ek.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*t-s*i),h=2*(s*r-o*t);return this.x=t+l*c+o*h-a*u,this.y=r+l*u+a*c-s*h,this.z=i+l*h+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return gT.copy(this).projectOnVector(e),this.sub(gT)}reflect(e){return this.sub(gT.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Or(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gT=new ce,Ek=new Ay;class Ry{constructor(e=new ce(1/0,1/0,1/0),t=new ce(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Ks.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Ks.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Ks.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Ks):Ks.fromBufferAttribute(s,o),Ks.applyMatrix4(e.matrixWorld),this.expandByPoint(Ks);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Y0.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),Y0.copy(r.boundingBox)),Y0.applyMatrix4(e.matrixWorld),this.union(Y0)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ks),Ks.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Qp),Z0.subVectors(this.max,Qp),zh.subVectors(e.a,Qp),$h.subVectors(e.b,Qp),Vh.subVectors(e.c,Qp),El.subVectors($h,zh),Cl.subVectors(Vh,$h),Wc.subVectors(zh,Vh);let t=[0,-El.z,El.y,0,-Cl.z,Cl.y,0,-Wc.z,Wc.y,El.z,0,-El.x,Cl.z,0,-Cl.x,Wc.z,0,-Wc.x,-El.y,El.x,0,-Cl.y,Cl.x,0,-Wc.y,Wc.x,0];return!yT(t,zh,$h,Vh,Z0)||(t=[1,0,0,0,1,0,0,0,1],!yT(t,zh,$h,Vh,Z0))?!1:(Q0.crossVectors(El,Cl),t=[Q0.x,Q0.y,Q0.z],yT(t,zh,$h,Vh,Z0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ks).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ks).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ha[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ha[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ha[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ha[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ha[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ha[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ha[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ha[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ha),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ha=[new ce,new ce,new ce,new ce,new ce,new ce,new ce,new ce],Ks=new ce,Y0=new Ry,zh=new ce,$h=new ce,Vh=new ce,El=new ce,Cl=new ce,Wc=new ce,Qp=new ce,Z0=new ce,Q0=new ce,jc=new ce;function yT(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){jc.fromArray(n,s);const a=i.x*Math.abs(jc.x)+i.y*Math.abs(jc.y)+i.z*Math.abs(jc.z),l=e.dot(jc),c=t.dot(jc),u=r.dot(jc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const YSe=new Ry,Jp=new ce,vT=new ce;class l2{constructor(e=new ce,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):YSe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Jp.subVectors(e,this.center);const t=Jp.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Jp,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(vT.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Jp.copy(e.center).add(vT)),this.expandByPoint(Jp.copy(e.center).sub(vT))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const da=new ce,_T=new ce,J0=new ce,Al=new ce,xT=new ce,ev=new ce,ST=new ce;class ZSe{constructor(e=new ce,t=new ce(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,da)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=da.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(da.copy(this.origin).addScaledVector(this.direction,t),da.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){_T.copy(e).add(t).multiplyScalar(.5),J0.copy(t).sub(e).normalize(),Al.copy(this.origin).sub(_T);const s=e.distanceTo(t)*.5,o=-this.direction.dot(J0),a=Al.dot(this.direction),l=-Al.dot(J0),c=Al.lengthSq(),u=Math.abs(1-o*o);let h,d,f,p;if(u>0)if(h=o*l-a,d=o*a-l,p=s*u,h>=0)if(d>=-p)if(d<=p){const y=1/u;h*=y,d*=y,f=h*(h+o*d+2*a)+d*(o*h+d+2*l)+c}else d=s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d=-s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d<=-p?(h=Math.max(0,-(-o*s+a)),d=h>0?-s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c):d<=p?(h=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(h=Math.max(0,-(o*s+a)),d=h>0?s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c);else d=o>0?-s:s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(_T).addScaledVector(J0,d),f}intersectSphere(e,t){da.subVectors(e.center,this.origin);const r=da.dot(this.direction),i=da.dot(da)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(r=(e.min.x-d.x)*c,i=(e.max.x-d.x)*c):(r=(e.max.x-d.x)*c,i=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,da)!==null}intersectTriangle(e,t,r,i,s){xT.subVectors(t,e),ev.subVectors(r,e),ST.crossVectors(xT,ev);let o=this.direction.dot(ST),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Al.subVectors(this.origin,e);const l=a*this.direction.dot(ev.crossVectors(Al,ev));if(l<0)return null;const c=a*this.direction.dot(xT.cross(Al));if(c<0||l+c>o)return null;const u=-a*Al.dot(ST);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zn{constructor(e,t,r,i,s,o,a,l,c,u,h,d,f,p,y,g){zn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,u,h,d,f,p,y,g)}set(e,t,r,i,s,o,a,l,c,u,h,d,f,p,y,g){const m=this.elements;return m[0]=e,m[4]=t,m[8]=r,m[12]=i,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=u,m[10]=h,m[14]=d,m[3]=f,m[7]=p,m[11]=y,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Gh.setFromMatrixColumn(e,0).length(),s=1/Gh.setFromMatrixColumn(e,1).length(),o=1/Gh.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=o*u,f=o*h,p=a*u,y=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+p*c,t[5]=d-y*c,t[9]=-a*l,t[2]=y-d*c,t[6]=p+f*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,p=c*u,y=c*h;t[0]=d+y*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=y+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,p=c*u,y=c*h;t[0]=d-y*a,t[4]=-o*h,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=y-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,f=o*h,p=a*u,y=a*h;t[0]=l*u,t[4]=p*c-f,t[8]=d*c+y,t[1]=l*h,t[5]=y*c+d,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,p=a*l,y=a*c;t[0]=l*u,t[4]=y-d*h,t[8]=p*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*h+p,t[10]=d-y*h}else if(e.order==="XZY"){const d=o*l,f=o*c,p=a*l,y=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+y,t[5]=o*u,t[9]=f*h-p,t[2]=p*h-f,t[6]=a*u,t[10]=y*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(QSe,e,JSe)}lookAt(e,t,r){const i=this.elements;return Ki.subVectors(e,t),Ki.lengthSq()===0&&(Ki.z=1),Ki.normalize(),Rl.crossVectors(r,Ki),Rl.lengthSq()===0&&(Math.abs(r.z)===1?Ki.x+=1e-4:Ki.z+=1e-4,Ki.normalize(),Rl.crossVectors(r,Ki)),Rl.normalize(),tv.crossVectors(Ki,Rl),i[0]=Rl.x,i[4]=tv.x,i[8]=Ki.x,i[1]=Rl.y,i[5]=tv.y,i[9]=Ki.y,i[2]=Rl.z,i[6]=tv.z,i[10]=Ki.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],h=r[5],d=r[9],f=r[13],p=r[2],y=r[6],g=r[10],m=r[14],_=r[3],v=r[7],x=r[11],b=r[15],T=i[0],w=i[4],M=i[8],A=i[12],S=i[1],E=i[5],I=i[9],O=i[13],N=i[2],R=i[6],D=i[10],q=i[14],L=i[3],j=i[7],z=i[11],K=i[15];return s[0]=o*T+a*S+l*N+c*L,s[4]=o*w+a*E+l*R+c*j,s[8]=o*M+a*I+l*D+c*z,s[12]=o*A+a*O+l*q+c*K,s[1]=u*T+h*S+d*N+f*L,s[5]=u*w+h*E+d*R+f*j,s[9]=u*M+h*I+d*D+f*z,s[13]=u*A+h*O+d*q+f*K,s[2]=p*T+y*S+g*N+m*L,s[6]=p*w+y*E+g*R+m*j,s[10]=p*M+y*I+g*D+m*z,s[14]=p*A+y*O+g*q+m*K,s[3]=_*T+v*S+x*N+b*L,s[7]=_*w+v*E+x*R+b*j,s[11]=_*M+v*I+x*D+b*z,s[15]=_*A+v*O+x*q+b*K,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],p=e[3],y=e[7],g=e[11],m=e[15];return p*(+s*l*h-i*c*h-s*a*d+r*c*d+i*a*f-r*l*f)+y*(+t*l*f-t*c*d+s*o*d-i*o*f+i*c*u-s*l*u)+g*(+t*c*h-t*a*f-s*o*h+r*o*f+s*a*u-r*c*u)+m*(-i*a*u-t*l*h+t*a*d+i*o*h-r*o*d+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],y=e[13],g=e[14],m=e[15],_=h*g*c-y*d*c+y*l*f-a*g*f-h*l*m+a*d*m,v=p*d*c-u*g*c-p*l*f+o*g*f+u*l*m-o*d*m,x=u*y*c-p*h*c+p*a*f-o*y*f-u*a*m+o*h*m,b=p*h*l-u*y*l-p*a*d+o*y*d+u*a*g-o*h*g,T=t*_+r*v+i*x+s*b;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/T;return e[0]=_*w,e[1]=(y*d*s-h*g*s-y*i*f+r*g*f+h*i*m-r*d*m)*w,e[2]=(a*g*s-y*l*s+y*i*c-r*g*c-a*i*m+r*l*m)*w,e[3]=(h*l*s-a*d*s-h*i*c+r*d*c+a*i*f-r*l*f)*w,e[4]=v*w,e[5]=(u*g*s-p*d*s+p*i*f-t*g*f-u*i*m+t*d*m)*w,e[6]=(p*l*s-o*g*s-p*i*c+t*g*c+o*i*m-t*l*m)*w,e[7]=(o*d*s-u*l*s+u*i*c-t*d*c-o*i*f+t*l*f)*w,e[8]=x*w,e[9]=(p*h*s-u*y*s-p*r*f+t*y*f+u*r*m-t*h*m)*w,e[10]=(o*y*s-p*a*s+p*r*c-t*y*c-o*r*m+t*a*m)*w,e[11]=(u*a*s-o*h*s-u*r*c+t*h*c+o*r*f-t*a*f)*w,e[12]=b*w,e[13]=(u*y*i-p*h*i+p*r*d-t*y*d-u*r*g+t*h*g)*w,e[14]=(p*a*i-o*y*i-p*r*l+t*y*l+o*r*g-t*a*g)*w,e[15]=(o*h*i-u*a*i+u*r*l-t*h*l-o*r*d+t*a*d)*w,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,d=s*c,f=s*u,p=s*h,y=o*u,g=o*h,m=a*h,_=l*c,v=l*u,x=l*h,b=r.x,T=r.y,w=r.z;return i[0]=(1-(y+m))*b,i[1]=(f+x)*b,i[2]=(p-v)*b,i[3]=0,i[4]=(f-x)*T,i[5]=(1-(d+m))*T,i[6]=(g+_)*T,i[7]=0,i[8]=(p+v)*w,i[9]=(g-_)*w,i[10]=(1-(d+y))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Gh.set(i[0],i[1],i[2]).length();const o=Gh.set(i[4],i[5],i[6]).length(),a=Gh.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ys.copy(this);const c=1/s,u=1/o,h=1/a;return Ys.elements[0]*=c,Ys.elements[1]*=c,Ys.elements[2]*=c,Ys.elements[4]*=u,Ys.elements[5]*=u,Ys.elements[6]*=u,Ys.elements[8]*=h,Ys.elements[9]*=h,Ys.elements[10]*=h,t.setFromRotationMatrix(Ys),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=po){const l=this.elements,c=2*s/(t-e),u=2*s/(r-i),h=(t+e)/(t-e),d=(r+i)/(r-i);let f,p;if(a===po)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===Xu)f=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=po){const l=this.elements,c=1/(t-e),u=1/(r-i),h=1/(o-s),d=(t+e)*c,f=(r+i)*u;let p,y;if(a===po)p=(o+s)*h,y=-2*h;else if(a===Xu)p=s*h,y=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=y,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Gh=new ce,Ys=new zn,QSe=new ce(0,0,0),JSe=new ce(1,1,1),Rl=new ce,tv=new ce,Ki=new ce,Ck=new zn,Ak=new Ay;class Ko{constructor(e=0,t=0,r=0,i=Ko.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],h=i[2],d=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(Or(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Or(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Or(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Or(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Or(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Or(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return Ck.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Ck,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Ak.setFromEuler(this),this.setFromQuaternion(Ak,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ko.DEFAULT_ORDER="XYZ";class ebe{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let tbe=0;const Rk=new ce,Hh=new Ay,fa=new zn,nv=new ce,em=new ce,nbe=new ce,rbe=new Ay,Nk=new ce(1,0,0),Pk=new ce(0,1,0),Ik=new ce(0,0,1),Lk={type:"added"},ibe={type:"removed"},Wh={type:"childadded",child:null},bT={type:"childremoved",child:null};class Cr extends cp{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:tbe++}),this.uuid=Ka(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Cr.DEFAULT_UP.clone();const e=new ce,t=new Ko,r=new Ay,i=new ce(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new zn},normalMatrix:{value:new gs}}),this.matrix=new zn,this.matrixWorld=new zn,this.matrixAutoUpdate=Cr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ebe,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Hh.setFromAxisAngle(e,t),this.quaternion.multiply(Hh),this}rotateOnWorldAxis(e,t){return Hh.setFromAxisAngle(e,t),this.quaternion.premultiply(Hh),this}rotateX(e){return this.rotateOnAxis(Nk,e)}rotateY(e){return this.rotateOnAxis(Pk,e)}rotateZ(e){return this.rotateOnAxis(Ik,e)}translateOnAxis(e,t){return Rk.copy(e).applyQuaternion(this.quaternion),this.position.add(Rk.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Nk,e)}translateY(e){return this.translateOnAxis(Pk,e)}translateZ(e){return this.translateOnAxis(Ik,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(fa.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?nv.copy(e):nv.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),em.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fa.lookAt(em,nv,this.up):fa.lookAt(nv,em,this.up),this.quaternion.setFromRotationMatrix(fa),i&&(fa.extractRotation(i.matrixWorld),Hh.setFromRotationMatrix(fa),this.quaternion.premultiply(Hh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Lk),Wh.child=e,this.dispatchEvent(Wh),Wh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ibe),bT.child=e,this.dispatchEvent(bT),bT.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),fa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),fa.multiply(e.parent.matrixWorld)),e.applyMatrix4(fa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Lk),Wh.child=e,this.dispatchEvent(Wh),Wh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(em,e,nbe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(em,rbe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),p=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),d.length>0&&(r.skeletons=d),f.length>0&&(r.animations=f),p.length>0&&(r.nodes=p)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Cr.DEFAULT_UP=new ce(0,1,0);Cr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Zs=new ce,pa=new ce,wT=new ce,ma=new ce,jh=new ce,qh=new ce,Dk=new ce,TT=new ce,MT=new ce,ET=new ce,CT=new tn,AT=new tn,RT=new tn;class uo{constructor(e=new ce,t=new ce,r=new ce){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Zs.subVectors(e,t),i.cross(Zs);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Zs.subVectors(i,t),pa.subVectors(r,t),wT.subVectors(e,t);const o=Zs.dot(Zs),a=Zs.dot(pa),l=Zs.dot(wT),c=pa.dot(pa),u=pa.dot(wT),h=o*c-a*a;if(h===0)return s.set(0,0,0),null;const d=1/h,f=(c*l-a*u)*d,p=(o*u-a*l)*d;return s.set(1-f-p,p,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,ma)===null?!1:ma.x>=0&&ma.y>=0&&ma.x+ma.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,ma)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ma.x),l.addScaledVector(o,ma.y),l.addScaledVector(a,ma.z),l)}static getInterpolatedAttribute(e,t,r,i,s,o){return CT.setScalar(0),AT.setScalar(0),RT.setScalar(0),CT.fromBufferAttribute(e,t),AT.fromBufferAttribute(e,r),RT.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(CT,s.x),o.addScaledVector(AT,s.y),o.addScaledVector(RT,s.z),o}static isFrontFacing(e,t,r,i){return Zs.subVectors(r,t),pa.subVectors(e,t),Zs.cross(pa).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Zs.subVectors(this.c,this.b),pa.subVectors(this.a,this.b),Zs.cross(pa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return uo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return uo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return uo.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return uo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return uo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;jh.subVectors(i,r),qh.subVectors(s,r),TT.subVectors(e,r);const l=jh.dot(TT),c=qh.dot(TT);if(l<=0&&c<=0)return t.copy(r);MT.subVectors(e,i);const u=jh.dot(MT),h=qh.dot(MT);if(u>=0&&h<=u)return t.copy(i);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(jh,o);ET.subVectors(e,s);const f=jh.dot(ET),p=qh.dot(ET);if(p>=0&&f<=p)return t.copy(s);const y=f*c-l*p;if(y<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(r).addScaledVector(qh,a);const g=u*p-f*h;if(g<=0&&h-u>=0&&f-p>=0)return Dk.subVectors(s,i),a=(h-u)/(h-u+(f-p)),t.copy(i).addScaledVector(Dk,a);const m=1/(g+y+d);return o=y*m,a=d*m,t.copy(r).addScaledVector(jh,o).addScaledVector(qh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const V6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Nl={h:0,s:0,l:0},rv={h:0,s:0,l:0};function NT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class rn{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ht){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,es.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=es.workingColorSpace){return this.r=e,this.g=t,this.b=r,es.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=es.workingColorSpace){if(e=a2(e,1),t=Or(t,0,1),r=Or(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=NT(o,s,e+1/3),this.g=NT(o,s,e),this.b=NT(o,s,e-1/3)}return es.toWorkingColorSpace(this,i),this}setStyle(e,t=ht){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ht){const r=V6[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Yd(e.r),this.g=Yd(e.g),this.b=Yd(e.b),this}copyLinearToSRGB(e){return this.r=pT(e.r),this.g=pT(e.g),this.b=pT(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ht){return es.fromWorkingColorSpace(Wr.copy(this),e),Math.round(Or(Wr.r*255,0,255))*65536+Math.round(Or(Wr.g*255,0,255))*256+Math.round(Or(Wr.b*255,0,255))}getHexString(e=ht){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=es.workingColorSpace){es.fromWorkingColorSpace(Wr.copy(this),t);const r=Wr.r,i=Wr.g,s=Wr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=es.workingColorSpace){return es.fromWorkingColorSpace(Wr.copy(this),t),e.r=Wr.r,e.g=Wr.g,e.b=Wr.b,e}getStyle(e=ht){es.fromWorkingColorSpace(Wr.copy(this),e);const t=Wr.r,r=Wr.g,i=Wr.b;return e!==ht?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Nl),this.setHSL(Nl.h+e,Nl.s+t,Nl.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Nl),e.getHSL(rv);const r=ng(Nl.h,rv.h,t),i=ng(Nl.s,rv.s,t),s=ng(Nl.l,rv.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Wr=new rn;rn.NAMES=V6;let sbe=0;class Bi extends cp{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:sbe++}),this.uuid=Ka(),this.name="",this.type="Material",this.blending=dc,this.side=Bg,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=zx,this.blendDst=$x,this.blendEquation=Hl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new rn(0,0,0),this.blendAlpha=0,this.depthFunc=Vx,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=zA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ru,this.stencilZFail=ru,this.stencilZPass=ru,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==dc&&(r.blending=this.blending),this.side!==Bg&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==zx&&(r.blendSrc=this.blendSrc),this.blendDst!==$x&&(r.blendDst=this.blendDst),this.blendEquation!==Hl&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Vx&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==zA&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ru&&(r.stencilFail=this.stencilFail),this.stencilZFail!==ru&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==ru&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Zb extends Bi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new rn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ko,this.combine=Yb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Pa=obe();function obe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Yi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Or(n,-65504,65504),Pa.floatView[0]=n;const e=Pa.uint32View[0],t=e>>23&511;return Pa.baseTable[t]+((e&8388607)>>Pa.shiftTable[t])}function iv(n){const e=n>>10;return Pa.uint32View[0]=Pa.mantissaTable[Pa.offsetTable[e]+(n&1023)]+Pa.exponentTable[e],Pa.floatView[0]}const er=new ce,sv=new zt;class Os{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Wx,this.updateRanges=[],this.gpuType=os,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)sv.fromBufferAttribute(this,t),sv.applyMatrix3(e),this.setXY(t,sv.x,sv.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)er.fromBufferAttribute(this,t),er.applyMatrix3(e),this.setXYZ(t,er.x,er.y,er.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)er.fromBufferAttribute(this,t),er.applyMatrix4(e),this.setXYZ(t,er.x,er.y,er.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)er.fromBufferAttribute(this,t),er.applyNormalMatrix(e),this.setXYZ(t,er.x,er.y,er.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)er.fromBufferAttribute(this,t),er.transformDirection(e),this.setXYZ(t,er.x,er.y,er.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=di(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=xt(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=di(t,this.array)),t}setX(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=di(t,this.array)),t}setY(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=di(t,this.array)),t}setZ(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=di(t,this.array)),t}setW(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array),i=xt(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array),i=xt(i,this.array),s=xt(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Wx&&(e.usage=this.usage),e}}class G6 extends Os{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class H6 extends Os{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class W6 extends Os{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=iv(this.array[e*this.itemSize]);return this.normalized&&(t=di(t,this.array)),t}setX(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize]=Yi(t),this}getY(e){let t=iv(this.array[e*this.itemSize+1]);return this.normalized&&(t=di(t,this.array)),t}setY(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+1]=Yi(t),this}getZ(e){let t=iv(this.array[e*this.itemSize+2]);return this.normalized&&(t=di(t,this.array)),t}setZ(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+2]=Yi(t),this}getW(e){let t=iv(this.array[e*this.itemSize+3]);return this.normalized&&(t=di(t,this.array)),t}setW(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+3]=Yi(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array)),this.array[e+0]=Yi(t),this.array[e+1]=Yi(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array),i=xt(i,this.array)),this.array[e+0]=Yi(t),this.array[e+1]=Yi(r),this.array[e+2]=Yi(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array),i=xt(i,this.array),s=xt(s,this.array)),this.array[e+0]=Yi(t),this.array[e+1]=Yi(r),this.array[e+2]=Yi(i),this.array[e+3]=Yi(s),this}}class Ya extends Os{constructor(e,t,r){super(new Float32Array(e),t,r)}}let abe=0;const xs=new zn,PT=new Cr,Xh=new ce,Zi=new Ry,tm=new Ry,xr=new ce;class ah extends cp{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:abe++}),this.uuid=Ka(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new($Se(e)?H6:G6)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new gs().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return xs.makeRotationFromQuaternion(e),this.applyMatrix4(xs),this}rotateX(e){return xs.makeRotationX(e),this.applyMatrix4(xs),this}rotateY(e){return xs.makeRotationY(e),this.applyMatrix4(xs),this}rotateZ(e){return xs.makeRotationZ(e),this.applyMatrix4(xs),this}translate(e,t,r){return xs.makeTranslation(e,t,r),this.applyMatrix4(xs),this}scale(e,t,r){return xs.makeScale(e,t,r),this.applyMatrix4(xs),this}lookAt(e){return PT.lookAt(e),PT.updateMatrix(),this.applyMatrix4(PT.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xh).negate(),this.translate(Xh.x,Xh.y,Xh.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ya(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ry);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ce(-1/0,-1/0,-1/0),new ce(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Zi.setFromBufferAttribute(s),this.morphTargetsRelative?(xr.addVectors(this.boundingBox.min,Zi.min),this.boundingBox.expandByPoint(xr),xr.addVectors(this.boundingBox.max,Zi.max),this.boundingBox.expandByPoint(xr)):(this.boundingBox.expandByPoint(Zi.min),this.boundingBox.expandByPoint(Zi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new l2);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ce,1/0);return}if(e){const r=this.boundingSphere.center;if(Zi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];tm.setFromBufferAttribute(a),this.morphTargetsRelative?(xr.addVectors(Zi.min,tm.min),Zi.expandByPoint(xr),xr.addVectors(Zi.max,tm.max),Zi.expandByPoint(xr)):(Zi.expandByPoint(tm.min),Zi.expandByPoint(tm.max))}Zi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)xr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(xr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)xr.fromBufferAttribute(a,c),l&&(Xh.fromBufferAttribute(e,c),xr.add(Xh)),i=Math.max(i,r.distanceToSquared(xr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Os(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let M=0;M<r.count;M++)a[M]=new ce,l[M]=new ce;const c=new ce,u=new ce,h=new ce,d=new zt,f=new zt,p=new zt,y=new ce,g=new ce;function m(M,A,S){c.fromBufferAttribute(r,M),u.fromBufferAttribute(r,A),h.fromBufferAttribute(r,S),d.fromBufferAttribute(s,M),f.fromBufferAttribute(s,A),p.fromBufferAttribute(s,S),u.sub(c),h.sub(c),f.sub(d),p.sub(d);const E=1/(f.x*p.y-p.x*f.y);isFinite(E)&&(y.copy(u).multiplyScalar(p.y).addScaledVector(h,-f.y).multiplyScalar(E),g.copy(h).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(E),a[M].add(y),a[A].add(y),a[S].add(y),l[M].add(g),l[A].add(g),l[S].add(g))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let M=0,A=_.length;M<A;++M){const S=_[M],E=S.start,I=S.count;for(let O=E,N=E+I;O<N;O+=3)m(e.getX(O+0),e.getX(O+1),e.getX(O+2))}const v=new ce,x=new ce,b=new ce,T=new ce;function w(M){b.fromBufferAttribute(i,M),T.copy(b);const A=a[M];v.copy(A),v.sub(b.multiplyScalar(b.dot(A))).normalize(),x.crossVectors(T,A);const E=x.dot(l[M])<0?-1:1;o.setXYZW(M,v.x,v.y,v.z,E)}for(let M=0,A=_.length;M<A;++M){const S=_[M],E=S.start,I=S.count;for(let O=E,N=E+I;O<N;O+=3)w(e.getX(O+0)),w(e.getX(O+1)),w(e.getX(O+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Os(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,f=r.count;d<f;d++)r.setXYZ(d,0,0,0);const i=new ce,s=new ce,o=new ce,a=new ce,l=new ce,c=new ce,u=new ce,h=new ce;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),y=e.getX(d+1),g=e.getX(d+2);i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,y),o.fromBufferAttribute(t,g),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),a.fromBufferAttribute(r,p),l.fromBufferAttribute(r,y),c.fromBufferAttribute(r,g),a.add(u),l.add(u),c.add(u),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(g,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),r.setXYZ(d+0,u.x,u.y,u.z),r.setXYZ(d+1,u.x,u.y,u.z),r.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)xr.fromBufferAttribute(e,t),xr.normalize(),e.setXYZ(t,xr.x,xr.y,xr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,d=new c.constructor(l.length*u);let f=0,p=0;for(let y=0,g=l.length;y<g;y++){a.isInterleavedBufferAttribute?f=l[y]*a.data.stride+a.offset:f=l[y]*u;for(let m=0;m<u;m++)d[p++]=c[f++]}return new Os(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ah,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const d=c[u],f=e(d,r);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h];u.push(f.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Fk=new zn,qc=new ZSe,ov=new l2,Ok=new ce,av=new ce,lv=new ce,cv=new ce,IT=new ce,uv=new ce,kk=new ce,hv=new ce;class Ku extends Cr{constructor(e=new ah,t=new Zb){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){uv.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],h=s[l];u!==0&&(IT.fromBufferAttribute(h,e),o?uv.addScaledVector(IT,u):uv.addScaledVector(IT.sub(t),u))}t.add(uv)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),ov.copy(r.boundingSphere),ov.applyMatrix4(s),qc.copy(e.ray).recast(e.near),!(ov.containsPoint(qc.origin)===!1&&(qc.intersectSphere(ov,Ok)===null||qc.origin.distanceToSquared(Ok)>(e.far-e.near)**2))&&(Fk.copy(s).invert(),qc.copy(e.ray).applyMatrix4(Fk),!(r.boundingBox!==null&&qc.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,qc)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,d=s.groups,f=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,y=d.length;p<y;p++){const g=d[p],m=o[g.materialIndex],_=Math.max(g.start,f.start),v=Math.min(a.count,Math.min(g.start+g.count,f.start+f.count));for(let x=_,b=v;x<b;x+=3){const T=a.getX(x),w=a.getX(x+1),M=a.getX(x+2);i=dv(this,m,e,r,c,u,h,T,w,M),i&&(i.faceIndex=Math.floor(x/3),i.face.materialIndex=g.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),y=Math.min(a.count,f.start+f.count);for(let g=p,m=y;g<m;g+=3){const _=a.getX(g),v=a.getX(g+1),x=a.getX(g+2);i=dv(this,o,e,r,c,u,h,_,v,x),i&&(i.faceIndex=Math.floor(g/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,y=d.length;p<y;p++){const g=d[p],m=o[g.materialIndex],_=Math.max(g.start,f.start),v=Math.min(l.count,Math.min(g.start+g.count,f.start+f.count));for(let x=_,b=v;x<b;x+=3){const T=x,w=x+1,M=x+2;i=dv(this,m,e,r,c,u,h,T,w,M),i&&(i.faceIndex=Math.floor(x/3),i.face.materialIndex=g.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),y=Math.min(l.count,f.start+f.count);for(let g=p,m=y;g<m;g+=3){const _=g,v=g+1,x=g+2;i=dv(this,o,e,r,c,u,h,_,v,x),i&&(i.faceIndex=Math.floor(g/3),t.push(i))}}}}function lbe(n,e,t,r,i,s,o,a){let l;if(e.side===ul?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Bg,a),l===null)return null;hv.copy(a),hv.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(hv);return c<t.near||c>t.far?null:{distance:c,point:hv.clone(),object:n}}function dv(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,av),n.getVertexPosition(l,lv),n.getVertexPosition(c,cv);const u=lbe(n,e,t,r,av,lv,cv,kk);if(u){const h=new ce;uo.getBarycoord(kk,av,lv,cv,h),i&&(u.uv=uo.getInterpolatedAttribute(i,a,l,c,h,new zt)),s&&(u.uv1=uo.getInterpolatedAttribute(s,a,l,c,h,new zt)),o&&(u.normal=uo.getInterpolatedAttribute(o,a,l,c,h,new ce),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new ce,materialIndex:0};uo.getNormal(av,lv,cv,d.normal),u.face=d,u.barycoord=h}return u}class Ny extends ah{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let d=0,f=0;p("z","y","x",-1,-1,r,t,e,o,s,0),p("z","y","x",1,-1,r,t,-e,o,s,1),p("x","z","y",1,1,e,r,t,i,o,2),p("x","z","y",1,-1,e,r,-t,i,o,3),p("x","y","z",1,-1,e,t,r,i,s,4),p("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Ya(c,3)),this.setAttribute("normal",new Ya(u,3)),this.setAttribute("uv",new Ya(h,2));function p(y,g,m,_,v,x,b,T,w,M,A){const S=x/w,E=b/M,I=x/2,O=b/2,N=T/2,R=w+1,D=M+1;let q=0,L=0;const j=new ce;for(let z=0;z<D;z++){const K=z*E-O;for(let U=0;U<R;U++){const te=U*S-I;j[y]=te*_,j[g]=K*v,j[m]=N,c.push(j.x,j.y,j.z),j[y]=0,j[g]=0,j[m]=T>0?1:-1,u.push(j.x,j.y,j.z),h.push(U/w),h.push(1-z/M),q+=1}}for(let z=0;z<M;z++)for(let K=0;K<w;K++){const U=d+K+R*z,te=d+K+R*(z+1),k=d+(K+1)+R*(z+1),V=d+(K+1)+R*z;l.push(U,te,V),l.push(te,k,V),L+=6}a.addGroup(f,L,A),f+=L,d+=q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ny(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function j6(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function cbe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}var ube=`
void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}
`,hbe=`
void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}
`;class dbe extends Bi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=ube,this.fragmentShader=hbe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=j6(e.uniforms),this.uniformsGroups=cbe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class q6 extends Cr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zn,this.projectionMatrix=new zn,this.projectionMatrixInverse=new zn,this.coordinateSystem=po}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Pl=new ce,Uk=new zt,Bk=new zt;class Ma extends q6{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=$g*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(tg*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return $g*2*Math.atan(Math.tan(tg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Pl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Pl.x,Pl.y).multiplyScalar(-e/Pl.z),Pl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Pl.x,Pl.y).multiplyScalar(-e/Pl.z)}getViewSize(e,t){return this.getViewBounds(e,Uk,Bk),t.subVectors(Bk,Uk)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(tg*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Kh=-90,Yh=1;class X6 extends Cr{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Ma(Kh,Yh,e,t);i.layers=this.layers,this.add(i);const s=new Ma(Kh,Yh,e,t);s.layers=this.layers,this.add(s);const o=new Ma(Kh,Yh,e,t);o.layers=this.layers,this.add(o);const a=new Ma(Kh,Yh,e,t);a.layers=this.layers,this.add(a);const l=new Ma(Kh,Yh,e,t);l.layers=this.layers,this.add(l);const c=new Ma(Kh,Yh,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===po)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Xu)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,h=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const y=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=y,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(h,d,f),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class c2 extends mi{constructor(e,t,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:ju,super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class fbe extends XSe{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new c2(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ui}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ny(5,5,5),s=new dbe({name:"CubemapFromEquirect",uniforms:j6(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ul,blending:Vf});s.uniforms.tEquirect.value=t;const o=new Ku(i,s),a=t.minFilter;return t.minFilter===qa&&(t.minFilter=Ui),new X6(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}class K6 extends Cr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ko,this.environmentIntensity=1,this.environmentRotation=new Ko,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Y6{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Wx,this.updateRanges=[],this.version=0,this.uuid=Ka()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ka()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ka()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const si=new ce;class u2{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)si.fromBufferAttribute(this,t),si.applyMatrix4(e),this.setXYZ(t,si.x,si.y,si.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)si.fromBufferAttribute(this,t),si.applyNormalMatrix(e),this.setXYZ(t,si.x,si.y,si.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)si.fromBufferAttribute(this,t),si.transformDirection(e),this.setXYZ(t,si.x,si.y,si.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=di(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=xt(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=di(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=di(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=di(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=di(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array),i=xt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array),i=xt(i,this.array),s=xt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Os(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new u2(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Z6 extends Bi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new rn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class pbe extends mi{constructor(e=null,t=1,r=1,i,s,o,a,l,c=kr,u=kr,h,d){super(null,o,a,l,c,u,i,s,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class mbe extends Os{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const LT=new ce,gbe=new ce,ybe=new gs;class Bl{constructor(e=new ce(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=LT.subVectors(r,t).cross(gbe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(LT),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||ybe.getNormalMatrix(e),i=this.coplanarPoint(LT).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Xc=new l2,fv=new ce;class Q6{constructor(e=new Bl,t=new Bl,r=new Bl,i=new Bl,s=new Bl,o=new Bl){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=po){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],h=i[6],d=i[7],f=i[8],p=i[9],y=i[10],g=i[11],m=i[12],_=i[13],v=i[14],x=i[15];if(r[0].setComponents(l-s,d-c,g-f,x-m).normalize(),r[1].setComponents(l+s,d+c,g+f,x+m).normalize(),r[2].setComponents(l+o,d+u,g+p,x+_).normalize(),r[3].setComponents(l-o,d-u,g-p,x-_).normalize(),r[4].setComponents(l-a,d-h,g-y,x-v).normalize(),t===po)r[5].setComponents(l+a,d+h,g+y,x+v).normalize();else if(t===Xu)r[5].setComponents(a,h,y,v).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Xc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Xc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Xc)}intersectsSprite(e){return Xc.center.set(0,0,0),Xc.radius=.7071067811865476,Xc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Xc)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(fv.x=i.normal.x>0?e.max.x:e.min.x,fv.y=i.normal.y>0?e.max.y:e.min.y,fv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(fv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class h2 extends Bi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new rn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}class J6 extends Bi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new rn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class vbe extends mi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=kr,this.minFilter=kr,this.generateMipmaps=!1,this.needsUpdate=!0}}class Py extends mi{constructor(e,t,r,i,s,o,a,l,c,u=Pu){if(u!==Pu&&u!==Hf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Pu&&(r=Dr),r===void 0&&u===Hf&&(r=Cy),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:kr,this.minFilter=l!==void 0?l:kr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class d2 extends ah{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new ce,d=new ce,f=[],p=[],y=[],g=[];for(let m=0;m<=r;m++){const _=[],v=m/r;let x=0;m===0&&o===0?x=.5/t:m===r&&l===Math.PI&&(x=-.5/t);for(let b=0;b<=t;b++){const T=b/t;h.x=-e*Math.cos(i+T*s)*Math.sin(o+v*a),h.y=e*Math.cos(o+v*a),h.z=e*Math.sin(i+T*s)*Math.sin(o+v*a),p.push(h.x,h.y,h.z),d.copy(h).normalize(),y.push(d.x,d.y,d.z),g.push(T+x,1-v),_.push(c++)}u.push(_)}for(let m=0;m<r;m++)for(let _=0;_<t;_++){const v=u[m][_+1],x=u[m][_],b=u[m+1][_],T=u[m+1][_+1];(m!==0||o>0)&&f.push(v,x,T),(m!==r-1||l<Math.PI)&&f.push(x,b,T)}this.setIndex(f),this.setAttribute("position",new Ya(p,3)),this.setAttribute("normal",new Ya(y,3)),this.setAttribute("uv",new Ya(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new d2(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class eH extends Bi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new rn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class f2 extends Bi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new rn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xc,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ko,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class tH extends f2{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new zt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Or(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new rn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new rn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new rn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class nH extends Bi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new rn(16777215),this.specular=new rn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xc,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ko,this.combine=Yb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rH extends Bi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new rn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xc,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class iH extends Bi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xc,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class sH extends Bi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new rn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xc,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ko,this.combine=Yb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class oH extends Bi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new rn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xc,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class aH extends h2{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}class lh extends Cr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new rn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class _be extends lh{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Cr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new rn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const DT=new zn,zk=new ce,$k=new ce;class p2{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new zt(512,512),this.map=null,this.mapPass=null,this.matrix=new zn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Q6,this._frameExtents=new zt(1,1),this._viewportCount=1,this._viewports=[new tn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;zk.setFromMatrixPosition(e.matrixWorld),t.position.copy(zk),$k.setFromMatrixPosition(e.target.matrixWorld),t.lookAt($k),t.updateMatrixWorld(),DT.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DT),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(DT)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class xbe extends p2{constructor(){super(new Ma(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=$g*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class lH extends lh{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Cr.DEFAULT_UP),this.updateMatrix(),this.target=new Cr,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new xbe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Vk=new zn,nm=new ce,FT=new ce;class Sbe extends p2{constructor(){super(new Ma(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new zt(4,2),this._viewportCount=6,this._viewports=[new tn(2,1,1,1),new tn(0,1,1,1),new tn(3,1,1,1),new tn(1,1,1,1),new tn(3,0,1,1),new tn(1,0,1,1)],this._cubeDirections=[new ce(1,0,0),new ce(-1,0,0),new ce(0,0,1),new ce(0,0,-1),new ce(0,1,0),new ce(0,-1,0)],this._cubeUps=[new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,0,1),new ce(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),nm.setFromMatrixPosition(e.matrixWorld),r.position.copy(nm),FT.copy(r.position),FT.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(FT),r.updateMatrixWorld(),i.makeTranslation(-nm.x,-nm.y,-nm.z),Vk.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Vk)}}class bbe extends lh{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Sbe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class m2 extends q6{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class wbe extends p2{constructor(){super(new m2(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Tbe extends lh{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Cr.DEFAULT_UP),this.updateMatrix(),this.target=new Cr,this.shadow=new wbe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Mbe extends lh{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Ebe extends lh{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Cbe{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ce)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class Abe extends lh{constructor(e=new Cbe,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Rbe extends Y6{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}const Nbe=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveMap","envMap","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"];class Pbe{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=Nbe,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}getRenderObjectData(e){let t=this.renderObjects.get(e);return t===void 0&&(t={material:this.getMaterialData(e.material),worldMatrix:e.object.matrixWorld.clone()},e.object.center&&(t.center=e.object.center.clone()),e.object.morphTargetInfluences&&(t.morphTargetInfluences=e.object.morphTargetInfluences.slice()),e.bundle!==null&&(t.version=e.bundle.version),this.renderObjects.set(e,t)),t}containsNode(e){const t=e.material;for(const r in t)if(t[r]&&t[r].isNode)return!0;return e.renderer.nodes.modelViewMatrix!==null||e.renderer.nodes.modelNormalViewMatrix!==null}getMaterialData(e){const t={};for(const r of this.refreshUniforms){const i=e[r];i!=null&&(typeof i=="object"&&i.clone!==void 0?i.isTexture===!0?t[r]={id:i.id,version:i.version}:t[r]=i.clone():t[r]=i)}return t}equals(e){const{object:t,material:r}=e,i=this.getRenderObjectData(e);if(i.worldMatrix.equals(t.matrixWorld)!==!0)return i.worldMatrix.copy(t.matrixWorld),!1;const s=i.material;for(const o in s){const a=s[o],l=r[o];if(a.equals!==void 0){if(a.equals(l)===!1)return a.copy(l),!1}else if(l.isTexture===!0){if(a.id!==l.id||a.version!==l.version)return a.id=l.id,a.version=l.version,!1}else if(a!==l)return s[o]=l,!1}if(i.morphTargetInfluences){let o=!1;for(let a=0;a<i.morphTargetInfluences.length;a++)i.morphTargetInfluences[a]!==t.morphTargetInfluences[a]&&(o=!0);if(o)return!0}return i.center&&i.center.equals(t.center)===!1?(i.center.copy(t.center),!0):(e.bundle!==null&&(i.version=e.bundle.version),!0)}needsRefresh(e,t){if(this.hasNode||this.hasAnimation||this.firstInitialization(e))return!0;const{renderId:r}=t;if(this.renderId!==r)return this.renderId=r,!0;const i=e.object.static===!0,s=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;return i||s?!1:this.equals(e)!==!0}}function Vg(n,e=0){let t=3735928559^e,r=1103547991^e;if(n instanceof Array)for(let i=0,s;i<n.length;i++)s=n[i],t=Math.imul(t^s,2654435761),r=Math.imul(r^s,1597334677);else for(let i=0,s;i<n.length;i++)s=n.charCodeAt(i),t=Math.imul(t^s,2654435761),r=Math.imul(r^s,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&r)+(t>>>0)}const Ibe=n=>Vg(n),cH=n=>Vg(n),jx=(...n)=>Vg(n);function uH(n,e=!1){const t=[];n.isNode===!0&&(t.push(n.id),n=n.getSelf());for(const{property:r,childNode:i}of qx(n))t.push(t,Vg(r.slice(0,-4)),i.getCacheKey(e));return Vg(t)}function*qx(n,e=!1){for(const t in n){if(t.startsWith("_")===!0)continue;const r=n[t];if(Array.isArray(r)===!0)for(let i=0;i<r.length;i++){const s=r[i];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:i,childNode:s})}else if(r&&r.isNode===!0)yield{property:t,childNode:r};else if(typeof r=="object")for(const i in r){const s=r[i];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:i,childNode:s})}}}function Xx(n){if(n==null)return null;const e=typeof n;return n.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":n.isVector2===!0?"vec2":n.isVector3===!0?"vec3":n.isVector4===!0?"vec4":n.isMatrix3===!0?"mat3":n.isMatrix4===!0?"mat4":n.isColor===!0?"color":n instanceof ArrayBuffer?"ArrayBuffer":null}function hH(n,...e){const t=n?n.slice(-4):void 0;return e.length===1&&(t==="vec2"?e=[e[0],e[0]]:t==="vec3"?e=[e[0],e[0],e[0]]:t==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),n==="color"?new rn(...e):t==="vec2"?new zt(...e):t==="vec3"?new ce(...e):t==="vec4"?new tn(...e):t==="mat3"?new gs(...e):t==="mat4"?new zn(...e):n==="bool"?e[0]||!1:n==="float"||n==="int"||n==="uint"?e[0]||0:n==="string"?e[0]||"":n==="ArrayBuffer"?Dbe(e[0]):null}function Lbe(n){let e="";const t=new Uint8Array(n);for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function Dbe(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0)).buffer}const Gk={VERTEX:"vertex",FRAGMENT:"fragment"},Nt={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},Fbe=["fragment","vertex"],Hk=["setup","analyze","generate"],Wk=[...Fbe,"compute"],hp=["x","y","z","w"];let Obe=0;class wt extends cp{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=Nt.NONE,this.updateBeforeType=Nt.NONE,this.updateAfterType=Nt.NONE,this.uuid=zSe.generateUUID(),this.version=0,this._cacheKey=null,this._cacheKeyVersion=0,this.global=!1,this.isNode=!0,Object.defineProperty(this,"id",{value:Obe++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,Nt.FRAME)}onRenderUpdate(e){return this.onUpdate(e,Nt.RENDER)}onObjectUpdate(e){return this.onUpdate(e,Nt.OBJECT)}onReference(e){return this.updateReference=e.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of qx(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const t of this.getChildren())t.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=uH(this,e),this._cacheKeyVersion=this.version),this._cacheKey}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const t=this.getNodeType(e);return e.getElementType(t)}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){const t=this.getHash(e);return e.getNodeFromHash(t)||this}setup(e){const t=e.getNodeProperties(this);let r=0;for(const i of this.getChildren())t["node"+r++]=i;return null}analyze(e){if(e.increaseUsage(this)===1){const r=e.getNodeProperties(this);for(const i of Object.values(r))i&&i.isNode===!0&&i.build(e)}}generate(e,t){const{outputNode:r}=e.getNodeProperties(this);if(r&&r.isNode===!0)return r.build(e,t)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,t=null){const r=this.getShared(e);if(this!==r)return r.build(e,t);e.addNode(this),e.addChain(this);let i=null;const s=e.getBuildStage();if(s==="setup"){this.updateReference(e);const o=e.getNodeProperties(this);if(o.initialized!==!0){const a=e.stack.nodes.length;o.initialized=!0,o.outputNode=this.setup(e),o.outputNode!==null&&e.stack.nodes.length;for(const l of Object.values(o))l&&l.isNode===!0&&l.build(e)}}else if(s==="analyze")this.analyze(e);else if(s==="generate")if(this.generate.length===1){const a=this.getNodeType(e),l=e.getDataFromNode(this);i=l.snippet,i===void 0?(i=this.generate(e)||"",l.snippet=i):l.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),i=e.format(i,a,t)}else i=this.generate(e,t)||"";return e.removeChain(this),i}getSerializeChildren(){return qx(this)}serialize(e){const t=this.getSerializeChildren(),r={};for(const{property:i,index:s,childNode:o}of t)s!==void 0?(r[i]===void 0&&(r[i]=Number.isInteger(s)?[]:{}),r[i][s]=o.toJSON(e.meta).uuid):r[i]=o.toJSON(e.meta).uuid;Object.keys(r).length>0&&(e.inputNodes=r)}deserialize(e){if(e.inputNodes!==void 0){const t=e.meta.nodes;for(const r in e.inputNodes)if(Array.isArray(e.inputNodes[r])){const i=[];for(const s of e.inputNodes[r])i.push(t[s]);this[r]=i}else if(typeof e.inputNodes[r]=="object"){const i={};for(const s in e.inputNodes[r]){const o=e.inputNodes[r][s];i[s]=t[o]}this[r]=i}else{const i=e.inputNodes[r];this[r]=t[i]}}}toJSON(e){const{uuid:t,type:r}=this,i=e===void 0||typeof e=="string";i&&(e={textures:{},images:{},nodes:{}});let s=e.nodes[t];s===void 0&&(s={uuid:t,type:r,meta:e,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},i!==!0&&(e.nodes[s.uuid]=s),this.serialize(s),delete s.meta);function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}if(i){const a=o(e.textures),l=o(e.images),c=o(e.nodes);a.length>0&&(s.textures=a),l.length>0&&(s.images=l),c.length>0&&(s.nodes=c)}return s}}class Iy extends wt{static get type(){return"ArrayElementNode"}constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const t=this.node.build(e),r=this.indexNode.build(e,"uint");return`${t}[ ${r} ]`}}class dH extends wt{static get type(){return"ConvertNode"}constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let r=null;for(const i of this.convertTo.split("|"))(r===null||e.getTypeLength(t)===e.getTypeLength(i))&&(r=i);return r}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const r=this.node,i=this.getNodeType(e),s=r.build(e,i);return e.format(s,i,t)}}class hr extends wt{static get type(){return"TempNode"}constructor(e){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if(e.getBuildStage()==="generate"){const i=e.getVectorType(this.getNodeType(e,t)),s=e.getDataFromNode(this);if(s.propertyName!==void 0)return e.format(s.propertyName,i,t);if(i!=="void"&&t!=="void"&&this.hasDependencies(e)){const o=super.build(e,i),a=e.getVarFromNode(this,null,i),l=e.getPropertyName(a);return e.addLineFlowCode(`${l} = ${o}`,this),s.snippet=o,s.propertyName=l,e.format(s.propertyName,i,t)}}return super.build(e,t)}}class kbe extends hr{static get type(){return"JoinNode"}constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,r)=>t+e.getTypeLength(r.getNodeType(e)),0))}generate(e,t){const r=this.getNodeType(e),i=this.nodes,s=e.getComponentType(r),o=[];for(const l of i){let c=l.build(e);const u=e.getComponentType(l.getNodeType(e));u!==s&&(c=e.format(c,u,s)),o.push(c)}const a=`${e.getType(r)}( ${o.join(", ")} )`;return e.format(a,r,t)}}const Ube=hp.join("");class jk extends wt{static get type(){return"SplitNode"}constructor(e,t="x"){super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(hp.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,t){const r=this.node,i=e.getTypeLength(r.getNodeType(e));let s=null;if(i>1){let o=null;this.getVectorLength()>=i&&(o=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const l=r.build(e,o);this.components.length===i&&this.components===Ube.slice(0,this.components.length)?s=e.format(l,o,t):s=e.format(`${l}.${this.components}`,this.getNodeType(e),t)}else s=r.build(e,t);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class Bbe extends hr{static get type(){return"SetNode"}constructor(e,t,r){super(),this.sourceNode=e,this.components=t,this.targetNode=r}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:r,targetNode:i}=this,s=this.getNodeType(e),o=e.getTypeFromLength(r.length,i.getNodeType(e)),a=i.build(e,o),l=t.build(e,s),c=e.getTypeLength(s),u=[];for(let h=0;h<c;h++){const d=hp[h];d===r[0]?(u.push(a),h+=r.length-1):u.push(l+"."+d)}return`${e.getType(s)}( ${u.join(", ")} )`}}class zbe extends hr{static get type(){return"FlipNode"}constructor(e,t){super(),this.sourceNode=e,this.components=t}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:t,sourceNode:r}=this,i=this.getNodeType(e),s=r.build(e),o=e.getVarFromNode(this),a=e.getPropertyName(o);e.addLineFlowCode(a+" = "+s,this);const l=e.getTypeLength(i),c=[];let u=0;for(let h=0;h<l;h++){const d=hp[h];d===t[u]?(c.push("1.0 - "+(a+"."+d)),u++):c.push(a+"."+d)}return`${e.getType(i)}( ${c.join(", ")} )`}}class g2 extends wt{static get type(){return"InputNode"}constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?Xx(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=Xx(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=Lbe(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?hH(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}class hl extends g2{static get type(){return"ConstNode"}constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){const r=this.getNodeType(e);return e.format(this.generateConst(e),r,t)}}let Wf=null;const Cd=new Map;function xe(n,e){if(Cd.has(n)){console.warn(`Redefinition of method chaining ${n}`);return}if(typeof e!="function")throw new Error(`Node element ${n} is not a function`);Cd.set(n,e)}const fH=n=>n.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),qk=n=>fH(n).split("").sort().join(""),pH={setup(n,e){const t=e.shift();return n(e1(t),...e)},get(n,e,t){if(typeof e=="string"&&n[e]===void 0){if(n.isStackNode!==!0&&e==="assign")return(...r)=>(Wf.assign(t,...r),t);if(Cd.has(e)){const r=Cd.get(e);return n.isStackNode?(...i)=>t.add(r(...i)):(...i)=>r(t,...i)}else{if(e==="self")return n;if(e.endsWith("Assign")&&Cd.has(e.slice(0,e.length-6))){const r=Cd.get(e.slice(0,e.length-6));return n.isStackNode?(...i)=>t.assign(i[0],r(...i)):(...i)=>t.assign(r(t,...i))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=fH(e),Ue(new jk(t,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=qk(e.slice(3).toLowerCase()),r=>Ue(new Bbe(n,e,r));if(/^flip[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=qk(e.slice(4).toLowerCase()),()=>Ue(new zbe(Ue(n),e));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),Ue(new jk(n,e));if(/^\d+$/.test(e)===!0)return Ue(new Iy(t,new hl(Number(e),"uint")))}}}return Reflect.get(n,e,t)},set(n,e,t,r){return typeof e=="string"&&n[e]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0||e==="width"||e==="height"||e==="depth"||/^\d+$/.test(e)===!0)?(r[e].assign(t),!0):Reflect.set(n,e,t,r)}},OT=new WeakMap,Xk=new WeakMap,$be=function(n,e=null){const t=Xx(n);if(t==="node"){let r=OT.get(n);return r===void 0&&(r=new Proxy(n,pH),OT.set(n,r),OT.set(r,r)),r}else{if(e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string")return Ue(VA(n,e));if(t==="shader")return je(n)}return n},Vbe=function(n,e=null){for(const t in n)n[t]=Ue(n[t],e);return n},Gbe=function(n,e=null){const t=n.length;for(let r=0;r<t;r++)n[r]=Ue(n[r],e);return n},Hbe=function(n,e=null,t=null,r=null){const i=s=>Ue(r!==null?Object.assign(s,r):s);return e===null?(...s)=>i(new n(...Zd(s))):t!==null?(t=Ue(t),(...s)=>i(new n(e,...Zd(s),t))):(...s)=>i(new n(e,...Zd(s)))},Wbe=function(n,...e){return Ue(new n(...Zd(e)))};class jbe extends wt{constructor(e,t){super(),this.shaderNode=e,this.inputNodes=t}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}call(e){const{shaderNode:t,inputNodes:r}=this,i=e.getNodeProperties(t);if(i.onceOutput)return i.onceOutput;let s=null;if(t.layout){let o=Xk.get(e.constructor);o===void 0&&(o=new WeakMap,Xk.set(e.constructor,o));let a=o.get(t);a===void 0&&(a=Ue(e.buildFunctionNode(t)),o.set(t,a)),e.currentFunctionNode!==null&&e.currentFunctionNode.includes.push(a),s=Ue(a.call(r))}else{const o=t.jsFunc,a=r!==null?o(r,e):o(e);s=Ue(a)}return t.once&&(i.onceOutput=s),s}getOutputNode(e){const t=e.getNodeProperties(this);return t.outputNode===null&&(t.outputNode=this.setupOutput(e)),t.outputNode}setup(e){return this.getOutputNode(e)}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,t){return this.getOutputNode(e).build(e,t)}}class qbe extends wt{constructor(e,t){super(t),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return e1(e),Ue(new jbe(this,e))}setup(){return this.call()}}const Xbe=[!1,!0],Kbe=[0,1,2,3],Ybe=[-1,-2],mH=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],y2=new Map;for(const n of Xbe)y2.set(n,new hl(n));const v2=new Map;for(const n of Kbe)v2.set(n,new hl(n,"uint"));const _2=new Map([...v2].map(n=>new hl(n.value,"int")));for(const n of Ybe)_2.set(n,new hl(n,"int"));const Qb=new Map([..._2].map(n=>new hl(n.value)));for(const n of mH)Qb.set(n,new hl(n));for(const n of mH)Qb.set(-n,new hl(-n));const Jb={bool:y2,uint:v2,ints:_2,float:Qb},Kk=new Map([...y2,...Qb]),VA=(n,e)=>Kk.has(n)?Kk.get(n):n.isNode===!0?n:new hl(n,e),Zbe=n=>{try{return n.getNodeType()}catch{return}},dr=function(n,e=null){return(...t)=>{if((t.length===0||!["bool","float","int","uint"].includes(n)&&t.every(i=>typeof i!="object"))&&(t=[hH(n,...t)]),t.length===1&&e!==null&&e.has(t[0]))return Ue(e.get(t[0]));if(t.length===1){const i=VA(t[0],n);return Zbe(i)===n?Ue(i):Ue(new dH(i,n))}const r=t.map(i=>VA(i));return Ue(new kbe(r,n))}},Yk=n=>typeof n=="object"&&n!==null?n.value:n,Qbe=n=>n!=null?n.nodeType||n.convertTo||(typeof n=="string"?n:null):null;function x_(n,e){return new Proxy(new qbe(n,e),pH)}const Ue=(n,e=null)=>$be(n,e),e1=(n,e=null)=>new Vbe(n,e),Zd=(n,e=null)=>new Gbe(n,e),Ae=(...n)=>new Hbe(...n),ze=(...n)=>new Wbe(...n),je=(n,e)=>{const t=new x_(n,e),r=(...i)=>{let s;return e1(i),i[0]&&i[0].isNode?s=[...i]:s=i[0],t.call(s)};return r.shaderNode=t,r.setLayout=i=>(t.setLayout(i),r),r.once=()=>(t.once=!0,r),r};xe("toGlobal",n=>(n.global=!0,n));const Kx=n=>{Wf=n},gH=()=>Wf,Jr=(...n)=>Wf.If(...n);function Jbe(n){return Wf&&Wf.add(n),n}xe("append",Jbe);const e1e=new dr("color"),Ce=new dr("float",Jb.float),qn=new dr("int",Jb.ints),t1e=new dr("uint",Jb.uint),n1e=new dr("bool",Jb.bool),Ke=new dr("vec2"),Ea=new dr("ivec2"),r1e=new dr("uvec2"),i1e=new dr("bvec2"),Me=new dr("vec3"),s1e=new dr("ivec3"),o1e=new dr("uvec3"),a1e=new dr("bvec3"),Tt=new dr("vec4"),l1e=new dr("ivec4"),c1e=new dr("uvec4"),u1e=new dr("bvec4"),x2=new dr("mat2"),zi=new dr("mat3"),Qd=new dr("mat4");xe("toColor",e1e);xe("toFloat",Ce);xe("toInt",qn);xe("toUint",t1e);xe("toBool",n1e);xe("toVec2",Ke);xe("toIVec2",Ea);xe("toUVec2",r1e);xe("toBVec2",i1e);xe("toVec3",Me);xe("toIVec3",s1e);xe("toUVec3",o1e);xe("toBVec3",a1e);xe("toVec4",Tt);xe("toIVec4",l1e);xe("toUVec4",c1e);xe("toBVec4",u1e);xe("toMat2",x2);xe("toMat3",zi);xe("toMat4",Qd);const h1e=Ae(Iy),d1e=(n,e)=>Ue(new dH(Ue(n),e));xe("element",h1e);xe("convert",d1e);class yH extends wt{static get type(){return"UniformGroupNode"}constructor(e,t=!1,r=1){super("string"),this.name=e,this.version=0,this.shared=t,this.order=r,this.isUniformGroup=!0}set needsUpdate(e){e===!0&&this.version++}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const f1e=n=>new yH(n),vH=(n,e=0)=>new yH(n,!0,e),p1e=vH("frame"),Ft=vH("render"),_H=f1e("object");class dp extends g2{static get type(){return"UniformNode"}constructor(e,t=null){super(e,t),this.isUniformNode=!0,this.name="",this.groupNode=_H}label(e){return this.name=e,this}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){const r=this.getSelf();return e=e.bind(r),super.onUpdate(i=>{const s=e(i,r);s!==void 0&&(this.value=s)},t)}generate(e,t){const r=this.getNodeType(e),i=this.getUniformHash(e);let s=e.getNodeFromHash(i);s===void 0&&(e.setHashNode(this,i),s=this);const o=s.getInputType(e),a=e.getUniformFromNode(s,o,e.shaderStage,this.name||e.context.label),l=e.getPropertyName(a);return e.context.label!==void 0&&delete e.context.label,e.format(l,r,t)}}const Mt=(n,e)=>{const t=Qbe(e||n),r=n&&n.isNode===!0?n.node&&n.node.value||n.value:n;return Ue(new dp(r,t))};class sn extends wt{static get type(){return"PropertyNode"}constructor(e,t=null,r=!1){super(e),this.name=t,this.varying=r,this.isPropertyNode=!0}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){let t;return this.varying===!0?(t=e.getVaryingFromNode(this,this.name),t.needsInterpolation=!0):t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}const ld=(n,e)=>Ue(new sn(n,e)),Yx=(n,e)=>Ue(new sn(n,e,!0)),en=ze(sn,"vec4","DiffuseColor"),Zk=ze(sn,"vec3","EmissiveColor"),Ia=ze(sn,"float","Roughness"),Zx=ze(sn,"float","Metalness"),GA=ze(sn,"float","Clearcoat"),Qx=ze(sn,"float","ClearcoatRoughness"),Ad=ze(sn,"vec3","Sheen"),S2=ze(sn,"float","SheenRoughness"),b2=ze(sn,"float","Iridescence"),xH=ze(sn,"float","IridescenceIOR"),SH=ze(sn,"float","IridescenceThickness"),HA=ze(sn,"float","AlphaT"),iu=ze(sn,"float","Anisotropy"),S_=ze(sn,"vec3","AnisotropyT"),Jd=ze(sn,"vec3","AnisotropyB"),rs=ze(sn,"color","SpecularColor"),Jx=ze(sn,"float","SpecularF90"),WA=ze(sn,"float","Shininess"),m1e=ze(sn,"vec4","Output"),kT=ze(sn,"float","dashSize"),Qk=ze(sn,"float","gapSize"),b_=ze(sn,"float","IOR"),jA=ze(sn,"float","Transmission"),bH=ze(sn,"float","Thickness"),wH=ze(sn,"float","AttenuationDistance"),TH=ze(sn,"color","AttenuationColor"),MH=ze(sn,"float","Dispersion");class g1e extends hr{static get type(){return"AssignNode"}constructor(e,t){super(),this.targetNode=e,this.sourceNode=t}hasDependencies(){return!1}getNodeType(e,t){return t!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:t}=this;if(e.isAvailable("swizzleAssign")===!1&&t.isSplitNode&&t.components.length>1){const r=e.getTypeLength(t.node.getNodeType(e));return hp.join("").slice(0,r)!==t.components}return!1}generate(e,t){const{targetNode:r,sourceNode:i}=this,s=this.needsSplitAssign(e),o=r.getNodeType(e),a=r.context({assign:!0}).build(e),l=i.build(e,o),c=i.getNodeType(e),u=e.getDataFromNode(this);let h;if(u.initialized===!0)t!=="void"&&(h=a);else if(s){const d=e.getVarFromNode(this,null,o),f=e.getPropertyName(d);e.addLineFlowCode(`${f} = ${l}`,this);const p=r.node.context({assign:!0}).build(e);for(let y=0;y<r.components.length;y++){const g=r.components[y];e.addLineFlowCode(`${p}.${g} = ${f}[ ${y} ]`,this)}t!=="void"&&(h=a)}else h=`${a} = ${l}`,(t==="void"||c==="void")&&(e.addLineFlowCode(h,this),t!=="void"&&(h=a));return u.initialized=!0,e.format(h,o,t)}}const y1e=Ae(g1e);xe("assign",y1e);class v1e extends hr{static get type(){return"FunctionCallNode"}constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const t=[],r=this.functionNode,i=r.getInputs(e),s=this.parameters;if(Array.isArray(s))for(let a=0;a<s.length;a++){const l=i[a],c=s[a];t.push(c.build(e,l.type))}else for(const a of i){const l=s[a.name];if(l!==void 0)t.push(l.build(e,a.type));else throw new Error(`FunctionCallNode: Input '${a.name}' not found in FunctionNode.`)}return`${r.build(e,"property")}( ${t.join(", ")} )`}}const _1e=(n,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?Zd(e):e1(e[0]),Ue(new v1e(Ue(n),e)));xe("call",_1e);class Dn extends hr{static get type(){return"OperatorNode"}constructor(e,t,r,...i){if(super(),i.length>0){let s=new Dn(e,t,r);for(let o=0;o<i.length-1;o++)s=new Dn(e,s,i[o]);t=s,r=i[i.length-1]}this.op=e,this.aNode=t,this.bNode=r}getNodeType(e,t){const r=this.op,i=this.aNode,s=this.bNode,o=i.getNodeType(e),a=typeof s<"u"?s.getNodeType(e):null;if(o==="void"||a==="void")return"void";if(r==="%")return o;if(r==="~"||r==="&"||r==="|"||r==="^"||r===">>"||r==="<<")return e.getIntegerType(o);if(r==="!"||r==="=="||r==="&&"||r==="||"||r==="^^")return"bool";if(r==="<"||r===">"||r==="<="||r===">="){const l=t?e.getTypeLength(t):Math.max(e.getTypeLength(o),e.getTypeLength(a));return l>1?`bvec${l}`:"bool"}else return o==="float"&&e.isMatrix(a)?a:e.isMatrix(o)&&e.isVector(a)?e.getVectorFromMatrix(o):e.isVector(o)&&e.isMatrix(a)?e.getVectorFromMatrix(a):e.getTypeLength(a)>e.getTypeLength(o)?a:o}generate(e,t){const r=this.op,i=this.aNode,s=this.bNode,o=this.getNodeType(e,t);let a=null,l=null;o!=="void"?(a=i.getNodeType(e),l=typeof s<"u"?s.getNodeType(e):null,r==="<"||r===">"||r==="<="||r===">="||r==="=="?e.isVector(a)?l=a:a!==l&&(a=l="float"):r===">>"||r==="<<"?(a=o,l=e.changeComponentType(l,"uint")):e.isMatrix(a)&&e.isVector(l)?l=e.getVectorFromMatrix(a):e.isVector(a)&&e.isMatrix(l)?a=e.getVectorFromMatrix(l):a=l=o):a=l=o;const c=i.build(e,a),u=typeof s<"u"?s.build(e,l):null,h=e.getTypeLength(t),d=e.getFunctionOperator(r);if(t!=="void")return r==="<"&&h>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThan",t)}( ${c}, ${u} )`,o,t):e.format(`( ${c} < ${u} )`,o,t):r==="<="&&h>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThanEqual",t)}( ${c}, ${u} )`,o,t):e.format(`( ${c} <= ${u} )`,o,t):r===">"&&h>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThan",t)}( ${c}, ${u} )`,o,t):e.format(`( ${c} > ${u} )`,o,t):r===">="&&h>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThanEqual",t)}( ${c}, ${u} )`,o,t):e.format(`( ${c} >= ${u} )`,o,t):r==="!"||r==="~"?e.format(`(${r}${c})`,a,t):d?e.format(`${d}( ${c}, ${u} )`,o,t):e.format(`( ${c} ${r} ${u} )`,o,t);if(a!=="void")return d?e.format(`${d}( ${c}, ${u} )`,o,t):e.format(`${c} ${r} ${u}`,o,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const ds=Ae(Dn,"+"),Iu=Ae(Dn,"-"),cn=Ae(Dn,"*"),Sc=Ae(Dn,"/"),EH=Ae(Dn,"%"),x1e=Ae(Dn,"=="),S1e=Ae(Dn,"!="),b1e=Ae(Dn,"<"),w1e=Ae(Dn,">"),T1e=Ae(Dn,"<="),M1e=Ae(Dn,">="),E1e=Ae(Dn,"&&"),C1e=Ae(Dn,"||"),A1e=Ae(Dn,"!"),R1e=Ae(Dn,"^^"),N1e=Ae(Dn,"&"),P1e=Ae(Dn,"~"),I1e=Ae(Dn,"|"),L1e=Ae(Dn,"^"),D1e=Ae(Dn,"<<"),F1e=Ae(Dn,">>");xe("add",ds);xe("sub",Iu);xe("mul",cn);xe("div",Sc);xe("modInt",EH);xe("equal",x1e);xe("notEqual",S1e);xe("lessThan",b1e);xe("greaterThan",w1e);xe("lessThanEqual",T1e);xe("greaterThanEqual",M1e);xe("and",E1e);xe("or",C1e);xe("not",A1e);xe("xor",R1e);xe("bitAnd",N1e);xe("bitNot",P1e);xe("bitOr",I1e);xe("bitXor",L1e);xe("shiftLeft",D1e);xe("shiftRight",F1e);const O1e=(...n)=>(console.warn("TSL.OperatorNode: .remainder() has been renamed to .modInt()."),EH(...n));xe("remainder",O1e);class re extends hr{static get type(){return"MathNode"}constructor(e,t,r=null,i=null){super(),this.method=e,this.aNode=t,this.bNode=r,this.cNode=i}getInputType(e){const t=this.aNode.getNodeType(e),r=this.bNode?this.bNode.getNodeType(e):null,i=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(t)?0:e.getTypeLength(t),o=e.isMatrix(r)?0:e.getTypeLength(r),a=e.isMatrix(i)?0:e.getTypeLength(i);return s>o&&s>a?t:o>a?r:a>s?i:t}getNodeType(e){const t=this.method;return t===re.LENGTH||t===re.DISTANCE||t===re.DOT?"float":t===re.CROSS?"vec3":t===re.ALL?"bool":t===re.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):t===re.MOD?this.aNode.getNodeType(e):this.getInputType(e)}generate(e,t){const r=this.method,i=this.getNodeType(e),s=this.getInputType(e),o=this.aNode,a=this.bNode,l=this.cNode,c=e.renderer.isWebGLRenderer===!0;if(r===re.TRANSFORM_DIRECTION){let u=o,h=a;e.isMatrix(u.getNodeType(e))?h=Tt(Me(h),0):u=Tt(Me(u),0);const d=cn(u,h).xyz;return Gg(d).build(e,t)}else{if(r===re.NEGATE)return e.format("( - "+o.build(e,s)+" )",i,t);if(r===re.ONE_MINUS)return Iu(1,o).build(e,t);if(r===re.RECIPROCAL)return Sc(1,o).build(e,t);if(r===re.DIFFERENCE)return zo(Iu(o,a)).build(e,t);{const u=[];return r===re.CROSS||r===re.MOD?u.push(o.build(e,i),a.build(e,i)):c&&r===re.STEP?u.push(o.build(e,e.getTypeLength(o.getNodeType(e))===1?"float":s),a.build(e,s)):c&&(r===re.MIN||r===re.MAX)||r===re.MOD?u.push(o.build(e,s),a.build(e,e.getTypeLength(a.getNodeType(e))===1?"float":s)):r===re.REFRACT?u.push(o.build(e,s),a.build(e,s),l.build(e,"float")):r===re.MIX?u.push(o.build(e,s),a.build(e,s),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":s)):(u.push(o.build(e,s)),a!==null&&u.push(a.build(e,s)),l!==null&&u.push(l.build(e,s))),e.format(`${e.getMethod(r,i)}( ${u.join(", ")} )`,i,t)}}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}re.ALL="all";re.ANY="any";re.EQUALS="equals";re.RADIANS="radians";re.DEGREES="degrees";re.EXP="exp";re.EXP2="exp2";re.LOG="log";re.LOG2="log2";re.SQRT="sqrt";re.INVERSE_SQRT="inversesqrt";re.FLOOR="floor";re.CEIL="ceil";re.NORMALIZE="normalize";re.FRACT="fract";re.SIN="sin";re.COS="cos";re.TAN="tan";re.ASIN="asin";re.ACOS="acos";re.ATAN="atan";re.ABS="abs";re.SIGN="sign";re.LENGTH="length";re.NEGATE="negate";re.ONE_MINUS="oneMinus";re.DFDX="dFdx";re.DFDY="dFdy";re.ROUND="round";re.RECIPROCAL="reciprocal";re.TRUNC="trunc";re.FWIDTH="fwidth";re.BITCAST="bitcast";re.TRANSPOSE="transpose";re.ATAN2="atan2";re.MIN="min";re.MAX="max";re.MOD="mod";re.STEP="step";re.REFLECT="reflect";re.DISTANCE="distance";re.DIFFERENCE="difference";re.DOT="dot";re.CROSS="cross";re.POW="pow";re.TRANSFORM_DIRECTION="transformDirection";re.MIX="mix";re.CLAMP="clamp";re.REFRACT="refract";re.SMOOTHSTEP="smoothstep";re.FACEFORWARD="faceforward";const k1e=Ce(1e-6),U1e=Ce(Math.PI),CH=Ae(re,re.ALL),B1e=Ae(re,re.ANY),z1e=Ae(re,re.EQUALS),$1e=Ae(re,re.RADIANS),V1e=Ae(re,re.DEGREES),AH=Ae(re,re.EXP),qA=Ae(re,re.EXP2),RH=Ae(re,re.LOG),t1=Ae(re,re.LOG2),w2=Ae(re,re.SQRT),G1e=Ae(re,re.INVERSE_SQRT),n1=Ae(re,re.FLOOR),NH=Ae(re,re.CEIL),Gg=Ae(re,re.NORMALIZE),fp=Ae(re,re.FRACT),Ca=Ae(re,re.SIN),zl=Ae(re,re.COS),H1e=Ae(re,re.TAN),W1e=Ae(re,re.ASIN),j1e=Ae(re,re.ACOS),q1e=Ae(re,re.ATAN),zo=Ae(re,re.ABS),PH=Ae(re,re.SIGN),ef=Ae(re,re.LENGTH),X1e=Ae(re,re.NEGATE),K1e=Ae(re,re.ONE_MINUS),Y1e=Ae(re,re.DFDX),Z1e=Ae(re,re.DFDY),Q1e=Ae(re,re.ROUND),J1e=Ae(re,re.RECIPROCAL),ewe=Ae(re,re.TRUNC),twe=Ae(re,re.FWIDTH);re.BITCAST;const nwe=Ae(re,re.TRANSPOSE),rwe=Ae(re,re.ATAN2),eS=Ae(re,re.MIN),wo=Ae(re,re.MAX),IH=Ae(re,re.MOD),LH=Ae(re,re.STEP),iwe=Ae(re,re.REFLECT),swe=Ae(re,re.DISTANCE),owe=Ae(re,re.DIFFERENCE),T2=Ae(re,re.DOT),DH=Ae(re,re.CROSS),r1=Ae(re,re.POW),FH=Ae(re,re.POW,2),awe=Ae(re,re.POW,3),lwe=Ae(re,re.POW,4),cwe=Ae(re,re.TRANSFORM_DIRECTION),uwe=n=>cn(PH(n),r1(zo(n),1/3)),hwe=n=>T2(n,n),Mn=Ae(re,re.MIX),bc=(n,e=0,t=1)=>Ue(new re(re.CLAMP,Ue(n),Ue(e),Ue(t))),dwe=n=>bc(n),OH=Ae(re,re.REFRACT),Yu=Ae(re,re.SMOOTHSTEP),fwe=Ae(re,re.FACEFORWARD),pwe=je(([n])=>{const r=43758.5453,i=T2(n.xy,Ke(12.9898,78.233)),s=IH(i,U1e);return fp(Ca(s).mul(r))}),mwe=(n,e,t)=>Mn(e,t,n),gwe=(n,e,t)=>Yu(e,t,n);xe("all",CH);xe("any",B1e);xe("equals",z1e);xe("radians",$1e);xe("degrees",V1e);xe("exp",AH);xe("exp2",qA);xe("log",RH);xe("log2",t1);xe("sqrt",w2);xe("inverseSqrt",G1e);xe("floor",n1);xe("ceil",NH);xe("normalize",Gg);xe("fract",fp);xe("sin",Ca);xe("cos",zl);xe("tan",H1e);xe("asin",W1e);xe("acos",j1e);xe("atan",q1e);xe("abs",zo);xe("sign",PH);xe("length",ef);xe("lengthSq",hwe);xe("negate",X1e);xe("oneMinus",K1e);xe("dFdx",Y1e);xe("dFdy",Z1e);xe("round",Q1e);xe("reciprocal",J1e);xe("trunc",ewe);xe("fwidth",twe);xe("atan2",rwe);xe("min",eS);xe("max",wo);xe("mod",IH);xe("step",LH);xe("reflect",iwe);xe("distance",swe);xe("dot",T2);xe("cross",DH);xe("pow",r1);xe("pow2",FH);xe("pow3",awe);xe("pow4",lwe);xe("transformDirection",cwe);xe("mix",mwe);xe("clamp",bc);xe("refract",OH);xe("smoothstep",gwe);xe("faceForward",fwe);xe("difference",owe);xe("saturate",dwe);xe("cbrt",uwe);xe("transpose",nwe);xe("rand",pwe);class ywe extends wt{static get type(){return"ConditionalNode"}constructor(e,t,r=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=r}getNodeType(e){const t=this.ifNode.getNodeType(e);if(this.elseNode!==null){const r=this.elseNode.getNodeType(e);if(e.getTypeLength(r)>e.getTypeLength(t))return r}return t}setup(e){const t=this.condNode.cache(),r=this.ifNode.cache(),i=this.elseNode?this.elseNode.cache():null,s=e.context.nodeBlock;e.getDataFromNode(r).parentNodeBlock=s,i!==null&&(e.getDataFromNode(i).parentNodeBlock=s);const o=e.getNodeProperties(this);o.condNode=t,o.ifNode=r.context({nodeBlock:r}),o.elseNode=i?i.context({nodeBlock:i}):null}generate(e,t){const r=this.getNodeType(e),i=e.getDataFromNode(this);if(i.nodeProperty!==void 0)return i.nodeProperty;const{condNode:s,ifNode:o,elseNode:a}=e.getNodeProperties(this),l=t!=="void",c=l?ld(r).build(e):"";i.nodeProperty=c;const u=s.build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${u} ) {

`).addFlowTab();let h=o.build(e,r);if(h&&(l?h=c+" = "+h+";":h="return "+h+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+h+`

`+e.tab+"}"),a!==null){e.addFlowCode(` else {

`).addFlowTab();let d=a.build(e,r);d&&(l?d=c+" = "+d+";":d="return "+d+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+d+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(c,r,t)}}const Ai=Ae(ywe);xe("select",Ai);const vwe=(...n)=>(console.warn("TSL.ConditionalNode: cond() has been renamed to select()."),Ai(...n));xe("cond",vwe);class kH extends wt{static get type(){return"ContextNode"}constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.value=t}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}analyze(e){this.node.build(e)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.value});const r=this.node.build(e);return e.setContext(t),r}generate(e,t){const r=e.getContext();e.setContext({...e.context,...this.value});const i=this.node.build(e,t);return e.setContext(r),i}}const M2=Ae(kH),_we=(n,e)=>M2(n,{label:e});xe("context",M2);xe("label",_we);class xwe extends wt{static get type(){return"VarNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.global=!0,this.isVarNode=!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{node:t,name:r}=this,i=e.getVarFromNode(this,r,e.getVectorType(this.getNodeType(e))),s=e.getPropertyName(i),o=t.build(e,i.type);return e.addLineFlowCode(`${s} = ${o}`,this),s}}const UH=Ae(xwe);xe("temp",UH);xe("toVar",(...n)=>UH(...n).append());class Swe extends wt{static get type(){return"VaryingNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.isVaryingNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const t=e.getNodeProperties(this);let r=t.varying;if(r===void 0){const i=this.name,s=this.getNodeType(e);t.varying=r=e.getVaryingFromNode(this,i,s),t.node=this.node}return r.needsInterpolation||(r.needsInterpolation=e.shaderStage==="fragment"),r}setup(e){this.setupVarying(e)}analyze(e){return this.setupVarying(e),this.node.analyze(e)}generate(e){const t=e.getNodeProperties(this),r=this.setupVarying(e);if(t.propertyName===void 0){const i=this.getNodeType(e),s=e.getPropertyName(r,Gk.VERTEX);e.flowNodeFromShaderStage(Gk.VERTEX,this.node,i,s),t.propertyName=s}return e.getPropertyName(r)}}const dl=Ae(Swe);xe("varying",dl);const Ly="WorkingColorSpace",E2="OutputColorSpace";function Jk(n){let e=null;return n===Fs?e="Linear":n===ht&&(e="sRGB"),e}function XA(n,e){return Jk(n)+"To"+Jk(e)}class i1 extends hr{static get type(){return"ColorSpaceNode"}constructor(e,t,r){super("vec4"),this.colorNode=e,this.source=t,this.target=r}getColorSpace(e,t){return t===Ly?es.workingColorSpace:t===E2?e.context.outputColorSpace||e.renderer.outputColorSpace:t}setup(e){const{renderer:t}=e,{colorNode:r}=this,i=this.getColorSpace(e,this.source),s=this.getColorSpace(e,this.target);if(i===s)return r;const o=XA(i,s);let a=null;const l=t.nodes.library.getColorSpaceFunction(o);return l!==null?a=Tt(l(r.rgb),r.a):(console.error("ColorSpaceNode: Unsupported Color Space configuration.",o),a=r),a}}const bwe=n=>Ue(new i1(Ue(n),Ly,E2)),wwe=n=>Ue(new i1(Ue(n),E2,Ly)),Twe=(n,e)=>Ue(new i1(Ue(n),Ly,e)),BH=(n,e)=>Ue(new i1(Ue(n),e,Ly));xe("toOutputColorSpace",bwe);xe("toWorkingColorSpace",wwe);xe("workingToColorSpace",Twe);xe("colorSpaceToWorking",BH);let Mwe=class extends Iy{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),r=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(t,r,i)}};class zH extends wt{static get type(){return"ReferenceBaseNode"}constructor(e,t,r=null,i=null){super(),this.property=e,this.uniformType=t,this.object=r,this.count=i,this.properties=e.split("."),this.reference=r,this.node=null,this.group=null,this.updateType=Nt.OBJECT}setGroup(e){return this.group=e,this}element(e){return Ue(new Mwe(this,Ue(e)))}setNodeType(e){const t=Mt(null,e).getSelf();this.group!==null&&t.setGroup(this.group),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let r=e[t[0]];for(let i=1;i<t.length;i++)r=r[t[i]];return r}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const Ewe=(n,e,t)=>Ue(new zH(n,e,t));class Cwe extends zH{static get type(){return"RendererReferenceNode"}constructor(e,t,r=null){super(e,t,r),this.renderer=r,this.setGroup(Ft)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const Awe=(n,e,t)=>Ue(new Cwe(n,e,t));class Rwe extends hr{static get type(){return"ToneMappingNode"}constructor(e,t=Pwe,r=null){super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=r}getCacheKey(){return jx(super.getCacheKey(),this.toneMapping)}setup(e){const t=this.colorNode||e.context.color,r=this.toneMapping;if(r===Xd)return t;let i=null;const s=e.renderer.nodes.library.getToneMappingFunction(r);return s!==null?i=Tt(s(t.rgb,this.exposureNode),t.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",r),i=t),i}}const Nwe=(n,e,t)=>Ue(new Rwe(n,Ue(e),Ue(t))),Pwe=Awe("toneMappingExposure","float");xe("toneMapping",(n,e,t)=>Nwe(e,t,n));class Iwe extends g2{static get type(){return"BufferAttributeNode"}constructor(e,t=null,r=0,i=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=r,this.bufferOffset=i,this.usage=Wx,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),r=this.value,i=e.getTypeLength(t),s=this.bufferStride||i,o=this.bufferOffset,a=r.isInterleavedBuffer===!0?r:new Y6(r,s),l=new u2(a,i,o);a.setUsage(this.usage),this.attribute=l,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),r=e.getBufferAttributeFromNode(this,t),i=e.getPropertyName(r);let s=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=i,s=i):s=dl(this).build(e,t),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const C2=(n,e,t,r)=>Ue(new Iwe(n,e,t,r)),Lwe=(n,e,t,r)=>C2(n,e,t,r).setUsage(Ed),eU=(n,e,t,r)=>C2(n,e,t,r).setInstanced(!0),tU=(n,e,t,r)=>Lwe(n,e,t,r).setInstanced(!0);xe("toAttribute",n=>C2(n.value));class Dwe extends wt{static get type(){return"ComputeNode"}constructor(e,t,r=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=t,this.workgroupSize=r,this.dispatchCount=0,this.version=1,this.updateBeforeType=Nt.OBJECT,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}updateDispatchCount(){const{count:e,workgroupSize:t}=this;let r=t[0];for(let i=1;i<t.length;i++)r*=t[i];this.dispatchCount=Math.ceil(e/r)}onInit(){}updateBefore({renderer:e}){e.compute(this)}generate(e){const{shaderStage:t}=e;if(t==="compute"){const r=this.computeNode.build(e,"void");r!==""&&e.addLineFlowCode(r,this)}}}const Fwe=(n,e,t)=>Ue(new Dwe(Ue(n),e,t));xe("compute",Fwe);class Owe extends wt{static get type(){return"CacheNode"}constructor(e,t=!0){super(),this.node=e,this.parent=t,this.isCacheNode=!0}getNodeType(e){return this.node.getNodeType(e)}build(e,...t){const r=e.getCache(),i=e.getCacheFromNode(this,this.parent);e.setCache(i);const s=this.node.build(e,...t);return e.setCache(r),s}}const w_=(n,...e)=>Ue(new Owe(Ue(n),...e));xe("cache",w_);class kwe extends wt{static get type(){return"BypassNode"}constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t,this),this.outputNode.build(e)}}const Uwe=Ae(kwe);xe("bypass",Uwe);class $H extends wt{static get type(){return"RemapNode"}constructor(e,t,r,i=Ce(0),s=Ce(1)){super(),this.node=e,this.inLowNode=t,this.inHighNode=r,this.outLowNode=i,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:r,outLowNode:i,outHighNode:s,doClamp:o}=this;let a=e.sub(t).div(r.sub(t));return o===!0&&(a=a.clamp()),a.mul(s.sub(i)).add(i)}}const Bwe=Ae($H,null,null,{doClamp:!1}),zwe=Ae($H);xe("remap",Bwe);xe("remapClamp",zwe);class $we extends wt{static get type(){return"ExpressionNode"}constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const r=this.getNodeType(e),i=this.snippet;if(r==="void")e.addLineFlowCode(i,this);else return e.format(`( ${i} )`,r,t)}}const Hg=Ae($we),Vwe=n=>(n?Ai(n,Hg("discard")):Hg("discard")).append();xe("discard",Vwe);class Gwe extends hr{static get type(){return"RenderOutputNode"}constructor(e,t,r){super("vec4"),this.colorNode=e,this.toneMapping=t,this.outputColorSpace=r,this.isRenderOutput=!0}setup({context:e}){let t=this.colorNode||e.color;const r=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||Xd,i=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||qu;return r!==Xd&&(t=t.toneMapping(r)),i!==qu&&i!==es.workingColorSpace&&(t=t.workingToColorSpace(i)),t}}const Hwe=(n,e=null,t=null)=>Ue(new Gwe(Ue(n),e,t));xe("renderOutput",Hwe);class Wwe extends wt{static get type(){return"AttributeNode"}constructor(e,t=null){super(t),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=this.nodeType;if(t===null){const r=this.getAttributeName(e);if(e.hasGeometryAttribute(r)){const i=e.geometry.getAttribute(r);t=e.getTypeFromAttribute(i)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),r=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const s=e.geometry.getAttribute(t),o=e.getTypeFromAttribute(s),a=e.getAttribute(t,o);return e.shaderStage==="vertex"?e.format(a.name,o,r):dl(this).build(e,r)}else return console.warn(`AttributeNode: Vertex attribute "${t}" not found on geometry.`),e.generateConst(r)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const sl=(n,e)=>Ue(new Wwe(n,e)),s1=n=>sl("uv"+(n>0?n:""),"vec2");class jwe extends wt{static get type(){return"TextureSizeNode"}constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const r=this.textureNode.build(e,"property"),i=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${r}, ${i} )`,this.getNodeType(e),t)}}const rg=Ae(jwe);class qwe extends dp{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=Nt.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,t=e.images,r=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(r&&r.width!==void 0){const{width:i,height:s}=r;this.value=Math.log2(Math.max(i,s))}}}const Xwe=Ae(qwe);class Dy extends dp{static get type(){return"TextureNode"}constructor(e,t=null,r=null,i=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=r,this.biasNode=i,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=Nt.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(t===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===Dr?"uvec4":this.value.type===ui?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return s1(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=Mt(this.value.matrix)),this._matrixUniform.mul(Me(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?Nt.FRAME:Nt.NONE,this}setupUV(e,t){const r=this.value;return e.isFlipY()&&(r.isRenderTargetTexture===!0||r.isFramebufferTexture===!0||r.isDepthTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(qn(rg(this,this.levelNode).y).sub(t.y).sub(1))),t}setup(e){const t=e.getNodeProperties(this);t.referenceNode=this.referenceNode;let r=this.uvNode;(r===null||e.context.forceUVContext===!0)&&e.context.getUV&&(r=e.context.getUV(this)),r||(r=this.getDefaultUV()),this.updateMatrix===!0&&(r=this.getTransformedUV(r)),r=this.setupUV(e,r);let i=this.levelNode;i===null&&e.context.getTextureLevel&&(i=e.context.getTextureLevel(this)),t.uvNode=r,t.levelNode=i,t.biasNode=this.biasNode,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode}generateUV(e,t){return t.build(e,this.sampler===!0?"vec2":"ivec2")}generateSnippet(e,t,r,i,s,o,a,l){const c=this.value;let u;return i?u=e.generateTextureLevel(c,t,r,i,o):s?u=e.generateTextureBias(c,t,r,s,o):l?u=e.generateTextureGrad(c,t,r,l,o):a?u=e.generateTextureCompare(c,t,r,a,o):this.sampler===!1?u=e.generateTextureLoad(c,t,r,o):u=e.generateTexture(c,t,r,o),u}generate(e,t){const r=e.getNodeProperties(this),i=this.value;if(!i||i.isTexture!==!0)throw new Error("TextureNode: Need a three.js texture.");const s=super.generate(e,"property");if(t==="sampler")return s+"_sampler";if(e.isReference(t))return s;{const o=e.getDataFromNode(this);let a=o.propertyName;if(a===void 0){const{uvNode:u,levelNode:h,biasNode:d,compareNode:f,depthNode:p,gradNode:y}=r,g=this.generateUV(e,u),m=h?h.build(e,"float"):null,_=d?d.build(e,"float"):null,v=p?p.build(e,"int"):null,x=f?f.build(e,"float"):null,b=y?[y[0].build(e,"vec2"),y[1].build(e,"vec2")]:null,T=e.getVarFromNode(this);a=e.getPropertyName(T);const w=this.generateSnippet(e,s,g,m,_,v,x,b);e.addLineFlowCode(`${a} = ${w}`,this),o.snippet=w,o.propertyName=a}let l=a;const c=this.getNodeType(e);return e.needsToWorkingColorSpace(i)&&(l=BH(Hg(l,c),i.colorSpace).setup(e).build(e,c)),e.format(l,c,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){const t=this.clone();return t.uvNode=Ue(e),t.referenceNode=this.getSelf(),Ue(t)}blur(e){const t=this.clone();return t.biasNode=Ue(e).mul(Xwe(t)),t.referenceNode=this.getSelf(),Ue(t)}level(e){const t=this.clone();return t.levelNode=Ue(e),t.referenceNode=this.getSelf(),Ue(t)}size(e){return rg(this,e)}bias(e){const t=this.clone();return t.biasNode=Ue(e),t.referenceNode=this.getSelf(),Ue(t)}compare(e){const t=this.clone();return t.compareNode=Ue(e),t.referenceNode=this.getSelf(),Ue(t)}grad(e,t){const r=this.clone();return r.gradNode=[Ue(e),Ue(t)],r.referenceNode=this.getSelf(),Ue(r)}depth(e){const t=this.clone();return t.depthNode=Ue(e),t.referenceNode=this.getSelf(),Ue(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,t=this._matrixUniform;t!==null&&(t.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e}}const Xn=Ae(Dy),to=(...n)=>Xn(...n).setSampler(!1),rm=Mt("float").label("cameraNear").setGroup(Ft).onRenderUpdate(({camera:n})=>n.near),im=Mt("float").label("cameraFar").setGroup(Ft).onRenderUpdate(({camera:n})=>n.far),Kwe=Mt("float").label("cameraLogDepth").setGroup(Ft).onRenderUpdate(({camera:n})=>2/(Math.log(n.far+1)/Math.LN2)),A2=Mt("mat4").label("cameraProjectionMatrix").setGroup(Ft).onRenderUpdate(({camera:n})=>n.projectionMatrix),fl=Mt("mat4").label("cameraViewMatrix").setGroup(Ft).onRenderUpdate(({camera:n})=>n.matrixWorldInverse),Ywe=Mt(new ce).label("cameraPosition").setGroup(Ft).onRenderUpdate(({camera:n},e)=>e.value.setFromMatrixPosition(n.matrixWorld));class jt extends wt{static get type(){return"Object3DNode"}constructor(e,t=null){super(),this.scope=e,this.object3d=t,this.updateType=Nt.OBJECT,this._uniformNode=new dp(null)}getNodeType(){const e=this.scope;if(e===jt.WORLD_MATRIX)return"mat4";if(e===jt.POSITION||e===jt.VIEW_POSITION||e===jt.DIRECTION||e===jt.SCALE)return"vec3"}update(e){const t=this.object3d,r=this._uniformNode,i=this.scope;if(i===jt.WORLD_MATRIX)r.value=t.matrixWorld;else if(i===jt.POSITION)r.value=r.value||new ce,r.value.setFromMatrixPosition(t.matrixWorld);else if(i===jt.SCALE)r.value=r.value||new ce,r.value.setFromMatrixScale(t.matrixWorld);else if(i===jt.DIRECTION)r.value=r.value||new ce,t.getWorldDirection(r.value);else if(i===jt.VIEW_POSITION){const s=e.camera;r.value=r.value||new ce,r.value.setFromMatrixPosition(t.matrixWorld),r.value.applyMatrix4(s.matrixWorldInverse)}}generate(e){const t=this.scope;return t===jt.WORLD_MATRIX?this._uniformNode.nodeType="mat4":(t===jt.POSITION||t===jt.VIEW_POSITION||t===jt.DIRECTION||t===jt.SCALE)&&(this._uniformNode.nodeType="vec3"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}jt.WORLD_MATRIX="worldMatrix";jt.POSITION="position";jt.SCALE="scale";jt.VIEW_POSITION="viewPosition";jt.DIRECTION="direction";jt.DIRECTION;jt.WORLD_MATRIX;jt.POSITION;jt.SCALE;jt.VIEW_POSITION;class Yo extends jt{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}Yo.DIRECTION;const Zu=ze(Yo,Yo.WORLD_MATRIX);Yo.POSITION;Yo.SCALE;Yo.VIEW_POSITION;const Zwe=Mt(new gs).onObjectUpdate(({object:n},e)=>e.value.getNormalMatrix(n.matrixWorld)),o1=fl.mul(Zu).toVar("modelViewMatrix"),VH=sl("position","vec3"),ei=VH.varying("positionLocal"),nU=VH.varying("positionPrevious"),KA=Zu.mul(ei).xyz.varying("v_positionWorld"),GH=ei.transformDirection(Zu).varying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),Zr=o1.mul(ei).xyz.varying("v_positionView"),kn=Zr.negate().varying("v_positionViewDirection").normalize().toVar("positionViewDirection");class Qwe extends wt{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){const{renderer:t,material:r}=e;return t.coordinateSystem===po&&r.side===ul?"false":e.getFrontFacing()}}const Jwe=ze(Qwe),a1=Ce(Jwe).mul(2).sub(1),HH=sl("normal","vec3"),Zo=je(n=>n.geometry.hasAttribute("normal")===!1?(console.warn('TSL.NormalNode: Vertex attribute "normal" not found on geometry.'),Me(0,1,0)):HH,"vec3").once()().toVar("normalLocal"),eTe=Zr.dFdx().cross(Zr.dFdy()).normalize().toVar("normalFlat"),To=je(n=>{let e;return n.material.flatShading===!0?e=eTe:e=dl(jH(Zo),"v_normalView").normalize(),e},"vec3").once()().toVar("normalView"),l1=dl(To.transformDirection(fl),"v_normalWorld").normalize().toVar("normalWorld"),sr=je(n=>n.context.setupNormal(),"vec3").once()().mul(a1).toVar("transformedNormalView"),WH=sr.transformDirection(fl).toVar("transformedNormalWorld"),Rm=je(n=>n.context.setupClearcoatNormal(),"vec3").once()().mul(a1).toVar("transformedClearcoatNormalView"),tTe=je(([n,e=Zu])=>{const t=zi(e),r=n.div(Me(t[0].dot(t[0]),t[1].dot(t[1]),t[2].dot(t[2])));return t.mul(r).xyz}),jH=je(([n],e)=>{const t=e.renderer.nodes.modelNormalViewMatrix;if(t!==null)return t.transformDirection(n);const r=Zwe.mul(n);return fl.transformDirection(r)}),nTe=Mt(0).onReference(({material:n})=>n).onRenderUpdate(({material:n})=>n.refractionRatio),rTe=kn.negate().reflect(sr),iTe=kn.negate().refract(sr,nTe),sTe=rTe.transformDirection(fl).toVar("reflectVector"),oTe=iTe.transformDirection(fl).toVar("reflectVector");class aTe extends Dy{static get type(){return"CubeTextureNode"}constructor(e,t=null,r=null,i=null){super(e,t,r,i),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===ju?sTe:e.mapping===Gf?oTe:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),Me(0,0,0))}setUpdateMatrix(){}setupUV(e,t){const r=this.value;return e.renderer.coordinateSystem===Xu||!r.isRenderTargetTexture?Me(t.x.negate(),t.yz):t}generateUV(e,t){return t.build(e,"vec3")}}const Wg=Ae(aTe);class qH extends dp{static get type(){return"BufferNode"}constructor(e,t,r=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=r}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const R2=(n,e,t)=>Ue(new qH(n,e,t));class lTe extends Iy{static get type(){return"UniformArrayElementNode"}constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}generate(e){const t=super.generate(e),r=this.getNodeType();return e.format(t,"vec4",r)}}class cTe extends qH{static get type(){return"UniformArrayNode"}constructor(e,t=null){super(null,"vec4"),this.array=e,this.elementType=t,this._elementType=null,this._elementLength=0,this.updateType=Nt.RENDER,this.isArrayBufferNode=!0}getElementType(){return this.elementType||this._elementType}getElementLength(){return this._elementLength}update(){const{array:e,value:t}=this,r=this.getElementLength(),i=this.getElementType();if(r===1)for(let s=0;s<e.length;s++){const o=s*4;t[o]=e[s]}else if(i==="color")for(let s=0;s<e.length;s++){const o=s*4,a=e[s];t[o]=a.r,t[o+1]=a.g,t[o+2]=a.b||0}else for(let s=0;s<e.length;s++){const o=s*4,a=e[s];t[o]=a.x,t[o+1]=a.y,t[o+2]=a.z||0,t[o+3]=a.w||0}}setup(e){const t=this.array.length;this._elementType=this.elementType===null?Xx(this.array[0]):this.elementType,this._elementLength=e.getTypeLength(this._elementType);let r=Float32Array;return this._elementType.charAt(0)==="i"?r=Int32Array:this._elementType.charAt(0)==="u"&&(r=Uint32Array),this.value=new r(t*4),this.bufferCount=t,this.bufferType=e.changeComponentType("vec4",e.getComponentType(this._elementType)),super.setup(e)}element(e){return Ue(new lTe(this,Ue(e)))}}const jg=(n,e)=>Ue(new cTe(n,e));class uTe extends Iy{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),r=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(t,r,i)}}class N2 extends wt{static get type(){return"ReferenceNode"}constructor(e,t,r=null,i=null){super(),this.property=e,this.uniformType=t,this.object=r,this.count=i,this.properties=e.split("."),this.reference=r,this.node=null,this.group=null,this.name=null,this.updateType=Nt.OBJECT}element(e){return Ue(new uTe(this,Ue(e)))}setGroup(e){return this.group=e,this}label(e){return this.name=e,this}setNodeType(e){let t=null;this.count!==null?t=R2(null,e,this.count):Array.isArray(this.getValueFromReference())?t=jg(null,e):e==="texture"?t=Xn(null):e==="cubeTexture"?t=Wg(null):t=Mt(null,e),this.group!==null&&t.setGroup(this.group),this.name!==null&&t.label(this.name),this.node=t.getSelf()}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let r=e[t[0]];for(let i=1;i<t.length;i++)r=r[t[i]];return r}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const Un=(n,e,t)=>Ue(new N2(n,e,t)),rU=(n,e,t,r)=>Ue(new N2(n,e,r,t));class hTe extends N2{static get type(){return"MaterialReferenceNode"}constructor(e,t,r=null){super(e,t,r),this.material=r,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const Wl=(n,e,t)=>Ue(new hTe(n,e,t)),XH=je(n=>(n.geometry.hasAttribute("tangent")===!1&&n.geometry.computeTangents(),sl("tangent","vec4")))(),P2=XH.xyz.toVar("tangentLocal"),KH=o1.mul(Tt(P2,0)).xyz.varying("v_tangentView").normalize().toVar("tangentView"),dTe=n=>n.mul(XH.w).xyz,fTe=dl(dTe(To.cross(KH)),"v_bitangentView").normalize().toVar("bitangentView"),Nm=zi(KH,fTe,To),pTe=(()=>{let n=Jd.cross(kn);return n=n.cross(Jd).normalize(),n=Mn(n,sr,iu.mul(Ia.oneMinus()).oneMinus().pow2().pow2()).normalize(),n})(),mTe=je(n=>{const{eye_pos:e,surf_norm:t,mapN:r,uv:i}=n,s=e.dFdx(),o=e.dFdy(),a=i.dFdx(),l=i.dFdy(),c=t,u=o.cross(c),h=c.cross(s),d=u.mul(a.x).add(h.mul(l.x)),f=u.mul(a.y).add(h.mul(l.y)),p=d.dot(d).max(f.dot(f)),y=a1.mul(p.inverseSqrt());return ds(d.mul(r.x,y),f.mul(r.y,y),c.mul(r.z)).normalize()});class gTe extends hr{static get type(){return"NormalMapNode"}constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=xc}setup(e){const{normalMapType:t,scaleNode:r}=this;let i=this.node.mul(2).sub(1);r!==null&&(i=Me(i.xy.mul(r),i.z));let s=null;return t===lSe?s=jH(i):t===xc&&(e.hasGeometryAttribute("tangent")===!0?s=Nm.mul(i).normalize():s=mTe({eye_pos:Zr,surf_norm:To,mapN:i,uv:s1()})),s}}const iU=Ae(gTe),yTe=je(({textureNode:n,bumpScale:e})=>{const t=i=>n.cache().context({getUV:s=>i(s.uvNode||s1()),forceUVContext:!0}),r=Ce(t(i=>i));return Ke(Ce(t(i=>i.add(i.dFdx()))).sub(r),Ce(t(i=>i.add(i.dFdy()))).sub(r)).mul(e)}),vTe=je(n=>{const{surf_pos:e,surf_norm:t,dHdxy:r}=n,i=e.dFdx().normalize(),s=e.dFdy().normalize(),o=t,a=s.cross(o),l=o.cross(i),c=i.dot(a).mul(a1),u=c.sign().mul(r.x.mul(a).add(r.y.mul(l)));return c.abs().mul(t).sub(u).normalize()});class _Te extends hr{static get type(){return"BumpMapNode"}constructor(e,t=null){super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=yTe({textureNode:this.textureNode,bumpScale:e});return vTe({surf_pos:Zr,surf_norm:To,dHdxy:t})}}const xTe=Ae(_Te),sU=new Map;class ge extends wt{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,t){let r=sU.get(e);return r===void 0&&(r=Wl(e,t),sU.set(e,r)),r}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const t=e.context.material,r=this.scope;let i=null;if(r===ge.COLOR){const s=t.color!==void 0?this.getColor(r):Me();t.map&&t.map.isTexture===!0?i=s.mul(this.getTexture("map")):i=s}else if(r===ge.OPACITY){const s=this.getFloat(r);t.alphaMap&&t.alphaMap.isTexture===!0?i=s.mul(this.getTexture("alpha")):i=s}else if(r===ge.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?i=this.getTexture("specular").r:i=Ce(1);else if(r===ge.SPECULAR_INTENSITY){const s=this.getFloat(r);t.specularMap?i=s.mul(this.getTexture(r).a):i=s}else if(r===ge.SPECULAR_COLOR){const s=this.getColor(r);t.specularColorMap&&t.specularColorMap.isTexture===!0?i=s.mul(this.getTexture(r).rgb):i=s}else if(r===ge.ROUGHNESS){const s=this.getFloat(r);t.roughnessMap&&t.roughnessMap.isTexture===!0?i=s.mul(this.getTexture(r).g):i=s}else if(r===ge.METALNESS){const s=this.getFloat(r);t.metalnessMap&&t.metalnessMap.isTexture===!0?i=s.mul(this.getTexture(r).b):i=s}else if(r===ge.EMISSIVE){const s=this.getFloat("emissiveIntensity"),o=this.getColor(r).mul(s);t.emissiveMap&&t.emissiveMap.isTexture===!0?i=o.mul(this.getTexture(r)):i=o}else if(r===ge.NORMAL)t.normalMap?(i=iU(this.getTexture("normal"),this.getCache("normalScale","vec2")),i.normalMapType=t.normalMapType):t.bumpMap?i=xTe(this.getTexture("bump").r,this.getFloat("bumpScale")):i=To;else if(r===ge.CLEARCOAT){const s=this.getFloat(r);t.clearcoatMap&&t.clearcoatMap.isTexture===!0?i=s.mul(this.getTexture(r).r):i=s}else if(r===ge.CLEARCOAT_ROUGHNESS){const s=this.getFloat(r);t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?i=s.mul(this.getTexture(r).r):i=s}else if(r===ge.CLEARCOAT_NORMAL)t.clearcoatNormalMap?i=iU(this.getTexture(r),this.getCache(r+"Scale","vec2")):i=To;else if(r===ge.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?i=s.mul(this.getTexture("sheenColor").rgb):i=s}else if(r===ge.SHEEN_ROUGHNESS){const s=this.getFloat(r);t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?i=s.mul(this.getTexture(r).a):i=s,i=i.clamp(.07,1)}else if(r===ge.ANISOTROPY)if(t.anisotropyMap&&t.anisotropyMap.isTexture===!0){const s=this.getTexture(r);i=x2(sm.x,sm.y,sm.y.negate(),sm.x).mul(s.rg.mul(2).sub(Ke(1)).normalize().mul(s.b))}else i=sm;else if(r===ge.IRIDESCENCE_THICKNESS){const s=Un("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const o=Un("0","float",t.iridescenceThicknessRange);i=s.sub(o).mul(this.getTexture(r).g).add(o)}else i=s}else if(r===ge.TRANSMISSION){const s=this.getFloat(r);t.transmissionMap?i=s.mul(this.getTexture(r).r):i=s}else if(r===ge.THICKNESS){const s=this.getFloat(r);t.thicknessMap?i=s.mul(this.getTexture(r).g):i=s}else if(r===ge.IOR)i=this.getFloat(r);else if(r===ge.LIGHT_MAP)i=this.getTexture(r).rgb.mul(this.getFloat("lightMapIntensity"));else if(r===ge.AO_MAP)i=this.getTexture(r).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else{const s=this.getNodeType(e);i=this.getCache(r,s)}return i}}ge.ALPHA_TEST="alphaTest";ge.COLOR="color";ge.OPACITY="opacity";ge.SHININESS="shininess";ge.SPECULAR="specular";ge.SPECULAR_STRENGTH="specularStrength";ge.SPECULAR_INTENSITY="specularIntensity";ge.SPECULAR_COLOR="specularColor";ge.REFLECTIVITY="reflectivity";ge.ROUGHNESS="roughness";ge.METALNESS="metalness";ge.NORMAL="normal";ge.CLEARCOAT="clearcoat";ge.CLEARCOAT_ROUGHNESS="clearcoatRoughness";ge.CLEARCOAT_NORMAL="clearcoatNormal";ge.EMISSIVE="emissive";ge.ROTATION="rotation";ge.SHEEN="sheen";ge.SHEEN_ROUGHNESS="sheenRoughness";ge.ANISOTROPY="anisotropy";ge.IRIDESCENCE="iridescence";ge.IRIDESCENCE_IOR="iridescenceIOR";ge.IRIDESCENCE_THICKNESS="iridescenceThickness";ge.IOR="ior";ge.TRANSMISSION="transmission";ge.THICKNESS="thickness";ge.ATTENUATION_DISTANCE="attenuationDistance";ge.ATTENUATION_COLOR="attenuationColor";ge.LINE_SCALE="scale";ge.LINE_DASH_SIZE="dashSize";ge.LINE_GAP_SIZE="gapSize";ge.LINE_WIDTH="linewidth";ge.LINE_DASH_OFFSET="dashOffset";ge.POINT_WIDTH="pointWidth";ge.DISPERSION="dispersion";ge.LIGHT_MAP="light";ge.AO_MAP="ao";const STe=ze(ge,ge.ALPHA_TEST),bTe=ze(ge,ge.COLOR),wTe=ze(ge,ge.SHININESS),TTe=ze(ge,ge.EMISSIVE),YH=ze(ge,ge.OPACITY),MTe=ze(ge,ge.SPECULAR),oU=ze(ge,ge.SPECULAR_INTENSITY),ETe=ze(ge,ge.SPECULAR_COLOR),T_=ze(ge,ge.SPECULAR_STRENGTH),UT=ze(ge,ge.REFLECTIVITY),CTe=ze(ge,ge.ROUGHNESS),ATe=ze(ge,ge.METALNESS),RTe=ze(ge,ge.NORMAL).context({getUV:null}),NTe=ze(ge,ge.CLEARCOAT),PTe=ze(ge,ge.CLEARCOAT_ROUGHNESS),ITe=ze(ge,ge.CLEARCOAT_NORMAL).context({getUV:null}),LTe=ze(ge,ge.ROTATION),DTe=ze(ge,ge.SHEEN),FTe=ze(ge,ge.SHEEN_ROUGHNESS),OTe=ze(ge,ge.ANISOTROPY),kTe=ze(ge,ge.IRIDESCENCE),UTe=ze(ge,ge.IRIDESCENCE_IOR),BTe=ze(ge,ge.IRIDESCENCE_THICKNESS),zTe=ze(ge,ge.TRANSMISSION),$Te=ze(ge,ge.THICKNESS),VTe=ze(ge,ge.IOR),GTe=ze(ge,ge.ATTENUATION_DISTANCE),HTe=ze(ge,ge.ATTENUATION_COLOR),WTe=ze(ge,ge.LINE_SCALE),jTe=ze(ge,ge.LINE_DASH_SIZE),qTe=ze(ge,ge.LINE_GAP_SIZE);ge.LINE_WIDTH;ge.LINE_DASH_OFFSET;ge.POINT_WIDTH;const XTe=ze(ge,ge.DISPERSION),ZH=ze(ge,ge.LIGHT_MAP),KTe=ze(ge,ge.AO_MAP),sm=Mt(new zt).onReference(function(n){return n.material}).onRenderUpdate(function({material:n}){this.value.set(n.anisotropy*Math.cos(n.anisotropyRotation),n.anisotropy*Math.sin(n.anisotropyRotation))});class YTe extends hr{static get type(){return"ModelViewProjectionNode"}constructor(e=null){super("vec4"),this.positionNode=e}setup(e){if(e.shaderStage==="fragment")return dl(e.context.mvp);const t=this.positionNode||ei,r=e.renderer.nodes.modelViewMatrix||o1;return A2.mul(r).mul(t)}}const YA=Ae(YTe);class En extends wt{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isInstanceIndexNode=!0}generate(e){const t=this.getNodeType(e),r=this.scope;let i;if(r===En.VERTEX)i=e.getVertexIndex();else if(r===En.INSTANCE)i=e.getInstanceIndex();else if(r===En.DRAW)i=e.getDrawIndex();else if(r===En.INVOCATION_LOCAL)i=e.getInvocationLocalIndex();else if(r===En.INVOCATION_SUBGROUP)i=e.getInvocationSubgroupIndex();else if(r===En.SUBGROUP)i=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+r);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=i:s=dl(this).build(e,t),s}}En.VERTEX="vertex";En.INSTANCE="instance";En.SUBGROUP="subgroup";En.INVOCATION_LOCAL="invocationLocal";En.INVOCATION_SUBGROUP="invocationSubgroup";En.DRAW="draw";const ZTe=ze(En,En.VERTEX),I2=ze(En,En.INSTANCE);En.SUBGROUP;En.INVOCATION_SUBGROUP;En.INVOCATION_LOCAL;const QTe=ze(En,En.DRAW);class JTe extends wt{static get type(){return"InstanceNode"}constructor(e){super("void"),this.instanceMesh=e,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=Nt.FRAME,this.buffer=null,this.bufferColor=null}setup(e){let t=this.instanceMatrixNode,r=this.instanceColorNode;const i=this.instanceMesh;if(t===null){const a=i.instanceMatrix;if(i.count<=1e3)t=R2(a.array,"mat4",Math.max(i.count,1)).element(I2);else{const l=new Rbe(a.array,16,1);this.buffer=l;const c=a.usage===Ed?tU:eU,u=[c(l,"vec4",16,0),c(l,"vec4",16,4),c(l,"vec4",16,8),c(l,"vec4",16,12)];t=Qd(...u)}this.instanceMatrixNode=t}const s=i.instanceColor;if(s&&r===null){const a=new mbe(s.array,3),l=s.usage===Ed?tU:eU;this.bufferColor=a,r=Me(l(a,"vec3",3,0)),this.instanceColorNode=r}const o=t.mul(ei).xyz;if(ei.assign(o),e.hasGeometryAttribute("normal")){const a=tTe(Zo,t);Zo.assign(a)}this.instanceColorNode!==null&&Yx("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMesh.instanceMatrix.usage!==Ed&&this.buffer!=null&&this.instanceMesh.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMesh.instanceMatrix.version),this.instanceMesh.instanceColor&&this.instanceMesh.instanceColor.usage!==Ed&&this.bufferColor!=null&&this.instanceMesh.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceMesh.instanceColor.version)}}const eMe=Ae(JTe);class tMe extends wt{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=I2:this.batchingIdNode=QTe);const r=je(([p])=>{const y=rg(to(this.batchMesh._indirectTexture),0),g=qn(p).modInt(qn(y)),m=qn(p).div(qn(y));return to(this.batchMesh._indirectTexture,Ea(g,m)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(qn(this.batchingIdNode)),i=this.batchMesh._matricesTexture,s=rg(to(i),0),o=Ce(r).mul(4).toInt().toVar(),a=o.modInt(s),l=o.div(qn(s)),c=Qd(to(i,Ea(a,l)),to(i,Ea(a.add(1),l)),to(i,Ea(a.add(2),l)),to(i,Ea(a.add(3),l))),u=this.batchMesh._colorsTexture;if(u!==null){const y=je(([g])=>{const m=rg(to(u),0).x,_=g,v=_.modInt(m),x=_.div(m);return to(u,Ea(v,x)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(r);Yx("vec3","vBatchColor").assign(y)}const h=zi(c);ei.assign(c.mul(ei));const d=Zo.div(Me(h[0].dot(h[0]),h[1].dot(h[1]),h[2].dot(h[2]))),f=h.mul(d).xyz;Zo.assign(f),e.hasGeometryAttribute("tangent")&&P2.mulAssign(h)}}const nMe=Ae(tMe),aU=new WeakMap;class rMe extends wt{static get type(){return"SkinningNode"}constructor(e,t=!1){super("void"),this.skinnedMesh=e,this.useReference=t,this.updateType=Nt.OBJECT,this.skinIndexNode=sl("skinIndex","uvec4"),this.skinWeightNode=sl("skinWeight","vec4");let r,i,s;t?(r=Un("bindMatrix","mat4"),i=Un("bindMatrixInverse","mat4"),s=rU("skeleton.boneMatrices","mat4",e.skeleton.bones.length)):(r=Mt(e.bindMatrix,"mat4"),i=Mt(e.bindMatrixInverse,"mat4"),s=R2(e.skeleton.boneMatrices,"mat4",e.skeleton.bones.length)),this.bindMatrixNode=r,this.bindMatrixInverseNode=i,this.boneMatricesNode=s,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,t=ei){const{skinIndexNode:r,skinWeightNode:i,bindMatrixNode:s,bindMatrixInverseNode:o}=this,a=e.element(r.x),l=e.element(r.y),c=e.element(r.z),u=e.element(r.w),h=s.mul(t),d=ds(a.mul(i.x).mul(h),l.mul(i.y).mul(h),c.mul(i.z).mul(h),u.mul(i.w).mul(h));return o.mul(d).xyz}getSkinnedNormal(e=this.boneMatricesNode,t=Zo){const{skinIndexNode:r,skinWeightNode:i,bindMatrixNode:s,bindMatrixInverseNode:o}=this,a=e.element(r.x),l=e.element(r.y),c=e.element(r.z),u=e.element(r.w);let h=ds(i.x.mul(a),i.y.mul(l),i.z.mul(c),i.w.mul(u));return h=o.mul(h).mul(s),h.transformDirection(t).xyz}getPreviousSkinnedPosition(e){const t=e.object;return this.previousBoneMatricesNode===null&&(t.skeleton.previousBoneMatrices=new Float32Array(t.skeleton.boneMatrices),this.previousBoneMatricesNode=rU("skeleton.previousBoneMatrices","mat4",t.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,nU)}needsPreviousBoneMatrices(e){const t=e.renderer.getMRT();return t&&t.has("velocity")}setup(e){this.needsPreviousBoneMatrices(e)&&nU.assign(this.getPreviousSkinnedPosition(e));const t=this.getSkinnedPosition();if(ei.assign(t),e.hasGeometryAttribute("normal")){const r=this.getSkinnedNormal();Zo.assign(r),e.hasGeometryAttribute("tangent")&&P2.assign(r)}}generate(e,t){if(t!=="void")return ei.build(e,t)}update(e){const r=(this.useReference?e.object:this.skinnedMesh).skeleton;aU.get(r)!==e.frameId&&(aU.set(r,e.frameId),this.previousBoneMatricesNode!==null&&r.previousBoneMatrices.set(r.boneMatrices),r.update())}}const iMe=n=>Ue(new rMe(n,!0));class sMe extends wt{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const t=e.getNodeProperties(this);if(t.stackNode!==void 0)return t;const r={};for(let s=0,o=this.params.length-1;s<o;s++){const a=this.params[s],l=a.isNode!==!0&&a.name||this.getVarName(s),c=a.isNode!==!0&&a.type||"int";r[l]=Hg(l,c)}const i=e.addStack();return t.returnsNode=this.params[this.params.length-1](r,i,e),t.stackNode=i,e.removeStack(),t}getNodeType(e){const{returnsNode:t}=this.getProperties(e);return t?t.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const t=this.getProperties(e),r=this.params,i=t.stackNode;for(let a=0,l=r.length-1;a<l;a++){const c=r[a];let u=null,h=null,d=null,f=null,p=null,y=null;c.isNode?(f="int",d=this.getVarName(a),u="0",h=c.build(e,f),p="<"):(f=c.type||"int",d=c.name||this.getVarName(a),u=c.start,h=c.end,p=c.condition,y=c.update,typeof u=="number"?u=u.toString():u&&u.isNode&&(u=u.build(e,f)),typeof h=="number"?h=h.toString():h&&h.isNode&&(h=h.build(e,f)),u!==void 0&&h===void 0?(u=u+" - 1",h="0",p=">="):h!==void 0&&u===void 0&&(u="0",p="<"),p===void 0&&(Number(u)>Number(h)?p=">=":p="<"));const g={start:u,end:h,condition:p},m=g.start,_=g.end;let v="",x="",b="";y||(f==="int"||f==="uint"?p.includes("<")?y="++":y="--":p.includes("<")?y="+= 1.":y="-= 1."),v+=e.getVar(f,d)+" = "+m,x+=d+" "+p+" "+_,b+=d+" "+y;const T=`for ( ${v}; ${x}; ${b} )`;e.addFlowCode((a===0?`
`:"")+e.tab+T+` {

`).addFlowTab()}const s=i.build(e,"void"),o=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let a=0,l=this.params.length-1;a<l;a++)e.addFlowCode((a===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),o}}const Va=(...n)=>Ue(new sMe(Zd(n,"int"))).append(),oMe=()=>Hg("break").append(),BT=new WeakMap,Qi=new tn,lU=je(({bufferMap:n,influence:e,stride:t,width:r,depth:i,offset:s})=>{const o=qn(ZTe).mul(t).add(s),a=o.div(r),l=o.sub(a.mul(r));return to(n,Ea(l,a)).depth(i).mul(e)});function aMe(n){const e=n.morphAttributes.position!==void 0,t=n.morphAttributes.normal!==void 0,r=n.morphAttributes.color!==void 0,i=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,s=i!==void 0?i.length:0;let o=BT.get(n);if(o===void 0||o.count!==s){let _=function(){g.dispose(),BT.delete(n),n.removeEventListener("dispose",_)};var a=_;o!==void 0&&o.texture.dispose();const l=n.morphAttributes.position||[],c=n.morphAttributes.normal||[],u=n.morphAttributes.color||[];let h=0;e===!0&&(h=1),t===!0&&(h=2),r===!0&&(h=3);let d=n.attributes.position.count*h,f=1;const p=4096;d>p&&(f=Math.ceil(d/p),d=p);const y=new Float32Array(d*f*4*s),g=new KSe(y,d,f,s);g.type=os,g.needsUpdate=!0;const m=h*4;for(let v=0;v<s;v++){const x=l[v],b=c[v],T=u[v],w=d*f*4*v;for(let M=0;M<x.count;M++){const A=M*m;e===!0&&(Qi.fromBufferAttribute(x,M),y[w+A+0]=Qi.x,y[w+A+1]=Qi.y,y[w+A+2]=Qi.z,y[w+A+3]=0),t===!0&&(Qi.fromBufferAttribute(b,M),y[w+A+4]=Qi.x,y[w+A+5]=Qi.y,y[w+A+6]=Qi.z,y[w+A+7]=0),r===!0&&(Qi.fromBufferAttribute(T,M),y[w+A+8]=Qi.x,y[w+A+9]=Qi.y,y[w+A+10]=Qi.z,y[w+A+11]=T.itemSize===4?Qi.w:1)}}o={count:s,texture:g,stride:h,size:new zt(d,f)},BT.set(n,o),n.addEventListener("dispose",_)}return o}class lMe extends wt{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=Mt(1),this.updateType=Nt.OBJECT}setup(e){const{geometry:t}=e,r=t.morphAttributes.position!==void 0,i=t.hasAttribute("normal")&&t.morphAttributes.normal!==void 0,s=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,o=s!==void 0?s.length:0,{texture:a,stride:l,size:c}=aMe(t);r===!0&&ei.mulAssign(this.morphBaseInfluence),i===!0&&Zo.mulAssign(this.morphBaseInfluence);const u=qn(c.width);Va(o,({i:h})=>{const d=Ce(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?d.assign(to(this.mesh.morphTexture,Ea(qn(h).add(1),qn(I2))).r):d.assign(Un("morphTargetInfluences","float").element(h).toVar()),r===!0&&ei.addAssign(lU({bufferMap:a,influence:d,stride:l,width:u,depth:h,offset:qn(0)})),i===!0&&Zo.addAssign(lU({bufferMap:a,influence:d,stride:l,width:u,depth:h,offset:qn(1)}))})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((t,r)=>t+r,0)}}const cMe=Ae(lMe),uMe=n=>n.sort((e,t)=>e.id-t.id),hMe=(n,e)=>{for(const t of e)if(t.isAnalyticLightNode&&t.light.id===n)return t;return null},zT=new WeakMap;class QH extends wt{static get type(){return"LightsNode"}constructor(e=[]){super("vec3"),this.totalDiffuseNode=Me().toVar("totalDiffuse"),this.totalSpecularNode=Me().toVar("totalSpecular"),this.outgoingLightNode=Me().toVar("outgoingLight"),this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this.global=!0}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const t=[];for(const r of this._lightNodes)t.push(r.getHash());this._lightNodesHash="lights-"+t.join(",")}return this._lightNodesHash}analyze(e){const t=e.getDataFromNode(this);for(const r of t.nodes)r.build(e)}setupLightsNode(e){const t=[],r=this._lightNodes,i=uMe(this._lights),s=e.renderer.nodes.library;for(const o of i)if(o.isNode)t.push(Ue(o));else{let a=null;if(r!==null&&(a=hMe(o.id,r)),a===null){const l=s.getLightNodeClass(o.constructor);if(l===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${o.constructor.name}`);continue}let c=null;zT.has(o)?c=zT.get(o):(c=new l(o),zT.set(o,c)),t.push(c)}}this._lightNodes=t}setup(e){this._lightNodes===null&&this.setupLightsNode(e);const t=e.context,r=t.lightingModel;let i=this.outgoingLightNode;if(r){const{_lightNodes:s,totalDiffuseNode:o,totalSpecularNode:a}=this;t.outgoingLight=i;const l=e.addStack(),c=e.getDataFromNode(this);c.nodes=l.nodes,r.start(t,l,e);for(const m of s)m.build(e);r.indirect(t,l,e);const{backdrop:u,backdropAlpha:h}=t,{directDiffuse:d,directSpecular:f,indirectDiffuse:p,indirectSpecular:y}=t.reflectedLight;let g=d.add(p);u!==null&&(h!==null?g=Me(h.mix(g,u)):g=Me(u),t.material.transparent=!0),o.assign(g),a.assign(f.add(y)),i.assign(o.add(a)),r.finish(t,l,e),i=i.bypass(e.removeStack())}return i}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}}const dMe=Ae(QH);class pp extends wt{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}generate(){console.warn("Abstract function.")}}class fMe extends pp{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class pMe extends kH{static get type(){return"LightingContextNode"}constructor(e,t=null,r=null,i=null){super(e),this.lightingModel=t,this.backdropNode=r,this.backdropAlphaNode=i,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:t}=this,r=Me().toVar("directDiffuse"),i=Me().toVar("directSpecular"),s=Me().toVar("indirectDiffuse"),o=Me().toVar("indirectSpecular"),a={directDiffuse:r,directSpecular:i,indirectDiffuse:s,indirectSpecular:o};return{radiance:Me().toVar("radiance"),irradiance:Me().toVar("irradiance"),iblIrradiance:Me().toVar("iblIrradiance"),ambientOcclusion:Ce(1).toVar("ambientOcclusion"),reflectedLight:a,backdrop:e,backdropAlpha:t}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const mMe=Ae(pMe);class gMe extends pp{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}let om,am;class nr extends wt{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===nr.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=Nt.NONE;return(this.scope===nr.SIZE||this.scope===nr.VIEWPORT)&&(e=Nt.RENDER),this.updateType=e,e}update({renderer:e}){const t=e.getRenderTarget();this.scope===nr.VIEWPORT?t!==null?am.copy(t.viewport):(e.getViewport(am),am.multiplyScalar(e.getPixelRatio())):t!==null?(om.width=t.width,om.height=t.height):e.getDrawingBufferSize(om)}setup(){const e=this.scope;let t=null;return e===nr.SIZE?t=Mt(om||(om=new zt)):e===nr.VIEWPORT?t=Mt(am||(am=new tn)):t=Ke(c1.div(ZA)),t}generate(e){if(this.scope===nr.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){const r=e.getNodeProperties(ZA).outputNode.build(e);t=`${e.getType("vec2")}( ${t}.x, ${r}.y - ${t}.y )`}return t}return super.generate(e)}}nr.COORDINATE="coordinate";nr.VIEWPORT="viewport";nr.SIZE="size";nr.UV="uv";const qg=ze(nr,nr.UV),ZA=ze(nr,nr.SIZE),c1=ze(nr,nr.COORDINATE),JH=ze(nr,nr.VIEWPORT);JH.zw;JH.xy;const lm=new zt;class e8 extends Dy{static get type(){return"ViewportTextureNode"}constructor(e=qg,t=null,r=null){r===null&&(r=new vbe,r.minFilter=qa),super(r,e,t),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=Nt.FRAME}updateBefore(e){const t=e.renderer;t.getDrawingBufferSize(lm);const r=this.value;(r.image.width!==lm.width||r.image.height!==lm.height)&&(r.image.width=lm.width,r.image.height=lm.height,r.needsUpdate=!0);const i=r.generateMipmaps;r.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(r),r.generateMipmaps=i}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const yMe=Ae(e8,null,null,{generateMipmaps:!0});let $T=null;class vMe extends e8{static get type(){return"ViewportDepthTextureNode"}constructor(e=qg,t=null){$T===null&&($T=new Py),super(e,t,$T)}}const _Me=Ae(vMe);class Ri extends wt{static get type(){return"ViewportDepthNode"}constructor(e,t=null){super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){const{scope:t}=this;return t===Ri.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:t}=this,r=this.valueNode;let i=null;if(t===Ri.DEPTH_BASE)r!==null&&(i=n8().assign(r));else if(t===Ri.DEPTH)e.isPerspectiveCamera?i=xMe(Zr.z,rm,im):i=M_(Zr.z,rm,im);else if(t===Ri.LINEAR_DEPTH)if(r!==null)if(e.isPerspectiveCamera){const s=t8(r,rm,im);i=M_(s,rm,im)}else i=r;else i=M_(Zr.z,rm,im);return i}}Ri.DEPTH_BASE="depthBase";Ri.DEPTH="depth";Ri.LINEAR_DEPTH="linearDepth";const M_=(n,e,t)=>n.add(e).div(e.sub(t)),xMe=(n,e,t)=>e.add(n).mul(t).div(t.sub(e).mul(n)),t8=(n,e,t)=>e.mul(t).div(t.sub(e).mul(n).sub(t)),n8=Ae(Ri,Ri.DEPTH_BASE),r8=ze(Ri,Ri.DEPTH),SMe=Ae(Ri,Ri.LINEAR_DEPTH);_Me();r8.assign=n=>n8(n);class wc extends wt{static get type(){return"ClippingNode"}constructor(e=wc.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const t=e.clippingContext,{localClipIntersection:r,localClippingCount:i,globalClippingCount:s}=t,o=s+i,a=r?o-i:o;return this.scope===wc.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(t.planes,o,a):this.setupDefault(t.planes,o,a)}setupAlphaToCoverage(e,t,r){return je(()=>{const i=jg(e),s=ld("float","distanceToPlane"),o=ld("float","distanceToGradient"),a=ld("float","clipOpacity");a.assign(1);let l;if(Va(r,({i:c})=>{l=i.element(c),s.assign(Zr.dot(l.xyz).negate().add(l.w)),o.assign(s.fwidth().div(2)),a.mulAssign(Yu(o.negate(),o,s)),a.equal(0).discard()}),r<t){const c=ld("float","unionclipOpacity");c.assign(1),Va({start:r,end:t},({i:u})=>{l=i.element(u),s.assign(Zr.dot(l.xyz).negate().add(l.w)),o.assign(s.fwidth().div(2)),c.mulAssign(Yu(o.negate(),o,s).oneMinus())}),a.mulAssign(c.oneMinus())}en.a.mulAssign(a),en.a.equal(0).discard()})()}setupDefault(e,t,r){return je(()=>{const i=jg(e);let s;if(Va(r,({i:o})=>{s=i.element(o),Zr.dot(s.xyz).greaterThan(s.w).discard()}),r<t){const o=ld("bool","clipped");o.assign(!0),Va({start:r,end:t},({i:a})=>{s=i.element(a),o.assign(Zr.dot(s.xyz).greaterThan(s.w).and(o))}),o.discard()}})()}}wc.ALPHA_TO_COVERAGE="alphaToCoverage";wc.DEFAULT="default";const bMe=()=>Ue(new wc),wMe=()=>Ue(new wc(wc.ALPHA_TO_COVERAGE));class lr extends Bi{static get type(){return"NodeMaterial"}constructor(){super(),this.isNodeMaterial=!0,this.type=this.constructor.type,this.forceSinglePass=!1,this.fog=!0,this.lights=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.depthNode=null,this.shadowNode=null,this.shadowPositionNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+uH(this)}build(e){this.setup(e)}setupObserver(e){return new Pbe(e)}setup(e){e.context.setupNormal=()=>this.setupNormal(e),e.addStack(),e.stack.outputNode=this.vertexNode||this.setupPosition(e),e.addFlow("vertex",e.removeStack()),e.addStack();let t;const r=this.setupClipping(e);if(this.depthWrite===!0&&this.setupDepth(e),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const i=this.setupLighting(e);r!==null&&e.stack.add(r);const s=Tt(i,en.a).max(0);if(t=this.setupOutput(e,s),m1e.assign(t),this.outputNode!==null&&(t=this.outputNode),e.renderer.getRenderTarget()!==null){const a=e.renderer.getMRT(),l=this.mrtNode;a!==null?(t=a,l!==null&&(t=a.merge(l))):l!==null&&(t=l)}}else{let i=this.fragmentNode;i.isOutputStructNode!==!0&&(i=Tt(i)),t=this.setupOutput(e,i)}e.stack.outputNode=t,e.addFlow("fragment",e.removeStack()),e.monitor=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{globalClippingCount:t,localClippingCount:r}=e.clippingContext;let i=null;if(t||r){const s=e.renderer.samples;this.alphaToCoverage&&s>1?i=wMe():e.stack.add(bMe())}return i}setupDepth(e){const{renderer:t}=e;let r=this.depthNode;if(r===null){const i=t.getMRT();i&&i.has("depth")?r=i.get("depth"):t.logarithmicDepthBuffer===!0&&(r=YA().w.add(1).log2().mul(Kwe).mul(.5))}r!==null&&r8.assign(r).append()}setupPosition(e){const{object:t}=e,r=t.geometry;if(e.addStack(),(r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color)&&cMe(t).append(),t.isSkinnedMesh===!0&&iMe(t).append(),this.displacementMap){const s=Wl("displacementMap","texture"),o=Wl("displacementScale","float"),a=Wl("displacementBias","float");ei.addAssign(Zo.normalize().mul(s.x.mul(o).add(a)))}t.isBatchedMesh&&nMe(t).append(),t.instanceMatrix&&t.instanceMatrix.isInstancedBufferAttribute===!0&&eMe(t).append(),this.positionNode!==null&&ei.assign(this.positionNode);const i=YA();return e.context.vertex=e.removeStack(),e.context.mvp=i,i}setupDiffuseColor({object:e,geometry:t}){let r=this.colorNode?Tt(this.colorNode):bTe;this.vertexColors===!0&&t.hasAttribute("color")&&(r=Tt(r.xyz.mul(sl("color","vec3")),r.a)),e.instanceColor&&(r=Yx("vec3","vInstanceColor").mul(r)),e.isBatchedMesh&&e._colorsTexture&&(r=Yx("vec3","vBatchColor").mul(r)),en.assign(r);const i=this.opacityNode?Ce(this.opacityNode):YH;if(en.a.assign(en.a.mul(i)),this.alphaTestNode!==null||this.alphaTest>0){const s=this.alphaTestNode!==null?Ce(this.alphaTestNode):STe;en.a.lessThanEqual(s).discard()}this.transparent===!1&&this.blending===dc&&this.alphaToCoverage===!1&&en.a.assign(1)}setupVariants(){}setupOutgoingLight(){return this.lights===!0?Me(0):en.rgb}setupNormal(){return this.normalNode?Me(this.normalNode):RTe}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?Wl("envMap","cubeTexture"):Wl("envMap","texture")),e}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new gMe(ZH)),t}setupLights(e){const t=[],r=this.setupEnvironment(e);r&&r.isLightingNode&&t.push(r);const i=this.setupLightMap(e);if(i&&i.isLightingNode&&t.push(i),this.aoNode!==null||e.material.aoMap){const o=this.aoNode!==null?this.aoNode:KTe;t.push(new fMe(o))}let s=this.lightsNode||e.lightsNode;return t.length>0&&(s=dMe([...s.getLights(),...t])),s}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:r,backdropAlphaNode:i,emissiveNode:s}=this,a=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let l=this.setupOutgoingLight(e);if(a&&a.getScope().getLights().length>0){const c=this.setupLightingModel(e);l=mMe(a,c,r,i)}else r!==null&&(l=Me(i!==null?Mn(l,r,i):r));return(s&&s.isNode===!0||t.emissive&&t.emissive.isColor===!0)&&(Zk.assign(Me(s||TTe)),l=l.add(Zk)),l}setupOutput(e,t){if(this.fog===!0){const r=e.fogNode;r&&(t=Tt(r.mix(t.rgb,r.colorNode),t.a))}return t}setDefaultValues(e){for(const r in e){const i=e[r];this[r]===void 0&&(this[r]=i,i&&i.clone&&(this[r]=i.clone()))}const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const r in t)Object.getOwnPropertyDescriptor(this.constructor.prototype,r)===void 0&&t[r].get!==void 0&&Object.defineProperty(this.constructor.prototype,r,t[r])}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{},nodes:{}});const r=Bi.prototype.toJSON.call(this,e),i=qx(this);r.inputNodes={};for(const{property:o,childNode:a}of i)r.inputNodes[o]=a.toJSON(e).uuid;function s(o){const a=[];for(const l in o){const c=o[l];delete c.metadata,a.push(c)}return a}if(t){const o=s(e.textures),a=s(e.images),l=s(e.nodes);o.length>0&&(r.textures=o),a.length>0&&(r.images=a),l.length>0&&(r.nodes=l)}return r}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.depthNode=e.depthNode,this.shadowNode=e.shadowNode,this.shadowPositionNode=e.shadowPositionNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const TMe=new h2;class MMe extends lr{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.lights=!1,this.setDefaultValues(TMe),this.setValues(e)}}const EMe=new aH;class CMe extends lr{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.lights=!1,this.setDefaultValues(EMe),this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode,t=this.dashScaleNode?Ce(this.dashScaleNode):WTe,r=this.dashSizeNode?Ce(this.dashSizeNode):jTe,i=this.dashSizeNode?Ce(this.dashGapNode):qTe;kT.assign(r),Qk.assign(i);const s=dl(sl("lineDistance").mul(t));(e?s.add(e):s).mod(kT.add(Qk)).greaterThan(kT).discard()}}const AMe=n=>Ue(n).mul(.5).add(.5),RMe=new iH;class NMe extends lr{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.lights=!1,this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(RMe),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?Ce(this.opacityNode):YH;en.assign(Tt(AMe(sr),e))}}class PMe extends hr{static get type(){return"EquirectUVNode"}constructor(e=GH){super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,t=e.z.atan2(e.x).mul(1/(Math.PI*2)).add(.5),r=e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return Ke(t,r)}}const i8=Ae(PMe);class s8 extends fbe{constructor(e=1,t={}){super(e,t),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,t){const r=t.minFilter,i=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s=new Ny(5,5,5),o=i8(GH),a=new lr;a.colorNode=Xn(t,o,0),a.side=ul,a.blending=Vf;const l=new Ku(s,a),c=new K6;c.add(l),t.minFilter===qa&&(t.minFilter=Ui);const u=new X6(1,10,this),h=e.getMRT();return e.setMRT(null),u.update(e,c),e.setMRT(h),t.minFilter=r,t.currentGenerateMipmaps=i,l.geometry.dispose(),l.material.dispose(),this}}const ig=new WeakMap;class IMe extends hr{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=Wg();const t=new c2;t.isRenderTargetTexture=!0,this._defaultTexture=t,this.updateBeforeType=Nt.RENDER}updateBefore(e){const{renderer:t,material:r}=e,i=this.envNode;if(i.isTextureNode||i.isMaterialReferenceNode){const s=i.isTextureNode?i.value:r[i.property];if(s&&s.isTexture){const o=s.mapping;if(o===My||o===Ey){if(ig.has(s)){const a=ig.get(s);cU(a,s.mapping),this._cubeTexture=a}else{const a=s.image;if(LMe(a)){const l=new s8(a.height);l.fromEquirectangularTexture(t,s),cU(l.texture,s.mapping),this._cubeTexture=l.texture,ig.set(s,l.texture),s.addEventListener("dispose",o8)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function LMe(n){return n==null?!1:n.height>0}function o8(n){const e=n.target;e.removeEventListener("dispose",o8);const t=ig.get(e);t!==void 0&&(ig.delete(e),t.dispose())}function cU(n,e){e===My?n.mapping=ju:e===Ey&&(n.mapping=Gf)}const a8=Ae(IMe);class L2 extends pp{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=a8(this.envNode)}}class DMe extends pp{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const t=Ce(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(t)}}class u1{start(){}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class l8 extends u1{constructor(){super()}indirect(e,t,r){const i=e.ambientOcclusion,s=e.reflectedLight,o=r.context.irradianceLightMap;s.indirectDiffuse.assign(Tt(0)),o?s.indirectDiffuse.addAssign(o):s.indirectDiffuse.addAssign(Tt(1,1,1,0)),s.indirectDiffuse.mulAssign(i),s.indirectDiffuse.mulAssign(en.rgb)}finish(e,t,r){const i=r.material,s=e.outgoingLight,o=r.context.environment;if(o)switch(i.combine){case Yb:s.rgb.assign(Mn(s.rgb,s.rgb.mul(o.rgb),T_.mul(UT)));break;case qxe:s.rgb.assign(Mn(s.rgb,o.rgb,T_.mul(UT)));break;case Xxe:s.rgb.addAssign(o.rgb.mul(T_.mul(UT)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",i.combine);break}}}const FMe=new Zb;class OMe extends lr{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(FMe),this.setValues(e)}setupNormal(){return To}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new L2(t):null}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new DMe(ZH)),t}setupOutgoingLight(){return en.rgb}setupLightingModel(){return new l8}}const Xg=je(({f0:n,f90:e,dotVH:t})=>{const r=t.mul(-5.55473).sub(6.98316).mul(t).exp2();return n.mul(r.oneMinus()).add(e.mul(r))}),jf=je(n=>n.diffuseColor.mul(1/Math.PI)),kMe=()=>Ce(.25),UMe=je(({dotNH:n})=>WA.mul(Ce(.5)).add(1).mul(Ce(1/Math.PI)).mul(n.pow(WA))),BMe=je(({lightDirection:n})=>{const e=n.add(kn).normalize(),t=sr.dot(e).clamp(),r=kn.dot(e).clamp(),i=Xg({f0:rs,f90:1,dotVH:r}),s=kMe(),o=UMe({dotNH:t});return i.mul(s).mul(o)});class c8 extends l8{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:r}){const s=sr.dot(e).clamp().mul(t);r.directDiffuse.addAssign(s.mul(jf({diffuseColor:en.rgb}))),this.specular===!0&&r.directSpecular.addAssign(s.mul(BMe({lightDirection:e})).mul(T_))}indirect({ambientOcclusion:e,irradiance:t,reflectedLight:r}){r.indirectDiffuse.addAssign(t.mul(jf({diffuseColor:en}))),r.indirectDiffuse.mulAssign(e)}}const zMe=new sH;class $Me extends lr{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(zMe),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new L2(t):null}setupLightingModel(){return new c8(!1)}}const VMe=new nH;class GMe extends lr{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(VMe),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new L2(t):null}setupLightingModel(){return new c8}setupVariants(){const e=(this.shininessNode?Ce(this.shininessNode):wTe).max(1e-4);WA.assign(e);const t=this.specularNode||MTe;rs.assign(t)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const HMe=je(()=>{const n=To.dFdx().abs().max(To.dFdy().abs());return n.x.max(n.y).max(n.z)}),u8=je(n=>{const{roughness:e}=n,t=HMe();let r=e.max(.0525);return r=r.add(t),r=r.min(1),r}),WMe=je(({alpha:n,dotNL:e,dotNV:t})=>{const r=n.pow2(),i=e.mul(r.add(r.oneMinus().mul(t.pow2())).sqrt()),s=t.mul(r.add(r.oneMinus().mul(e.pow2())).sqrt());return Sc(.5,i.add(s).max(k1e))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),jMe=je(({alphaT:n,alphaB:e,dotTV:t,dotBV:r,dotTL:i,dotBL:s,dotNV:o,dotNL:a})=>{const l=a.mul(Me(n.mul(t),e.mul(r),o).length()),c=o.mul(Me(n.mul(i),e.mul(s),a).length());return Sc(.5,l.add(c)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),qMe=je(({alpha:n,dotNH:e})=>{const t=n.pow2(),r=e.pow2().mul(t.oneMinus()).oneMinus();return t.div(r.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),XMe=Ce(1/Math.PI),KMe=je(({alphaT:n,alphaB:e,dotNH:t,dotTH:r,dotBH:i})=>{const s=n.mul(e),o=Me(e.mul(r),n.mul(i),s.mul(t)),a=o.dot(o),l=s.div(a);return XMe.mul(s.mul(l.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),uU=je(n=>{const{lightDirection:e,f0:t,f90:r,roughness:i,f:s,USE_IRIDESCENCE:o,USE_ANISOTROPY:a}=n,l=n.normalView||sr,c=i.pow2(),u=e.add(kn).normalize(),h=l.dot(e).clamp(),d=l.dot(kn).clamp(),f=l.dot(u).clamp(),p=kn.dot(u).clamp();let y=Xg({f0:t,f90:r,dotVH:p}),g,m;if(Yk(o)&&(y=b2.mix(y,s)),Yk(a)){const _=S_.dot(e),v=S_.dot(kn),x=S_.dot(u),b=Jd.dot(e),T=Jd.dot(kn),w=Jd.dot(u);g=jMe({alphaT:HA,alphaB:c,dotTV:v,dotBV:T,dotTL:_,dotBL:b,dotNV:d,dotNL:h}),m=KMe({alphaT:HA,alphaB:c,dotNH:f,dotTH:x,dotBH:w})}else g=WMe({alpha:c,dotNL:h,dotNV:d}),m=qMe({alpha:c,dotNH:f});return y.mul(g).mul(m)}),h8=je(({roughness:n,dotNV:e})=>{const t=Tt(-1,-.0275,-.572,.022),r=Tt(1,.0425,1.04,-.04),i=n.mul(t).add(r),s=i.x.mul(i.x).min(e.mul(-9.28).exp2()).mul(i.x).add(i.y);return Ke(-1.04,1.04).mul(s).add(i.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),d8=je(n=>{const{dotNV:e,specularColor:t,specularF90:r,roughness:i}=n,s=h8({dotNV:e,roughness:i});return t.mul(s.x).add(r.mul(s.y))}),YMe=je(({f:n,f90:e,dotVH:t})=>{const r=t.oneMinus().saturate(),i=r.mul(r),s=r.mul(i,i).clamp(0,.9999);return n.sub(Me(e).mul(s)).div(s.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),ZMe=je(({roughness:n,dotNH:e})=>{const t=n.pow2(),r=Ce(1).div(t),s=e.pow2().oneMinus().max(.0078125);return Ce(2).add(r).mul(s.pow(r.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),QMe=je(({dotNV:n,dotNL:e})=>Ce(1).div(Ce(4).mul(e.add(n).sub(e.mul(n))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),JMe=je(({lightDirection:n})=>{const e=n.add(kn).normalize(),t=sr.dot(n).clamp(),r=sr.dot(kn).clamp(),i=sr.dot(e).clamp(),s=ZMe({roughness:S2,dotNH:i}),o=QMe({dotNV:r,dotNL:t});return Ad.mul(s).mul(o)}),eEe=je(({N:n,V:e,roughness:t})=>{const s=.0078125,o=n.dot(e).saturate(),a=Ke(t,o.oneMinus().sqrt());return a.assign(a.mul(.984375).add(s)),a}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),tEe=je(({f:n})=>{const e=n.length();return wo(e.mul(e).add(n.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),pv=je(({v1:n,v2:e})=>{const t=n.dot(e),r=t.abs().toVar(),i=r.mul(.0145206).add(.4965155).mul(r).add(.8543985).toVar(),s=r.add(4.1616724).mul(r).add(3.417594).toVar(),o=i.div(s),a=t.greaterThan(0).select(o,wo(t.mul(t).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(o));return n.cross(e).mul(a)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),hU=je(({N:n,V:e,P:t,mInv:r,p0:i,p1:s,p2:o,p3:a})=>{const l=s.sub(i).toVar(),c=a.sub(i).toVar(),u=l.cross(c),h=Me().toVar();return Jr(u.dot(t.sub(i)).greaterThanEqual(0),()=>{const d=e.sub(n.mul(e.dot(n))).normalize(),f=n.cross(d).negate(),p=r.mul(zi(d,f,n).transpose()).toVar(),y=p.mul(i.sub(t)).normalize().toVar(),g=p.mul(s.sub(t)).normalize().toVar(),m=p.mul(o.sub(t)).normalize().toVar(),_=p.mul(a.sub(t)).normalize().toVar(),v=Me(0).toVar();v.addAssign(pv({v1:y,v2:g})),v.addAssign(pv({v1:g,v2:m})),v.addAssign(pv({v1:m,v2:_})),v.addAssign(pv({v1:_,v2:y})),h.assign(Me(tEe({f:v})))}),h}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),h1=1/6,f8=n=>cn(h1,cn(n,cn(n,n.negate().add(3)).sub(3)).add(1)),QA=n=>cn(h1,cn(n,cn(n,cn(3,n).sub(6))).add(4)),p8=n=>cn(h1,cn(n,cn(n,cn(-3,n).add(3)).add(3)).add(1)),JA=n=>cn(h1,r1(n,3)),dU=n=>f8(n).add(QA(n)),fU=n=>p8(n).add(JA(n)),pU=n=>ds(-1,QA(n).div(f8(n).add(QA(n)))),mU=n=>ds(1,JA(n).div(p8(n).add(JA(n)))),gU=(n,e,t)=>{const r=n.uvNode,i=cn(r,e.zw).add(.5),s=n1(i),o=fp(i),a=dU(o.x),l=fU(o.x),c=pU(o.x),u=mU(o.x),h=pU(o.y),d=mU(o.y),f=Ke(s.x.add(c),s.y.add(h)).sub(.5).mul(e.xy),p=Ke(s.x.add(u),s.y.add(h)).sub(.5).mul(e.xy),y=Ke(s.x.add(c),s.y.add(d)).sub(.5).mul(e.xy),g=Ke(s.x.add(u),s.y.add(d)).sub(.5).mul(e.xy),m=dU(o.y).mul(ds(a.mul(n.uv(f).level(t)),l.mul(n.uv(p).level(t)))),_=fU(o.y).mul(ds(a.mul(n.uv(y).level(t)),l.mul(n.uv(g).level(t))));return m.add(_)},nEe=je(([n,e=Ce(3)])=>{const t=Ke(n.size(qn(e))),r=Ke(n.size(qn(e.add(1)))),i=Sc(1,t),s=Sc(1,r),o=gU(n,Tt(i,t),n1(e)),a=gU(n,Tt(s,r),NH(e));return fp(e).mix(o,a)}),yU=je(([n,e,t,r,i])=>{const s=Me(OH(e.negate(),Gg(n),Sc(1,r))),o=Me(ef(i[0].xyz),ef(i[1].xyz),ef(i[2].xyz));return Gg(s).mul(t.mul(o))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),rEe=je(([n,e])=>n.mul(bc(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),iEe=yMe(),vU=je(([n,e,t])=>{const r=iEe.uv(n),i=t1(Ce(ZA.x)).mul(rEe(e,t));return nEe(r,i)}),_U=je(([n,e,t])=>(Jr(t.notEqual(0),()=>{const r=RH(e).negate().div(t);return AH(r.negate().mul(n))}),Me(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),sEe=je(([n,e,t,r,i,s,o,a,l,c,u,h,d,f,p])=>{let y,g;if(p){y=Tt().toVar(),g=Me().toVar();const b=u.sub(1).mul(p.mul(.025)),T=Me(u.sub(b),u,u.add(b));Va({start:0,end:3},({i:w})=>{const M=T.element(w),A=yU(n,e,h,M,a),S=o.add(A),E=c.mul(l.mul(Tt(S,1))),I=Ke(E.xy.div(E.w)).toVar();I.addAssign(1),I.divAssign(2),I.assign(Ke(I.x,I.y.oneMinus()));const O=vU(I,t,M);y.element(w).assign(O.element(w)),y.a.addAssign(O.a),g.element(w).assign(r.element(w).mul(_U(ef(A),d,f).element(w)))}),y.a.divAssign(3)}else{const b=yU(n,e,h,u,a),T=o.add(b),w=c.mul(l.mul(Tt(T,1))),M=Ke(w.xy.div(w.w)).toVar();M.addAssign(1),M.divAssign(2),M.assign(Ke(M.x,M.y.oneMinus())),y=vU(M,t,u),g=r.mul(_U(ef(b),d,f))}const m=g.rgb.mul(y.rgb),_=n.dot(e).clamp(),v=Me(d8({dotNV:_,specularColor:i,specularF90:s,roughness:t})),x=g.r.add(g.g,g.b).div(3);return Tt(v.oneMinus().mul(m),y.a.oneMinus().mul(x).oneMinus())}),oEe=zi(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),aEe=n=>{const e=n.sqrt();return Me(1).add(e).div(Me(1).sub(e))},xU=(n,e)=>n.sub(e).div(n.add(e)).pow2(),lEe=(n,e)=>{const t=n.mul(2*Math.PI*1e-9),r=Me(54856e-17,44201e-17,52481e-17),i=Me(1681e3,1795300,2208400),s=Me(43278e5,93046e5,66121e5),o=Ce(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(t.mul(2239900).add(e.x).cos()).mul(t.pow2().mul(-45282e5).exp());let a=r.mul(s.mul(2*Math.PI).sqrt()).mul(i.mul(t).add(e).cos()).mul(t.pow2().negate().mul(s).exp());return a=Me(a.x.add(o),a.y,a.z).div(10685e-11),oEe.mul(a)},cEe=je(({outsideIOR:n,eta2:e,cosTheta1:t,thinFilmThickness:r,baseF0:i})=>{const s=Mn(n,e,Yu(0,.03,r)),o=n.div(s).pow2().mul(Ce(1).sub(t.pow2())),l=Ce(1).sub(o).sqrt(),c=xU(s,n),u=Xg({f0:c,f90:1,dotVH:t}),h=u.oneMinus(),d=s.lessThan(n).select(Math.PI,0),f=Ce(Math.PI).sub(d),p=aEe(i.clamp(0,.9999)),y=xU(p,s.toVec3()),g=Xg({f0:y,f90:1,dotVH:l}),m=Me(p.x.lessThan(s).select(Math.PI,0),p.y.lessThan(s).select(Math.PI,0),p.z.lessThan(s).select(Math.PI,0)),_=s.mul(r,l,2),v=Me(f).add(m),x=u.mul(g).clamp(1e-5,.9999),b=x.sqrt(),T=h.pow2().mul(g).div(Me(1).sub(x));let M=u.add(T),A=T.sub(h);for(let S=1;S<=2;++S){A=A.mul(b);const E=lEe(Ce(S).mul(_),Ce(S).mul(v)).mul(2);M=M.add(A.mul(E))}return M.max(Me(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),uEe=je(({normal:n,viewDir:e,roughness:t})=>{const r=n.dot(e).saturate(),i=t.pow2(),s=Ai(t.lessThan(.25),Ce(-339.2).mul(i).add(Ce(161.4).mul(t)).sub(25.9),Ce(-8.48).mul(i).add(Ce(14.3).mul(t)).sub(9.95)),o=Ai(t.lessThan(.25),Ce(44).mul(i).sub(Ce(23.7).mul(t)).add(3.26),Ce(1.97).mul(i).sub(Ce(3.27).mul(t)).add(.72));return Ai(t.lessThan(.25),0,Ce(.1).mul(t).sub(.025)).add(s.mul(r).add(o).exp()).mul(1/Math.PI).saturate()}),VT=Me(.04),GT=Ce(1);class m8 extends u1{constructor(e=!1,t=!1,r=!1,i=!1,s=!1,o=!1){super(),this.clearcoat=e,this.sheen=t,this.iridescence=r,this.anisotropy=i,this.transmission=s,this.dispersion=o,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=Me().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=Me().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=Me().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=Me().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=Me().toVar("sheenSpecularIndirect")),this.iridescence===!0){const t=sr.dot(kn).clamp();this.iridescenceFresnel=cEe({outsideIOR:Ce(1),eta2:xH,cosTheta1:t,thinFilmThickness:SH,baseF0:rs}),this.iridescenceF0=YMe({f:this.iridescenceFresnel,f90:1,dotVH:t})}if(this.transmission===!0){const t=KA,r=Ywe.sub(KA).normalize(),i=WH;e.backdrop=sEe(i,r,Ia,en,rs,Jx,t,Zu,fl,A2,b_,bH,TH,wH,this.dispersion?MH:null),e.backdropAlpha=jA,en.a.mulAssign(Mn(1,e.backdrop.a,jA))}}computeMultiscattering(e,t,r){const i=sr.dot(kn).clamp(),s=h8({roughness:Ia,dotNV:i}),a=(this.iridescenceF0?b2.mix(rs,this.iridescenceF0):rs).mul(s.x).add(r.mul(s.y)),c=s.x.add(s.y).oneMinus(),u=rs.add(rs.oneMinus().mul(.047619)),h=a.mul(u).div(c.mul(u).oneMinus());e.addAssign(a),t.addAssign(h.mul(c))}direct({lightDirection:e,lightColor:t,reflectedLight:r}){const s=sr.dot(e).clamp().mul(t);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(s.mul(JMe({lightDirection:e}))),this.clearcoat===!0){const a=Rm.dot(e).clamp().mul(t);this.clearcoatSpecularDirect.addAssign(a.mul(uU({lightDirection:e,f0:VT,f90:GT,roughness:Qx,normalView:Rm})))}r.directDiffuse.addAssign(s.mul(jf({diffuseColor:en.rgb}))),r.directSpecular.addAssign(s.mul(uU({lightDirection:e,f0:rs,f90:1,roughness:Ia,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:t,halfWidth:r,halfHeight:i,reflectedLight:s,ltc_1:o,ltc_2:a}){const l=t.add(r).sub(i),c=t.sub(r).sub(i),u=t.sub(r).add(i),h=t.add(r).add(i),d=sr,f=kn,p=Zr.toVar(),y=eEe({N:d,V:f,roughness:Ia}),g=o.uv(y).toVar(),m=a.uv(y).toVar(),_=zi(Me(g.x,0,g.y),Me(0,1,0),Me(g.z,0,g.w)).toVar(),v=rs.mul(m.x).add(rs.oneMinus().mul(m.y)).toVar();s.directSpecular.addAssign(e.mul(v).mul(hU({N:d,V:f,P:p,mInv:_,p0:l,p1:c,p2:u,p3:h}))),s.directDiffuse.addAssign(e.mul(en).mul(hU({N:d,V:f,P:p,mInv:zi(1,0,0,0,1,0,0,0,1),p0:l,p1:c,p2:u,p3:h})))}indirect(e,t,r){this.indirectDiffuse(e,t,r),this.indirectSpecular(e,t,r),this.ambientOcclusion(e,t,r)}indirectDiffuse({irradiance:e,reflectedLight:t}){t.indirectDiffuse.addAssign(e.mul(jf({diffuseColor:en})))}indirectSpecular({radiance:e,iblIrradiance:t,reflectedLight:r}){if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(t.mul(Ad,uEe({normal:sr,viewDir:kn,roughness:S2}))),this.clearcoat===!0){const c=Rm.dot(kn).clamp(),u=d8({dotNV:c,specularColor:VT,specularF90:GT,roughness:Qx});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(u))}const i=Me().toVar("singleScattering"),s=Me().toVar("multiScattering"),o=t.mul(1/Math.PI);this.computeMultiscattering(i,s,Jx);const a=i.add(s),l=en.mul(a.r.max(a.g).max(a.b).oneMinus());r.indirectSpecular.addAssign(e.mul(i)),r.indirectSpecular.addAssign(s.mul(o)),r.indirectDiffuse.addAssign(l.mul(o))}ambientOcclusion({ambientOcclusion:e,reflectedLight:t}){const i=sr.dot(kn).clamp().add(e),s=Ia.mul(-16).oneMinus().negate().exp2(),o=e.sub(i.pow(s).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(e),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(e),t.indirectDiffuse.mulAssign(e),t.indirectSpecular.mulAssign(o)}finish(e){const{outgoingLight:t}=e;if(this.clearcoat===!0){const r=Rm.dot(kn).clamp(),i=Xg({dotVH:r,f0:VT,f90:GT}),s=t.mul(GA.mul(i).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(GA));t.assign(s)}if(this.sheen===!0){const r=Ad.r.max(Ad.g).max(Ad.b).mul(.157).oneMinus(),i=t.mul(r).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);t.assign(i)}}}const SU=Ce(1),eR=Ce(-2),mv=Ce(.8),HT=Ce(-1),gv=Ce(.4),WT=Ce(2),yv=Ce(.305),jT=Ce(3),bU=Ce(.21),hEe=Ce(4),wU=Ce(4),dEe=Ce(16),fEe=je(([n])=>{const e=Me(zo(n)).toVar(),t=Ce(-1).toVar();return Jr(e.x.greaterThan(e.z),()=>{Jr(e.x.greaterThan(e.y),()=>{t.assign(Ai(n.x.greaterThan(0),0,3))}).Else(()=>{t.assign(Ai(n.y.greaterThan(0),1,4))})}).Else(()=>{Jr(e.z.greaterThan(e.y),()=>{t.assign(Ai(n.z.greaterThan(0),2,5))}).Else(()=>{t.assign(Ai(n.y.greaterThan(0),1,4))})}),t}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),pEe=je(([n,e])=>{const t=Ke().toVar();return Jr(e.equal(0),()=>{t.assign(Ke(n.z,n.y).div(zo(n.x)))}).ElseIf(e.equal(1),()=>{t.assign(Ke(n.x.negate(),n.z.negate()).div(zo(n.y)))}).ElseIf(e.equal(2),()=>{t.assign(Ke(n.x.negate(),n.y).div(zo(n.z)))}).ElseIf(e.equal(3),()=>{t.assign(Ke(n.z.negate(),n.y).div(zo(n.x)))}).ElseIf(e.equal(4),()=>{t.assign(Ke(n.x.negate(),n.z).div(zo(n.y)))}).Else(()=>{t.assign(Ke(n.x,n.y).div(zo(n.z)))}),cn(.5,t.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),mEe=je(([n])=>{const e=Ce(0).toVar();return Jr(n.greaterThanEqual(mv),()=>{e.assign(SU.sub(n).mul(HT.sub(eR)).div(SU.sub(mv)).add(eR))}).ElseIf(n.greaterThanEqual(gv),()=>{e.assign(mv.sub(n).mul(WT.sub(HT)).div(mv.sub(gv)).add(HT))}).ElseIf(n.greaterThanEqual(yv),()=>{e.assign(gv.sub(n).mul(jT.sub(WT)).div(gv.sub(yv)).add(WT))}).ElseIf(n.greaterThanEqual(bU),()=>{e.assign(yv.sub(n).mul(hEe.sub(jT)).div(yv.sub(bU)).add(jT))}).Else(()=>{e.assign(Ce(-2).mul(t1(cn(1.16,n))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),gEe=je(([n,e])=>{const t=n.toVar();t.assign(cn(2,t).sub(1));const r=Me(t,1).toVar();return Jr(e.equal(0),()=>{r.assign(r.zyx)}).ElseIf(e.equal(1),()=>{r.assign(r.xzy),r.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{r.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{r.assign(r.zyx),r.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{r.assign(r.xzy),r.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{r.z.mulAssign(-1)}),r}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),yEe=je(([n,e,t,r,i,s])=>{const o=Ce(t),a=Me(e),l=bc(mEe(o),eR,s),c=fp(l),u=n1(l),h=Me(tR(n,a,u,r,i,s)).toVar();return Jr(c.notEqual(0),()=>{const d=Me(tR(n,a,u.add(1),r,i,s)).toVar();h.assign(Mn(h,d,c))}),h}),tR=je(([n,e,t,r,i,s])=>{const o=Ce(t).toVar(),a=Me(e),l=Ce(fEe(a)).toVar(),c=Ce(wo(wU.sub(o),0)).toVar();o.assign(wo(o,wU));const u=Ce(qA(o)).toVar(),h=Ke(pEe(a,l).mul(u.sub(2)).add(1)).toVar();return Jr(l.greaterThan(2),()=>{h.y.addAssign(u),l.subAssign(3)}),h.x.addAssign(l.mul(u)),h.x.addAssign(c.mul(cn(3,dEe))),h.y.addAssign(cn(4,qA(s).sub(u))),h.x.mulAssign(r),h.y.mulAssign(i),n.uv(h).grad(Ke(),Ke())}),qT=je(({envMap:n,mipInt:e,outputDirection:t,theta:r,axis:i,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:o,CUBEUV_MAX_MIP:a})=>{const l=zl(r),c=t.mul(l).add(i.cross(t).mul(Ca(r))).add(i.mul(i.dot(t).mul(l.oneMinus())));return tR(n,c,e,s,o,a)}),vEe=je(({n,latitudinal:e,poleAxis:t,outputDirection:r,weights:i,samples:s,dTheta:o,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h})=>{const d=Me(Ai(e,t,DH(t,r))).toVar();Jr(CH(d.equals(Me(0))),()=>{d.assign(Me(r.z,0,r.x.negate()))}),d.assign(Gg(d));const f=Me().toVar();return f.addAssign(i.element(qn(0)).mul(qT({theta:0,axis:d,outputDirection:r,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h}))),Va({start:qn(1),end:n},({i:p})=>{Jr(p.greaterThanEqual(s),()=>{oMe()});const y=Ce(o.mul(Ce(p))).toVar();f.addAssign(i.element(p).mul(qT({theta:y.mul(-1),axis:d,outputDirection:r,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h}))),f.addAssign(i.element(p).mul(qT({theta:y,axis:d,outputDirection:r,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h})))}),Tt(f,1)});let tS=null;const TU=new WeakMap;function _Ee(n){const e=Math.log2(n)-2,t=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:t,maxMip:e}}function xEe(n){let e=TU.get(n);if((e!==void 0?e.pmremVersion:-1)!==n.pmremVersion){const r=n.image;if(n.isCubeTexture)if(bEe(r))e=tS.fromCubemap(n,e);else return null;else if(wEe(r))e=tS.fromEquirectangular(n,e);else return null;e.pmremVersion=n.pmremVersion,TU.set(n,e)}return e.texture}class SEe extends hr{static get type(){return"PMREMNode"}constructor(e,t=null,r=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=t,this.levelNode=r,this._generator=null;const i=new mi;i.isRenderTargetTexture=!0,this._texture=Xn(i),this._width=Mt(0),this._height=Mt(0),this._maxMip=Mt(0),this.updateBeforeType=Nt.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const t=_Ee(e.image.height);this._texture.value=e,this._width.value=t.texelWidth,this._height.value=t.texelHeight,this._maxMip.value=t.maxMip}updateBefore(){let e=this._pmrem;const t=e?e.pmremVersion:-1,r=this._value;t!==r.pmremVersion&&(r.isPMREMTexture===!0?e=r:e=xEe(r),e!==null&&(this._pmrem=e,this.updateFromTexture(e)))}setup(e){tS===null&&(tS=e.createPMREMGenerator()),this.updateBefore(e);let t=this.uvNode;t===null&&e.context.getUV&&(t=e.context.getUV(this));const r=this.value;e.renderer.coordinateSystem===po&&r.isPMREMTexture!==!0&&r.isRenderTargetTexture===!0&&(t=Me(t.x.negate(),t.yz));let i=this.levelNode;return i===null&&e.context.getTextureLevel&&(i=e.context.getTextureLevel(this)),yEe(this._texture,t,i,this._width,this._height,this._maxMip)}}function bEe(n){if(n==null)return!1;let e=0;const t=6;for(let r=0;r<t;r++)n[r]!==void 0&&e++;return e===t}function wEe(n){return n==null?!1:n.height>0}const g8=Ae(SEe),MU=new WeakMap;class TEe extends pp{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:t}=e;let r=this.envNode;if(r.isTextureNode||r.isMaterialReferenceNode){const f=r.isTextureNode?r.value:t[r.property];let p=MU.get(f);p===void 0&&(p=g8(f),MU.set(f,p)),r=p}const s=t.envMap?Un("envMapIntensity","float",e.material):Un("environmentIntensity","float",e.scene),a=t.useAnisotropy===!0||t.anisotropy>0?pTe:sr,l=r.context(EU(Ia,a)).mul(s),c=r.context(MEe(WH)).mul(Math.PI).mul(s),u=w_(l),h=w_(c);e.context.radiance.addAssign(u),e.context.iblIrradiance.addAssign(h);const d=e.context.lightingModel.clearcoatRadiance;if(d){const f=r.context(EU(Qx,Rm)).mul(s),p=w_(f);d.addAssign(p)}}}const EU=(n,e)=>{let t=null;return{getUV:()=>(t===null&&(t=kn.negate().reflect(e),t=n.mul(n).mix(t,e).normalize(),t=t.transformDirection(fl)),t),getTextureLevel:()=>n}},MEe=n=>({getUV:()=>n,getTextureLevel:()=>Ce(1)}),EEe=new f2;class y8 extends lr{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(EEe),this.setValues(e)}setupEnvironment(e){let t=super.setupEnvironment(e);return t===null&&e.environmentNode&&(t=e.environmentNode),t?new TEe(t):null}setupLightingModel(){return new m8}setupSpecular(){const e=Mn(Me(.04),en.rgb,Zx);rs.assign(e),Jx.assign(1)}setupVariants(){const e=this.metalnessNode?Ce(this.metalnessNode):ATe;Zx.assign(e);let t=this.roughnessNode?Ce(this.roughnessNode):CTe;t=u8({roughness:t}),Ia.assign(t),this.setupSpecular(),en.assign(Tt(en.rgb.mul(e.oneMinus()),en.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const CEe=new tH;class AEe extends y8{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(CEe),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?Ce(this.iorNode):VTe;b_.assign(e),rs.assign(Mn(eS(FH(b_.sub(1).div(b_.add(1))).mul(ETe),Me(1)).mul(oU),en.rgb,Zx)),Jx.assign(Mn(oU,1,Zx))}setupLightingModel(){return new m8(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const t=this.clearcoatNode?Ce(this.clearcoatNode):NTe,r=this.clearcoatRoughnessNode?Ce(this.clearcoatRoughnessNode):PTe;GA.assign(t),Qx.assign(u8({roughness:r}))}if(this.useSheen){const t=this.sheenNode?Me(this.sheenNode):DTe,r=this.sheenRoughnessNode?Ce(this.sheenRoughnessNode):FTe;Ad.assign(t),S2.assign(r)}if(this.useIridescence){const t=this.iridescenceNode?Ce(this.iridescenceNode):kTe,r=this.iridescenceIORNode?Ce(this.iridescenceIORNode):UTe,i=this.iridescenceThicknessNode?Ce(this.iridescenceThicknessNode):BTe;b2.assign(t),xH.assign(r),SH.assign(i)}if(this.useAnisotropy){const t=(this.anisotropyNode?Ke(this.anisotropyNode):OTe).toVar();iu.assign(t.length()),Jr(iu.equal(0),()=>{t.assign(Ke(1,0))}).Else(()=>{t.divAssign(Ke(iu)),iu.assign(iu.saturate())}),HA.assign(iu.pow2().mix(Ia.pow2(),1)),S_.assign(Nm[0].mul(t.x).add(Nm[1].mul(t.y))),Jd.assign(Nm[1].mul(t.x).sub(Nm[0].mul(t.y)))}if(this.useTransmission){const t=this.transmissionNode?Ce(this.transmissionNode):zTe,r=this.thicknessNode?Ce(this.thicknessNode):$Te,i=this.attenuationDistanceNode?Ce(this.attenuationDistanceNode):GTe,s=this.attenuationColorNode?Me(this.attenuationColorNode):HTe;if(jA.assign(t),bH.assign(r),wH.assign(i),TH.assign(s),this.useDispersion){const o=this.dispersionNode?Ce(this.dispersionNode):XTe;MH.assign(o)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?Me(this.clearcoatNormalNode):ITe}setup(e){e.context.setupClearcoatNormal=()=>this.setupClearcoatNormal(e),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const REe=je(({normal:n,lightDirection:e,builder:t})=>{const r=n.dot(e),i=Ke(r.mul(.5).add(.5),0);if(t.material.gradientMap){const s=Wl("gradientMap","texture").context({getUV:()=>i});return Me(s.r)}else{const s=i.fwidth().mul(.5);return Mn(Me(.7),Me(1),Yu(Ce(.7).sub(s.x),Ce(.7).add(s.x),i.x))}});class NEe extends u1{direct({lightDirection:e,lightColor:t,reflectedLight:r},i,s){const o=REe({normal:HH,lightDirection:e,builder:s}).mul(t);r.directDiffuse.addAssign(o.mul(jf({diffuseColor:en.rgb})))}indirect({ambientOcclusion:e,irradiance:t,reflectedLight:r}){r.indirectDiffuse.addAssign(t.mul(jf({diffuseColor:en}))),r.indirectDiffuse.mulAssign(e)}}const PEe=new rH;class IEe extends lr{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(PEe),this.setValues(e)}setupLightingModel(){return new NEe}}class LEe extends hr{static get type(){return"MatcapUVNode"}constructor(){super("vec2")}setup(){const e=Me(kn.z,0,kn.x.negate()).normalize(),t=kn.cross(e);return Ke(e.dot(sr),t.dot(sr)).mul(.495).add(.5)}}const DEe=ze(LEe),FEe=new oH;class OEe extends lr{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.lights=!1,this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(FEe),this.setValues(e)}setupVariants(e){const t=DEe;let r;e.material.matcap?r=Wl("matcap","texture").context({getUV:()=>t}):r=Me(Mn(.2,.8,t.y)),en.rgb.mulAssign(r.rgb)}}const kEe=new J6;class UEe extends lr{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.isPointsNodeMaterial=!0,this.lights=!1,this.transparent=!0,this.sizeNode=null,this.setDefaultValues(kEe),this.setValues(e)}copy(e){return this.sizeNode=e.sizeNode,super.copy(e)}}class BEe extends hr{static get type(){return"RotateNode"}constructor(e,t){super(),this.positionNode=e,this.rotationNode=t}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:t,positionNode:r}=this;if(this.getNodeType(e)==="vec2"){const s=t.cos(),o=t.sin();return x2(s,o,o.negate(),s).mul(r)}else{const s=t,o=Qd(Tt(1,0,0,0),Tt(0,zl(s.x),Ca(s.x).negate(),0),Tt(0,Ca(s.x),zl(s.x),0),Tt(0,0,0,1)),a=Qd(Tt(zl(s.y),0,Ca(s.y),0),Tt(0,1,0,0),Tt(Ca(s.y).negate(),0,zl(s.y),0),Tt(0,0,0,1)),l=Qd(Tt(zl(s.z),Ca(s.z).negate(),0,0),Tt(Ca(s.z),zl(s.z),0,0),Tt(0,0,1,0),Tt(0,0,0,1));return o.mul(a).mul(l).mul(Tt(r,1)).xyz}}}const zEe=Ae(BEe),$Ee=new Z6;class VEe extends lr{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this.lights=!1,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.setDefaultValues($Ee),this.setValues(e)}setupPosition({object:e,camera:t,context:r}){const i=this.sizeAttenuation,{positionNode:s,rotationNode:o,scaleNode:a}=this,l=ei;let c=o1.mul(Me(s||0)),u=Ke(Zu[0].xyz.length(),Zu[1].xyz.length());a!==null&&(u=u.mul(a)),!i&&t.isPerspectiveCamera&&(u=u.mul(c.z.negate()));let h=l.xy;if(e.center&&e.center.isVector2===!0){const y=Ewe("center","vec2");h=h.sub(y.sub(.5))}h=h.mul(u);const d=Ce(o||LTe),f=zEe(h,d);c=Tt(c.xy.add(f),c.zw);const p=A2.mul(c);return r.vertex=l,p}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}class GEe extends u1{constructor(){super(),this.shadowNode=Ce(1).toVar("shadowMask")}direct({shadowMask:e}){this.shadowNode.mulAssign(e)}finish(e){en.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(en.rgb)}}const HEe=new eH;class WEe extends lr{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.setDefaultValues(HEe),this.setValues(e)}setupLightingModel(){return new GEe}}je(({texture:n,uv:e})=>{const r=Me().toVar();return Jr(e.x.lessThan(1e-4),()=>{r.assign(Me(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{r.assign(Me(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{r.assign(Me(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{r.assign(Me(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{r.assign(Me(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{r.assign(Me(0,0,-1))}).Else(()=>{const s=n.uv(e.add(Me(-.01,0,0))).r.sub(n.uv(e.add(Me(.01,0,0))).r),o=n.uv(e.add(Me(0,-.01,0))).r.sub(n.uv(e.add(Me(0,.01,0))).r),a=n.uv(e.add(Me(0,0,-.01))).r.sub(n.uv(e.add(Me(0,0,.01))).r);r.assign(Me(s,o,a))}),r.normalize()});class jEe{constructor(e,t){this.nodes=e,this.info=t,this.animationLoop=null,this.requestId=null,this._init()}_init(){const e=(t,r)=>{this.requestId=self.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this.animationLoop!==null&&this.animationLoop(t,r)};e()}dispose(){self.cancelAnimationFrame(this.requestId),this.requestId=null}setAnimationLoop(e){this.animationLoop=e}}class ol{constructor(){this.weakMap=new WeakMap}get(e){let t=this.weakMap;for(let r=0;r<e.length;r++)if(t=t.get(e[r]),t===void 0)return;return t.get(e[e.length-1])}set(e,t){let r=this.weakMap;for(let i=0;i<e.length;i++){const s=e[i];r.has(s)===!1&&r.set(s,new WeakMap),r=r.get(s)}return r.set(e[e.length-1],t)}delete(e){let t=this.weakMap;for(let r=0;r<e.length;r++)if(t=t.get(e[r]),t===void 0)return!1;return t.delete(e[e.length-1])}}const XT=new Bl;class nR{constructor(){this.version=0,this.globalClippingCount=0,this.localClippingCount=0,this.localClippingEnabled=!1,this.localClipIntersection=!1,this.planes=[],this.parentVersion=0,this.viewNormalMatrix=new gs,this.cacheKey=0}projectPlanes(e,t){const r=e.length,i=this.planes;for(let s=0;s<r;s++){XT.copy(e[s]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const o=i[t+s],a=XT.normal;o.x=-a.x,o.y=-a.y,o.z=-a.z,o.w=XT.constant}}updateGlobal(e,t){const r=e.clippingPlanes;this.viewMatrix=t.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix);let i=!1;if(Array.isArray(r)&&r.length!==0){const s=r.length;if(s!==this.globalClippingCount){const o=[];for(let a=0;a<s;a++)o.push(new tn);this.globalClippingCount=s,this.planes=o,i=!0}this.projectPlanes(r,0)}else this.globalClippingCount!==0&&(this.globalClippingCount=0,this.planes=[],i=!0);e.localClippingEnabled!==this.localClippingEnabled&&(this.localClippingEnabled=e.localClippingEnabled,i=!0),i&&(this.version++,this.cacheKey=jx(this.globalClippingCount,this.localClippingEnabled===!0?1:0))}update(e,t){let r=!1;if(this!==e&&e.version!==this.parentVersion&&(this.globalClippingCount=t.isShadowNodeMaterial?0:e.globalClippingCount,this.localClippingEnabled=e.localClippingEnabled,this.planes=Array.from(e.planes),this.parentVersion=e.version,this.viewMatrix=e.viewMatrix,this.viewNormalMatrix=e.viewNormalMatrix,r=!0),this.localClippingEnabled){const i=t.clippingPlanes;if(Array.isArray(i)&&i.length!==0){const s=i.length,o=this.planes,a=this.globalClippingCount;if(r||s!==this.localClippingCount){o.length=a+s;for(let l=0;l<s;l++)o[a+l]=new tn;this.localClippingCount=s,r=!0}this.projectPlanes(i,a)}else this.localClippingCount!==0&&(this.localClippingCount=0,r=!0);this.localClipIntersection!==t.clipIntersection&&(this.localClipIntersection=t.clipIntersection,r=!0)}r&&(this.version+=e.version,this.cacheKey=jx(e.cacheKey,this.localClippingCount,this.localClipIntersection===!0?1:0))}}let qEe=0;function XEe(n){const e=Object.keys(n);let t=Object.getPrototypeOf(n);for(;t;){const r=Object.getOwnPropertyDescriptors(t);for(const i in r)if(r[i]!==void 0){const s=r[i];s&&typeof s.get=="function"&&e.push(i)}t=Object.getPrototypeOf(t)}return e}class KEe{constructor(e,t,r,i,s,o,a,l,c){this._nodes=e,this._geometries=t,this.id=qEe++,this.renderer=r,this.object=i,this.material=s,this.scene=o,this.camera=a,this.lightsNode=l,this.context=c,this.geometry=i.geometry,this.version=s.version,this.drawRange=null,this.attributes=null,this.pipeline=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.updateClipping(c.clippingContext),this.clippingContextVersion=this.clippingContext.version,this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.material.addEventListener("dispose",this.onMaterialDispose)}updateClipping(e){const t=this.material;let r=this.clippingContext;Array.isArray(t.clippingPlanes)?((r===e||!r)&&(r=new nR,this.clippingContext=r),r.update(e,t)):this.clippingContext!==e&&(this.clippingContext=e)}get clippingNeedsUpdate(){return this.clippingContext.version===this.clippingContextVersion?!1:(this.clippingContextVersion=this.clippingContext.version,!0)}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().monitor)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getIndex(){return this._geometries.getIndex(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,t=this.geometry,r=[],i=new Set;for(const s of e){const o=s.node&&s.node.attribute?s.node.attribute:t.getAttribute(s.name);if(o===void 0)continue;r.push(o);const a=o.isInterleavedBufferAttribute?o.data:o;i.add(a)}return this.attributes=r,this.vertexBuffers=Array.from(i.values()),r}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:t,geometry:r,group:i,drawRange:s}=this,o=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),a=this.getIndex(),l=a!==null,c=r.isInstancedBufferGeometry?r.instanceCount:e.count>1?e.count:1;if(c===0)return null;if(o.instanceCount=c,e.isBatchedMesh===!0)return o;let u=1;t.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(u=2);let h=s.start*u,d=(s.start+s.count)*u;i!==null&&(h=Math.max(h,i.start*u),d=Math.min(d,(i.start+i.count)*u));const f=l===!0?a.count:r.attributes.position.count;h=Math.max(h,0),d=Math.min(d,f);const p=d-h;return p<0||p===1/0?null:(o.vertexCount=p,o.firstVertex=h,o)}getGeometryCacheKey(){const{geometry:e}=this;let t="";for(const r of Object.keys(e.attributes).sort()){const i=e.attributes[r];t+=r+",",i.data&&(t+=i.data.stride+","),i.offset&&(t+=i.offset+","),i.itemSize&&(t+=i.itemSize+","),i.normalized&&(t+="n,")}return e.index&&(t+="index,"),t}getMaterialCacheKey(){const{object:e,material:t}=this;let r=t.customProgramCacheKey();for(const i of XEe(t)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(i))continue;const s=t[i];let o;if(s!==null){const a=typeof s;a==="number"?o=s!==0?"1":"0":a==="object"?(o="{",s.isTexture&&(o+=s.mapping),o+="}"):o=String(s)}else o=String(s);r+=o+","}return r+=this.clippingContext.cacheKey+",",e.geometry&&(r+=this.getGeometryCacheKey()),e.skeleton&&(r+=e.skeleton.bones.length+","),e.morphTargetInfluences&&(r+=e.morphTargetInfluences.length+","),e.isBatchedMesh&&(r+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(r+=e._colorsTexture.uuid+",")),e.count>1&&(r+=e.uuid+","),Ibe(r)}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=this._nodes.getCacheKey(this.scene,this.lightsNode);return this.object.receiveShadow&&(e+=1),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.onDispose()}}const Zh=[];class YEe{constructor(e,t,r,i,s,o){this.renderer=e,this.nodes=t,this.geometries=r,this.pipelines=i,this.bindings=s,this.info=o,this.chainMaps={}}get(e,t,r,i,s,o,a){const l=this.getChainMap(a);Zh[0]=e,Zh[1]=t,Zh[2]=o,Zh[3]=s;let c=l.get(Zh);return c===void 0?(c=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,r,i,s,o,a),l.set(Zh,c)):(c.updateClipping(o.clippingContext),(c.version!==t.version||c.needsUpdate)&&(c.initialCacheKey!==c.getCacheKey()?(c.dispose(),c=this.get(e,t,r,i,s,o,a)):c.version=t.version)),c}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new ol)}dispose(){this.chainMaps={}}createRenderObject(e,t,r,i,s,o,a,l,c,u){const h=this.getChainMap(u),d=new KEe(e,t,r,i,s,o,a,l,c);return d.onDispose=()=>{this.pipelines.delete(d),this.bindings.delete(d),this.nodes.delete(d),h.delete(d.getChainArray())},d}}class Dc{constructor(){this.data=new WeakMap}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){let t;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const Lu={VERTEX:1,INDEX:2,STORAGE:4},jl=16,ZEe=211,QEe=212;class JEe extends Dc{constructor(e){super(),this.backend=e}delete(e){const t=super.delete(e);return t!==void 0&&this.backend.destroyAttribute(e),t}update(e,t){const r=this.get(e);if(r.version===void 0)t===Lu.VERTEX?this.backend.createAttribute(e):t===Lu.INDEX?this.backend.createIndexAttribute(e):t===Lu.STORAGE&&this.backend.createStorageAttribute(e),r.version=this._getBufferAttribute(e).version;else{const i=this._getBufferAttribute(e);(r.version<i.version||i.usage===Ed)&&(this.backend.updateAttribute(e),r.version=i.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function eCe(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function v8(n){return n.index!==null?n.index.version:n.attributes.position.version}function CU(n){const e=[],t=n.index,r=n.attributes.position;if(t!==null){const s=t.array;for(let o=0,a=s.length;o<a;o+=3){const l=s[o+0],c=s[o+1],u=s[o+2];e.push(l,c,c,u,u,l)}}else{const s=r.array;for(let o=0,a=s.length/3-1;o<a;o+=3){const l=o+0,c=o+1,u=o+2;e.push(l,c,c,u,u,l)}}const i=new(eCe(e)?H6:G6)(e,1);return i.version=v8(n),i}class tCe extends Dc{constructor(e,t){super(),this.attributes=e,this.info=t,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const t=e.geometry;return super.has(t)&&this.get(t).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const t=e.geometry,r=this.get(t);r.initialized=!0,this.info.memory.geometries++;const i=()=>{this.info.memory.geometries--;const s=t.index,o=e.getAttributes();s!==null&&this.attributes.delete(s);for(const l of o)this.attributes.delete(l);const a=this.wireframes.get(t);a!==void 0&&this.attributes.delete(a),t.removeEventListener("dispose",i)};t.addEventListener("dispose",i)}updateAttributes(e){const t=e.getAttributes();for(const i of t)i.isStorageBufferAttribute||i.isStorageInstancedBufferAttribute?this.updateAttribute(i,Lu.STORAGE):this.updateAttribute(i,Lu.VERTEX);const r=this.getIndex(e);r!==null&&this.updateAttribute(r,Lu.INDEX)}updateAttribute(e,t){const r=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,t),this.attributeCall.set(e,r)):this.attributeCall.get(e.data)!==r&&(this.attributes.update(e,t),this.attributeCall.set(e.data,r),this.attributeCall.set(e,r)):this.attributeCall.get(e)!==r&&(this.attributes.update(e,t),this.attributeCall.set(e,r))}getIndex(e){const{geometry:t,material:r}=e;let i=t.index;if(r.wireframe===!0){const s=this.wireframes;let o=s.get(t);o===void 0?(o=CU(t),s.set(t,o)):o.version!==v8(t)&&(this.attributes.delete(o),o=CU(t),s.set(t,o)),i=o}return i}}class nCe{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.compute={calls:0,frameCalls:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.memory={geometries:0,textures:0}}update(e,t,r){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=r*(t/3):e.isPoints?this.render.points+=r*t:e.isLineSegments?this.render.lines+=r*(t/2):e.isLine?this.render.lines+=r*(t-1):console.error("THREE.WebGPUInfo: Unknown object type.")}updateTimestamp(e,t){this[e].timestampCalls===0&&(this[e].timestamp=0),this[e].timestamp+=t,this[e].timestampCalls++,this[e].timestampCalls>=this[e].previousFrameCalls&&(this[e].timestampCalls=0)}reset(){const e=this.render.frameCalls;this.render.previousFrameCalls=e;const t=this.compute.frameCalls;this.compute.previousFrameCalls=t,this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class _8{constructor(e){this.cacheKey=e,this.usedTimes=0}}class rCe extends _8{constructor(e,t,r){super(e),this.vertexProgram=t,this.fragmentProgram=r}}class iCe extends _8{constructor(e,t){super(e),this.computeProgram=t,this.isComputePipeline=!0}}let sCe=0;class KT{constructor(e,t,r=null,i=null){this.id=sCe++,this.code=e,this.stage=t,this.transforms=r,this.attributes=i,this.usedTimes=0}}class oCe extends Dc{constructor(e,t){super(),this.backend=e,this.nodes=t,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,t){const{backend:r}=this,i=this.get(e);if(this._needsComputeUpdate(e)){const s=i.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const o=this.nodes.getForCompute(e);let a=this.programs.compute.get(o.computeShader);a===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),a=new KT(o.computeShader,"compute",o.transforms,o.nodeAttributes),this.programs.compute.set(o.computeShader,a),r.createProgram(a));const l=this._getComputeCacheKey(e,a);let c=this.caches.get(l);c===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(s),c=this._getComputePipeline(e,a,l,t)),c.usedTimes++,a.usedTimes++,i.version=e.version,i.pipeline=c}return i.pipeline}getForRender(e,t=null){const{backend:r}=this,i=this.get(e);if(this._needsRenderUpdate(e)){const s=i.pipeline;s&&(s.usedTimes--,s.vertexProgram.usedTimes--,s.fragmentProgram.usedTimes--);const o=e.getNodeBuilderState();let a=this.programs.vertex.get(o.vertexShader);a===void 0&&(s&&s.vertexProgram.usedTimes===0&&this._releaseProgram(s.vertexProgram),a=new KT(o.vertexShader,"vertex"),this.programs.vertex.set(o.vertexShader,a),r.createProgram(a));let l=this.programs.fragment.get(o.fragmentShader);l===void 0&&(s&&s.fragmentProgram.usedTimes===0&&this._releaseProgram(s.fragmentProgram),l=new KT(o.fragmentShader,"fragment"),this.programs.fragment.set(o.fragmentShader,l),r.createProgram(l));const c=this._getRenderCacheKey(e,a,l);let u=this.caches.get(c);u===void 0?(s&&s.usedTimes===0&&this._releasePipeline(s),u=this._getRenderPipeline(e,a,l,c,t)):e.pipeline=u,u.usedTimes++,a.usedTimes++,l.usedTimes++,i.pipeline=u}return i.pipeline}delete(e){const t=this.get(e).pipeline;return t&&(t.usedTimes--,t.usedTimes===0&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,t.computeProgram.usedTimes===0&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,t.vertexProgram.usedTimes===0&&this._releaseProgram(t.vertexProgram),t.fragmentProgram.usedTimes===0&&this._releaseProgram(t.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,t,r,i){r=r||this._getComputeCacheKey(e,t);let s=this.caches.get(r);return s===void 0&&(s=new iCe(r,t),this.caches.set(r,s),this.backend.createComputePipeline(s,i)),s}_getRenderPipeline(e,t,r,i,s){i=i||this._getRenderCacheKey(e,t,r);let o=this.caches.get(i);return o===void 0&&(o=new rCe(i,t,r),this.caches.set(i,o),e.pipeline=o,this.backend.createRenderPipeline(e,s)),o}_getComputeCacheKey(e,t){return e.id+","+t.id}_getRenderCacheKey(e,t,r){return t.id+","+r.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const t=e.code,r=e.stage;this.programs[r].delete(t)}_needsComputeUpdate(e){const t=this.get(e);return t.pipeline===void 0||t.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class aCe extends Dc{constructor(e,t,r,i,s,o){super(),this.backend=e,this.textures=r,this.pipelines=s,this.attributes=i,this.nodes=t,this.info=o,this.pipelines.bindings=this}getForRender(e){const t=e.getBindings();for(const r of t){const i=this.get(r);i.bindGroup===void 0&&(this._init(r),this.backend.createBindings(r,t),i.bindGroup=r)}return t}getForCompute(e){const t=this.nodes.getForCompute(e).bindings;for(const r of t){const i=this.get(r);i.bindGroup===void 0&&(this._init(r),this.backend.createBindings(r,t),i.bindGroup=r)}return t}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const t of e)this._update(t,e)}_init(e){for(const t of e.bindings)if(t.isSampledTexture)this.textures.updateTexture(t.texture);else if(t.isStorageBuffer){const r=t.attribute;this.attributes.update(r,Lu.STORAGE)}}_update(e,t){const{backend:r}=this;let i=!1;for(const s of e.bindings)if(!(s.isNodeUniformsGroup&&!this.nodes.updateGroup(s))){if(s.isUniformBuffer)s.update()&&r.updateBinding(s);else if(s.isSampler)s.update();else if(s.isSampledTexture){s.needsBindingsUpdate(this.textures.get(s.texture).generation)&&(i=!0);const o=s.update(),a=s.texture;o&&this.textures.updateTexture(a);const l=r.get(a);if(r.isWebGPUBackend===!0&&l.texture===void 0&&l.externalTexture===void 0&&(console.error("Bindings._update: binding should be available:",s,o,a,s.textureNode.value,i),this.textures.updateTexture(a),i=!0),a.isStorageTexture===!0){const c=this.get(a);s.store===!0?c.needsMipmap=!0:a.generateMipmaps===!0&&this.textures.needsMipmaps(a)&&c.needsMipmap===!0&&(this.backend.generateMipmaps(a),c.needsMipmap=!1)}}}i===!0&&this.backend.updateBindings(e,t)}}class AU{constructor(e,t,r=null){this.isNodeAttribute=!0,this.name=e,this.type=t,this.node=r}}class lCe{constructor(e,t,r){this.isNodeUniform=!0,this.name=e,this.type=t,this.node=r.getSelf()}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class x8{constructor(e,t){this.isNodeVar=!0,this.name=e,this.type=t}}class cCe extends x8{constructor(e,t){super(e,t),this.needsInterpolation=!1,this.isNodeVarying=!0}}class uCe{constructor(e,t,r=""){this.name=e,this.type=t,this.code=r,Object.defineProperty(this,"isNodeCode",{value:!0})}}let hCe=0;class YT{constructor(e=null){this.id=hCe++,this.nodesData=new WeakMap,this.parent=e}getData(e){let t=this.nodesData.get(e);return t===void 0&&this.parent!==null&&(t=this.parent.getData(e)),t}setData(e,t){this.nodesData.set(e,t)}}class dCe extends sn{static get type(){return"ParameterNode"}constructor(e,t=null){super(e,t),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}class Xr extends wt{static get type(){return"CodeNode"}constructor(e="",t=[],r=""){super("code"),this.isCodeNode=!0,this.code=e,this.language=r,this.includes=t}isGlobal(){return!0}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const t=this.getIncludes(e);for(const i of t)i.build(e);const r=e.getCodeFromNode(this,this.getNodeType(e));return r.code=this.code,r.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}class fCe extends Xr{static get type(){return"FunctionNode"}constructor(e="",t=[],r=""){super(e,t,r)}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let r=t.nodeFunction;return r===void 0&&(r=e.parser.parseFunction(this.code),t.nodeFunction=r),r}generate(e,t){super.generate(e);const r=this.getNodeFunction(e),i=r.name,s=r.type,o=e.getCodeFromNode(this,s);i!==""&&(o.name=i);const a=e.getPropertyName(o),l=this.getNodeFunction(e).getCode(a);return o.code=l+`
`,t==="property"?a:e.format(`${a}()`,s,t)}}class ch{constructor(e,t){this.name=e,this.value=t,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class pCe extends ch{constructor(e,t=0){super(e,t),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class mCe extends ch{constructor(e,t=new zt){super(e,t),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class gCe extends ch{constructor(e,t=new ce){super(e,t),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class yCe extends ch{constructor(e,t=new tn){super(e,t),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class vCe extends ch{constructor(e,t=new rn){super(e,t),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class _Ce extends ch{constructor(e,t=new gs){super(e,t),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class xCe extends ch{constructor(e,t=new zn){super(e,t),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class SCe extends pCe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class bCe extends mCe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class wCe extends gCe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class TCe extends yCe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class MCe extends vCe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class ECe extends _Ce{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class CCe extends xCe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class ACe extends wt{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}add(e){return this.nodes.push(e),this}If(e,t){const r=new x_(t);return this._currentCond=Ai(e,r),this.add(this._currentCond)}ElseIf(e,t){const r=new x_(t),i=Ai(e,r);return this._currentCond.elseNode=i,this._currentCond=i,this}Else(e){return this._currentCond.elseNode=new x_(e),this}build(e,...t){const r=gH();Kx(this);for(const i of this.nodes)i.build(e,"void");return Kx(r),this.outputNode?this.outputNode.build(e,...t):super.build(e,...t)}else(...e){return console.warn("TSL.StackNode: .else() has been renamed to .Else()."),this.Else(...e)}elseif(...e){return console.warn("TSL.StackNode: .elseif() has been renamed to .ElseIf()."),this.ElseIf(...e)}}const ZT=Ae(ACe),Rd=4,RU=[.125,.215,.35,.446,.526,.582],uu=20,QT=new m2(-1,1,1,-1,0,1),RCe=new Ma(90,1),NU=new rn;let JT=null,eM=0,tM=0;const su=(1+Math.sqrt(5))/2,Qh=1/su,PU=[new ce(-su,Qh,0),new ce(su,Qh,0),new ce(-Qh,0,su),new ce(Qh,0,su),new ce(0,su,-Qh),new ce(0,su,Qh),new ce(-1,1,-1),new ce(1,1,-1),new ce(-1,1,1),new ce(1,1,1)],NCe=[3,1,5,0,4,2],nM=gEe(s1(),sl("faceIndex")).normalize(),D2=Me(nM.x,nM.y.negate(),nM.z);class PCe{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}fromScene(e,t=0,r=.1,i=100){JT=this._renderer.getRenderTarget(),eM=this._renderer.getActiveCubeFace(),tM=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=LU(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=DU(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(JT,eM,tM),e.scissorTest=!1,vv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ju||e.mapping===Gf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),JT=this._renderer.getRenderTarget(),eM=this._renderer.getActiveCubeFace(),tM=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Ui,minFilter:Ui,generateMipmaps:!1,type:Xa,format:lp,colorSpace:Fs},i=IU(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=IU(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=ICe(s)),this._blurMaterial=LCe(s,e,t)}return i}async _compileMaterial(e){const t=new Ku(this._lodPlanes[0],e);await this._renderer.compile(t,QT)}_sceneToCubeUV(e,t,r,i){const s=RCe;s.near=t,s.far=r;const o=[-1,1,-1,-1,-1,-1],a=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear;l.getClearColor(NU),l.autoClear=!1;let u=this._backgroundBox;if(u===null){const f=new Zb({name:"PMREM.Background",side:ul,depthWrite:!1,depthTest:!1});u=new Ku(new Ny,f)}let h=!1;const d=e.background;d?d.isColor&&(u.material.color.copy(d),e.background=null,h=!0):(u.material.color.copy(NU),h=!0),l.setRenderTarget(i),l.clear(),h&&l.render(u,s);for(let f=0;f<6;f++){const p=f%3;p===0?(s.up.set(0,o[f],0),s.lookAt(a[f],0,0)):p===1?(s.up.set(0,0,o[f]),s.lookAt(0,a[f],0)):(s.up.set(0,o[f],0),s.lookAt(0,0,a[f]));const y=this._cubeSize;vv(i,p*y,f>2?y:0,y,y),l.render(e,s)}l.autoClear=c,e.background=d}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===ju||e.mapping===Gf;i?this._cubemapMaterial===null&&(this._cubemapMaterial=LU(e)):this._equirectMaterial===null&&(this._equirectMaterial=DU(e));const s=i?this._cubemapMaterial:this._equirectMaterial;s.fragmentNode.value=e;const o=this._lodMeshes[0];o.material=s;const a=this._cubeSize;vv(t,0,0,3*a,2*a),r.setRenderTarget(t),r.render(o,QT)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=PU[(i-s-1)%PU.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=this._lodMeshes[i];h.material=c;const d=c.uniforms,f=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*uu-1),y=s/p,g=isFinite(s)?1+Math.floor(u*y):uu;g>uu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${uu}`);const m=[];let _=0;for(let w=0;w<uu;++w){const M=w/y,A=Math.exp(-M*M/2);m.push(A),w===0?_+=A:w<g&&(_+=2*A)}for(let w=0;w<m.length;w++)m[w]=m[w]/_;e.texture.frame=(e.texture.frame||0)+1,d.envMap.value=e.texture,d.samples.value=g,d.weights.array=m,d.latitudinal.value=o==="latitudinal"?1:0,a&&(d.poleAxis.value=a);const{_lodMax:v}=this;d.dTheta.value=p,d.mipInt.value=v-r;const x=this._sizeLods[i],b=3*x*(i>v-Rd?i-v+Rd:0),T=4*(this._cubeSize-x);vv(t,b,T,3*x,2*x),l.setRenderTarget(t),l.render(h,QT)}}function ICe(n){const e=[],t=[],r=[],i=[];let s=n;const o=n-Rd+1+RU.length;for(let a=0;a<o;a++){const l=Math.pow(2,s);t.push(l);let c=1/l;a>n-Rd?c=RU[a-n+Rd-1]:a===0&&(c=0),r.push(c);const u=1/(l-2),h=-u,d=1+u,f=[h,h,d,h,d,d,h,h,d,d,h,d],p=6,y=6,g=3,m=2,_=1,v=new Float32Array(g*y*p),x=new Float32Array(m*y*p),b=new Float32Array(_*y*p);for(let w=0;w<p;w++){const M=w%3*2/3-1,A=w>2?0:-1,S=[M,A,0,M+2/3,A,0,M+2/3,A+1,0,M,A,0,M+2/3,A+1,0,M,A+1,0],E=NCe[w];v.set(S,g*y*E),x.set(f,m*y*E);const I=[E,E,E,E,E,E];b.set(I,_*y*E)}const T=new ah;T.setAttribute("position",new Os(v,g)),T.setAttribute("uv",new Os(x,m)),T.setAttribute("faceIndex",new Os(b,_)),e.push(T),i.push(new Ku(T,null)),s>Rd&&s--}return{lodPlanes:e,sizeLods:t,sigmas:r,lodMeshes:i}}function IU(n,e,t){const r=new up(n,e,t);return r.texture.mapping=xA,r.texture.name="PMREM.cubeUv",r.texture.isPMREMTexture=!0,r.scissorTest=!0,r}function vv(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function F2(n){const e=new lr;return e.depthTest=!1,e.depthWrite=!1,e.blending=Vf,e.name=`PMREM_${n}`,e}function LCe(n,e,t){const r=jg(new Array(uu).fill(0)),i=Mt(new ce(0,1,0)),s=Mt(0),o=Ce(uu),a=Mt(0),l=Mt(1),c=Xn(null),u=Mt(0),h=Ce(1/e),d=Ce(1/t),f=Ce(n),p={n:o,latitudinal:a,weights:r,poleAxis:i,outputDirection:D2,dTheta:s,samples:l,envMap:c,mipInt:u,CUBEUV_TEXEL_WIDTH:h,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f},y=F2("blur");return y.uniforms=p,y.fragmentNode=vEe({...p,latitudinal:a.equal(1)}),y}function LU(n){const e=F2("cubemap");return e.fragmentNode=Wg(n,D2),e}function DU(n){const e=F2("equirect");return e.fragmentNode=Xn(n,i8(D2),0),e}let DCe=0;class rR{constructor(e="",t=[],r=0,i=[]){this.name=e,this.bindings=t,this.index=r,this.bindingsReference=i,this.id=DCe++}}const FU=new WeakMap,FCe=new Map([[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),OCe=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),_v=n=>(n=Number(n),n+(n%1?"":".0"));class S8{constructor(e,t,r){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=t,this.parser=r,this.scene=null,this.camera=null,this.nodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.monitor=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.flow={code:""},this.chaining=[],this.stack=ZT(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new YT,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.useComparisonMethod=!1}getBindGroupsCache(){let e=FU.get(this.renderer);return e===void 0&&(e=new ol,FU.set(this.renderer,e)),e}createRenderTarget(e,t,r){return new up(e,t,r)}createCubeRenderTarget(e,t){return new s8(e,t)}createPMREMGenerator(){return new PCe(this.renderer)}includes(e){return this.nodes.includes(e)}_getBindGroup(e,t){const r=this.getBindGroupsCache(),i=[];let s=!0;for(const a of t)i.push(a),s=s&&a.groupNode.shared!==!0;let o;return s?(o=r.get(i),o===void 0&&(o=new rR(e,i,this.bindingsIndexes[e].group,i),r.set(i,o))):o=new rR(e,i,this.bindingsIndexes[e].group,i),o}getBindGroupArray(e,t){const r=this.bindings[t];let i=r[e];return i===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),r[e]=i=[]),i}getBindings(){let e=this.bindGroups;if(e===null){const t={},r=this.bindings;for(const i of Wk)for(const s in r[i]){const o=r[i][s];(t[s]||(t[s]=[])).push(...o)}e=[];for(const i in t){const s=t[i],o=this._getBindGroup(i,s);e.push(o)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((t,r)=>t.bindings[0].groupNode.order-r.bindings[0].groupNode.order);for(let t=0;t<e.length;t++){const r=e[t];this.bindingsIndexes[r.name].group=t,r.index=t}}setHashNode(e,t){this.hashNodes[t]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}buildUpdateNodes(){for(const e of this.nodes){const t=e.getUpdateType(),r=e.getUpdateBeforeType(),i=e.getUpdateAfterType();t!==Nt.NONE&&this.updateNodes.push(e.getSelf()),r!==Nt.NONE&&this.updateBeforeNodes.push(e.getSelf()),i!==Nt.NONE&&this.updateAfterNodes.push(e.getSelf())}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===Ui||e.magFilter===bA||e.magFilter===Kd||e.magFilter===qa||e.minFilter===Ui||e.minFilter===bA||e.minFilter===Kd||e.minFilter===qa}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,t){return this.flowNodes[e].push(t),t}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,t=!0){const r=this.getDataFromNode(e);return r.cache===void 0&&(r.cache=new YT(t?this.getCache():null)),r.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const t=this.getDataFromNode(e);return t.usageCount=t.usageCount===void 0?1:t.usageCount+1,t.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateConst(e,t=null){if(t===null&&(e==="float"||e==="int"||e==="uint"?t=0:e==="bool"?t=!1:e==="color"?t=new rn:e==="vec2"?t=new zt:e==="vec3"?t=new ce:e==="vec4"&&(t=new tn)),e==="float")return _v(t);if(e==="int")return`${Math.round(t)}`;if(e==="uint")return t>=0?`${Math.round(t)}u`:"0u";if(e==="bool")return t?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${_v(t.r)}, ${_v(t.g)}, ${_v(t.b)} )`;const r=this.getTypeLength(e),i=this.getComponentType(e),s=o=>this.generateConst(i,o);if(r===2)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)} )`;if(r===3)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)} )`;if(r===4)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)}, ${s(t.w)} )`;if(r>4&&t&&(t.isMatrix3||t.isMatrix4))return`${this.getType(e)}( ${t.elements.map(s).join(", ")} )`;if(r>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,t){const r=this.attributes;for(const s of r)if(s.name===e)return s;const i=new AU(e,t);return r.push(i),i}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const t=e.type;if(e.isDataTexture){if(t===ui)return"int";if(t===Dr)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return t===null?null:t[1]==="b"?"bool":t[1]==="i"?"int":t[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,t="float"){if(e===1)return t;const r=FCe.get(e);return(t==="float"?"":t[0])+r}getTypeFromArray(e){return OCe.get(e.constructor)}getTypeFromAttribute(e){let t=e;e.isInterleavedBufferAttribute&&(t=e.data);const r=t.array,i=e.itemSize,s=e.normalized;let o;return!(e instanceof W6)&&s!==!0&&(o=this.getTypeFromArray(r)),this.getTypeFromLength(i,o)}getTypeLength(e){const t=this.getVectorType(e),r=/vec([2-4])/.exec(t);return r!==null?Number(r[1]):t==="float"||t==="bool"||t==="int"||t==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}getIntegerType(e){const t=this.getComponentType(e);return t==="int"||t==="uint"?e:this.changeComponentType(e,"int")}addStack(){return this.stack=ZT(this.stack),this.stacks.push(gH()||this.stack),Kx(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,Kx(this.stacks.pop()),e}getDataFromNode(e,t=this.shaderStage,r=null){r=r===null?e.isGlobal(this)?this.globalCache:this.cache:r;let i=r.getData(e);return i===void 0&&(i={},r.setData(e,i)),i[t]===void 0&&(i[t]={}),i[t]}getNodeProperties(e,t="any"){const r=this.getDataFromNode(e,t);return r.properties||(r.properties={outputNode:null})}getBufferAttributeFromNode(e,t){const r=this.getDataFromNode(e);let i=r.bufferAttribute;if(i===void 0){const s=this.uniforms.index++;i=new AU("nodeAttribute"+s,t,e),this.bufferAttributes.push(i),r.bufferAttribute=i}return i}getStructTypeFromNode(e,t=this.shaderStage){const r=this.getDataFromNode(e,t);if(r.structType===void 0){const i=this.structs.index++;e.name=`StructType${i}`,this.structs[t].push(e),r.structType=e}return e}getUniformFromNode(e,t,r=this.shaderStage,i=null){const s=this.getDataFromNode(e,r,this.globalCache);let o=s.uniform;if(o===void 0){const a=this.uniforms.index++;o=new lCe(i||"nodeUniform"+a,t,e),this.uniforms[r].push(o),s.uniform=o}return o}getVarFromNode(e,t=null,r=e.getNodeType(this),i=this.shaderStage){const s=this.getDataFromNode(e,i);let o=s.variable;if(o===void 0){const a=this.vars[i]||(this.vars[i]=[]);t===null&&(t="nodeVar"+a.length),o=new x8(t,r),a.push(o),s.variable=o}return o}getVaryingFromNode(e,t=null,r=e.getNodeType(this)){const i=this.getDataFromNode(e,"any");let s=i.varying;if(s===void 0){const o=this.varyings,a=o.length;t===null&&(t="nodeVarying"+a),s=new cCe(t,r),o.push(s),i.varying=s}return s}getCodeFromNode(e,t,r=this.shaderStage){const i=this.getDataFromNode(e);let s=i.code;if(s===void 0){const o=this.codes[r]||(this.codes[r]=[]),a=o.length;s=new uCe("nodeCode"+a,t),o.push(s),i.code=s}return s}addFlowCodeHierarchy(e,t){const{flowCodes:r,flowCodeBlock:i}=this.getDataFromNode(e);let s=!0,o=t;for(;o;){if(i.get(o)===!0){s=!1;break}o=this.getDataFromNode(o).parentNodeBlock}if(s)for(const a of r)this.addLineFlowCode(a)}addLineFlowCodeBlock(e,t,r){const i=this.getDataFromNode(e),s=i.flowCodes||(i.flowCodes=[]),o=i.flowCodeBlock||(i.flowCodeBlock=new WeakMap);s.push(t),o.set(r,!0)}addLineFlowCode(e,t=null){return e===""?this:(t!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(t,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const t=e.getNodeType(this),r=this.flowChildNode(e,t);return this.flowsData.set(e,r),r}buildFunctionNode(e){const t=new fCe,r=this.currentFunctionNode;return this.currentFunctionNode=t,t.code=this.buildFunctionCode(e),this.currentFunctionNode=r,t}flowShaderNode(e){const t=e.layout,r={[Symbol.iterator](){let o=0;const a=Object.values(this);return{next:()=>({value:a[o],done:o++>=a.length})}}};for(const o of t.inputs)r[o.name]=new dCe(o.type,o.name);e.layout=null;const i=e.call(r),s=this.flowStagesNode(i,t.type);return e.layout=t,s}flowStagesNode(e,t=null){const r=this.flow,i=this.vars,s=this.cache,o=this.buildStage,a=this.stack,l={code:""};this.flow=l,this.vars={},this.cache=new YT,this.stack=ZT();for(const c of Hk)this.setBuildStage(c),l.result=e.build(this,t);return l.vars=this.getVars(this.shaderStage),this.flow=r,this.vars=i,this.cache=s,this.stack=a,this.setBuildStage(o),l}getFunctionOperator(){return null}flowChildNode(e,t=null){const r=this.flow,i={code:""};return this.flow=i,i.result=e.build(this,t),this.flow=r,i}flowNodeFromShaderStage(e,t,r=null,i=null){const s=this.shaderStage;this.setShaderStage(e);const o=this.flowChildNode(t,r);return i!==null&&(o.code+=`${this.tab+i} = ${o.result};
`),this.flowCode[e]=this.flowCode[e]+o.code,this.setShaderStage(s),o}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,t){return`${this.getType(e)} ${t}`}getVars(e){let t="";const r=this.vars[e];if(r!==void 0)for(const i of r)t+=`${this.getVar(i.type,i.name)}; `;return t}getUniforms(){console.warn("Abstract function.")}getCodes(e){const t=this.codes[e];let r="";if(t!==void 0)for(const i of t)r+=i.code+`
`;return r}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}build(){const{object:e,material:t,renderer:r}=this;if(t!==null){let i=r.nodes.library.fromMaterial(t);i===null&&(console.error(`NodeMaterial: Material "${t.type}" is not compatible.`),i=new lr),i.build(this)}else this.addFlow("compute",e);for(const i of Hk){this.setBuildStage(i),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const s of Wk){this.setShaderStage(s);const o=this.flowNodes[s];for(const a of o)i==="generate"?this.flowNode(a):a.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,t){if(t==="float"||t==="int"||t==="uint")return new SCe(e);if(t==="vec2"||t==="ivec2"||t==="uvec2")return new bCe(e);if(t==="vec3"||t==="ivec3"||t==="uvec3")return new wCe(e);if(t==="vec4"||t==="ivec4"||t==="uvec4")return new TCe(e);if(t==="color")return new MCe(e);if(t==="mat3")return new ECe(e);if(t==="mat4")return new CCe(e);throw new Error(`Uniform "${t}" not declared.`)}createNodeMaterial(e="NodeMaterial"){throw new Error(`THREE.NodeBuilder: createNodeMaterial() was deprecated. Use new ${e}() instead.`)}format(e,t,r){if(t=this.getVectorType(t),r=this.getVectorType(r),t===r||r===null||this.isReference(r))return e;const i=this.getTypeLength(t),s=this.getTypeLength(r);return i===16&&s===9?`${this.getType(r)}(${e}[0].xyz, ${e}[1].xyz, ${e}[2].xyz)`:i===9&&s===4?`${this.getType(r)}(${e}[0].xy, ${e}[1].xy)`:i>4||s>4||s===0?e:i===s?`${this.getType(r)}( ${e} )`:i>s?this.format(`${e}.${"xyz".slice(0,s)}`,this.getTypeFromLength(s,this.getComponentType(t)),r):s===4&&i>1?`${this.getType(r)}( ${this.format(e,t,"vec3")}, 1.0 )`:i===2?`${this.getType(r)}( ${this.format(e,t,"vec2")}, 0.0 )`:(i===1&&s>1&&t!==this.getComponentType(r)&&(e=`${this.getType(this.getComponentType(r))}( ${e} )`),`${this.getType(r)}( ${e} )`)}getSignature(){return`// Three.js r${Kb} - Node System
`}}class OU{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.startTime=null,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let r=e.get(t);return r===void 0&&(r={renderMap:new WeakMap,frameMap:new WeakMap},e.set(t,r)),r}updateBeforeNode(e){const t=e.getUpdateBeforeType(),r=e.updateReference(this);if(t===Nt.FRAME){const{frameMap:i}=this._getMaps(this.updateBeforeMap,r);i.get(r)!==this.frameId&&e.updateBefore(this)!==!1&&i.set(r,this.frameId)}else if(t===Nt.RENDER){const{renderMap:i}=this._getMaps(this.updateBeforeMap,r);i.get(r)!==this.renderId&&e.updateBefore(this)!==!1&&i.set(r,this.renderId)}else t===Nt.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const t=e.getUpdateAfterType(),r=e.updateReference(this);if(t===Nt.FRAME){const{frameMap:i}=this._getMaps(this.updateAfterMap,r);i.get(r)!==this.frameId&&e.updateAfter(this)!==!1&&i.set(r,this.frameId)}else if(t===Nt.RENDER){const{renderMap:i}=this._getMaps(this.updateAfterMap,r);i.get(r)!==this.renderId&&e.updateAfter(this)!==!1&&i.set(r,this.renderId)}else t===Nt.OBJECT&&e.updateAfter(this)}updateNode(e){const t=e.getUpdateType(),r=e.updateReference(this);if(t===Nt.FRAME){const{frameMap:i}=this._getMaps(this.updateMap,r);i.get(r)!==this.frameId&&e.update(this)!==!1&&i.set(r,this.frameId)}else if(t===Nt.RENDER){const{renderMap:i}=this._getMaps(this.updateMap,r);i.get(r)!==this.renderId&&e.update(this)!==!1&&i.set(r,this.renderId)}else t===Nt.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class O2{constructor(e,t,r=null,i="",s=!1){this.type=e,this.name=t,this.count=r,this.qualifier=i,this.isConst=s}}O2.isNodeFunctionInput=!0;class mo extends dp{static get type(){return"TimerNode"}constructor(e=mo.LOCAL,t=1,r=0){super(r),this.scope=e,this.scale=t,this.updateType=Nt.FRAME}update(e){const t=this.scope,r=this.scale;t===mo.LOCAL?this.value+=e.deltaTime*r:t===mo.DELTA?this.value=e.deltaTime*r:t===mo.FRAME?this.value=e.frameId:this.value=e.time*r}serialize(e){super.serialize(e),e.scope=this.scope,e.scale=this.scale}deserialize(e){super.deserialize(e),this.scope=e.scope,this.scale=e.scale}}mo.LOCAL="local";mo.GLOBAL="global";mo.DELTA="delta";mo.FRAME="frame";const kCe=(n,e=0)=>Ue(new mo(mo.LOCAL,n,e));class Mr extends wt{static get type(){return"OscNode"}constructor(e=Mr.SINE,t=kCe()){super(),this.method=e,this.timeNode=t}getNodeType(e){return this.timeNode.getNodeType(e)}setup(){const e=this.method,t=Ue(this.timeNode);let r=null;return e===Mr.SINE?r=t.add(.75).mul(Math.PI*2).sin().mul(.5).add(.5):e===Mr.SQUARE?r=t.fract().round():e===Mr.TRIANGLE?r=t.add(.5).fract().mul(2).sub(1).abs():e===Mr.SAWTOOTH&&(r=t.fract()),r}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Mr.SINE="sine";Mr.SQUARE="square";Mr.TRIANGLE="triangle";Mr.SAWTOOTH="sawtooth";Mr.SINE;Mr.SQUARE;Mr.TRIANGLE;Mr.SAWTOOTH;new Bl;new ce;new ce;new ce;new zn;new ce(0,0,-1);new tn;new ce;new ce;new tn;new zt;new up;qg.flipX();const rM=new m2(-1,1,1,-1,0,1);class UCe extends ah{constructor(e=!1){super();const t=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new Ya([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Ya(t,2))}}const BCe=new UCe;class b8 extends Ku{constructor(e=null){super(BCe,e),this.camera=rM,this.isQuadMesh=!0}renderAsync(e){return e.renderAsync(this,rM)}render(e){e.render(this,rM)}}class qo extends wt{static get type(){return"SceneNode"}constructor(e=qo.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,r=this.scene!==null?this.scene:e.scene;let i;return t===qo.BACKGROUND_BLURRINESS?i=Un("backgroundBlurriness","float",r):t===qo.BACKGROUND_INTENSITY?i=Un("backgroundIntensity","float",r):console.error("THREE.SceneNode: Unknown scope:",t),i}}qo.BACKGROUND_BLURRINESS="backgroundBlurriness";qo.BACKGROUND_INTENSITY="backgroundIntensity";const zCe=ze(qo,qo.BACKGROUND_BLURRINESS),kU=ze(qo,qo.BACKGROUND_INTENSITY),Nd={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},Nr={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},Pr={Store:"store",Discard:"discard"},tr={Load:"load",Clear:"clear"},iM={CCW:"ccw",CW:"cw"},sM={None:"none",Front:"front",Back:"back"},qf={Uint16:"uint16",Uint32:"uint32"},Z={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10uFloat:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Stencil8:"stencil8",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},oM={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},nS={Linear:"linear",Nearest:"nearest"},_t={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDstColor:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},Kc={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},UU={None:0,Red:1,Green:2,Blue:4,Alpha:8,All:15},Il={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},iR={Uniform:"uniform",Storage:"storage",ReadOnlyStorage:"read-only-storage"},BU={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},cm={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},zU={OneD:"1d",TwoD:"2d",ThreeD:"3d"},Ms={OneD:"1d",TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",CubeArray:"cube-array",ThreeD:"3d"},$Ce={All:"all",StencilOnly:"stencil-only",DepthOnly:"depth-only"},xv={Vertex:"vertex",Instance:"instance"},sR={DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups"},VCe=new zt;class GCe extends Dy{static get type(){return"PassTextureNode"}constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return e.object.isQuadMesh&&this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class $U extends GCe{static get type(){return"PassMultipleTextureNode"}constructor(e,t,r=!1){super(e,null),this.textureName=t,this.previousTexture=r}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){return new this.constructor(this.passNode,this.textureName,this.previousTexture)}}class d1 extends hr{static get type(){return"PassNode"}constructor(e,t,r,i={}){super("vec4"),this.scope=e,this.scene=t,this.camera=r,this.options=i,this._pixelRatio=1,this._width=1,this._height=1;const s=new Py;s.isRenderTargetTexture=!0,s.name="depth";const o=new up(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Xa,...i});o.texture.name="output",o.depthTexture=s,this.renderTarget=o,this.updateBeforeType=Nt.FRAME,this._textures={output:o.texture,depth:s},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=Mt(0),this._cameraFar=Mt(0),this._mrt=null,this.isPassNode=!0}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}isGlobal(){return!0}getTexture(e){let t=this._textures[e];return t===void 0&&(t=this.renderTarget.texture.clone(),t.isRenderTargetTexture=!0,t.name=e,this._textures[e]=t,this.renderTarget.textures.push(t)),t}getPreviousTexture(e){let t=this._previousTextures[e];return t===void 0&&(t=this.getTexture(e).clone(),t.isRenderTargetTexture=!0,this._previousTextures[e]=t),t}toggleTexture(e){const t=this._previousTextures[e];if(t!==void 0){const r=this._textures[e],i=this.renderTarget.textures.indexOf(r);this.renderTarget.textures[i]=t,this._textures[e]=t,this._previousTextures[e]=r,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let t=this._textureNodes[e];return t===void 0&&(this._textureNodes[e]=t=Ue(new $U(this,e)),this._textureNodes[e].updateTexture()),t}getPreviousTextureNode(e="output"){let t=this._previousTextureNodes[e];return t===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),this._previousTextureNodes[e]=t=Ue(new $U(this,e,!0)),this._previousTextureNodes[e].updateTexture()),t}getViewZNode(e="depth"){let t=this._viewZNodes[e];if(t===void 0){const r=this._cameraNear,i=this._cameraFar;this._viewZNodes[e]=t=t8(this.getTextureNode(e),r,i)}return t}getLinearDepthNode(e="depth"){let t=this._linearDepthNodes[e];if(t===void 0){const r=this._cameraNear,i=this._cameraFar,s=this.getViewZNode(e);this._linearDepthNodes[e]=t=M_(s,r,i)}return t}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,e.backend.isWebGLBackend===!0&&(this.renderTarget.samples=0),this.renderTarget.depthTexture.isMultisampleRenderTargetTexture=this.renderTarget.samples>1,this.scope===d1.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:t}=e,{scene:r,camera:i}=this;this._pixelRatio=t.getPixelRatio();const s=t.getSize(VCe);this.setSize(s.width,s.height);const o=t.getRenderTarget(),a=t.getMRT();this._cameraNear.value=i.near,this._cameraFar.value=i.far;for(const l in this._previousTextures)this.toggleTexture(l);t.setRenderTarget(this.renderTarget),t.setMRT(this._mrt),t.render(r,i),t.setRenderTarget(o),t.setMRT(a)}setSize(e,t){this._width=e,this._height=t;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget.setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}d1.COLOR="color";d1.DEPTH="depth";class w8 extends wt{static get type(){return"FogNode"}constructor(e,t){super("float"),this.isFogNode=!0,this.colorNode=e,this.factorNode=t}getViewZNode(e){let t;const r=e.context.getViewZ;return r!==void 0&&(t=r(this)),(t||Zr.z).negate()}setup(){return this.factorNode}}class HCe extends w8{static get type(){return"FogRangeNode"}constructor(e,t,r){super(e),this.isFogRangeNode=!0,this.nearNode=t,this.farNode=r}setup(e){const t=this.getViewZNode(e);return Yu(this.nearNode,this.farNode,t)}}const WCe=Ae(HCe);class jCe extends w8{static get type(){return"FogExp2Node"}constructor(e,t){super(e),this.isFogExp2Node=!0,this.densityNode=t}setup(e){const t=this.getViewZNode(e),r=this.densityNode;return r.mul(r,t,t).negate().exp().oneMinus()}}const qCe=Ae(jCe),XCe=je(({depthTexture:n,shadowCoord:e})=>Xn(n,e.xy).compare(e.z)),KCe=je(({depthTexture:n,shadowCoord:e,shadow:t})=>{const r=(y,g)=>Xn(n,y).compare(g),i=Un("mapSize","vec2",t).setGroup(Ft),s=Un("radius","float",t).setGroup(Ft),o=Ke(1).div(i),a=o.x.negate().mul(s),l=o.y.negate().mul(s),c=o.x.mul(s),u=o.y.mul(s),h=a.div(2),d=l.div(2),f=c.div(2),p=u.div(2);return ds(r(e.xy.add(Ke(a,l)),e.z),r(e.xy.add(Ke(0,l)),e.z),r(e.xy.add(Ke(c,l)),e.z),r(e.xy.add(Ke(h,d)),e.z),r(e.xy.add(Ke(0,d)),e.z),r(e.xy.add(Ke(f,d)),e.z),r(e.xy.add(Ke(a,0)),e.z),r(e.xy.add(Ke(h,0)),e.z),r(e.xy,e.z),r(e.xy.add(Ke(f,0)),e.z),r(e.xy.add(Ke(c,0)),e.z),r(e.xy.add(Ke(h,p)),e.z),r(e.xy.add(Ke(0,p)),e.z),r(e.xy.add(Ke(f,p)),e.z),r(e.xy.add(Ke(a,u)),e.z),r(e.xy.add(Ke(0,u)),e.z),r(e.xy.add(Ke(c,u)),e.z)).mul(1/17)}),YCe=je(({depthTexture:n,shadowCoord:e,shadow:t})=>{const r=(u,h)=>Xn(n,u).compare(h),i=Un("mapSize","vec2",t).setGroup(Ft),s=Ke(1).div(i),o=s.x,a=s.y,l=e.xy,c=fp(l.mul(i).add(.5));return l.subAssign(c.mul(s)),ds(r(l,e.z),r(l.add(Ke(o,0)),e.z),r(l.add(Ke(0,a)),e.z),r(l.add(s),e.z),Mn(r(l.add(Ke(o.negate(),0)),e.z),r(l.add(Ke(o.mul(2),0)),e.z),c.x),Mn(r(l.add(Ke(o.negate(),a)),e.z),r(l.add(Ke(o.mul(2),a)),e.z),c.x),Mn(r(l.add(Ke(0,a.negate())),e.z),r(l.add(Ke(0,a.mul(2))),e.z),c.y),Mn(r(l.add(Ke(o,a.negate())),e.z),r(l.add(Ke(o,a.mul(2))),e.z),c.y),Mn(Mn(r(l.add(Ke(o.negate(),a.negate())),e.z),r(l.add(Ke(o.mul(2),a.negate())),e.z),c.x),Mn(r(l.add(Ke(o.negate(),a.mul(2))),e.z),r(l.add(Ke(o.mul(2),a.mul(2))),e.z),c.x),c.y)).mul(1/9)}),ZCe=je(({depthTexture:n,shadowCoord:e})=>{const t=Ce(1).toVar(),r=Xn(n).uv(e.xy).rg,i=LH(e.z,r.x);return Jr(i.notEqual(Ce(1)),()=>{const s=e.z.sub(r.x),o=wo(0,r.y.mul(r.y));let a=o.div(o.add(s.mul(s)));a=bc(Iu(a,.3).div(.95-.3)),t.assign(bc(wo(i,a)))}),t}),QCe=je(({samples:n,radius:e,size:t,shadowPass:r})=>{const i=Ce(0).toVar(),s=Ce(0).toVar(),o=n.lessThanEqual(Ce(1)).select(Ce(0),Ce(2).div(n.sub(1))),a=n.lessThanEqual(Ce(1)).select(Ce(0),Ce(-1));Va({start:qn(0),end:qn(n),type:"int",condition:"<"},({i:c})=>{const u=a.add(Ce(c).mul(o)),h=r.uv(ds(c1.xy,Ke(0,u).mul(e)).div(t)).x;i.addAssign(h),s.addAssign(h.mul(h))}),i.divAssign(n),s.divAssign(n);const l=w2(s.sub(i.mul(i)));return Ke(i,l)}),JCe=je(({samples:n,radius:e,size:t,shadowPass:r})=>{const i=Ce(0).toVar(),s=Ce(0).toVar(),o=n.lessThanEqual(Ce(1)).select(Ce(0),Ce(2).div(n.sub(1))),a=n.lessThanEqual(Ce(1)).select(Ce(0),Ce(-1));Va({start:qn(0),end:qn(n),type:"int",condition:"<"},({i:c})=>{const u=a.add(Ce(c).mul(o)),h=r.uv(ds(c1.xy,Ke(u,0).mul(e)).div(t));i.addAssign(h.x),s.addAssign(ds(h.y.mul(h.y),h.x.mul(h.x)))}),i.divAssign(n),s.divAssign(n);const l=w2(s.sub(i.mul(i)));return Ke(i,l)}),eAe=[XCe,KCe,YCe,ZCe];let Jh=null;const Sv=new b8;class uh extends pp{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.updateType=Nt.FRAME,this.light=e,this.color=new rn,this.colorNode=Mt(this.color).setGroup(Ft),this.baseColorNode=null,this.shadowMap=null,this.shadowNode=null,this.shadowColorNode=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this.isAnalyticLightNode=!0}getCacheKey(){return jx(super.getCacheKey(),this.light.id,this.light.castShadow?1:0)}getHash(){return this.light.uuid}setupShadow(e){const{object:t,renderer:r}=e;if(r.shadowMap.enabled===!1)return;let i=this.shadowColorNode;if(i===null){Jh===null&&(Jh=new lr,Jh.fragmentNode=Tt(0,0,0,1),Jh.isShadowNodeMaterial=!0,Jh.name="ShadowMaterial");const s=r.shadowMap.type,o=this.light.shadow,a=new Py;a.compareFunction=o2;const l=e.createRenderTarget(o.mapSize.width,o.mapSize.height);if(l.depthTexture=a,o.camera.updateProjectionMatrix(),s===K0){a.compareFunction=null,this.vsmShadowMapVertical=e.createRenderTarget(o.mapSize.width,o.mapSize.height,{format:zg,type:Xa}),this.vsmShadowMapHorizontal=e.createRenderTarget(o.mapSize.width,o.mapSize.height,{format:zg,type:Xa});const v=Xn(a),x=Xn(this.vsmShadowMapVertical.texture),b=Un("blurSamples","float",o).setGroup(Ft),T=Un("radius","float",o).setGroup(Ft),w=Un("mapSize","vec2",o).setGroup(Ft);let M=this.vsmMaterialVertical||(this.vsmMaterialVertical=new lr);M.fragmentNode=QCe({samples:b,radius:T,size:w,shadowPass:v}).context(e.getSharedContext()),M.name="VSMVertical",M=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new lr),M.fragmentNode=JCe({samples:b,radius:T,size:w,shadowPass:x}).context(e.getSharedContext()),M.name="VSMHorizontal"}const c=Un("intensity","float",o).setGroup(Ft),u=Un("bias","float",o).setGroup(Ft),h=Un("normalBias","float",o).setGroup(Ft),d=t.material.shadowPositionNode||KA;let f=Mt(o.matrix).setGroup(Ft).mul(d.add(l1.mul(h)));f=f.xyz.div(f.w);let p=f.z.add(u);r.coordinateSystem===Xu&&(p=p.mul(2).sub(1)),f=Me(f.x,f.y.oneMinus(),p);const y=f.x.greaterThanEqual(0).and(f.x.lessThanEqual(1)).and(f.y.greaterThanEqual(0)).and(f.y.lessThanEqual(1)).and(f.z.lessThanEqual(1)),g=o.filterNode||eAe[r.shadowMap.type]||null;if(g===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const m=Xn(l.texture,f),_=y.select(g({depthTexture:s===K0?this.vsmShadowMapHorizontal.texture:a,shadowCoord:f,shadow:o}),Ce(1));this.shadowMap=l,this.light.shadow.map=l,this.shadowNode=_,this.shadowColorNode=i=this.colorNode.mul(Mn(1,_.rgb.mix(m,1),c.mul(m.a))),this.baseColorNode=this.colorNode}this.colorNode=i,this.updateBeforeType=Nt.RENDER}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&this.disposeShadow()}updateShadow(e){const{shadowMap:t,light:r}=this,{renderer:i,scene:s,camera:o}=e,a=i.shadowMap.type,l=t.depthTexture.version;this._depthVersionCached=l;const c=s.overrideMaterial;s.overrideMaterial=Jh,t.setSize(r.shadow.mapSize.width,r.shadow.mapSize.height),r.shadow.updateMatrices(r),r.shadow.camera.layers.mask=o.layers.mask;const u=i.getRenderTarget(),h=i.getRenderObjectFunction();i.setRenderObjectFunction((d,...f)=>{(d.castShadow===!0||d.receiveShadow&&a===K0)&&i.renderObject(d,...f)}),i.setRenderTarget(t),i.render(s,r.shadow.camera),i.setRenderObjectFunction(h),r.isPointLight!==!0&&a===K0&&this.vsmPass(e,r),i.setRenderTarget(u),s.overrideMaterial=c}vsmPass(e,t){const{renderer:r}=e;this.vsmShadowMapVertical.setSize(t.shadow.mapSize.width,t.shadow.mapSize.height),this.vsmShadowMapHorizontal.setSize(t.shadow.mapSize.width,t.shadow.mapSize.height),r.setRenderTarget(this.vsmShadowMapVertical),Sv.material=this.vsmMaterialVertical,Sv.render(r),r.setRenderTarget(this.vsmShadowMapHorizontal),Sv.material=this.vsmMaterialHorizontal,Sv.render(r)}disposeShadow(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),this.shadowNode=null,this.shadowColorNode=null,this.baseColorNode=null,this.updateBeforeType=Nt.NONE}updateBefore(e){const t=this.light.shadow;(t.needsUpdate||t.autoUpdate)&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(t.needsUpdate=!1))}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const T8=je(n=>{const{lightDistance:e,cutoffDistance:t,decayExponent:r}=n,i=e.pow(r).max(.01).reciprocal();return t.greaterThan(0).select(i.mul(e.div(t).pow4().oneMinus().clamp().pow2()),i)});let bv;function k2(n){bv=bv||new WeakMap;let e=bv.get(n);return e===void 0&&bv.set(n,e={}),e}function M8(n){const e=k2(n);return e.position||(e.position=Mt(new ce).setGroup(Ft).onRenderUpdate((t,r)=>r.value.setFromMatrixPosition(n.matrixWorld)))}function tAe(n){const e=k2(n);return e.targetPosition||(e.targetPosition=Mt(new ce).setGroup(Ft).onRenderUpdate((t,r)=>r.value.setFromMatrixPosition(n.target.matrixWorld)))}function U2(n){const e=k2(n);return e.viewPosition||(e.viewPosition=Mt(new ce).setGroup(Ft).onRenderUpdate(({camera:t},r)=>{r.value=r.value||new ce,r.value.setFromMatrixPosition(n.matrixWorld),r.value.applyMatrix4(t.matrixWorldInverse)}))}const E8=n=>fl.transformDirection(M8(n).sub(tAe(n))),nAe=je(([n])=>{const e=n.mul(.9478672986).add(.0521327014).pow(2.4),t=n.mul(.0773993808),r=n.lessThanEqual(.04045);return Mn(e,t,r)}).setLayout({name:"sRGBToLinearSRGB",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),rAe=je(([n])=>{const e=n.pow(.41666).mul(1.055).sub(.055),t=n.mul(12.92),r=n.lessThanEqual(.0031308);return Mn(e,t,r)}).setLayout({name:"linearSRGBTosRGB",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),iAe=je(([n,e])=>n.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),sAe=je(([n,e])=>(n=n.mul(e),n.div(n.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),oAe=je(([n,e])=>{n=n.mul(e),n=n.sub(.004).max(0);const t=n.mul(n.mul(6.2).add(.5)),r=n.mul(n.mul(6.2).add(1.7)).add(.06);return t.div(r).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),aAe=je(([n])=>{const e=n.mul(n.add(.0245786)).sub(90537e-9),t=n.mul(n.add(.432951).mul(.983729)).add(.238081);return e.div(t)}),lAe=je(([n,e])=>{const t=zi(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),r=zi(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return n=n.mul(e).div(.6),n=t.mul(n),n=aAe(n),n=r.mul(n),n.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),cAe=zi(Me(1.6605,-.1246,-.0182),Me(-.5876,1.1329,-.1006),Me(-.0728,-.0083,1.1187)),uAe=zi(Me(.6274,.0691,.0164),Me(.3293,.9195,.088),Me(.0433,.0113,.8956)),hAe=je(([n])=>{const e=Me(n).toVar(),t=Me(e.mul(e)).toVar(),r=Me(t.mul(t)).toVar();return Ce(15.5).mul(r.mul(t)).sub(cn(40.14,r.mul(e))).add(cn(31.96,r).sub(cn(6.868,t.mul(e))).add(cn(.4298,t).add(cn(.1191,e).sub(.00232))))}),dAe=je(([n,e])=>{const t=Me(n).toVar(),r=zi(Me(.856627153315983,.137318972929847,.11189821299995),Me(.0951212405381588,.761241990602591,.0767994186031903),Me(.0482516061458583,.101439036467562,.811302368396859)),i=zi(Me(1.1271005818144368,-.1413297634984383,-.14132976349843826),Me(-.11060664309660323,1.157823702216272,-.11060664309660294),Me(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=Ce(-12.47393),o=Ce(4.026069);return t.mulAssign(e),t.assign(uAe.mul(t)),t.assign(r.mul(t)),t.assign(wo(t,1e-10)),t.assign(t1(t)),t.assign(t.sub(s).div(o.sub(s))),t.assign(bc(t,0,1)),t.assign(hAe(t)),t.assign(i.mul(t)),t.assign(r1(wo(Me(0),t),Me(2.2))),t.assign(cAe.mul(t)),t.assign(bc(t,0,1)),t}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),fAe=je(([n,e])=>{const t=Ce(.76),r=Ce(.15);n=n.mul(e);const i=eS(n.r,eS(n.g,n.b)),s=Ai(i.lessThan(.08),i.sub(cn(6.25,i.mul(i))),.04);n.subAssign(s);const o=wo(n.r,wo(n.g,n.b));Jr(o.lessThan(t),()=>n);const a=Iu(1,t),l=Iu(1,a.mul(a).div(o.add(a.sub(t))));n.mulAssign(l.div(o));const c=Iu(1,Sc(1,r.mul(o.sub(l)).add(1)));return Mn(n,Me(l),c)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class pAe extends wt{constructor(e){super(),this.scope=e}generate(e){const{scope:t}=this,{renderer:r}=e;r.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${t}Barrier 
`):e.addLineFlowCode(`${t}Barrier()`,this)}}Ae(pAe);class ta extends hr{static get type(){return"AtomicFunctionNode"}constructor(e,t,r,i=null){super("uint"),this.method=e,this.pointerNode=t,this.valueNode=r,this.storeNode=i}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const t=this.method,r=this.getNodeType(e),i=this.getInputType(e),s=this.pointerNode,o=this.valueNode,a=[];a.push(`&${s.build(e,i)}`),a.push(o.build(e,i));const l=`${e.getMethod(t,r)}( ${a.join(", ")} )`;if(this.storeNode!==null){const c=this.storeNode.build(e,i);e.addLineFlowCode(`${c} = ${l}`,this)}else e.addLineFlowCode(l,this)}}ta.ATOMIC_LOAD="atomicLoad";ta.ATOMIC_STORE="atomicStore";ta.ATOMIC_ADD="atomicAdd";ta.ATOMIC_SUB="atomicSub";ta.ATOMIC_MAX="atomicMax";ta.ATOMIC_MIN="atomicMin";ta.ATOMIC_AND="atomicAnd";ta.ATOMIC_OR="atomicOr";ta.ATOMIC_XOR="atomicXor";Ae(ta);const mAe=je(([n,e])=>{const t=n.x,r=n.y,i=n.z;let s=e.element(0).mul(.886227);return s=s.add(e.element(1).mul(2*.511664).mul(r)),s=s.add(e.element(2).mul(2*.511664).mul(i)),s=s.add(e.element(3).mul(2*.511664).mul(t)),s=s.add(e.element(4).mul(2*.429043).mul(t).mul(r)),s=s.add(e.element(5).mul(2*.429043).mul(r).mul(i)),s=s.add(e.element(6).mul(i.mul(i).mul(.743125).sub(.247708))),s=s.add(e.element(7).mul(2*.429043).mul(t).mul(i)),s=s.add(e.element(8).mul(.429043).mul(cn(t,t).sub(cn(r,r)))),s});class gAe extends uh{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=Mt(0).setGroup(Ft),this.decayExponentNode=Mt(0).setGroup(Ft)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setup(e){const{colorNode:t,cutoffDistanceNode:r,decayExponentNode:i,light:s}=this,o=e.context.lightingModel,a=U2(s).sub(Zr),l=a.normalize(),c=a.length(),u=T8({lightDistance:c,cutoffDistance:r,decayExponent:i}),h=t.mul(u),d=e.context.reflectedLight;o.direct({lightDirection:l,lightColor:h,reflectedLight:d},e.stack,e)}}class yAe extends uh{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setup(e){super.setup(e);const t=e.context.lightingModel,r=this.colorNode,i=E8(this.light),s=e.context.reflectedLight;t.direct({lightDirection:i,lightColor:r,reflectedLight:s},e.stack,e)}}const aM=new zn,wv=new zn;let um=null;class vAe extends uh{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=Mt(new ce).setGroup(Ft),this.halfWidth=Mt(new ce).setGroup(Ft)}update(e){super.update(e);const{light:t}=this,r=e.camera.matrixWorldInverse;wv.identity(),aM.copy(t.matrixWorld),aM.premultiply(r),wv.extractRotation(aM),this.halfWidth.value.set(t.width*.5,0,0),this.halfHeight.value.set(0,t.height*.5,0),this.halfWidth.value.applyMatrix4(wv),this.halfHeight.value.applyMatrix4(wv)}setup(e){super.setup(e);let t,r;e.isAvailable("float32Filterable")?(t=Xn(um.LTC_FLOAT_1),r=Xn(um.LTC_FLOAT_2)):(t=Xn(um.LTC_HALF_1),r=Xn(um.LTC_HALF_2));const{colorNode:i,light:s}=this,o=e.context.lightingModel,a=U2(s),l=e.context.reflectedLight;o.directRectArea({lightColor:i,lightPosition:a,halfWidth:this.halfWidth,halfHeight:this.halfHeight,reflectedLight:l,ltc_1:t,ltc_2:r},e.stack,e)}static setLTC(e){um=e}}class C8 extends uh{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=Mt(0).setGroup(Ft),this.penumbraCosNode=Mt(0).setGroup(Ft),this.cutoffDistanceNode=Mt(0).setGroup(Ft),this.decayExponentNode=Mt(0).setGroup(Ft)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e){const{coneCosNode:t,penumbraCosNode:r}=this;return Yu(t,r,e)}setup(e){super.setup(e);const t=e.context.lightingModel,{colorNode:r,cutoffDistanceNode:i,decayExponentNode:s,light:o}=this,a=U2(o).sub(Zr),l=a.normalize(),c=l.dot(E8(o)),u=this.getSpotAttenuation(c),h=a.length(),d=T8({lightDistance:h,cutoffDistance:i,decayExponent:s}),f=r.mul(u).mul(d),p=e.context.reflectedLight;t.direct({lightDirection:l,lightColor:f,reflectedLight:p},e.stack,e)}}class _Ae extends C8{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e){const t=this.light.iesMap;let r=null;if(t&&t.isTexture===!0){const i=e.acos().mul(1/Math.PI);r=Xn(t,Ke(i,0),0).r}else r=super.getSpotAttenuation(e);return r}}class xAe extends uh{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class SAe extends uh{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=M8(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=Mt(new rn).setGroup(Ft)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:r,lightDirectionNode:i}=this,o=To.dot(i).mul(.5).add(.5),a=Mn(r,t,o);e.context.irradiance.addAssign(a)}}class bAe extends uh{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const t=[];for(let r=0;r<9;r++)t.push(new ce);this.lightProbe=jg(t)}update(e){const{light:t}=this;super.update(e);for(let r=0;r<9;r++)this.lightProbe.array[r].copy(t.sh.coefficients[r]).multiplyScalar(t.intensity)}setup(e){const t=mAe(l1,this.lightProbe);e.context.irradiance.addAssign(t)}}class A8{parseFunction(){console.warn("Abstract function.")}}class B2{constructor(e,t,r="",i=""){this.type=e,this.inputs=t,this.name=r,this.precision=i}getCode(){console.warn("Abstract function.")}}B2.isNodeFunction=!0;const wAe=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,TAe=/[a-z_0-9]+/ig,VU="#pragma main",MAe=n=>{n=n.trim();const e=n.indexOf(VU),t=e!==-1?n.slice(e+VU.length):n,r=t.match(wAe);if(r!==null&&r.length===5){const i=r[4],s=[];let o=null;for(;(o=TAe.exec(i))!==null;)s.push(o);const a=[];let l=0;for(;l<s.length;){const p=s[l][0]==="const";p===!0&&l++;let y=s[l][0];y==="in"||y==="out"||y==="inout"?l++:y="";const g=s[l++][0];let m=Number.parseInt(s[l][0]);Number.isNaN(m)===!1?l++:m=null;const _=s[l++][0];a.push(new O2(g,_,m,y,p))}const c=t.substring(r[0].length),u=r[3]!==void 0?r[3]:"",h=r[2],d=r[1]!==void 0?r[1]:"",f=e!==-1?n.slice(0,e):"";return{type:h,inputs:a,name:u,precision:d,inputsCode:i,blockCode:c,headerCode:f}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class EAe extends B2{constructor(e){const{type:t,inputs:r,name:i,precision:s,inputsCode:o,blockCode:a,headerCode:l}=MAe(e);super(t,r,i,s),this.inputsCode=o,this.blockCode=a,this.headerCode=l}getCode(e=this.name){let t;const r=this.blockCode;if(r!==""){const{type:i,inputsCode:s,headerCode:o,precision:a}=this;let l=`${i} ${e} ( ${s.trim()} )`;a!==""&&(l=`${a} ${l}`),t=o+l+r}else t="";return t}}class CAe extends A8{parseFunction(e){return new EAe(e)}}function AAe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function RAe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}class NAe{constructor(){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparent=[],this.bundles=[],this.lightsNode=new QH([]),this.lightsArray=[],this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,t,r,i,s,o){let a=this.renderItems[this.renderItemsIndex];return a===void 0?(a={id:e.id,object:e,geometry:t,material:r,groupOrder:i,renderOrder:e.renderOrder,z:s,group:o},this.renderItems[this.renderItemsIndex]=a):(a.id=e.id,a.object=e,a.geometry=t,a.material=r,a.groupOrder=i,a.renderOrder=e.renderOrder,a.z=s,a.group=o),this.renderItemsIndex++,a}push(e,t,r,i,s,o){const a=this.getNextRenderItem(e,t,r,i,s,o);e.occlusionTest===!0&&this.occlusionQueryCount++,(r.transparent===!0||r.transmission>0?this.transparent:this.opaque).push(a)}unshift(e,t,r,i,s,o){const a=this.getNextRenderItem(e,t,r,i,s,o);(r.transparent===!0?this.transparent:this.opaque).unshift(a)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}getLightsNode(){return this.lightsNode.fromLights(this.lightsArray)}sort(e,t){this.opaque.length>1&&this.opaque.sort(e||AAe),this.transparent.length>1&&this.transparent.sort(t||RAe)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){const r=this.renderItems[e];if(r.id===null)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.groupOrder=null,r.renderOrder=null,r.z=null,r.group=null}}}class PAe{constructor(){this.lists=new ol}get(e,t){const r=this.lists,i=[e,t];let s=r.get(i);return s===void 0&&(s=new NAe,r.set(i,s)),s}dispose(){this.lists=new ol}}let IAe=0;class LAe{constructor(){this.id=IAe++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new tn,this.scissor=!1,this.scissorValue=new tn,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.sampleCount=1,this.width=0,this.height=0,this.isRenderContext=!0}getCacheKey(){return R8(this)}}function R8(n){const{textures:e,activeCubeFace:t}=n,r=[t];for(const i of e)r.push(i.id);return cH(r)}class DAe{constructor(){this.chainMaps={}}get(e,t,r=null){const i=[e,t];let s;if(r===null)s="default";else{const l=r.texture.format;s=`${r.textures.length}:${l}:${r.samples}:${r.depthBuffer}:${r.stencilBuffer}`}const o=this.getChainMap(s);let a=o.get(i);return a===void 0&&(a=new LAe,o.set(i,a)),r!==null&&(a.sampleCount=r.samples===0?1:r.samples),a}getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new ol)}dispose(){this.chainMaps={}}}const FAe=new ce;class OAe extends Dc{constructor(e,t,r){super(),this.renderer=e,this.backend=t,this.info=r}updateRenderTarget(e,t=0){const r=this.get(e),i=e.samples===0?1:e.samples,s=r.depthTextureMips||(r.depthTextureMips={}),o=e.textures,a=this.getSize(o[0]),l=a.width>>t,c=a.height>>t;let u=e.depthTexture||s[t],h=!1;u===void 0&&(u=new Py,u.format=e.stencilBuffer?Hf:Pu,u.type=e.stencilBuffer?Cy:Dr,u.image.width=l,u.image.height=c,s[t]=u),(r.width!==a.width||a.height!==r.height)&&(h=!0,u.needsUpdate=!0,u.image.width=l,u.image.height=c),r.width=a.width,r.height=a.height,r.textures=o,r.depthTexture=u,r.depth=e.depthBuffer,r.stencil=e.stencilBuffer,r.renderTarget=e,r.sampleCount!==i&&(h=!0,u.needsUpdate=!0,r.sampleCount=i);const d={sampleCount:i};for(let f=0;f<o.length;f++){const p=o[f];h&&(p.needsUpdate=!0),this.updateTexture(p,d)}if(this.updateTexture(u,d),r.initialized!==!0){r.initialized=!0;const f=()=>{e.removeEventListener("dispose",f);for(let p=0;p<o.length;p++)this._destroyTexture(o[p]);this._destroyTexture(u),this.delete(e)};e.addEventListener("dispose",f)}}updateTexture(e,t={}){const r=this.get(e);if(r.initialized===!0&&r.version===e.version)return;const i=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;if(i&&r.initialized===!0&&(s.destroySampler(e),s.destroyTexture(e)),e.isFramebufferTexture){const u=this.renderer.getRenderTarget();u?e.type=u.texture.type:e.type=$a}const{width:o,height:a,depth:l}=this.getSize(e);if(t.width=o,t.height=a,t.depth=l,t.needsMipmaps=this.needsMipmaps(e),t.levels=t.needsMipmaps?this.getMipLevels(e,o,a):1,i||e.isStorageTexture===!0)s.createSampler(e),s.createTexture(e,t),r.generation=e.version;else if(r.initialized!==!0&&s.createSampler(e),e.version>0){const u=e.image;if(u===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(u.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const h=[];for(const d of e.images)h.push(d);t.images=h}else t.image=u;(r.isDefaultTexture===void 0||r.isDefaultTexture===!0)&&(s.createTexture(e,t),r.isDefaultTexture=!1,r.generation=e.version),e.source.dataReady===!0&&s.updateTexture(e,t),t.needsMipmaps&&e.mipmaps.length===0&&s.generateMipmaps(e)}}else s.createDefaultTexture(e),r.isDefaultTexture=!0,r.generation=e.version;if(r.initialized!==!0){r.initialized=!0,r.generation=e.version,this.info.memory.textures++;const c=()=>{e.removeEventListener("dispose",c),this._destroyTexture(e),this.info.memory.textures--};e.addEventListener("dispose",c)}r.version=e.version}getSize(e,t=FAe){let r=e.images?e.images[0]:e.image;return r?(r.image!==void 0&&(r=r.image),t.width=r.width,t.height=r.height,t.depth=e.isCubeTexture?6:r.depth||1):t.width=t.height=t.depth=1,t}getMipLevels(e,t,r){let i;return e.isCompressedTexture?i=e.mipmaps.length:i=Math.floor(Math.log2(Math.max(t,r)))+1,i}needsMipmaps(e){return this.isEnvironmentTexture(e)?!0:e.isCompressedTexture===!0||e.minFilter!==kr&&e.minFilter!==Ui}isEnvironmentTexture(e){const t=e.mapping;return t===My||t===Ey||t===ju||t===Gf}_destroyTexture(e){this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e)}}class z2 extends rn{constructor(e,t,r,i=1){super(e,t,r),this.a=i}set(e,t,r,i=1){return this.a=i,super.set(e,t,r)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}const Qs=new z2;class kAe extends Dc{constructor(e,t){super(),this.renderer=e,this.nodes=t}update(e,t,r){const i=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let o=!1;if(s===null)i._clearColor.getRGB(Qs,Fs),Qs.a=i._clearColor.a;else if(s.isColor===!0)s.getRGB(Qs,Fs),Qs.a=1,o=!0;else if(s.isNode===!0){const a=this.get(e),l=s;Qs.copy(i._clearColor);let c=a.backgroundMesh;if(c===void 0){const h=M2(Tt(l).mul(kU),{getUV:()=>l1,getTextureLevel:()=>zCe});let d=YA();d=d.setZ(d.w);const f=new lr;f.name="Background.material",f.side=ul,f.depthTest=!1,f.depthWrite=!1,f.fog=!1,f.lights=!1,f.vertexNode=d,f.colorNode=h,a.backgroundMeshNode=h,a.backgroundMesh=c=new Ku(new d2(1,32,32),f),c.frustumCulled=!1,c.name="Background.mesh",c.onBeforeRender=function(p,y,g){this.matrixWorld.copyPosition(g.matrixWorld)}}const u=l.getCacheKey();a.backgroundCacheKey!==u&&(a.backgroundMeshNode.node=Tt(l).mul(kU),a.backgroundMeshNode.needsUpdate=!0,c.material.needsUpdate=!0,a.backgroundCacheKey=u),t.unshift(c,c.geometry,c.material,0,0,null)}else console.error("THREE.Renderer: Unsupported background configuration.",s);if(i.autoClear===!0||o===!0){Qs.multiplyScalar(Qs.a);const a=r.clearColorValue;a.r=Qs.r,a.g=Qs.g,a.b=Qs.b,a.a=Qs.a,r.depthClearValue=i._clearDepth,r.stencilClearValue=i._clearStencil,r.clearColor=i.autoClearColor===!0,r.clearDepth=i.autoClearDepth===!0,r.clearStencil=i.autoClearStencil===!0}else r.clearColor=!1,r.clearDepth=!1,r.clearStencil=!1}}class UAe{constructor(e,t,r,i,s,o,a,l,c,u=[]){this.vertexShader=e,this.fragmentShader=t,this.computeShader=r,this.transforms=u,this.nodeAttributes=i,this.bindings=s,this.updateNodes=o,this.updateBeforeNodes=a,this.updateAfterNodes=l,this.monitor=c,this.usedTimes=0}createBindings(){const e=[];for(const t of this.bindings)if(t.bindings[0].groupNode.shared!==!0){const i=new rR(t.name,[],t.index,t);e.push(i);for(const s of t.bindings)i.bindings.push(s.clone())}else e.push(t);return e}}const GU=new WeakMap;class BAe extends Dc{constructor(e,t){super(),this.renderer=e,this.backend=t,this.nodeFrame=new OU,this.nodeBuilderCache=new Map,this.callHashCache=new ol,this.groupsData=new ol}updateGroup(e){const t=e.groupNode,r=t.name;if(r===_H.name)return!0;if(r===Ft.name){const o=this.get(e),a=this.nodeFrame.renderId;return o.renderId!==a?(o.renderId=a,!0):!1}if(r===p1e.name){const o=this.get(e),a=this.nodeFrame.frameId;return o.frameId!==a?(o.frameId=a,!0):!1}const i=[t,e];let s=this.groupsData.get(i);return s===void 0&&this.groupsData.set(i,s={}),s.version!==t.version?(s.version=t.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const t=this.get(e);let r=t.nodeBuilderState;if(r===void 0){const{nodeBuilderCache:i}=this,s=this.getForRenderCacheKey(e);if(r=i.get(s),r===void 0){const o=this.backend.createNodeBuilder(e.object,this.renderer);o.scene=e.scene,o.material=e.material,o.camera=e.camera,o.context.material=e.material,o.lightsNode=e.lightsNode,o.environmentNode=this.getEnvironmentNode(e.scene),o.fogNode=this.getFogNode(e.scene),o.clippingContext=e.clippingContext,o.build(),r=this._createNodeBuilderState(o),i.set(s,r)}r.usedTimes++,t.nodeBuilderState=r}return r}delete(e){if(e.isRenderObject){const t=this.get(e).nodeBuilderState;t.usedTimes--,t.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const t=this.get(e);let r=t.nodeBuilderState;if(r===void 0){const i=this.backend.createNodeBuilder(e,this.renderer);i.build(),r=this._createNodeBuilderState(i),t.nodeBuilderState=r}return r}_createNodeBuilderState(e){return new UAe(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.monitor,e.transforms)}getEnvironmentNode(e){return e.environmentNode||this.get(e).environmentNode||null}getBackgroundNode(e){return e.backgroundNode||this.get(e).backgroundNode||null}getFogNode(e){return e.fogNode||this.get(e).fogNode||null}getCacheKey(e,t){const r=[e,t],i=this.renderer.info.calls;let s=this.callHashCache.get(r);if(s===void 0||s.callId!==i){const o=this.getEnvironmentNode(e),a=this.getFogNode(e),l=[];t&&l.push(t.getCacheKey(!0)),o&&l.push(o.getCacheKey()),a&&l.push(a.getCacheKey()),l.push(this.renderer.shadowMap.enabled?1:0),s={callId:i,cacheKey:cH(l)},this.callHashCache.set(r,s)}return s.cacheKey}updateScene(e){this.updateEnvironment(e),this.updateFog(e),this.updateBackground(e)}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const t=this.get(e),r=e.background;if(r){const i=e.backgroundBlurriness===0&&t.backgroundBlurriness>0||e.backgroundBlurriness>0&&t.backgroundBlurriness===0;if(t.background!==r||i){let s=null;if(r.isCubeTexture===!0||r.mapping===My||r.mapping===Ey||r.mapping===xA)if(e.backgroundBlurriness>0||r.mapping===xA)s=g8(r,l1);else{let o;r.isCubeTexture===!0?o=Wg(r):o=Xn(r),s=a8(o)}else r.isTexture===!0?s=Xn(r,qg.flipY()).setUpdateMatrix(!0):r.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",r);t.backgroundNode=s,t.background=r,t.backgroundBlurriness=e.backgroundBlurriness}}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}updateFog(e){const t=this.get(e),r=e.fog;if(r){if(t.fog!==r){let i=null;if(r.isFogExp2){const s=Un("color","color",r).setGroup(Ft),o=Un("density","float",r).setGroup(Ft);i=qCe(s,o)}else if(r.isFog){const s=Un("color","color",r).setGroup(Ft),o=Un("near","float",r).setGroup(Ft),a=Un("far","float",r).setGroup(Ft);i=WCe(s,o,a)}else console.error("WebGPUNodes: Unsupported fog configuration.",r);t.fogNode=i,t.fog=r}}else delete t.fogNode,delete t.fog}updateEnvironment(e){const t=this.get(e),r=e.environment;if(r){if(t.environment!==r){let i=null;r.isCubeTexture===!0?i=Wg(r):r.isTexture===!0?i=Xn(r):console.error("Nodes: Unsupported environment configuration.",r),t.environmentNode=i,t.environment=r}}else t.environmentNode&&(delete t.environmentNode,delete t.environment)}getNodeFrame(e=this.renderer,t=null,r=null,i=null,s=null){const o=this.nodeFrame;return o.renderer=e,o.scene=t,o.object=r,o.camera=i,o.material=s,o}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace}hasOutputChange(e){return GU.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const t=this.renderer,r=this.getOutputCacheKey(),i=Xn(e,qg).renderOutput(t.toneMapping,t.currentColorSpace);return GU.set(e,r),i}updateBefore(e){const t=e.getNodeBuilderState();for(const r of t.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(r)}updateAfter(e){const t=e.getNodeBuilderState();for(const r of t.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(r)}updateForCompute(e){const t=this.getNodeFrame(),r=this.getForCompute(e);for(const i of r.updateNodes)t.updateNode(i)}updateForRender(e){const t=this.getNodeFrameForRender(e),r=e.getNodeBuilderState();for(const i of r.updateNodes)t.updateNode(i)}needsRefresh(e){const t=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,t)}dispose(){super.dispose(),this.nodeFrame=new OU,this.nodeBuilderCache=new Map}}class zAe{constructor(e,t){this.scene=e,this.camera=t}clone(){return Object.assign(new this.constructor,this)}}class $Ae{constructor(){this.lists=new ol}get(e,t){const r=this.lists,i=[e,t];let s=r.get(i);return s===void 0&&(s=new zAe(e,t),r.set(i,s)),s}dispose(){this.lists=new ol}}class N8{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map,this.colorSpaceNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let t=null;const r=this.getMaterialNodeClass(e.type);if(r!==null){t=new r;for(const i in e)t[i]=e[i]}return t}addColorSpace(e,t){this.addType(e,t,this.colorSpaceNodes)}getColorSpaceFunction(e){return this.colorSpaceNodes.get(e)||null}addToneMapping(e,t){this.addType(e,t,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,t){this.addType(e,t.name,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,t){this.addClass(e,t,this.lightNodes)}addType(e,t,r){if(r.has(t)){console.warn(`Redefinition of node ${t}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t=="function"||typeof t=="object")throw new Error(`Base class ${t} is not a class.`);r.set(t,e)}addClass(e,t,r){if(r.has(t)){console.warn(`Redefinition of node ${t.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t!="function")throw new Error(`Base class ${t.name} is not a class.`);r.set(t,e)}}const HU=new K6,Tv=new zt,lM=new tn,cM=new Q6,Mv=new zn,ed=new tn;class VAe{constructor(e,t={}){this.isRenderer=!0;const{logarithmicDepthBuffer:r=!1,alpha:i=!0,depth:s=!0,stencil:o=!1,antialias:a=!1,samples:l=0,getFallback:c=null}=t;this.domElement=e.getDomElement(),this.backend=e,this.samples=l||a===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=i,this.logarithmicDepthBuffer=r,this.outputColorSpace=ht,this.toneMapping=Xd,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=s,this.stencil=o,this.clippingPlanes=[],this.info=new nCe,this.nodes={library:new N8,modelViewMatrix:null,modelNormalViewMatrix:null},this._getFallback=c,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new tn(0,0,this._width,this._height),this._scissor=new tn(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new b8(new lr),this._quad.material.type="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const u=this.alpha===!0?0:1;this._clearColor=new z2(0,0,0,u),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:Hxe},this.xr={enabled:!1},this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(h,d,f)=>{await this.compileAsync(h,d);const p=this._renderLists.get(h,d),y=this._renderContexts.get(h,d,this._renderTarget),g=h.overrideMaterial||f.material,m=this._objects.get(f,g,h,d,p.lightsNode,y),{fragmentShader:_,vertexShader:v}=m.getNodeBuilderState();return{fragmentShader:_,vertexShader:v}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,t)=>{let r=this.backend;try{await r.init(this)}catch(i){if(this._getFallback!==null)try{this.backend=r=this._getFallback(i),await r.init(this)}catch(s){t(s);return}else{t(i);return}}this._nodes=new BAe(this,r),this._animation=new jEe(this._nodes,this.info),this._attributes=new JEe(r),this._background=new kAe(this,this._nodes),this._geometries=new tCe(this._attributes,this.info),this._textures=new OAe(this,r,this.info),this._pipelines=new oCe(r,this._nodes),this._bindings=new aCe(r,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new YEe(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new PAe,this._bundles=new $Ae,this._renderContexts=new DAe,this._initialized=!0,e()}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,t,r=null){this._initialized===!1&&await this.init();const i=this._nodes.nodeFrame,s=i.renderId,o=this._currentRenderContext,a=this._currentRenderObjectFunction,l=this._compilationPromises,c=e.isScene===!0?e:HU;r===null&&(r=e);const u=this._renderTarget,h=this._renderContexts.get(r,t,u),d=this._activeMipmapLevel,f=[];this._currentRenderContext=h,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=f,i.renderId++,i.update(),h.depth=this.depth,h.stencil=this.stencil,h.clippingContext||(h.clippingContext=new nR),h.clippingContext.updateGlobal(this,t),c.onBeforeRender(this,e,t,u);const p=this._renderLists.get(e,t);if(p.begin(),this._projectObject(e,t,0,p),r!==e&&r.traverseVisible(function(_){_.isLight&&_.layers.test(t.layers)&&p.pushLight(_)}),p.finish(),u!==null){this._textures.updateRenderTarget(u,d);const _=this._textures.get(u);h.textures=_.textures,h.depthTexture=_.depthTexture}else h.textures=null,h.depthTexture=null;this._nodes.updateScene(c),this._background.update(c,p,h);const y=p.opaque,g=p.transparent,m=p.lightsNode;this.opaque===!0&&y.length>0&&this._renderObjects(y,t,c,m),this.transparent===!0&&g.length>0&&this._renderObjects(g,t,c,m),i.renderId=s,this._currentRenderContext=o,this._currentRenderObjectFunction=a,this._compilationPromises=l,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(f)}async renderAsync(e,t){this._initialized===!1&&await this.init();const r=this._renderScene(e,t);await this.backend.resolveTimestampAsync(r,"render")}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}_renderBundle(e,t,r){const{bundleGroup:i,camera:s,renderList:o}=e,a=this._currentRenderContext,l=this._bundles.get(i,s),c=this.backend.get(l);c.renderContexts===void 0&&(c.renderContexts=new Set);const u=i.version!==c.version,h=c.renderContexts.has(a)===!1||u;if(c.renderContexts.add(a),h){this.backend.beginBundle(a),(c.renderObjects===void 0||u)&&(c.renderObjects=[]),this._currentRenderBundle=l;const d=o.opaque;d.length>0&&this._renderObjects(d,s,t,r),this._currentRenderBundle=null,this.backend.finishBundle(a,l),c.version=i.version}else{const{renderObjects:d}=c;for(let f=0,p=d.length;f<p;f++){const y=d[f];this._nodes.needsRefresh(y)&&(this._nodes.updateBefore(y),this._nodes.updateForRender(y),this._bindings.updateForRender(y),this._nodes.updateAfter(y))}}this.backend.addBundle(a,l)}render(e,t){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,t);this._renderScene(e,t)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:t}=this;if(e!==Xd===!1&&t!==Fs===!1)return null;const{width:s,height:o}=this.getDrawingBufferSize(Tv),{depth:a,stencil:l}=this;let c=this._frameBufferTarget;return c===null&&(c=new up(s,o,{depthBuffer:a,stencilBuffer:l,type:Xa,format:lp,colorSpace:Fs,generateMipmaps:!1,minFilter:Ui,magFilter:Ui,samples:this.samples}),c.isPostProcessingRenderTarget=!0,this._frameBufferTarget=c),c.depthBuffer=a,c.stencilBuffer=l,c.setSize(s,o),c.viewport.copy(this._viewport),c.scissor.copy(this._scissor),c.viewport.multiplyScalar(this._pixelRatio),c.scissor.multiplyScalar(this._pixelRatio),c.scissorTest=this._scissorTest,c}_renderScene(e,t,r=!0){const i=r?this._getFrameBufferTarget():null,s=this._nodes.nodeFrame,o=s.renderId,a=this._currentRenderContext,l=this._currentRenderObjectFunction,c=e.isScene===!0?e:HU,u=this._renderTarget,h=this._activeCubeFace,d=this._activeMipmapLevel;let f;i!==null?(f=i,this.setRenderTarget(f)):f=u;const p=this._renderContexts.get(e,t,f);this._currentRenderContext=p,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,s.renderId=this.info.calls;const y=this.coordinateSystem;t.coordinateSystem!==y&&(t.coordinateSystem=y,t.updateProjectionMatrix()),e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.matrixWorldAutoUpdate===!0&&t.updateMatrixWorld();let g=this._viewport,m=this._scissor,_=this._pixelRatio;f!==null&&(g=f.viewport,m=f.scissor,_=1),this.getDrawingBufferSize(Tv),lM.set(0,0,Tv.width,Tv.height);const v=g.minDepth===void 0?0:g.minDepth,x=g.maxDepth===void 0?1:g.maxDepth;p.viewportValue.copy(g).multiplyScalar(_).floor(),p.viewportValue.width>>=d,p.viewportValue.height>>=d,p.viewportValue.minDepth=v,p.viewportValue.maxDepth=x,p.viewport=p.viewportValue.equals(lM)===!1,p.scissorValue.copy(m).multiplyScalar(_).floor(),p.scissor=this._scissorTest&&p.scissorValue.equals(lM)===!1,p.scissorValue.width>>=d,p.scissorValue.height>>=d,p.clippingContext||(p.clippingContext=new nR),p.clippingContext.updateGlobal(this,t),c.onBeforeRender(this,e,t,f),Mv.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),cM.setFromProjectionMatrix(Mv,y);const b=this._renderLists.get(e,t);if(b.begin(),this._projectObject(e,t,0,b),b.finish(),this.sortObjects===!0&&b.sort(this._opaqueSort,this._transparentSort),f!==null){this._textures.updateRenderTarget(f,d);const S=this._textures.get(f);p.textures=S.textures,p.depthTexture=S.depthTexture,p.width=S.width,p.height=S.height,p.renderTarget=f,p.depth=f.depthBuffer,p.stencil=f.stencilBuffer}else p.textures=null,p.depthTexture=null,p.width=this.domElement.width,p.height=this.domElement.height,p.depth=this.depth,p.stencil=this.stencil;p.width>>=d,p.height>>=d,p.activeCubeFace=h,p.activeMipmapLevel=d,p.occlusionQueryCount=b.occlusionQueryCount,this._nodes.updateScene(c),this._background.update(c,b,p),this.backend.beginRender(p);const{bundles:T,lightsNode:w,transparent:M,opaque:A}=b;if(T.length>0&&this._renderBundles(T,c,w),this.opaque===!0&&A.length>0&&this._renderObjects(A,t,c,w),this.transparent===!0&&M.length>0&&this._renderObjects(M,t,c,w),this.backend.finishRender(p),s.renderId=o,this._currentRenderContext=a,this._currentRenderObjectFunction=l,i!==null){this.setRenderTarget(u,h,d);const S=this._quad;this._nodes.hasOutputChange(f.texture)&&(S.material.fragmentNode=this._nodes.getOutputNode(f.texture),S.material.needsUpdate=!0),this._renderScene(S,S.camera,!1)}return c.onAfterRender(this,e,t,f),p}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio=e,this.setSize(this._width,this._height,!1)}setDrawingBufferSize(e,t,r){this._width=e,this._height=t,this._pixelRatio=r,this.domElement.width=Math.floor(e*r),this.domElement.height=Math.floor(t*r),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize()}setSize(e,t,r=!0){this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),r===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize()}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}setScissor(e,t,r,i){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,t,r,i)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,t,r,i,s=0,o=1){const a=this._viewport;e.isVector4?a.copy(e):a.set(e,t,r,i),a.minDepth=s,a.maxDepth=o}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,t=1){this._clearColor.set(e),this._clearColor.a=t}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const t=this._currentRenderContext;return t&&this.backend.isOccluded(t,e)}clear(e=!0,t=!0,r=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,t,r);const i=this._renderTarget||this._getFrameBufferTarget();let s=null;if(i!==null&&(this._textures.updateRenderTarget(i),s=this._textures.get(i)),this.backend.clear(e,t,r,s),i!==null&&this._renderTarget===null){const o=this._quad;this._nodes.hasOutputChange(i.texture)&&(o.material.fragmentNode=this._nodes.getOutputNode(i.texture),o.material.needsUpdate=!0),this._renderScene(o,o.camera,!1)}}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,t=!0,r=!0){this._initialized===!1&&await this.init(),this.clear(e,t,r)}clearColorAsync(){return this.clearAsync(!0,!1,!1)}clearDepthAsync(){return this.clearAsync(!1,!0,!1)}clearStencilAsync(){return this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this._renderTarget!==null?Xd:this.toneMapping}get currentColorSpace(){return this._renderTarget!==null?Fs:this.outputColorSpace}dispose(){this.info.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,t=0,r=0){this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=r}getRenderTarget(){return this._renderTarget}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}async computeAsync(e){this._initialized===!1&&await this.init();const t=this._nodes.nodeFrame,r=t.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,t.renderId=this.info.calls;const i=this.backend,s=this._pipelines,o=this._bindings,a=this._nodes,l=Array.isArray(e)?e:[e];if(l[0]===void 0||l[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");i.beginCompute(e);for(const c of l){if(s.has(c)===!1){const d=()=>{c.removeEventListener("dispose",d),s.delete(c),o.delete(c),a.delete(c)};c.addEventListener("dispose",d),c.onInit({renderer:this})}a.updateForCompute(c),o.updateForCompute(c);const u=o.getForCompute(c),h=s.getForCompute(c,u);i.compute(e,c,u,h)}i.finishCompute(e),await this.backend.resolveTimestampAsync(e,"compute"),t.renderId=r}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}copyFramebufferToTexture(e,t=null){const r=this._currentRenderContext;this._textures.updateTexture(e),t=t===null?ed.set(0,0,e.image.width,e.image.height):t,this.backend.copyFramebufferToTexture(e,r,t)}copyTextureToTexture(e,t,r=null,i=null,s=0){this._textures.updateTexture(e),this._textures.updateTexture(t),this.backend.copyTextureToTexture(e,t,r,i,s)}readRenderTargetPixelsAsync(e,t,r,i,s,o=0,a=0){return this.backend.copyTextureToBuffer(e.textures[o],t,r,i,s,a)}_projectObject(e,t,r,i){if(e.visible===!1)return;if(e.layers.test(t.layers)){if(e.isGroup)r=e.renderOrder;else if(e.isLOD)e.autoUpdate===!0&&e.update(t);else if(e.isLight)i.pushLight(e);else if(e.isSprite){if(!e.frustumCulled||cM.intersectsSprite(e)){this.sortObjects===!0&&ed.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Mv);const{geometry:a,material:l}=e;l.visible&&i.push(e,a,l,r,ed.z,null)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||cM.intersectsObject(e))){const{geometry:a,material:l}=e;if(this.sortObjects===!0&&(a.boundingSphere===null&&a.computeBoundingSphere(),ed.copy(a.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(Mv)),Array.isArray(l)){const c=a.groups;for(let u=0,h=c.length;u<h;u++){const d=c[u],f=l[d.materialIndex];f&&f.visible&&i.push(e,a,f,r,ed.z,d)}}else l.visible&&i.push(e,a,l,r,ed.z,null)}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const a=i;i=this._renderLists.get(e,t),i.begin(),a.pushBundle({bundleGroup:e,camera:t,renderList:i}),i.finish()}const o=e.children;for(let a=0,l=o.length;a<l;a++)this._projectObject(o[a],t,r,i)}_renderBundles(e,t,r){for(const i of e)this._renderBundle(i,t,r)}_renderObjects(e,t,r,i){for(let s=0,o=e.length;s<o;s++){const a=e[s],{object:l,geometry:c,material:u,group:h}=a;if(t.isArrayCamera){const d=t.cameras;for(let f=0,p=d.length;f<p;f++){const y=d[f];if(l.layers.test(y.layers)){const g=y.viewport,m=g.minDepth===void 0?0:g.minDepth,_=g.maxDepth===void 0?1:g.maxDepth,v=this._currentRenderContext.viewportValue;v.copy(g).multiplyScalar(this._pixelRatio).floor(),v.minDepth=m,v.maxDepth=_,this.backend.updateViewport(this._currentRenderContext),this._currentRenderObjectFunction(l,r,y,c,u,h,i)}}}else this._currentRenderObjectFunction(l,r,t,c,u,h,i)}}renderObject(e,t,r,i,s,o,a){let l,c,u;if(e.onBeforeRender(this,t,r,i,s,o),t.overrideMaterial!==null){const h=t.overrideMaterial;s.positionNode&&s.positionNode.isNode&&(l=h.positionNode,h.positionNode=s.positionNode),h.isShadowNodeMaterial&&(h.side=s.shadowSide===null?s.side:s.shadowSide,s.depthNode&&s.depthNode.isNode&&(u=h.depthNode,h.depthNode=s.depthNode),s.shadowNode&&s.shadowNode.isNode&&(c=h.fragmentNode,h.fragmentNode=s.shadowNode),this.localClippingEnabled&&(s.clipShadows?(h.clippingPlanes!==s.clippingPlanes&&(h.clippingPlanes=s.clippingPlanes,h.needsUpdate=!0),h.clipIntersection!==s.clipIntersection&&(h.clipIntersection=s.clipIntersection)):Array.isArray(h.clippingPlanes)&&(h.clippingPlanes=null,h.needsUpdate=!0))),s=h}s.transparent===!0&&s.side===Ox&&s.forceSinglePass===!1?(s.side=ul,this._handleObjectFunction(e,s,t,r,a,o,"backSide"),s.side=Bg,this._handleObjectFunction(e,s,t,r,a,o),s.side=Ox):this._handleObjectFunction(e,s,t,r,a,o),l!==void 0&&(t.overrideMaterial.positionNode=l),u!==void 0&&(t.overrideMaterial.depthNode=u),c!==void 0&&(t.overrideMaterial.fragmentNode=c),e.onAfterRender(this,t,r,i,s,o)}_renderObjectDirect(e,t,r,i,s,o,a){const l=this._objects.get(e,t,r,i,s,this._currentRenderContext,a);l.drawRange=e.geometry.drawRange,l.group=o;const c=this._nodes.needsRefresh(l);c&&(this._nodes.updateBefore(l),this._geometries.updateForRender(l),this._nodes.updateForRender(l),this._bindings.updateForRender(l)),this._pipelines.updateForRender(l),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(l),l.bundle=this._currentRenderBundle.scene),this.backend.draw(l,this.info),c&&this._nodes.updateAfter(l)}_createObjectPipeline(e,t,r,i,s,o){const a=this._objects.get(e,t,r,i,s,this._currentRenderContext,o);this._nodes.updateBefore(a),this._geometries.updateForRender(a),this._nodes.updateForRender(a),this._bindings.updateForRender(a),this._pipelines.getForRender(a,this._compilationPromises),this._nodes.updateAfter(a)}get compute(){return this.computeAsync}get compile(){return this.compileAsync}}class $2{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function GAe(n){return n+(jl-n%jl)%jl}let P8=class extends $2{constructor(e,t=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=t}get byteLength(){return GAe(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}};class I8 extends P8{constructor(e,t=null){super(e,t),this.isUniformBuffer=!0}}let HAe=0;class L8 extends I8{constructor(e,t){super("UniformBuffer_"+HAe++,e?e.value:null),this.nodeUniform=e,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class WAe extends I8{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const t=this.byteLength;e=new Float32Array(new ArrayBuffer(t)),this._buffer=e}return e}get byteLength(){let e=0;for(let t=0,r=this.uniforms.length;t<r;t++){const i=this.uniforms[t],{boundary:s,itemSize:o}=i,a=e%jl,l=jl-a;a!==0&&l-s<0?e+=jl-a:a%s!==0&&(e+=a%s),i.offset=e/this.bytesPerElement,e+=o*this.bytesPerElement}return Math.ceil(e/jl)*jl}update(){let e=!1;for(const t of this.uniforms)this.updateByType(t)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset;if(r[s]!==i){const o=this.buffer;o[s]=r[s]=i,t=!0}return t}updateVector2(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset;if(r[s+0]!==i.x||r[s+1]!==i.y){const o=this.buffer;o[s+0]=r[s+0]=i.x,o[s+1]=r[s+1]=i.y,t=!0}return t}updateVector3(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset;if(r[s+0]!==i.x||r[s+1]!==i.y||r[s+2]!==i.z){const o=this.buffer;o[s+0]=r[s+0]=i.x,o[s+1]=r[s+1]=i.y,o[s+2]=r[s+2]=i.z,t=!0}return t}updateVector4(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset;if(r[s+0]!==i.x||r[s+1]!==i.y||r[s+2]!==i.z||r[s+4]!==i.w){const o=this.buffer;o[s+0]=r[s+0]=i.x,o[s+1]=r[s+1]=i.y,o[s+2]=r[s+2]=i.z,o[s+3]=r[s+3]=i.w,t=!0}return t}updateColor(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset;if(r[s+0]!==i.r||r[s+1]!==i.g||r[s+2]!==i.b){const o=this.buffer;o[s+0]=r[s+0]=i.r,o[s+1]=r[s+1]=i.g,o[s+2]=r[s+2]=i.b,t=!0}return t}updateMatrix3(e){let t=!1;const r=this.values,i=e.getValue().elements,s=e.offset;if(r[s+0]!==i[0]||r[s+1]!==i[1]||r[s+2]!==i[2]||r[s+4]!==i[3]||r[s+5]!==i[4]||r[s+6]!==i[5]||r[s+8]!==i[6]||r[s+9]!==i[7]||r[s+10]!==i[8]){const o=this.buffer;o[s+0]=r[s+0]=i[0],o[s+1]=r[s+1]=i[1],o[s+2]=r[s+2]=i[2],o[s+4]=r[s+4]=i[3],o[s+5]=r[s+5]=i[4],o[s+6]=r[s+6]=i[5],o[s+8]=r[s+8]=i[6],o[s+9]=r[s+9]=i[7],o[s+10]=r[s+10]=i[8],t=!0}return t}updateMatrix4(e){let t=!1;const r=this.values,i=e.getValue().elements,s=e.offset;return qAe(r,i,s)===!1&&(this.buffer.set(i,s),jAe(r,i,s),t=!0),t}}function jAe(n,e,t){for(let r=0,i=e.length;r<i;r++)n[t+r]=e[r]}function qAe(n,e,t){for(let r=0,i=e.length;r<i;r++)if(n[t+r]!==e[r])return!1;return!0}let XAe=0;class D8 extends WAe{constructor(e,t){super(e),this.id=XAe++,this.groupNode=t,this.isNodeUniformsGroup=!0}getNodes(){const e=[];for(const t of this.uniforms){const r=t.nodeUniform.node;if(!r)throw new Error("NodeUniformsGroup: Uniform has no node.");e.push(r)}return e}}let KAe=0;class YAe extends $2{constructor(e,t){super(e),this.id=KAe++,this.texture=t,this.version=t?t.version:0,this.store=!1,this.generation=null,this.isSampledTexture=!0}needsBindingsUpdate(e){const{texture:t}=this;return e!==this.generation?(this.generation=e,!0):t.isVideoTexture}update(){const{texture:e,version:t}=this;return t!==e.version?(this.version=e.version,!0):!1}}class f1 extends YAe{constructor(e,t,r,i=null){super(e,t?t.value:null),this.textureNode=t,this.groupNode=r,this.access=i}needsBindingsUpdate(e){return this.textureNode.value!==this.texture||super.needsBindingsUpdate(e)}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class F8 extends f1{constructor(e,t,r,i){super(e,t,r,i),this.isSampledCubeTexture=!0}}class O8 extends f1{constructor(e,t,r,i){super(e,t,r,i),this.isSampledTexture3D=!0}}const ZAe={atan2:"atan",textureDimensions:"textureSize",equals:"equal"},QAe={low:"lowp",medium:"mediump",high:"highp"},WU={swizzleAssign:!0,storageBuffer:!1},jU=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
`;class JAe extends S8{constructor(e,t){super(e,t,new CAe),this.uniformGroups={},this.transforms=[],this.extensions={},this.useComparisonMethod=!0}needsColorSpaceToLinearSRGB(e){return e.isVideoTexture===!0&&e.colorSpace!==qu}getMethod(e){return ZAe[e]||e}getOutputStructName(){return""}buildFunctionCode(e){const t=e.layout,r=this.flowShaderNode(e),i=[];for(const o of t.inputs)i.push(this.getType(o.type)+" "+o.name);return`${this.getType(t.type)} ${t.name}( ${i.join(", ")} ) {

	${r.vars}

${r.code}
	return ${r.result};

}`}setupPBO(e){const t=e.value;if(t.pbo===void 0){const r=t.array,i=t.count*t.itemSize,{itemSize:s}=t,o=t.array.constructor.name.toLowerCase().includes("int");let a=o?r2:n2;s===2?a=o?i2:zg:s===3?a=o?oSe:t2:s===4&&(a=o?s2:lp);const l={Float32Array:os,Uint8Array:$a,Uint16Array:Md,Uint32Array:Dr,Int8Array:Jm,Int16Array:eg,Int32Array:ui,Uint8ClampedArray:$a},c=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(i/s))));let u=Math.ceil(i/s/c);c*u*s<i&&u++;const h=c*u*s,d=new r.constructor(h);d.set(r,0),t.array=d;const f=new pbe(t.array,c,u,a,l[t.array.constructor.name]||os);f.needsUpdate=!0,f.isPBOTexture=!0;const p=new Dy(f,null,null);p.setPrecision("high"),t.pboNode=p,t.pbo=p.value,this.getUniformFromNode(t.pboNode,"texture",this.shaderStage,this.context.label)}}getPropertyName(e,t=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?t.charAt(0)+"_"+e.name:super.getPropertyName(e,t)}generatePBO(e){const{node:t,indexNode:r}=e,i=t.value;if(this.renderer.backend.has(i)){const u=this.renderer.backend.get(i);u.pbo=i.pbo}const s=this.getUniformFromNode(i.pboNode,"texture",this.shaderStage,this.context.label),o=this.getPropertyName(s);this.increaseUsage(r);const a=r.build(this,"uint"),l=this.getDataFromNode(e);let c=l.propertyName;if(c===void 0){const u=this.getVarFromNode(e);c=this.getPropertyName(u);const h=this.getDataFromNode(t);let d=h.propertySizeName;d===void 0&&(d=c+"Size",this.getVarFromNode(t,d,"uint"),this.addLineFlowCode(`${d} = uint( textureSize( ${o}, 0 ).x )`,e),h.propertySizeName=d);const{itemSize:f}=i,p="."+hp.join("").slice(0,f),y=`ivec2(${a} % ${d}, ${a} / ${d})`,g=this.generateTextureLoad(null,o,y,null,"0");let m="vec4";i.pbo.type===Dr?m="uvec4":i.pbo.type===ui&&(m="ivec4"),this.addLineFlowCode(`${c} = ${m}(${g})${p}`,e),l.propertyName=c}return c}generateTextureLoad(e,t,r,i,s="0"){return i?`texelFetch( ${t}, ivec3( ${r}, ${i} ), ${s} )`:`texelFetch( ${t}, ${r}, ${s} )`}generateTexture(e,t,r,i){return e.isDepthTexture?`texture( ${t}, ${r} ).x`:(i&&(r=`vec3( ${r}, ${i} )`),`texture( ${t}, ${r} )`)}generateTextureLevel(e,t,r,i){return`textureLod( ${t}, ${r}, ${i} )`}generateTextureBias(e,t,r,i){return`texture( ${t}, ${r}, ${i} )`}generateTextureGrad(e,t,r,i){return`textureGrad( ${t}, ${r}, ${i[0]}, ${i[1]} )`}generateTextureCompare(e,t,r,i,s,o=this.shaderStage){if(o==="fragment")return`texture( ${t}, vec3( ${r}, ${i} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}getVars(e){const t=[],r=this.vars[e];if(r!==void 0)for(const i of r)t.push(`${this.getVar(i.type,i.name)};`);return t.join(`
	`)}getUniforms(e){const t=this.uniforms[e],r=[],i={};for(const o of t){let a=null,l=!1;if(o.type==="texture"){const u=o.node.value;let h="";u.isDataTexture===!0&&(u.type===Dr?h="u":u.type===ui&&(h="i")),u.compareFunction?a=`sampler2DShadow ${o.name};`:u.isDataArrayTexture===!0||u.isCompressedArrayTexture===!0?a=`${h}sampler2DArray ${o.name};`:a=`${h}sampler2D ${o.name};`}else if(o.type==="cubeTexture")a=`samplerCube ${o.name};`;else if(o.type==="texture3D")a=`sampler3D ${o.name};`;else if(o.type==="buffer"){const u=o.node,h=this.getType(u.bufferType),d=u.bufferCount,f=d>0?d:"";a=`${u.name} {
	${h} ${o.name}[${f}];
};
`}else a=`${this.getVectorType(o.type)} ${this.getPropertyName(o,e)};`,l=!0;const c=o.node.precision;if(c!==null&&(a=QAe[c]+" "+a),l){a="	"+a;const u=o.groupNode.name;(i[u]||(i[u]=[])).push(a)}else a="uniform "+a,r.push(a)}let s="";for(const o in i){const a=i[o];s+=this._getGLSLUniformStruct(e+"_"+o,a.join(`
`))+`
`}return s+=r.join(`
`),s}getTypeFromAttribute(e){let t=super.getTypeFromAttribute(e);if(/^[iu]/.test(t)&&e.gpuType!==ui){let r=e;e.isInterleavedBufferAttribute&&(r=e.data);const i=r.array;i instanceof Uint32Array||i instanceof Int32Array||(t=t.slice(1))}return t}getAttributes(e){let t="";if(e==="vertex"||e==="compute"){const r=this.getAttributesArray();let i=0;for(const s of r)t+=`layout( location = ${i++} ) in ${s.type} ${s.name};
`}return t}getStructMembers(e){const t=[],r=e.getMemberTypes();for(let i=0;i<r.length;i++){const s=r[i];t.push(`layout( location = ${i} ) out ${s} m${i};`)}return t.join(`
`)}getStructs(e){const t=[],r=this.structs[e];if(r.length===0)return`layout( location = 0 ) out vec4 fragColor;
`;for(let i=0,s=r.length;i<s;i++){const o=r[i];let a=`
`;a+=this.getStructMembers(o),a+=`
`,t.push(a)}return t.join(`

`)}getVaryings(e){let t="";const r=this.varyings;if(e==="vertex"||e==="compute")for(const i of r){e==="compute"&&(i.needsInterpolation=!0);const s=i.type,o=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${o}${i.needsInterpolation?"out":"/*out*/"} ${s} ${i.name};
`}else if(e==="fragment"){for(const i of r)if(i.needsInterpolation){const s=i.type,o=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${o}in ${s} ${i.name};
`}}return t}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((r,i)=>r*i,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,t,r=this.shaderStage){const i=this.extensions[r]||(this.extensions[r]=new Map);i.has(e)===!1&&i.set(e,{name:e,behavior:t})}getExtensions(e){const t=[];if(e==="vertex"){const i=this.renderer.backend.extensions;this.object.isBatchedMesh&&i.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const r=this.extensions[e];if(r!==void 0)for(const{name:i,behavior:s}of r.values())t.push(`#extension ${i} : ${s}`);return t.join(`
`)}isAvailable(e){let t=WU[e];if(t===void 0){if(e==="float32Filterable"){const r=this.renderer.backend.extensions;r.has("OES_texture_float_linear")?(r.get("OES_texture_float_linear"),t=!0):t=!1}WU[e]=t}return t}isFlipY(){return!0}registerTransform(e,t){this.transforms.push({varyingName:e,attributeNode:t})}getTransforms(){const e=this.transforms;let t="";for(let r=0;r<e.length;r++){const i=e[r],s=this.getPropertyName(i.attributeNode);t+=`${i.varyingName} = ${s};
	`}return t}_getGLSLUniformStruct(e,t){return`
layout( std140 ) uniform ${e} {
${t}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions 
${e.extensions}

// precision
${jU}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// precision
${jU}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){let r=`// code

`;r+=this.flowCode[t];const i=this.flowNodes[t],s=i[i.length-1];for(const a of i){const l=this.getFlowData(a),c=a.name;c&&(r.length>0&&(r+=`
`),r+=`	// flow -> ${c}
	`),r+=`${l.code}
	`,a===s&&t!=="compute"&&(r+=`// result
	`,t==="vertex"?(r+="gl_Position = ",r+=`${l.result};`):t==="fragment"&&(a.outputNode.isOutputStructNode||(r+="fragColor = ",r+=`${l.result};`)))}const o=e[t];o.extensions=this.getExtensions(t),o.uniforms=this.getUniforms(t),o.attributes=this.getAttributes(t),o.varyings=this.getVaryings(t),o.vars=this.getVars(t),o.structs=this.getStructs(t),o.codes=this.getCodes(t),o.transforms=this.getTransforms(t),o.flow=r}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,t,r,i=null){const s=super.getUniformFromNode(e,t,r,i),o=this.getDataFromNode(e,r,this.globalCache);let a=o.uniformGPU;if(a===void 0){const l=e.groupNode,c=l.name,u=this.getBindGroupArray(c,r);if(t==="texture")a=new f1(s.name,s.node,l),u.push(a);else if(t==="cubeTexture")a=new F8(s.name,s.node,l),u.push(a);else if(t==="texture3D")a=new O8(s.name,s.node,l),u.push(a);else if(t==="buffer"){e.name=`NodeBuffer_${e.id}`,s.name=`buffer${e.id}`;const h=new L8(e,l);h.name=e.name,u.push(h),a=h}else{const h=this.uniformGroups[r]||(this.uniformGroups[r]={});let d=h[c];d===void 0&&(d=new D8(r+"_"+c,l),h[c]=d,u.push(d)),a=this.getNodeUniform(s,t),d.addUniform(a)}o.uniformGPU=a}return s}}let uM=null,hM=null,td=null;class k8{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null}async init(e){this.renderer=e}begin(){}finish(){}draw(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}createRenderPipeline(){}createComputePipeline(){}destroyPipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}createDefaultTexture(){}createTexture(){}copyTextureToBuffer(){}createAttribute(){}createIndexAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}resolveTimestampAsync(){}hasFeatureAsync(){}hasFeature(){}getInstanceCount(e){const{object:t,geometry:r}=e;return r.isInstancedBufferGeometry?r.instanceCount:t.count>1?t.count:1}getDrawingBufferSize(){return uM=uM||new zt,this.renderer.getDrawingBufferSize(uM)}getScissor(){return hM=hM||new tn,this.renderer.getScissor(hM)}setScissorTest(){}getClearColor(){const e=this.renderer;return td=td||new z2,e.getClearColor(td),td.getRGB(td,this.renderer.currentColorSpace),td}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:VSe(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Kb} webgpu`),this.domElement=e),e}set(e,t){this.data.set(e,t)}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}}let eRe=0;class tRe{constructor(e,t){this.buffers=[e.bufferGPU,t],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class nRe{constructor(e){this.backend=e}createAttribute(e,t){const r=this.backend,{gl:i}=r,s=e.array,o=e.usage||i.STATIC_DRAW,a=e.isInterleavedBufferAttribute?e.data:e,l=r.get(a);let c=l.bufferGPU;c===void 0&&(c=this._createBuffer(i,t,s,o),l.bufferGPU=c,l.bufferType=t,l.version=a.version);let u;if(s instanceof Float32Array)u=i.FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?u=i.HALF_FLOAT:u=i.UNSIGNED_SHORT;else if(s instanceof Int16Array)u=i.SHORT;else if(s instanceof Uint32Array)u=i.UNSIGNED_INT;else if(s instanceof Int32Array)u=i.INT;else if(s instanceof Int8Array)u=i.BYTE;else if(s instanceof Uint8Array)u=i.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)u=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);let h={bufferGPU:c,bufferType:t,type:u,byteLength:s.byteLength,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:u===i.INT||u===i.UNSIGNED_INT||e.gpuType===ui,id:eRe++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const d=this._createBuffer(i,t,s,o);h=new tRe(h,d)}r.set(e,h)}updateAttribute(e){const t=this.backend,{gl:r}=t,i=e.array,s=e.isInterleavedBufferAttribute?e.data:e,o=t.get(s),a=o.bufferType,l=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(r.bindBuffer(a,o.bufferGPU),l.length===0)r.bufferSubData(a,0,i);else{for(let c=0,u=l.length;c<u;c++){const h=l[c];r.bufferSubData(a,h.start*i.BYTES_PER_ELEMENT,i,h.start,h.count)}s.clearUpdateRanges()}r.bindBuffer(a,null),o.version=s.version}destroyAttribute(e){const t=this.backend,{gl:r}=t;e.isInterleavedBufferAttribute&&t.delete(e.data);const i=t.get(e);r.deleteBuffer(i.bufferGPU),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,{gl:r}=t,i=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:s}=t.get(i),o=e.array,a=o.byteLength;r.bindBuffer(r.COPY_READ_BUFFER,s);const l=r.createBuffer();r.bindBuffer(r.COPY_WRITE_BUFFER,l),r.bufferData(r.COPY_WRITE_BUFFER,a,r.STREAM_READ),r.copyBufferSubData(r.COPY_READ_BUFFER,r.COPY_WRITE_BUFFER,0,0,a),await t.utils._clientWaitAsync();const c=new e.array.constructor(o.length);return r.bindBuffer(r.COPY_WRITE_BUFFER,l),r.getBufferSubData(r.COPY_WRITE_BUFFER,0,c),r.deleteBuffer(l),r.bindBuffer(r.COPY_READ_BUFFER,null),r.bindBuffer(r.COPY_WRITE_BUFFER,null),c.buffer}_createBuffer(e,t,r,i){const s=e.createBuffer();return e.bindBuffer(t,s),e.bufferData(t,r,i),e.bindBuffer(t,null),s}}let qU=!1,dM,hm;class rRe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},qU===!1&&(this._init(this.gl),qU=!0)}_init(e){dM={[Hl]:e.FUNC_ADD,[f6]:e.FUNC_SUBTRACT,[p6]:e.FUNC_REVERSE_SUBTRACT},hm={[m6]:e.ZERO,[g6]:e.ONE,[y6]:e.SRC_COLOR,[zx]:e.SRC_ALPHA,[w6]:e.SRC_ALPHA_SATURATE,[S6]:e.DST_COLOR,[_6]:e.DST_ALPHA,[v6]:e.ONE_MINUS_SRC_COLOR,[$x]:e.ONE_MINUS_SRC_ALPHA,[b6]:e.ONE_MINUS_DST_COLOR,[x6]:e.ONE_MINUS_DST_ALPHA}}enable(e){const{enabled:t}=this;t[e]!==!0&&(this.gl.enable(e),t[e]=!0)}disable(e){const{enabled:t}=this;t[e]!==!1&&(this.gl.disable(e),t[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:t}=this;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:t}=this;e!==$xe?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(e===Vxe?t.cullFace(t.BACK):e===Gxe?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:t,gl:r}=this;e!==t&&(r.lineWidth(e),this.currentLineWidth=e)}setBlending(e,t,r,i,s,o,a,l){const{gl:c}=this;if(e===Vf){this.currentBlendingEnabled===!0&&(this.disable(c.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(c.BLEND),this.currentBlendingEnabled=!0),e!==d6){if(e!==this.currentBlending||l!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==Hl||this.currentBlendEquationAlpha!==Hl)&&(c.blendEquation(c.FUNC_ADD),this.currentBlendEquation=Hl,this.currentBlendEquationAlpha=Hl),l)switch(e){case dc:c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case kx:c.blendFunc(c.ONE,c.ONE);break;case Ux:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case Bx:c.blendFuncSeparate(c.ZERO,c.SRC_COLOR,c.ZERO,c.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case dc:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case kx:c.blendFunc(c.SRC_ALPHA,c.ONE);break;case Ux:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case Bx:c.blendFunc(c.ZERO,c.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=l}return}s=s||t,o=o||r,a=a||i,(t!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(c.blendEquationSeparate(dM[t],dM[s]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=s),(r!==this.currentBlendSrc||i!==this.currentBlendDst||o!==this.currentBlendSrcAlpha||a!==this.currentBlendDstAlpha)&&(c.blendFuncSeparate(hm[r],hm[i],hm[o],hm[a]),this.currentBlendSrc=r,this.currentBlendDst=i,this.currentBlendSrcAlpha=o,this.currentBlendDstAlpha=a),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:t}=this;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:t}=this;switch(e){case T6:t.depthFunc(t.NEVER);break;case M6:t.depthFunc(t.ALWAYS);break;case E6:t.depthFunc(t.LESS);break;case Vx:t.depthFunc(t.LEQUAL);break;case C6:t.depthFunc(t.EQUAL);break;case A6:t.depthFunc(t.GEQUAL);break;case R6:t.depthFunc(t.GREATER);break;case N6:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}this.currentDepthFunc=e}}setStencilTest(e){const{gl:t}=this;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,t,r){(this.currentStencilFunc!==e||this.currentStencilRef!==t||this.currentStencilFuncMask!==r)&&(this.gl.stencilFunc(e,t,r),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=r)}setStencilOp(e,t,r){(this.currentStencilFail!==e||this.currentStencilZFail!==t||this.currentStencilZPass!==r)&&(this.gl.stencilOp(e,t,r),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=r)}setMaterial(e,t){const{gl:r}=this;e.side===Ox?this.disable(r.CULL_FACE):this.enable(r.CULL_FACE);let i=e.side===ul;t&&(i=!i),this.setFlipSided(i),e.blending===dc&&e.transparent===!1?this.setBlending(Vf):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const s=e.stencilWrite;this.setStencilTest(s),s&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(r.SAMPLE_ALPHA_TO_COVERAGE):this.disable(r.SAMPLE_ALPHA_TO_COVERAGE)}setPolygonOffset(e,t,r){const{gl:i}=this;e?(this.enable(i.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==t||this.currentPolygonOffsetUnits!==r)&&(i.polygonOffset(t,r),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=r)):this.disable(i.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}bindFramebuffer(e,t){const{gl:r,currentBoundFramebuffers:i}=this;return i[e]!==t?(r.bindFramebuffer(e,t),i[e]=t,e===r.DRAW_FRAMEBUFFER&&(i[r.FRAMEBUFFER]=t),e===r.FRAMEBUFFER&&(i[r.DRAW_FRAMEBUFFER]=t),!0):!1}drawBuffers(e,t){const{gl:r}=this;let i=[],s=!1;if(e.textures!==null){i=this.currentDrawbuffers.get(t),i===void 0&&(i=[],this.currentDrawbuffers.set(t,i));const o=e.textures;if(i.length!==o.length||i[0]!==r.COLOR_ATTACHMENT0){for(let a=0,l=o.length;a<l;a++)i[a]=r.COLOR_ATTACHMENT0+a;i.length=o.length,s=!0}}else i[0]!==r.BACK&&(i[0]=r.BACK,s=!0);s&&r.drawBuffers(i)}activeTexture(e){const{gl:t,currentTextureSlot:r,maxTextures:i}=this;e===void 0&&(e=t.TEXTURE0+i-1),r!==e&&(t.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,t,r){const{gl:i,currentTextureSlot:s,currentBoundTextures:o,maxTextures:a}=this;r===void 0&&(s===null?r=i.TEXTURE0+a-1:r=s);let l=o[r];l===void 0&&(l={type:void 0,texture:void 0},o[r]=l),(l.type!==e||l.texture!==t)&&(s!==r&&(i.activeTexture(r),this.currentTextureSlot=r),i.bindTexture(e,t),l.type=e,l.texture=t)}bindBufferBase(e,t,r){const{gl:i}=this,s=`${e}-${t}`;return this.currentBoundBufferBases[s]!==r?(i.bindBufferBase(e,t,r),this.currentBoundBufferBases[s]=r,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:t,currentBoundTextures:r}=this,i=r[t];i!==void 0&&i.type!==void 0&&(e.bindTexture(i.type,null),i.type=void 0,i.texture=void 0)}}class iRe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,t=qu){const{gl:r,extensions:i}=this;let s;if(e===$a)return r.UNSIGNED_BYTE;if(e===tSe)return r.UNSIGNED_SHORT_4_4_4_4;if(e===nSe)return r.UNSIGNED_SHORT_5_5_5_1;if(e===I6)return r.UNSIGNED_INT_5_9_9_9_REV;if(e===Jm)return r.BYTE;if(e===eg)return r.SHORT;if(e===Md)return r.UNSIGNED_SHORT;if(e===ui)return r.INT;if(e===Dr)return r.UNSIGNED_INT;if(e===os)return r.FLOAT;if(e===Xa)return r.HALF_FLOAT;if(e===rSe)return r.ALPHA;if(e===t2)return r.RGB;if(e===lp)return r.RGBA;if(e===iSe)return r.LUMINANCE;if(e===sSe)return r.LUMINANCE_ALPHA;if(e===Pu)return r.DEPTH_COMPONENT;if(e===Hf)return r.DEPTH_STENCIL;if(e===n2)return r.RED;if(e===r2)return r.RED_INTEGER;if(e===zg)return r.RG;if(e===i2)return r.RG_INTEGER;if(e===s2)return r.RGBA_INTEGER;if(e===hT||e===y_||e===v_||e===__)if(t===ht)if(s=i.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===hT)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===y_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===v_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===__)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=i.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===hT)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===y_)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===v_)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===__)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===hk||e===dk||e===fk||e===pk)if(s=i.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===hk)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===dk)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===fk)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===pk)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===mk||e===wA||e===TA)if(s=i.get("WEBGL_compressed_texture_etc"),s!==null){if(e===mk||e===wA)return t===ht?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===TA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===MA||e===EA||e===CA||e===AA||e===RA||e===NA||e===PA||e===IA||e===LA||e===DA||e===FA||e===OA||e===kA||e===UA)if(s=i.get("WEBGL_compressed_texture_astc"),s!==null){if(e===MA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===EA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===CA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===AA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===RA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===NA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===PA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===IA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===LA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===DA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===FA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===OA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===kA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===UA)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===dT)if(s=i.get("EXT_texture_compression_bptc"),s!==null){if(e===dT)return t===ht?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===aSe||e===gk||e===yk||e===vk)if(s=i.get("EXT_texture_compression_rgtc"),s!==null){if(e===dT)return s.COMPRESSED_RED_RGTC1_EXT;if(e===gk)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===yk)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===vk)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===Cy?r.UNSIGNED_INT_24_8:r[e]!==void 0?r[e]:null}_clientWaitAsync(){const{gl:e}=this,t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((r,i)=>{function s(){const o=e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0);if(o===e.WAIT_FAILED){e.deleteSync(t),i();return}if(o===e.TIMEOUT_EXPIRED){requestAnimationFrame(s);return}e.deleteSync(t),r()}s()})}}let XU=!1,Ev,fM,KU;class sRe{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},XU===!1&&(this._init(this.gl),XU=!0)}_init(e){Ev={[Gx]:e.REPEAT,[Td]:e.CLAMP_TO_EDGE,[Hx]:e.MIRRORED_REPEAT},fM={[kr]:e.NEAREST,[SA]:e.NEAREST_MIPMAP_NEAREST,[Kd]:e.NEAREST_MIPMAP_LINEAR,[Ui]:e.LINEAR,[bA]:e.LINEAR_MIPMAP_NEAREST,[qa]:e.LINEAR_MIPMAP_LINEAR},KU={[D6]:e.NEVER,[z6]:e.ALWAYS,[o2]:e.LESS,[O6]:e.LEQUAL,[F6]:e.EQUAL,[B6]:e.GEQUAL,[k6]:e.GREATER,[U6]:e.NOTEQUAL}}filterFallback(e){const{gl:t}=this;return e===kr||e===SA||e===Kd?t.NEAREST:t.LINEAR}getGLTextureType(e){const{gl:t}=this;let r;return e.isCubeTexture===!0?r=t.TEXTURE_CUBE_MAP:e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?r=t.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?r=t.TEXTURE_3D:r=t.TEXTURE_2D,r}getInternalFormat(e,t,r,i,s=!1){const{gl:o,extensions:a}=this;if(e!==null){if(o[e]!==void 0)return o[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let l=t;return t===o.RED&&(r===o.FLOAT&&(l=o.R32F),r===o.HALF_FLOAT&&(l=o.R16F),r===o.UNSIGNED_BYTE&&(l=o.R8),r===o.UNSIGNED_SHORT&&(l=o.R16),r===o.UNSIGNED_INT&&(l=o.R32UI),r===o.BYTE&&(l=o.R8I),r===o.SHORT&&(l=o.R16I),r===o.INT&&(l=o.R32I)),t===o.RED_INTEGER&&(r===o.UNSIGNED_BYTE&&(l=o.R8UI),r===o.UNSIGNED_SHORT&&(l=o.R16UI),r===o.UNSIGNED_INT&&(l=o.R32UI),r===o.BYTE&&(l=o.R8I),r===o.SHORT&&(l=o.R16I),r===o.INT&&(l=o.R32I)),t===o.RG&&(r===o.FLOAT&&(l=o.RG32F),r===o.HALF_FLOAT&&(l=o.RG16F),r===o.UNSIGNED_BYTE&&(l=o.RG8),r===o.UNSIGNED_SHORT&&(l=o.RG16),r===o.UNSIGNED_INT&&(l=o.RG32UI),r===o.BYTE&&(l=o.RG8I),r===o.SHORT&&(l=o.RG16I),r===o.INT&&(l=o.RG32I)),t===o.RG_INTEGER&&(r===o.UNSIGNED_BYTE&&(l=o.RG8UI),r===o.UNSIGNED_SHORT&&(l=o.RG16UI),r===o.UNSIGNED_INT&&(l=o.RG32UI),r===o.BYTE&&(l=o.RG8I),r===o.SHORT&&(l=o.RG16I),r===o.INT&&(l=o.RG32I)),t===o.RGB&&(r===o.FLOAT&&(l=o.RGB32F),r===o.HALF_FLOAT&&(l=o.RGB16F),r===o.UNSIGNED_BYTE&&(l=o.RGB8),r===o.UNSIGNED_SHORT&&(l=o.RGB16),r===o.UNSIGNED_INT&&(l=o.RGB32UI),r===o.BYTE&&(l=o.RGB8I),r===o.SHORT&&(l=o.RGB16I),r===o.INT&&(l=o.RGB32I),r===o.UNSIGNED_BYTE&&(l=i===ht&&s===!1?o.SRGB8:o.RGB8),r===o.UNSIGNED_SHORT_5_6_5&&(l=o.RGB565),r===o.UNSIGNED_SHORT_5_5_5_1&&(l=o.RGB5_A1),r===o.UNSIGNED_SHORT_4_4_4_4&&(l=o.RGB4),r===o.UNSIGNED_INT_5_9_9_9_REV&&(l=o.RGB9_E5)),t===o.RGB_INTEGER&&(r===o.UNSIGNED_BYTE&&(l=o.RGB8UI),r===o.UNSIGNED_SHORT&&(l=o.RGB16UI),r===o.UNSIGNED_INT&&(l=o.RGB32UI),r===o.BYTE&&(l=o.RGB8I),r===o.SHORT&&(l=o.RGB16I),r===o.INT&&(l=o.RGB32I)),t===o.RGBA&&(r===o.FLOAT&&(l=o.RGBA32F),r===o.HALF_FLOAT&&(l=o.RGBA16F),r===o.UNSIGNED_BYTE&&(l=o.RGBA8),r===o.UNSIGNED_SHORT&&(l=o.RGBA16),r===o.UNSIGNED_INT&&(l=o.RGBA32UI),r===o.BYTE&&(l=o.RGBA8I),r===o.SHORT&&(l=o.RGBA16I),r===o.INT&&(l=o.RGBA32I),r===o.UNSIGNED_BYTE&&(l=i===ht&&s===!1?o.SRGB8_ALPHA8:o.RGBA8),r===o.UNSIGNED_SHORT_4_4_4_4&&(l=o.RGBA4),r===o.UNSIGNED_SHORT_5_5_5_1&&(l=o.RGB5_A1)),t===o.RGBA_INTEGER&&(r===o.UNSIGNED_BYTE&&(l=o.RGBA8UI),r===o.UNSIGNED_SHORT&&(l=o.RGBA16UI),r===o.UNSIGNED_INT&&(l=o.RGBA32UI),r===o.BYTE&&(l=o.RGBA8I),r===o.SHORT&&(l=o.RGBA16I),r===o.INT&&(l=o.RGBA32I)),t===o.DEPTH_COMPONENT&&(r===o.UNSIGNED_INT&&(l=o.DEPTH24_STENCIL8),r===o.FLOAT&&(l=o.DEPTH_COMPONENT32F)),t===o.DEPTH_STENCIL&&r===o.UNSIGNED_INT_24_8&&(l=o.DEPTH24_STENCIL8),(l===o.R16F||l===o.R32F||l===o.RG16F||l===o.RG32F||l===o.RGBA16F||l===o.RGBA32F)&&a.get("EXT_color_buffer_float"),l}setTextureParameters(e,t){const{gl:r,extensions:i,backend:s}=this;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,t.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,t.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texParameteri(e,r.TEXTURE_WRAP_S,Ev[t.wrapS]),r.texParameteri(e,r.TEXTURE_WRAP_T,Ev[t.wrapT]),(e===r.TEXTURE_3D||e===r.TEXTURE_2D_ARRAY)&&r.texParameteri(e,r.TEXTURE_WRAP_R,Ev[t.wrapR]),r.texParameteri(e,r.TEXTURE_MAG_FILTER,fM[t.magFilter]);const o=t.mipmaps!==void 0&&t.mipmaps.length>0,a=t.minFilter===Ui&&o?qa:t.minFilter;if(r.texParameteri(e,r.TEXTURE_MIN_FILTER,fM[a]),t.compareFunction&&(r.texParameteri(e,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(e,r.TEXTURE_COMPARE_FUNC,KU[t.compareFunction])),i.has("EXT_texture_filter_anisotropic")===!0){if(t.magFilter===kr||t.minFilter!==Kd&&t.minFilter!==qa||t.type===os&&i.has("OES_texture_float_linear")===!1)return;if(t.anisotropy>1){const l=i.get("EXT_texture_filter_anisotropic");r.texParameterf(e,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,s.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:t,backend:r,defaultTextures:i}=this,s=this.getGLTextureType(e);let o=i[s];o===void 0&&(o=t.createTexture(),r.state.bindTexture(s,o),t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST),i[s]=o),r.set(e,{textureGPU:o,glTextureType:s,isDefault:!0})}createTexture(e,t){const{gl:r,backend:i}=this,{levels:s,width:o,height:a,depth:l}=t,c=i.utils.convert(e.format,e.colorSpace),u=i.utils.convert(e.type),h=this.getInternalFormat(e.internalFormat,c,u,e.colorSpace,e.isVideoTexture),d=r.createTexture(),f=this.getGLTextureType(e);i.state.bindTexture(f,d),this.setTextureParameters(f,e),e.isDataArrayTexture||e.isCompressedArrayTexture?r.texStorage3D(r.TEXTURE_2D_ARRAY,s,h,o,a,l):e.isData3DTexture?r.texStorage3D(r.TEXTURE_3D,s,h,o,a,l):e.isVideoTexture||r.texStorage2D(f,s,h,o,a),i.set(e,{textureGPU:d,glTextureType:f,glFormat:c,glType:u,glInternalFormat:h})}copyBufferToTexture(e,t){const{gl:r,backend:i}=this,{textureGPU:s,glTextureType:o,glFormat:a,glType:l}=i.get(t),{width:c,height:u}=t.source.data;r.bindBuffer(r.PIXEL_UNPACK_BUFFER,e),i.state.bindTexture(o,s),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.texSubImage2D(o,0,0,0,c,u,a,l,0),r.bindBuffer(r.PIXEL_UNPACK_BUFFER,null),i.state.unbindTexture()}updateTexture(e,t){const{gl:r}=this,{width:i,height:s}=t,{textureGPU:o,glTextureType:a,glFormat:l,glType:c,glInternalFormat:u}=this.backend.get(e);if(e.isRenderTargetTexture||o===void 0)return;const h=d=>d.isDataTexture?d.image.data:d instanceof ImageBitmap||d instanceof OffscreenCanvas||d instanceof HTMLImageElement||d instanceof HTMLCanvasElement?d:d.data;if(this.backend.state.bindTexture(a,o),this.setTextureParameters(a,e),e.isCompressedTexture){const d=e.mipmaps,f=t.image;for(let p=0;p<d.length;p++){const y=d[p];e.isCompressedArrayTexture?e.format!==r.RGBA?l!==null?r.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,p,0,0,0,y.width,y.height,f.depth,l,y.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texSubImage3D(r.TEXTURE_2D_ARRAY,p,0,0,0,y.width,y.height,f.depth,l,c,y.data):l!==null?r.compressedTexSubImage2D(r.TEXTURE_2D,p,0,0,y.width,y.height,l,y.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const d=t.images;for(let f=0;f<6;f++){const p=h(d[f]);r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,0,0,i,s,l,c,p)}}else if(e.isDataArrayTexture){const d=t.image;r.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,d.width,d.height,d.depth,l,c,d.data)}else if(e.isData3DTexture){const d=t.image;r.texSubImage3D(r.TEXTURE_3D,0,0,0,0,d.width,d.height,d.depth,l,c,d.data)}else if(e.isVideoTexture)e.update(),r.texImage2D(a,0,u,l,c,t.image);else{const d=h(t.image);r.texSubImage2D(a,0,0,0,i,s,l,c,d)}}generateMipmaps(e){const{gl:t,backend:r}=this,{textureGPU:i,glTextureType:s}=r.get(e);r.state.bindTexture(s,i),t.generateMipmap(s)}deallocateRenderBuffers(e){const{gl:t,backend:r}=this;if(e){const i=r.get(e);if(i.renderBufferStorageSetup=void 0,i.framebuffers){for(const s in i.framebuffers)t.deleteFramebuffer(i.framebuffers[s]);delete i.framebuffers}if(i.depthRenderbuffer&&(t.deleteRenderbuffer(i.depthRenderbuffer),delete i.depthRenderbuffer),i.stencilRenderbuffer&&(t.deleteRenderbuffer(i.stencilRenderbuffer),delete i.stencilRenderbuffer),i.msaaFrameBuffer&&(t.deleteFramebuffer(i.msaaFrameBuffer),delete i.msaaFrameBuffer),i.msaaRenderbuffers){for(let s=0;s<i.msaaRenderbuffers.length;s++)t.deleteRenderbuffer(i.msaaRenderbuffers[s]);delete i.msaaRenderbuffers}}}destroyTexture(e){const{gl:t,backend:r}=this,{textureGPU:i,renderTarget:s}=r.get(e);this.deallocateRenderBuffers(s),t.deleteTexture(i),r.delete(e)}copyTextureToTexture(e,t,r=null,i=null,s=0){const{gl:o,backend:a}=this,{state:l}=this.backend,{textureGPU:c,glTextureType:u,glType:h,glFormat:d}=a.get(t);let f,p,y,g,m,_;r!==null?(f=r.max.x-r.min.x,p=r.max.y-r.min.y,y=r.min.x,g=r.min.y):(f=e.image.width,p=e.image.height,y=0,g=0),i!==null?(m=i.x,_=i.y):(m=0,_=0),l.bindTexture(u,c),o.pixelStorei(o.UNPACK_ALIGNMENT,t.unpackAlignment),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,t.unpackAlignment);const v=o.getParameter(o.UNPACK_ROW_LENGTH),x=o.getParameter(o.UNPACK_IMAGE_HEIGHT),b=o.getParameter(o.UNPACK_SKIP_PIXELS),T=o.getParameter(o.UNPACK_SKIP_ROWS),w=o.getParameter(o.UNPACK_SKIP_IMAGES),M=e.isCompressedTexture?e.mipmaps[s]:e.image;o.pixelStorei(o.UNPACK_ROW_LENGTH,M.width),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,M.height),o.pixelStorei(o.UNPACK_SKIP_PIXELS,y),o.pixelStorei(o.UNPACK_SKIP_ROWS,g),e.isDataTexture?o.texSubImage2D(o.TEXTURE_2D,s,m,_,f,p,d,h,M.data):e.isCompressedTexture?o.compressedTexSubImage2D(o.TEXTURE_2D,s,m,_,M.width,M.height,d,M.data):o.texSubImage2D(o.TEXTURE_2D,s,m,_,f,p,d,h,M),o.pixelStorei(o.UNPACK_ROW_LENGTH,v),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,x),o.pixelStorei(o.UNPACK_SKIP_PIXELS,b),o.pixelStorei(o.UNPACK_SKIP_ROWS,T),o.pixelStorei(o.UNPACK_SKIP_IMAGES,w),s===0&&t.generateMipmaps&&o.generateMipmap(o.TEXTURE_2D),l.unbindTexture()}copyFramebufferToTexture(e,t,r){const{gl:i}=this,{state:s}=this.backend,{textureGPU:o}=this.backend.get(e),{x:a,y:l,z:c,w:u}=r,h=e.isDepthTexture===!0||t.renderTarget&&t.renderTarget.samples>0,d=t.renderTarget?t.renderTarget.height:this.backend.gerDrawingBufferSize().y;if(h){const f=a!==0||l!==0;let p,y;if(e.isDepthTexture===!0?(p=i.DEPTH_BUFFER_BIT,y=i.DEPTH_ATTACHMENT,t.stencil&&(p|=i.STENCIL_BUFFER_BIT)):(p=i.COLOR_BUFFER_BIT,y=i.COLOR_ATTACHMENT0),f){const g=this.backend.get(t.renderTarget),m=g.framebuffers[t.getCacheKey()],_=g.msaaFrameBuffer;s.bindFramebuffer(i.DRAW_FRAMEBUFFER,m),s.bindFramebuffer(i.READ_FRAMEBUFFER,_);const v=d-l-u;i.blitFramebuffer(a,v,a+c,v+u,a,v,a+c,v+u,p,i.NEAREST),s.bindFramebuffer(i.READ_FRAMEBUFFER,m),s.bindTexture(i.TEXTURE_2D,o),i.copyTexSubImage2D(i.TEXTURE_2D,0,0,0,a,v,c,u),s.unbindTexture()}else{const g=i.createFramebuffer();s.bindFramebuffer(i.DRAW_FRAMEBUFFER,g),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,y,i.TEXTURE_2D,o,0),i.blitFramebuffer(0,0,c,u,0,0,c,u,p,i.NEAREST),i.deleteFramebuffer(g)}}else s.bindTexture(i.TEXTURE_2D,o),i.copyTexSubImage2D(i.TEXTURE_2D,0,0,0,a,d-u-l,c,u),s.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(t)}setupRenderBufferStorage(e,t){const{gl:r}=this,i=t.renderTarget,{samples:s,depthTexture:o,depthBuffer:a,stencilBuffer:l,width:c,height:u}=i;if(r.bindRenderbuffer(r.RENDERBUFFER,e),a&&!l){let h=r.DEPTH_COMPONENT24;s>0?(o&&o.isDepthTexture&&o.type===r.FLOAT&&(h=r.DEPTH_COMPONENT32F),r.renderbufferStorageMultisample(r.RENDERBUFFER,s,h,c,u)):r.renderbufferStorage(r.RENDERBUFFER,h,c,u),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,e)}else a&&l&&(s>0?r.renderbufferStorageMultisample(r.RENDERBUFFER,s,r.DEPTH24_STENCIL8,c,u):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,c,u),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,e))}async copyTextureToBuffer(e,t,r,i,s,o){const{backend:a,gl:l}=this,{textureGPU:c,glFormat:u,glType:h}=this.backend.get(e),d=l.createFramebuffer();l.bindFramebuffer(l.READ_FRAMEBUFFER,d);const f=e.isCubeTexture?l.TEXTURE_CUBE_MAP_POSITIVE_X+o:l.TEXTURE_2D;l.framebufferTexture2D(l.READ_FRAMEBUFFER,l.COLOR_ATTACHMENT0,f,c,0);const p=this._getTypedArrayType(h),y=this._getBytesPerTexel(h,u),m=i*s*y,_=l.createBuffer();l.bindBuffer(l.PIXEL_PACK_BUFFER,_),l.bufferData(l.PIXEL_PACK_BUFFER,m,l.STREAM_READ),l.readPixels(t,r,i,s,u,h,0),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),await a.utils._clientWaitAsync();const v=new p(m/p.BYTES_PER_ELEMENT);return l.bindBuffer(l.PIXEL_PACK_BUFFER,_),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,v),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),l.deleteFramebuffer(d),v}_getTypedArrayType(e){const{gl:t}=this;if(e===t.UNSIGNED_BYTE)return Uint8Array;if(e===t.UNSIGNED_SHORT_4_4_4_4||e===t.UNSIGNED_SHORT_5_5_5_1||e===t.UNSIGNED_SHORT_5_6_5||e===t.UNSIGNED_SHORT)return Uint16Array;if(e===t.UNSIGNED_INT)return Uint32Array;if(e===t.HALF_FLOAT)return Uint16Array;if(e===t.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,t){const{gl:r}=this;let i=0;if(e===r.UNSIGNED_BYTE&&(i=1),(e===r.UNSIGNED_SHORT_4_4_4_4||e===r.UNSIGNED_SHORT_5_5_5_1||e===r.UNSIGNED_SHORT_5_6_5||e===r.UNSIGNED_SHORT||e===r.HALF_FLOAT)&&(i=2),(e===r.UNSIGNED_INT||e===r.FLOAT)&&(i=4),t===r.RGBA)return i*4;if(t===r.RGB)return i*3;if(t===r.ALPHA)return i}}class oRe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let t=this.extensions[e];return t===void 0&&(t=this.gl.getExtension(e),this.extensions[e]=t),t}has(e){return this.availableExtensions.includes(e)}}class aRe{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,t=this.backend.extensions;if(t.has("EXT_texture_filter_anisotropic")===!0){const r=t.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const YU={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query"};class lRe{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,t){const{gl:r,mode:i,object:s,type:o,info:a,index:l}=this;l!==0?r.drawElements(i,t,o,e):r.drawArrays(i,e,t),a.update(s,t,i,1)}renderInstances(e,t,r){const{gl:i,mode:s,type:o,index:a,object:l,info:c}=this;r!==0&&(a!==0?i.drawElementsInstanced(s,t,o,e,r):i.drawArraysInstanced(s,e,t,r),c.update(l,t,s,r))}renderMultiDraw(e,t,r){const{extensions:i,mode:s,object:o,info:a}=this;if(r===0)return;const l=i.get("WEBGL_multi_draw");if(l===null)for(let c=0;c<r;c++)this.render(e[c],t[c]);else{this.index!==0?l.multiDrawElementsWEBGL(s,t,0,this.type,e,0,r):l.multiDrawArraysWEBGL(s,e,0,t,0,r);let c=0;for(let u=0;u<r;u++)c+=t[u];a.update(o,c,s,1)}}renderMultiDrawInstances(e,t,r,i){const{extensions:s,mode:o,object:a,info:l}=this;if(r===0)return;const c=s.get("WEBGL_multi_draw");if(c===null)for(let u=0;u<r;u++)this.renderInstances(e[u],t[u],i[u]);else{this.index!==0?c.multiDrawElementsInstancedWEBGL(o,t,0,this.type,e,0,i,0,r):c.multiDrawArraysInstancedWEBGL(o,e,0,t,0,i,0,r);let u=0;for(let h=0;h<r;h++)u+=t[h];for(let h=0;h<i.length;h++)l.update(a,u,o,i[h])}}}class ZU extends k8{constructor(e={}){super(e),this.isWebGLBackend=!0}init(e){super.init(e);const t=this.parameters,r=t.context!==void 0?t.context:e.domElement.getContext("webgl2");this.gl=r,this.extensions=new oRe(this),this.capabilities=new aRe(this),this.attributeUtils=new nRe(this),this.textureUtils=new sRe(this),this.bufferRenderer=new lRe(this),this.state=new rRe(this),this.utils=new iRe(this),this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.trackTimestamp=t.trackTimestamp===!0,this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile"),this._currentContext=null}get coordinateSystem(){return po}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}initTimestampQuery(e){if(!this.disjoint||!this.trackTimestamp)return;const t=this.get(e);if(this.queryRunning){t.queryQueue||(t.queryQueue=[]),t.queryQueue.push(e);return}t.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),t.activeQuery=null),t.activeQuery=this.gl.createQuery(),t.activeQuery!==null&&(this.gl.beginQuery(this.disjoint.TIME_ELAPSED_EXT,t.activeQuery),this.queryRunning=!0)}prepareTimestampBuffer(e){if(!this.disjoint||!this.trackTimestamp)return;const t=this.get(e);if(t.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),t.gpuQueries||(t.gpuQueries=[]),t.gpuQueries.push({query:t.activeQuery}),t.activeQuery=null,this.queryRunning=!1,t.queryQueue&&t.queryQueue.length>0)){const r=t.queryQueue.shift();this.initTimestampQuery(r)}}async resolveTimestampAsync(e,t="render"){if(!this.disjoint||!this.trackTimestamp)return;const r=this.get(e);r.gpuQueries||(r.gpuQueries=[]);for(let i=0;i<r.gpuQueries.length;i++){const s=r.gpuQueries[i],o=this.gl.getQueryParameter(s.query,this.gl.QUERY_RESULT_AVAILABLE),a=this.gl.getParameter(this.disjoint.GPU_DISJOINT_EXT);if(o&&!a){const l=this.gl.getQueryParameter(s.query,this.gl.QUERY_RESULT),c=Number(l)/1e6;this.gl.deleteQuery(s.query),r.gpuQueries.splice(i,1),i--,this.renderer.info.updateTimestamp(t,c)}}}getContext(){return this.gl}beginRender(e){const{gl:t}=this,r=this.get(e);if(this.initTimestampQuery(e),r.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1),e.viewport?this.updateViewport(e):t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.scissor){const{x:s,y:o,width:a,height:l}=e.scissorValue;t.scissor(s,e.height-l-o,a,l)}const i=e.occlusionQueryCount;i>0&&(r.currentOcclusionQueries=r.occlusionQueries,r.currentOcclusionQueryObjects=r.occlusionQueryObjects,r.lastOcclusionObject=null,r.occlusionQueries=new Array(i),r.occlusionQueryObjects=new Array(i),r.occlusionQueryIndex=0)}finishRender(e){const{gl:t,state:r}=this,i=this.get(e),s=i.previousContext,o=e.occlusionQueryCount;o>0&&(o>i.occlusionQueryIndex&&t.endQuery(t.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const a=e.textures;if(a!==null)for(let l=0;l<a.length;l++){const c=a[l];c.generateMipmaps&&this.generateMipmaps(c)}if(this._currentContext=s,e.textures!==null&&e.renderTarget){const l=this.get(e.renderTarget),{samples:c}=e.renderTarget;if(c>0){const u=l.framebuffers[e.getCacheKey()],h=t.COLOR_BUFFER_BIT,d=l.msaaFrameBuffer,f=e.textures;r.bindFramebuffer(t.READ_FRAMEBUFFER,d),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,u);for(let p=0;p<f.length;p++)if(e.scissor){const{x:y,y:g,width:m,height:_}=e.scissorValue,v=e.height-_-g;t.blitFramebuffer(y,v,y+m,v+_,y,v,y+m,v+_,h,t.NEAREST),t.invalidateSubFramebuffer(t.READ_FRAMEBUFFER,l.invalidationArray,y,v,m,_)}else t.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,h,t.NEAREST),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,l.invalidationArray)}}s!==null&&(this._setFramebuffer(s),s.viewport?this.updateViewport(s):t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)),this.prepareTimestampBuffer(e)}resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueries:r,currentOcclusionQueryObjects:i}=t;if(r&&i){const s=new WeakSet,{gl:o}=this;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueries=null;const a=()=>{let l=0;for(let c=0;c<r.length;c++){const u=r[c];u!==null&&o.getQueryParameter(u,o.QUERY_RESULT_AVAILABLE)&&(o.getQueryParameter(u,o.QUERY_RESULT)>0&&s.add(i[c]),r[c]=null,o.deleteQuery(u),l++)}l<r.length?requestAnimationFrame(a):t.occluded=s};a()}}isOccluded(e,t){const r=this.get(e);return r.occluded&&r.occluded.has(t)}updateViewport(e){const t=this.gl,{x:r,y:i,width:s,height:o}=e.viewportValue;t.viewport(r,e.height-o-i,s,o)}setScissorTest(e){const t=this.gl;e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST)}clear(e,t,r,i=null,s=!0){const{gl:o}=this;i===null&&(i={textures:null,clearColorValue:this.getClearColor()});let a=0;if(e&&(a|=o.COLOR_BUFFER_BIT),t&&(a|=o.DEPTH_BUFFER_BIT),r&&(a|=o.STENCIL_BUFFER_BIT),a!==0){const l=i.clearColorValue||this.getClearColor();if(l.r*=l.a,l.g*=l.a,l.b*=l.a,t&&this.state.setDepthMask(!0),i.textures===null)o.clearColor(l.r,l.g,l.b,l.a),o.clear(a);else{if(s&&this._setFramebuffer(i),e)for(let c=0;c<i.textures.length;c++)o.clearBufferfv(o.COLOR,c,[l.r,l.g,l.b,l.a]);t&&r?o.clearBufferfi(o.DEPTH_STENCIL,0,1,0):t?o.clearBufferfv(o.DEPTH,0,[1]):r&&o.clearBufferiv(o.STENCIL,0,[0])}}}beginCompute(e){const{state:t,gl:r}=this;t.bindFramebuffer(r.FRAMEBUFFER,null),this.initTimestampQuery(e)}compute(e,t,r,i){const{state:s,gl:o}=this;this.discard||(o.enable(o.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:a,transformBuffers:l,attributes:c}=this.get(i),u=this._getVaoKey(null,c),h=this.vaoCache[u];h===void 0?this._createVao(null,c):o.bindVertexArray(h),s.useProgram(a),this._bindUniforms(r);const d=this._getTransformFeedback(l);o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,d),o.beginTransformFeedback(o.POINTS),c[0].isStorageInstancedBufferAttribute?o.drawArraysInstanced(o.POINTS,0,1,t.count):o.drawArrays(o.POINTS,0,t.count),o.endTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null);for(let f=0;f<l.length;f++){const p=l[f];p.pbo&&this.textureUtils.copyBufferToTexture(p.transformBuffer,p.pbo),p.switchBuffers()}}finishCompute(e){const t=this.gl;this.discard=!1,t.disable(t.RASTERIZER_DISCARD),this.prepareTimestampBuffer(e)}draw(e){const{object:t,pipeline:r,material:i,context:s}=e,{programGPU:o}=this.get(r),{gl:a,state:l}=this,c=this.get(s),u=e.getDrawParameters();if(u===null)return;this._bindUniforms(e.getBindings());const h=t.isMesh&&t.matrixWorld.determinant()<0;l.setMaterial(i,h),l.useProgram(o);let d=e.staticVao;if(d===void 0){const v=this._getVaoKey(e.getIndex(),e.getAttributes());if(d=this.vaoCache[v],d===void 0){let x;({vaoGPU:d,staticVao:x}=this._createVao(e.getIndex(),e.getAttributes())),x&&(e.staticVao=d)}}a.bindVertexArray(d);const f=e.getIndex(),p=c.lastOcclusionObject;if(p!==t&&p!==void 0){if(p!==null&&p.occlusionTest===!0&&(a.endQuery(a.ANY_SAMPLES_PASSED),c.occlusionQueryIndex++),t.occlusionTest===!0){const v=a.createQuery();a.beginQuery(a.ANY_SAMPLES_PASSED,v),c.occlusionQueries[c.occlusionQueryIndex]=v,c.occlusionQueryObjects[c.occlusionQueryIndex]=t}c.lastOcclusionObject=t}const y=this.bufferRenderer;t.isPoints?y.mode=a.POINTS:t.isLineSegments?y.mode=a.LINES:t.isLine?y.mode=a.LINE_STRIP:t.isLineLoop?y.mode=a.LINE_LOOP:i.wireframe===!0?(l.setLineWidth(i.wireframeLinewidth*this.renderer.getPixelRatio()),y.mode=a.LINES):y.mode=a.TRIANGLES;const{vertexCount:g,instanceCount:m}=u;let{firstVertex:_}=u;if(y.object=t,f!==null){_*=f.array.BYTES_PER_ELEMENT;const v=this.get(f);y.index=f.count,y.type=v.type}else y.index=0;t.isBatchedMesh?t._multiDrawInstances!==null?y.renderMultiDrawInstances(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount,t._multiDrawInstances):this.hasFeature("WEBGL_multi_draw")?y.renderMultiDraw(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount):GSe("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):m>1?y.renderInstances(_,g,m):y.render(_,g),a.bindVertexArray(null)}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,t,r,i,s,o){return this.textureUtils.copyTextureToBuffer(e,t,r,i,s,o)}createSampler(){}destroySampler(){}createNodeBuilder(e,t){return new JAe(e,t)}createProgram(e){const t=this.gl,{stage:r,code:i}=e,s=r==="fragment"?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);t.shaderSource(s,i),t.compileShader(s),this.set(e,{shaderGPU:s})}destroyProgram(){console.warn("Abstract class.")}createRenderPipeline(e,t){const r=this.gl,i=e.pipeline,{fragmentProgram:s,vertexProgram:o}=i,a=r.createProgram(),l=this.get(s).shaderGPU,c=this.get(o).shaderGPU;if(r.attachShader(a,l),r.attachShader(a,c),r.linkProgram(a),this.set(i,{programGPU:a,fragmentShader:l,vertexShader:c}),t!==null&&this.parallel){const u=new Promise(h=>{const d=this.parallel,f=()=>{r.getProgramParameter(a,d.COMPLETION_STATUS_KHR)?(this._completeCompile(e,i),h()):requestAnimationFrame(f)};f()});t.push(u);return}this._completeCompile(e,i)}_handleSource(e,t){const r=e.split(`
`),i=[],s=Math.max(t-6,0),o=Math.min(t+6,r.length);for(let a=s;a<o;a++){const l=a+1;i.push(`${l===t?">":" "} ${l}: ${r[a]}`)}return i.join(`
`)}_getShaderErrors(e,t,r){const i=e.getShaderParameter(t,e.COMPILE_STATUS),s=e.getShaderInfoLog(t).trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return r.toUpperCase()+`

`+s+`

`+this._handleSource(e.getShaderSource(t),a)}else return s}_logProgramError(e,t,r){if(this.renderer.debug.checkShaderErrors){const i=this.gl,s=i.getProgramInfoLog(e).trim();if(i.getProgramParameter(e,i.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(i,e,r,t);else{const o=this._getShaderErrors(i,r,"vertex"),a=this._getShaderErrors(i,t,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(e,i.VALIDATE_STATUS)+`

Program Info Log: `+s+`
`+o+`
`+a)}else s!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",s)}}_completeCompile(e,t){const{state:r,gl:i}=this,s=this.get(t),{programGPU:o,fragmentShader:a,vertexShader:l}=s;i.getProgramParameter(o,i.LINK_STATUS)===!1&&this._logProgramError(o,a,l),r.useProgram(o);const c=e.getBindings();this._setupBindings(c,o),this.set(t,{programGPU:o})}createComputePipeline(e,t){const{state:r,gl:i}=this,s={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(s);const{computeProgram:o}=e,a=i.createProgram(),l=this.get(s).shaderGPU,c=this.get(o).shaderGPU,u=o.transforms,h=[],d=[];for(let g=0;g<u.length;g++){const m=u[g];h.push(m.varyingName),d.push(m.attributeNode)}i.attachShader(a,l),i.attachShader(a,c),i.transformFeedbackVaryings(a,h,i.SEPARATE_ATTRIBS),i.linkProgram(a),i.getProgramParameter(a,i.LINK_STATUS)===!1&&this._logProgramError(a,l,c),r.useProgram(a),this.createBindings(null,t),this._setupBindings(t,a);const f=o.attributes,p=[],y=[];for(let g=0;g<f.length;g++){const m=f[g].node.attribute;p.push(m),this.has(m)||this.attributeUtils.createAttribute(m,i.ARRAY_BUFFER)}for(let g=0;g<d.length;g++){const m=d[g].attribute;this.has(m)||this.attributeUtils.createAttribute(m,i.ARRAY_BUFFER);const _=this.get(m);y.push(_)}this.set(e,{programGPU:a,transformBuffers:y,attributes:p})}createBindings(e,t){this.updateBindings(e,t)}updateBindings(e,t){if(!e)return;const{gl:r}=this,i=this.get(t),s=this.get(e);i.textureIndex===void 0&&(i.textureIndex=0),s.textureIndex===void 0?s.textureIndex=i.textureIndex:i.textureIndex=s.textureIndex;let o=0;for(const a of e.bindings)if(a.isUniformsGroup||a.isUniformBuffer){const l=a.buffer,c=r.createBuffer();r.bindBuffer(r.UNIFORM_BUFFER,c),r.bufferData(r.UNIFORM_BUFFER,l,r.DYNAMIC_DRAW),this.set(a,{index:e.index*2+o++,bufferGPU:c})}else if(a.isSampledTexture){const{textureGPU:l,glTextureType:c}=this.get(a.texture);this.set(a,{index:i.textureIndex++,textureGPU:l,glTextureType:c})}}updateBinding(e){const t=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const i=this.get(e).bufferGPU,s=e.buffer;t.bindBuffer(t.UNIFORM_BUFFER,i),t.bufferData(t.UNIFORM_BUFFER,s,t.DYNAMIC_DRAW)}}createIndexAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){}hasFeature(e){const t=Object.keys(YU).filter(i=>YU[i]===e),r=this.extensions;for(let i=0;i<t.length;i++)if(r.has(t[i]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,t,r,i){this.textureUtils.copyTextureToTexture(e,t,r,i)}copyFramebufferToTexture(e,t,r){this.textureUtils.copyFramebufferToTexture(e,t,r)}_setFramebuffer(e){const{gl:t,state:r}=this;let i=null;if(e.textures!==null){const s=e.renderTarget,o=this.get(s),{samples:a,depthBuffer:l,stencilBuffer:c}=s,u=s.isWebGLCubeRenderTarget===!0;let h=o.msaaFrameBuffer,d=o.depthRenderbuffer;const f=R8(e);let p;if(u?(o.cubeFramebuffers||(o.cubeFramebuffers={}),p=o.cubeFramebuffers[f]):(o.framebuffers||(o.framebuffers={}),p=o.framebuffers[f]),p===void 0){p=t.createFramebuffer(),r.bindFramebuffer(t.FRAMEBUFFER,p);const y=e.textures;if(u){o.cubeFramebuffers[f]=p;const{textureGPU:g}=this.get(y[0]),m=this.renderer._activeCubeFace;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+m,g,0)}else{o.framebuffers[f]=p;for(let g=0;g<y.length;g++){const m=y[g],_=this.get(m);_.renderTarget=e.renderTarget;const v=t.COLOR_ATTACHMENT0+g;t.framebufferTexture2D(t.FRAMEBUFFER,v,t.TEXTURE_2D,_.textureGPU,0)}r.drawBuffers(e,p)}if(e.depthTexture!==null){const g=this.get(e.depthTexture),m=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.framebufferTexture2D(t.FRAMEBUFFER,m,t.TEXTURE_2D,g.textureGPU,0)}}if(a>0){if(h===void 0){const y=[];h=t.createFramebuffer(),r.bindFramebuffer(t.FRAMEBUFFER,h);const g=[],m=e.textures;for(let _=0;_<m.length;_++){if(g[_]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,g[_]),y.push(t.COLOR_ATTACHMENT0+_),l){const b=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;y.push(b)}const v=e.textures[_],x=this.get(v);t.renderbufferStorageMultisample(t.RENDERBUFFER,a,x.glInternalFormat,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+_,t.RENDERBUFFER,g[_])}if(o.msaaFrameBuffer=h,o.msaaRenderbuffers=g,d===void 0){d=t.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(d,e),o.depthRenderbuffer=d;const _=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;y.push(_)}o.invalidationArray=y}i=o.msaaFrameBuffer}else i=p}r.bindFramebuffer(t.FRAMEBUFFER,i)}_getVaoKey(e,t){let r=[];if(e!==null){const i=this.get(e);r+=":"+i.id}for(let i=0;i<t.length;i++){const s=this.get(t[i]);r+=":"+s.id}return r}_createVao(e,t){const{gl:r}=this,i=r.createVertexArray();let s="",o=!0;if(r.bindVertexArray(i),e!==null){const a=this.get(e);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a.bufferGPU),s+=":"+a.id}for(let a=0;a<t.length;a++){const l=t[a],c=this.get(l);s+=":"+c.id,r.bindBuffer(r.ARRAY_BUFFER,c.bufferGPU),r.enableVertexAttribArray(a),(l.isStorageBufferAttribute||l.isStorageInstancedBufferAttribute)&&(o=!1);let u,h;l.isInterleavedBufferAttribute===!0?(u=l.data.stride*c.bytesPerElement,h=l.offset*c.bytesPerElement):(u=0,h=0),c.isInteger?r.vertexAttribIPointer(a,l.itemSize,c.type,u,h):r.vertexAttribPointer(a,l.itemSize,c.type,l.normalized,u,h),l.isInstancedBufferAttribute&&!l.isInterleavedBufferAttribute?r.vertexAttribDivisor(a,l.meshPerAttribute):l.isInterleavedBufferAttribute&&l.data.isInstancedInterleavedBuffer&&r.vertexAttribDivisor(a,l.data.meshPerAttribute)}return r.bindBuffer(r.ARRAY_BUFFER,null),this.vaoCache[s]=i,{vaoGPU:i,staticVao:o}}_getTransformFeedback(e){let t="";for(let s=0;s<e.length;s++)t+=":"+e[s].id;let r=this.transformFeedbackCache[t];if(r!==void 0)return r;const{gl:i}=this;r=i.createTransformFeedback(),i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,r);for(let s=0;s<e.length;s++){const o=e[s];i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,s,o.transformBuffer)}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[t]=r,r}_setupBindings(e,t){const r=this.gl;for(const i of e)for(const s of i.bindings){const a=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){const l=r.getUniformBlockIndex(t,s.name);r.uniformBlockBinding(t,l,a)}else if(s.isSampledTexture){const l=r.getUniformLocation(t,s.name);r.uniform1i(l,a)}}}_bindUniforms(e){const{gl:t,state:r}=this;for(const i of e)for(const s of i.bindings){const o=this.get(s),a=o.index;s.isUniformsGroup||s.isUniformBuffer?r.bindBufferBase(t.UNIFORM_BUFFER,a,o.bufferGPU):s.isSampledTexture&&r.bindTexture(o.glTextureType,o.textureGPU,t.TEXTURE0+a)}}}class cRe extends $2{constructor(e,t){super(e),this.texture=t,this.version=t?t.version:0,this.isSampler=!0}}class uRe extends cRe{constructor(e,t,r){super(e,t?t.value:null),this.textureNode=t,this.groupNode=r}update(){this.texture=this.textureNode.value}}class hRe extends P8{constructor(e,t){super(e,t?t.array:null),this.attribute=t,this.isStorageBuffer=!0}}let dRe=0;class fRe extends hRe{constructor(e,t){super("StorageBuffer_"+dRe++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:iR.Storage,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class pRe extends Dc{constructor(e){super(),this.device=e;const t=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,r=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,i=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:nS.Linear}),this.flipYSampler=e.createSampler({minFilter:nS.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:t}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:r}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:i})}getTransferPipeline(e){let t=this.transferPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Nd.TriangleStrip,stripIndexFormat:qf.Uint32},layout:"auto"}),this.transferPipelines[e]=t),t}getFlipYPipeline(e){let t=this.flipYPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Nd.TriangleStrip,stripIndexFormat:qf.Uint32},layout:"auto"}),this.flipYPipelines[e]=t),t}flipY(e,t,r=0){const i=t.format,{width:s,height:o}=t.size,a=this.getTransferPipeline(i),l=this.getFlipYPipeline(i),c=this.device.createTexture({size:{width:s,height:o,depthOrArrayLayers:1},format:i,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),u=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Ms.TwoD,baseArrayLayer:r}),h=c.createView({baseMipLevel:0,mipLevelCount:1,dimension:Ms.TwoD,baseArrayLayer:0}),d=this.device.createCommandEncoder({}),f=(p,y,g)=>{const m=p.getBindGroupLayout(0),_=this.device.createBindGroup({layout:m,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:y}]}),v=d.beginRenderPass({colorAttachments:[{view:g,loadOp:tr.Clear,storeOp:Pr.Store,clearValue:[0,0,0,0]}]});v.setPipeline(p),v.setBindGroup(0,_),v.draw(4,1,0,0),v.end()};f(a,u,h),f(l,h,u),this.device.queue.submit([d.finish()]),c.destroy()}generateMipmaps(e,t,r=0){const i=this.get(e);i.useCount===void 0&&(i.useCount=0,i.layers=[]);const s=i.layers[r]||this._mipmapCreateBundles(e,t,r),o=this.device.createCommandEncoder({});this._mipmapRunBundles(o,s),this.device.queue.submit([o.finish()]),i.useCount!==0&&(i.layers[r]=s),i.useCount++}_mipmapCreateBundles(e,t,r){const i=this.getTransferPipeline(t.format),s=i.getBindGroupLayout(0);let o=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Ms.TwoD,baseArrayLayer:r});const a=[];for(let l=1;l<t.mipLevelCount;l++){const c=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:o}]}),u=e.createView({baseMipLevel:l,mipLevelCount:1,dimension:Ms.TwoD,baseArrayLayer:r}),h={colorAttachments:[{view:u,loadOp:tr.Clear,storeOp:Pr.Store,clearValue:[0,0,0,0]}]},d=this.device.createRenderBundleEncoder({colorFormats:[t.format]});d.setPipeline(i),d.setBindGroup(0,c),d.draw(4,1,0,0),a.push({renderBundles:[d.finish()],passDescriptor:h}),o=u}return a}_mipmapRunBundles(e,t){const r=t.length;for(let i=0;i<r;i++){const s=t[i],o=e.beginRenderPass(s.passDescriptor);o.executeBundles(s.renderBundles),o.end()}}}const mRe={[D6]:"never",[o2]:"less",[F6]:"equal",[O6]:"less-equal",[k6]:"greater",[B6]:"greater-equal",[z6]:"always",[U6]:"not-equal"},gRe=[0,1,3,2,4,5];class yRe{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new Py,this.depthTexture.name="depthBuffer"}createSampler(e){const t=this.backend,r=t.device,i=t.get(e),s={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:e.anisotropy};e.isDepthTexture&&e.compareFunction!==null&&(s.compare=mRe[e.compareFunction]),i.sampler=r.createSampler(s)}createDefaultTexture(e){let t;const r=oR(e);e.isCubeTexture?t=this._getDefaultCubeTextureGPU(r):e.isVideoTexture?this.backend.get(e).externalTexture=this._getDefaultVideoFrame():t=this._getDefaultTextureGPU(r),this.backend.get(e).texture=t}createTexture(e,t={}){const r=this.backend,i=r.get(e);if(i.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");t.needsMipmaps===void 0&&(t.needsMipmaps=!1),t.levels===void 0&&(t.levels=1),t.depth===void 0&&(t.depth=1);const{width:s,height:o,depth:a,levels:l}=t,c=this._getDimension(e),u=e.internalFormat||t.format||oR(e,r.device);i.format=u;let h=t.sampleCount!==void 0?t.sampleCount:1;h=r.utils.getSampleCount(h);const d=e.isRenderTargetTexture&&!e.isMultisampleRenderTargetTexture?1:h;let f=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(f|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&(f|=GPUTextureUsage.RENDER_ATTACHMENT);const p={label:e.name,size:{width:s,height:o,depthOrArrayLayers:a},mipLevelCount:l,sampleCount:d,dimension:c,format:u,usage:f};if(e.isVideoTexture){const y=e.source.data,g=new VideoFrame(y);p.size.width=g.displayWidth,p.size.height=g.displayHeight,g.close(),i.externalTexture=y}else{if(u===void 0)return console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);i.texture=r.device.createTexture(p)}if(e.isRenderTargetTexture&&h>1&&!e.isMultisampleRenderTargetTexture){const y=Object.assign({},p);y.label=y.label+"-msaa",y.sampleCount=h,i.msaaTexture=r.device.createTexture(y)}i.initialized=!0,i.textureDescriptorGPU=p}destroyTexture(e){const t=this.backend,r=t.get(e);r.texture.destroy(),r.msaaTexture!==void 0&&r.msaaTexture.destroy(),t.delete(e)}destroySampler(e){const r=this.backend.get(e);delete r.sampler}generateMipmaps(e){const t=this.backend.get(e);if(e.isCubeTexture)for(let r=0;r<6;r++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,r);else{const r=e.image.depth||1;for(let i=0;i<r;i++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,i)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:t,height:r}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:t,height:r,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,t=!1){const r=this.backend,{width:i,height:s}=r.getDrawingBufferSize(),o=this.depthTexture,a=r.get(o).texture;let l,c;if(t?(l=Hf,c=Cy):e&&(l=Pu,c=Dr),a!==void 0){if(o.image.width===i&&o.image.height===s&&o.format===l&&o.type===c)return a;this.destroyTexture(o)}return o.name="depthBuffer",o.format=l,o.type=c,o.image.width=i,o.image.height=s,this.createTexture(o,{sampleCount:r.utils.getSampleCount(r.renderer.samples),width:i,height:s}),r.get(o).texture}updateTexture(e,t){const r=this.backend.get(e),{textureDescriptorGPU:i}=r;if(!(e.isRenderTargetTexture||i===void 0)){if(e.isDataTexture)this._copyBufferToTexture(t.image,r.texture,i,0,e.flipY);else if(e.isDataArrayTexture||e.isData3DTexture)for(let s=0;s<t.image.depth;s++)this._copyBufferToTexture(t.image,r.texture,i,s,e.flipY,s);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,r.texture,i);else if(e.isCubeTexture)this._copyCubeMapToTexture(t.images,r.texture,i,e.flipY);else if(e.isVideoTexture){const s=e.source.data;r.externalTexture=s}else this._copyImageToTexture(t.image,r.texture,i,0,e.flipY);r.version=e.version,e.onUpdate&&e.onUpdate(e)}}async copyTextureToBuffer(e,t,r,i,s,o){const a=this.backend.device,l=this.backend.get(e),c=l.texture,u=l.textureDescriptorGPU.format,h=this._getBytesPerTexel(u);let d=i*h;d=Math.ceil(d/256)*256;const f=a.createBuffer({size:i*s*h,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),p=a.createCommandEncoder();p.copyTextureToBuffer({texture:c,origin:{x:t,y:r,z:o}},{buffer:f,bytesPerRow:d},{width:i,height:s});const y=this._getTypedArrayType(u);a.queue.submit([p.finish()]),await f.mapAsync(GPUMapMode.READ);const g=f.getMappedRange();return new y(g)}_isEnvironmentTexture(e){const t=e.mapping;return t===My||t===Ey||t===ju||t===Gf}_getDefaultTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const r=new mi;r.minFilter=kr,r.magFilter=kr,this.createTexture(r,{width:1,height:1,format:e}),this.defaultTexture[e]=t=r}return this.backend.get(t).texture}_getDefaultCubeTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const r=new c2;r.minFilter=kr,r.magFilter=kr,this.createTexture(r,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=t=r}return this.backend.get(t).texture}_getDefaultVideoFrame(){let e=this.defaultVideoFrame;if(e===null){const t={timestamp:0,codedWidth:1,codedHeight:1,format:"RGBA"};this.defaultVideoFrame=e=new VideoFrame(new Uint8Array([0,0,0,255]),t)}return e}_copyCubeMapToTexture(e,t,r,i){for(let s=0;s<6;s++){const o=e[s],a=i===!0?gRe[s]:s;o.isDataTexture?this._copyBufferToTexture(o.image,t,r,a,i):this._copyImageToTexture(o,t,r,a,i)}}_copyImageToTexture(e,t,r,i,s){this.backend.device.queue.copyExternalImageToTexture({source:e},{texture:t,mipLevel:0,origin:{x:0,y:0,z:i}},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(t,r,i)}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new pRe(this.backend.device)),e}_generateMipmaps(e,t,r=0){this._getPassUtils().generateMipmaps(e,t,r)}_flipY(e,t,r=0){this._getPassUtils().flipY(e,t,r)}_copyBufferToTexture(e,t,r,i,s,o=0){const a=this.backend.device,l=e.data,c=this._getBytesPerTexel(r.format),u=e.width*c;a.queue.writeTexture({texture:t,mipLevel:0,origin:{x:0,y:0,z:i}},l,{offset:e.width*e.height*c*o,bytesPerRow:u},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(t,r,i)}_copyCompressedBufferToTexture(e,t,r){const i=this.backend.device,s=this._getBlockData(r.format),o=r.size.depthOrArrayLayers>1;for(let a=0;a<e.length;a++){const l=e[a],c=l.width,u=l.height,h=o?r.size.depthOrArrayLayers:1,d=Math.ceil(c/s.width)*s.byteLength,f=d*Math.ceil(u/s.height);for(let p=0;p<h;p++)i.queue.writeTexture({texture:t,mipLevel:a,origin:{x:0,y:0,z:p}},l.data,{offset:p*f,bytesPerRow:d,rowsPerImage:Math.ceil(u/s.height)},{width:Math.ceil(c/s.width)*s.width,height:Math.ceil(u/s.height)*s.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===Z.BC1RGBAUnorm||e===Z.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===Z.BC2RGBAUnorm||e===Z.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Z.BC3RGBAUnorm||e===Z.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Z.BC4RUnorm||e===Z.BC4RSNorm)return{byteLength:8,width:4,height:4};if(e===Z.BC5RGUnorm||e===Z.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===Z.BC6HRGBUFloat||e===Z.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===Z.BC7RGBAUnorm||e===Z.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Z.ETC2RGB8Unorm||e===Z.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===Z.ETC2RGB8A1Unorm||e===Z.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===Z.ETC2RGBA8Unorm||e===Z.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===Z.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===Z.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===Z.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===Z.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===Z.ASTC4x4Unorm||e===Z.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===Z.ASTC5x4Unorm||e===Z.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===Z.ASTC5x5Unorm||e===Z.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===Z.ASTC6x5Unorm||e===Z.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===Z.ASTC6x6Unorm||e===Z.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===Z.ASTC8x5Unorm||e===Z.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===Z.ASTC8x6Unorm||e===Z.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===Z.ASTC8x8Unorm||e===Z.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===Z.ASTC10x5Unorm||e===Z.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===Z.ASTC10x6Unorm||e===Z.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===Z.ASTC10x8Unorm||e===Z.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===Z.ASTC10x10Unorm||e===Z.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===Z.ASTC12x10Unorm||e===Z.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===Z.ASTC12x12Unorm||e===Z.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let t=oM.ClampToEdge;return e===Gx?t=oM.Repeat:e===Hx&&(t=oM.MirrorRepeat),t}_convertFilterMode(e){let t=nS.Linear;return(e===kr||e===SA||e===Kd)&&(t=nS.Nearest),t}_getBytesPerTexel(e){if(e===Z.R8Unorm||e===Z.R8Snorm||e===Z.R8Uint||e===Z.R8Sint)return 1;if(e===Z.R16Uint||e===Z.R16Sint||e===Z.R16Float||e===Z.RG8Unorm||e===Z.RG8Snorm||e===Z.RG8Uint||e===Z.RG8Sint)return 2;if(e===Z.R32Uint||e===Z.R32Sint||e===Z.R32Float||e===Z.RG16Uint||e===Z.RG16Sint||e===Z.RG16Float||e===Z.RGBA8Unorm||e===Z.RGBA8UnormSRGB||e===Z.RGBA8Snorm||e===Z.RGBA8Uint||e===Z.RGBA8Sint||e===Z.BGRA8Unorm||e===Z.BGRA8UnormSRGB||e===Z.RGB9E5UFloat||e===Z.RGB10A2Unorm||e===Z.RG11B10UFloat||e===Z.Depth32Float||e===Z.Depth24Plus||e===Z.Depth24PlusStencil8||e===Z.Depth32FloatStencil8)return 4;if(e===Z.RG32Uint||e===Z.RG32Sint||e===Z.RG32Float||e===Z.RGBA16Uint||e===Z.RGBA16Sint||e===Z.RGBA16Float)return 8;if(e===Z.RGBA32Uint||e===Z.RGBA32Sint||e===Z.RGBA32Float)return 16}_getTypedArrayType(e){if(e===Z.R8Uint)return Uint8Array;if(e===Z.R8Sint)return Int8Array;if(e===Z.R8Unorm)return Uint8Array;if(e===Z.R8Snorm)return Int8Array;if(e===Z.RG8Uint)return Uint8Array;if(e===Z.RG8Sint)return Int8Array;if(e===Z.RG8Unorm)return Uint8Array;if(e===Z.RG8Snorm)return Int8Array;if(e===Z.RGBA8Uint)return Uint8Array;if(e===Z.RGBA8Sint)return Int8Array;if(e===Z.RGBA8Unorm)return Uint8Array;if(e===Z.RGBA8Snorm)return Int8Array;if(e===Z.R16Uint)return Uint16Array;if(e===Z.R16Sint)return Int16Array;if(e===Z.RG16Uint)return Uint16Array;if(e===Z.RG16Sint)return Int16Array;if(e===Z.RGBA16Uint)return Uint16Array;if(e===Z.RGBA16Sint)return Int16Array;if(e===Z.R16Float||e===Z.RG16Float||e===Z.RGBA16Float)return Uint16Array;if(e===Z.R32Uint)return Uint32Array;if(e===Z.R32Sint)return Int32Array;if(e===Z.R32Float)return Float32Array;if(e===Z.RG32Uint)return Uint32Array;if(e===Z.RG32Sint)return Int32Array;if(e===Z.RG32Float)return Float32Array;if(e===Z.RGBA32Uint)return Uint32Array;if(e===Z.RGBA32Sint)return Int32Array;if(e===Z.RGBA32Float)return Float32Array;if(e===Z.BGRA8Unorm||e===Z.BGRA8UnormSRGB)return Uint8Array;if(e===Z.RGB10A2Unorm||e===Z.RGB9E5UFloat||e===Z.RG11B10UFloat)return Uint32Array;if(e===Z.Depth32Float)return Float32Array;if(e===Z.Depth24Plus||e===Z.Depth24PlusStencil8)return Uint32Array;if(e===Z.Depth32FloatStencil8)return Float32Array}_getDimension(e){let t;return e.isData3DTexture?t=zU.ThreeD:t=zU.TwoD,t}}function oR(n,e=null){const t=n.format,r=n.type,i=n.colorSpace;let s;if(n.isFramebufferTexture===!0&&n.type===$a)s=Z.BGRA8Unorm;else if(n.isCompressedTexture===!0||n.isCompressedArrayTexture===!0)switch(t){case y_:s=i===ht?Z.BC1RGBAUnormSRGB:Z.BC1RGBAUnorm;break;case v_:s=i===ht?Z.BC2RGBAUnormSRGB:Z.BC2RGBAUnorm;break;case __:s=i===ht?Z.BC3RGBAUnormSRGB:Z.BC3RGBAUnorm;break;case wA:s=i===ht?Z.ETC2RGB8UnormSRGB:Z.ETC2RGB8Unorm;break;case TA:s=i===ht?Z.ETC2RGBA8UnormSRGB:Z.ETC2RGBA8Unorm;break;case MA:s=i===ht?Z.ASTC4x4UnormSRGB:Z.ASTC4x4Unorm;break;case EA:s=i===ht?Z.ASTC5x4UnormSRGB:Z.ASTC5x4Unorm;break;case CA:s=i===ht?Z.ASTC5x5UnormSRGB:Z.ASTC5x5Unorm;break;case AA:s=i===ht?Z.ASTC6x5UnormSRGB:Z.ASTC6x5Unorm;break;case RA:s=i===ht?Z.ASTC6x6UnormSRGB:Z.ASTC6x6Unorm;break;case NA:s=i===ht?Z.ASTC8x5UnormSRGB:Z.ASTC8x5Unorm;break;case PA:s=i===ht?Z.ASTC8x6UnormSRGB:Z.ASTC8x6Unorm;break;case IA:s=i===ht?Z.ASTC8x8UnormSRGB:Z.ASTC8x8Unorm;break;case LA:s=i===ht?Z.ASTC10x5UnormSRGB:Z.ASTC10x5Unorm;break;case DA:s=i===ht?Z.ASTC10x6UnormSRGB:Z.ASTC10x6Unorm;break;case FA:s=i===ht?Z.ASTC10x8UnormSRGB:Z.ASTC10x8Unorm;break;case OA:s=i===ht?Z.ASTC10x10UnormSRGB:Z.ASTC10x10Unorm;break;case kA:s=i===ht?Z.ASTC12x10UnormSRGB:Z.ASTC12x10Unorm;break;case UA:s=i===ht?Z.ASTC12x12UnormSRGB:Z.ASTC12x12Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}else switch(t){case lp:switch(r){case Jm:s=Z.RGBA8Snorm;break;case eg:s=Z.RGBA16Sint;break;case Md:s=Z.RGBA16Uint;break;case Dr:s=Z.RGBA32Uint;break;case ui:s=Z.RGBA32Sint;break;case $a:s=i===ht?Z.RGBA8UnormSRGB:Z.RGBA8Unorm;break;case Xa:s=Z.RGBA16Float;break;case os:s=Z.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",r)}break;case t2:switch(r){case I6:s=Z.RGB9E5UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",r)}break;case n2:switch(r){case Jm:s=Z.R8Snorm;break;case eg:s=Z.R16Sint;break;case Md:s=Z.R16Uint;break;case Dr:s=Z.R32Uint;break;case ui:s=Z.R32Sint;break;case $a:s=Z.R8Unorm;break;case Xa:s=Z.R16Float;break;case os:s=Z.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",r)}break;case zg:switch(r){case Jm:s=Z.RG8Snorm;break;case eg:s=Z.RG16Sint;break;case Md:s=Z.RG16Uint;break;case Dr:s=Z.RG32Uint;break;case ui:s=Z.RG32Sint;break;case $a:s=Z.RG8Unorm;break;case Xa:s=Z.RG16Float;break;case os:s=Z.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",r)}break;case Pu:switch(r){case Md:s=Z.Depth16Unorm;break;case Dr:s=Z.Depth24Plus;break;case os:s=Z.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",r)}break;case Hf:switch(r){case Cy:s=Z.Depth24PlusStencil8;break;case os:e&&e.features.has(sR.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),s=Z.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",r)}break;case r2:switch(r){case ui:s=Z.R32Sint;break;case Dr:s=Z.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",r)}break;case i2:switch(r){case ui:s=Z.RG32Sint;break;case Dr:s=Z.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",r)}break;case s2:switch(r){case ui:s=Z.RGBA32Sint;break;case Dr:s=Z.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",r)}break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}return s}const vRe=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,_Re=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,QU={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},xRe=n=>{n=n.trim();const e=n.match(vRe);if(e!==null&&e.length===4){const t=e[2],r=[];let i=null;for(;(i=_Re.exec(t))!==null;)r.push({name:i[1],type:i[2]});const s=[];for(let u=0;u<r.length;u++){const{name:h,type:d}=r[u];let f=d;f.startsWith("texture")&&(f=d.split("<")[0]),f=QU[f]||f,s.push(new O2(f,h))}const o=n.substring(e[0].length),a=e[3]||"void",l=e[1]!==void 0?e[1]:"";return{type:QU[a]||a,inputs:s,name:l,inputsCode:t,blockCode:o,outputType:a}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class SRe extends B2{constructor(e){const{type:t,inputs:r,name:i,inputsCode:s,blockCode:o,outputType:a}=xRe(e);super(t,r,i),this.inputsCode=s,this.blockCode=o,this.outputType=a}getCode(e=this.name){const t=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${t}`+this.blockCode}}class bRe extends A8{parseFunction(e){return new SRe(e)}}const nd=self.GPUShaderStage,Cv={vertex:nd?nd.VERTEX:1,fragment:nd?nd.FRAGMENT:2,compute:nd?nd.COMPUTE:4},JU={instance:!0,swizzleAssign:!1,storageBuffer:!0},wRe={"^^":"tsl_xor"},TRe={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",imat2:"mat2x2<i32>",umat2:"mat2x2<u32>",bmat2:"mat2x2<bool>",mat3:"mat3x3<f32>",imat3:"mat3x3<i32>",umat3:"mat3x3<u32>",bmat3:"mat3x3<bool>",mat4:"mat4x4<f32>",imat4:"mat4x4<i32>",umat4:"mat4x4<u32>",bmat4:"mat4x4<bool>"},Sa={tsl_xor:new Xr("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new Xr("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new Xr("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new Xr("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new Xr("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new Xr("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new Xr("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new Xr("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new Xr("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping:new Xr(`
fn tsl_repeatWrapping( uv : vec2<f32>, dimension : vec2<u32> ) -> vec2<u32> {

	let uvScaled = vec2<u32>( uv * vec2<f32>( dimension ) );

	return ( ( uvScaled % dimension ) + dimension ) % dimension;

}
`),biquadraticTexture:new Xr(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, level : i32 ) -> vec4f {

	let iRes = vec2i( textureDimensions( map, level ) );
	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2i( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2i( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2i( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2i( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},Pm={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};/Windows/g.test(navigator.userAgent)&&(Sa.pow_float=new Xr("fn tsl_pow_float( a : f32, b : f32 ) -> f32 { return select( -pow( -a, b ), pow( a, b ), a > 0.0 ); }"),Sa.pow_vec2=new Xr("fn tsl_pow_vec2( a : vec2f, b : vec2f ) -> vec2f { return vec2f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ) ); }",[Sa.pow_float]),Sa.pow_vec3=new Xr("fn tsl_pow_vec3( a : vec3f, b : vec3f ) -> vec3f { return vec3f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ) ); }",[Sa.pow_float]),Sa.pow_vec4=new Xr("fn tsl_pow_vec4( a : vec4f, b : vec4f ) -> vec4f { return vec4f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ), tsl_pow_float( a.w, b.w ) ); }",[Sa.pow_float]),Pm.pow_float="tsl_pow_float",Pm.pow_vec2="tsl_pow_vec2",Pm.pow_vec3="tsl_pow_vec3",Pm.pow_vec4="tsl_pow_vec4");let U8="";/Firefox/g.test(navigator.userAgent)!==!0&&(U8+=`diagnostic( off, derivative_uniformity );
`);class MRe extends S8{constructor(e,t){super(e,t,new bRe),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==qu}_generateTextureSample(e,t,r,i,s=this.shaderStage){return s==="fragment"?i?`textureSample( ${t}, ${t}_sampler, ${r}, ${i} )`:`textureSample( ${t}, ${t}_sampler, ${r} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,r):this.generateTextureLod(e,t,r,"0")}_generateVideoSample(e,t,r=this.shaderStage){if(r==="fragment")return`textureSampleBaseClampToEdge( ${e}, ${e}_sampler, vec2<f32>( ${t}.x, 1.0 - ${t}.y ) )`;console.error(`WebGPURenderer: THREE.VideoTexture does not support ${r} shader.`)}_generateTextureSampleLevel(e,t,r,i,s,o=this.shaderStage){return o==="fragment"&&this.isUnfilterable(e)===!1?`textureSampleLevel( ${t}, ${t}_sampler, ${r}, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,r,i):this.generateTextureLod(e,t,r,i)}generateFilteredTexture(e,t,r,i="0"){return this._include("biquadraticTexture"),`tsl_biquadraticTexture( ${t}, ${r}, i32( ${i} ) )`}generateTextureLod(e,t,r,i="0"){this._include("repeatWrapping");const s=e.isMultisampleRenderTargetTexture===!0?`textureDimensions( ${t} )`:`textureDimensions( ${t}, 0 )`;return`textureLoad( ${t}, tsl_repeatWrapping( ${r}, ${s} ), i32( ${i} ) )`}generateTextureLoad(e,t,r,i,s="0u"){return i?`textureLoad( ${t}, ${r}, ${i}, ${s} )`:`textureLoad( ${t}, ${r}, ${s} )`}generateTextureStore(e,t,r,i){return`textureStore( ${t}, ${r}, ${i} )`}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===os||e.isMultisampleRenderTargetTexture===!0}generateTexture(e,t,r,i,s=this.shaderStage){let o=null;return e.isVideoTexture===!0?o=this._generateVideoSample(t,r,s):this.isUnfilterable(e)?o=this.generateTextureLod(e,t,r,"0",i,s):o=this._generateTextureSample(e,t,r,i,s),o}generateTextureGrad(e,t,r,i,s,o=this.shaderStage){if(o==="fragment")return`textureSampleGrad( ${t}, ${t}_sampler, ${r},  ${i[0]}, ${i[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${o} shader.`)}generateTextureCompare(e,t,r,i,s,o=this.shaderStage){if(o==="fragment")return`textureSampleCompare( ${t}, ${t}_sampler, ${r}, ${i} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}generateTextureLevel(e,t,r,i,s,o=this.shaderStage){let a=null;return e.isVideoTexture===!0?a=this._generateVideoSample(t,r,o):a=this._generateTextureSampleLevel(e,t,r,i,s,o),a}generateTextureBias(e,t,r,i,s,o=this.shaderStage){if(o==="fragment")return`textureSampleBias( ${t}, ${t}_sampler, ${r}, ${i} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${o} shader.`)}getPropertyName(e,t=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(t==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const r=e.name,i=e.type;return i==="texture"||i==="cubeTexture"||i==="storageTexture"||i==="texture3D"?r:i==="buffer"||i==="storageBuffer"?`NodeBuffer_${e.id}.${r}`:e.groupNode.name+"."+r}return super.getPropertyName(e)}getOutputStructName(){return"output"}_getUniformGroupCount(e){return Object.keys(this.uniforms[e]).length}getFunctionOperator(e){const t=wRe[e];return t!==void 0?(this._include(t),t):null}getStorageAccess(e){if(e.isStorageTextureNode)switch(e.access){case BU.ReadOnly:return"read";case BU.WriteOnly:return"write";default:return"read_write"}else switch(e.access){case iR.Storage:return"read_write";case iR.ReadOnlyStorage:return"read";default:return"write"}}getUniformFromNode(e,t,r,i=null){const s=super.getUniformFromNode(e,t,r,i),o=this.getDataFromNode(e,r,this.globalCache);if(o.uniformGPU===void 0){let a;const l=e.groupNode,c=l.name,u=this.getBindGroupArray(c,r);if(t==="texture"||t==="cubeTexture"||t==="storageTexture"||t==="texture3D"){let h=null;if(t==="texture"||t==="storageTexture"?h=new f1(s.name,s.node,l,e.access?e.access:null):t==="cubeTexture"?h=new F8(s.name,s.node,l,e.access?e.access:null):t==="texture3D"&&(h=new O8(s.name,s.node,l,e.access?e.access:null)),h.store=e.isStorageTextureNode===!0,h.setVisibility(Cv[r]),r==="fragment"&&this.isUnfilterable(e.value)===!1&&h.store===!1){const d=new uRe(`${s.name}_sampler`,s.node,l);d.setVisibility(Cv[r]),u.push(d,h),a=[d,h]}else u.push(h),a=[h]}else if(t==="buffer"||t==="storageBuffer"){const h=t==="storageBuffer"?fRe:L8,d=new h(e,l);d.setVisibility(Cv[r]),u.push(d),a=d}else{const h=this.uniformGroups[r]||(this.uniformGroups[r]={});let d=h[c];d===void 0&&(d=new D8(c,l),d.setVisibility(Cv[r]),h[c]=d,u.push(d)),a=this.getNodeUniform(s,t),d.addUniform(a)}o.uniformGPU=a}return s}getBuiltin(e,t,r,i=this.shaderStage){const s=this.builtins[i]||(this.builtins[i]=new Map);return s.has(e)===!1&&s.set(e,{name:e,property:t,type:r}),t}hasBuiltin(e,t=this.shaderStage){return this.builtins[t]!==void 0&&this.builtins[t].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const t=e.layout,r=this.flowShaderNode(e),i=[];for(const o of t.inputs)i.push(o.name+" : "+this.getType(o.type));let s=`fn ${t.name}( ${i.join(", ")} ) -> ${this.getType(t.type)} {
${r.vars}
${r.code}
`;return r.result&&(s+=`	return ${r.result};
`),s+=`
}
`,s}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}isFlipY(){return!1}enableDirective(e,t=this.shaderStage){(this.directives[t]||(this.directives[t]=new Set)).add(e)}getDirectives(e){const t=[],r=this.directives[e];if(r!==void 0)for(const i of r)t.push(`enable ${i};`);return t.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}getBuiltins(e){const t=[],r=this.builtins[e];if(r!==void 0)for(const{name:i,property:s,type:o}of r.values())t.push(`@builtin( ${i} ) ${s} : ${o}`);return t.join(`,
	`)}getScopedArray(e,t,r,i){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:t,bufferType:r,bufferCount:i}),e}getScopedArrays(e){if(e!=="compute")return;const t=[];for(const{name:r,scope:i,bufferType:s,bufferCount:o}of this.scopedArrays.values()){const a=this.getType(s);t.push(`var<${i}> ${r}: array< ${a}, ${o} >;`)}return t.join(`
`)}getAttributes(e){const t=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","id","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const r=this.getBuiltins("attribute");r&&t.push(r);const i=this.getAttributesArray();for(let s=0,o=i.length;s<o;s++){const a=i[s],l=a.name,c=this.getType(a.type);t.push(`@location( ${s} ) ${l} : ${c}`)}}return t.join(`,
	`)}getStructMembers(e){const t=[],r=e.getMemberTypes();for(let s=0;s<r.length;s++){const o=r[s];t.push(`	@location( ${s} ) m${s} : ${o}<f32>`)}const i=this.getBuiltins("output");return i&&t.push("	"+i),t.join(`,
`)}getStructs(e){const t=[],r=this.structs[e];for(let i=0,s=r.length;i<s;i++){const o=r[i],a=o.name;let l=`struct ${a} {
`;l+=this.getStructMembers(o),l+=`
}`,t.push(l),t.push(`
var<private> output : ${a};

`)}return t.join(`

`)}getVar(e,t){return`var ${t} : ${this.getType(e)}`}getVars(e){const t=[],r=this.vars[e];if(r!==void 0)for(const i of r)t.push(`	${this.getVar(i.type,i.name)};`);return`
${t.join(`
`)}
`}getVaryings(e){const t=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const s=this.varyings,o=this.vars[e];for(let a=0;a<s.length;a++){const l=s[a];if(l.needsInterpolation){let c=`@location( ${a} )`;/^(int|uint|ivec|uvec)/.test(l.type)&&(c+=" @interpolate( flat )"),t.push(`${c} ${l.name} : ${this.getType(l.type)}`)}else e==="vertex"&&o.includes(l)===!1&&o.push(l)}}const r=this.getBuiltins(e);r&&t.push(r);const i=t.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+i):i}getUniforms(e){const t=this.uniforms[e],r=[],i=[],s=[],o={};for(const l of t){const c=l.groupNode.name,u=this.bindingsIndexes[c];if(l.type==="texture"||l.type==="cubeTexture"||l.type==="storageTexture"||l.type==="texture3D"){const h=l.node.value;e==="fragment"&&this.isUnfilterable(h)===!1&&l.node.isStorageTextureNode!==!0&&(h.isDepthTexture===!0&&h.compareFunction!==null?r.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name}_sampler : sampler_comparison;`):r.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name}_sampler : sampler;`));let d,f="";if(h.isMultisampleRenderTargetTexture===!0&&(f="_multisampled"),h.isCubeTexture===!0)d="texture_cube<f32>";else if(h.isDataArrayTexture===!0||h.isCompressedArrayTexture===!0)d="texture_2d_array<f32>";else if(h.isDepthTexture===!0)d=`texture_depth${f}_2d`;else if(h.isVideoTexture===!0)d="texture_external";else if(h.isData3DTexture===!0)d="texture_3d<f32>";else if(l.node.isStorageTextureNode===!0){const p=oR(h),y=this.getStorageAccess(l.node);d=`texture_storage_2d<${p}, ${y}>`}else{const p=this.getComponentTypeFromTexture(h).charAt(0);d=`texture${f}_2d<${p}32>`}r.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name} : ${d};`)}else if(l.type==="buffer"||l.type==="storageBuffer"){const h=l.node,d=this.getType(h.bufferType),f=h.bufferCount,p=f>0?", "+f:"",y=h.isAtomic?`atomic<${d}>`:`${d}`,g=`	${l.name} : array< ${y}${p} >
`,m=h.isStorageBufferNode?`storage, ${this.getStorageAccess(h)}`:"uniform";i.push(this._getWGSLStructBinding("NodeBuffer_"+h.id,g,m,u.binding++,u.group))}else{const h=this.getType(this.getVectorType(l.type)),d=l.groupNode.name;(o[d]||(o[d]={index:u.binding++,id:u.group,snippets:[]})).snippets.push(`	${l.name} : ${h}`)}}for(const l in o){const c=o[l];s.push(this._getWGSLStructBinding(l,c.snippets.join(`,
`),"uniform",c.index,c.id))}let a=r.join(`
`);return a+=i.join(`
`),a+=s.join(`
`),a}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){const r=e[t];r.uniforms=this.getUniforms(t),r.attributes=this.getAttributes(t),r.varyings=this.getVaryings(t),r.structs=this.getStructs(t),r.vars=this.getVars(t),r.codes=this.getCodes(t),r.directives=this.getDirectives(t),r.scopedArrays=this.getScopedArrays(t);let i=`// code

`;i+=this.flowCode[t];const s=this.flowNodes[t],o=s[s.length-1],a=o.outputNode,l=a!==void 0&&a.isOutputStructNode===!0;for(const c of s){const u=this.getFlowData(c),h=c.name;if(h&&(i.length>0&&(i+=`
`),i+=`	// flow -> ${h}
	`),i+=`${u.code}
	`,c===o&&t!=="compute"){if(i+=`// result

	`,t==="vertex")i+=`varyings.Vertex = ${u.result};`;else if(t==="fragment")if(l)r.returnType=a.nodeType,i+=`return ${u.result};`;else{let d="	@location(0) color: vec4<f32>";const f=this.getBuiltins("output");f&&(d+=`,
	`+f),r.returnType="OutputStruct",r.structs+=this._getWGSLStruct("OutputStruct",d),r.structs+=`
var<private> output : OutputStruct;

`,i+=`output.color = ${u.result};

	return output;`}}}r.flow=i}this.material!==null?(this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment)):this.computeShader=this._getWGSLComputeCode(e.compute,(this.object.workgroupSize||[64]).join(", "))}getMethod(e,t=null){let r;return t!==null&&(r=this._getWGSLMethod(e+"_"+t)),r===void 0&&(r=this._getWGSLMethod(e)),r||e}getType(e){return TRe[e]||e}isAvailable(e){let t=JU[e];return t===void 0&&(e==="float32Filterable"&&(t=this.renderer.hasFeature("float32-filterable")),JU[e]=t),t}_getWGSLMethod(e){return Sa[e]!==void 0&&this._include(e),Pm[e]}_include(e){const t=Sa[e];return t.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(t),t}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${U8}

// uniforms
${e.uniforms}

// structs
${e.structs}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,t){return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${t} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = id.x + id.y * numWorkgroups.x * u32(${t}) + id.z * numWorkgroups.x * numWorkgroups.y * u32(${t});

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,t){return`
struct ${e} {
${t}
};`}_getWGSLStructBinding(e,t,r,i=0,s=0){const o=e+"Struct";return`${this._getWGSLStruct(o,t)}
@binding( ${i} ) @group( ${s} )
var<${r}> ${e} : ${o};`}}class ERe{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let t;return e.depthTexture!==null?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=Z.Depth24PlusStencil8:e.depth&&(t=Z.Depth24Plus),t}getTextureFormatGPU(e){return this.backend.get(e).format}getCurrentColorFormat(e){let t;return e.textures!==null?t=this.getTextureFormatGPU(e.textures[0]):t=this.getPreferredCanvasFormat(),t}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,t){if(e.isPoints)return Nd.PointList;if(e.isLineSegments||e.isMesh&&t.wireframe===!0)return Nd.LineList;if(e.isLine)return Nd.LineStrip;if(e.isMesh)return Nd.TriangleList}getSampleCount(e){let t=1;return e>1&&(t=Math.pow(2,Math.floor(Math.log2(e))),t===2&&(t=4)),t}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){return navigator.userAgent.includes("Quest")?Z.BGRA8Unorm:navigator.gpu.getPreferredCanvasFormat()}}const CRe=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]),ARe=new Map([[W6,["float16"]]]),RRe=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class NRe{constructor(e){this.backend=e}createAttribute(e,t){const r=this._getBufferAttribute(e),i=this.backend,s=i.get(r);let o=s.buffer;if(o===void 0){const a=i.device;let l=r.array;if(e.normalized===!1&&(l.constructor===Int16Array||l.constructor===Uint16Array)){const u=new Uint32Array(l.length);for(let h=0;h<l.length;h++)u[h]=l[h];l=u}if(r.array=l,(r.isStorageBufferAttribute||r.isStorageInstancedBufferAttribute)&&r.itemSize===3){l=new l.constructor(r.count*4);for(let u=0;u<r.count;u++)l.set(r.array.subarray(u*3,u*3+3),u*4);r.itemSize=4,r.array=l}const c=l.byteLength+(4-l.byteLength%4)%4;o=a.createBuffer({label:r.name,size:c,usage:t,mappedAtCreation:!0}),new l.constructor(o.getMappedRange()).set(l),o.unmap(),s.buffer=o}}updateAttribute(e){const t=this._getBufferAttribute(e),r=this.backend,i=r.device,s=r.get(t).buffer,o=t.array,a=t.updateRanges;if(a.length===0)i.queue.writeBuffer(s,0,o,0);else{for(let l=0,c=a.length;l<c;l++){const u=a[l];i.queue.writeBuffer(s,0,o,u.start*o.BYTES_PER_ELEMENT,u.count*o.BYTES_PER_ELEMENT)}t.clearUpdateRanges()}}createShaderVertexBuffers(e){const t=e.getAttributes(),r=new Map;for(let i=0;i<t.length;i++){const s=t[i],o=s.array.BYTES_PER_ELEMENT,a=this._getBufferAttribute(s);let l=r.get(a);if(l===void 0){let h,d;s.isInterleavedBufferAttribute===!0?(h=s.data.stride*o,d=s.data.isInstancedInterleavedBuffer?xv.Instance:xv.Vertex):(h=s.itemSize*o,d=s.isInstancedBufferAttribute?xv.Instance:xv.Vertex),s.normalized===!1&&(s.array.constructor===Int16Array||s.array.constructor===Uint16Array)&&(h=4),l={arrayStride:h,attributes:[],stepMode:d},r.set(a,l)}const c=this._getVertexFormat(s),u=s.isInterleavedBufferAttribute===!0?s.offset*o:0;l.attributes.push({shaderLocation:i,offset:u,format:c})}return Array.from(r.values())}destroyAttribute(e){const t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,r=t.device,s=t.get(this._getBufferAttribute(e)).buffer,o=s.size,a=r.createBuffer({label:e.name,size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),l=r.createCommandEncoder({});l.copyBufferToBuffer(s,0,a,0,o),a.unmap();const c=l.finish();return r.queue.submit([c]),await a.mapAsync(GPUMapMode.READ),a.getMappedRange()}_getVertexFormat(e){const{itemSize:t,normalized:r}=e,i=e.array.constructor,s=e.constructor;let o;if(t==1)o=RRe.get(i);else{const l=(ARe.get(s)||CRe.get(i))[r?1:0];if(l){const c=i.BYTES_PER_ELEMENT*t,h=Math.floor((c+3)/4)*4/i.BYTES_PER_ELEMENT;if(h%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");o=`${l}x${h}`}}return o||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),o}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class PRe{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const r=this.backend.device,i=[];let s=0;for(const o of e.bindings){const a={binding:s++,visibility:o.visibility};if(o.isUniformBuffer||o.isStorageBuffer){const l={};o.isStorageBuffer&&(l.type=o.access),a.buffer=l}else if(o.isSampler){const l={};o.texture.isDepthTexture&&o.texture.compareFunction!==null&&(l.type="comparison"),a.sampler=l}else if(o.isSampledTexture&&o.texture.isVideoTexture)a.externalTexture={};else if(o.isSampledTexture&&o.store){const l=this.backend.get(o.texture).texture.format,c=o.access;a.storageTexture={format:l,access:c}}else if(o.isSampledTexture){const l={};if(o.texture.isMultisampleRenderTargetTexture===!0&&(l.multisampled=!0),o.texture.isDepthTexture)l.sampleType=cm.Depth;else if(o.texture.isDataTexture||o.texture.isDataArrayTexture||o.texture.isData3DTexture){const c=o.texture.type;c===ui?l.sampleType=cm.SInt:c===Dr?l.sampleType=cm.UInt:c===os&&(this.backend.hasFeature("float32-filterable")?l.sampleType=cm.Float:l.sampleType=cm.UnfilterableFloat)}o.isSampledCubeTexture?l.viewDimension=Ms.Cube:o.texture.isDataArrayTexture||o.texture.isCompressedArrayTexture?l.viewDimension=Ms.TwoDArray:o.isSampledTexture3D&&(l.viewDimension=Ms.ThreeD),a.texture=l}else console.error(`WebGPUBindingUtils: Unsupported binding "${o}".`);i.push(a)}return r.createBindGroupLayout({entries:i})}createBindings(e){const{backend:t,bindGroupLayoutCache:r}=this,i=t.get(e);let s=r.get(e.bindingsReference);s===void 0&&(s=this.createBindingsLayout(e),r.set(e.bindingsReference,s));const o=this.createBindGroup(e,s);i.layout=s,i.group=o}updateBinding(e){const t=this.backend,r=t.device,i=e.buffer,s=t.get(e).buffer;r.queue.writeBuffer(s,0,i,0)}createBindGroup(e,t){const r=this.backend,i=r.device;let s=0;const o=[];for(const a of e.bindings){if(a.isUniformBuffer){const l=r.get(a);if(l.buffer===void 0){const c=a.byteLength,u=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,h=i.createBuffer({label:"bindingBuffer_"+a.name,size:c,usage:u});l.buffer=h}o.push({binding:s,resource:{buffer:l.buffer}})}else if(a.isStorageBuffer){const l=r.get(a);if(l.buffer===void 0){const c=a.attribute;l.buffer=r.get(c).buffer}o.push({binding:s,resource:{buffer:l.buffer}})}else if(a.isSampler){const l=r.get(a.texture);o.push({binding:s,resource:l.sampler})}else if(a.isSampledTexture){const l=r.get(a.texture);let c;if(l.externalTexture!==void 0)c=i.importExternalTexture({source:l.externalTexture});else{const u=a.store?1:l.texture.mipLevelCount,h=`view-${l.texture.width}-${l.texture.height}-${u}`;if(c=l[h],c===void 0){const d=$Ce.All;let f;a.isSampledCubeTexture?f=Ms.Cube:a.isSampledTexture3D?f=Ms.ThreeD:a.texture.isDataArrayTexture||a.texture.isCompressedArrayTexture?f=Ms.TwoDArray:f=Ms.TwoD,c=l[h]=l.texture.createView({aspect:d,dimension:f,mipLevelCount:u})}}o.push({binding:s,resource:c})}s++}return i.createBindGroup({label:"bindGroup_"+e.name,layout:t,entries:o})}}class IRe{constructor(e){this.backend=e}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,t){const{object:r,material:i,geometry:s,pipeline:o}=e,{vertexProgram:a,fragmentProgram:l}=o,c=this.backend,u=c.device,h=c.utils,d=c.get(o),f=[];for(const S of e.getBindings()){const E=c.get(S);f.push(E.layout)}const p=c.attributeUtils.createShaderVertexBuffers(e);let y;i.transparent===!0&&i.blending!==Vf&&(y=this._getBlending(i));let g={};i.stencilWrite===!0&&(g={compare:this._getStencilCompare(i),failOp:this._getStencilOperation(i.stencilFail),depthFailOp:this._getStencilOperation(i.stencilZFail),passOp:this._getStencilOperation(i.stencilZPass)});const m=this._getColorWriteMask(i),_=[];if(e.context.textures!==null){const S=e.context.textures;for(let E=0;E<S.length;E++){const I=h.getTextureFormatGPU(S[E]);_.push({format:I,blend:y,writeMask:m})}}else{const S=h.getCurrentColorFormat(e.context);_.push({format:S,blend:y,writeMask:m})}const v=c.get(a).module,x=c.get(l).module,b=this._getPrimitiveState(r,s,i),T=this._getDepthCompare(i),w=h.getCurrentDepthStencilFormat(e.context),M=this._getSampleCount(e.context),A={label:`renderPipeline_${i.name||i.type}_${i.id}`,vertex:Object.assign({},v,{buffers:p}),fragment:Object.assign({},x,{targets:_}),primitive:b,depthStencil:{format:w,depthWriteEnabled:i.depthWrite,depthCompare:T,stencilFront:g,stencilBack:{},stencilReadMask:i.stencilFuncMask,stencilWriteMask:i.stencilWriteMask},multisample:{count:M,alphaToCoverageEnabled:i.alphaToCoverage&&M>1},layout:u.createPipelineLayout({bindGroupLayouts:f})};if(t===null)d.pipeline=u.createRenderPipeline(A);else{const S=new Promise(E=>{u.createRenderPipelineAsync(A).then(I=>{d.pipeline=I,E()})});t.push(S)}}createBundleEncoder(e){const t=this.backend,{utils:r,device:i}=t,s=r.getCurrentDepthStencilFormat(e),o=r.getCurrentColorFormat(e),a=this._getSampleCount(e),l={label:"renderBundleEncoder",colorFormats:[o],depthStencilFormat:s,sampleCount:a};return i.createRenderBundleEncoder(l)}createComputePipeline(e,t){const r=this.backend,i=r.device,s=r.get(e.computeProgram).module,o=r.get(e),a=[];for(const l of t){const c=r.get(l);a.push(c.layout)}o.pipeline=i.createComputePipeline({compute:s,layout:i.createPipelineLayout({bindGroupLayouts:a})})}_getBlending(e){let t,r;const i=e.blending,s=e.blendSrc,o=e.blendDst,a=e.blendEquation;if(i===d6){const l=e.blendSrcAlpha!==null?e.blendSrcAlpha:s,c=e.blendDstAlpha!==null?e.blendDstAlpha:o,u=e.blendEquationAlpha!==null?e.blendEquationAlpha:a;t={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(o),operation:this._getBlendOperation(a)},r={srcFactor:this._getBlendFactor(l),dstFactor:this._getBlendFactor(c),operation:this._getBlendOperation(u)}}else{const l=e.premultipliedAlpha,c=(u,h,d,f)=>{t={srcFactor:u,dstFactor:h,operation:Kc.Add},r={srcFactor:d,dstFactor:f,operation:Kc.Add}};if(l)switch(i){case dc:c(_t.One,_t.OneMinusSrcAlpha,_t.One,_t.OneMinusSrcAlpha);break;case kx:c(_t.One,_t.One,_t.One,_t.One);break;case Ux:c(_t.Zero,_t.OneMinusSrc,_t.Zero,_t.One);break;case Bx:c(_t.Zero,_t.Src,_t.Zero,_t.SrcAlpha);break}else switch(i){case dc:c(_t.SrcAlpha,_t.OneMinusSrcAlpha,_t.One,_t.OneMinusSrcAlpha);break;case kx:c(_t.SrcAlpha,_t.One,_t.SrcAlpha,_t.One);break;case Ux:c(_t.Zero,_t.OneMinusSrc,_t.Zero,_t.One);break;case Bx:c(_t.Zero,_t.Src,_t.Zero,_t.Src);break}}if(t!==void 0&&r!==void 0)return{color:t,alpha:r};console.error("THREE.WebGPURenderer: Invalid blending: ",i)}_getBlendFactor(e){let t;switch(e){case m6:t=_t.Zero;break;case g6:t=_t.One;break;case y6:t=_t.Src;break;case v6:t=_t.OneMinusSrc;break;case zx:t=_t.SrcAlpha;break;case $x:t=_t.OneMinusSrcAlpha;break;case S6:t=_t.Dst;break;case b6:t=_t.OneMinusDstColor;break;case _6:t=_t.DstAlpha;break;case x6:t=_t.OneMinusDstAlpha;break;case w6:t=_t.SrcAlphaSaturated;break;case ZEe:t=_t.Constant;break;case QEe:t=_t.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return t}_getStencilCompare(e){let t;const r=e.stencilFunc;switch(r){case ySe:t=Nr.Never;break;case zA:t=Nr.Always;break;case vSe:t=Nr.Less;break;case xSe:t=Nr.LessEqual;break;case _Se:t=Nr.Equal;break;case wSe:t=Nr.GreaterEqual;break;case SSe:t=Nr.Greater;break;case bSe:t=Nr.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",r)}return t}_getStencilOperation(e){let t;switch(e){case ru:t=Il.Keep;break;case uSe:t=Il.Zero;break;case hSe:t=Il.Replace;break;case gSe:t=Il.Invert;break;case dSe:t=Il.IncrementClamp;break;case fSe:t=Il.DecrementClamp;break;case pSe:t=Il.IncrementWrap;break;case mSe:t=Il.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",t)}return t}_getBlendOperation(e){let t;switch(e){case Hl:t=Kc.Add;break;case f6:t=Kc.Subtract;break;case p6:t=Kc.ReverseSubtract;break;case Wxe:t=Kc.Min;break;case jxe:t=Kc.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return t}_getPrimitiveState(e,t,r){const i={},s=this.backend.utils;switch(i.topology=s.getPrimitiveTopology(e,r),t.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(i.stripIndexFormat=t.index.array instanceof Uint16Array?qf.Uint16:qf.Uint32),r.side){case Bg:i.frontFace=iM.CCW,i.cullMode=sM.Back;break;case ul:i.frontFace=iM.CCW,i.cullMode=sM.Front;break;case Ox:i.frontFace=iM.CCW,i.cullMode=sM.None;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",r.side);break}return i}_getColorWriteMask(e){return e.colorWrite===!0?UU.All:UU.None}_getDepthCompare(e){let t;if(e.depthTest===!1)t=Nr.Always;else{const r=e.depthFunc;switch(r){case T6:t=Nr.Never;break;case M6:t=Nr.Always;break;case E6:t=Nr.Less;break;case Vx:t=Nr.LessEqual;break;case C6:t=Nr.Equal;break;case A6:t=Nr.GreaterEqual;break;case R6:t=Nr.Greater;break;case N6:t=Nr.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",r)}}return t}}class LRe extends k8{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.trackTimestamp=e.trackTimestamp===!0,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new ERe(this),this.attributeUtils=new NRe(this),this.bindingUtils=new PRe(this),this.pipelineUtils=new IRe(this),this.textureUtils=new yRe(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const t=this.parameters;let r;if(t.device===void 0){const o={powerPreference:t.powerPreference},a=await navigator.gpu.requestAdapter(o);if(a===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const l=Object.values(sR),c=[];for(const h of l)a.features.has(h)&&c.push(h);const u={requiredFeatures:c,requiredLimits:t.requiredLimits};r=await a.requestDevice(u)}else r=t.device;const i=t.context!==void 0?t.context:e.domElement.getContext("webgpu");this.device=r,this.context=i;const s=t.alpha?"premultiplied":"opaque";this.trackTimestamp=this.trackTimestamp&&this.hasFeature(sR.TimestampQuery),this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:s}),this.updateSize()}get coordinateSystem(){return Xu}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const r=this.renderer;e={colorAttachments:[{view:null}],depthStencilAttachment:{view:this.textureUtils.getDepthBuffer(r.depth,r.stencil).createView()}};const i=e.colorAttachments[0];this.renderer.samples>0?i.view=this.colorBuffer.createView():i.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const t=e.colorAttachments[0];return this.renderer.samples>0?t.resolveTarget=this.context.getCurrentTexture().createView():t.view=this.context.getCurrentTexture().createView(),e}_getRenderPassDescriptor(e){const t=e.renderTarget,r=this.get(t);let i=r.descriptors;if(i===void 0||r.width!==t.width||r.height!==t.height||r.activeMipmapLevel!==t.activeMipmapLevel||r.samples!==t.samples){i={},r.descriptors=i;const a=()=>{t.removeEventListener("dispose",a),this.delete(t)};t.addEventListener("dispose",a)}const s=e.getCacheKey();let o=i[s];if(o===void 0){const a=e.textures,l=[];for(let h=0;h<a.length;h++){const d=this.get(a[h]),f=d.texture.createView({baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,dimension:Ms.TwoD});let p,y;d.msaaTexture!==void 0?(p=d.msaaTexture.createView(),y=f):(p=f,y=void 0),l.push({view:p,resolveTarget:y,loadOp:tr.Load,storeOp:Pr.Store})}const u={view:this.get(e.depthTexture).texture.createView()};o={colorAttachments:l,depthStencilAttachment:u},i[s]=o,r.width=t.width,r.height=t.height,r.samples=t.samples,r.activeMipmapLevel=t.activeMipmapLevel}return o}beginRender(e){const t=this.get(e),r=this.device,i=e.occlusionQueryCount;let s;i>0&&(t.currentOcclusionQuerySet&&t.currentOcclusionQuerySet.destroy(),t.currentOcclusionQueryBuffer&&t.currentOcclusionQueryBuffer.destroy(),t.currentOcclusionQuerySet=t.occlusionQuerySet,t.currentOcclusionQueryBuffer=t.occlusionQueryBuffer,t.currentOcclusionQueryObjects=t.occlusionQueryObjects,s=r.createQuerySet({type:"occlusion",count:i}),t.occlusionQuerySet=s,t.occlusionQueryIndex=0,t.occlusionQueryObjects=new Array(i),t.lastOcclusionObject=null);let o;e.textures===null?o=this._getDefaultRenderPassDescriptor():o=this._getRenderPassDescriptor(e),this.initTimestampQuery(e,o),o.occlusionQuerySet=s;const a=o.depthStencilAttachment;if(e.textures!==null){const u=o.colorAttachments;for(let h=0;h<u.length;h++){const d=u[h];e.clearColor?(d.clearValue=h===0?e.clearColorValue:{r:0,g:0,b:0,a:1},d.loadOp=tr.Clear,d.storeOp=Pr.Store):(d.loadOp=tr.Load,d.storeOp=Pr.Store)}}else{const u=o.colorAttachments[0];e.clearColor?(u.clearValue=e.clearColorValue,u.loadOp=tr.Clear,u.storeOp=Pr.Store):(u.loadOp=tr.Load,u.storeOp=Pr.Store)}e.depth&&(e.clearDepth?(a.depthClearValue=e.clearDepthValue,a.depthLoadOp=tr.Clear,a.depthStoreOp=Pr.Store):(a.depthLoadOp=tr.Load,a.depthStoreOp=Pr.Store)),e.stencil&&(e.clearStencil?(a.stencilClearValue=e.clearStencilValue,a.stencilLoadOp=tr.Clear,a.stencilStoreOp=Pr.Store):(a.stencilLoadOp=tr.Load,a.stencilStoreOp=Pr.Store));const l=r.createCommandEncoder({label:"renderContext_"+e.id}),c=l.beginRenderPass(o);if(t.descriptor=o,t.encoder=l,t.currentPass=c,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.renderBundles=[],e.viewport&&this.updateViewport(e),e.scissor){const{x:u,y:h,width:d,height:f}=e.scissorValue;c.setScissorRect(u,h,d,f)}}finishRender(e){const t=this.get(e),r=e.occlusionQueryCount;if(t.renderBundles.length>0&&t.currentPass.executeBundles(t.renderBundles),r>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery(),t.currentPass.end(),r>0){const i=r*8;let s=this.occludedResolveCache.get(i);s===void 0&&(s=this.device.createBuffer({size:i,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(i,s));const o=this.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,r,s,0),t.encoder.copyBufferToBuffer(s,0,o,0,i),t.occlusionQueryBuffer=o,this.resolveOccludedAsync(e)}if(this.prepareTimestampBuffer(e,t.encoder),this.device.queue.submit([t.encoder.finish()]),e.textures!==null){const i=e.textures;for(let s=0;s<i.length;s++){const o=i[s];o.generateMipmaps===!0&&this.textureUtils.generateMipmaps(o)}}}isOccluded(e,t){const r=this.get(e);return r.occluded&&r.occluded.has(t)}async resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueryBuffer:r,currentOcclusionQueryObjects:i}=t;if(r&&i){const s=new WeakSet;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueryBuffer=null,await r.mapAsync(GPUMapMode.READ);const o=r.getMappedRange(),a=new BigUint64Array(o);for(let l=0;l<i.length;l++)a[l]!==BigInt(0)&&s.add(i[l]);r.destroy(),t.occluded=s}}updateViewport(e){const{currentPass:t}=this.get(e),{x:r,y:i,width:s,height:o,minDepth:a,maxDepth:l}=e.viewportValue;t.setViewport(r,i,s,o,a,l)}clear(e,t,r,i=null){const s=this.device,o=this.renderer;let a=[],l,c,u,h;if(e){const p=this.getClearColor();if(this.renderer.alpha===!0){const y=p.a;c={r:p.r*y,g:p.g*y,b:p.b*y,a:y}}else c={r:p.r,g:p.g,b:p.b,a:p.a}}if(i===null){u=o.depth,h=o.stencil;const p=this._getDefaultRenderPassDescriptor();if(e){a=p.colorAttachments;const y=a[0];y.clearValue=c,y.loadOp=tr.Clear,y.storeOp=Pr.Store}(u||h)&&(l=p.depthStencilAttachment)}else{if(u=i.depth,h=i.stencil,e)for(const p of i.textures){const y=this.get(p),g=y.texture.createView();let m,_;y.msaaTexture!==void 0?(m=y.msaaTexture.createView(),_=g):(m=g,_=void 0),a.push({view:m,resolveTarget:_,clearValue:c,loadOp:tr.Clear,storeOp:Pr.Store})}(u||h)&&(l={view:this.get(i.depthTexture).texture.createView()})}u&&(t?(l.depthLoadOp=tr.Clear,l.depthClearValue=o.getClearDepth(),l.depthStoreOp=Pr.Store):(l.depthLoadOp=tr.Load,l.depthStoreOp=Pr.Store)),h&&(r?(l.stencilLoadOp=tr.Clear,l.stencilClearValue=o.getClearStencil(),l.stencilStoreOp=Pr.Store):(l.stencilLoadOp=tr.Load,l.stencilStoreOp=Pr.Store));const d=s.createCommandEncoder({});d.beginRenderPass({colorAttachments:a,depthStencilAttachment:l}).end(),s.queue.submit([d.finish()])}beginCompute(e){const t=this.get(e),r={};this.initTimestampQuery(e,r),t.cmdEncoderGPU=this.device.createCommandEncoder(),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass(r)}compute(e,t,r,i){const{passEncoderGPU:s}=this.get(e),o=this.get(i).pipeline;s.setPipeline(o);for(let u=0,h=r.length;u<h;u++){const d=r[u],f=this.get(d);s.setBindGroup(u,f.group)}const a=this.device.limits.maxComputeWorkgroupsPerDimension,l=this.get(t);l.dispatchSize===void 0&&(l.dispatchSize={x:0,y:1,z:1});const{dispatchSize:c}=l;t.dispatchCount>a?(c.x=Math.min(t.dispatchCount,a),c.y=Math.ceil(t.dispatchCount/a)):c.x=t.dispatchCount,s.dispatchWorkgroups(c.x,c.y,c.z)}finishCompute(e){const t=this.get(e);t.passEncoderGPU.end(),this.prepareTimestampBuffer(e,t.cmdEncoderGPU),this.device.queue.submit([t.cmdEncoderGPU.finish()])}draw(e,t){const{object:r,context:i,pipeline:s}=e,o=e.getBindings(),a=this.get(i),l=this.get(s).pipeline,c=a.currentSets,u=a.currentPass,h=e.getDrawParameters();if(h===null)return;c.pipeline!==l&&(u.setPipeline(l),c.pipeline=l);const d=c.bindingGroups;for(let g=0,m=o.length;g<m;g++){const _=o[g],v=this.get(_);d[_.index]!==_.id&&(u.setBindGroup(_.index,v.group),d[_.index]=_.id)}const f=e.getIndex(),p=f!==null;if(p===!0&&c.index!==f){const g=this.get(f).buffer,m=f.array instanceof Uint16Array?qf.Uint16:qf.Uint32;u.setIndexBuffer(g,m),c.index=f}const y=e.getVertexBuffers();for(let g=0,m=y.length;g<m;g++){const _=y[g];if(c.attributes[g]!==_){const v=this.get(_).buffer;u.setVertexBuffer(g,v),c.attributes[g]=_}}if(a.occlusionQuerySet!==void 0){const g=a.lastOcclusionObject;g!==r&&(g!==null&&g.occlusionTest===!0&&(u.endOcclusionQuery(),a.occlusionQueryIndex++),r.occlusionTest===!0&&(u.beginOcclusionQuery(a.occlusionQueryIndex),a.occlusionQueryObjects[a.occlusionQueryIndex]=r),a.lastOcclusionObject=r)}if(r.isBatchedMesh===!0){const g=r._multiDrawStarts,m=r._multiDrawCounts,_=r._multiDrawCount,v=r._multiDrawInstances,x=p?f.array.BYTES_PER_ELEMENT:1;for(let b=0;b<_;b++){const T=v?v[b]:1,w=T>1?0:b;u.drawIndexed(m[b],T,g[b]/x,0,w)}}else if(p===!0){const{vertexCount:g,instanceCount:m,firstVertex:_}=h;u.drawIndexed(g,m,_,0,0),t.update(r,g,m)}else{const{vertexCount:g,instanceCount:m,firstVertex:_}=h;u.draw(g,m,_,0),t.update(r,g,m)}}needsRenderUpdate(e){const t=this.get(e),{object:r,material:i}=e,s=this.utils,o=s.getSampleCountRenderContext(e.context),a=s.getCurrentColorSpace(e.context),l=s.getCurrentColorFormat(e.context),c=s.getCurrentDepthStencilFormat(e.context),u=s.getPrimitiveTopology(r,i);let h=!1;return(t.material!==i||t.materialVersion!==i.version||t.transparent!==i.transparent||t.blending!==i.blending||t.premultipliedAlpha!==i.premultipliedAlpha||t.blendSrc!==i.blendSrc||t.blendDst!==i.blendDst||t.blendEquation!==i.blendEquation||t.blendSrcAlpha!==i.blendSrcAlpha||t.blendDstAlpha!==i.blendDstAlpha||t.blendEquationAlpha!==i.blendEquationAlpha||t.colorWrite!==i.colorWrite||t.depthWrite!==i.depthWrite||t.depthTest!==i.depthTest||t.depthFunc!==i.depthFunc||t.stencilWrite!==i.stencilWrite||t.stencilFunc!==i.stencilFunc||t.stencilFail!==i.stencilFail||t.stencilZFail!==i.stencilZFail||t.stencilZPass!==i.stencilZPass||t.stencilFuncMask!==i.stencilFuncMask||t.stencilWriteMask!==i.stencilWriteMask||t.side!==i.side||t.alphaToCoverage!==i.alphaToCoverage||t.sampleCount!==o||t.colorSpace!==a||t.colorFormat!==l||t.depthStencilFormat!==c||t.primitiveTopology!==u||t.clippingContextCacheKey!==e.clippingContext.cacheKey)&&(t.material=i,t.materialVersion=i.version,t.transparent=i.transparent,t.blending=i.blending,t.premultipliedAlpha=i.premultipliedAlpha,t.blendSrc=i.blendSrc,t.blendDst=i.blendDst,t.blendEquation=i.blendEquation,t.blendSrcAlpha=i.blendSrcAlpha,t.blendDstAlpha=i.blendDstAlpha,t.blendEquationAlpha=i.blendEquationAlpha,t.colorWrite=i.colorWrite,t.depthWrite=i.depthWrite,t.depthTest=i.depthTest,t.depthFunc=i.depthFunc,t.stencilWrite=i.stencilWrite,t.stencilFunc=i.stencilFunc,t.stencilFail=i.stencilFail,t.stencilZFail=i.stencilZFail,t.stencilZPass=i.stencilZPass,t.stencilFuncMask=i.stencilFuncMask,t.stencilWriteMask=i.stencilWriteMask,t.side=i.side,t.alphaToCoverage=i.alphaToCoverage,t.sampleCount=o,t.colorSpace=a,t.colorFormat=l,t.depthStencilFormat=c,t.primitiveTopology=u,t.clippingContextCacheKey=e.clippingContext.cacheKey,h=!0),h}getRenderCacheKey(e){const{object:t,material:r}=e,i=this.utils,s=e.context;return[r.transparent,r.blending,r.premultipliedAlpha,r.blendSrc,r.blendDst,r.blendEquation,r.blendSrcAlpha,r.blendDstAlpha,r.blendEquationAlpha,r.colorWrite,r.depthWrite,r.depthTest,r.depthFunc,r.stencilWrite,r.stencilFunc,r.stencilFail,r.stencilZFail,r.stencilZPass,r.stencilFuncMask,r.stencilWriteMask,r.side,i.getSampleCountRenderContext(s),i.getCurrentColorSpace(s),i.getCurrentColorFormat(s),i.getCurrentDepthStencilFormat(s),i.getPrimitiveTopology(t,r),e.clippingContext.cacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,t,r,i,s,o){return this.textureUtils.copyTextureToBuffer(e,t,r,i,s,o)}initTimestampQuery(e,t){if(!this.trackTimestamp)return;const r=this.get(e);if(!r.timeStampQuerySet){const i=this.device.createQuerySet({type:"timestamp",count:2});Object.assign(t,{timestampWrites:{querySet:i,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1}}),r.timeStampQuerySet=i}}prepareTimestampBuffer(e,t){if(!this.trackTimestamp)return;const r=this.get(e),i=2*BigInt64Array.BYTES_PER_ELEMENT;r.currentTimestampQueryBuffers===void 0&&(r.currentTimestampQueryBuffers={resolveBuffer:this.device.createBuffer({label:"timestamp resolve buffer",size:i,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),resultBuffer:this.device.createBuffer({label:"timestamp result buffer",size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),isMappingPending:!1});const{resolveBuffer:s,resultBuffer:o,isMappingPending:a}=r.currentTimestampQueryBuffers;a!==!0&&(t.resolveQuerySet(r.timeStampQuerySet,0,2,s,0),t.copyBufferToBuffer(s,0,o,0,i))}async resolveTimestampAsync(e,t="render"){if(!this.trackTimestamp)return;const r=this.get(e);if(r.currentTimestampQueryBuffers===void 0)return;const{resultBuffer:i,isMappingPending:s}=r.currentTimestampQueryBuffers;s!==!0&&(r.currentTimestampQueryBuffers.isMappingPending=!0,i.mapAsync(GPUMapMode.READ).then(()=>{const o=new BigUint64Array(i.getMappedRange()),a=Number(o[1]-o[0])/1e6;this.renderer.info.updateTimestamp(t,a),i.unmap(),r.currentTimestampQueryBuffers.isMappingPending=!1}))}createNodeBuilder(e,t){return new MRe(e,t)}createProgram(e){const t=this.get(e);t.module={module:this.device.createShaderModule({code:e.code,label:e.stage}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){this.pipelineUtils.createRenderPipeline(e,t)}createComputePipeline(e,t){this.pipelineUtils.createComputePipeline(e,t)}beginBundle(e){const t=this.get(e);t._currentPass=t.currentPass,t._currentSets=t.currentSets,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,t){const r=this.get(e),s=r.currentPass.finish();this.get(t).bundleGPU=s,r.currentSets=r._currentSets,r.currentPass=r._currentPass}addBundle(e,t){this.get(e).renderBundles.push(this.get(t).bundleGPU)}createBindings(e){this.bindingUtils.createBindings(e)}updateBindings(e){this.bindingUtils.createBindings(e)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,t,r=null,i=null,s=0){let o=0,a=0,l=0,c=0,u=0,h=0,d=e.image.width,f=e.image.height;r!==null&&(c=r.x,u=r.y,h=r.z||0,d=r.width,f=r.height),i!==null&&(o=i.x,a=i.y,l=i.z||0);const p=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+t.id}),y=this.get(e).texture,g=this.get(t).texture;p.copyTextureToTexture({texture:y,mipLevel:s,origin:{x:c,y:u,z:h}},{texture:g,mipLevel:s,origin:{x:o,y:a,z:l}},[d,f,1]),this.device.queue.submit([p.finish()])}copyFramebufferToTexture(e,t,r){const i=this.get(t),{encoder:s,descriptor:o}=i;let a=null;t.renderTarget?e.isDepthTexture?a=this.get(t.depthTexture).texture:a=this.get(t.textures[0]).texture:e.isDepthTexture?a=this.textureUtils.getDepthBuffer(t.depth,t.stencil):a=this.context.getCurrentTexture();const l=this.get(e).texture;if(a.format!==l.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",a.format,l.format);return}i.currentPass.end(),s.copyTextureToTexture({texture:a,origin:{x:r.x,y:r.y,z:0}},{texture:l},[r.z,r.w]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e);for(let c=0;c<o.colorAttachments.length;c++)o.colorAttachments[c].loadOp=tr.Load;t.depth&&(o.depthStencilAttachment.depthLoadOp=tr.Load),t.stencil&&(o.depthStencilAttachment.stencilLoadOp=tr.Load),i.currentPass=s.beginRenderPass(o),i.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null}}}class DRe extends lH{constructor(e,t,r,i,s,o){super(e,t,r,i,s,o),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}class FRe extends N8{constructor(){super(),this.addMaterial(GMe,nH),this.addMaterial(y8,f2),this.addMaterial(AEe,tH),this.addMaterial(IEe,rH),this.addMaterial(OMe,Zb),this.addMaterial($Me,sH),this.addMaterial(NMe,iH),this.addMaterial(OEe,oH),this.addMaterial(MMe,h2),this.addMaterial(CMe,aH),this.addMaterial(UEe,J6),this.addMaterial(VEe,Z6),this.addMaterial(WEe,eH),this.addLight(gAe,bbe),this.addLight(yAe,Tbe),this.addLight(vAe,Ebe),this.addLight(C8,lH),this.addLight(xAe,Mbe),this.addLight(SAe,_be),this.addLight(bAe,Abe),this.addLight(_Ae,DRe),this.addToneMapping(iAe,Kxe),this.addToneMapping(sAe,Yxe),this.addToneMapping(oAe,Zxe),this.addToneMapping(lAe,Qxe),this.addToneMapping(dAe,Jxe),this.addToneMapping(fAe,eSe),this.addColorSpace(rAe,XA(Fs,ht)),this.addColorSpace(nAe,XA(ht,Fs))}}class ORe extends VAe{constructor(e={}){let t;e.forceWebGL?t=ZU:(t=LRe,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new ZU(e)));const r=new t(e);super(r,e),this.nodes.library=new FRe,this.isWebGPURenderer=!0}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Kb}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Kb);const pM={type:"change"},V2={type:"start"},G2={type:"end"},eB=1e-6,Kt={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},Av=new Ge,Ll=new Ge,kRe=new X,Rv=new X,mM=new X,rd=new bo,tB=new X,Nv=new X,gM=new X,Pv=new X;class URe extends jb{constructor(e,t=null){super(e,t),this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:Tr.ROTATE,MIDDLE:Tr.DOLLY,RIGHT:Tr.PAN},this.state=Kt.NONE,this.keyState=Kt.NONE,this.target=new X,this._lastPosition=new X,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new X,this._movePrev=new Ge,this._moveCurr=new Ge,this._lastAxis=new X,this._zoomStart=new Ge,this._zoomEnd=new Ge,this._panStart=new Ge,this._panEnd=new Ge,this._pointers=[],this._pointerPositions={},this._onPointerMove=zRe.bind(this),this._onPointerDown=BRe.bind(this),this._onPointerUp=$Re.bind(this),this._onPointerCancel=VRe.bind(this),this._onContextMenu=KRe.bind(this),this._onMouseWheel=XRe.bind(this),this._onKeyDown=HRe.bind(this),this._onKeyUp=GRe.bind(this),this._onTouchStart=YRe.bind(this),this._onTouchMove=ZRe.bind(this),this._onTouchEnd=QRe.bind(this),this._onMouseDown=WRe.bind(this),this._onMouseMove=jRe.bind(this),this._onMouseUp=qRe.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,t!==null&&(this.connect(),this.handleResize()),this.update()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){const e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>eB&&(this.dispatchEvent(pM),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>eB||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(pM),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=Kt.NONE,this.keyState=Kt.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(pM),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(Ll.copy(this._panEnd).sub(this._panStart),Ll.lengthSq()){if(this.object.isOrthographicCamera){const e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,t=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;Ll.x*=e,Ll.y*=t}Ll.multiplyScalar(this._eye.length()*this.panSpeed),Rv.copy(this._eye).cross(this.object.up).setLength(Ll.x),Rv.add(kRe.copy(this.object.up).setLength(Ll.y)),this.object.position.add(Rv),this.target.add(Rv),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(Ll.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){Pv.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=Pv.length();e?(this._eye.copy(this.object.position).sub(this.target),tB.copy(this._eye).normalize(),Nv.copy(this.object.up).normalize(),gM.crossVectors(Nv,tB).normalize(),Nv.setLength(this._moveCurr.y-this._movePrev.y),gM.setLength(this._moveCurr.x-this._movePrev.x),Pv.copy(Nv.add(gM)),mM.crossVectors(Pv,this._eye).normalize(),e*=this.rotateSpeed,rd.setFromAxisAngle(mM,e),this._eye.applyQuaternion(rd),this.object.up.applyQuaternion(rd),this._lastAxis.copy(mM),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),rd.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(rd),this.object.up.applyQuaternion(rd)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===Kt.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=tA.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,e!==1&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=tA.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,t){return Av.set((e-this.screen.left)/this.screen.width,(t-this.screen.top)/this.screen.height),Av}_getMouseOnCircle(e,t){return Av.set((e-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-t))/this.screen.width),Av}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t].pointerId==e.pointerId){this._pointers.splice(t,1);return}}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new Ge,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[t.pointerId]}_checkDistances(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}function BRe(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n))}function zRe(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function $Re(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchEnd(n):this._onMouseUp(),this._removePointer(n),this._pointers.length===0&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function VRe(n){this._removePointer(n)}function GRe(){this.enabled!==!1&&(this.keyState=Kt.NONE,window.addEventListener("keydown",this._onKeyDown))}function HRe(n){this.enabled!==!1&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===Kt.NONE&&(n.code===this.keys[Kt.ROTATE]&&!this.noRotate?this.keyState=Kt.ROTATE:n.code===this.keys[Kt.ZOOM]&&!this.noZoom?this.keyState=Kt.ZOOM:n.code===this.keys[Kt.PAN]&&!this.noPan&&(this.keyState=Kt.PAN)))}function WRe(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Tr.DOLLY:this.state=Kt.ZOOM;break;case Tr.ROTATE:this.state=Kt.ROTATE;break;case Tr.PAN:this.state=Kt.PAN;break;default:this.state=Kt.NONE}const t=this.keyState!==Kt.NONE?this.keyState:this.state;t===Kt.ROTATE&&!this.noRotate?(this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr)):t===Kt.ZOOM&&!this.noZoom?(this._zoomStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._zoomEnd.copy(this._zoomStart)):t===Kt.PAN&&!this.noPan&&(this._panStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(V2)}function jRe(n){const e=this.keyState!==Kt.NONE?this.keyState:this.state;e===Kt.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY))):e===Kt.ZOOM&&!this.noZoom?this._zoomEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY)):e===Kt.PAN&&!this.noPan&&this._panEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY))}function qRe(){this.state=Kt.NONE,this.dispatchEvent(G2)}function XRe(n){if(this.enabled!==!1&&this.noZoom!==!0){switch(n.preventDefault(),n.deltaMode){case 2:this._zoomStart.y-=n.deltaY*.025;break;case 1:this._zoomStart.y-=n.deltaY*.01;break;default:this._zoomStart.y-=n.deltaY*25e-5;break}this.dispatchEvent(V2),this.dispatchEvent(G2)}}function KRe(n){this.enabled!==!1&&n.preventDefault()}function YRe(n){switch(this._trackPointer(n),this._pointers.length){case 1:this.state=Kt.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this.state=Kt.TOUCH_ZOOM_PAN;const e=this._pointers[0].pageX-this._pointers[1].pageX,t=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+t*t);const r=(this._pointers[0].pageX+this._pointers[1].pageX)/2,i=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(r,i)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(V2)}function ZRe(n){switch(this._trackPointer(n),this._pointers.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY));break;default:const e=this._getSecondPointerPosition(n),t=n.pageX-e.x,r=n.pageY-e.y;this._touchZoomDistanceEnd=Math.sqrt(t*t+r*r);const i=(n.pageX+e.x)/2,s=(n.pageY+e.y)/2;this._panEnd.copy(this._getMouseOnScreen(i,s));break}}function QRe(n){switch(this._pointers.length){case 0:this.state=Kt.NONE;break;case 1:this.state=Kt.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=Kt.TOUCH_ZOOM_PAN;for(let e=0;e<this._pointers.length;e++)if(this._pointers[e].pointerId!==n.pointerId){const t=this._pointerPositions[this._pointers[e].pointerId];this._moveCurr.copy(this._getMouseOnCircle(t.x,t.y)),this._movePrev.copy(this._moveCurr);break}break}this.dispatchEvent(G2)}const nB={type:"change"},H2={type:"start"},B8={type:"end"},Iv=new Vb,rB=new wa,JRe=Math.cos(70*tA.DEG2RAD),fr=new X,Si=2*Math.PI,dn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},yM=1e-6;class eNe extends jb{constructor(e,t=null){super(e,t),this.state=dn.NONE,this.enabled=!0,this.target=new X,this.cursor=new X,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Tr.ROTATE,MIDDLE:Tr.DOLLY,RIGHT:Tr.PAN},this.touches={ONE:ka.ROTATE,TWO:ka.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new X,this._lastQuaternion=new bo,this._lastTargetPosition=new X,this._quat=new bo().setFromUnitVectors(e.up,new X(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new sA,this._sphericalDelta=new sA,this._scale=1,this._panOffset=new X,this._rotateStart=new Ge,this._rotateEnd=new Ge,this._rotateDelta=new Ge,this._panStart=new Ge,this._panEnd=new Ge,this._panDelta=new Ge,this._dollyStart=new Ge,this._dollyEnd=new Ge,this._dollyDelta=new Ge,this._dollyDirection=new X,this._mouse=new Ge,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=nNe.bind(this),this._onPointerDown=tNe.bind(this),this._onPointerUp=rNe.bind(this),this._onContextMenu=uNe.bind(this),this._onMouseWheel=oNe.bind(this),this._onKeyDown=aNe.bind(this),this._onTouchStart=lNe.bind(this),this._onTouchMove=cNe.bind(this),this._onMouseDown=iNe.bind(this),this._onMouseMove=sNe.bind(this),this._interceptControlDown=hNe.bind(this),this._interceptControlUp=dNe.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(nB),this.update(),this.state=dn.NONE}update(e=null){const t=this.object.position;fr.copy(t).sub(this.target),fr.applyQuaternion(this._quat),this._spherical.setFromVector3(fr),this.autoRotate&&this.state===dn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let r=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(r)&&isFinite(i)&&(r<-Math.PI?r+=Si:r>Math.PI&&(r-=Si),i<-Math.PI?i+=Si:i>Math.PI&&(i-=Si),r<=i?this._spherical.theta=Math.max(r,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(r+i)/2?Math.max(r,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if(fr.setFromSpherical(this._spherical),fr.applyQuaternion(this._quatInverse),t.copy(this.target).add(fr),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const a=fr.length();o=this._clampDistance(a*this._scale);const l=a-o;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),s=!!l}else if(this.object.isOrthographicCamera){const a=new X(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=l!==this.object.zoom;const c=new X(this._mouse.x,this._mouse.y,0);c.unproject(this.object),this.object.position.sub(c).add(a),this.object.updateMatrixWorld(),o=fr.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(Iv.origin.copy(this.object.position),Iv.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Iv.direction))<JRe?this.object.lookAt(this.target):(rB.setFromNormalAndCoplanarPoint(this.object.up,this.target),Iv.intersectPlane(rB,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>yM||8*(1-this._lastQuaternion.dot(this.object.quaternion))>yM||this._lastTargetPosition.distanceToSquared(this.target)>yM?(this.dispatchEvent(nB),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Si/60*this.autoRotateSpeed*e:Si/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){fr.setFromMatrixColumn(t,0),fr.multiplyScalar(-e),this._panOffset.add(fr)}_panUp(e,t){this.screenSpacePanning===!0?fr.setFromMatrixColumn(t,1):(fr.setFromMatrixColumn(t,0),fr.crossVectors(this.object.up,fr)),fr.multiplyScalar(e),this._panOffset.add(fr)}_pan(e,t){const r=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;fr.copy(i).sub(this.target);let s=fr.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/r.clientHeight,this.object.matrix),this._panUp(2*t*s/r.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const r=this.domElement.getBoundingClientRect(),i=e-r.left,s=t-r.top,o=r.width,a=r.height;this._mouse.x=i/o*2-1,this._mouse.y=-(s/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Si*this._rotateDelta.x/t.clientHeight),this._rotateUp(Si*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(Si*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(-Si*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(Si*this.rotateSpeed/this.domElement.clientHeight):this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(-Si*this.rotateSpeed/this.domElement.clientHeight):this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._rotateStart.set(r,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panStart.set(r,i)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),s=.5*(e.pageY+r.y);this._rotateEnd.set(i,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(Si*this._rotateDelta.x/t.clientHeight),this._rotateUp(Si*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panEnd.set(r,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(o,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new Ge,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,r={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:r.deltaY*=16;break;case 2:r.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(r.deltaY*=10),r}}function tNe(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function nNe(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function rNe(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(B8),this.state=dn.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function iNe(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Tr.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=dn.DOLLY;break;case Tr.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=dn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=dn.ROTATE}break;case Tr.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=dn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=dn.PAN}break;default:this.state=dn.NONE}this.state!==dn.NONE&&this.dispatchEvent(H2)}function sNe(n){switch(this.state){case dn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case dn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case dn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function oNe(n){this.enabled===!1||this.enableZoom===!1||this.state!==dn.NONE||(n.preventDefault(),this.dispatchEvent(H2),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(B8))}function aNe(n){this.enabled===!1||this.enablePan===!1||this._handleKeyDown(n)}function lNe(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case ka.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=dn.TOUCH_ROTATE;break;case ka.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=dn.TOUCH_PAN;break;default:this.state=dn.NONE}break;case 2:switch(this.touches.TWO){case ka.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=dn.TOUCH_DOLLY_PAN;break;case ka.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=dn.TOUCH_DOLLY_ROTATE;break;default:this.state=dn.NONE}break;default:this.state=dn.NONE}this.state!==dn.NONE&&this.dispatchEvent(H2)}function cNe(n){switch(this._trackPointer(n),this.state){case dn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case dn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case dn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case dn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=dn.NONE}}function uNe(n){this.enabled!==!1&&n.preventDefault()}function hNe(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function dNe(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const fNe={type:"change"},iB=1e-6,sB=new bo;class pNe extends jb{constructor(e,t=null){super(e,t),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new X(0,0,0),this._rotationVector=new X(0,0,0),this._lastQuaternion=new bo,this._lastPosition=new X,this._status=0,this._onKeyDown=mNe.bind(this),this._onKeyUp=gNe.bind(this),this._onPointerMove=vNe.bind(this),this._onPointerDown=yNe.bind(this),this._onPointerUp=_Ne.bind(this),this._onPointerCancel=xNe.bind(this),this._onContextMenu=SNe.bind(this),t!==null&&this.connect()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(this.enabled===!1)return;const t=this.object,r=e*this.movementSpeed,i=e*this.rollSpeed;t.translateX(this._moveVector.x*r),t.translateY(this._moveVector.y*r),t.translateZ(this._moveVector.z*r),sB.set(this._rotationVector.x*i,this._rotationVector.y*i,this._rotationVector.z*i,1).normalize(),t.quaternion.multiply(sB),(this._lastPosition.distanceToSquared(t.position)>iB||8*(1-this._lastQuaternion.dot(t.quaternion))>iB)&&(this.dispatchEvent(fNe),this._lastQuaternion.copy(t.quaternion),this._lastPosition.copy(t.position))}_updateMovementVector(){const e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}function mNe(n){if(!(n.altKey||this.enabled===!1)){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1;break}this._updateMovementVector(),this._updateRotationVector()}}function gNe(n){if(this.enabled!==!1){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0;break}this._updateMovementVector(),this._updateRotationVector()}}function yNe(n){if(this.enabled!==!1)if(this.dragToLook)this._status++;else{switch(n.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1;break}this._updateMovementVector()}}function vNe(n){if(this.enabled!==!1&&(!this.dragToLook||this._status>0)){const e=this._getContainerDimensions(),t=e.size[0]/2,r=e.size[1]/2;this._moveState.yawLeft=-(n.pageX-e.offset[0]-t)/t,this._moveState.pitchDown=(n.pageY-e.offset[1]-r)/r,this._updateRotationVector()}}function _Ne(n){if(this.enabled!==!1){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(n.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0;break}this._updateMovementVector()}this._updateRotationVector()}}function xNe(){this.enabled!==!1&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function SNe(n){this.enabled!==!1&&n.preventDefault()}const bNe={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class p1{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const wNe=new FP(-1,1,1,-1,0,1);class TNe extends Gs{constructor(){super(),this.setAttribute("position",new gr([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new gr([0,2,0,0,2,0],2))}}const MNe=new TNe;class ENe{constructor(e){this._mesh=new Is(MNe,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,wNe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class CNe extends p1{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof Xo?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=YV.clone(e.uniforms),this.material=new Xo({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new ENe(this.material)}render(e,t,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class oB extends p1{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,r){const i=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),s.buffers.stencil.setFunc(i.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(i.EQUAL,1,4294967295),s.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),s.buffers.stencil.setLocked(!0)}}class ANe extends p1{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class RNe{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const r=e.getSize(new Ge);this._width=r.width,this._height=r.height,t=new vc(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:sp}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new CNe(bNe),this.copyPass.material.blending=Ha,this.clock=new mG}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let r=!1;for(let i=0,s=this.passes.length;i<s;i++){const o=this.passes[i];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),o.needsSwap){if(r){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}oB!==void 0&&(o instanceof oB?r=!0:o instanceof ANe&&(r=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new Ge);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class NNe extends p1{constructor(e,t,r=null,i=null,s=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Ot}render(e,t,r){const i=e.autoClear;e.autoClear=!1;let s,o;this.overrideMaterial!==null&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=o),e.autoClear=i}}function aR(n){return aR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},aR(n)}function PNe(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}function z8(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z8=function(){return!!n})()}function INe(n,e,t){if(z8())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(n.bind.apply(n,r));return t&&Pg(i,t.prototype),i}function lR(n){var e=typeof Map=="function"?new Map:void 0;return lR=function(r){if(r===null||!PNe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return INe(r,arguments,aR(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Pg(i,r)},lR(n)}var Go=function(n){GN(e,n);function e(t){var r;return r=n.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,v$(r)}return e}(lR(Error));function vM(n){return Math.round(n*255)}function LNe(n,e,t){return vM(n)+","+vM(e)+","+vM(t)}function Kg(n,e,t,r){if(r===void 0&&(r=LNe),e===0)return r(t,t,t);var i=(n%360+360)%360/60,s=(1-Math.abs(2*t-1))*e,o=s*(1-Math.abs(i%2-1)),a=0,l=0,c=0;i>=0&&i<1?(a=s,l=o):i>=1&&i<2?(a=o,l=s):i>=2&&i<3?(l=s,c=o):i>=3&&i<4?(l=o,c=s):i>=4&&i<5?(a=o,c=s):i>=5&&i<6&&(a=s,c=o);var u=t-s/2,h=a+u,d=l+u,f=c+u;return r(h,d,f)}var aB={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function DNe(n){if(typeof n!="string")return n;var e=n.toLowerCase();return aB[e]?"#"+aB[e]:n}var FNe=/^#[a-fA-F0-9]{6}$/,ONe=/^#[a-fA-F0-9]{8}$/,kNe=/^#[a-fA-F0-9]{3}$/,UNe=/^#[a-fA-F0-9]{4}$/,_M=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,BNe=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,zNe=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,$Ne=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function Qu(n){if(typeof n!="string")throw new Go(3);var e=DNe(n);if(e.match(FNe))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(ONe)){var t=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:t}}if(e.match(kNe))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(UNe)){var r=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:r}}var i=_M.exec(e);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var s=BNe.exec(e.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])>1?parseFloat(""+s[4])/100:parseFloat(""+s[4])};var o=zNe.exec(e);if(o){var a=parseInt(""+o[1],10),l=parseInt(""+o[2],10)/100,c=parseInt(""+o[3],10)/100,u="rgb("+Kg(a,l,c)+")",h=_M.exec(u);if(!h)throw new Go(4,e,u);return{red:parseInt(""+h[1],10),green:parseInt(""+h[2],10),blue:parseInt(""+h[3],10)}}var d=$Ne.exec(e.substring(0,50));if(d){var f=parseInt(""+d[1],10),p=parseInt(""+d[2],10)/100,y=parseInt(""+d[3],10)/100,g="rgb("+Kg(f,p,y)+")",m=_M.exec(g);if(!m)throw new Go(4,e,g);return{red:parseInt(""+m[1],10),green:parseInt(""+m[2],10),blue:parseInt(""+m[3],10),alpha:parseFloat(""+d[4])>1?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new Go(5)}function VNe(n){var e=n.red/255,t=n.green/255,r=n.blue/255,i=Math.max(e,t,r),s=Math.min(e,t,r),o=(i+s)/2;if(i===s)return n.alpha!==void 0?{hue:0,saturation:0,lightness:o,alpha:n.alpha}:{hue:0,saturation:0,lightness:o};var a,l=i-s,c=o>.5?l/(2-i-s):l/(i+s);switch(i){case e:a=(t-r)/l+(t<r?6:0);break;case t:a=(r-e)/l+2;break;default:a=(e-t)/l+4;break}return a*=60,n.alpha!==void 0?{hue:a,saturation:c,lightness:o,alpha:n.alpha}:{hue:a,saturation:c,lightness:o}}function Fc(n){return VNe(Qu(n))}var GNe=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},cR=GNe;function ou(n){var e=n.toString(16);return e.length===1?"0"+e:e}function xM(n){return ou(Math.round(n*255))}function HNe(n,e,t){return cR("#"+xM(n)+xM(e)+xM(t))}function rS(n,e,t){return Kg(n,e,t,HNe)}function WNe(n,e,t){if(typeof n=="number"&&typeof e=="number"&&typeof t=="number")return rS(n,e,t);if(typeof n=="object"&&e===void 0&&t===void 0)return rS(n.hue,n.saturation,n.lightness);throw new Go(1)}function jNe(n,e,t,r){if(typeof n=="number"&&typeof e=="number"&&typeof t=="number"&&typeof r=="number")return r>=1?rS(n,e,t):"rgba("+Kg(n,e,t)+","+r+")";if(typeof n=="object"&&e===void 0&&t===void 0&&r===void 0)return n.alpha>=1?rS(n.hue,n.saturation,n.lightness):"rgba("+Kg(n.hue,n.saturation,n.lightness)+","+n.alpha+")";throw new Go(2)}function uR(n,e,t){if(typeof n=="number"&&typeof e=="number"&&typeof t=="number")return cR("#"+ou(n)+ou(e)+ou(t));if(typeof n=="object"&&e===void 0&&t===void 0)return cR("#"+ou(n.red)+ou(n.green)+ou(n.blue));throw new Go(6)}function m1(n,e,t,r){if(typeof n=="string"&&typeof e=="number"){var i=Qu(n);return"rgba("+i.red+","+i.green+","+i.blue+","+e+")"}else{if(typeof n=="number"&&typeof e=="number"&&typeof t=="number"&&typeof r=="number")return r>=1?uR(n,e,t):"rgba("+n+","+e+","+t+","+r+")";if(typeof n=="object"&&e===void 0&&t===void 0&&r===void 0)return n.alpha>=1?uR(n.red,n.green,n.blue):"rgba("+n.red+","+n.green+","+n.blue+","+n.alpha+")"}throw new Go(7)}var qNe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},XNe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},KNe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},YNe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"};function Oc(n){if(typeof n!="object")throw new Go(8);if(XNe(n))return m1(n);if(qNe(n))return uR(n);if(YNe(n))return jNe(n);if(KNe(n))return WNe(n);throw new Go(8)}function $8(n,e,t){return function(){var i=t.concat(Array.prototype.slice.call(arguments));return i.length>=e?n.apply(this,i):$8(n,e,i)}}function ys(n){return $8(n,n.length,[])}function ZNe(n,e){if(e==="transparent")return e;var t=Fc(e);return Oc(ni({},t,{hue:t.hue+parseFloat(n)}))}ys(ZNe);function mp(n,e,t){return Math.max(n,Math.min(e,t))}function QNe(n,e){if(e==="transparent")return e;var t=Fc(e);return Oc(ni({},t,{lightness:mp(0,1,t.lightness-parseFloat(n))}))}ys(QNe);function JNe(n,e){if(e==="transparent")return e;var t=Fc(e);return Oc(ni({},t,{saturation:mp(0,1,t.saturation-parseFloat(n))}))}ys(JNe);function ePe(n,e){if(e==="transparent")return e;var t=Fc(e);return Oc(ni({},t,{lightness:mp(0,1,t.lightness+parseFloat(n))}))}ys(ePe);function tPe(n,e,t){if(e==="transparent")return t;if(t==="transparent")return e;if(n===0)return t;var r=Qu(e),i=ni({},r,{alpha:typeof r.alpha=="number"?r.alpha:1}),s=Qu(t),o=ni({},s,{alpha:typeof s.alpha=="number"?s.alpha:1}),a=i.alpha-o.alpha,l=parseFloat(n)*2-1,c=l*a===-1?l:l+a,u=1+l*a,h=(c/u+1)/2,d=1-h,f={red:Math.floor(i.red*h+o.red*d),green:Math.floor(i.green*h+o.green*d),blue:Math.floor(i.blue*h+o.blue*d),alpha:i.alpha*parseFloat(n)+o.alpha*(1-parseFloat(n))};return m1(f)}var nPe=ys(tPe),V8=nPe;function rPe(n,e){if(e==="transparent")return e;var t=Qu(e),r=typeof t.alpha=="number"?t.alpha:1,i=ni({},t,{alpha:mp(0,1,(r*100+parseFloat(n)*100)/100)});return m1(i)}var iPe=ys(rPe),sPe=iPe;function oPe(n,e){if(e==="transparent")return e;var t=Fc(e);return Oc(ni({},t,{saturation:mp(0,1,t.saturation+parseFloat(n))}))}ys(oPe);function aPe(n,e){return e==="transparent"?e:Oc(ni({},Fc(e),{hue:parseFloat(n)}))}ys(aPe);function lPe(n,e){return e==="transparent"?e:Oc(ni({},Fc(e),{lightness:parseFloat(n)}))}ys(lPe);function cPe(n,e){return e==="transparent"?e:Oc(ni({},Fc(e),{saturation:parseFloat(n)}))}ys(cPe);function uPe(n,e){return e==="transparent"?e:V8(parseFloat(n),"rgb(0, 0, 0)",e)}ys(uPe);function hPe(n,e){return e==="transparent"?e:V8(parseFloat(n),"rgb(255, 255, 255)",e)}ys(hPe);function dPe(n,e){if(e==="transparent")return e;var t=Qu(e),r=typeof t.alpha=="number"?t.alpha:1,i=ni({},t,{alpha:mp(0,1,+(r*100-parseFloat(n)*100).toFixed(2)/100)});return m1(i)}ys(dPe);var Du=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Du.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Du.Bounce.In(n*2)*.5:Du.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),Im=function(){return performance.now()},G8=function(){function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var i=0,s=t;i<s.length;i++){var o=s[i];(e=o._group)===null||e===void 0||e.remove(o),o._group=this,this._tweens[o.getId()]=o,this._tweensAddedDuringUpdate[o.getId()]=o}},n.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,i=e;r<i.length;r++){var s=i[r];s._group=void 0,delete this._tweens[s.getId()],delete this._tweensAddedDuringUpdate[s.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,t){e===void 0&&(e=Im()),t===void 0&&(t=!0);var r=Object.keys(this._tweens);if(r.length!==0)for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var s=this._tweens[r[i]],o=!t;s&&s.update(e,o)===!1&&!t&&this.remove(s)}r=Object.keys(this._tweensAddedDuringUpdate)}},n}(),Pd={Linear:function(n,e){var t=n.length-1,r=t*e,i=Math.floor(r),s=Pd.Utils.Linear;return e<0?s(n[0],n[1],r):e>1?s(n[t],n[t-1],t-r):s(n[i],n[i+1>t?t:i+1],r-i)},Bezier:function(n,e){for(var t=0,r=n.length-1,i=Math.pow,s=Pd.Utils.Bernstein,o=0;o<=r;o++)t+=i(1-e,r-o)*i(e,o)*n[o]*s(r,o);return t},CatmullRom:function(n,e){var t=n.length-1,r=t*e,i=Math.floor(r),s=Pd.Utils.CatmullRom;return n[0]===n[t]?(e<0&&(i=Math.floor(r=t*(1+e))),s(n[(i-1+t)%t],n[i],n[(i+1)%t],n[(i+2)%t],r-i)):e<0?n[0]-(s(n[0],n[0],n[1],n[1],-r)-n[0]):e>1?n[t]-(s(n[t],n[t],n[t-1],n[t-1],r-t)-n[t]):s(n[i?i-1:0],n[i],n[t<i+1?t:i+1],n[t<i+2?t:i+2],r-i)},Utils:{Linear:function(n,e,t){return(e-n)*t+n},Bernstein:function(n,e){var t=Pd.Utils.Factorial;return t(n)/t(e)/t(n-e)},Factorial:function(){var n=[1];return function(e){var t=1;if(n[e])return n[e];for(var r=e;r>1;r--)t*=r;return n[e]=t,t}}(),CatmullRom:function(n,e,t,r,i){var s=(t-n)*.5,o=(r-e)*.5,a=i*i,l=i*a;return(2*e-2*t+s+o)*l+(-3*e+3*t-2*s-o)*a+s*i+e}}},fPe=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),hR=new G8,lB=function(){function n(e,t){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Du.Linear.None,this._interpolationFunction=Pd.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=fPe.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof t=="object"?(this._group=t,t.add(this)):t===!0&&(this._group=hR,hR.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,t){if(e===void 0&&(e=Im()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var r in this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var s in this._valuesEnd)i[s]=this._valuesEnd[s];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,t,r,i,s){for(var o in r){var a=e[o],l=Array.isArray(a),c=l?"array":typeof a,u=!l&&Array.isArray(r[o]);if(!(c==="undefined"||c==="function")){if(u){var h=r[o];if(h.length===0)continue;for(var d=[a],f=0,p=h.length;f<p;f+=1){var y=this._handleRelativeValue(a,h[f]);if(isNaN(y)){u=!1,console.warn("Found invalid interpolation list. Skipping.");break}d.push(y)}u&&(r[o]=d)}if((c==="object"||l)&&a&&!u){t[o]=l?[]:{};var g=a;for(var m in g)t[o][m]=g[m];i[o]=l?[]:{};var h=r[o];if(!this._isDynamic){var _={};for(var m in h)_[m]=h[m];r[o]=h=_}this._setupProperties(g,t[o],h,i[o],s)}else(typeof t[o]>"u"||s)&&(t[o]=a),l||(t[o]*=1),u?i[o]=r[o].slice().reverse():i[o]=t[o]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=Im()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=Im()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=Du.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=Pd.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,t){var r=this,i;if(e===void 0&&(e=Im()),t===void 0&&(t=n.autoStartOnUpdate),this._isPaused)return!0;var s;if(!this._goToEnd&&!this._isPlaying)if(t)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=e-this._startTime,a=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),l=this._duration+this._repeat*a,c=function(){if(r._duration===0||o>l)return 1;var y=Math.trunc(o/a),g=o-y*a,m=Math.min(g/r._duration,1);return m===0&&o===r._duration?1:m},u=c(),h=this._easingFunction(u);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,u),this._duration===0||o>=this._duration)if(this._repeat>0){var d=Math.min(Math.trunc((o-this._duration)/a)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=d);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=a*d,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var f=0,p=this._chainedTweens.length;f<p;f++)this._chainedTweens[f].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,t,r,i){for(var s in r)if(t[s]!==void 0){var o=t[s]||0,a=r[s],l=Array.isArray(e[s]),c=Array.isArray(a),u=!l&&c;u?e[s]=this._interpolationFunction(a,i):typeof a=="object"&&a?this._updateProperties(e[s],o,a,i):(a=this._handleRelativeValue(o,a),typeof a=="number"&&(e[s]=o+(a-o)*i))}},n.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},n.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],r=this._valuesEnd[e];typeof r=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},n.autoStartOnUpdate=!1,n}(),Qo=hR;Qo.getAll.bind(Qo);Qo.removeAll.bind(Qo);Qo.add.bind(Qo);Qo.remove.bind(Qo);Qo.update.bind(Qo);function pPe(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}var mPe=`.scene-nav-info {
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
}

.scene-tooltip {
  top: 0;
  color: lavender;
  font-size: 15px;
}

.scene-nav-info, .scene-tooltip {
  position: absolute;
  font-family: sans-serif;
  pointer-events: none;
  user-select: none;
}

.scene-container canvas:focus {
  outline: none;
}`;pPe(mPe);function dR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function gPe(n){if(Array.isArray(n))return n}function yPe(n){if(Array.isArray(n))return dR(n)}function vPe(n,e,t){return(e=MPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _Pe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function xPe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function SPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wPe(n,e){return gPe(n)||xPe(n,e)||H8(n,e)||SPe()}function dm(n){return yPe(n)||_Pe(n)||H8(n)||bPe()}function TPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function MPe(n){var e=TPe(n,"string");return typeof e=="symbol"?e:e+""}function H8(n,e){if(n){if(typeof n=="string")return dR(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?dR(n,e):void 0}}var Nn=window.THREE?window.THREE:{WebGLRenderer:bge,Scene:wge,PerspectiveCamera:Rs,Raycaster:gG,SRGBColorSpace:Ts,TextureLoader:fG,Vector2:Ge,Vector3:X,Box3:sh,Color:Ot,Mesh:Is,SphereGeometry:hG,MeshBasicMaterial:IP,BackSide:pi,EventDispatcher:Ic,MOUSE:Tr,Quaternion:bo,Spherical:sA,Clock:mG},W8=QP({props:{width:{default:window.innerWidth,onChange:function(e,t,r){isNaN(e)&&(t.width=r)}},height:{default:window.innerHeight,onChange:function(e,t,r){isNaN(e)&&(t.height=r)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null,t.toolTipElem&&(t.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){if(e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(s){return s.render(e.scene,e.camera)}),e.enablePointerInteraction){var t=null;if(e.hoverDuringDrag||!e.isPointerDragging){var r=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y).filter(function(s){return e.hoverFilter(s.object)}).sort(function(s,o){return e.hoverOrderComparator(s.object,o.object)}),i=r.length?r[0]:null;t=i?i.object:null,e.intersectionPoint=i?i.point:null}t!==e.hoverObj&&(e.onHover(t,e.hoverObj),e.toolTipElem.innerHTML=t&&Wt(e.tooltipContent)(t)||"",e.hoverObj=t)}e.tweenGroup.update()}return this},getPointerPos:function(e){var t=e.pointerPos,r=t.x,i=t.y;return{x:r,y:i}},cameraPosition:function(e,t,r,i){var s=e.camera;if(t&&e.initialised){var o=t,a=r||{x:0,y:0,z:0};if(!i)u(o),h(a);else{var l=Object.assign({},s.position),c=d();e.tweenGroup.add(new lB(l).to(o,i).easing(Du.Quadratic.Out).onUpdate(u).start()),e.tweenGroup.add(new lB(c).to(a,i/3).easing(Du.Quadratic.Out).onUpdate(h).start())}return this}return Object.assign({},s.position,{lookAt:d()});function u(f){var p=f.x,y=f.y,g=f.z;p!==void 0&&(s.position.x=p),y!==void 0&&(s.position.y=y),g!==void 0&&(s.position.z=g)}function h(f){var p=new Nn.Vector3(f.x,f.y,f.z);e.controls.target?e.controls.target=p:s.lookAt(p)}function d(){return Object.assign(new Nn.Vector3(0,0,-1e3).applyQuaternion(s.quaternion).add(s.position))}},zoomToFit:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,i=arguments.length,s=new Array(i>3?i-3:0),o=3;o<i;o++)s[o-3]=arguments[o];return this.fitToBbox(this.getBbox.apply(this,s),t,r)},fitToBbox:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10,s=e.camera;if(t){var o=new Nn.Vector3(0,0,0),a=Math.max.apply(Math,dm(Object.entries(t).map(function(f){var p=wPe(f,2),y=p[0],g=p[1];return Math.max.apply(Math,dm(g.map(function(m){return Math.abs(o[y]-m)})))})))*2,l=(1-i*2/e.height)*s.fov,c=a/Math.atan(l*Math.PI/180),u=c/s.aspect,h=Math.max(c,u);if(h>0){var d=o.clone().sub(s.position).normalize().multiplyScalar(-h);this.cameraPosition(d,o,r)}}return this},getBbox:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},r=new Nn.Box3(new Nn.Vector3(0,0,0),new Nn.Vector3(0,0,0)),i=e.objects.filter(t);return i.length?(i.forEach(function(s){return r.expandByObject(s)}),Object.assign.apply(Object,dm(["x","y","z"].map(function(s){return vPe({},s,[r.min[s],r.max[s]])})))):null},getScreenCoords:function(e,t,r,i){var s=new Nn.Vector3(t,r,i);return s.project(this.camera()),{x:(s.x+1)*e.width/2,y:-(s.y-1)*e.height/2}},getSceneCoords:function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=new Nn.Vector2(t/e.width*2-1,-(r/e.height)*2+1),o=new Nn.Raycaster;return o.setFromCamera(s,e.camera),Object.assign({},o.ray.at(i,new Nn.Vector3))},intersectingObjects:function(e,t,r){var i=new Nn.Vector2(t/e.width*2-1,-(r/e.height)*2+1),s=new Nn.Raycaster;return s.params.Line.threshold=e.lineHoverPrecision,s.setFromCamera(i,e.camera),s.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new Nn.Scene,camera:new Nn.PerspectiveCamera,clock:new Nn.Clock,tweenGroup:new G8}},init:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.controlType,s=i===void 0?"trackball":i,o=r.useWebGPU,a=o===void 0?!1:o,l=r.rendererConfig,c=l===void 0?{}:l,u=r.extraRenderers,h=u===void 0?[]:u,d=r.waitForLoadComplete,f=d===void 0?!0:d;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.className="scene-container",t.container.style.position="relative",t.container.appendChild(t.navInfo=document.createElement("div")),t.navInfo.className="scene-nav-info",t.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[s]||"",t.navInfo.style.display=t.showNavInfo?null:"none",t.toolTipElem=document.createElement("div"),t.toolTipElem.classList.add("scene-tooltip"),t.container.appendChild(t.toolTipElem),t.pointerPos=new Nn.Vector2,t.pointerPos.x=-2,t.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(p){return t.container.addEventListener(p,function(y){if(p==="pointerdown"&&(t.isPointerPressed=!0),!t.isPointerDragging&&y.type==="pointermove"&&(y.pressure>0||t.isPointerPressed)&&(y.pointerType!=="touch"||y.movementX===void 0||[y.movementX,y.movementY].some(function(_){return Math.abs(_)>1}))&&(t.isPointerDragging=!0),t.enablePointerInteraction){var g=m(t.container);t.pointerPos.x=y.pageX-g.left,t.pointerPos.y=y.pageY-g.top,t.toolTipElem.style.top="".concat(t.pointerPos.y,"px"),t.toolTipElem.style.left="".concat(t.pointerPos.x,"px"),t.toolTipElem.style.transform="translate(-".concat(t.pointerPos.x/t.width*100,"%, ").concat(t.height-t.pointerPos.y<100?"calc(-100% - 8px)":"21px",")")}function m(_){var v=_.getBoundingClientRect(),x=window.pageXOffset||document.documentElement.scrollLeft,b=window.pageYOffset||document.documentElement.scrollTop;return{top:v.top+b,left:v.left+x}}},{passive:!0})}),t.container.addEventListener("pointerup",function(p){t.isPointerPressed=!1,!(t.isPointerDragging&&(t.isPointerDragging=!1,!t.clickAfterDrag))&&requestAnimationFrame(function(){p.button===0&&t.onClick(t.hoverObj||null,p,t.intersectionPoint),p.button===2&&t.onRightClick&&t.onRightClick(t.hoverObj||null,p,t.intersectionPoint)})},{passive:!0,capture:!0}),t.container.addEventListener("contextmenu",function(p){t.onRightClick&&p.preventDefault()}),t.renderer=new(a?ORe:Nn.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},c)),t.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),t.container.appendChild(t.renderer.domElement),t.extraRenderers=h,t.extraRenderers.forEach(function(p){p.domElement.style.position="absolute",p.domElement.style.top="0px",p.domElement.style.pointerEvents="none",t.container.appendChild(p.domElement)}),t.postProcessingComposer=new RNe(t.renderer),t.postProcessingComposer.addPass(new NNe(t.scene,t.camera)),t.controls=new{trackball:URe,orbit:eNe,fly:pNe}[s](t.camera,t.renderer.domElement),s==="fly"&&(t.controls.movementSpeed=300,t.controls.rollSpeed=Math.PI/6,t.controls.dragToLook=!0),(s==="trackball"||s==="orbit")&&(t.controls.minDistance=.1,t.controls.maxDistance=t.skyRadius,t.controls.addEventListener("start",function(){t.controlsEngaged=!0}),t.controls.addEventListener("change",function(){t.controlsEngaged&&(t.controlsDragging=!0)}),t.controls.addEventListener("end",function(){t.controlsEngaged=!1,t.controlsDragging=!1})),[t.renderer,t.postProcessingComposer].concat(dm(t.extraRenderers)).forEach(function(p){return p.setSize(t.width,t.height)}),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix(),t.camera.position.z=1e3,t.scene.add(t.skysphere=new Nn.Mesh),t.skysphere.visible=!1,t.loadComplete=t.scene.visible=!f,window.scene=t.scene},update:function(e,t){if(e.width&&e.height&&(t.hasOwnProperty("width")||t.hasOwnProperty("height"))&&(e.container.style.width="".concat(e.width,"px"),e.container.style.height="".concat(e.height,"px"),[e.renderer,e.postProcessingComposer].concat(dm(e.extraRenderers)).forEach(function(s){return s.setSize(e.width,e.height)}),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix()),t.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&t.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=e.skyRadius*2.5,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new Nn.SphereGeometry(e.skyRadius)),t.hasOwnProperty("backgroundColor")){var r=Qu(e.backgroundColor).alpha;r===void 0&&(r=1),e.renderer.setClearColor(new Nn.Color(sPe(1,e.backgroundColor)),r)}t.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new Nn.TextureLoader().load(e.backgroundImageUrl,function(s){s.colorSpace=Nn.SRGBColorSpace,e.skysphere.material=new Nn.MeshBasicMaterial({map:s,side:Nn.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&i()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&i())),t.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),t.hasOwnProperty("lights")&&((t.lights||[]).forEach(function(s){return e.scene.remove(s)}),e.lights.forEach(function(s){return e.scene.add(s)})),t.hasOwnProperty("objects")&&((t.objects||[]).forEach(function(s){return e.scene.remove(s)}),e.objects.forEach(function(s){return e.scene.add(s)}));function i(){e.loadComplete=e.scene.visible=!0}}});function EPe(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}var CPe=`.graph-info-msg {
  top: 50%;
  width: 100%;
  text-align: center;
  color: lavender;
  opacity: 0.7;
  font-size: 22px;
  position: absolute;
  font-family: Sans-serif;
}

.scene-container .clickable {
  cursor: pointer;
}

.scene-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.scene-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}`;EPe(CPe);function fR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function APe(n){if(Array.isArray(n))return fR(n)}function Fy(n,e,t){return(e=IPe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RPe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function NPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cB(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Lv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cB(Object(t),!0).forEach(function(r){Fy(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):cB(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function g1(n){return APe(n)||RPe(n)||LPe(n)||NPe()}function PPe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function IPe(n){var e=PPe(n,"string");return typeof e=="symbol"?e:e+""}function LPe(n,e){if(n){if(typeof n=="string")return fR(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?fR(n,e):void 0}}function j8(n,e){var t=new e;return t._destructor&&t._destructor(),{linkProp:function(i){return{default:t[i](),onChange:function(o,a){a[n][i](o)},triggerUpdate:!1}},linkMethod:function(i){return function(s){for(var o=s[n],a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];var u=o[i].apply(o,l);return u===o?this:u}}}}var SM=window.THREE?window.THREE:{AmbientLight:Kge,DirectionalLight:Xge,Vector3:X,REVISION:Ub},DPe=170,q8=j8("forceGraph",h6),FPe=Object.assign.apply(Object,g1(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return Fy({},n,q8.linkProp(n))}))),OPe=Object.assign.apply(Object,g1(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return Fy({},n,q8.linkMethod(n))}))),E_=j8("renderObjs",W8),kPe=Object.assign.apply(Object,g1(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(n){return Fy({},n,E_.linkProp(n))}))),UPe=Object.assign.apply(Object,g1(["lights","cameraPosition","postProcessingComposer"].map(function(n){return Fy({},n,E_.linkMethod(n))})).concat([{graph2ScreenCoords:E_.linkMethod("getScreenCoords"),screen2GraphCoords:E_.linkMethod("getSceneCoords")}])),BPe=QP({props:Lv(Lv({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,t){return t.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,t){var r=t.renderObjs.controls();r&&(r.enabled=e,e&&r.domElement&&r.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},FPe),kPe),methods:Lv(Lv({zoomToFit:function(e,t,r){for(var i,s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return e.renderObjs.fitToBbox((i=e.forceGraph).getGraphBbox.apply(i,o),t,r),this},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},OPe),UPe),stateInit:function(e){var t=e.controlType,r=e.rendererConfig,i=e.extraRenderers,s=new h6;return{forceGraph:s,renderObjs:W8({controlType:t,rendererConfig:r,extraRenderers:i}).objects([s]).lights([new SM.AmbientLight(13421772,Math.PI),new SM.DirectionalLight(16777215,.6*Math.PI)])}},init:function(e,t){e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.style.position="relative";var r=document.createElement("div");t.container.appendChild(r),t.renderObjs(r);var i=t.renderObjs.camera(),s=t.renderObjs.renderer(),o=t.renderObjs.controls();o.enabled=!!t.enableNavigationControls,t.lastSetCameraZ=i.position.z;var a;t.container.appendChild(a=document.createElement("div")),a.className="graph-info-msg",a.textContent="",t.forceGraph.onLoading(function(){a.textContent="Loading..."}).onFinishLoading(function(){a.textContent=""}).onUpdate(function(){t.graphData=t.forceGraph.graphData(),i.position.x===0&&i.position.y===0&&i.position.z===t.lastSetCameraZ&&t.graphData.nodes.length&&(i.lookAt(t.forceGraph.position),t.lastSetCameraZ=i.position.z=Math.cbrt(t.graphData.nodes.length)*DPe)}).onFinishUpdate(function(){if(t._dragControls){var l=t.graphData.nodes.find(function(u){return u.__initialFixedPos&&!u.__disposeControlsAfterDrag});l?l.__disposeControlsAfterDrag=!0:t._dragControls.dispose(),t._dragControls=void 0}if(t.enableNodeDrag&&t.enablePointerInteraction&&t.forceEngine==="d3"){var c=t._dragControls=new Eye(t.graphData.nodes.map(function(u){return u.__threeObj}).filter(function(u){return u}),i,s.domElement);c.addEventListener("dragstart",function(u){o.enabled=!1,u.object.__initialPos=u.object.position.clone(),u.object.__prevPos=u.object.position.clone();var h=ga(u.object).__data;!h.__initialFixedPos&&(h.__initialFixedPos={fx:h.fx,fy:h.fy,fz:h.fz}),!h.__initialPos&&(h.__initialPos={x:h.x,y:h.y,z:h.z}),["x","y","z"].forEach(function(d){return h["f".concat(d)]=h[d]}),s.domElement.classList.add("grabbable")}),c.addEventListener("drag",function(u){var h=ga(u.object);if(!u.object.hasOwnProperty("__graphObjType")){var d=u.object.__initialPos,f=u.object.__prevPos,p=u.object.position;h.position.add(p.clone().sub(f)),f.copy(p),p.copy(d)}var y=h.__data,g=h.position,m={x:g.x-y.x,y:g.y-y.y,z:g.z-y.z};["x","y","z"].forEach(function(_){return y["f".concat(_)]=y[_]=g[_]}),t.forceGraph.d3AlphaTarget(.3).resetCountdown(),y.__dragged=!0,t.onNodeDrag(y,m)}),c.addEventListener("dragend",function(u){delete u.object.__initialPos,delete u.object.__prevPos;var h=ga(u.object).__data;h.__disposeControlsAfterDrag&&(c.dispose(),delete h.__disposeControlsAfterDrag);var d=h.__initialFixedPos,f=h.__initialPos,p={x:f.x-h.x,y:f.y-h.y,z:f.z-h.z};d&&(["x","y","z"].forEach(function(y){var g="f".concat(y);d[g]===void 0&&delete h[g]}),delete h.__initialFixedPos,delete h.__initialPos,h.__dragged&&(delete h.__dragged,t.onNodeDragEnd(h,p))),t.forceGraph.d3AlphaTarget(0).resetCountdown(),t.enableNavigationControls&&(o.enabled=!0,o.domElement&&o.domElement.ownerDocument&&o.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),s.domElement.classList.remove("grabbable")})}}),SM.REVISION<155&&(t.renderObjs.renderer().useLegacyLights=!1),t.renderObjs.hoverOrderComparator(function(l,c){var u=ga(l);if(!u)return 1;var h=ga(c);if(!h)return-1;var d=function(p){return p.__graphObjType==="node"};return d(h)-d(u)}).tooltipContent(function(l){var c=ga(l);return c&&Wt(t["".concat(c.__graphObjType,"Label")])(c.__data)||""}).hoverDuringDrag(!1).onHover(function(l){var c=ga(l);if(c!==t.hoverObj){var u=t.hoverObj?t.hoverObj.__graphObjType:null,h=t.hoverObj?t.hoverObj.__data:null,d=c?c.__graphObjType:null,f=c?c.__data:null;if(u&&u!==d){var p=t["on".concat(u==="node"?"Node":"Link","Hover")];p&&p(null,h)}if(d){var y=t["on".concat(d==="node"?"Node":"Link","Hover")];y&&y(f,u===d?h:null)}s.domElement.classList[c&&t["on".concat(d==="node"?"Node":"Link","Click")]||!c&&t.onBackgroundClick?"add":"remove"]("clickable"),t.hoverObj=c}}).clickAfterDrag(!1).onClick(function(l,c){var u=ga(l);if(u){var h=t["on".concat(u.__graphObjType==="node"?"Node":"Link","Click")];h&&h(u.__data,c)}else t.onBackgroundClick&&t.onBackgroundClick(c)}).onRightClick(function(l,c){var u=ga(l);if(u){var h=t["on".concat(u.__graphObjType==="node"?"Node":"Link","RightClick")];h&&h(u.__data,c)}else t.onBackgroundRightClick&&t.onBackgroundRightClick(c)}),this._animationCycle()}});function ga(n){for(var e=n;e&&!e.hasOwnProperty("__graphObjType");)e=e.parent;return e}const y1={width:ne.number,height:ne.number,graphData:ne.shape({nodes:ne.arrayOf(ne.object).isRequired,links:ne.arrayOf(ne.object).isRequired}),backgroundColor:ne.string,nodeRelSize:ne.number,nodeId:ne.string,nodeLabel:ne.oneOfType([ne.string,ne.func]),nodeVal:ne.oneOfType([ne.number,ne.string,ne.func]),nodeVisibility:ne.oneOfType([ne.bool,ne.string,ne.func]),nodeColor:ne.oneOfType([ne.string,ne.func]),nodeAutoColorBy:ne.oneOfType([ne.string,ne.func]),onNodeHover:ne.func,onNodeClick:ne.func,linkSource:ne.string,linkTarget:ne.string,linkLabel:ne.oneOfType([ne.string,ne.func]),linkVisibility:ne.oneOfType([ne.bool,ne.string,ne.func]),linkColor:ne.oneOfType([ne.string,ne.func]),linkAutoColorBy:ne.oneOfType([ne.string,ne.func]),linkWidth:ne.oneOfType([ne.number,ne.string,ne.func]),linkCurvature:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalArrowLength:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalArrowColor:ne.oneOfType([ne.string,ne.func]),linkDirectionalArrowRelPos:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalParticles:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalParticleSpeed:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalParticleWidth:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalParticleColor:ne.oneOfType([ne.string,ne.func]),onLinkHover:ne.func,onLinkClick:ne.func,dagMode:ne.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:ne.number,dagNodeFilter:ne.func,onDagError:ne.func,d3AlphaMin:ne.number,d3AlphaDecay:ne.number,d3VelocityDecay:ne.number,warmupTicks:ne.number,cooldownTicks:ne.number,cooldownTime:ne.number,onEngineTick:ne.func,onEngineStop:ne.func,getGraphBbox:ne.func},X8={zoomToFit:ne.func,onNodeRightClick:ne.func,onNodeDrag:ne.func,onNodeDragEnd:ne.func,onLinkRightClick:ne.func,linkHoverPrecision:ne.number,onBackgroundClick:ne.func,onBackgroundRightClick:ne.func,enablePointerInteraction:ne.bool,enableNodeDrag:ne.bool},W2={showNavInfo:ne.bool,nodeOpacity:ne.number,nodeResolution:ne.number,nodeThreeObject:ne.oneOfType([ne.object,ne.string,ne.func]),nodeThreeObjectExtend:ne.oneOfType([ne.bool,ne.string,ne.func]),linkOpacity:ne.number,linkResolution:ne.number,linkCurveRotation:ne.oneOfType([ne.number,ne.string,ne.func]),linkMaterial:ne.oneOfType([ne.object,ne.string,ne.func]),linkThreeObject:ne.oneOfType([ne.object,ne.string,ne.func]),linkThreeObjectExtend:ne.oneOfType([ne.bool,ne.string,ne.func]),linkPositionUpdate:ne.func,linkDirectionalArrowResolution:ne.number,linkDirectionalParticleResolution:ne.number,forceEngine:ne.oneOf(["d3","ngraph"]),ngraphPhysics:ne.object,numDimensions:ne.oneOf([1,2,3])};Object.assign({},y1,X8,{linkLineDash:ne.oneOfType([ne.arrayOf(ne.number),ne.string,ne.func]),nodeCanvasObjectMode:ne.oneOfType([ne.string,ne.func]),nodeCanvasObject:ne.func,nodePointerAreaPaint:ne.func,linkCanvasObjectMode:ne.oneOfType([ne.string,ne.func]),linkCanvasObject:ne.func,linkPointerAreaPaint:ne.func,autoPauseRedraw:ne.bool,minZoom:ne.number,maxZoom:ne.number,enableZoomInteraction:ne.oneOfType([ne.bool,ne.func]),enablePanInteraction:ne.oneOfType([ne.bool,ne.func]),onZoom:ne.func,onZoomEnd:ne.func,onRenderFramePre:ne.func,onRenderFramePost:ne.func});const zPe=Object.assign({},y1,X8,W2,{enableNavigationControls:ne.bool,controlType:ne.oneOf(["trackball","orbit","fly"]),rendererConfig:ne.object,extraRenderers:ne.arrayOf(ne.shape({render:ne.func.isRequired}))});Object.assign({},y1,W2,{nodeDesc:ne.oneOfType([ne.string,ne.func]),linkDesc:ne.oneOfType([ne.string,ne.func])});Object.assign({},y1,W2,{markerAttrs:ne.object,yOffset:ne.number,glScale:ne.number});const j2=Mye(BPe,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","cameraPosition","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords","postProcessingComposer","lights","scene","camera","renderer","controls","refresh"],initPropNames:["controlType","rendererConfig","extraRenderers"]});j2.displayName="ForceGraph3D";j2.propTypes=zPe;class $Pe extends gi{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new Ge(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof Element&&t.element.parentNode!==null&&t.element.parentNode.removeChild(t.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const id=new X,uB=new _n,hB=new _n,dB=new X,fB=new X;class VPe{constructor(e={}){const t=this;let r,i,s,o;const a={objects:new WeakMap},l=e.element!==void 0?e.element:document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:r,height:i}},this.render=function(p,y){p.matrixWorldAutoUpdate===!0&&p.updateMatrixWorld(),y.parent===null&&y.matrixWorldAutoUpdate===!0&&y.updateMatrixWorld(),uB.copy(y.matrixWorldInverse),hB.multiplyMatrices(y.projectionMatrix,uB),u(p,p,y),f(p)},this.setSize=function(p,y){r=p,i=y,s=r/2,o=i/2,l.style.width=p+"px",l.style.height=y+"px"};function c(p){p.isCSS2DObject&&(p.element.style.display="none");for(let y=0,g=p.children.length;y<g;y++)c(p.children[y])}function u(p,y,g){if(p.visible===!1){c(p);return}if(p.isCSS2DObject){id.setFromMatrixPosition(p.matrixWorld),id.applyMatrix4(hB);const m=id.z>=-1&&id.z<=1&&p.layers.test(g.layers)===!0,_=p.element;_.style.display=m===!0?"":"none",m===!0&&(p.onBeforeRender(t,y,g),_.style.transform="translate("+-100*p.center.x+"%,"+-100*p.center.y+"%)translate("+(id.x*s+s)+"px,"+(-id.y*o+o)+"px)",_.parentNode!==l&&l.appendChild(_),p.onAfterRender(t,y,g));const v={distanceToCameraSquared:h(g,p)};a.objects.set(p,v)}for(let m=0,_=p.children.length;m<_;m++)u(p.children[m],y,g)}function h(p,y){return dB.setFromMatrixPosition(p.matrixWorld),fB.setFromMatrixPosition(y.matrixWorld),dB.distanceToSquared(fB)}function d(p){const y=[];return p.traverseVisible(function(g){g.isCSS2DObject&&y.push(g)}),y}function f(p){const y=d(p).sort(function(m,_){if(m.renderOrder!==_.renderOrder)return _.renderOrder-m.renderOrder;const v=a.objects.get(m).distanceToCameraSquared,x=a.objects.get(_).distanceToCameraSquared;return v-x}),g=y.length;for(let m=0,_=y.length;m<_;m++)y[m].element.style.zIndex=g-m}}}const GPe=()=>{const n=[new VPe],e=P.useRef(),{openModal:t}=SV(),{onAlertOpen:r}=vV(),{language:i,filterOptions:s}=xP(),{searchParams:o}=SP(),{data:a,isLoading:l}=Uq({language:i}),[c,u]=P.useState({nodes:[{id:"",img:""}],links:[{source:"",target:""}]}),h=P.useMemo(()=>[...s.relation,...s.region],[s.region,s.relation]),d=P.useCallback(()=>{try{let g=[...iT.nodes];a&&(g=[...iT.nodes,...sue(a)]);const m=new Set(g.map(T=>T.id)),v=[...iT.links,...rye.links,...sye.links].filter(T=>m.has(T.source)&&m.has(T.target)&&(!h||h.includes(T.relation))).map(T=>({...T,source:T.source,target:T.target})),x=new Set(v.flatMap(T=>[T.source,T.target])),b=g.filter(T=>x.has(T.id));u({nodes:b,links:[...v]});return}catch(g){console.error("Error processing graph data:",g),r({message:"데이터를 가져오는데 실패했습니다. 나중에 다시 시도해주세요.",alertType:$d.ERROR}),u({nodes:[{id:"",img:""}],links:[{source:"",target:""}]});return}},[a,h]),f=P.useCallback(()=>{var _;const g=c.nodes.find(v=>{if(!(v!=null&&v.name))return!1;const x=_F(v.name)?v.name.toLowerCase():v.name,b=_F(o)?o.toLowerCase():o;return x===b});if(console.log(g),!g){r({message:"일치하는 검색어가 없습니다!",alertType:$d.ERROR});return}const m=1+oye/Math.hypot(g.x||0,g.y||0,g.z||0);(_=e.current)==null||_.cameraPosition({x:(g.x||0)*m,y:(g.y||0)*m,z:(g.z||0)*m},g,2e3)},[o,c]),p=g=>{g!=null&&g.id?t(g.id):r({message:"챔피언 상세 정보를 불러오는데에 실패했습니다! 다시 시도해주세요.",alertType:$d.ERROR})},y=P.useCallback(g=>{var m;if(g.img===""){const _=document.createElement("div");return _.textContent=((m=g.id)==null?void 0:m.toString())||"",_.style.color=g.color,_.className="region-node-label",new $Pe(_)}else{const _=Yge(g.img,.25),v=new oG({map:_}),x=new Mge(v);return x.scale.set(12,12,12),new fG().load(g.img,b=>{b.colorSpace=Ts,v.map=b,v.needsUpdate=!0}),x}},[]);return P.useEffect(()=>{if(l||h.length===0){u({nodes:[{id:"",img:""}],links:[{source:"",target:""}]});return}d()},[l,a,h]),P.useEffect(()=>{var g;o&&((g=c==null?void 0:c.nodes)!=null&&g.length)&&f()},[o,c,f]),H.jsx(j2,{ref:e,graphData:c,extraRenderers:n,nodeThreeObject:y,backgroundColor:"#ffffff00",onNodeClick:p,linkOpacity:.8,linkAutoColorBy:"relation"})},HPe=({})=>H.jsxs("div",{style:{height:"100vh"},children:[H.jsx(Jge,{}),H.jsx(GPe,{})]}),WPe=()=>H.jsxs(H.Fragment,{children:[H.jsx(HPe,{}),H.jsx(rue,{}),H.jsx(nue,{})]}),jPe=fy({components:{MuiChip:{styleOverrides:{root:{backgroundColor:wl.bgCardChip,color:wl.text,variants:[{props:{itemType:"detail"},style:{backgroundColor:wl.bgDetailChip,color:wl.text}}]}}}},palette:{mode:"light",primary:{main:wl.bgDetailChip,contrastText:wl.text},secondary:{main:wl.grey,contrastText:wl.text}}}),qPe=fy({components:{MuiChip:{styleOverrides:{root:{backgroundColor:Tl.bgCardChip,color:Tl.text,variants:[{props:{itemType:"detail"},style:{backgroundColor:Tl.bgDetailChip,color:Tl.text}}]}}}},palette:{mode:"dark",primary:{main:Tl.primary,contrastText:Tl.text},secondary:{main:Tl.bgDetailChip,contrastText:Tl.text}}}),XPe=document.getElementById("root"),KPe=bM.createRoot(XPe),YPe=()=>{const n=Vce(_V),e=new _q;return H.jsx(EZ,{theme:n===Gd.LIGHT?jPe:qPe,children:H.jsxs(Tq,{client:e,children:[H.jsx(gJ,{}),H.jsx(WPe,{})]})})};KPe.render(H.jsx(Et.StrictMode,{children:H.jsx($ce,{children:H.jsx(YPe,{})})}));
