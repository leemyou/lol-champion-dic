var $8=Object.defineProperty;var H2=n=>{throw TypeError(n)};var V8=(n,e,t)=>e in n?$8(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var fp=(n,e,t)=>V8(n,typeof e!="symbol"?e+"":e,t),m1=(n,e,t)=>e.has(n)||H2("Cannot "+t);var ee=(n,e,t)=>(m1(n,e,"read from private field"),t?t.call(n):e.get(n)),yt=(n,e,t)=>e.has(n)?H2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),tt=(n,e,t,r)=>(m1(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),kt=(n,e,t)=>(m1(n,e,"access private method"),t);var Dy=(n,e,t,r)=>({set _(i){tt(n,e,i,t)},get _(){return ee(n,e,r)}});function G8(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function Gf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var h3={exports:{}},Zx={},d3={exports:{}},Lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg=Symbol.for("react.element"),H8=Symbol.for("react.portal"),W8=Symbol.for("react.fragment"),j8=Symbol.for("react.strict_mode"),q8=Symbol.for("react.profiler"),X8=Symbol.for("react.provider"),K8=Symbol.for("react.context"),Y8=Symbol.for("react.forward_ref"),Q8=Symbol.for("react.suspense"),Z8=Symbol.for("react.memo"),J8=Symbol.for("react.lazy"),W2=Symbol.iterator;function eW(n){return n===null||typeof n!="object"?null:(n=W2&&n[W2]||n["@@iterator"],typeof n=="function"?n:null)}var f3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p3=Object.assign,m3={};function Hf(n,e,t){this.props=n,this.context=e,this.refs=m3,this.updater=t||f3}Hf.prototype.isReactComponent={};Hf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Hf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function g3(){}g3.prototype=Hf.prototype;function sR(n,e,t){this.props=n,this.context=e,this.refs=m3,this.updater=t||f3}var oR=sR.prototype=new g3;oR.constructor=sR;p3(oR,Hf.prototype);oR.isPureReactComponent=!0;var j2=Array.isArray,y3=Object.prototype.hasOwnProperty,aR={current:null},v3={key:!0,ref:!0,__self:!0,__source:!0};function _3(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)y3.call(e,r)&&!v3.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Yg,type:n,key:s,ref:o,props:i,_owner:aR.current}}function tW(n,e){return{$$typeof:Yg,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function lR(n){return typeof n=="object"&&n!==null&&n.$$typeof===Yg}function nW(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var q2=/\/+/g;function g1(n,e){return typeof n=="object"&&n!==null&&n.key!=null?nW(""+n.key):e.toString(36)}function Cv(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Yg:case H8:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+g1(o,0):r,j2(i)?(t="",n!=null&&(t=n.replace(q2,"$&/")+"/"),Cv(i,e,t,"",function(c){return c})):i!=null&&(lR(i)&&(i=tW(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(q2,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",j2(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+g1(s,a);o+=Cv(s,e,t,l,i)}else if(l=eW(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+g1(s,a++),o+=Cv(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Oy(n,e,t){if(n==null)return n;var r=[],i=0;return Cv(n,r,"","",function(s){return e.call(t,s,i++)}),r}function rW(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var mi={current:null},Rv={transition:null},iW={ReactCurrentDispatcher:mi,ReactCurrentBatchConfig:Rv,ReactCurrentOwner:aR};function x3(){throw Error("act(...) is not supported in production builds of React.")}Lt.Children={map:Oy,forEach:function(n,e,t){Oy(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Oy(n,function(){e++}),e},toArray:function(n){return Oy(n,function(e){return e})||[]},only:function(n){if(!lR(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Lt.Component=Hf;Lt.Fragment=W8;Lt.Profiler=q8;Lt.PureComponent=sR;Lt.StrictMode=j8;Lt.Suspense=Q8;Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iW;Lt.act=x3;Lt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=p3({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=aR.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)y3.call(e,l)&&!v3.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Yg,type:n.type,key:i,ref:s,props:r,_owner:o}};Lt.createContext=function(n){return n={$$typeof:K8,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:X8,_context:n},n.Consumer=n};Lt.createElement=_3;Lt.createFactory=function(n){var e=_3.bind(null,n);return e.type=n,e};Lt.createRef=function(){return{current:null}};Lt.forwardRef=function(n){return{$$typeof:Y8,render:n}};Lt.isValidElement=lR;Lt.lazy=function(n){return{$$typeof:J8,_payload:{_status:-1,_result:n},_init:rW}};Lt.memo=function(n,e){return{$$typeof:Z8,type:n,compare:e===void 0?null:e}};Lt.startTransition=function(n){var e=Rv.transition;Rv.transition={};try{n()}finally{Rv.transition=e}};Lt.unstable_act=x3;Lt.useCallback=function(n,e){return mi.current.useCallback(n,e)};Lt.useContext=function(n){return mi.current.useContext(n)};Lt.useDebugValue=function(){};Lt.useDeferredValue=function(n){return mi.current.useDeferredValue(n)};Lt.useEffect=function(n,e){return mi.current.useEffect(n,e)};Lt.useId=function(){return mi.current.useId()};Lt.useImperativeHandle=function(n,e,t){return mi.current.useImperativeHandle(n,e,t)};Lt.useInsertionEffect=function(n,e){return mi.current.useInsertionEffect(n,e)};Lt.useLayoutEffect=function(n,e){return mi.current.useLayoutEffect(n,e)};Lt.useMemo=function(n,e){return mi.current.useMemo(n,e)};Lt.useReducer=function(n,e,t){return mi.current.useReducer(n,e,t)};Lt.useRef=function(n){return mi.current.useRef(n)};Lt.useState=function(n){return mi.current.useState(n)};Lt.useSyncExternalStore=function(n,e,t){return mi.current.useSyncExternalStore(n,e,t)};Lt.useTransition=function(){return mi.current.useTransition()};Lt.version="18.3.1";d3.exports=Lt;var P=d3.exports;const Et=Gf(P),x_=G8({__proto__:null,default:Et},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sW=P,oW=Symbol.for("react.element"),aW=Symbol.for("react.fragment"),lW=Object.prototype.hasOwnProperty,cW=sW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uW={key:!0,ref:!0,__self:!0,__source:!0};function S3(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lW.call(e,r)&&!uW.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:oW,type:n,key:s,ref:o,props:i,_owner:cW.current}}Zx.Fragment=aW;Zx.jsx=S3;Zx.jsxs=S3;h3.exports=Zx;var q=h3.exports,pM={},b3={exports:{}},hs={},w3={exports:{}},T3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(L,W){var z=L.length;L.push(W);e:for(;0<z;){var X=z-1>>>1,U=L[X];if(0<i(U,W))L[X]=W,L[z]=U,z=X;else break e}}function t(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var W=L[0],z=L.pop();if(z!==W){L[0]=z;e:for(var X=0,U=L.length,te=U>>>1;X<te;){var k=2*(X+1)-1,V=L[k],Z=k+1,le=L[Z];if(0>i(V,z))Z<U&&0>i(le,V)?(L[X]=le,L[Z]=z,X=Z):(L[X]=V,L[k]=z,X=k);else if(Z<U&&0>i(le,z))L[X]=le,L[Z]=z,X=Z;else break e}}return W}function i(L,W){var z=L.sortIndex-W.sortIndex;return z!==0?z:L.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(L){for(var W=t(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=L)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(c)}}function x(L){if(g=!1,v(L),!p)if(t(l)!==null)p=!0,D(b);else{var W=t(c);W!==null&&j(x,W.startTime-L)}}function b(L,W){p=!1,g&&(g=!1,m(M),M=-1),f=!0;var z=d;try{for(v(W),h=t(l);h!==null&&(!(h.expirationTime>W)||L&&!E());){var X=h.callback;if(typeof X=="function"){h.callback=null,d=h.priorityLevel;var U=X(h.expirationTime<=W);W=n.unstable_now(),typeof U=="function"?h.callback=U:h===t(l)&&r(l),v(W)}else r(l);h=t(l)}if(h!==null)var te=!0;else{var k=t(c);k!==null&&j(x,k.startTime-W),te=!1}return te}finally{h=null,d=z,f=!1}}var T=!1,w=null,M=-1,C=5,S=-1;function E(){return!(n.unstable_now()-S<C)}function I(){if(w!==null){var L=n.unstable_now();S=L;var W=!0;try{W=w(!0,L)}finally{W?F():(T=!1,w=null)}}else T=!1}var F;if(typeof _=="function")F=function(){_(I)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,R=N.port2;N.port1.onmessage=I,F=function(){R.postMessage(null)}}else F=function(){y(I,0)};function D(L){w=L,T||(T=!0,F())}function j(L,W){M=y(function(){L(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_continueExecution=function(){p||f||(p=!0,D(b))},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(L){switch(d){case 1:case 2:case 3:var W=3;break;default:W=d}var z=d;d=W;try{return L()}finally{d=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(L,W){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=d;d=L;try{return W()}finally{d=z}},n.unstable_scheduleCallback=function(L,W,z){var X=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?X+z:X):z=X,L){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=z+U,L={id:u++,callback:W,priorityLevel:L,startTime:z,expirationTime:U,sortIndex:-1},z>X?(L.sortIndex=z,e(c,L),t(l)===null&&L===t(c)&&(g?(m(M),M=-1):g=!0,j(x,z-X))):(L.sortIndex=U,e(l,L),p||f||(p=!0,D(b))),L},n.unstable_shouldYield=E,n.unstable_wrapCallback=function(L){var W=d;return function(){var z=d;d=W;try{return L.apply(this,arguments)}finally{d=z}}}})(T3);w3.exports=T3;var hW=w3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dW=P,cs=hW;function ke(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M3=new Set,tg={};function Yu(n,e){uf(n,e),uf(n+"Capture",e)}function uf(n,e){for(tg[n]=e,n=0;n<e.length;n++)M3.add(e[n])}var Ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mM=Object.prototype.hasOwnProperty,fW=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X2={},K2={};function pW(n){return mM.call(K2,n)?!0:mM.call(X2,n)?!1:fW.test(n)?K2[n]=!0:(X2[n]=!0,!1)}function mW(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function gW(n,e,t,r){if(e===null||typeof e>"u"||mW(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gi(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Br={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Br[n]=new gi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Br[e]=new gi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Br[n]=new gi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Br[n]=new gi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Br[n]=new gi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Br[n]=new gi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Br[n]=new gi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Br[n]=new gi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Br[n]=new gi(n,5,!1,n.toLowerCase(),null,!1,!1)});var cR=/[\-:]([a-z])/g;function uR(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(cR,uR);Br[e]=new gi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(cR,uR);Br[e]=new gi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(cR,uR);Br[e]=new gi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Br[n]=new gi(n,1,!1,n.toLowerCase(),null,!1,!1)});Br.xlinkHref=new gi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Br[n]=new gi(n,1,!1,n.toLowerCase(),null,!0,!0)});function hR(n,e,t,r){var i=Br.hasOwnProperty(e)?Br[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gW(e,t,i,r)&&(t=null),r||i===null?pW(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ol=dW.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fy=Symbol.for("react.element"),id=Symbol.for("react.portal"),sd=Symbol.for("react.fragment"),dR=Symbol.for("react.strict_mode"),gM=Symbol.for("react.profiler"),E3=Symbol.for("react.provider"),A3=Symbol.for("react.context"),fR=Symbol.for("react.forward_ref"),yM=Symbol.for("react.suspense"),vM=Symbol.for("react.suspense_list"),pR=Symbol.for("react.memo"),Fl=Symbol.for("react.lazy"),C3=Symbol.for("react.offscreen"),Y2=Symbol.iterator;function pp(n){return n===null||typeof n!="object"?null:(n=Y2&&n[Y2]||n["@@iterator"],typeof n=="function"?n:null)}var zn=Object.assign,y1;function um(n){if(y1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);y1=e&&e[1]||""}return`
`+y1+n}var v1=!1;function _1(n,e){if(!n||v1)return"";v1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{v1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?um(n):""}function yW(n){switch(n.tag){case 5:return um(n.type);case 16:return um("Lazy");case 13:return um("Suspense");case 19:return um("SuspenseList");case 0:case 2:case 15:return n=_1(n.type,!1),n;case 11:return n=_1(n.type.render,!1),n;case 1:return n=_1(n.type,!0),n;default:return""}}function _M(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case sd:return"Fragment";case id:return"Portal";case gM:return"Profiler";case dR:return"StrictMode";case yM:return"Suspense";case vM:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case A3:return(n.displayName||"Context")+".Consumer";case E3:return(n._context.displayName||"Context")+".Provider";case fR:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case pR:return e=n.displayName||null,e!==null?e:_M(n.type)||"Memo";case Fl:e=n._payload,n=n._init;try{return _M(n(e))}catch{}}return null}function vW(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _M(e);case 8:return e===dR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function R3(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _W(n){var e=R3(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function ky(n){n._valueTracker||(n._valueTracker=_W(n))}function N3(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=R3(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function S_(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function xM(n,e){var t=e.checked;return zn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Q2(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=fc(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function P3(n,e){e=e.checked,e!=null&&hR(n,"checked",e,!1)}function SM(n,e){P3(n,e);var t=fc(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?bM(n,e.type,t):e.hasOwnProperty("defaultValue")&&bM(n,e.type,fc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Z2(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function bM(n,e,t){(e!=="number"||S_(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var hm=Array.isArray;function Ad(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+fc(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function wM(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ke(91));return zn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function J2(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ke(92));if(hm(t)){if(1<t.length)throw Error(ke(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:fc(t)}}function I3(n,e){var t=fc(e.value),r=fc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function eI(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function L3(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function TM(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?L3(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Uy,D3=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Uy=Uy||document.createElement("div"),Uy.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uy.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function ng(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Rm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xW=["Webkit","ms","Moz","O"];Object.keys(Rm).forEach(function(n){xW.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Rm[e]=Rm[n]})});function O3(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Rm.hasOwnProperty(n)&&Rm[n]?(""+e).trim():e+"px"}function F3(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=O3(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var SW=zn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function MM(n,e){if(e){if(SW[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ke(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ke(62))}}function EM(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var AM=null;function mR(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var CM=null,Cd=null,Rd=null;function tI(n){if(n=Jg(n)){if(typeof CM!="function")throw Error(ke(280));var e=n.stateNode;e&&(e=rS(e),CM(n.stateNode,n.type,e))}}function k3(n){Cd?Rd?Rd.push(n):Rd=[n]:Cd=n}function U3(){if(Cd){var n=Cd,e=Rd;if(Rd=Cd=null,tI(n),e)for(n=0;n<e.length;n++)tI(e[n])}}function B3(n,e){return n(e)}function z3(){}var x1=!1;function $3(n,e,t){if(x1)return n(e,t);x1=!0;try{return B3(n,e,t)}finally{x1=!1,(Cd!==null||Rd!==null)&&(z3(),U3())}}function rg(n,e){var t=n.stateNode;if(t===null)return null;var r=rS(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ke(231,e,typeof t));return t}var RM=!1;if(Ya)try{var mp={};Object.defineProperty(mp,"passive",{get:function(){RM=!0}}),window.addEventListener("test",mp,mp),window.removeEventListener("test",mp,mp)}catch{RM=!1}function bW(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var Nm=!1,b_=null,w_=!1,NM=null,wW={onError:function(n){Nm=!0,b_=n}};function TW(n,e,t,r,i,s,o,a,l){Nm=!1,b_=null,bW.apply(wW,arguments)}function MW(n,e,t,r,i,s,o,a,l){if(TW.apply(this,arguments),Nm){if(Nm){var c=b_;Nm=!1,b_=null}else throw Error(ke(198));w_||(w_=!0,NM=c)}}function Qu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function V3(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function nI(n){if(Qu(n)!==n)throw Error(ke(188))}function EW(n){var e=n.alternate;if(!e){if(e=Qu(n),e===null)throw Error(ke(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return nI(i),n;if(s===r)return nI(i),e;s=s.sibling}throw Error(ke(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(ke(189))}}if(t.alternate!==r)throw Error(ke(190))}if(t.tag!==3)throw Error(ke(188));return t.stateNode.current===t?n:e}function G3(n){return n=EW(n),n!==null?H3(n):null}function H3(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=H3(n);if(e!==null)return e;n=n.sibling}return null}var W3=cs.unstable_scheduleCallback,rI=cs.unstable_cancelCallback,AW=cs.unstable_shouldYield,CW=cs.unstable_requestPaint,Qn=cs.unstable_now,RW=cs.unstable_getCurrentPriorityLevel,gR=cs.unstable_ImmediatePriority,j3=cs.unstable_UserBlockingPriority,T_=cs.unstable_NormalPriority,NW=cs.unstable_LowPriority,q3=cs.unstable_IdlePriority,Jx=null,Ho=null;function PW(n){if(Ho&&typeof Ho.onCommitFiberRoot=="function")try{Ho.onCommitFiberRoot(Jx,n,void 0,(n.current.flags&128)===128)}catch{}}var mo=Math.clz32?Math.clz32:DW,IW=Math.log,LW=Math.LN2;function DW(n){return n>>>=0,n===0?32:31-(IW(n)/LW|0)|0}var By=64,zy=4194304;function dm(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function M_(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=dm(a):(s&=o,s!==0&&(r=dm(s)))}else o=t&~i,o!==0?r=dm(o):s!==0&&(r=dm(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-mo(e),i=1<<t,r|=n[t],e&=~i;return r}function OW(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FW(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-mo(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=OW(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function PM(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function X3(){var n=By;return By<<=1,!(By&4194240)&&(By=64),n}function S1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Qg(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-mo(e),n[e]=t}function kW(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-mo(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function yR(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-mo(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var un=0;function K3(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Y3,vR,Q3,Z3,J3,IM=!1,$y=[],nc=null,rc=null,ic=null,ig=new Map,sg=new Map,$l=[],UW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iI(n,e){switch(n){case"focusin":case"focusout":nc=null;break;case"dragenter":case"dragleave":rc=null;break;case"mouseover":case"mouseout":ic=null;break;case"pointerover":case"pointerout":ig.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sg.delete(e.pointerId)}}function gp(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Jg(e),e!==null&&vR(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function BW(n,e,t,r,i){switch(e){case"focusin":return nc=gp(nc,n,e,t,r,i),!0;case"dragenter":return rc=gp(rc,n,e,t,r,i),!0;case"mouseover":return ic=gp(ic,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return ig.set(s,gp(ig.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,sg.set(s,gp(sg.get(s)||null,n,e,t,r,i)),!0}return!1}function eB(n){var e=lu(n.target);if(e!==null){var t=Qu(e);if(t!==null){if(e=t.tag,e===13){if(e=V3(t),e!==null){n.blockedOn=e,J3(n.priority,function(){Q3(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Nv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=LM(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);AM=r,t.target.dispatchEvent(r),AM=null}else return e=Jg(t),e!==null&&vR(e),n.blockedOn=t,!1;e.shift()}return!0}function sI(n,e,t){Nv(n)&&t.delete(e)}function zW(){IM=!1,nc!==null&&Nv(nc)&&(nc=null),rc!==null&&Nv(rc)&&(rc=null),ic!==null&&Nv(ic)&&(ic=null),ig.forEach(sI),sg.forEach(sI)}function yp(n,e){n.blockedOn===e&&(n.blockedOn=null,IM||(IM=!0,cs.unstable_scheduleCallback(cs.unstable_NormalPriority,zW)))}function og(n){function e(i){return yp(i,n)}if(0<$y.length){yp($y[0],n);for(var t=1;t<$y.length;t++){var r=$y[t];r.blockedOn===n&&(r.blockedOn=null)}}for(nc!==null&&yp(nc,n),rc!==null&&yp(rc,n),ic!==null&&yp(ic,n),ig.forEach(e),sg.forEach(e),t=0;t<$l.length;t++)r=$l[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<$l.length&&(t=$l[0],t.blockedOn===null);)eB(t),t.blockedOn===null&&$l.shift()}var Nd=ol.ReactCurrentBatchConfig,E_=!0;function $W(n,e,t,r){var i=un,s=Nd.transition;Nd.transition=null;try{un=1,_R(n,e,t,r)}finally{un=i,Nd.transition=s}}function VW(n,e,t,r){var i=un,s=Nd.transition;Nd.transition=null;try{un=4,_R(n,e,t,r)}finally{un=i,Nd.transition=s}}function _R(n,e,t,r){if(E_){var i=LM(n,e,t,r);if(i===null)P1(n,e,r,A_,t),iI(n,r);else if(BW(i,n,e,t,r))r.stopPropagation();else if(iI(n,r),e&4&&-1<UW.indexOf(n)){for(;i!==null;){var s=Jg(i);if(s!==null&&Y3(s),s=LM(n,e,t,r),s===null&&P1(n,e,r,A_,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else P1(n,e,r,null,t)}}var A_=null;function LM(n,e,t,r){if(A_=null,n=mR(r),n=lu(n),n!==null)if(e=Qu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=V3(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return A_=n,null}function tB(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RW()){case gR:return 1;case j3:return 4;case T_:case NW:return 16;case q3:return 536870912;default:return 16}default:return 16}}var ec=null,xR=null,Pv=null;function nB(){if(Pv)return Pv;var n,e=xR,t=e.length,r,i="value"in ec?ec.value:ec.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Pv=i.slice(n,1<r?1-r:void 0)}function Iv(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Vy(){return!0}function oI(){return!1}function ds(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Vy:oI,this.isPropagationStopped=oI,this}return zn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Vy)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Vy)},persist:function(){},isPersistent:Vy}),e}var Wf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SR=ds(Wf),Zg=zn({},Wf,{view:0,detail:0}),GW=ds(Zg),b1,w1,vp,eS=zn({},Zg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bR,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==vp&&(vp&&n.type==="mousemove"?(b1=n.screenX-vp.screenX,w1=n.screenY-vp.screenY):w1=b1=0,vp=n),b1)},movementY:function(n){return"movementY"in n?n.movementY:w1}}),aI=ds(eS),HW=zn({},eS,{dataTransfer:0}),WW=ds(HW),jW=zn({},Zg,{relatedTarget:0}),T1=ds(jW),qW=zn({},Wf,{animationName:0,elapsedTime:0,pseudoElement:0}),XW=ds(qW),KW=zn({},Wf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),YW=ds(KW),QW=zn({},Wf,{data:0}),lI=ds(QW),ZW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ej={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tj(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=ej[n])?!!e[n]:!1}function bR(){return tj}var nj=zn({},Zg,{key:function(n){if(n.key){var e=ZW[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Iv(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?JW[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bR,charCode:function(n){return n.type==="keypress"?Iv(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Iv(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),rj=ds(nj),ij=zn({},eS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cI=ds(ij),sj=zn({},Zg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bR}),oj=ds(sj),aj=zn({},Wf,{propertyName:0,elapsedTime:0,pseudoElement:0}),lj=ds(aj),cj=zn({},eS,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),uj=ds(cj),hj=[9,13,27,32],wR=Ya&&"CompositionEvent"in window,Pm=null;Ya&&"documentMode"in document&&(Pm=document.documentMode);var dj=Ya&&"TextEvent"in window&&!Pm,rB=Ya&&(!wR||Pm&&8<Pm&&11>=Pm),uI=" ",hI=!1;function iB(n,e){switch(n){case"keyup":return hj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sB(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var od=!1;function fj(n,e){switch(n){case"compositionend":return sB(e);case"keypress":return e.which!==32?null:(hI=!0,uI);case"textInput":return n=e.data,n===uI&&hI?null:n;default:return null}}function pj(n,e){if(od)return n==="compositionend"||!wR&&iB(n,e)?(n=nB(),Pv=xR=ec=null,od=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rB&&e.locale!=="ko"?null:e.data;default:return null}}var mj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dI(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!mj[n.type]:e==="textarea"}function oB(n,e,t,r){k3(r),e=C_(e,"onChange"),0<e.length&&(t=new SR("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var Im=null,ag=null;function gj(n){yB(n,0)}function tS(n){var e=cd(n);if(N3(e))return n}function yj(n,e){if(n==="change")return e}var aB=!1;if(Ya){var M1;if(Ya){var E1="oninput"in document;if(!E1){var fI=document.createElement("div");fI.setAttribute("oninput","return;"),E1=typeof fI.oninput=="function"}M1=E1}else M1=!1;aB=M1&&(!document.documentMode||9<document.documentMode)}function pI(){Im&&(Im.detachEvent("onpropertychange",lB),ag=Im=null)}function lB(n){if(n.propertyName==="value"&&tS(ag)){var e=[];oB(e,ag,n,mR(n)),$3(gj,e)}}function vj(n,e,t){n==="focusin"?(pI(),Im=e,ag=t,Im.attachEvent("onpropertychange",lB)):n==="focusout"&&pI()}function _j(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return tS(ag)}function xj(n,e){if(n==="click")return tS(e)}function Sj(n,e){if(n==="input"||n==="change")return tS(e)}function bj(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var _o=typeof Object.is=="function"?Object.is:bj;function lg(n,e){if(_o(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!mM.call(e,i)||!_o(n[i],e[i]))return!1}return!0}function mI(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function gI(n,e){var t=mI(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=mI(t)}}function cB(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?cB(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function uB(){for(var n=window,e=S_();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=S_(n.document)}return e}function TR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function wj(n){var e=uB(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&cB(t.ownerDocument.documentElement,t)){if(r!==null&&TR(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=gI(t,s);var o=gI(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Tj=Ya&&"documentMode"in document&&11>=document.documentMode,ad=null,DM=null,Lm=null,OM=!1;function yI(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;OM||ad==null||ad!==S_(r)||(r=ad,"selectionStart"in r&&TR(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Lm&&lg(Lm,r)||(Lm=r,r=C_(DM,"onSelect"),0<r.length&&(e=new SR("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ad)))}function Gy(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ld={animationend:Gy("Animation","AnimationEnd"),animationiteration:Gy("Animation","AnimationIteration"),animationstart:Gy("Animation","AnimationStart"),transitionend:Gy("Transition","TransitionEnd")},A1={},hB={};Ya&&(hB=document.createElement("div").style,"AnimationEvent"in window||(delete ld.animationend.animation,delete ld.animationiteration.animation,delete ld.animationstart.animation),"TransitionEvent"in window||delete ld.transitionend.transition);function nS(n){if(A1[n])return A1[n];if(!ld[n])return n;var e=ld[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in hB)return A1[n]=e[t];return n}var dB=nS("animationend"),fB=nS("animationiteration"),pB=nS("animationstart"),mB=nS("transitionend"),gB=new Map,vI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tc(n,e){gB.set(n,e),Yu(e,[n])}for(var C1=0;C1<vI.length;C1++){var R1=vI[C1],Mj=R1.toLowerCase(),Ej=R1[0].toUpperCase()+R1.slice(1);Tc(Mj,"on"+Ej)}Tc(dB,"onAnimationEnd");Tc(fB,"onAnimationIteration");Tc(pB,"onAnimationStart");Tc("dblclick","onDoubleClick");Tc("focusin","onFocus");Tc("focusout","onBlur");Tc(mB,"onTransitionEnd");uf("onMouseEnter",["mouseout","mouseover"]);uf("onMouseLeave",["mouseout","mouseover"]);uf("onPointerEnter",["pointerout","pointerover"]);uf("onPointerLeave",["pointerout","pointerover"]);Yu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Aj=new Set("cancel close invalid load scroll toggle".split(" ").concat(fm));function _I(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,MW(r,e,void 0,n),n.currentTarget=null}function yB(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;_I(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;_I(i,a,c),s=l}}}if(w_)throw n=NM,w_=!1,NM=null,n}function Sn(n,e){var t=e[zM];t===void 0&&(t=e[zM]=new Set);var r=n+"__bubble";t.has(r)||(vB(e,n,2,!1),t.add(r))}function N1(n,e,t){var r=0;e&&(r|=4),vB(t,n,r,e)}var Hy="_reactListening"+Math.random().toString(36).slice(2);function cg(n){if(!n[Hy]){n[Hy]=!0,M3.forEach(function(t){t!=="selectionchange"&&(Aj.has(t)||N1(t,!1,n),N1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Hy]||(e[Hy]=!0,N1("selectionchange",!1,e))}}function vB(n,e,t,r){switch(tB(e)){case 1:var i=$W;break;case 4:i=VW;break;default:i=_R}t=i.bind(null,e,t,n),i=void 0,!RM||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function P1(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=lu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}$3(function(){var c=s,u=mR(t),h=[];e:{var d=gB.get(n);if(d!==void 0){var f=SR,p=n;switch(n){case"keypress":if(Iv(t)===0)break e;case"keydown":case"keyup":f=rj;break;case"focusin":p="focus",f=T1;break;case"focusout":p="blur",f=T1;break;case"beforeblur":case"afterblur":f=T1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=aI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=WW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=oj;break;case dB:case fB:case pB:f=XW;break;case mB:f=lj;break;case"scroll":f=GW;break;case"wheel":f=uj;break;case"copy":case"cut":case"paste":f=YW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=cI}var g=(e&4)!==0,y=!g&&n==="scroll",m=g?d!==null?d+"Capture":null:d;g=[];for(var _=c,v;_!==null;){v=_;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,m!==null&&(x=rg(_,m),x!=null&&g.push(ug(_,x,v)))),y)break;_=_.return}0<g.length&&(d=new f(d,p,null,t,u),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",d&&t!==AM&&(p=t.relatedTarget||t.fromElement)&&(lu(p)||p[Qa]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=c,p=p?lu(p):null,p!==null&&(y=Qu(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(g=aI,x="onMouseLeave",m="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(g=cI,x="onPointerLeave",m="onPointerEnter",_="pointer"),y=f==null?d:cd(f),v=p==null?d:cd(p),d=new g(x,_+"leave",f,t,u),d.target=y,d.relatedTarget=v,x=null,lu(u)===c&&(g=new g(m,_+"enter",p,t,u),g.target=v,g.relatedTarget=y,x=g),y=x,f&&p)t:{for(g=f,m=p,_=0,v=g;v;v=lh(v))_++;for(v=0,x=m;x;x=lh(x))v++;for(;0<_-v;)g=lh(g),_--;for(;0<v-_;)m=lh(m),v--;for(;_--;){if(g===m||m!==null&&g===m.alternate)break t;g=lh(g),m=lh(m)}g=null}else g=null;f!==null&&xI(h,d,f,g,!1),p!==null&&y!==null&&xI(h,y,p,g,!0)}}e:{if(d=c?cd(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var b=yj;else if(dI(d))if(aB)b=Sj;else{b=_j;var T=vj}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(b=xj);if(b&&(b=b(n,c))){oB(h,b,t,u);break e}T&&T(n,d,c),n==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&bM(d,"number",d.value)}switch(T=c?cd(c):window,n){case"focusin":(dI(T)||T.contentEditable==="true")&&(ad=T,DM=c,Lm=null);break;case"focusout":Lm=DM=ad=null;break;case"mousedown":OM=!0;break;case"contextmenu":case"mouseup":case"dragend":OM=!1,yI(h,t,u);break;case"selectionchange":if(Tj)break;case"keydown":case"keyup":yI(h,t,u)}var w;if(wR)e:{switch(n){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else od?iB(n,t)&&(M="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(rB&&t.locale!=="ko"&&(od||M!=="onCompositionStart"?M==="onCompositionEnd"&&od&&(w=nB()):(ec=u,xR="value"in ec?ec.value:ec.textContent,od=!0)),T=C_(c,M),0<T.length&&(M=new lI(M,n,null,t,u),h.push({event:M,listeners:T}),w?M.data=w:(w=sB(t),w!==null&&(M.data=w)))),(w=dj?fj(n,t):pj(n,t))&&(c=C_(c,"onBeforeInput"),0<c.length&&(u=new lI("onBeforeInput","beforeinput",null,t,u),h.push({event:u,listeners:c}),u.data=w))}yB(h,e)})}function ug(n,e,t){return{instance:n,listener:e,currentTarget:t}}function C_(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=rg(n,t),s!=null&&r.unshift(ug(n,s,i)),s=rg(n,e),s!=null&&r.push(ug(n,s,i))),n=n.return}return r}function lh(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function xI(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=rg(t,s),l!=null&&o.unshift(ug(t,l,a))):i||(l=rg(t,s),l!=null&&o.push(ug(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var Cj=/\r\n?/g,Rj=/\u0000|\uFFFD/g;function SI(n){return(typeof n=="string"?n:""+n).replace(Cj,`
`).replace(Rj,"")}function Wy(n,e,t){if(e=SI(e),SI(n)!==e&&t)throw Error(ke(425))}function R_(){}var FM=null,kM=null;function UM(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var BM=typeof setTimeout=="function"?setTimeout:void 0,Nj=typeof clearTimeout=="function"?clearTimeout:void 0,bI=typeof Promise=="function"?Promise:void 0,Pj=typeof queueMicrotask=="function"?queueMicrotask:typeof bI<"u"?function(n){return bI.resolve(null).then(n).catch(Ij)}:BM;function Ij(n){setTimeout(function(){throw n})}function I1(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),og(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);og(e)}function sc(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function wI(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var jf=Math.random().toString(36).slice(2),$o="__reactFiber$"+jf,hg="__reactProps$"+jf,Qa="__reactContainer$"+jf,zM="__reactEvents$"+jf,Lj="__reactListeners$"+jf,Dj="__reactHandles$"+jf;function lu(n){var e=n[$o];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Qa]||t[$o]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=wI(n);n!==null;){if(t=n[$o])return t;n=wI(n)}return e}n=t,t=n.parentNode}return null}function Jg(n){return n=n[$o]||n[Qa],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function cd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ke(33))}function rS(n){return n[hg]||null}var $M=[],ud=-1;function Mc(n){return{current:n}}function An(n){0>ud||(n.current=$M[ud],$M[ud]=null,ud--)}function _n(n,e){ud++,$M[ud]=n.current,n.current=e}var pc={},ei=Mc(pc),Ai=Mc(!1),Iu=pc;function hf(n,e){var t=n.type.contextTypes;if(!t)return pc;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function Ci(n){return n=n.childContextTypes,n!=null}function N_(){An(Ai),An(ei)}function TI(n,e,t){if(ei.current!==pc)throw Error(ke(168));_n(ei,e),_n(Ai,t)}function _B(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ke(108,vW(n)||"Unknown",i));return zn({},t,r)}function P_(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||pc,Iu=ei.current,_n(ei,n),_n(Ai,Ai.current),!0}function MI(n,e,t){var r=n.stateNode;if(!r)throw Error(ke(169));t?(n=_B(n,e,Iu),r.__reactInternalMemoizedMergedChildContext=n,An(Ai),An(ei),_n(ei,n)):An(Ai),_n(Ai,t)}var ba=null,iS=!1,L1=!1;function xB(n){ba===null?ba=[n]:ba.push(n)}function Oj(n){iS=!0,xB(n)}function Ec(){if(!L1&&ba!==null){L1=!0;var n=0,e=un;try{var t=ba;for(un=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ba=null,iS=!1}catch(i){throw ba!==null&&(ba=ba.slice(n+1)),W3(gR,Ec),i}finally{un=e,L1=!1}}return null}var hd=[],dd=0,I_=null,L_=0,Ts=[],Ms=0,Lu=null,La=1,Da="";function Kc(n,e){hd[dd++]=L_,hd[dd++]=I_,I_=n,L_=e}function SB(n,e,t){Ts[Ms++]=La,Ts[Ms++]=Da,Ts[Ms++]=Lu,Lu=n;var r=La;n=Da;var i=32-mo(r)-1;r&=~(1<<i),t+=1;var s=32-mo(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,La=1<<32-mo(e)+i|t<<i|r,Da=s+n}else La=1<<s|t<<i|r,Da=n}function MR(n){n.return!==null&&(Kc(n,1),SB(n,1,0))}function ER(n){for(;n===I_;)I_=hd[--dd],hd[dd]=null,L_=hd[--dd],hd[dd]=null;for(;n===Lu;)Lu=Ts[--Ms],Ts[Ms]=null,Da=Ts[--Ms],Ts[Ms]=null,La=Ts[--Ms],Ts[Ms]=null}var os=null,ss=null,In=!1,so=null;function bB(n,e){var t=Cs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function EI(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,os=n,ss=sc(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,os=n,ss=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Lu!==null?{id:La,overflow:Da}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Cs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,os=n,ss=null,!0):!1;default:return!1}}function VM(n){return(n.mode&1)!==0&&(n.flags&128)===0}function GM(n){if(In){var e=ss;if(e){var t=e;if(!EI(n,e)){if(VM(n))throw Error(ke(418));e=sc(t.nextSibling);var r=os;e&&EI(n,e)?bB(r,t):(n.flags=n.flags&-4097|2,In=!1,os=n)}}else{if(VM(n))throw Error(ke(418));n.flags=n.flags&-4097|2,In=!1,os=n}}}function AI(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;os=n}function jy(n){if(n!==os)return!1;if(!In)return AI(n),In=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!UM(n.type,n.memoizedProps)),e&&(e=ss)){if(VM(n))throw wB(),Error(ke(418));for(;e;)bB(n,e),e=sc(e.nextSibling)}if(AI(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ke(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ss=sc(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ss=null}}else ss=os?sc(n.stateNode.nextSibling):null;return!0}function wB(){for(var n=ss;n;)n=sc(n.nextSibling)}function df(){ss=os=null,In=!1}function AR(n){so===null?so=[n]:so.push(n)}var Fj=ol.ReactCurrentBatchConfig;function _p(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ke(309));var r=t.stateNode}if(!r)throw Error(ke(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(ke(284));if(!t._owner)throw Error(ke(290,n))}return n}function qy(n,e){throw n=Object.prototype.toString.call(e),Error(ke(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function CI(n){var e=n._init;return e(n._payload)}function TB(n){function e(m,_){if(n){var v=m.deletions;v===null?(m.deletions=[_],m.flags|=16):v.push(_)}}function t(m,_){if(!n)return null;for(;_!==null;)e(m,_),_=_.sibling;return null}function r(m,_){for(m=new Map;_!==null;)_.key!==null?m.set(_.key,_):m.set(_.index,_),_=_.sibling;return m}function i(m,_){return m=cc(m,_),m.index=0,m.sibling=null,m}function s(m,_,v){return m.index=v,n?(v=m.alternate,v!==null?(v=v.index,v<_?(m.flags|=2,_):v):(m.flags|=2,_)):(m.flags|=1048576,_)}function o(m){return n&&m.alternate===null&&(m.flags|=2),m}function a(m,_,v,x){return _===null||_.tag!==6?(_=z1(v,m.mode,x),_.return=m,_):(_=i(_,v),_.return=m,_)}function l(m,_,v,x){var b=v.type;return b===sd?u(m,_,v.props.children,x,v.key):_!==null&&(_.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Fl&&CI(b)===_.type)?(x=i(_,v.props),x.ref=_p(m,_,v),x.return=m,x):(x=Bv(v.type,v.key,v.props,null,m.mode,x),x.ref=_p(m,_,v),x.return=m,x)}function c(m,_,v,x){return _===null||_.tag!==4||_.stateNode.containerInfo!==v.containerInfo||_.stateNode.implementation!==v.implementation?(_=$1(v,m.mode,x),_.return=m,_):(_=i(_,v.children||[]),_.return=m,_)}function u(m,_,v,x,b){return _===null||_.tag!==7?(_=Tu(v,m.mode,x,b),_.return=m,_):(_=i(_,v),_.return=m,_)}function h(m,_,v){if(typeof _=="string"&&_!==""||typeof _=="number")return _=z1(""+_,m.mode,v),_.return=m,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Fy:return v=Bv(_.type,_.key,_.props,null,m.mode,v),v.ref=_p(m,null,_),v.return=m,v;case id:return _=$1(_,m.mode,v),_.return=m,_;case Fl:var x=_._init;return h(m,x(_._payload),v)}if(hm(_)||pp(_))return _=Tu(_,m.mode,v,null),_.return=m,_;qy(m,_)}return null}function d(m,_,v,x){var b=_!==null?_.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:a(m,_,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Fy:return v.key===b?l(m,_,v,x):null;case id:return v.key===b?c(m,_,v,x):null;case Fl:return b=v._init,d(m,_,b(v._payload),x)}if(hm(v)||pp(v))return b!==null?null:u(m,_,v,x,null);qy(m,v)}return null}function f(m,_,v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(v)||null,a(_,m,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Fy:return m=m.get(x.key===null?v:x.key)||null,l(_,m,x,b);case id:return m=m.get(x.key===null?v:x.key)||null,c(_,m,x,b);case Fl:var T=x._init;return f(m,_,v,T(x._payload),b)}if(hm(x)||pp(x))return m=m.get(v)||null,u(_,m,x,b,null);qy(_,x)}return null}function p(m,_,v,x){for(var b=null,T=null,w=_,M=_=0,C=null;w!==null&&M<v.length;M++){w.index>M?(C=w,w=null):C=w.sibling;var S=d(m,w,v[M],x);if(S===null){w===null&&(w=C);break}n&&w&&S.alternate===null&&e(m,w),_=s(S,_,M),T===null?b=S:T.sibling=S,T=S,w=C}if(M===v.length)return t(m,w),In&&Kc(m,M),b;if(w===null){for(;M<v.length;M++)w=h(m,v[M],x),w!==null&&(_=s(w,_,M),T===null?b=w:T.sibling=w,T=w);return In&&Kc(m,M),b}for(w=r(m,w);M<v.length;M++)C=f(w,m,M,v[M],x),C!==null&&(n&&C.alternate!==null&&w.delete(C.key===null?M:C.key),_=s(C,_,M),T===null?b=C:T.sibling=C,T=C);return n&&w.forEach(function(E){return e(m,E)}),In&&Kc(m,M),b}function g(m,_,v,x){var b=pp(v);if(typeof b!="function")throw Error(ke(150));if(v=b.call(v),v==null)throw Error(ke(151));for(var T=b=null,w=_,M=_=0,C=null,S=v.next();w!==null&&!S.done;M++,S=v.next()){w.index>M?(C=w,w=null):C=w.sibling;var E=d(m,w,S.value,x);if(E===null){w===null&&(w=C);break}n&&w&&E.alternate===null&&e(m,w),_=s(E,_,M),T===null?b=E:T.sibling=E,T=E,w=C}if(S.done)return t(m,w),In&&Kc(m,M),b;if(w===null){for(;!S.done;M++,S=v.next())S=h(m,S.value,x),S!==null&&(_=s(S,_,M),T===null?b=S:T.sibling=S,T=S);return In&&Kc(m,M),b}for(w=r(m,w);!S.done;M++,S=v.next())S=f(w,m,M,S.value,x),S!==null&&(n&&S.alternate!==null&&w.delete(S.key===null?M:S.key),_=s(S,_,M),T===null?b=S:T.sibling=S,T=S);return n&&w.forEach(function(I){return e(m,I)}),In&&Kc(m,M),b}function y(m,_,v,x){if(typeof v=="object"&&v!==null&&v.type===sd&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Fy:e:{for(var b=v.key,T=_;T!==null;){if(T.key===b){if(b=v.type,b===sd){if(T.tag===7){t(m,T.sibling),_=i(T,v.props.children),_.return=m,m=_;break e}}else if(T.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Fl&&CI(b)===T.type){t(m,T.sibling),_=i(T,v.props),_.ref=_p(m,T,v),_.return=m,m=_;break e}t(m,T);break}else e(m,T);T=T.sibling}v.type===sd?(_=Tu(v.props.children,m.mode,x,v.key),_.return=m,m=_):(x=Bv(v.type,v.key,v.props,null,m.mode,x),x.ref=_p(m,_,v),x.return=m,m=x)}return o(m);case id:e:{for(T=v.key;_!==null;){if(_.key===T)if(_.tag===4&&_.stateNode.containerInfo===v.containerInfo&&_.stateNode.implementation===v.implementation){t(m,_.sibling),_=i(_,v.children||[]),_.return=m,m=_;break e}else{t(m,_);break}else e(m,_);_=_.sibling}_=$1(v,m.mode,x),_.return=m,m=_}return o(m);case Fl:return T=v._init,y(m,_,T(v._payload),x)}if(hm(v))return p(m,_,v,x);if(pp(v))return g(m,_,v,x);qy(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,_!==null&&_.tag===6?(t(m,_.sibling),_=i(_,v),_.return=m,m=_):(t(m,_),_=z1(v,m.mode,x),_.return=m,m=_),o(m)):t(m,_)}return y}var ff=TB(!0),MB=TB(!1),D_=Mc(null),O_=null,fd=null,CR=null;function RR(){CR=fd=O_=null}function NR(n){var e=D_.current;An(D_),n._currentValue=e}function HM(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Pd(n,e){O_=n,CR=fd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(bi=!0),n.firstContext=null)}function Os(n){var e=n._currentValue;if(CR!==n)if(n={context:n,memoizedValue:e,next:null},fd===null){if(O_===null)throw Error(ke(308));fd=n,O_.dependencies={lanes:0,firstContext:n}}else fd=fd.next=n;return e}var cu=null;function PR(n){cu===null?cu=[n]:cu.push(n)}function EB(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,PR(e)):(t.next=i.next,i.next=t),e.interleaved=t,Za(n,r)}function Za(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var kl=!1;function IR(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AB(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Va(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function oc(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,zt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Za(n,t)}return i=r.interleaved,i===null?(e.next=e,PR(r)):(e.next=i.next,i.next=e),r.interleaved=e,Za(n,t)}function Lv(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,yR(n,t)}}function RI(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function F_(n,e,t,r){var i=n.updateQueue;kl=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=n,g=a;switch(d=e,f=t,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=zn({},h,d);break e;case 2:kl=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ou|=o,n.lanes=o,n.memoizedState=h}}function NI(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(ke(191,i));i.call(r)}}}var ey={},Wo=Mc(ey),dg=Mc(ey),fg=Mc(ey);function uu(n){if(n===ey)throw Error(ke(174));return n}function LR(n,e){switch(_n(fg,e),_n(dg,n),_n(Wo,ey),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:TM(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=TM(e,n)}An(Wo),_n(Wo,e)}function pf(){An(Wo),An(dg),An(fg)}function CB(n){uu(fg.current);var e=uu(Wo.current),t=TM(e,n.type);e!==t&&(_n(dg,n),_n(Wo,t))}function DR(n){dg.current===n&&(An(Wo),An(dg))}var On=Mc(0);function k_(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var D1=[];function OR(){for(var n=0;n<D1.length;n++)D1[n]._workInProgressVersionPrimary=null;D1.length=0}var Dv=ol.ReactCurrentDispatcher,O1=ol.ReactCurrentBatchConfig,Du=0,Un=null,pr=null,Sr=null,U_=!1,Dm=!1,pg=0,kj=0;function zr(){throw Error(ke(321))}function FR(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!_o(n[t],e[t]))return!1;return!0}function kR(n,e,t,r,i,s){if(Du=s,Un=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dv.current=n===null||n.memoizedState===null?$j:Vj,n=t(r,i),Dm){s=0;do{if(Dm=!1,pg=0,25<=s)throw Error(ke(301));s+=1,Sr=pr=null,e.updateQueue=null,Dv.current=Gj,n=t(r,i)}while(Dm)}if(Dv.current=B_,e=pr!==null&&pr.next!==null,Du=0,Sr=pr=Un=null,U_=!1,e)throw Error(ke(300));return n}function UR(){var n=pg!==0;return pg=0,n}function Po(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?Un.memoizedState=Sr=n:Sr=Sr.next=n,Sr}function Fs(){if(pr===null){var n=Un.alternate;n=n!==null?n.memoizedState:null}else n=pr.next;var e=Sr===null?Un.memoizedState:Sr.next;if(e!==null)Sr=e,pr=n;else{if(n===null)throw Error(ke(310));pr=n,n={memoizedState:pr.memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},Sr===null?Un.memoizedState=Sr=n:Sr=Sr.next=n}return Sr}function mg(n,e){return typeof e=="function"?e(n):e}function F1(n){var e=Fs(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=n;var r=pr,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Du&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Un.lanes|=u,Ou|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,_o(r,e.memoizedState)||(bi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Un.lanes|=s,Ou|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function k1(n){var e=Fs(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);_o(s,e.memoizedState)||(bi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function RB(){}function NB(n,e){var t=Un,r=Fs(),i=e(),s=!_o(r.memoizedState,i);if(s&&(r.memoizedState=i,bi=!0),r=r.queue,BR(LB.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Sr!==null&&Sr.memoizedState.tag&1){if(t.flags|=2048,gg(9,IB.bind(null,t,r,i,e),void 0,null),Er===null)throw Error(ke(349));Du&30||PB(t,e,i)}return i}function PB(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Un.updateQueue,e===null?(e={lastEffect:null,stores:null},Un.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function IB(n,e,t,r){e.value=t,e.getSnapshot=r,DB(e)&&OB(n)}function LB(n,e,t){return t(function(){DB(e)&&OB(n)})}function DB(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!_o(n,t)}catch{return!0}}function OB(n){var e=Za(n,1);e!==null&&go(e,n,1,-1)}function PI(n){var e=Po();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mg,lastRenderedState:n},e.queue=n,n=n.dispatch=zj.bind(null,Un,n),[e.memoizedState,n]}function gg(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Un.updateQueue,e===null?(e={lastEffect:null,stores:null},Un.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function FB(){return Fs().memoizedState}function Ov(n,e,t,r){var i=Po();Un.flags|=n,i.memoizedState=gg(1|e,t,void 0,r===void 0?null:r)}function sS(n,e,t,r){var i=Fs();r=r===void 0?null:r;var s=void 0;if(pr!==null){var o=pr.memoizedState;if(s=o.destroy,r!==null&&FR(r,o.deps)){i.memoizedState=gg(e,t,s,r);return}}Un.flags|=n,i.memoizedState=gg(1|e,t,s,r)}function II(n,e){return Ov(8390656,8,n,e)}function BR(n,e){return sS(2048,8,n,e)}function kB(n,e){return sS(4,2,n,e)}function UB(n,e){return sS(4,4,n,e)}function BB(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function zB(n,e,t){return t=t!=null?t.concat([n]):null,sS(4,4,BB.bind(null,e,n),t)}function zR(){}function $B(n,e){var t=Fs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&FR(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function VB(n,e){var t=Fs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&FR(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function GB(n,e,t){return Du&21?(_o(t,e)||(t=X3(),Un.lanes|=t,Ou|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,bi=!0),n.memoizedState=t)}function Uj(n,e){var t=un;un=t!==0&&4>t?t:4,n(!0);var r=O1.transition;O1.transition={};try{n(!1),e()}finally{un=t,O1.transition=r}}function HB(){return Fs().memoizedState}function Bj(n,e,t){var r=lc(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},WB(n))jB(e,t);else if(t=EB(n,e,t,r),t!==null){var i=di();go(t,n,r,i),qB(t,e,r)}}function zj(n,e,t){var r=lc(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(WB(n))jB(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,_o(a,o)){var l=e.interleaved;l===null?(i.next=i,PR(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=EB(n,e,i,r),t!==null&&(i=di(),go(t,n,r,i),qB(t,e,r))}}function WB(n){var e=n.alternate;return n===Un||e!==null&&e===Un}function jB(n,e){Dm=U_=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function qB(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,yR(n,t)}}var B_={readContext:Os,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useInsertionEffect:zr,useLayoutEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useMutableSource:zr,useSyncExternalStore:zr,useId:zr,unstable_isNewReconciler:!1},$j={readContext:Os,useCallback:function(n,e){return Po().memoizedState=[n,e===void 0?null:e],n},useContext:Os,useEffect:II,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ov(4194308,4,BB.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ov(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ov(4,2,n,e)},useMemo:function(n,e){var t=Po();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Po();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Bj.bind(null,Un,n),[r.memoizedState,n]},useRef:function(n){var e=Po();return n={current:n},e.memoizedState=n},useState:PI,useDebugValue:zR,useDeferredValue:function(n){return Po().memoizedState=n},useTransition:function(){var n=PI(!1),e=n[0];return n=Uj.bind(null,n[1]),Po().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Un,i=Po();if(In){if(t===void 0)throw Error(ke(407));t=t()}else{if(t=e(),Er===null)throw Error(ke(349));Du&30||PB(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,II(LB.bind(null,r,s,n),[n]),r.flags|=2048,gg(9,IB.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Po(),e=Er.identifierPrefix;if(In){var t=Da,r=La;t=(r&~(1<<32-mo(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=pg++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=kj++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Vj={readContext:Os,useCallback:$B,useContext:Os,useEffect:BR,useImperativeHandle:zB,useInsertionEffect:kB,useLayoutEffect:UB,useMemo:VB,useReducer:F1,useRef:FB,useState:function(){return F1(mg)},useDebugValue:zR,useDeferredValue:function(n){var e=Fs();return GB(e,pr.memoizedState,n)},useTransition:function(){var n=F1(mg)[0],e=Fs().memoizedState;return[n,e]},useMutableSource:RB,useSyncExternalStore:NB,useId:HB,unstable_isNewReconciler:!1},Gj={readContext:Os,useCallback:$B,useContext:Os,useEffect:BR,useImperativeHandle:zB,useInsertionEffect:kB,useLayoutEffect:UB,useMemo:VB,useReducer:k1,useRef:FB,useState:function(){return k1(mg)},useDebugValue:zR,useDeferredValue:function(n){var e=Fs();return pr===null?e.memoizedState=n:GB(e,pr.memoizedState,n)},useTransition:function(){var n=k1(mg)[0],e=Fs().memoizedState;return[n,e]},useMutableSource:RB,useSyncExternalStore:NB,useId:HB,unstable_isNewReconciler:!1};function to(n,e){if(n&&n.defaultProps){e=zn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function WM(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:zn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var oS={isMounted:function(n){return(n=n._reactInternals)?Qu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=di(),i=lc(n),s=Va(r,i);s.payload=e,t!=null&&(s.callback=t),e=oc(n,s,i),e!==null&&(go(e,n,i,r),Lv(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=di(),i=lc(n),s=Va(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=oc(n,s,i),e!==null&&(go(e,n,i,r),Lv(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=di(),r=lc(n),i=Va(t,r);i.tag=2,e!=null&&(i.callback=e),e=oc(n,i,r),e!==null&&(go(e,n,r,t),Lv(e,n,r))}};function LI(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!lg(t,r)||!lg(i,s):!0}function XB(n,e,t){var r=!1,i=pc,s=e.contextType;return typeof s=="object"&&s!==null?s=Os(s):(i=Ci(e)?Iu:ei.current,r=e.contextTypes,s=(r=r!=null)?hf(n,i):pc),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oS,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function DI(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&oS.enqueueReplaceState(e,e.state,null)}function jM(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},IR(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Os(s):(s=Ci(e)?Iu:ei.current,i.context=hf(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(WM(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&oS.enqueueReplaceState(i,i.state,null),F_(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function mf(n,e){try{var t="",r=e;do t+=yW(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function U1(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function qM(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var Hj=typeof WeakMap=="function"?WeakMap:Map;function KB(n,e,t){t=Va(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){$_||($_=!0,rE=r),qM(n,e)},t}function YB(n,e,t){t=Va(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){qM(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){qM(n,e),typeof r!="function"&&(ac===null?ac=new Set([this]):ac.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function OI(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new Hj;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=i9.bind(null,n,e,t),e.then(n,n))}function FI(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function kI(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Va(-1,1),e.tag=2,oc(t,e,1))),t.lanes|=1),n)}var Wj=ol.ReactCurrentOwner,bi=!1;function li(n,e,t,r){e.child=n===null?MB(e,null,t,r):ff(e,n.child,t,r)}function UI(n,e,t,r,i){t=t.render;var s=e.ref;return Pd(e,i),r=kR(n,e,t,r,s,i),t=UR(),n!==null&&!bi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ja(n,e,i)):(In&&t&&MR(e),e.flags|=1,li(n,e,r,i),e.child)}function BI(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!XR(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,QB(n,e,s,r,i)):(n=Bv(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:lg,t(o,r)&&n.ref===e.ref)return Ja(n,e,i)}return e.flags|=1,n=cc(s,r),n.ref=e.ref,n.return=e,e.child=n}function QB(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(lg(s,r)&&n.ref===e.ref)if(bi=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(bi=!0);else return e.lanes=n.lanes,Ja(n,e,i)}return XM(n,e,t,r,i)}function ZB(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(md,ts),ts|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,_n(md,ts),ts|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,_n(md,ts),ts|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,_n(md,ts),ts|=r;return li(n,e,i,t),e.child}function JB(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function XM(n,e,t,r,i){var s=Ci(t)?Iu:ei.current;return s=hf(e,s),Pd(e,i),t=kR(n,e,t,r,s,i),r=UR(),n!==null&&!bi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ja(n,e,i)):(In&&r&&MR(e),e.flags|=1,li(n,e,t,i),e.child)}function zI(n,e,t,r,i){if(Ci(t)){var s=!0;P_(e)}else s=!1;if(Pd(e,i),e.stateNode===null)Fv(n,e),XB(e,t,r),jM(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Os(c):(c=Ci(t)?Iu:ei.current,c=hf(e,c));var u=t.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&DI(e,o,r,c),kl=!1;var d=e.memoizedState;o.state=d,F_(e,r,o,i),l=e.memoizedState,a!==r||d!==l||Ai.current||kl?(typeof u=="function"&&(WM(e,t,u,r),l=e.memoizedState),(a=kl||LI(e,t,a,r,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,AB(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:to(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Os(l):(l=Ci(t)?Iu:ei.current,l=hf(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&DI(e,o,r,l),kl=!1,d=e.memoizedState,o.state=d,F_(e,r,o,i);var p=e.memoizedState;a!==h||d!==p||Ai.current||kl?(typeof f=="function"&&(WM(e,t,f,r),p=e.memoizedState),(c=kl||LI(e,t,c,r,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return KM(n,e,t,r,s,i)}function KM(n,e,t,r,i,s){JB(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&MI(e,t,!1),Ja(n,e,s);r=e.stateNode,Wj.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=ff(e,n.child,null,s),e.child=ff(e,null,a,s)):li(n,e,a,s),e.memoizedState=r.state,i&&MI(e,t,!0),e.child}function ez(n){var e=n.stateNode;e.pendingContext?TI(n,e.pendingContext,e.pendingContext!==e.context):e.context&&TI(n,e.context,!1),LR(n,e.containerInfo)}function $I(n,e,t,r,i){return df(),AR(i),e.flags|=256,li(n,e,t,r),e.child}var YM={dehydrated:null,treeContext:null,retryLane:0};function QM(n){return{baseLanes:n,cachePool:null,transitions:null}}function tz(n,e,t){var r=e.pendingProps,i=On.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),_n(On,i&1),n===null)return GM(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=cS(o,r,0,null),n=Tu(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=QM(t),e.memoizedState=YM,n):$R(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return jj(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=cc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=cc(a,s):(s=Tu(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?QM(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=YM,r}return s=n.child,n=s.sibling,r=cc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function $R(n,e){return e=cS({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Xy(n,e,t,r){return r!==null&&AR(r),ff(e,n.child,null,t),n=$R(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function jj(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=U1(Error(ke(422))),Xy(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=cS({mode:"visible",children:r.children},i,0,null),s=Tu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ff(e,n.child,null,o),e.child.memoizedState=QM(o),e.memoizedState=YM,s);if(!(e.mode&1))return Xy(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ke(419)),r=U1(s,r,void 0),Xy(n,e,o,r)}if(a=(o&n.childLanes)!==0,bi||a){if(r=Er,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Za(n,i),go(r,n,i,-1))}return qR(),r=U1(Error(ke(421))),Xy(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=s9.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,ss=sc(i.nextSibling),os=e,In=!0,so=null,n!==null&&(Ts[Ms++]=La,Ts[Ms++]=Da,Ts[Ms++]=Lu,La=n.id,Da=n.overflow,Lu=e),e=$R(e,r.children),e.flags|=4096,e)}function VI(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),HM(n.return,e,t)}function B1(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function nz(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(li(n,e,r.children,t),r=On.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&VI(n,t,e);else if(n.tag===19)VI(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(_n(On,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&k_(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),B1(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&k_(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}B1(e,!0,t,null,s);break;case"together":B1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fv(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ja(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Ou|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ke(153));if(e.child!==null){for(n=e.child,t=cc(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=cc(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function qj(n,e,t){switch(e.tag){case 3:ez(e),df();break;case 5:CB(e);break;case 1:Ci(e.type)&&P_(e);break;case 4:LR(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;_n(D_,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_n(On,On.current&1),e.flags|=128,null):t&e.child.childLanes?tz(n,e,t):(_n(On,On.current&1),n=Ja(n,e,t),n!==null?n.sibling:null);_n(On,On.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return nz(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_n(On,On.current),r)break;return null;case 22:case 23:return e.lanes=0,ZB(n,e,t)}return Ja(n,e,t)}var rz,ZM,iz,sz;rz=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};ZM=function(){};iz=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,uu(Wo.current);var s=null;switch(t){case"input":i=xM(n,i),r=xM(n,r),s=[];break;case"select":i=zn({},i,{value:void 0}),r=zn({},r,{value:void 0}),s=[];break;case"textarea":i=wM(n,i),r=wM(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=R_)}MM(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(tg.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(tg.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Sn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};sz=function(n,e,t,r){t!==r&&(e.flags|=4)};function xp(n,e){if(!In)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function $r(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Xj(n,e,t){var r=e.pendingProps;switch(ER(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $r(e),null;case 1:return Ci(e.type)&&N_(),$r(e),null;case 3:return r=e.stateNode,pf(),An(Ai),An(ei),OR(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(jy(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,so!==null&&(oE(so),so=null))),ZM(n,e),$r(e),null;case 5:DR(e);var i=uu(fg.current);if(t=e.type,n!==null&&e.stateNode!=null)iz(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ke(166));return $r(e),null}if(n=uu(Wo.current),jy(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[$o]=e,r[hg]=s,n=(e.mode&1)!==0,t){case"dialog":Sn("cancel",r),Sn("close",r);break;case"iframe":case"object":case"embed":Sn("load",r);break;case"video":case"audio":for(i=0;i<fm.length;i++)Sn(fm[i],r);break;case"source":Sn("error",r);break;case"img":case"image":case"link":Sn("error",r),Sn("load",r);break;case"details":Sn("toggle",r);break;case"input":Q2(r,s),Sn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Sn("invalid",r);break;case"textarea":J2(r,s),Sn("invalid",r)}MM(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Wy(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Wy(r.textContent,a,n),i=["children",""+a]):tg.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Sn("scroll",r)}switch(t){case"input":ky(r),Z2(r,s,!0);break;case"textarea":ky(r),eI(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=R_)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=L3(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[$o]=e,n[hg]=r,rz(n,e,!1,!1),e.stateNode=n;e:{switch(o=EM(t,r),t){case"dialog":Sn("cancel",n),Sn("close",n),i=r;break;case"iframe":case"object":case"embed":Sn("load",n),i=r;break;case"video":case"audio":for(i=0;i<fm.length;i++)Sn(fm[i],n);i=r;break;case"source":Sn("error",n),i=r;break;case"img":case"image":case"link":Sn("error",n),Sn("load",n),i=r;break;case"details":Sn("toggle",n),i=r;break;case"input":Q2(n,r),i=xM(n,r),Sn("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=zn({},r,{value:void 0}),Sn("invalid",n);break;case"textarea":J2(n,r),i=wM(n,r),Sn("invalid",n);break;default:i=r}MM(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?F3(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&D3(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&ng(n,l):typeof l=="number"&&ng(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(tg.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Sn("scroll",n):l!=null&&hR(n,s,l,o))}switch(t){case"input":ky(n),Z2(n,r,!1);break;case"textarea":ky(n),eI(n);break;case"option":r.value!=null&&n.setAttribute("value",""+fc(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Ad(n,!!r.multiple,s,!1):r.defaultValue!=null&&Ad(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=R_)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $r(e),null;case 6:if(n&&e.stateNode!=null)sz(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ke(166));if(t=uu(fg.current),uu(Wo.current),jy(e)){if(r=e.stateNode,t=e.memoizedProps,r[$o]=e,(s=r.nodeValue!==t)&&(n=os,n!==null))switch(n.tag){case 3:Wy(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Wy(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[$o]=e,e.stateNode=r}return $r(e),null;case 13:if(An(On),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(In&&ss!==null&&e.mode&1&&!(e.flags&128))wB(),df(),e.flags|=98560,s=!1;else if(s=jy(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(ke(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ke(317));s[$o]=e}else df(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$r(e),s=!1}else so!==null&&(oE(so),so=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||On.current&1?mr===0&&(mr=3):qR())),e.updateQueue!==null&&(e.flags|=4),$r(e),null);case 4:return pf(),ZM(n,e),n===null&&cg(e.stateNode.containerInfo),$r(e),null;case 10:return NR(e.type._context),$r(e),null;case 17:return Ci(e.type)&&N_(),$r(e),null;case 19:if(An(On),s=e.memoizedState,s===null)return $r(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)xp(s,!1);else{if(mr!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=k_(n),o!==null){for(e.flags|=128,xp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return _n(On,On.current&1|2),e.child}n=n.sibling}s.tail!==null&&Qn()>gf&&(e.flags|=128,r=!0,xp(s,!1),e.lanes=4194304)}else{if(!r)if(n=k_(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),xp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!In)return $r(e),null}else 2*Qn()-s.renderingStartTime>gf&&t!==1073741824&&(e.flags|=128,r=!0,xp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qn(),e.sibling=null,t=On.current,_n(On,r?t&1|2:t&1),e):($r(e),null);case 22:case 23:return jR(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ts&1073741824&&($r(e),e.subtreeFlags&6&&(e.flags|=8192)):$r(e),null;case 24:return null;case 25:return null}throw Error(ke(156,e.tag))}function Kj(n,e){switch(ER(e),e.tag){case 1:return Ci(e.type)&&N_(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return pf(),An(Ai),An(ei),OR(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return DR(e),null;case 13:if(An(On),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ke(340));df()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return An(On),null;case 4:return pf(),null;case 10:return NR(e.type._context),null;case 22:case 23:return jR(),null;case 24:return null;default:return null}}var Ky=!1,Kr=!1,Yj=typeof WeakSet=="function"?WeakSet:Set,Je=null;function pd(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Wn(n,e,r)}else t.current=null}function JM(n,e,t){try{t()}catch(r){Wn(n,e,r)}}var GI=!1;function Qj(n,e){if(FM=E_,n=uB(),TR(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=n,d=null;t:for(;;){for(var f;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===n)break t;if(d===t&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(kM={focusedElem:n,selectionRange:t},E_=!1,Je=e;Je!==null;)if(e=Je,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Je=n;else for(;Je!==null;){e=Je;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,y=p.memoizedState,m=e.stateNode,_=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:to(e.type,g),y);m.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(x){Wn(e,e.return,x)}if(n=e.sibling,n!==null){n.return=e.return,Je=n;break}Je=e.return}return p=GI,GI=!1,p}function Om(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&JM(e,t,s)}i=i.next}while(i!==r)}}function aS(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function eE(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function oz(n){var e=n.alternate;e!==null&&(n.alternate=null,oz(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[$o],delete e[hg],delete e[zM],delete e[Lj],delete e[Dj])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function az(n){return n.tag===5||n.tag===3||n.tag===4}function HI(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||az(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function tE(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=R_));else if(r!==4&&(n=n.child,n!==null))for(tE(n,e,t),n=n.sibling;n!==null;)tE(n,e,t),n=n.sibling}function nE(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(nE(n,e,t),n=n.sibling;n!==null;)nE(n,e,t),n=n.sibling}var Ir=null,ro=!1;function pl(n,e,t){for(t=t.child;t!==null;)lz(n,e,t),t=t.sibling}function lz(n,e,t){if(Ho&&typeof Ho.onCommitFiberUnmount=="function")try{Ho.onCommitFiberUnmount(Jx,t)}catch{}switch(t.tag){case 5:Kr||pd(t,e);case 6:var r=Ir,i=ro;Ir=null,pl(n,e,t),Ir=r,ro=i,Ir!==null&&(ro?(n=Ir,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ir.removeChild(t.stateNode));break;case 18:Ir!==null&&(ro?(n=Ir,t=t.stateNode,n.nodeType===8?I1(n.parentNode,t):n.nodeType===1&&I1(n,t),og(n)):I1(Ir,t.stateNode));break;case 4:r=Ir,i=ro,Ir=t.stateNode.containerInfo,ro=!0,pl(n,e,t),Ir=r,ro=i;break;case 0:case 11:case 14:case 15:if(!Kr&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&JM(t,e,o),i=i.next}while(i!==r)}pl(n,e,t);break;case 1:if(!Kr&&(pd(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Wn(t,e,a)}pl(n,e,t);break;case 21:pl(n,e,t);break;case 22:t.mode&1?(Kr=(r=Kr)||t.memoizedState!==null,pl(n,e,t),Kr=r):pl(n,e,t);break;default:pl(n,e,t)}}function WI(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Yj),e.forEach(function(r){var i=o9.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Hs(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ir=a.stateNode,ro=!1;break e;case 3:Ir=a.stateNode.containerInfo,ro=!0;break e;case 4:Ir=a.stateNode.containerInfo,ro=!0;break e}a=a.return}if(Ir===null)throw Error(ke(160));lz(s,o,i),Ir=null,ro=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Wn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cz(e,n),e=e.sibling}function cz(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Hs(e,n),Ao(n),r&4){try{Om(3,n,n.return),aS(3,n)}catch(g){Wn(n,n.return,g)}try{Om(5,n,n.return)}catch(g){Wn(n,n.return,g)}}break;case 1:Hs(e,n),Ao(n),r&512&&t!==null&&pd(t,t.return);break;case 5:if(Hs(e,n),Ao(n),r&512&&t!==null&&pd(t,t.return),n.flags&32){var i=n.stateNode;try{ng(i,"")}catch(g){Wn(n,n.return,g)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&P3(i,s),EM(a,o);var c=EM(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?F3(i,h):u==="dangerouslySetInnerHTML"?D3(i,h):u==="children"?ng(i,h):hR(i,u,h,c)}switch(a){case"input":SM(i,s);break;case"textarea":I3(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Ad(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ad(i,!!s.multiple,s.defaultValue,!0):Ad(i,!!s.multiple,s.multiple?[]:"",!1))}i[hg]=s}catch(g){Wn(n,n.return,g)}}break;case 6:if(Hs(e,n),Ao(n),r&4){if(n.stateNode===null)throw Error(ke(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(g){Wn(n,n.return,g)}}break;case 3:if(Hs(e,n),Ao(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{og(e.containerInfo)}catch(g){Wn(n,n.return,g)}break;case 4:Hs(e,n),Ao(n);break;case 13:Hs(e,n),Ao(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(HR=Qn())),r&4&&WI(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Kr=(c=Kr)||u,Hs(e,n),Kr=c):Hs(e,n),Ao(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(Je=n,u=n.child;u!==null;){for(h=Je=u;Je!==null;){switch(d=Je,f=d.child,d.tag){case 0:case 11:case 14:case 15:Om(4,d,d.return);break;case 1:pd(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Wn(r,t,g)}}break;case 5:pd(d,d.return);break;case 22:if(d.memoizedState!==null){qI(h);continue}}f!==null?(f.return=d,Je=f):qI(h)}u=u.sibling}e:for(u=null,h=n;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=O3("display",o))}catch(g){Wn(n,n.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Wn(n,n.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Hs(e,n),Ao(n),r&4&&WI(n);break;case 21:break;default:Hs(e,n),Ao(n)}}function Ao(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(az(t)){var r=t;break e}t=t.return}throw Error(ke(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ng(i,""),r.flags&=-33);var s=HI(n);nE(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=HI(n);tE(n,a,o);break;default:throw Error(ke(161))}}catch(l){Wn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Zj(n,e,t){Je=n,uz(n)}function uz(n,e,t){for(var r=(n.mode&1)!==0;Je!==null;){var i=Je,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ky;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Kr;a=Ky;var c=Kr;if(Ky=o,(Kr=l)&&!c)for(Je=i;Je!==null;)o=Je,l=o.child,o.tag===22&&o.memoizedState!==null?XI(i):l!==null?(l.return=o,Je=l):XI(i);for(;s!==null;)Je=s,uz(s),s=s.sibling;Je=i,Ky=a,Kr=c}jI(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Je=s):jI(n)}}function jI(n){for(;Je!==null;){var e=Je;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kr||aS(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Kr)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:to(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&NI(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}NI(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&og(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}Kr||e.flags&512&&eE(e)}catch(d){Wn(e,e.return,d)}}if(e===n){Je=null;break}if(t=e.sibling,t!==null){t.return=e.return,Je=t;break}Je=e.return}}function qI(n){for(;Je!==null;){var e=Je;if(e===n){Je=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Je=t;break}Je=e.return}}function XI(n){for(;Je!==null;){var e=Je;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{aS(4,e)}catch(l){Wn(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Wn(e,i,l)}}var s=e.return;try{eE(e)}catch(l){Wn(e,s,l)}break;case 5:var o=e.return;try{eE(e)}catch(l){Wn(e,o,l)}}}catch(l){Wn(e,e.return,l)}if(e===n){Je=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Je=a;break}Je=e.return}}var Jj=Math.ceil,z_=ol.ReactCurrentDispatcher,VR=ol.ReactCurrentOwner,Ps=ol.ReactCurrentBatchConfig,zt=0,Er=null,or=null,Ur=0,ts=0,md=Mc(0),mr=0,yg=null,Ou=0,lS=0,GR=0,Fm=null,xi=null,HR=0,gf=1/0,_a=null,$_=!1,rE=null,ac=null,Yy=!1,tc=null,V_=0,km=0,iE=null,kv=-1,Uv=0;function di(){return zt&6?Qn():kv!==-1?kv:kv=Qn()}function lc(n){return n.mode&1?zt&2&&Ur!==0?Ur&-Ur:Fj.transition!==null?(Uv===0&&(Uv=X3()),Uv):(n=un,n!==0||(n=window.event,n=n===void 0?16:tB(n.type)),n):1}function go(n,e,t,r){if(50<km)throw km=0,iE=null,Error(ke(185));Qg(n,t,r),(!(zt&2)||n!==Er)&&(n===Er&&(!(zt&2)&&(lS|=t),mr===4&&Vl(n,Ur)),Ri(n,r),t===1&&zt===0&&!(e.mode&1)&&(gf=Qn()+500,iS&&Ec()))}function Ri(n,e){var t=n.callbackNode;FW(n,e);var r=M_(n,n===Er?Ur:0);if(r===0)t!==null&&rI(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&rI(t),e===1)n.tag===0?Oj(KI.bind(null,n)):xB(KI.bind(null,n)),Pj(function(){!(zt&6)&&Ec()}),t=null;else{switch(K3(r)){case 1:t=gR;break;case 4:t=j3;break;case 16:t=T_;break;case 536870912:t=q3;break;default:t=T_}t=vz(t,hz.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function hz(n,e){if(kv=-1,Uv=0,zt&6)throw Error(ke(327));var t=n.callbackNode;if(Id()&&n.callbackNode!==t)return null;var r=M_(n,n===Er?Ur:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=G_(n,r);else{e=r;var i=zt;zt|=2;var s=fz();(Er!==n||Ur!==e)&&(_a=null,gf=Qn()+500,wu(n,e));do try{n9();break}catch(a){dz(n,a)}while(!0);RR(),z_.current=s,zt=i,or!==null?e=0:(Er=null,Ur=0,e=mr)}if(e!==0){if(e===2&&(i=PM(n),i!==0&&(r=i,e=sE(n,i))),e===1)throw t=yg,wu(n,0),Vl(n,r),Ri(n,Qn()),t;if(e===6)Vl(n,r);else{if(i=n.current.alternate,!(r&30)&&!e9(i)&&(e=G_(n,r),e===2&&(s=PM(n),s!==0&&(r=s,e=sE(n,s))),e===1))throw t=yg,wu(n,0),Vl(n,r),Ri(n,Qn()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(ke(345));case 2:Yc(n,xi,_a);break;case 3:if(Vl(n,r),(r&130023424)===r&&(e=HR+500-Qn(),10<e)){if(M_(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){di(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=BM(Yc.bind(null,n,xi,_a),e);break}Yc(n,xi,_a);break;case 4:if(Vl(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-mo(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Qn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Jj(r/1960))-r,10<r){n.timeoutHandle=BM(Yc.bind(null,n,xi,_a),r);break}Yc(n,xi,_a);break;case 5:Yc(n,xi,_a);break;default:throw Error(ke(329))}}}return Ri(n,Qn()),n.callbackNode===t?hz.bind(null,n):null}function sE(n,e){var t=Fm;return n.current.memoizedState.isDehydrated&&(wu(n,e).flags|=256),n=G_(n,e),n!==2&&(e=xi,xi=t,e!==null&&oE(e)),n}function oE(n){xi===null?xi=n:xi.push.apply(xi,n)}function e9(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!_o(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vl(n,e){for(e&=~GR,e&=~lS,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-mo(e),r=1<<t;n[t]=-1,e&=~r}}function KI(n){if(zt&6)throw Error(ke(327));Id();var e=M_(n,0);if(!(e&1))return Ri(n,Qn()),null;var t=G_(n,e);if(n.tag!==0&&t===2){var r=PM(n);r!==0&&(e=r,t=sE(n,r))}if(t===1)throw t=yg,wu(n,0),Vl(n,e),Ri(n,Qn()),t;if(t===6)throw Error(ke(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Yc(n,xi,_a),Ri(n,Qn()),null}function WR(n,e){var t=zt;zt|=1;try{return n(e)}finally{zt=t,zt===0&&(gf=Qn()+500,iS&&Ec())}}function Fu(n){tc!==null&&tc.tag===0&&!(zt&6)&&Id();var e=zt;zt|=1;var t=Ps.transition,r=un;try{if(Ps.transition=null,un=1,n)return n()}finally{un=r,Ps.transition=t,zt=e,!(zt&6)&&Ec()}}function jR(){ts=md.current,An(md)}function wu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,Nj(t)),or!==null)for(t=or.return;t!==null;){var r=t;switch(ER(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&N_();break;case 3:pf(),An(Ai),An(ei),OR();break;case 5:DR(r);break;case 4:pf();break;case 13:An(On);break;case 19:An(On);break;case 10:NR(r.type._context);break;case 22:case 23:jR()}t=t.return}if(Er=n,or=n=cc(n.current,null),Ur=ts=e,mr=0,yg=null,GR=lS=Ou=0,xi=Fm=null,cu!==null){for(e=0;e<cu.length;e++)if(t=cu[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}cu=null}return n}function dz(n,e){do{var t=or;try{if(RR(),Dv.current=B_,U_){for(var r=Un.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}U_=!1}if(Du=0,Sr=pr=Un=null,Dm=!1,pg=0,VR.current=null,t===null||t.return===null){mr=1,yg=e,or=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Ur,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=FI(o);if(f!==null){f.flags&=-257,kI(f,o,a,s,e),f.mode&1&&OI(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){OI(s,c,e),qR();break e}l=Error(ke(426))}}else if(In&&a.mode&1){var y=FI(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),kI(y,o,a,s,e),AR(mf(l,a));break e}}s=l=mf(l,a),mr!==4&&(mr=2),Fm===null?Fm=[s]:Fm.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=KB(s,l,e);RI(s,m);break e;case 1:a=l;var _=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ac===null||!ac.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=YB(s,a,e);RI(s,x);break e}}s=s.return}while(s!==null)}mz(t)}catch(b){e=b,or===t&&t!==null&&(or=t=t.return);continue}break}while(!0)}function fz(){var n=z_.current;return z_.current=B_,n===null?B_:n}function qR(){(mr===0||mr===3||mr===2)&&(mr=4),Er===null||!(Ou&268435455)&&!(lS&268435455)||Vl(Er,Ur)}function G_(n,e){var t=zt;zt|=2;var r=fz();(Er!==n||Ur!==e)&&(_a=null,wu(n,e));do try{t9();break}catch(i){dz(n,i)}while(!0);if(RR(),zt=t,z_.current=r,or!==null)throw Error(ke(261));return Er=null,Ur=0,mr}function t9(){for(;or!==null;)pz(or)}function n9(){for(;or!==null&&!AW();)pz(or)}function pz(n){var e=yz(n.alternate,n,ts);n.memoizedProps=n.pendingProps,e===null?mz(n):or=e,VR.current=null}function mz(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Kj(t,e),t!==null){t.flags&=32767,or=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{mr=6,or=null;return}}else if(t=Xj(t,e,ts),t!==null){or=t;return}if(e=e.sibling,e!==null){or=e;return}or=e=n}while(e!==null);mr===0&&(mr=5)}function Yc(n,e,t){var r=un,i=Ps.transition;try{Ps.transition=null,un=1,r9(n,e,t,r)}finally{Ps.transition=i,un=r}return null}function r9(n,e,t,r){do Id();while(tc!==null);if(zt&6)throw Error(ke(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ke(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(kW(n,s),n===Er&&(or=Er=null,Ur=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Yy||(Yy=!0,vz(T_,function(){return Id(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ps.transition,Ps.transition=null;var o=un;un=1;var a=zt;zt|=4,VR.current=null,Qj(n,t),cz(t,n),wj(kM),E_=!!FM,kM=FM=null,n.current=t,Zj(t),CW(),zt=a,un=o,Ps.transition=s}else n.current=t;if(Yy&&(Yy=!1,tc=n,V_=i),s=n.pendingLanes,s===0&&(ac=null),PW(t.stateNode),Ri(n,Qn()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if($_)throw $_=!1,n=rE,rE=null,n;return V_&1&&n.tag!==0&&Id(),s=n.pendingLanes,s&1?n===iE?km++:(km=0,iE=n):km=0,Ec(),null}function Id(){if(tc!==null){var n=K3(V_),e=Ps.transition,t=un;try{if(Ps.transition=null,un=16>n?16:n,tc===null)var r=!1;else{if(n=tc,tc=null,V_=0,zt&6)throw Error(ke(331));var i=zt;for(zt|=4,Je=n.current;Je!==null;){var s=Je,o=s.child;if(Je.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Je=c;Je!==null;){var u=Je;switch(u.tag){case 0:case 11:case 15:Om(8,u,s)}var h=u.child;if(h!==null)h.return=u,Je=h;else for(;Je!==null;){u=Je;var d=u.sibling,f=u.return;if(oz(u),u===c){Je=null;break}if(d!==null){d.return=f,Je=d;break}Je=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Je=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Je=o;else e:for(;Je!==null;){if(s=Je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Om(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Je=m;break e}Je=s.return}}var _=n.current;for(Je=_;Je!==null;){o=Je;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Je=v;else e:for(o=_;Je!==null;){if(a=Je,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:aS(9,a)}}catch(b){Wn(a,a.return,b)}if(a===o){Je=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Je=x;break e}Je=a.return}}if(zt=i,Ec(),Ho&&typeof Ho.onPostCommitFiberRoot=="function")try{Ho.onPostCommitFiberRoot(Jx,n)}catch{}r=!0}return r}finally{un=t,Ps.transition=e}}return!1}function YI(n,e,t){e=mf(t,e),e=KB(n,e,1),n=oc(n,e,1),e=di(),n!==null&&(Qg(n,1,e),Ri(n,e))}function Wn(n,e,t){if(n.tag===3)YI(n,n,t);else for(;e!==null;){if(e.tag===3){YI(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ac===null||!ac.has(r))){n=mf(t,n),n=YB(e,n,1),e=oc(e,n,1),n=di(),e!==null&&(Qg(e,1,n),Ri(e,n));break}}e=e.return}}function i9(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=di(),n.pingedLanes|=n.suspendedLanes&t,Er===n&&(Ur&t)===t&&(mr===4||mr===3&&(Ur&130023424)===Ur&&500>Qn()-HR?wu(n,0):GR|=t),Ri(n,e)}function gz(n,e){e===0&&(n.mode&1?(e=zy,zy<<=1,!(zy&130023424)&&(zy=4194304)):e=1);var t=di();n=Za(n,e),n!==null&&(Qg(n,e,t),Ri(n,t))}function s9(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),gz(n,t)}function o9(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(ke(314))}r!==null&&r.delete(e),gz(n,t)}var yz;yz=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ai.current)bi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return bi=!1,qj(n,e,t);bi=!!(n.flags&131072)}else bi=!1,In&&e.flags&1048576&&SB(e,L_,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fv(n,e),n=e.pendingProps;var i=hf(e,ei.current);Pd(e,t),i=kR(null,e,r,n,i,t);var s=UR();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ci(r)?(s=!0,P_(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,IR(e),i.updater=oS,e.stateNode=i,i._reactInternals=e,jM(e,r,n,t),e=KM(null,e,r,!0,s,t)):(e.tag=0,In&&s&&MR(e),li(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Fv(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=l9(r),n=to(r,n),i){case 0:e=XM(null,e,r,n,t);break e;case 1:e=zI(null,e,r,n,t);break e;case 11:e=UI(null,e,r,n,t);break e;case 14:e=BI(null,e,r,to(r.type,n),t);break e}throw Error(ke(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:to(r,i),XM(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:to(r,i),zI(n,e,r,i,t);case 3:e:{if(ez(e),n===null)throw Error(ke(387));r=e.pendingProps,s=e.memoizedState,i=s.element,AB(n,e),F_(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=mf(Error(ke(423)),e),e=$I(n,e,r,t,i);break e}else if(r!==i){i=mf(Error(ke(424)),e),e=$I(n,e,r,t,i);break e}else for(ss=sc(e.stateNode.containerInfo.firstChild),os=e,In=!0,so=null,t=MB(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(df(),r===i){e=Ja(n,e,t);break e}li(n,e,r,t)}e=e.child}return e;case 5:return CB(e),n===null&&GM(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,UM(r,i)?o=null:s!==null&&UM(r,s)&&(e.flags|=32),JB(n,e),li(n,e,o,t),e.child;case 6:return n===null&&GM(e),null;case 13:return tz(n,e,t);case 4:return LR(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=ff(e,null,r,t):li(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:to(r,i),UI(n,e,r,i,t);case 7:return li(n,e,e.pendingProps,t),e.child;case 8:return li(n,e,e.pendingProps.children,t),e.child;case 12:return li(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,_n(D_,r._currentValue),r._currentValue=o,s!==null)if(_o(s.value,o)){if(s.children===i.children&&!Ai.current){e=Ja(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Va(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),HM(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ke(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),HM(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}li(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Pd(e,t),i=Os(i),r=r(i),e.flags|=1,li(n,e,r,t),e.child;case 14:return r=e.type,i=to(r,e.pendingProps),i=to(r.type,i),BI(n,e,r,i,t);case 15:return QB(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:to(r,i),Fv(n,e),e.tag=1,Ci(r)?(n=!0,P_(e)):n=!1,Pd(e,t),XB(e,r,i),jM(e,r,i,t),KM(null,e,r,!0,n,t);case 19:return nz(n,e,t);case 22:return ZB(n,e,t)}throw Error(ke(156,e.tag))};function vz(n,e){return W3(n,e)}function a9(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(n,e,t,r){return new a9(n,e,t,r)}function XR(n){return n=n.prototype,!(!n||!n.isReactComponent)}function l9(n){if(typeof n=="function")return XR(n)?1:0;if(n!=null){if(n=n.$$typeof,n===fR)return 11;if(n===pR)return 14}return 2}function cc(n,e){var t=n.alternate;return t===null?(t=Cs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Bv(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")XR(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case sd:return Tu(t.children,i,s,e);case dR:o=8,i|=8;break;case gM:return n=Cs(12,t,e,i|2),n.elementType=gM,n.lanes=s,n;case yM:return n=Cs(13,t,e,i),n.elementType=yM,n.lanes=s,n;case vM:return n=Cs(19,t,e,i),n.elementType=vM,n.lanes=s,n;case C3:return cS(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case E3:o=10;break e;case A3:o=9;break e;case fR:o=11;break e;case pR:o=14;break e;case Fl:o=16,r=null;break e}throw Error(ke(130,n==null?n:typeof n,""))}return e=Cs(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Tu(n,e,t,r){return n=Cs(7,n,r,e),n.lanes=t,n}function cS(n,e,t,r){return n=Cs(22,n,r,e),n.elementType=C3,n.lanes=t,n.stateNode={isHidden:!1},n}function z1(n,e,t){return n=Cs(6,n,null,e),n.lanes=t,n}function $1(n,e,t){return e=Cs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function c9(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=S1(0),this.expirationTimes=S1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=S1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function KR(n,e,t,r,i,s,o,a,l){return n=new c9(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Cs(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},IR(s),n}function u9(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:id,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function _z(n){if(!n)return pc;n=n._reactInternals;e:{if(Qu(n)!==n||n.tag!==1)throw Error(ke(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ci(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ke(171))}if(n.tag===1){var t=n.type;if(Ci(t))return _B(n,t,e)}return e}function xz(n,e,t,r,i,s,o,a,l){return n=KR(t,r,!0,n,i,s,o,a,l),n.context=_z(null),t=n.current,r=di(),i=lc(t),s=Va(r,i),s.callback=e??null,oc(t,s,i),n.current.lanes=i,Qg(n,i,r),Ri(n,r),n}function uS(n,e,t,r){var i=e.current,s=di(),o=lc(i);return t=_z(t),e.context===null?e.context=t:e.pendingContext=t,e=Va(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=oc(i,e,o),n!==null&&(go(n,i,o,s),Lv(n,i,o)),o}function H_(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function QI(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function YR(n,e){QI(n,e),(n=n.alternate)&&QI(n,e)}function h9(){return null}var Sz=typeof reportError=="function"?reportError:function(n){console.error(n)};function QR(n){this._internalRoot=n}hS.prototype.render=QR.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ke(409));uS(n,e,null,null)};hS.prototype.unmount=QR.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Fu(function(){uS(null,n,null,null)}),e[Qa]=null}};function hS(n){this._internalRoot=n}hS.prototype.unstable_scheduleHydration=function(n){if(n){var e=Z3();n={blockedOn:null,target:n,priority:e};for(var t=0;t<$l.length&&e!==0&&e<$l[t].priority;t++);$l.splice(t,0,n),t===0&&eB(n)}};function ZR(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function dS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ZI(){}function d9(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=H_(o);s.call(c)}}var o=xz(e,r,n,0,null,!1,!1,"",ZI);return n._reactRootContainer=o,n[Qa]=o.current,cg(n.nodeType===8?n.parentNode:n),Fu(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=H_(l);a.call(c)}}var l=KR(n,0,!1,null,null,!1,!1,"",ZI);return n._reactRootContainer=l,n[Qa]=l.current,cg(n.nodeType===8?n.parentNode:n),Fu(function(){uS(e,l,t,r)}),l}function fS(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=H_(o);a.call(l)}}uS(e,o,n,i)}else o=d9(t,e,n,i,r);return H_(o)}Y3=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=dm(e.pendingLanes);t!==0&&(yR(e,t|1),Ri(e,Qn()),!(zt&6)&&(gf=Qn()+500,Ec()))}break;case 13:Fu(function(){var r=Za(n,1);if(r!==null){var i=di();go(r,n,1,i)}}),YR(n,1)}};vR=function(n){if(n.tag===13){var e=Za(n,134217728);if(e!==null){var t=di();go(e,n,134217728,t)}YR(n,134217728)}};Q3=function(n){if(n.tag===13){var e=lc(n),t=Za(n,e);if(t!==null){var r=di();go(t,n,e,r)}YR(n,e)}};Z3=function(){return un};J3=function(n,e){var t=un;try{return un=n,e()}finally{un=t}};CM=function(n,e,t){switch(e){case"input":if(SM(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=rS(r);if(!i)throw Error(ke(90));N3(r),SM(r,i)}}}break;case"textarea":I3(n,t);break;case"select":e=t.value,e!=null&&Ad(n,!!t.multiple,e,!1)}};B3=WR;z3=Fu;var f9={usingClientEntryPoint:!1,Events:[Jg,cd,rS,k3,U3,WR]},Sp={findFiberByHostInstance:lu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p9={bundleType:Sp.bundleType,version:Sp.version,rendererPackageName:Sp.rendererPackageName,rendererConfig:Sp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ol.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=G3(n),n===null?null:n.stateNode},findFiberByHostInstance:Sp.findFiberByHostInstance||h9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qy.isDisabled&&Qy.supportsFiber)try{Jx=Qy.inject(p9),Ho=Qy}catch{}}hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f9;hs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ZR(e))throw Error(ke(200));return u9(n,e,null,t)};hs.createRoot=function(n,e){if(!ZR(n))throw Error(ke(299));var t=!1,r="",i=Sz;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=KR(n,1,!1,null,null,t,!1,r,i),n[Qa]=e.current,cg(n.nodeType===8?n.parentNode:n),new QR(e)};hs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ke(188)):(n=Object.keys(n).join(","),Error(ke(268,n)));return n=G3(e),n=n===null?null:n.stateNode,n};hs.flushSync=function(n){return Fu(n)};hs.hydrate=function(n,e,t){if(!dS(e))throw Error(ke(200));return fS(null,n,e,!0,t)};hs.hydrateRoot=function(n,e,t){if(!ZR(n))throw Error(ke(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=Sz;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=xz(e,null,n,1,t??null,i,!1,s,o),n[Qa]=e.current,cg(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new hS(e)};hs.render=function(n,e,t){if(!dS(e))throw Error(ke(200));return fS(null,n,e,!1,t)};hs.unmountComponentAtNode=function(n){if(!dS(n))throw Error(ke(40));return n._reactRootContainer?(Fu(function(){fS(null,null,n,!1,function(){n._reactRootContainer=null,n[Qa]=null})}),!0):!1};hs.unstable_batchedUpdates=WR;hs.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!dS(t))throw Error(ke(200));if(n==null||n._reactInternals===void 0)throw Error(ke(38));return fS(n,e,t,!1,r)};hs.version="18.3.1-next-f1338f8080-20240426";function bz(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bz)}catch(n){console.error(n)}}bz(),b3.exports=hs;var JR=b3.exports;const pm=Gf(JR);var JI=JR;pM.createRoot=JI.createRoot,pM.hydrateRoot=JI.hydrateRoot;const vg={black:"#000",white:"#fff"},ch={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},uh={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},wz={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},hh={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},dh={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},fh={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},bp={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m9={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},W_={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64"};function el(n,...e){const t=new URL(`https://mui.com/production-error/?code=${n}`);return e.forEach(r=>t.searchParams.append("args[]",r)),`Minified MUI error #${n}; visit ${t} for the full message.`}const yo="$$material";function ti(){return ti=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ti.apply(null,arguments)}function g9(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var y9=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,v9=g9(function(n){return y9.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),_9=!1;function x9(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function S9(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var b9=function(){function n(t){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=t.speedy===void 0?!_9:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(S9(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=x9(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},n}(),jr="-ms-",j_="-moz-",Ht="-webkit-",Tz="comm",eN="rule",tN="decl",w9="@import",Mz="@keyframes",T9="@layer",M9=Math.abs,pS=String.fromCharCode,E9=Object.assign;function A9(n,e){return Lr(n,0)^45?(((e<<2^Lr(n,0))<<2^Lr(n,1))<<2^Lr(n,2))<<2^Lr(n,3):0}function Ez(n){return n.trim()}function C9(n,e){return(n=e.exec(n))?n[0]:n}function Wt(n,e,t){return n.replace(e,t)}function aE(n,e){return n.indexOf(e)}function Lr(n,e){return n.charCodeAt(e)|0}function _g(n,e,t){return n.slice(e,t)}function Fo(n){return n.length}function nN(n){return n.length}function Zy(n,e){return e.push(n),n}function R9(n,e){return n.map(e).join("")}var mS=1,yf=1,Az=0,Di=0,rr=0,qf="";function gS(n,e,t,r,i,s,o){return{value:n,root:e,parent:t,type:r,props:i,children:s,line:mS,column:yf,length:o,return:""}}function wp(n,e){return E9(gS("",null,null,"",null,null,0),n,{length:-n.length},e)}function N9(){return rr}function P9(){return rr=Di>0?Lr(qf,--Di):0,yf--,rr===10&&(yf=1,mS--),rr}function as(){return rr=Di<Az?Lr(qf,Di++):0,yf++,rr===10&&(yf=1,mS++),rr}function jo(){return Lr(qf,Di)}function zv(){return Di}function ty(n,e){return _g(qf,n,e)}function xg(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Cz(n){return mS=yf=1,Az=Fo(qf=n),Di=0,[]}function Rz(n){return qf="",n}function $v(n){return Ez(ty(Di-1,lE(n===91?n+2:n===40?n+1:n)))}function I9(n){for(;(rr=jo())&&rr<33;)as();return xg(n)>2||xg(rr)>3?"":" "}function L9(n,e){for(;--e&&as()&&!(rr<48||rr>102||rr>57&&rr<65||rr>70&&rr<97););return ty(n,zv()+(e<6&&jo()==32&&as()==32))}function lE(n){for(;as();)switch(rr){case n:return Di;case 34:case 39:n!==34&&n!==39&&lE(rr);break;case 40:n===41&&lE(n);break;case 92:as();break}return Di}function D9(n,e){for(;as()&&n+rr!==57;)if(n+rr===84&&jo()===47)break;return"/*"+ty(e,Di-1)+"*"+pS(n===47?n:as())}function O9(n){for(;!xg(jo());)as();return ty(n,Di)}function F9(n){return Rz(Vv("",null,null,null,[""],n=Cz(n),0,[0],n))}function Vv(n,e,t,r,i,s,o,a,l){for(var c=0,u=0,h=o,d=0,f=0,p=0,g=1,y=1,m=1,_=0,v="",x=i,b=s,T=r,w=v;y;)switch(p=_,_=as()){case 40:if(p!=108&&Lr(w,h-1)==58){aE(w+=Wt($v(_),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:w+=$v(_);break;case 9:case 10:case 13:case 32:w+=I9(p);break;case 92:w+=L9(zv()-1,7);continue;case 47:switch(jo()){case 42:case 47:Zy(k9(D9(as(),zv()),e,t),l);break;default:w+="/"}break;case 123*g:a[c++]=Fo(w)*m;case 125*g:case 59:case 0:switch(_){case 0:case 125:y=0;case 59+u:m==-1&&(w=Wt(w,/\f/g,"")),f>0&&Fo(w)-h&&Zy(f>32?tL(w+";",r,t,h-1):tL(Wt(w," ","")+";",r,t,h-2),l);break;case 59:w+=";";default:if(Zy(T=eL(w,e,t,c,u,i,a,v,x=[],b=[],h),s),_===123)if(u===0)Vv(w,e,T,T,x,s,h,a,b);else switch(d===99&&Lr(w,3)===110?100:d){case 100:case 108:case 109:case 115:Vv(n,T,T,r&&Zy(eL(n,T,T,0,0,i,a,v,i,x=[],h),b),i,b,h,a,r?x:b);break;default:Vv(w,T,T,T,[""],b,0,a,b)}}c=u=f=0,g=m=1,v=w="",h=o;break;case 58:h=1+Fo(w),f=p;default:if(g<1){if(_==123)--g;else if(_==125&&g++==0&&P9()==125)continue}switch(w+=pS(_),_*g){case 38:m=u>0?1:(w+="\f",-1);break;case 44:a[c++]=(Fo(w)-1)*m,m=1;break;case 64:jo()===45&&(w+=$v(as())),d=jo(),u=h=Fo(v=w+=O9(zv())),_++;break;case 45:p===45&&Fo(w)==2&&(g=0)}}return s}function eL(n,e,t,r,i,s,o,a,l,c,u){for(var h=i-1,d=i===0?s:[""],f=nN(d),p=0,g=0,y=0;p<r;++p)for(var m=0,_=_g(n,h+1,h=M9(g=o[p])),v=n;m<f;++m)(v=Ez(g>0?d[m]+" "+_:Wt(_,/&\f/g,d[m])))&&(l[y++]=v);return gS(n,e,t,i===0?eN:a,l,c,u)}function k9(n,e,t){return gS(n,e,t,Tz,pS(N9()),_g(n,2,-2),0)}function tL(n,e,t,r){return gS(n,e,t,tN,_g(n,0,r),_g(n,r+1,-1),r)}function Ld(n,e){for(var t="",r=nN(n),i=0;i<r;i++)t+=e(n[i],i,n,e)||"";return t}function U9(n,e,t,r){switch(n.type){case T9:if(n.children.length)break;case w9:case tN:return n.return=n.return||n.value;case Tz:return"";case Mz:return n.return=n.value+"{"+Ld(n.children,r)+"}";case eN:n.value=n.props.join(",")}return Fo(t=Ld(n.children,r))?n.return=n.value+"{"+t+"}":""}function B9(n){var e=nN(n);return function(t,r,i,s){for(var o="",a=0;a<e;a++)o+=n[a](t,r,i,s)||"";return o}}function z9(n){return function(e){e.root||(e=e.return)&&n(e)}}var $9=function(e,t,r){for(var i=0,s=0;i=s,s=jo(),i===38&&s===12&&(t[r]=1),!xg(s);)as();return ty(e,Di)},V9=function(e,t){var r=-1,i=44;do switch(xg(i)){case 0:i===38&&jo()===12&&(t[r]=1),e[r]+=$9(Di-1,t,r);break;case 2:e[r]+=$v(i);break;case 4:if(i===44){e[++r]=jo()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=pS(i)}while(i=as());return e},G9=function(e,t){return Rz(V9(Cz(e),t))},nL=new WeakMap,H9=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!nL.get(r))&&!i){nL.set(e,!0);for(var s=[],o=G9(t,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},W9=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function Nz(n,e){switch(A9(n,e)){case 5103:return Ht+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ht+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Ht+n+j_+n+jr+n+n;case 6828:case 4268:return Ht+n+jr+n+n;case 6165:return Ht+n+jr+"flex-"+n+n;case 5187:return Ht+n+Wt(n,/(\w+).+(:[^]+)/,Ht+"box-$1$2"+jr+"flex-$1$2")+n;case 5443:return Ht+n+jr+"flex-item-"+Wt(n,/flex-|-self/,"")+n;case 4675:return Ht+n+jr+"flex-line-pack"+Wt(n,/align-content|flex-|-self/,"")+n;case 5548:return Ht+n+jr+Wt(n,"shrink","negative")+n;case 5292:return Ht+n+jr+Wt(n,"basis","preferred-size")+n;case 6060:return Ht+"box-"+Wt(n,"-grow","")+Ht+n+jr+Wt(n,"grow","positive")+n;case 4554:return Ht+Wt(n,/([^-])(transform)/g,"$1"+Ht+"$2")+n;case 6187:return Wt(Wt(Wt(n,/(zoom-|grab)/,Ht+"$1"),/(image-set)/,Ht+"$1"),n,"")+n;case 5495:case 3959:return Wt(n,/(image-set\([^]*)/,Ht+"$1$`$1");case 4968:return Wt(Wt(n,/(.+:)(flex-)?(.*)/,Ht+"box-pack:$3"+jr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ht+n+n;case 4095:case 3583:case 4068:case 2532:return Wt(n,/(.+)-inline(.+)/,Ht+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Fo(n)-1-e>6)switch(Lr(n,e+1)){case 109:if(Lr(n,e+4)!==45)break;case 102:return Wt(n,/(.+:)(.+)-([^]+)/,"$1"+Ht+"$2-$3$1"+j_+(Lr(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~aE(n,"stretch")?Nz(Wt(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Lr(n,e+1)!==115)break;case 6444:switch(Lr(n,Fo(n)-3-(~aE(n,"!important")&&10))){case 107:return Wt(n,":",":"+Ht)+n;case 101:return Wt(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ht+(Lr(n,14)===45?"inline-":"")+"box$3$1"+Ht+"$2$3$1"+jr+"$2box$3")+n}break;case 5936:switch(Lr(n,e+11)){case 114:return Ht+n+jr+Wt(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Ht+n+jr+Wt(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Ht+n+jr+Wt(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return Ht+n+jr+n+n}return n}var j9=function(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case tN:e.return=Nz(e.value,e.length);break;case Mz:return Ld([wp(e,{value:Wt(e.value,"@","@"+Ht)})],i);case eN:if(e.length)return R9(e.props,function(s){switch(C9(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ld([wp(e,{props:[Wt(s,/:(read-\w+)/,":"+j_+"$1")]})],i);case"::placeholder":return Ld([wp(e,{props:[Wt(s,/:(plac\w+)/,":"+Ht+"input-$1")]}),wp(e,{props:[Wt(s,/:(plac\w+)/,":"+j_+"$1")]}),wp(e,{props:[Wt(s,/:(plac\w+)/,jr+"input-$1")]})],i)}return""})}},q9=[j9],X9=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var y=g.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=e.stylisPlugins||q9,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(g){for(var y=g.getAttribute("data-emotion").split(" "),m=1;m<y.length;m++)s[y[m]]=!0;a.push(g)});var l,c=[H9,W9];{var u,h=[U9,z9(function(g){u.insert(g)})],d=B9(c.concat(i,h)),f=function(y){return Ld(F9(y),d)};l=function(y,m,_,v){u=_,f(y?y+"{"+m.styles+"}":m.styles),v&&(p.inserted[m.name]=!0)}}var p={key:t,sheet:new b9({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p},Pz={exports:{}},hn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cr=typeof Symbol=="function"&&Symbol.for,rN=Cr?Symbol.for("react.element"):60103,iN=Cr?Symbol.for("react.portal"):60106,yS=Cr?Symbol.for("react.fragment"):60107,vS=Cr?Symbol.for("react.strict_mode"):60108,_S=Cr?Symbol.for("react.profiler"):60114,xS=Cr?Symbol.for("react.provider"):60109,SS=Cr?Symbol.for("react.context"):60110,sN=Cr?Symbol.for("react.async_mode"):60111,bS=Cr?Symbol.for("react.concurrent_mode"):60111,wS=Cr?Symbol.for("react.forward_ref"):60112,TS=Cr?Symbol.for("react.suspense"):60113,K9=Cr?Symbol.for("react.suspense_list"):60120,MS=Cr?Symbol.for("react.memo"):60115,ES=Cr?Symbol.for("react.lazy"):60116,Y9=Cr?Symbol.for("react.block"):60121,Q9=Cr?Symbol.for("react.fundamental"):60117,Z9=Cr?Symbol.for("react.responder"):60118,J9=Cr?Symbol.for("react.scope"):60119;function fs(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case rN:switch(n=n.type,n){case sN:case bS:case yS:case _S:case vS:case TS:return n;default:switch(n=n&&n.$$typeof,n){case SS:case wS:case ES:case MS:case xS:return n;default:return e}}case iN:return e}}}function Iz(n){return fs(n)===bS}hn.AsyncMode=sN;hn.ConcurrentMode=bS;hn.ContextConsumer=SS;hn.ContextProvider=xS;hn.Element=rN;hn.ForwardRef=wS;hn.Fragment=yS;hn.Lazy=ES;hn.Memo=MS;hn.Portal=iN;hn.Profiler=_S;hn.StrictMode=vS;hn.Suspense=TS;hn.isAsyncMode=function(n){return Iz(n)||fs(n)===sN};hn.isConcurrentMode=Iz;hn.isContextConsumer=function(n){return fs(n)===SS};hn.isContextProvider=function(n){return fs(n)===xS};hn.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===rN};hn.isForwardRef=function(n){return fs(n)===wS};hn.isFragment=function(n){return fs(n)===yS};hn.isLazy=function(n){return fs(n)===ES};hn.isMemo=function(n){return fs(n)===MS};hn.isPortal=function(n){return fs(n)===iN};hn.isProfiler=function(n){return fs(n)===_S};hn.isStrictMode=function(n){return fs(n)===vS};hn.isSuspense=function(n){return fs(n)===TS};hn.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===yS||n===bS||n===_S||n===vS||n===TS||n===K9||typeof n=="object"&&n!==null&&(n.$$typeof===ES||n.$$typeof===MS||n.$$typeof===xS||n.$$typeof===SS||n.$$typeof===wS||n.$$typeof===Q9||n.$$typeof===Z9||n.$$typeof===J9||n.$$typeof===Y9)};hn.typeOf=fs;Pz.exports=hn;var e7=Pz.exports,Lz=e7,t7={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},n7={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Dz={};Dz[Lz.ForwardRef]=t7;Dz[Lz.Memo]=n7;var r7=!0;function i7(n,e,t){var r="";return t.split(" ").forEach(function(i){n[i]!==void 0?e.push(n[i]+";"):i&&(r+=i+" ")}),r}var Oz=function(e,t,r){var i=e.key+"-"+t.name;(r===!1||r7===!1)&&e.registered[i]===void 0&&(e.registered[i]=t.styles)},Fz=function(e,t,r){Oz(e,t,r);var i=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function s7(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var o7={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function a7(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var l7=!1,c7=/[A-Z]|^ms/g,u7=/_EMO_([^_]+?)_([^]*?)_EMO_/g,kz=function(e){return e.charCodeAt(1)===45},rL=function(e){return e!=null&&typeof e!="boolean"},V1=a7(function(n){return kz(n)?n:n.replace(c7,"-$&").toLowerCase()}),iL=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(u7,function(r,i,s){return ko={name:i,styles:s,next:ko},i})}return o7[e]!==1&&!kz(e)&&typeof t=="number"&&t!==0?t+"px":t},h7="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Sg(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var i=t;if(i.anim===1)return ko={name:i.name,styles:i.styles,next:ko},i.name;var s=t;if(s.styles!==void 0){var o=s.next;if(o!==void 0)for(;o!==void 0;)ko={name:o.name,styles:o.styles,next:ko},o=o.next;var a=s.styles+";";return a}return d7(n,e,t)}case"function":{if(n!==void 0){var l=ko,c=t(n);return ko=l,Sg(n,e,c)}break}}var u=t;if(e==null)return u;var h=e[u];return h!==void 0?h:u}function d7(n,e,t){var r="";if(Array.isArray(t))for(var i=0;i<t.length;i++)r+=Sg(n,e,t[i])+";";else for(var s in t){var o=t[s];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?r+=s+"{"+e[a]+"}":rL(a)&&(r+=V1(s)+":"+iL(s,a)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&l7)throw new Error(h7);if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)rL(o[l])&&(r+=V1(s)+":"+iL(s,o[l])+";");else{var c=Sg(n,e,o);switch(s){case"animation":case"animationName":{r+=V1(s)+":"+c+";";break}default:r+=s+"{"+c+"}"}}}}return r}var sL=/label:\s*([^\s;{]+)\s*(;|$)/g,ko;function AS(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,i="";ko=void 0;var s=n[0];if(s==null||s.raw===void 0)r=!1,i+=Sg(t,e,s);else{var o=s;i+=o[0]}for(var a=1;a<n.length;a++)if(i+=Sg(t,e,n[a]),r){var l=s;i+=l[a]}sL.lastIndex=0;for(var c="",u;(u=sL.exec(i))!==null;)c+="-"+u[1];var h=s7(i)+c;return{name:h,styles:i,next:ko}}var f7=function(e){return e()},Uz=x_.useInsertionEffect?x_.useInsertionEffect:!1,p7=Uz||f7,oL=Uz||P.useLayoutEffect,Bz=P.createContext(typeof HTMLElement<"u"?X9({key:"css"}):null);Bz.Provider;var zz=function(e){return P.forwardRef(function(t,r){var i=P.useContext(Bz);return e(t,i,r)})},CS=P.createContext({}),m7=zz(function(n,e){var t=n.styles,r=AS([t],void 0,P.useContext(CS)),i=P.useRef();return oL(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),oL(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&Fz(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function oN(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return AS(e)}var ny=function(){var e=oN.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},g7=v9,y7=function(e){return e!=="theme"},aL=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?g7:y7},lL=function(e,t,r){var i;if(t){var s=t.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},v7=!1,_7=function(e){var t=e.cache,r=e.serialized,i=e.isStringTag;return Oz(t,r,i),p7(function(){return Fz(t,r,i)}),null},x7=function n(e,t){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;t!==void 0&&(s=t.label,o=t.target);var a=lL(e,t,r),l=a||aL(i),c=!l("as");return function(){var u=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&h.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)h.push.apply(h,u);else{h.push(u[0][0]);for(var d=u.length,f=1;f<d;f++)h.push(u[f],u[0][f])}var p=zz(function(g,y,m){var _=c&&g.as||i,v="",x=[],b=g;if(g.theme==null){b={};for(var T in g)b[T]=g[T];b.theme=P.useContext(CS)}typeof g.className=="string"?v=i7(y.registered,x,g.className):g.className!=null&&(v=g.className+" ");var w=AS(h.concat(x),y.registered,b);v+=y.key+"-"+w.name,o!==void 0&&(v+=" "+o);var M=c&&a===void 0?aL(_):l,C={};for(var S in g)c&&S==="as"||M(S)&&(C[S]=g[S]);return C.className=v,m&&(C.ref=m),P.createElement(P.Fragment,null,P.createElement(_7,{cache:y,serialized:w,isStringTag:typeof _=="string"}),P.createElement(_,C))});return p.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=h,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return o===void 0&&v7?"NO_COMPONENT_SELECTOR":"."+o}}),p.withComponent=function(g,y){return n(g,ti({},t,y,{shouldForwardProp:lL(p,y,!0)})).apply(void 0,h)},p}},S7=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],cE=x7.bind();S7.forEach(function(n){cE[n]=cE(n)});var $z={exports:{}},b7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",w7=b7,T7=w7;function Vz(){}function Gz(){}Gz.resetWarningCache=Vz;var M7=function(){function n(r,i,s,o,a,l){if(l!==T7){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Gz,resetWarningCache:Vz};return t.PropTypes=t,t};$z.exports=M7();var E7=$z.exports;const ne=Gf(E7);function A7(n){return n==null||Object.keys(n).length===0}function Hz(n){const{styles:e,defaultTheme:t={}}=n,r=typeof e=="function"?i=>e(A7(i)?t:i):e;return q.jsx(m7,{styles:r})}/**
 * @mui/styled-engine v6.1.4
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Wz(n,e){return cE(n,e)}function C7(n,e){Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))}const cL=[];function uL(n){return cL[0]=n,AS(cL)}function Vo(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function jz(n){if(!Vo(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=jz(n[t])}),e}function Qr(n,e,t={clone:!0}){const r=t.clone?{...n}:n;return Vo(n)&&Vo(e)&&Object.keys(e).forEach(i=>{Vo(e[i])&&Object.prototype.hasOwnProperty.call(n,i)&&Vo(n[i])?r[i]=Qr(n[i],e[i],t):t.clone?r[i]=Vo(e[i])?jz(e[i]):e[i]:r[i]=e[i]}),r}const R7=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>({...t,[r.key]:r.val}),{})};function N7(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5,...i}=n,s=R7(e),o=Object.keys(s);function a(d){return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${t})`}function l(d){return`@media (max-width:${(typeof e[d]=="number"?e[d]:d)-r/100}${t})`}function c(d,f){const p=o.indexOf(f);return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${t}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:f)-r/100}${t})`}function u(d){return o.indexOf(d)+1<o.length?c(d,o[o.indexOf(d)+1]):a(d)}function h(d){const f=o.indexOf(d);return f===0?a(o[1]):f===o.length-1?l(o[f]):c(d,o[o.indexOf(d)+1]).replace("@media","@media not all and")}return{keys:o,values:s,up:a,down:l,between:c,only:u,not:h,unit:t,...i}}function P7(n,e){if(!n.containerQueries)return e;const t=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,i)=>{var o,a;const s=/min-width:\s*([0-9.]+)/;return+(((o=r.match(s))==null?void 0:o[1])||0)-+(((a=i.match(s))==null?void 0:a[1])||0)});return t.length?t.reduce((r,i)=>{const s=e[i];return delete r[i],r[i]=s,r},{...e}):e}function I7(n,e){return e==="@"||e.startsWith("@")&&(n.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function L7(n,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,r,i]=t,s=Number.isNaN(+r)?r||0:+r;return n.containerQueries(i).up(s)}function D7(n){const e=(s,o)=>s.replace("@media",o?`@container ${o}`:"@container");function t(s,o){s.up=(...a)=>e(n.breakpoints.up(...a),o),s.down=(...a)=>e(n.breakpoints.down(...a),o),s.between=(...a)=>e(n.breakpoints.between(...a),o),s.only=(...a)=>e(n.breakpoints.only(...a),o),s.not=(...a)=>{const l=e(n.breakpoints.not(...a),o);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},i=s=>(t(r,s),r);return t(i),{...n,containerQueries:i}}const O7={borderRadius:4};function Um(n,e){return e?Qr(n,e,{clone:!1}):n}const RS={xs:0,sm:600,md:900,lg:1200,xl:1536},hL={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${RS[n]}px)`},F7={containerQueries:n=>({up:e=>{let t=typeof e=="number"?e:RS[e]||e;return typeof t=="number"&&(t=`${t}px`),n?`@container ${n} (min-width:${t})`:`@container (min-width:${t})`}})};function tl(n,e,t){const r=n.theme||{};if(Array.isArray(e)){const s=r.breakpoints||hL;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=t(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||hL;return Object.keys(e).reduce((o,a)=>{if(I7(s.keys,a)){const l=L7(r.containerQueries?r:F7,a);l&&(o[l]=t(e[a],a))}else if(Object.keys(s.values||RS).includes(a)){const l=s.up(a);o[l]=t(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return t(e)}function k7(n={}){var t;return((t=n.keys)==null?void 0:t.reduce((r,i)=>{const s=n.up(i);return r[s]={},r},{}))||{}}function U7(n,e){return n.reduce((t,r)=>{const i=t[r];return(!i||Object.keys(i).length===0)&&delete t[r],t},e)}function We(n){if(typeof n!="string")throw new Error(el(7));return n.charAt(0).toUpperCase()+n.slice(1)}function NS(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,n);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,n)}function q_(n,e,t,r=t){let i;return typeof n=="function"?i=n(t):Array.isArray(n)?i=n[t]||r:i=NS(n,t)||r,e&&(i=e(i,r,n)),i}function Zn(n){const{prop:e,cssProperty:t=n.prop,themeKey:r,transform:i}=n,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=NS(l,r)||{};return tl(o,a,h=>{let d=q_(c,i,h);return h===d&&typeof h=="string"&&(d=q_(c,i,`${e}${h==="default"?"":We(h)}`,h)),t===!1?d:{[t]:d}})};return s.propTypes={},s.filterProps=[e],s}function B7(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const z7={m:"margin",p:"padding"},$7={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},dL={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},V7=B7(n=>{if(n.length>2)if(dL[n])n=dL[n];else return[n];const[e,t]=n.split(""),r=z7[e],i=$7[t]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),aN=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],lN=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...aN,...lN];function ry(n,e,t,r){const i=NS(n,e,!0)??t;return typeof i=="number"||typeof i=="string"?s=>typeof s=="string"?s:typeof i=="string"?`calc(${s} * ${i})`:i*s:Array.isArray(i)?s=>{if(typeof s=="string")return s;const o=Math.abs(s),a=i[o];return s>=0?a:typeof a=="number"?-a:`-${a}`}:typeof i=="function"?i:()=>{}}function cN(n){return ry(n,"spacing",8)}function iy(n,e){return typeof e=="string"||e==null?e:n(e)}function G7(n,e){return t=>n.reduce((r,i)=>(r[i]=iy(e,t),r),{})}function H7(n,e,t,r){if(!e.includes(t))return null;const i=V7(t),s=G7(i,r),o=n[t];return tl(n,o,s)}function qz(n,e){const t=cN(n.theme);return Object.keys(n).map(r=>H7(n,e,r,t)).reduce(Um,{})}function Vn(n){return qz(n,aN)}Vn.propTypes={};Vn.filterProps=aN;function Gn(n){return qz(n,lN)}Gn.propTypes={};Gn.filterProps=lN;function Xz(n=8,e=cN({spacing:n})){if(n.mui)return n;const t=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return t.mui=!0,t}function PS(...n){const e=n.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),t=r=>Object.keys(r).reduce((i,s)=>e[s]?Um(i,e[s](r)):i,{});return t.propTypes={},t.filterProps=n.reduce((r,i)=>r.concat(i.filterProps),[]),t}function Es(n){return typeof n!="number"?n:`${n}px solid`}function Us(n,e){return Zn({prop:n,themeKey:"borders",transform:e})}const W7=Us("border",Es),j7=Us("borderTop",Es),q7=Us("borderRight",Es),X7=Us("borderBottom",Es),K7=Us("borderLeft",Es),Y7=Us("borderColor"),Q7=Us("borderTopColor"),Z7=Us("borderRightColor"),J7=Us("borderBottomColor"),eq=Us("borderLeftColor"),tq=Us("outline",Es),nq=Us("outlineColor"),IS=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=ry(n.theme,"shape.borderRadius",4),t=r=>({borderRadius:iy(e,r)});return tl(n,n.borderRadius,t)}return null};IS.propTypes={};IS.filterProps=["borderRadius"];PS(W7,j7,q7,X7,K7,Y7,Q7,Z7,J7,eq,IS,tq,nq);const LS=n=>{if(n.gap!==void 0&&n.gap!==null){const e=ry(n.theme,"spacing",8),t=r=>({gap:iy(e,r)});return tl(n,n.gap,t)}return null};LS.propTypes={};LS.filterProps=["gap"];const DS=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=ry(n.theme,"spacing",8),t=r=>({columnGap:iy(e,r)});return tl(n,n.columnGap,t)}return null};DS.propTypes={};DS.filterProps=["columnGap"];const OS=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=ry(n.theme,"spacing",8),t=r=>({rowGap:iy(e,r)});return tl(n,n.rowGap,t)}return null};OS.propTypes={};OS.filterProps=["rowGap"];const rq=Zn({prop:"gridColumn"}),iq=Zn({prop:"gridRow"}),sq=Zn({prop:"gridAutoFlow"}),oq=Zn({prop:"gridAutoColumns"}),aq=Zn({prop:"gridAutoRows"}),lq=Zn({prop:"gridTemplateColumns"}),cq=Zn({prop:"gridTemplateRows"}),uq=Zn({prop:"gridTemplateAreas"}),hq=Zn({prop:"gridArea"});PS(LS,DS,OS,rq,iq,sq,oq,aq,lq,cq,uq,hq);function Dd(n,e){return e==="grey"?e:n}const dq=Zn({prop:"color",themeKey:"palette",transform:Dd}),fq=Zn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Dd}),pq=Zn({prop:"backgroundColor",themeKey:"palette",transform:Dd});PS(dq,fq,pq);function ns(n){return n<=1&&n!==0?`${n*100}%`:n}const mq=Zn({prop:"width",transform:ns}),uN=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var i,s,o,a,l;const r=((o=(s=(i=n.theme)==null?void 0:i.breakpoints)==null?void 0:s.values)==null?void 0:o[t])||RS[t];return r?((l=(a=n.theme)==null?void 0:a.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${n.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:ns(t)}};return tl(n,n.maxWidth,e)}return null};uN.filterProps=["maxWidth"];const gq=Zn({prop:"minWidth",transform:ns}),yq=Zn({prop:"height",transform:ns}),vq=Zn({prop:"maxHeight",transform:ns}),_q=Zn({prop:"minHeight",transform:ns});Zn({prop:"size",cssProperty:"width",transform:ns});Zn({prop:"size",cssProperty:"height",transform:ns});const xq=Zn({prop:"boxSizing"});PS(mq,uN,gq,yq,vq,_q,xq);const sy={border:{themeKey:"borders",transform:Es},borderTop:{themeKey:"borders",transform:Es},borderRight:{themeKey:"borders",transform:Es},borderBottom:{themeKey:"borders",transform:Es},borderLeft:{themeKey:"borders",transform:Es},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Es},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:IS},color:{themeKey:"palette",transform:Dd},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Dd},backgroundColor:{themeKey:"palette",transform:Dd},p:{style:Gn},pt:{style:Gn},pr:{style:Gn},pb:{style:Gn},pl:{style:Gn},px:{style:Gn},py:{style:Gn},padding:{style:Gn},paddingTop:{style:Gn},paddingRight:{style:Gn},paddingBottom:{style:Gn},paddingLeft:{style:Gn},paddingX:{style:Gn},paddingY:{style:Gn},paddingInline:{style:Gn},paddingInlineStart:{style:Gn},paddingInlineEnd:{style:Gn},paddingBlock:{style:Gn},paddingBlockStart:{style:Gn},paddingBlockEnd:{style:Gn},m:{style:Vn},mt:{style:Vn},mr:{style:Vn},mb:{style:Vn},ml:{style:Vn},mx:{style:Vn},my:{style:Vn},margin:{style:Vn},marginTop:{style:Vn},marginRight:{style:Vn},marginBottom:{style:Vn},marginLeft:{style:Vn},marginX:{style:Vn},marginY:{style:Vn},marginInline:{style:Vn},marginInlineStart:{style:Vn},marginInlineEnd:{style:Vn},marginBlock:{style:Vn},marginBlockStart:{style:Vn},marginBlockEnd:{style:Vn},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:LS},rowGap:{style:OS},columnGap:{style:DS},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ns},maxWidth:{style:uN},minWidth:{transform:ns},height:{transform:ns},maxHeight:{transform:ns},minHeight:{transform:ns},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Sq(...n){const e=n.reduce((r,i)=>r.concat(Object.keys(i)),[]),t=new Set(e);return n.every(r=>t.size===Object.keys(r).length)}function bq(n,e){return typeof n=="function"?n(e):n}function wq(){function n(t,r,i,s){const o={[t]:r,theme:i},a=s[t];if(!a)return{[t]:r};const{cssProperty:l=t,themeKey:c,transform:u,style:h}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[t]:r};const d=NS(i,c)||{};return h?h(o):tl(o,r,p=>{let g=q_(d,u,p);return p===g&&typeof p=="string"&&(g=q_(d,u,`${t}${p==="default"?"":We(p)}`,p)),l===!1?g:{[l]:g}})}function e(t){const{sx:r,theme:i={}}=t||{};if(!r)return null;const s=i.unstable_sxConfig??sy;function o(a){let l=a;if(typeof a=="function")l=a(i);else if(typeof a!="object")return a;if(!l)return null;const c=k7(i.breakpoints),u=Object.keys(c);let h=c;return Object.keys(l).forEach(d=>{const f=bq(l[d],i);if(f!=null)if(typeof f=="object")if(s[d])h=Um(h,n(d,f,i,s));else{const p=tl({theme:i},f,g=>({[d]:g}));Sq(p,f)?h[d]=e({sx:f,theme:i}):h=Um(h,p)}else h=Um(h,n(d,f,i,s))}),P7(i,U7(u,h))}return Array.isArray(r)?r.map(o):o(r)}return e}const mc=wq();mc.filterProps=["sx"];function Tq(n,e){var r;const t=this;if(t.vars){if(!((r=t.colorSchemes)!=null&&r[n])||typeof t.getColorSchemeSelector!="function")return{};let i=t.getColorSchemeSelector(n);return i==="&"?e:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:e})}return t.palette.mode===n?e:{}}function hN(n={},...e){const{breakpoints:t={},palette:r={},spacing:i,shape:s={},...o}=n,a=N7(t),l=Xz(i);let c=Qr({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...O7,...s}},o);return c=D7(c),c.applyStyles=Tq,c=e.reduce((u,h)=>Qr(u,h),c),c.unstable_sxConfig={...sy,...o==null?void 0:o.unstable_sxConfig},c.unstable_sx=function(h){return mc({sx:h,theme:this})},c}function Mq(n){return Object.keys(n).length===0}function dN(n=null){const e=P.useContext(CS);return!e||Mq(e)?n:e}const Eq=hN();function FS(n=Eq){return dN(n)}function Aq({styles:n,themeId:e,defaultTheme:t={}}){const r=FS(t),i=typeof n=="function"?n(e&&r[e]||r):n;return q.jsx(Hz,{styles:i})}const Cq=n=>{var r;const e={systemProps:{},otherProps:{}},t=((r=n==null?void 0:n.theme)==null?void 0:r.unstable_sxConfig)??sy;return Object.keys(n).forEach(i=>{t[i]?e.systemProps[i]=n[i]:e.otherProps[i]=n[i]}),e};function Kz(n){const{sx:e,...t}=n,{systemProps:r,otherProps:i}=Cq(t);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return Vo(a)?{...r,...a}:r}:s={...r,...e},{...i,sx:s}}const fL=n=>n,Rq=()=>{let n=fL;return{configure(e){n=e},generate(e){return n(e)},reset(){n=fL}}},Yz=Rq();function Qz(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Qz(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function ct(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Qz(n))&&(r&&(r+=" "),r+=e);return r}function Nq(n={}){const{themeId:e,defaultTheme:t,defaultClassName:r="MuiBox-root",generateClassName:i}=n,s=Wz("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(mc);return P.forwardRef(function(l,c){const u=FS(t),{className:h,component:d="div",...f}=Kz(l);return q.jsx(s,{as:d,ref:c,className:ct(h,i?i(r):r),theme:e&&u[e]||u,...f})})}const Pq={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Gt(n,e,t="Mui"){const r=Pq[e];return r?`${t}-${r}`:`${Yz.generate(n)}-${e}`}function Ft(n,e,t="Mui"){const r={};return e.forEach(i=>{r[i]=Gt(n,i,t)}),r}function Zz(n){const{variants:e,...t}=n,r={variants:e,style:uL(t),isProcessed:!0};return r.style===t||e&&e.forEach(i=>{typeof i.style!="function"&&(i.style=uL(i.style))}),r}const Iq=hN();function G1(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}function Lq(n){return n?(e,t)=>t[n]:null}function Dq(n,e,t){n.theme=kq(n.theme)?t:n.theme[e]||n.theme}function Gv(n,e){const t=typeof e=="function"?e(n):e;if(Array.isArray(t))return t.flatMap(r=>Gv(n,r));if(Array.isArray(t==null?void 0:t.variants)){let r;if(t.isProcessed)r=t.style;else{const{variants:i,...s}=t;r=s}return Jz(n,t.variants,[r])}return t!=null&&t.isProcessed?t.style:t}function Jz(n,e,t=[]){var i;let r;e:for(let s=0;s<e.length;s+=1){const o=e[s];if(typeof o.props=="function"){if(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),!o.props(r))continue}else for(const a in o.props)if(n[a]!==o.props[a]&&((i=n.ownerState)==null?void 0:i[a])!==o.props[a])continue e;typeof o.style=="function"?(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),t.push(o.style(r))):t.push(o.style)}return t}function Oq(n={}){const{themeId:e,defaultTheme:t=Iq,rootShouldForwardProp:r=G1,slotShouldForwardProp:i=G1}=n;function s(a){Dq(a,e,t)}return(a,l={})=>{C7(a,b=>b.filter(T=>T!==mc));const{name:c,slot:u,skipVariantsResolver:h,skipSx:d,overridesResolver:f=Lq(Bq(u)),...p}=l,g=h!==void 0?h:u&&u!=="Root"&&u!=="root"||!1,y=d||!1;let m=G1;u==="Root"||u==="root"?m=r:u?m=i:Uq(a)&&(m=void 0);const _=Wz(a,{shouldForwardProp:m,label:Fq(),...p}),v=b=>{if(typeof b=="function"&&b.__emotion_real!==b)return function(w){return Gv(w,b)};if(Vo(b)){const T=Zz(b);return T.variants?function(M){return Gv(M,T)}:T.style}return b},x=(...b)=>{const T=[],w=b.map(v),M=[];if(T.push(s),c&&f&&M.push(function(I){var D,j;const N=(j=(D=I.theme.components)==null?void 0:D[c])==null?void 0:j.styleOverrides;if(!N)return null;const R={};for(const L in N)R[L]=Gv(I,N[L]);return f(I,R)}),c&&!g&&M.push(function(I){var R,D;const F=I.theme,N=(D=(R=F==null?void 0:F.components)==null?void 0:R[c])==null?void 0:D.variants;return N?Jz(I,N):null}),y||M.push(mc),Array.isArray(w[0])){const E=w.shift(),I=new Array(T.length).fill(""),F=new Array(M.length).fill("");let N;N=[...I,...E,...F],N.raw=[...I,...E.raw,...F],T.unshift(N)}const C=[...T,...w,...M],S=_(...C);return a.muiName&&(S.muiName=a.muiName),S};return _.withConfig&&(x.withConfig=_.withConfig),x}}function Fq(n,e){return void 0}function kq(n){for(const e in n)return!1;return!0}function Uq(n){return typeof n=="string"&&n.charCodeAt(0)>96}function Bq(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}function X_(n,e){const t={...e};for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const i=r;if(i==="components"||i==="slots")t[i]={...n[i],...t[i]};else if(i==="componentsProps"||i==="slotProps"){const s=n[i],o=e[i];if(!o)t[i]=s||{};else if(!s)t[i]=o;else{t[i]={...o};for(const a in s)if(Object.prototype.hasOwnProperty.call(s,a)){const l=a;t[i][l]=X_(s[l],o[l])}}}else t[i]===void 0&&(t[i]=n[i])}return t}function e4(n){const{theme:e,name:t,props:r}=n;return!e||!e.components||!e.components[t]||!e.components[t].defaultProps?r:X_(e.components[t].defaultProps,r)}function zq({props:n,name:e,defaultTheme:t,themeId:r}){let i=FS(t);return r&&(i=i[r]||i),e4({theme:i,name:e,props:n})}const nl=typeof window<"u"?P.useLayoutEffect:P.useEffect;function $q(n,e,t,r,i){const[s,o]=P.useState(()=>i&&t?t(n).matches:r?r(n).matches:e);return nl(()=>{if(!t)return;const a=t(n),l=()=>{o(a.matches)};return l(),a.addEventListener("change",l),()=>{a.removeEventListener("change",l)}},[n,t]),s}const Vq={...x_},t4=Vq.useSyncExternalStore;function Gq(n,e,t,r,i){const s=P.useCallback(()=>e,[e]),o=P.useMemo(()=>{if(i&&t)return()=>t(n).matches;if(r!==null){const{matches:u}=r(n);return()=>u}return s},[s,n,r,i,t]),[a,l]=P.useMemo(()=>{if(t===null)return[s,()=>()=>{}];const u=t(n);return[()=>u.matches,h=>(u.addEventListener("change",h),()=>{u.removeEventListener("change",h)})]},[s,t,n]);return t4(l,a,o)}function Hq(n,e={}){const t=dN(),r=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:s=r?window.matchMedia:null,ssrMatchMedia:o=null,noSsr:a=!1}=e4({name:"MuiUseMediaQuery",props:e,theme:t});let l=typeof n=="function"?n(t):n;return l=l.replace(/^@media( ?)/m,""),(t4!==void 0?Gq:$q)(l,i,s,o,a)}function Wq(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}function fN(n,e=0,t=1){return Wq(n,e,t)}function jq(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function gc(n){if(n.type)return n;if(n.charAt(0)==="#")return gc(jq(n));const e=n.indexOf("("),t=n.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(el(9,n));let r=n.substring(e+1,n.length-1),i;if(t==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(el(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:t,values:r,colorSpace:i}}const qq=n=>{const e=gc(n);return e.values.slice(0,3).map((t,r)=>e.type.includes("hsl")&&r!==0?`${t}%`:t).join(" ")},mm=(n,e)=>{try{return qq(n)}catch{return n}};function kS(n){const{type:e,colorSpace:t}=n;let{values:r}=n;return e.includes("rgb")?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function n4(n){n=gc(n);const{values:e}=n,t=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,u=(c+t/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return n.type==="hsla"&&(a+="a",l.push(e[3])),kS({type:a,values:l})}function uE(n){n=gc(n);let e=n.type==="hsl"||n.type==="hsla"?gc(n4(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Xq(n,e){const t=uE(n),r=uE(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function Yn(n,e){return n=gc(n),e=fN(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,kS(n)}function Jy(n,e,t){try{return Yn(n,e)}catch{return n}}function bg(n,e){if(n=gc(n),e=fN(e),n.type.includes("hsl"))n.values[2]*=1-e;else if(n.type.includes("rgb")||n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]*=1-e;return kS(n)}function mn(n,e,t){try{return bg(n,e)}catch{return n}}function wg(n,e){if(n=gc(n),e=fN(e),n.type.includes("hsl"))n.values[2]+=(100-n.values[2])*e;else if(n.type.includes("rgb"))for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return kS(n)}function gn(n,e,t){try{return wg(n,e)}catch{return n}}function r4(n,e=.15){return uE(n)>.5?bg(n,e):wg(n,e)}function e0(n,e,t){try{return r4(n,e)}catch{return n}}function pL(...n){return n.reduce((e,t)=>t==null?e:function(...i){e.apply(this,i),t.apply(this,i)},()=>{})}function pN(n,e=166){let t;function r(...i){const s=()=>{n.apply(this,i)};clearTimeout(t),t=setTimeout(s,e)}return r.clear=()=>{clearTimeout(t)},r}function H1(n,e){var t,r,i;return P.isValidElement(n)&&e.indexOf(n.type.muiName??((i=(r=(t=n.type)==null?void 0:t._payload)==null?void 0:r.value)==null?void 0:i.muiName))!==-1}function Ni(n){return n&&n.ownerDocument||document}function xo(n){return Ni(n).defaultView||window}function hE(n,e){typeof n=="function"?n(e):n&&(n.current=e)}let mL=0;function Kq(n){const[e,t]=P.useState(n),r=n||e;return P.useEffect(()=>{e==null&&(mL+=1,t(`mui-${mL}`))},[e]),r}const Yq={...x_},gL=Yq.useId;function mN(n){if(gL!==void 0){const e=gL();return n??e}return Kq(n)}function yL({controlled:n,default:e,name:t,state:r="value"}){const{current:i}=P.useRef(n!==void 0),[s,o]=P.useState(e),a=i?n:s,l=P.useCallback(c=>{i||o(c)},[]);return[a,l]}function Oa(n){const e=P.useRef(n);return nl(()=>{e.current=n}),P.useRef((...t)=>(0,e.current)(...t)).current}function cr(...n){return P.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{hE(t,e)})},n)}const vL={};function i4(n,e){const t=P.useRef(vL);return t.current===vL&&(t.current=n(e)),t}const Qq=[];function Zq(n){P.useEffect(n,Qq)}class gN{constructor(){fp(this,"currentId",null);fp(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});fp(this,"disposeEffect",()=>this.clear)}static create(){return new gN}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function yN(){const n=i4(gN.create).current;return Zq(n.disposeEffect),n}function _L(n){try{return n.matches(":focus-visible")}catch{}return!1}function s4(n=window){const e=n.document.documentElement.clientWidth;return n.innerWidth-e}function Xt(n,e,t=void 0){const r={};for(const i in n){const s=n[i];let o="",a=!0;for(let l=0;l<s.length;l+=1){const c=s[l];c&&(o+=(a===!0?"":" ")+e(c),a=!1,t&&t[c]&&(o+=" "+t[c]))}r[i]=o}return r}function Jq(n){return typeof n=="string"}function o4(n,e,t){return n===void 0||Jq(n)?e:{...e,ownerState:{...e.ownerState,...t}}}function K_(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(r=>r.match(/^on[A-Z]/)&&typeof n[r]=="function"&&!e.includes(r)).forEach(r=>{t[r]=n[r]}),t}function xL(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function a4(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:r,externalForwardedProps:i,className:s}=n;if(!e){const f=ct(t==null?void 0:t.className,s,i==null?void 0:i.className,r==null?void 0:r.className),p={...t==null?void 0:t.style,...i==null?void 0:i.style,...r==null?void 0:r.style},g={...t,...i,...r};return f.length>0&&(g.className=f),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:void 0}}const o=K_({...i,...r}),a=xL(r),l=xL(i),c=e(o),u=ct(c==null?void 0:c.className,t==null?void 0:t.className,s,i==null?void 0:i.className,r==null?void 0:r.className),h={...c==null?void 0:c.style,...t==null?void 0:t.style,...i==null?void 0:i.style,...r==null?void 0:r.style},d={...c,...t,...l,...a};return u.length>0&&(d.className=u),Object.keys(h).length>0&&(d.style=h),{props:d,internalRef:c.ref}}function l4(n,e,t){return typeof n=="function"?n(e,t):n}function dE(n){var h;const{elementType:e,externalSlotProps:t,ownerState:r,skipResolvingSlotProps:i=!1,...s}=n,o=i?{}:l4(t,r),{props:a,internalRef:l}=a4({...s,externalSlotProps:o}),c=cr(l,o==null?void 0:o.ref,(h=n.additionalProps)==null?void 0:h.ref);return o4(e,{...a,ref:c},r)}function Zu(n){var e;return parseInt(P.version,10)>=19?((e=n==null?void 0:n.props)==null?void 0:e.ref)||null:(n==null?void 0:n.ref)||null}const c4=P.createContext(null);function vN(){return P.useContext(c4)}const eX=typeof Symbol=="function"&&Symbol.for,tX=eX?Symbol.for("mui.nested"):"__THEME_NESTED__";function nX(n,e){return typeof e=="function"?e(n):{...n,...e}}function rX(n){const{children:e,theme:t}=n,r=vN(),i=P.useMemo(()=>{const s=r===null?{...t}:nX(r,t);return s!=null&&(s[tX]=r!==null),s},[t,r]);return q.jsx(c4.Provider,{value:i,children:e})}const u4=P.createContext();function iX({value:n,...e}){return q.jsx(u4.Provider,{value:n??!0,...e})}const h4=()=>P.useContext(u4)??!1,d4=P.createContext(void 0);function sX({value:n,children:e}){return q.jsx(d4.Provider,{value:n,children:e})}function oX(n){const{theme:e,name:t,props:r}=n;if(!e||!e.components||!e.components[t])return r;const i=e.components[t];return i.defaultProps?X_(i.defaultProps,r):!i.styleOverrides&&!i.variants?X_(i,r):r}function aX({props:n,name:e}){const t=P.useContext(d4);return oX({props:n,name:e,theme:{components:t}})}const SL={};function bL(n,e,t,r=!1){return P.useMemo(()=>{const i=n&&e[n]||e;if(typeof t=="function"){const s=t(i),o=n?{...e,[n]:s}:s;return r?()=>o:o}return n?{...e,[n]:t}:{...e,...t}},[n,e,t,r])}function f4(n){const{children:e,theme:t,themeId:r}=n,i=dN(SL),s=vN()||SL,o=bL(r,i,t),a=bL(r,s,t,!0),l=o.direction==="rtl";return q.jsx(rX,{theme:a,children:q.jsx(CS.Provider,{value:o,children:q.jsx(iX,{value:l,children:q.jsx(sX,{value:o==null?void 0:o.components,children:e})})})})}const wL={theme:void 0};function lX(n){let e,t;return function(i){let s=e;return(s===void 0||i.theme!==t)&&(wL.theme=i.theme,s=Zz(n(wL)),e=s,t=i.theme),s}}const _N="mode",xN="color-scheme",cX="data-color-scheme";function uX(n){const{defaultLightColorScheme:e="light",defaultDarkColorScheme:t="dark",modeStorageKey:r=_N,colorSchemeStorageKey:i=xN,attribute:s=cX,colorSchemeNode:o="document.documentElement",nonce:a}=n||{};let l="",c=s;if(s==="class"&&(c=".%s"),s==="data"&&(c="[data-%s]"),c.startsWith(".")){const h=c.substring(1);l+=`${o}.classList.remove('${h}'.replace('%s', light), '${h}'.replace('%s', dark));
      ${o}.classList.add('${h}'.replace('%s', colorScheme));`}const u=c.match(/\[([^\]]+)\]/);if(u){const[h,d]=u[1].split("=");d||(l+=`${o}.removeAttribute('${h}'.replace('%s', light));
      ${o}.removeAttribute('${h}'.replace('%s', dark));`),l+=`
      ${o}.setAttribute('${h}'.replace('%s', colorScheme), ${d?`${d}.replace('%s', colorScheme)`:'""'});`}else l+=`${o}.setAttribute('${c}', colorScheme);`;return q.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?a:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${r}') || 'system';
  const dark = localStorage.getItem('${i}-dark') || '${t}';
  const light = localStorage.getItem('${i}-light') || '${e}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${l}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function TL(n){if(typeof window<"u"&&typeof window.matchMedia=="function"&&n==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function p4(n,e){if(n.mode==="light"||n.mode==="system"&&n.systemMode==="light")return e("light");if(n.mode==="dark"||n.mode==="system"&&n.systemMode==="dark")return e("dark")}function hX(n){return p4(n,e=>{if(e==="light")return n.lightColorScheme;if(e==="dark")return n.darkColorScheme})}function W1(n,e){if(typeof window>"u")return;let t;try{t=localStorage.getItem(n)||void 0,t||localStorage.setItem(n,e)}catch{}return t||e}function dX(n){const{defaultMode:e="light",defaultLightColorScheme:t,defaultDarkColorScheme:r,supportedColorSchemes:i=[],modeStorageKey:s=_N,colorSchemeStorageKey:o=xN,storageWindow:a=typeof window>"u"?void 0:window}=n,l=i.join(","),c=i.length>1,[u,h]=P.useState(()=>{const v=W1(s,e),x=W1(`${o}-light`,t),b=W1(`${o}-dark`,r);return{mode:v,systemMode:TL(v),lightColorScheme:x,darkColorScheme:b}}),[,d]=P.useState(!1),f=P.useRef(!1);P.useEffect(()=>{c&&d(!0),f.current=!0},[c]);const p=hX(u),g=P.useCallback(v=>{h(x=>{if(v===x.mode)return x;const b=v??e;try{localStorage.setItem(s,b)}catch{}return{...x,mode:b,systemMode:TL(b)}})},[s,e]),y=P.useCallback(v=>{v?typeof v=="string"?v&&!l.includes(v)?console.error(`\`${v}\` does not exist in \`theme.colorSchemes\`.`):h(x=>{const b={...x};return p4(x,T=>{try{localStorage.setItem(`${o}-${T}`,v)}catch{}T==="light"&&(b.lightColorScheme=v),T==="dark"&&(b.darkColorScheme=v)}),b}):h(x=>{const b={...x},T=v.light===null?t:v.light,w=v.dark===null?r:v.dark;if(T)if(!l.includes(T))console.error(`\`${T}\` does not exist in \`theme.colorSchemes\`.`);else{b.lightColorScheme=T;try{localStorage.setItem(`${o}-light`,T)}catch{}}if(w)if(!l.includes(w))console.error(`\`${w}\` does not exist in \`theme.colorSchemes\`.`);else{b.darkColorScheme=w;try{localStorage.setItem(`${o}-dark`,w)}catch{}}return b}):h(x=>{try{localStorage.setItem(`${o}-light`,t),localStorage.setItem(`${o}-dark`,r)}catch{}return{...x,lightColorScheme:t,darkColorScheme:r}})},[l,o,t,r]),m=P.useCallback(v=>{u.mode==="system"&&h(x=>{const b=v!=null&&v.matches?"dark":"light";return x.systemMode===b?x:{...x,systemMode:b}})},[u.mode]),_=P.useRef(m);return _.current=m,P.useEffect(()=>{if(typeof window.matchMedia!="function"||!c)return;const v=(...b)=>_.current(...b),x=window.matchMedia("(prefers-color-scheme: dark)");return x.addListener(v),v(x),()=>{x.removeListener(v)}},[c]),P.useEffect(()=>{if(a&&c){const v=x=>{const b=x.newValue;typeof x.key=="string"&&x.key.startsWith(o)&&(!b||l.match(b))&&(x.key.endsWith("light")&&y({light:b}),x.key.endsWith("dark")&&y({dark:b})),x.key===s&&(!b||["light","dark","system"].includes(b))&&g(b||e)};return a.addEventListener("storage",v),()=>{a.removeEventListener("storage",v)}}},[y,g,s,o,l,e,a,c]),{...u,mode:f.current||!c?u.mode:void 0,systemMode:f.current||!c?u.systemMode:void 0,colorScheme:f.current||!c?p:void 0,setMode:g,setColorScheme:y}}const fX="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function pX(n){const{themeId:e,theme:t={},modeStorageKey:r=_N,colorSchemeStorageKey:i=xN,disableTransitionOnChange:s=!1,defaultColorScheme:o,resolveTheme:a}=n,l={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},c=P.createContext(void 0),u=()=>P.useContext(c)||l;function h(g){var ae,oe,Te,Se,Xe;const{children:y,theme:m,modeStorageKey:_=r,colorSchemeStorageKey:v=i,disableTransitionOnChange:x=s,storageWindow:b=typeof window>"u"?void 0:window,documentNode:T=typeof document>"u"?void 0:document,colorSchemeNode:w=typeof document>"u"?void 0:document.documentElement,disableNestedContext:M=!1,disableStyleSheetGeneration:C=!1,defaultMode:S="system"}=g,E=P.useRef(!1),I=vN(),F=P.useContext(c),N=!!F&&!M,R=P.useMemo(()=>m||(typeof t=="function"?t():t),[m]),D=R[e],{colorSchemes:j={},components:L={},cssVarPrefix:W,...z}=D||R,X=Object.keys(j).filter(Ie=>!!j[Ie]).join(","),U=P.useMemo(()=>X.split(","),[X]),te=typeof o=="string"?o:o.light,k=typeof o=="string"?o:o.dark,V=j[te]&&j[k]?S:((oe=(ae=j[z.defaultColorScheme])==null?void 0:ae.palette)==null?void 0:oe.mode)||((Te=z.palette)==null?void 0:Te.mode),{mode:Z,setMode:le,systemMode:pe,lightColorScheme:ue,darkColorScheme:be,colorScheme:Pe,setColorScheme:we}=dX({supportedColorSchemes:U,defaultLightColorScheme:te,defaultDarkColorScheme:k,modeStorageKey:_,colorSchemeStorageKey:v,defaultMode:V,storageWindow:b});let G=Z,Ge=Pe;N&&(G=F.mode,Ge=F.colorScheme);const $e=Ge||z.defaultColorScheme,Ye=((Se=z.generateThemeVars)==null?void 0:Se.call(z))||z.vars,De={...z,components:L,colorSchemes:j,cssVarPrefix:W,vars:Ye};if(typeof De.generateSpacing=="function"&&(De.spacing=De.generateSpacing()),$e){const Ie=j[$e];Ie&&typeof Ie=="object"&&Object.keys(Ie).forEach(Fe=>{Ie[Fe]&&typeof Ie[Fe]=="object"?De[Fe]={...De[Fe],...Ie[Fe]}:De[Fe]=Ie[Fe]})}const st=z.colorSchemeSelector;P.useEffect(()=>{if(Ge&&w&&st&&st!=="media"){const Ie=st;let Fe=st;if(Ie==="class"&&(Fe=".%s"),Ie==="data"&&(Fe="[data-%s]"),Ie!=null&&Ie.startsWith("data-")&&!Ie.includes("%s")&&(Fe=`[${Ie}="%s"]`),Fe.startsWith("."))w.classList.remove(...U.map(pt=>Fe.substring(1).replace("%s",pt))),w.classList.add(Fe.substring(1).replace("%s",Ge));else{const pt=Fe.replace("%s",Ge).match(/\[([^\]]+)\]/);if(pt){const[Le,Oe]=pt[1].split("=");Oe||U.forEach(ot=>{w.removeAttribute(Le.replace(Ge,ot))}),w.setAttribute(Le,Oe?Oe.replace(/"|'/g,""):"")}else w.setAttribute(Fe,Ge)}}},[Ge,st,w,U]),P.useEffect(()=>{let Ie;if(x&&E.current&&T){const Fe=T.createElement("style");Fe.appendChild(T.createTextNode(fX)),T.head.appendChild(Fe),window.getComputedStyle(T.body),Ie=setTimeout(()=>{T.head.removeChild(Fe)},1)}return()=>{clearTimeout(Ie)}},[Ge,x,T]),P.useEffect(()=>(E.current=!0,()=>{E.current=!1}),[]);const Ze=P.useMemo(()=>({allColorSchemes:U,colorScheme:Ge,darkColorScheme:be,lightColorScheme:ue,mode:G,setColorScheme:we,setMode:le,systemMode:pe}),[U,Ge,be,ue,G,we,le,pe]);let B=!0;(C||z.cssVariables===!1||N&&(I==null?void 0:I.cssVarPrefix)===W)&&(B=!1);const A=q.jsxs(P.Fragment,{children:[q.jsx(f4,{themeId:D?e:void 0,theme:a?a(De):De,children:y}),B&&q.jsx(Hz,{styles:((Xe=De.generateStyleSheets)==null?void 0:Xe.call(De))||[]})]});return N?A:q.jsx(c.Provider,{value:Ze,children:A})}const d=typeof o=="string"?o:o.light,f=typeof o=="string"?o:o.dark;return{CssVarsProvider:h,useColorScheme:u,getInitColorSchemeScript:g=>uX({colorSchemeStorageKey:i,defaultLightColorScheme:d,defaultDarkColorScheme:f,modeStorageKey:r,...g})}}function mX(n=""){function e(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${n?`${n}-`:""}${i}${e(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${n?`${n}-`:""}${r}${e(...i)})`}const ML=(n,e,t,r=[])=>{let i=n;e.forEach((s,o)=>{o===e.length-1?Array.isArray(i)?i[Number(s)]=t:i&&typeof i=="object"&&(i[s]=t):i&&typeof i=="object"&&(i[s]||(i[s]=r.includes(s)?[]:{}),i=i[s])})},gX=(n,e,t)=>{function r(i,s=[],o=[]){Object.entries(i).forEach(([a,l])=>{(!t||t&&!t([...s,a]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...s,a],Array.isArray(l)?[...o,a]:o):e([...s,a],l,o))})}r(n)},yX=(n,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>n.includes(r))||n[n.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function j1(n,e){const{prefix:t,shouldSkipGeneratingVar:r}=e||{},i={},s={},o={};return gX(n,(a,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(a,l))){const u=`--${t?`${t}-`:""}${a.join("-")}`,h=yX(a,l);Object.assign(i,{[u]:h}),ML(s,a,`var(${u})`,c),ML(o,a,`var(${u}, ${h})`,c)}},a=>a[0]==="vars"),{css:i,vars:s,varsWithDefaults:o}}function vX(n,e={}){const{getSelector:t=y,disableCssColorScheme:r,colorSchemeSelector:i}=e,{colorSchemes:s={},components:o,defaultColorScheme:a="light",...l}=n,{vars:c,css:u,varsWithDefaults:h}=j1(l,e);let d=h;const f={},{[a]:p,...g}=s;if(Object.entries(g||{}).forEach(([v,x])=>{const{vars:b,css:T,varsWithDefaults:w}=j1(x,e);d=Qr(d,w),f[v]={css:T,vars:b}}),p){const{css:v,vars:x,varsWithDefaults:b}=j1(p,e);d=Qr(d,b),f[a]={css:v,vars:x}}function y(v,x){var T,w;let b=i;if(i==="class"&&(b=".%s"),i==="data"&&(b="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(b=`[${i}="%s"]`),v){if(b==="media")return n.defaultColorScheme===v?":root":{[`@media (prefers-color-scheme: ${((w=(T=s[v])==null?void 0:T.palette)==null?void 0:w.mode)||v})`]:{":root":x}};if(b)return n.defaultColorScheme===v?`:root, ${b.replace("%s",String(v))}`:b.replace("%s",String(v))}return":root"}return{vars:d,generateThemeVars:()=>{let v={...c};return Object.entries(f).forEach(([,{vars:x}])=>{v=Qr(v,x)}),v},generateStyleSheets:()=>{var M,C;const v=[],x=n.defaultColorScheme||"light";function b(S,E){Object.keys(E).length&&v.push(typeof S=="string"?{[S]:{...E}}:S)}b(t(void 0,{...u}),u);const{[x]:T,...w}=f;if(T){const{css:S}=T,E=(C=(M=s[x])==null?void 0:M.palette)==null?void 0:C.mode,I=!r&&E?{colorScheme:E,...S}:{...S};b(t(x,{...I}),I)}return Object.entries(w).forEach(([S,{css:E}])=>{var N,R;const I=(R=(N=s[S])==null?void 0:N.palette)==null?void 0:R.mode,F=!r&&I?{colorScheme:I,...E}:{...E};b(t(S,{...F}),F)}),v}}}function _X(n){return function(t){return n==="media"?`@media (prefers-color-scheme: ${t})`:n?n.startsWith("data-")&&!n.includes("%s")?`[${n}="${t}"] &`:n==="class"?`.${t} &`:n==="data"?`[data-${t}] &`:`${n.replace("%s",t)} &`:"&"}}function m4(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:vg.white,default:vg.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const xX=m4();function g4(){return{text:{primary:vg.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:vg.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const EL=g4();function AL(n,e,t,r){const i=r.light||r,s=r.dark||r*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=wg(n.main,i):e==="dark"&&(n.dark=bg(n.main,s)))}function SX(n="light"){return n==="dark"?{main:hh[200],light:hh[50],dark:hh[400]}:{main:hh[700],light:hh[400],dark:hh[800]}}function bX(n="light"){return n==="dark"?{main:uh[200],light:uh[50],dark:uh[400]}:{main:uh[500],light:uh[300],dark:uh[700]}}function wX(n="light"){return n==="dark"?{main:ch[500],light:ch[300],dark:ch[700]}:{main:ch[700],light:ch[400],dark:ch[800]}}function TX(n="light"){return n==="dark"?{main:dh[400],light:dh[300],dark:dh[700]}:{main:dh[700],light:dh[500],dark:dh[900]}}function MX(n="light"){return n==="dark"?{main:fh[400],light:fh[300],dark:fh[700]}:{main:fh[800],light:fh[500],dark:fh[900]}}function EX(n="light"){return n==="dark"?{main:bp[400],light:bp[300],dark:bp[700]}:{main:"#ed6c02",light:bp[500],dark:bp[900]}}function SN(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2,...i}=n,s=n.primary||SX(e),o=n.secondary||bX(e),a=n.error||wX(e),l=n.info||TX(e),c=n.success||MX(e),u=n.warning||EX(e);function h(g){return Xq(g,EL.text.primary)>=t?EL.text.primary:xX.text.primary}const d=({color:g,name:y,mainShade:m=500,lightShade:_=300,darkShade:v=700})=>{if(g={...g},!g.main&&g[m]&&(g.main=g[m]),!g.hasOwnProperty("main"))throw new Error(el(11,y?` (${y})`:"",m));if(typeof g.main!="string")throw new Error(el(12,y?` (${y})`:"",JSON.stringify(g.main)));return AL(g,"light",_,r),AL(g,"dark",v,r),g.contrastText||(g.contrastText=h(g.main)),g};let f;return e==="light"?f=m4():e==="dark"&&(f=g4()),Qr({common:{...vg},mode:e,primary:d({color:s,name:"primary"}),secondary:d({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:a,name:"error"}),warning:d({color:u,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:m9,contrastThreshold:t,getContrastText:h,augmentColor:d,tonalOffset:r,...f},i)}function AX(n){const e={};return Object.entries(n).forEach(r=>{const[i,s]=r;typeof s=="object"&&(e[i]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function CX(n,e){return{toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}},...e}}function RX(n){return Math.round(n*1e5)/1e5}const CL={textTransform:"uppercase"},RL='"Roboto", "Helvetica", "Arial", sans-serif';function y4(n,e){const{fontFamily:t=RL,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:o=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...h}=typeof e=="function"?e(n):e,d=r/14,f=u||(y=>`${y/l*d}rem`),p=(y,m,_,v,x)=>({fontFamily:t,fontWeight:y,fontSize:f(m),lineHeight:_,...t===RL?{letterSpacing:`${RX(v/m)}em`}:{},...x,...c}),g={h1:p(i,96,1.167,-1.5),h2:p(i,60,1.2,-.5),h3:p(s,48,1.167,0),h4:p(s,34,1.235,.25),h5:p(s,24,1.334,0),h6:p(o,20,1.6,.15),subtitle1:p(s,16,1.75,.15),subtitle2:p(o,14,1.57,.1),body1:p(s,16,1.5,.15),body2:p(s,14,1.43,.15),button:p(o,14,1.75,.4,CL),caption:p(s,12,1.66,.4),overline:p(s,12,2.66,1,CL),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Qr({htmlFontSize:l,pxToRem:f,fontFamily:t,fontSize:r,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:o,fontWeightBold:a,...g},h,{clone:!1})}const NX=.2,PX=.14,IX=.12;function Rn(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${NX})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${PX})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${IX})`].join(",")}const LX=["none",Rn(0,2,1,-1,0,1,1,0,0,1,3,0),Rn(0,3,1,-2,0,2,2,0,0,1,5,0),Rn(0,3,3,-2,0,3,4,0,0,1,8,0),Rn(0,2,4,-1,0,4,5,0,0,1,10,0),Rn(0,3,5,-1,0,5,8,0,0,1,14,0),Rn(0,3,5,-1,0,6,10,0,0,1,18,0),Rn(0,4,5,-2,0,7,10,1,0,2,16,1),Rn(0,5,5,-3,0,8,10,1,0,3,14,2),Rn(0,5,6,-3,0,9,12,1,0,3,16,2),Rn(0,6,6,-3,0,10,14,1,0,4,18,3),Rn(0,6,7,-4,0,11,15,1,0,4,20,3),Rn(0,7,8,-4,0,12,17,2,0,5,22,4),Rn(0,7,8,-4,0,13,19,2,0,5,24,4),Rn(0,7,9,-4,0,14,21,2,0,5,26,4),Rn(0,8,9,-5,0,15,22,2,0,6,28,5),Rn(0,8,10,-5,0,16,24,2,0,6,30,5),Rn(0,8,11,-5,0,17,26,2,0,6,32,5),Rn(0,9,11,-5,0,18,28,2,0,7,34,6),Rn(0,9,12,-6,0,19,29,2,0,7,36,6),Rn(0,10,13,-6,0,20,31,3,0,8,38,7),Rn(0,10,13,-6,0,21,33,3,0,8,40,7),Rn(0,10,14,-6,0,22,35,3,0,8,42,7),Rn(0,11,14,-7,0,23,36,3,0,9,44,8),Rn(0,11,15,-7,0,24,38,3,0,9,46,8)],DX={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},OX={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function NL(n){return`${Math.round(n)}ms`}function FX(n){if(!n)return 0;const e=n/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function kX(n){const e={...DX,...n.easing},t={...OX,...n.duration};return{getAutoHeightDuration:FX,create:(i=["all"],s={})=>{const{duration:o=t.standard,easing:a=e.easeInOut,delay:l=0,...c}=s;return(Array.isArray(i)?i:[i]).map(u=>`${u} ${typeof o=="string"?o:NL(o)} ${a} ${typeof l=="string"?l:NL(l)}`).join(",")},...n,easing:e,duration:t}}const UX={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function fE(n={},...e){const{breakpoints:t,mixins:r={},spacing:i,palette:s={},transitions:o={},typography:a={},shape:l,...c}=n;if(n.vars)throw new Error(el(20));const u=SN(s),h=hN(n);let d=Qr(h,{mixins:CX(h.breakpoints,r),palette:u,shadows:LX.slice(),typography:y4(u,a),transitions:kX(o),zIndex:{...UX}});return d=Qr(d,c),d=e.reduce((f,p)=>Qr(f,p),d),d.unstable_sxConfig={...sy,...c==null?void 0:c.unstable_sxConfig},d.unstable_sx=function(p){return mc({sx:p,theme:this})},d}function pE(n){let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,Math.round(e*10)/1e3}const BX=[...Array(25)].map((n,e)=>{if(e===0)return"none";const t=pE(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function v4(n){return{inputPlaceholder:n==="dark"?.5:.42,inputUnderline:n==="dark"?.7:.42,switchTrackDisabled:n==="dark"?.2:.12,switchTrack:n==="dark"?.3:.38}}function _4(n){return n==="dark"?BX:[]}function zX(n){const{palette:e={mode:"light"},opacity:t,overlays:r,...i}=n,s=SN(e);return{palette:s,opacity:{...v4(s.mode),...t},overlays:r||_4(s.mode),...i}}function $X(n){var e;return!!n[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!n[0].match(/sxConfig$/)||n[0]==="palette"&&!!((e=n[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const VX=n=>[...[...Array(25)].map((e,t)=>`--${n?`${n}-`:""}overlays-${t}`),`--${n?`${n}-`:""}palette-AppBar-darkBg`,`--${n?`${n}-`:""}palette-AppBar-darkColor`],GX=n=>(e,t)=>{const r=n.rootSelector||":root",i=n.colorSchemeSelector;let s=i;if(i==="class"&&(s=".%s"),i==="data"&&(s="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),n.defaultColorScheme===e){if(e==="dark"){const o={};return VX(n.cssVarPrefix).forEach(a=>{o[a]=t[a],delete t[a]}),s==="media"?{[r]:t,"@media (prefers-color-scheme: dark)":{[r]:o}}:s?{[s.replace("%s",e)]:o,[`${r}, ${s.replace("%s",e)}`]:t}:{[r]:{...t,...o}}}if(s&&s!=="media")return`${r}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:t}};if(s)return s.replace("%s",String(e))}return r};function HX(n){return Vo(n)||typeof n>"u"||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||Array.isArray(n)}function WX(n={}){const e={...n};function t(r){const i=Object.entries(r);for(let s=0;s<i.length;s++){const[o,a]=i[s];!HX(a)||o.startsWith("unstable_")?delete r[o]:Vo(a)&&(r[o]={...a},t(r[o]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function jX(n,e){e.forEach(t=>{n[t]||(n[t]={})})}function _e(n,e,t){!n[e]&&t&&(n[e]=t)}function gm(n){return!n||!n.startsWith("hsl")?n:n4(n)}function ia(n,e){`${e}Channel`in n||(n[`${e}Channel`]=mm(gm(n[e]),`MUI: Can't create \`palette.${e}Channel\` because \`palette.${e}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${e}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function qX(n){return typeof n=="number"?`${n}px`:typeof n=="string"||typeof n=="function"||Array.isArray(n)?n:"8px"}const Co=n=>{try{return n()}catch{}},XX=(n="mui")=>mX(n);function q1(n,e,t,r){if(!e)return;e=e===!0?{}:e;const i=r==="dark"?"dark":"light";if(!t){n[r]=zX({...e,palette:{mode:i,...e==null?void 0:e.palette}});return}const{palette:s,...o}=fE({...t,palette:{mode:i,...e==null?void 0:e.palette}});return n[r]={...e,palette:s,opacity:{...v4(i),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||_4(i)},o}function KX(n={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:o=$X,colorSchemeSelector:a=t.light&&t.dark?"media":void 0,rootSelector:l=":root",...c}=n,u=Object.keys(t)[0],h=r||(t.light&&u!=="light"?"light":u),d=XX(s),{[h]:f,light:p,dark:g,...y}=t,m={...y};let _=f;if((h==="dark"&&!("dark"in t)||h==="light"&&!("light"in t))&&(_=!0),!_)throw new Error(el(21,h));const v=q1(m,_,c,h);p&&!m.light&&q1(m,p,void 0,"light"),g&&!m.dark&&q1(m,g,void 0,"dark");let x={defaultColorScheme:h,...v,cssVarPrefix:s,colorSchemeSelector:a,rootSelector:l,getCssVar:d,colorSchemes:m,font:{...AX(v.typography),...v.font},spacing:qX(c.spacing)};Object.keys(x.colorSchemes).forEach(C=>{const S=x.colorSchemes[C].palette,E=I=>{const F=I.split("-"),N=F[1],R=F[2];return d(I,S[N][R])};if(S.mode==="light"&&(_e(S.common,"background","#fff"),_e(S.common,"onBackground","#000")),S.mode==="dark"&&(_e(S.common,"background","#000"),_e(S.common,"onBackground","#fff")),jX(S,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),S.mode==="light"){_e(S.Alert,"errorColor",mn(S.error.light,.6)),_e(S.Alert,"infoColor",mn(S.info.light,.6)),_e(S.Alert,"successColor",mn(S.success.light,.6)),_e(S.Alert,"warningColor",mn(S.warning.light,.6)),_e(S.Alert,"errorFilledBg",E("palette-error-main")),_e(S.Alert,"infoFilledBg",E("palette-info-main")),_e(S.Alert,"successFilledBg",E("palette-success-main")),_e(S.Alert,"warningFilledBg",E("palette-warning-main")),_e(S.Alert,"errorFilledColor",Co(()=>S.getContrastText(S.error.main))),_e(S.Alert,"infoFilledColor",Co(()=>S.getContrastText(S.info.main))),_e(S.Alert,"successFilledColor",Co(()=>S.getContrastText(S.success.main))),_e(S.Alert,"warningFilledColor",Co(()=>S.getContrastText(S.warning.main))),_e(S.Alert,"errorStandardBg",gn(S.error.light,.9)),_e(S.Alert,"infoStandardBg",gn(S.info.light,.9)),_e(S.Alert,"successStandardBg",gn(S.success.light,.9)),_e(S.Alert,"warningStandardBg",gn(S.warning.light,.9)),_e(S.Alert,"errorIconColor",E("palette-error-main")),_e(S.Alert,"infoIconColor",E("palette-info-main")),_e(S.Alert,"successIconColor",E("palette-success-main")),_e(S.Alert,"warningIconColor",E("palette-warning-main")),_e(S.AppBar,"defaultBg",E("palette-grey-100")),_e(S.Avatar,"defaultBg",E("palette-grey-400")),_e(S.Button,"inheritContainedBg",E("palette-grey-300")),_e(S.Button,"inheritContainedHoverBg",E("palette-grey-A100")),_e(S.Chip,"defaultBorder",E("palette-grey-400")),_e(S.Chip,"defaultAvatarColor",E("palette-grey-700")),_e(S.Chip,"defaultIconColor",E("palette-grey-700")),_e(S.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),_e(S.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),_e(S.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),_e(S.LinearProgress,"primaryBg",gn(S.primary.main,.62)),_e(S.LinearProgress,"secondaryBg",gn(S.secondary.main,.62)),_e(S.LinearProgress,"errorBg",gn(S.error.main,.62)),_e(S.LinearProgress,"infoBg",gn(S.info.main,.62)),_e(S.LinearProgress,"successBg",gn(S.success.main,.62)),_e(S.LinearProgress,"warningBg",gn(S.warning.main,.62)),_e(S.Skeleton,"bg",`rgba(${E("palette-text-primaryChannel")} / 0.11)`),_e(S.Slider,"primaryTrack",gn(S.primary.main,.62)),_e(S.Slider,"secondaryTrack",gn(S.secondary.main,.62)),_e(S.Slider,"errorTrack",gn(S.error.main,.62)),_e(S.Slider,"infoTrack",gn(S.info.main,.62)),_e(S.Slider,"successTrack",gn(S.success.main,.62)),_e(S.Slider,"warningTrack",gn(S.warning.main,.62));const I=e0(S.background.default,.8);_e(S.SnackbarContent,"bg",I),_e(S.SnackbarContent,"color",Co(()=>S.getContrastText(I))),_e(S.SpeedDialAction,"fabHoverBg",e0(S.background.paper,.15)),_e(S.StepConnector,"border",E("palette-grey-400")),_e(S.StepContent,"border",E("palette-grey-400")),_e(S.Switch,"defaultColor",E("palette-common-white")),_e(S.Switch,"defaultDisabledColor",E("palette-grey-100")),_e(S.Switch,"primaryDisabledColor",gn(S.primary.main,.62)),_e(S.Switch,"secondaryDisabledColor",gn(S.secondary.main,.62)),_e(S.Switch,"errorDisabledColor",gn(S.error.main,.62)),_e(S.Switch,"infoDisabledColor",gn(S.info.main,.62)),_e(S.Switch,"successDisabledColor",gn(S.success.main,.62)),_e(S.Switch,"warningDisabledColor",gn(S.warning.main,.62)),_e(S.TableCell,"border",gn(Jy(S.divider,1),.88)),_e(S.Tooltip,"bg",Jy(S.grey[700],.92))}if(S.mode==="dark"){_e(S.Alert,"errorColor",gn(S.error.light,.6)),_e(S.Alert,"infoColor",gn(S.info.light,.6)),_e(S.Alert,"successColor",gn(S.success.light,.6)),_e(S.Alert,"warningColor",gn(S.warning.light,.6)),_e(S.Alert,"errorFilledBg",E("palette-error-dark")),_e(S.Alert,"infoFilledBg",E("palette-info-dark")),_e(S.Alert,"successFilledBg",E("palette-success-dark")),_e(S.Alert,"warningFilledBg",E("palette-warning-dark")),_e(S.Alert,"errorFilledColor",Co(()=>S.getContrastText(S.error.dark))),_e(S.Alert,"infoFilledColor",Co(()=>S.getContrastText(S.info.dark))),_e(S.Alert,"successFilledColor",Co(()=>S.getContrastText(S.success.dark))),_e(S.Alert,"warningFilledColor",Co(()=>S.getContrastText(S.warning.dark))),_e(S.Alert,"errorStandardBg",mn(S.error.light,.9)),_e(S.Alert,"infoStandardBg",mn(S.info.light,.9)),_e(S.Alert,"successStandardBg",mn(S.success.light,.9)),_e(S.Alert,"warningStandardBg",mn(S.warning.light,.9)),_e(S.Alert,"errorIconColor",E("palette-error-main")),_e(S.Alert,"infoIconColor",E("palette-info-main")),_e(S.Alert,"successIconColor",E("palette-success-main")),_e(S.Alert,"warningIconColor",E("palette-warning-main")),_e(S.AppBar,"defaultBg",E("palette-grey-900")),_e(S.AppBar,"darkBg",E("palette-background-paper")),_e(S.AppBar,"darkColor",E("palette-text-primary")),_e(S.Avatar,"defaultBg",E("palette-grey-600")),_e(S.Button,"inheritContainedBg",E("palette-grey-800")),_e(S.Button,"inheritContainedHoverBg",E("palette-grey-700")),_e(S.Chip,"defaultBorder",E("palette-grey-700")),_e(S.Chip,"defaultAvatarColor",E("palette-grey-300")),_e(S.Chip,"defaultIconColor",E("palette-grey-300")),_e(S.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),_e(S.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),_e(S.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),_e(S.LinearProgress,"primaryBg",mn(S.primary.main,.5)),_e(S.LinearProgress,"secondaryBg",mn(S.secondary.main,.5)),_e(S.LinearProgress,"errorBg",mn(S.error.main,.5)),_e(S.LinearProgress,"infoBg",mn(S.info.main,.5)),_e(S.LinearProgress,"successBg",mn(S.success.main,.5)),_e(S.LinearProgress,"warningBg",mn(S.warning.main,.5)),_e(S.Skeleton,"bg",`rgba(${E("palette-text-primaryChannel")} / 0.13)`),_e(S.Slider,"primaryTrack",mn(S.primary.main,.5)),_e(S.Slider,"secondaryTrack",mn(S.secondary.main,.5)),_e(S.Slider,"errorTrack",mn(S.error.main,.5)),_e(S.Slider,"infoTrack",mn(S.info.main,.5)),_e(S.Slider,"successTrack",mn(S.success.main,.5)),_e(S.Slider,"warningTrack",mn(S.warning.main,.5));const I=e0(S.background.default,.98);_e(S.SnackbarContent,"bg",I),_e(S.SnackbarContent,"color",Co(()=>S.getContrastText(I))),_e(S.SpeedDialAction,"fabHoverBg",e0(S.background.paper,.15)),_e(S.StepConnector,"border",E("palette-grey-600")),_e(S.StepContent,"border",E("palette-grey-600")),_e(S.Switch,"defaultColor",E("palette-grey-300")),_e(S.Switch,"defaultDisabledColor",E("palette-grey-600")),_e(S.Switch,"primaryDisabledColor",mn(S.primary.main,.55)),_e(S.Switch,"secondaryDisabledColor",mn(S.secondary.main,.55)),_e(S.Switch,"errorDisabledColor",mn(S.error.main,.55)),_e(S.Switch,"infoDisabledColor",mn(S.info.main,.55)),_e(S.Switch,"successDisabledColor",mn(S.success.main,.55)),_e(S.Switch,"warningDisabledColor",mn(S.warning.main,.55)),_e(S.TableCell,"border",mn(Jy(S.divider,1),.68)),_e(S.Tooltip,"bg",Jy(S.grey[700],.92))}ia(S.background,"default"),ia(S.background,"paper"),ia(S.common,"background"),ia(S.common,"onBackground"),ia(S,"divider"),Object.keys(S).forEach(I=>{const F=S[I];F&&typeof F=="object"&&(F.main&&_e(S[I],"mainChannel",mm(gm(F.main))),F.light&&_e(S[I],"lightChannel",mm(gm(F.light))),F.dark&&_e(S[I],"darkChannel",mm(gm(F.dark))),F.contrastText&&_e(S[I],"contrastTextChannel",mm(gm(F.contrastText))),I==="text"&&(ia(S[I],"primary"),ia(S[I],"secondary")),I==="action"&&(F.active&&ia(S[I],"active"),F.selected&&ia(S[I],"selected")))})}),x=e.reduce((C,S)=>Qr(C,S),x);const b={prefix:s,disableCssColorScheme:i,shouldSkipGeneratingVar:o,getSelector:GX(x)},{vars:T,generateThemeVars:w,generateStyleSheets:M}=vX(x,b);return x.vars=T,Object.entries(x.colorSchemes[x.defaultColorScheme]).forEach(([C,S])=>{x[C]=S}),x.generateThemeVars=w,x.generateStyleSheets=M,x.generateSpacing=function(){return Xz(c.spacing,cN(this))},x.getColorSchemeSelector=_X(a),x.spacing=x.generateSpacing(),x.shouldSkipGeneratingVar=o,x.unstable_sxConfig={...sy,...c==null?void 0:c.unstable_sxConfig},x.unstable_sx=function(S){return mc({sx:S,theme:this})},x.toRuntimeSource=WX,x}function PL(n,e,t){n.colorSchemes&&t&&(n.colorSchemes[e]={...t!==!0&&t,palette:SN({...t===!0?{}:t.palette,mode:e})})}function oy(n={},...e){const{palette:t,cssVariables:r=!1,colorSchemes:i=t?void 0:{light:!0},defaultColorScheme:s=t==null?void 0:t.mode,...o}=n,a=s||"light",l=i==null?void 0:i[a],c={...i,...t?{[a]:{...typeof l!="boolean"&&l,palette:t}}:void 0};if(r===!1){if(!("colorSchemes"in n))return fE(n,...e);let u=t;"palette"in n||c[a]&&(c[a]!==!0?u=c[a].palette:a==="dark"&&(u={mode:"dark"}));const h=fE({...n,palette:u},...e);return h.defaultColorScheme=a,h.colorSchemes=c,h.palette.mode==="light"&&(h.colorSchemes.light={...c.light!==!0&&c.light,palette:h.palette},PL(h,"dark",c.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:h.palette},PL(h,"light",c.light)),h}return!t&&!("light"in c)&&a==="light"&&(c.light=!0),KX({...o,colorSchemes:c,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}function YX(n){return String(n).match(/[\d.\-+]*\s*(.*)/)[1]||""}function QX(n){return parseFloat(n)}const US=oy();function Ac(){const n=FS(US);return n[yo]||n}function ZX({props:n,name:e}){return zq({props:n,name:e,defaultTheme:US,themeId:yo})}function x4(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const Bs=n=>x4(n)&&n!=="classes",et=Oq({themeId:yo,defaultTheme:US,rootShouldForwardProp:Bs});function IL({theme:n,...e}){const t=yo in n?n[yo]:void 0;return q.jsx(f4,{...e,themeId:t?yo:void 0,theme:t||n})}const t0={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:JX,useColorScheme:gPe,getInitColorSchemeScript:yPe}=pX({themeId:yo,theme:()=>oy({cssVariables:!0}),colorSchemeStorageKey:t0.colorSchemeStorageKey,modeStorageKey:t0.modeStorageKey,defaultColorScheme:{light:t0.defaultLightColorScheme,dark:t0.defaultDarkColorScheme},resolveTheme:n=>{const e={...n,typography:y4(n.palette,n.typography)};return e.unstable_sx=function(r){return mc({sx:r,theme:this})},e}}),eK=JX;function tK({theme:n,...e}){return typeof n=="function"?q.jsx(IL,{theme:n,...e}):"colorSchemes"in(yo in n?n[yo]:n)?q.jsx(eK,{theme:n,...e}):q.jsx(IL,{theme:n,...e})}function nK(n){return q.jsx(Aq,{...n,defaultTheme:US,themeId:yo})}function bN(n){return function(t){return q.jsx(nK,{styles:typeof n=="function"?r=>n({theme:r,...t}):n})}}function rK(){return Kz}const qt=lX;function Kt(n){return aX(n)}function iK(n){return Gt("MuiSvgIcon",n)}Ft("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const sK=n=>{const{color:e,fontSize:t,classes:r}=n,i={root:["root",e!=="inherit"&&`color${We(e)}`,`fontSize${We(t)}`]};return Xt(i,iK,r)},oK=et("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${We(t.color)}`],e[`fontSize${We(t.fontSize)}`]]}})(qt(({theme:n})=>{var e,t,r,i,s,o,a,l,c,u,h,d,f,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(e=n.transitions)==null?void 0:e.create)==null?void 0:i.call(e,"fill",{duration:(r=(t=(n.vars??n).transitions)==null?void 0:t.duration)==null?void 0:r.shorter}),variants:[{props:g=>!g.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(s=n.typography)==null?void 0:s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(a=n.typography)==null?void 0:a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(c=n.typography)==null?void 0:c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((n.vars??n).palette).filter(([,g])=>g&&g.main).map(([g])=>{var y,m;return{props:{color:g},style:{color:(m=(y=(n.vars??n).palette)==null?void 0:y[g])==null?void 0:m.main}}}),{props:{color:"action"},style:{color:(d=(h=(n.vars??n).palette)==null?void 0:h.action)==null?void 0:d.active}},{props:{color:"disabled"},style:{color:(p=(f=(n.vars??n).palette)==null?void 0:f.action)==null?void 0:p.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),Y_=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:h,viewBox:d="0 0 24 24",...f}=r,p=P.isValidElement(i)&&i.type==="svg",g={...r,color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:d,hasSvgAsChild:p},y={};u||(y.viewBox=d);const m=sK(g);return q.jsxs(oK,{as:a,className:ct(m.root,s),focusable:"false",color:c,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:t,...y,...f,...p&&i.props,ownerState:g,children:[p?i.props.children:i,h?q.jsx("title",{children:h}):null]})});Y_&&(Y_.muiName="SvgIcon");function zs(n,e){function t(r,i){return q.jsx(Y_,{"data-testid":`${e}Icon`,ref:i,...r,children:n})}return t.muiName=Y_.muiName,P.memo(P.forwardRef(t))}var fn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wN=Symbol.for("react.element"),TN=Symbol.for("react.portal"),BS=Symbol.for("react.fragment"),zS=Symbol.for("react.strict_mode"),$S=Symbol.for("react.profiler"),VS=Symbol.for("react.provider"),GS=Symbol.for("react.context"),aK=Symbol.for("react.server_context"),HS=Symbol.for("react.forward_ref"),WS=Symbol.for("react.suspense"),jS=Symbol.for("react.suspense_list"),qS=Symbol.for("react.memo"),XS=Symbol.for("react.lazy"),lK=Symbol.for("react.offscreen"),S4;S4=Symbol.for("react.module.reference");function $s(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case wN:switch(n=n.type,n){case BS:case $S:case zS:case WS:case jS:return n;default:switch(n=n&&n.$$typeof,n){case aK:case GS:case HS:case XS:case qS:case VS:return n;default:return e}}case TN:return e}}}fn.ContextConsumer=GS;fn.ContextProvider=VS;fn.Element=wN;fn.ForwardRef=HS;fn.Fragment=BS;fn.Lazy=XS;fn.Memo=qS;fn.Portal=TN;fn.Profiler=$S;fn.StrictMode=zS;fn.Suspense=WS;fn.SuspenseList=jS;fn.isAsyncMode=function(){return!1};fn.isConcurrentMode=function(){return!1};fn.isContextConsumer=function(n){return $s(n)===GS};fn.isContextProvider=function(n){return $s(n)===VS};fn.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===wN};fn.isForwardRef=function(n){return $s(n)===HS};fn.isFragment=function(n){return $s(n)===BS};fn.isLazy=function(n){return $s(n)===XS};fn.isMemo=function(n){return $s(n)===qS};fn.isPortal=function(n){return $s(n)===TN};fn.isProfiler=function(n){return $s(n)===$S};fn.isStrictMode=function(n){return $s(n)===zS};fn.isSuspense=function(n){return $s(n)===WS};fn.isSuspenseList=function(n){return $s(n)===jS};fn.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===BS||n===$S||n===zS||n===WS||n===jS||n===lK||typeof n=="object"&&n!==null&&(n.$$typeof===XS||n.$$typeof===qS||n.$$typeof===VS||n.$$typeof===GS||n.$$typeof===HS||n.$$typeof===S4||n.getModuleId!==void 0)};fn.typeOf=$s;function b4(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.includes(r))continue;t[r]=n[r]}return t}function Tg(n,e){return Tg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Tg(n,e)}function MN(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Tg(n,e)}const LL={disabled:!1},Q_=Et.createContext(null);var cK=function(e){return e.scrollTop},ym="unmounted",Qc="exited",Zc="entering",ed="entered",mE="exiting",To=function(n){MN(e,n);function e(r,i){var s;s=n.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Qc,s.appearStatus=Zc):l=ed:r.unmountOnExit||r.mountOnEnter?l=ym:l=Qc,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===ym?{status:Qc}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Zc&&o!==ed&&(s=Zc):(o===Zc||o===ed)&&(s=mE)}this.updateStatus(!1,s)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},t.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Zc){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:pm.findDOMNode(this);o&&cK(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Qc&&this.setState({status:ym})},t.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[pm.findDOMNode(this),a],c=l[0],u=l[1],h=this.getTimeouts(),d=a?h.appear:h.enter;if(!i&&!o||LL.disabled){this.safeSetState({status:ed},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Zc},function(){s.props.onEntering(c,u),s.onTransitionEnd(d,function(){s.safeSetState({status:ed},function(){s.props.onEntered(c,u)})})})},t.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:pm.findDOMNode(this);if(!s||LL.disabled){this.safeSetState({status:Qc},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:mE},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Qc},function(){i.props.onExited(a)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},t.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},t.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:pm.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},t.render=function(){var i=this.state.status;if(i===ym)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=b4(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Et.createElement(Q_.Provider,{value:null},typeof o=="function"?o(i,a):Et.cloneElement(Et.Children.only(o),a))},e}(Et.Component);To.contextType=Q_;To.propTypes={};function ph(){}To.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ph,onEntering:ph,onEntered:ph,onExit:ph,onExiting:ph,onExited:ph};To.UNMOUNTED=ym;To.EXITED=Qc;To.ENTERING=Zc;To.ENTERED=ed;To.EXITING=mE;function w4(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function EN(n,e){var t=function(s){return e&&P.isValidElement(s)?e(s):s},r=Object.create(null);return n&&P.Children.map(n,function(i){return i}).forEach(function(i){r[i.key]=t(i)}),r}function uK(n,e){n=n||{},e=e||{};function t(u){return u in e?e[u]:n[u]}var r=Object.create(null),i=[];for(var s in n)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=t(c)}a[l]=t(l)}for(o=0;o<i.length;o++)a[i[o]]=t(i[o]);return a}function hu(n,e,t){return t[e]!=null?t[e]:n.props[e]}function hK(n,e){return EN(n.children,function(t){return P.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:hu(t,"appear",n),enter:hu(t,"enter",n),exit:hu(t,"exit",n)})})}function dK(n,e,t){var r=EN(n.children),i=uK(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(P.isValidElement(o)){var a=s in e,l=s in r,c=e[s],u=P.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=P.cloneElement(o,{onExited:t.bind(null,o),in:!0,exit:hu(o,"exit",n),enter:hu(o,"enter",n)}):!l&&a&&!u?i[s]=P.cloneElement(o,{in:!1}):l&&a&&P.isValidElement(c)&&(i[s]=P.cloneElement(o,{onExited:t.bind(null,o),in:c.props.in,exit:hu(o,"exit",n),enter:hu(o,"enter",n)}))}}),i}var fK=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},pK={component:"div",childFactory:function(e){return e}},AN=function(n){MN(e,n);function e(r,i){var s;s=n.call(this,r,i)||this;var o=s.handleExited.bind(w4(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?hK(i,a):dK(i,o,a),firstRender:!1}},t.handleExited=function(i,s){var o=EN(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=ti({},a.children);return delete l[i.key],{children:l}}))},t.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=b4(i,["component","childFactory"]),l=this.state.contextValue,c=fK(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Et.createElement(Q_.Provider,{value:l},c):Et.createElement(Q_.Provider,{value:l},Et.createElement(s,a,c))},e}(Et.Component);AN.propTypes={};AN.defaultProps=pK;const CN=n=>n.scrollTop;function vf(n,e){const{timeout:t,easing:r,style:i={}}=n;return{duration:i.transitionDuration??(typeof t=="number"?t:t[e.mode]||0),easing:i.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:i.transitionDelay}}function mK(n){return Gt("MuiPaper",n)}Ft("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const gK=n=>{const{square:e,elevation:t,variant:r,classes:i}=n,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${t}`]};return Xt(s,mK,i)},yK=et("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(qt(({theme:n})=>({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:n.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(n.vars||n).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Xf=P.forwardRef(function(e,t){var f;const r=Kt({props:e,name:"MuiPaper"}),i=Ac(),{className:s,component:o="div",elevation:a=1,square:l=!1,variant:c="elevation",...u}=r,h={...r,component:o,elevation:a,square:l,variant:c},d=gK(h);return q.jsx(yK,{as:o,ownerState:h,className:ct(d.root,s),ref:t,...u,style:{...c==="elevation"&&{"--Paper-shadow":(i.vars||i).shadows[a],...i.vars&&{"--Paper-overlay":(f=i.vars.overlays)==null?void 0:f[a]},...!i.vars&&i.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Yn("#fff",pE(a))}, ${Yn("#fff",pE(a))})`}},...u.style}})});function rs(n,e){const{className:t,elementType:r,ownerState:i,externalForwardedProps:s,getSlotOwnerState:o,internalForwardedProps:a,...l}=e,{component:c,slots:u={[n]:void 0},slotProps:h={[n]:void 0},...d}=s,f=u[n]||r,p=l4(h[n],i),{props:{component:g,...y},internalRef:m}=a4({className:t,...l,externalForwardedProps:n==="root"?d:void 0,externalSlotProps:p}),_=cr(m,p==null?void 0:p.ref,e.ref),v=o?o(y):{},x={...i,...v},b=n==="root"?g||c:g,T=o4(f,{...n==="root"&&!c&&!u[n]&&a,...n!=="root"&&!u[n]&&a,...y,...b&&{as:b},ref:_},x);return Object.keys(v).forEach(w=>{delete T[w]}),[f,T]}class Z_{constructor(){fp(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new Z_}static use(){const e=i4(Z_.create).current,[t,r]=P.useState(!1);return e.shouldMount=t,e.setShouldMount=r,P.useEffect(e.mountEffect,[t]),e}mount(){return this.mounted||(this.mounted=_K(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.start(...e)})}stop(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.stop(...e)})}pulsate(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.pulsate(...e)})}}function vK(){return Z_.use()}function _K(){let n,e;const t=new Promise((r,i)=>{n=r,e=i});return t.resolve=n,t.reject=e,t}function xK(n){const{className:e,classes:t,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=n,[u,h]=P.useState(!1),d=ct(e,t.ripple,t.rippleVisible,r&&t.ripplePulsate),f={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},p=ct(t.child,u&&t.childLeaving,r&&t.childPulsate);return!a&&!u&&h(!0),P.useEffect(()=>{if(!a&&l!=null){const g=setTimeout(l,c);return()=>{clearTimeout(g)}}},[l,a,c]),q.jsx("span",{className:d,style:f,children:q.jsx("span",{className:p})})}const Ss=Ft("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),gE=550,SK=80,bK=ny`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,wK=ny`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,TK=ny`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,MK=et("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),EK=et(xK,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Ss.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${bK};
    animation-duration: ${gE}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  &.${Ss.ripplePulsate} {
    animation-duration: ${({theme:n})=>n.transitions.duration.shorter}ms;
  }

  & .${Ss.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Ss.childLeaving} {
    opacity: 0;
    animation-name: ${wK};
    animation-duration: ${gE}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  & .${Ss.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${TK};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,AK=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o,...a}=r,[l,c]=P.useState([]),u=P.useRef(0),h=P.useRef(null);P.useEffect(()=>{h.current&&(h.current(),h.current=null)},[l]);const d=P.useRef(!1),f=yN(),p=P.useRef(null),g=P.useRef(null),y=P.useCallback(x=>{const{pulsate:b,rippleX:T,rippleY:w,rippleSize:M,cb:C}=x;c(S=>[...S,q.jsx(EK,{classes:{ripple:ct(s.ripple,Ss.ripple),rippleVisible:ct(s.rippleVisible,Ss.rippleVisible),ripplePulsate:ct(s.ripplePulsate,Ss.ripplePulsate),child:ct(s.child,Ss.child),childLeaving:ct(s.childLeaving,Ss.childLeaving),childPulsate:ct(s.childPulsate,Ss.childPulsate)},timeout:gE,pulsate:b,rippleX:T,rippleY:w,rippleSize:M},u.current)]),u.current+=1,h.current=C},[s]),m=P.useCallback((x={},b={},T=()=>{})=>{const{pulsate:w=!1,center:M=i||b.pulsate,fakeElement:C=!1}=b;if((x==null?void 0:x.type)==="mousedown"&&d.current){d.current=!1;return}(x==null?void 0:x.type)==="touchstart"&&(d.current=!0);const S=C?null:g.current,E=S?S.getBoundingClientRect():{width:0,height:0,left:0,top:0};let I,F,N;if(M||x===void 0||x.clientX===0&&x.clientY===0||!x.clientX&&!x.touches)I=Math.round(E.width/2),F=Math.round(E.height/2);else{const{clientX:R,clientY:D}=x.touches&&x.touches.length>0?x.touches[0]:x;I=Math.round(R-E.left),F=Math.round(D-E.top)}if(M)N=Math.sqrt((2*E.width**2+E.height**2)/3),N%2===0&&(N+=1);else{const R=Math.max(Math.abs((S?S.clientWidth:0)-I),I)*2+2,D=Math.max(Math.abs((S?S.clientHeight:0)-F),F)*2+2;N=Math.sqrt(R**2+D**2)}x!=null&&x.touches?p.current===null&&(p.current=()=>{y({pulsate:w,rippleX:I,rippleY:F,rippleSize:N,cb:T})},f.start(SK,()=>{p.current&&(p.current(),p.current=null)})):y({pulsate:w,rippleX:I,rippleY:F,rippleSize:N,cb:T})},[i,y,f]),_=P.useCallback(()=>{m({},{pulsate:!0})},[m]),v=P.useCallback((x,b)=>{if(f.clear(),(x==null?void 0:x.type)==="touchend"&&p.current){p.current(),p.current=null,f.start(0,()=>{v(x,b)});return}p.current=null,c(T=>T.length>0?T.slice(1):T),h.current=b},[f]);return P.useImperativeHandle(t,()=>({pulsate:_,start:m,stop:v}),[_,m,v]),q.jsx(MK,{className:ct(Ss.root,s.root,o),ref:g,...a,children:q.jsx(AN,{component:null,exit:!0,children:l})})});function CK(n){return Gt("MuiButtonBase",n)}const RK=Ft("MuiButtonBase",["root","disabled","focusVisible"]),NK=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:r,classes:i}=n,o=Xt({root:["root",e&&"disabled",t&&"focusVisible"]},CK,i);return t&&r&&(o.root+=` ${r}`),o},PK=et("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${RK.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),J_=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:d=!1,focusVisibleClassName:f,LinkComponent:p="a",onBlur:g,onClick:y,onContextMenu:m,onDragLeave:_,onFocus:v,onFocusVisible:x,onKeyDown:b,onKeyUp:T,onMouseDown:w,onMouseLeave:M,onMouseUp:C,onTouchEnd:S,onTouchMove:E,onTouchStart:I,tabIndex:F=0,TouchRippleProps:N,touchRippleRef:R,type:D,...j}=r,L=P.useRef(null),W=vK(),z=cr(W.ref,R),[X,U]=P.useState(!1);c&&X&&U(!1),P.useImperativeHandle(i,()=>({focusVisible:()=>{U(!0),L.current.focus()}}),[]);const te=W.shouldMount&&!u&&!c;P.useEffect(()=>{X&&d&&!u&&W.pulsate()},[u,d,X,W]);function k(oe,Te,Se=h){return Oa(Xe=>(Te&&Te(Xe),Se||W[oe](Xe),!0))}const V=k("start",w),Z=k("stop",m),le=k("stop",_),pe=k("stop",C),ue=k("stop",oe=>{X&&oe.preventDefault(),M&&M(oe)}),be=k("start",I),Pe=k("stop",S),we=k("stop",E),G=k("stop",oe=>{_L(oe.target)||U(!1),g&&g(oe)},!1),Ge=Oa(oe=>{L.current||(L.current=oe.currentTarget),_L(oe.target)&&(U(!0),x&&x(oe)),v&&v(oe)}),$e=()=>{const oe=L.current;return l&&l!=="button"&&!(oe.tagName==="A"&&oe.href)},Ye=Oa(oe=>{d&&!oe.repeat&&X&&oe.key===" "&&W.stop(oe,()=>{W.start(oe)}),oe.target===oe.currentTarget&&$e()&&oe.key===" "&&oe.preventDefault(),b&&b(oe),oe.target===oe.currentTarget&&$e()&&oe.key==="Enter"&&!c&&(oe.preventDefault(),y&&y(oe))}),De=Oa(oe=>{d&&oe.key===" "&&X&&!oe.defaultPrevented&&W.stop(oe,()=>{W.pulsate(oe)}),T&&T(oe),y&&oe.target===oe.currentTarget&&$e()&&oe.key===" "&&!oe.defaultPrevented&&y(oe)});let st=l;st==="button"&&(j.href||j.to)&&(st=p);const Ze={};st==="button"?(Ze.type=D===void 0?"button":D,Ze.disabled=c):(!j.href&&!j.to&&(Ze.role="button"),c&&(Ze["aria-disabled"]=c));const B=cr(t,L),A={...r,centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:d,tabIndex:F,focusVisible:X},ae=NK(A);return q.jsxs(PK,{as:st,className:ct(ae.root,a),ownerState:A,onBlur:G,onClick:y,onContextMenu:Z,onFocus:Ge,onKeyDown:Ye,onKeyUp:De,onMouseDown:V,onMouseLeave:ue,onMouseUp:pe,onDragLeave:le,onTouchEnd:Pe,onTouchMove:we,onTouchStart:be,ref:B,tabIndex:c?-1:F,type:D,...Ze,...j,children:[o,te?q.jsx(AK,{ref:z,center:s,...N}):null]})});function IK(n){return typeof n.main=="string"}function LK(n,e=[]){if(!IK(n))return!1;for(const t of e)if(!n.hasOwnProperty(t)||typeof n[t]!="string")return!1;return!0}function wi(n=[]){return([,e])=>e&&LK(e,n)}function DK(n){return Gt("MuiAlert",n)}const DL=Ft("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function OK(n){return Gt("MuiIconButton",n)}const FK=Ft("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),kK=n=>{const{classes:e,disabled:t,color:r,edge:i,size:s}=n,o={root:["root",t&&"disabled",r!=="default"&&`color${We(r)}`,i&&`edge${We(i)}`,`size${We(s)}`]};return Xt(o,OK,e)},UK=et(J_,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="default"&&e[`color${We(t.color)}`],t.edge&&e[`edge${We(t.edge)}`],e[`size${We(t.size)}`]]}})(qt(({theme:n})=>({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Yn(n.palette.action.active,n.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),qt(({theme:n})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(n.palette).filter(wi()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}})),...Object.entries(n.palette).filter(wi()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":n.vars?`rgba(${(n.vars||n).palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Yn((n.vars||n).palette[e].main,n.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:n.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:n.typography.pxToRem(28)}}],[`&.${FK.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}}))),Mg=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium",...h}=r,d={...r,edge:i,color:a,disabled:l,disableFocusRipple:c,size:u},f=kK(d);return q.jsx(UK,{className:ct(f.root,o),centerRipple:!0,focusRipple:!c,disabled:l,ref:t,...h,ownerState:d,children:s})}),BK=zs(q.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),zK=zs(q.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),$K=zs(q.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),VK=zs(q.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),GK=zs(q.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),HK=n=>{const{variant:e,color:t,severity:r,classes:i}=n,s={root:["root",`color${We(t||r)}`,`${e}${We(t||r)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return Xt(s,DK,i)},WK=et(Xf,{name:"MuiAlert",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`${t.variant}${We(t.color||t.severity)}`]]}})(qt(({theme:n})=>{const e=n.palette.mode==="light"?bg:wg,t=n.palette.mode==="light"?wg:bg;return{...n.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(n.palette).filter(wi(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:n.vars?n.vars.palette.Alert[`${r}Color`]:e(n.palette[r].light,.6),backgroundColor:n.vars?n.vars.palette.Alert[`${r}StandardBg`]:t(n.palette[r].light,.9),[`& .${DL.icon}`]:n.vars?{color:n.vars.palette.Alert[`${r}IconColor`]}:{color:n.palette[r].main}}})),...Object.entries(n.palette).filter(wi(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:n.vars?n.vars.palette.Alert[`${r}Color`]:e(n.palette[r].light,.6),border:`1px solid ${(n.vars||n).palette[r].light}`,[`& .${DL.icon}`]:n.vars?{color:n.vars.palette.Alert[`${r}IconColor`]}:{color:n.palette[r].main}}})),...Object.entries(n.palette).filter(wi(["dark"])).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:{fontWeight:n.typography.fontWeightMedium,...n.vars?{color:n.vars.palette.Alert[`${r}FilledColor`],backgroundColor:n.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:n.palette.mode==="dark"?n.palette[r].dark:n.palette[r].main,color:n.palette.getContrastText(n.palette[r].main)}}}))]}})),jK=et("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(n,e)=>e.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),qK=et("div",{name:"MuiAlert",slot:"Message",overridesResolver:(n,e)=>e.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),OL=et("div",{name:"MuiAlert",slot:"Action",overridesResolver:(n,e)=>e.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),FL={success:q.jsx(BK,{fontSize:"inherit"}),warning:q.jsx(zK,{fontSize:"inherit"}),error:q.jsx($K,{fontSize:"inherit"}),info:q.jsx(VK,{fontSize:"inherit"})},XK=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiAlert"}),{action:i,children:s,className:o,closeText:a="Close",color:l,components:c={},componentsProps:u={},icon:h,iconMapping:d=FL,onClose:f,role:p="alert",severity:g="success",slotProps:y={},slots:m={},variant:_="standard",...v}=r,x={...r,color:l,severity:g,variant:_,colorSeverity:l||g},b=HK(x),T={slots:{closeButton:c.CloseButton,closeIcon:c.CloseIcon,...m},slotProps:{...u,...y}},[w,M]=rs("closeButton",{elementType:Mg,externalForwardedProps:T,ownerState:x}),[C,S]=rs("closeIcon",{elementType:GK,externalForwardedProps:T,ownerState:x});return q.jsxs(WK,{role:p,elevation:0,ownerState:x,className:ct(b.root,o),ref:t,...v,children:[h!==!1?q.jsx(jK,{ownerState:x,className:b.icon,children:h||d[g]||FL[g]}):null,q.jsx(qK,{ownerState:x,className:b.message,children:s}),i!=null?q.jsx(OL,{ownerState:x,className:b.action,children:i}):null,i==null&&f?q.jsx(OL,{ownerState:x,className:b.action,children:q.jsx(w,{size:"small","aria-label":a,title:a,color:"inherit",onClick:f,...M,children:q.jsx(C,{fontSize:"small",...S})})}):null]})});function KK(n){return Gt("MuiTypography",n)}Ft("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const YK={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},QK=rK(),ZK=n=>{const{align:e,gutterBottom:t,noWrap:r,paragraph:i,variant:s,classes:o}=n,a={root:["root",s,n.align!=="inherit"&&`align${We(e)}`,t&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Xt(a,KK,o)},JK=et("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${We(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(qt(({theme:n})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(n.palette).filter(wi()).map(([t])=>({props:{color:t},style:{color:(n.vars||n).palette[t].main}})),...Object.entries(((e=n.palette)==null?void 0:e.text)||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${We(t)}`},style:{color:(n.vars||n).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}})),kL={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Od=P.forwardRef(function(e,t){const{color:r,...i}=Kt({props:e,name:"MuiTypography"}),s=!YK[r],o=QK({...i,...s&&{color:r}}),{align:a="inherit",className:l,component:c,gutterBottom:u=!1,noWrap:h=!1,paragraph:d=!1,variant:f="body1",variantMapping:p=kL,...g}=o,y={...o,align:a,color:r,className:l,component:c,gutterBottom:u,noWrap:h,paragraph:d,variant:f,variantMapping:p},m=c||(d?"p":p[f]||kL[f])||"span",_=ZK(y);return q.jsx(JK,{as:m,ref:t,className:ct(_.root,l),...g,ownerState:y,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...g.style}})});function eY(n){return typeof n=="function"?n():n}const tY=P.forwardRef(function(e,t){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=P.useState(null),l=cr(P.isValidElement(r)?Zu(r):null,t);if(nl(()=>{s||a(eY(i)||document.body)},[i,s]),nl(()=>{if(o&&!s)return hE(t,o),()=>{hE(t,null)}},[t,o,s]),s){if(P.isValidElement(r)){const c={ref:l};return P.cloneElement(r,c)}return q.jsx(P.Fragment,{children:r})}return q.jsx(P.Fragment,{children:o&&JR.createPortal(r,o)})}),nY=zs(q.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function rY(n){return Gt("MuiChip",n)}const It=Ft("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),iY=n=>{const{classes:e,disabled:t,size:r,color:i,iconColor:s,onDelete:o,clickable:a,variant:l}=n,c={root:["root",l,t&&"disabled",`size${We(r)}`,`color${We(i)}`,a&&"clickable",a&&`clickableColor${We(i)}`,o&&"deletable",o&&`deletableColor${We(i)}`,`${l}${We(i)}`],label:["label",`label${We(r)}`],avatar:["avatar",`avatar${We(r)}`,`avatarColor${We(i)}`],icon:["icon",`icon${We(r)}`,`iconColor${We(s)}`],deleteIcon:["deleteIcon",`deleteIcon${We(r)}`,`deleteIconColor${We(i)}`,`deleteIcon${We(l)}Color${We(i)}`]};return Xt(c,rY,e)},sY=et("div",{name:"MuiChip",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n,{color:r,iconColor:i,clickable:s,onDelete:o,size:a,variant:l}=t;return[{[`& .${It.avatar}`]:e.avatar},{[`& .${It.avatar}`]:e[`avatar${We(a)}`]},{[`& .${It.avatar}`]:e[`avatarColor${We(r)}`]},{[`& .${It.icon}`]:e.icon},{[`& .${It.icon}`]:e[`icon${We(a)}`]},{[`& .${It.icon}`]:e[`iconColor${We(i)}`]},{[`& .${It.deleteIcon}`]:e.deleteIcon},{[`& .${It.deleteIcon}`]:e[`deleteIcon${We(a)}`]},{[`& .${It.deleteIcon}`]:e[`deleteIconColor${We(r)}`]},{[`& .${It.deleteIcon}`]:e[`deleteIcon${We(l)}Color${We(r)}`]},e.root,e[`size${We(a)}`],e[`color${We(r)}`],s&&e.clickable,s&&r!=="default"&&e[`clickableColor${We(r)})`],o&&e.deletable,o&&r!=="default"&&e[`deletableColor${We(r)}`],e[l],e[`${l}${We(r)}`]]}})(qt(({theme:n})=>{const e=n.palette.mode==="light"?n.palette.grey[700]:n.palette.grey[300];return{maxWidth:"100%",fontFamily:n.typography.fontFamily,fontSize:n.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(n.vars||n).palette.text.primary,backgroundColor:(n.vars||n).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:n.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${It.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${It.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:n.vars?n.vars.palette.Chip.defaultAvatarColor:e,fontSize:n.typography.pxToRem(12)},[`& .${It.avatarColorPrimary}`]:{color:(n.vars||n).palette.primary.contrastText,backgroundColor:(n.vars||n).palette.primary.dark},[`& .${It.avatarColorSecondary}`]:{color:(n.vars||n).palette.secondary.contrastText,backgroundColor:(n.vars||n).palette.secondary.dark},[`& .${It.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:n.typography.pxToRem(10)},[`& .${It.icon}`]:{marginLeft:5,marginRight:-6},[`& .${It.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / 0.26)`:Yn(n.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:n.vars?`rgba(${n.vars.palette.text.primaryChannel} / 0.4)`:Yn(n.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${It.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${It.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(n.palette).filter(wi(["contrastText"])).map(([t])=>({props:{color:t},style:{backgroundColor:(n.vars||n).palette[t].main,color:(n.vars||n).palette[t].contrastText,[`& .${It.deleteIcon}`]:{color:n.vars?`rgba(${n.vars.palette[t].contrastTextChannel} / 0.7)`:Yn(n.palette[t].contrastText,.7),"&:hover, &:active":{color:(n.vars||n).palette[t].contrastText}}}})),{props:t=>t.iconColor===t.color,style:{[`& .${It.icon}`]:{color:n.vars?n.vars.palette.Chip.defaultIconColor:e}}},{props:t=>t.iconColor===t.color&&t.color!=="default",style:{[`& .${It.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${It.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.action.selectedChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:Yn(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}}},...Object.entries(n.palette).filter(wi(["dark"])).map(([t])=>({props:{color:t,onDelete:!0},style:{[`&.${It.focusVisible}`]:{background:(n.vars||n).palette[t].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.selectedChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:Yn(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity)},[`&.${It.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.action.selectedChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:Yn(n.palette.action.selected,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)},"&:active":{boxShadow:(n.vars||n).shadows[1]}}},...Object.entries(n.palette).filter(wi(["dark"])).map(([t])=>({props:{color:t,clickable:!0},style:{[`&:hover, &.${It.focusVisible}`]:{backgroundColor:(n.vars||n).palette[t].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:n.vars?`1px solid ${n.vars.palette.Chip.defaultBorder}`:`1px solid ${n.palette.mode==="light"?n.palette.grey[400]:n.palette.grey[700]}`,[`&.${It.clickable}:hover`]:{backgroundColor:(n.vars||n).palette.action.hover},[`&.${It.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`& .${It.avatar}`]:{marginLeft:4},[`& .${It.avatarSmall}`]:{marginLeft:2},[`& .${It.icon}`]:{marginLeft:4},[`& .${It.iconSmall}`]:{marginLeft:2},[`& .${It.deleteIcon}`]:{marginRight:5},[`& .${It.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(n.palette).filter(wi()).map(([t])=>({props:{variant:"outlined",color:t},style:{color:(n.vars||n).palette[t].main,border:`1px solid ${n.vars?`rgba(${n.vars.palette[t].mainChannel} / 0.7)`:Yn(n.palette[t].main,.7)}`,[`&.${It.clickable}:hover`]:{backgroundColor:n.vars?`rgba(${n.vars.palette[t].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Yn(n.palette[t].main,n.palette.action.hoverOpacity)},[`&.${It.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette[t].mainChannel} / ${n.vars.palette.action.focusOpacity})`:Yn(n.palette[t].main,n.palette.action.focusOpacity)},[`& .${It.deleteIcon}`]:{color:n.vars?`rgba(${n.vars.palette[t].mainChannel} / 0.7)`:Yn(n.palette[t].main,.7),"&:hover, &:active":{color:(n.vars||n).palette[t].main}}}}))]}})),oY=et("span",{name:"MuiChip",slot:"Label",overridesResolver:(n,e)=>{const{ownerState:t}=n,{size:r}=t;return[e.label,e[`label${We(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function UL(n){return n.key==="Backspace"||n.key==="Delete"}const aY=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiChip"}),{avatar:i,className:s,clickable:o,color:a="default",component:l,deleteIcon:c,disabled:u=!1,icon:h,label:d,onClick:f,onDelete:p,onKeyDown:g,onKeyUp:y,size:m="medium",variant:_="filled",tabIndex:v,skipFocusWhenDisabled:x=!1,...b}=r,T=P.useRef(null),w=cr(T,t),M=W=>{W.stopPropagation(),p&&p(W)},C=W=>{W.currentTarget===W.target&&UL(W)&&W.preventDefault(),g&&g(W)},S=W=>{W.currentTarget===W.target&&p&&UL(W)&&p(W),y&&y(W)},E=o!==!1&&f?!0:o,I=E||p?J_:l||"div",F={...r,component:I,disabled:u,size:m,color:a,iconColor:P.isValidElement(h)&&h.props.color||a,onDelete:!!p,clickable:E,variant:_},N=iY(F),R=I===J_?{component:l||"div",focusVisibleClassName:N.focusVisible,...p&&{disableRipple:!0}}:{};let D=null;p&&(D=c&&P.isValidElement(c)?P.cloneElement(c,{className:ct(c.props.className,N.deleteIcon),onClick:M}):q.jsx(nY,{className:ct(N.deleteIcon),onClick:M}));let j=null;i&&P.isValidElement(i)&&(j=P.cloneElement(i,{className:ct(N.avatar,i.props.className)}));let L=null;return h&&P.isValidElement(h)&&(L=P.cloneElement(h,{className:ct(N.icon,h.props.className)})),q.jsxs(sY,{as:I,className:ct(N.root,s),disabled:E&&u?!0:void 0,onClick:f,onKeyDown:C,onKeyUp:S,ref:w,tabIndex:x&&u?-1:v,ownerState:F,...R,...b,children:[j||L,q.jsx(oY,{className:ct(N.label),ownerState:F,children:d}),D]})});function n0(n){return parseInt(n,10)||0}const lY={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function cY(n){return n==null||Object.keys(n).length===0||n.outerHeightStyle===0&&!n.overflowing}const uY=P.forwardRef(function(e,t){const{onChange:r,maxRows:i,minRows:s=1,style:o,value:a,...l}=e,{current:c}=P.useRef(a!=null),u=P.useRef(null),h=cr(t,u),d=P.useRef(null),f=P.useRef(null),p=P.useCallback(()=>{const m=u.current,v=xo(m).getComputedStyle(m);if(v.width==="0px")return{outerHeightStyle:0,overflowing:!1};const x=f.current;x.style.width=v.width,x.value=m.value||e.placeholder||"x",x.value.slice(-1)===`
`&&(x.value+=" ");const b=v.boxSizing,T=n0(v.paddingBottom)+n0(v.paddingTop),w=n0(v.borderBottomWidth)+n0(v.borderTopWidth),M=x.scrollHeight;x.value="x";const C=x.scrollHeight;let S=M;s&&(S=Math.max(Number(s)*C,S)),i&&(S=Math.min(Number(i)*C,S)),S=Math.max(S,C);const E=S+(b==="border-box"?T+w:0),I=Math.abs(S-M)<=1;return{outerHeightStyle:E,overflowing:I}},[i,s,e.placeholder]),g=P.useCallback(()=>{const m=p();if(cY(m))return;const _=m.outerHeightStyle,v=u.current;d.current!==_&&(d.current=_,v.style.height=`${_}px`),v.style.overflow=m.overflowing?"hidden":""},[p]);nl(()=>{const m=()=>{g()};let _;const v=pN(m),x=u.current,b=xo(x);b.addEventListener("resize",v);let T;return typeof ResizeObserver<"u"&&(T=new ResizeObserver(m),T.observe(x)),()=>{v.clear(),cancelAnimationFrame(_),b.removeEventListener("resize",v),T&&T.disconnect()}},[p,g]),nl(()=>{g()});const y=m=>{c||g(),r&&r(m)};return q.jsxs(P.Fragment,{children:[q.jsx("textarea",{value:a,onChange:y,ref:h,rows:s,style:o,...l}),q.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:f,tabIndex:-1,style:{...lY.shadow,...o,paddingTop:0,paddingBottom:0}})]})});function yE(n){return typeof n=="string"}function Kf({props:n,states:e,muiFormControl:t}){return e.reduce((r,i)=>(r[i]=n[i],t&&typeof n[i]>"u"&&(r[i]=t[i]),r),{})}const RN=P.createContext(void 0);function Yf(){return P.useContext(RN)}function BL(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function ex(n,e=!1){return n&&(BL(n.value)&&n.value!==""||e&&BL(n.defaultValue)&&n.defaultValue!=="")}function hY(n){return n.startAdornment}function dY(n){return Gt("MuiInputBase",n)}const _f=Ft("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var zL;const KS=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${We(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},YS=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},fY=n=>{const{classes:e,color:t,disabled:r,error:i,endAdornment:s,focused:o,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:h,size:d,startAdornment:f,type:p}=n,g={root:["root",`color${We(t)}`,r&&"disabled",i&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",d&&d!=="medium"&&`size${We(d)}`,u&&"multiline",f&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled",p==="search"&&"inputTypeSearch",u&&"inputMultiline",d==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",s&&"inputAdornedEnd",h&&"readOnly"]};return Xt(g,dY,e)},QS=et("div",{name:"MuiInputBase",slot:"Root",overridesResolver:KS})(qt(({theme:n})=>({...n.typography.body1,color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${_f.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:t})=>e.multiline&&t==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),ZS=et("input",{name:"MuiInputBase",slot:"Input",overridesResolver:YS})(qt(({theme:n})=>{const e=n.palette.mode==="light",t={color:"currentColor",...n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},r={opacity:"0 !important"},i=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${_f.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":i,"&:focus::-moz-placeholder":i,"&:focus::-ms-input-placeholder":i},[`&.${_f.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},variants:[{props:({ownerState:s})=>!s.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:s})=>s.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),$L=bN({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),NN=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiInputBase"}),{"aria-describedby":i,autoComplete:s,autoFocus:o,className:a,color:l,components:c={},componentsProps:u={},defaultValue:h,disabled:d,disableInjectingGlobalStyles:f,endAdornment:p,error:g,fullWidth:y=!1,id:m,inputComponent:_="input",inputProps:v={},inputRef:x,margin:b,maxRows:T,minRows:w,multiline:M=!1,name:C,onBlur:S,onChange:E,onClick:I,onFocus:F,onKeyDown:N,onKeyUp:R,placeholder:D,readOnly:j,renderSuffix:L,rows:W,size:z,slotProps:X={},slots:U={},startAdornment:te,type:k="text",value:V,...Z}=r,le=v.value!=null?v.value:V,{current:pe}=P.useRef(le!=null),ue=P.useRef(),be=P.useCallback(Oe=>{},[]),Pe=cr(ue,x,v.ref,be),[we,G]=P.useState(!1),Ge=Yf(),$e=Kf({props:r,muiFormControl:Ge,states:["color","disabled","error","hiddenLabel","size","required","filled"]});$e.focused=Ge?Ge.focused:we,P.useEffect(()=>{!Ge&&d&&we&&(G(!1),S&&S())},[Ge,d,we,S]);const Ye=Ge&&Ge.onFilled,De=Ge&&Ge.onEmpty,st=P.useCallback(Oe=>{ex(Oe)?Ye&&Ye():De&&De()},[Ye,De]);nl(()=>{pe&&st({value:le})},[le,st,pe]);const Ze=Oe=>{F&&F(Oe),v.onFocus&&v.onFocus(Oe),Ge&&Ge.onFocus?Ge.onFocus(Oe):G(!0)},B=Oe=>{S&&S(Oe),v.onBlur&&v.onBlur(Oe),Ge&&Ge.onBlur?Ge.onBlur(Oe):G(!1)},A=(Oe,...ot)=>{if(!pe){const ut=Oe.target||ue.current;if(ut==null)throw new Error(el(1));st({value:ut.value})}v.onChange&&v.onChange(Oe,...ot),E&&E(Oe,...ot)};P.useEffect(()=>{st(ue.current)},[]);const ae=Oe=>{ue.current&&Oe.currentTarget===Oe.target&&ue.current.focus(),I&&I(Oe)};let oe=_,Te=v;M&&oe==="input"&&(W?Te={type:void 0,minRows:W,maxRows:W,...Te}:Te={type:void 0,maxRows:T,minRows:w,...Te},oe=uY);const Se=Oe=>{st(Oe.animationName==="mui-auto-fill-cancel"?ue.current:{value:"x"})};P.useEffect(()=>{Ge&&Ge.setAdornedStart(!!te)},[Ge,te]);const Xe={...r,color:$e.color||"primary",disabled:$e.disabled,endAdornment:p,error:$e.error,focused:$e.focused,formControl:Ge,fullWidth:y,hiddenLabel:$e.hiddenLabel,multiline:M,size:$e.size,startAdornment:te,type:k},Ie=fY(Xe),Fe=U.root||c.Root||QS,pt=X.root||u.root||{},Le=U.input||c.Input||ZS;return Te={...Te,...X.input??u.input},q.jsxs(P.Fragment,{children:[!f&&typeof $L=="function"&&(zL||(zL=q.jsx($L,{}))),q.jsxs(Fe,{...pt,ref:t,onClick:ae,...Z,...!yE(Fe)&&{ownerState:{...Xe,...pt.ownerState}},className:ct(Ie.root,pt.className,a,j&&"MuiInputBase-readOnly"),children:[te,q.jsx(RN.Provider,{value:null,children:q.jsx(Le,{"aria-invalid":$e.error,"aria-describedby":i,autoComplete:s,autoFocus:o,defaultValue:h,disabled:$e.disabled,id:m,onAnimationStart:Se,name:C,placeholder:D,readOnly:j,required:$e.required,rows:W,value:le,onKeyDown:N,onKeyUp:R,type:k,...Te,...!yE(Le)&&{as:oe,ownerState:{...Xe,...Te.ownerState}},ref:Pe,className:ct(Ie.input,Te.className,j&&"MuiInputBase-readOnly"),onBlur:B,onChange:A,onFocus:Ze})}),p,L?L({...$e,startAdornment:te}):null]})]})});function pY(n){return Gt("MuiInput",n)}const Tp={..._f,...Ft("MuiInput",["root","underline","input"])};function mY(n){return Gt("MuiOutlinedInput",n)}const Ro={..._f,...Ft("MuiOutlinedInput",["root","notchedOutline","input"])};function gY(n){return Gt("MuiFilledInput",n)}const kc={..._f,...Ft("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},yY=zs(q.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),vY={entering:{opacity:1},entered:{opacity:1}},T4=P.forwardRef(function(e,t){const r=Ac(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:h,onEntering:d,onExit:f,onExited:p,onExiting:g,style:y,timeout:m=i,TransitionComponent:_=To,...v}=e,x=P.useRef(null),b=cr(x,Zu(a),t),T=N=>R=>{if(N){const D=x.current;R===void 0?N(D):N(D,R)}},w=T(d),M=T((N,R)=>{CN(N);const D=vf({style:y,timeout:m,easing:l},{mode:"enter"});N.style.webkitTransition=r.transitions.create("opacity",D),N.style.transition=r.transitions.create("opacity",D),u&&u(N,R)}),C=T(h),S=T(g),E=T(N=>{const R=vf({style:y,timeout:m,easing:l},{mode:"exit"});N.style.webkitTransition=r.transitions.create("opacity",R),N.style.transition=r.transitions.create("opacity",R),f&&f(N)}),I=T(p),F=N=>{s&&s(x.current,N)};return q.jsx(_,{appear:o,in:c,nodeRef:x,onEnter:M,onEntered:C,onEntering:w,onExit:E,onExited:I,onExiting:S,addEndListener:F,timeout:m,...v,children:(N,R)=>P.cloneElement(a,{style:{opacity:0,visibility:N==="exited"&&!c?"hidden":void 0,...vY[N],...y,...a.props.style},ref:b,...R})})});function _Y(n){return Gt("MuiBackdrop",n)}Ft("MuiBackdrop",["root","invisible"]);const xY=n=>{const{ownerState:e,...t}=n;return t},SY=n=>{const{classes:e,invisible:t}=n;return Xt({root:["root",t&&"invisible"]},_Y,e)},bY=et("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),M4=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiBackdrop"}),{children:i,className:s,component:o="div",invisible:a=!1,open:l,components:c={},componentsProps:u={},slotProps:h={},slots:d={},TransitionComponent:f,transitionDuration:p,...g}=r,y={...r,component:o,invisible:a},m=SY(y),_={transition:f,root:c.Root,...d},v={...u,...h},x={slots:_,slotProps:v},[b,T]=rs("root",{elementType:bY,externalForwardedProps:x,className:ct(m.root,s),ownerState:y}),[w,M]=rs("transition",{elementType:T4,externalForwardedProps:x,ownerState:y}),C=xY(M);return q.jsx(w,{in:l,timeout:p,...g,...C,children:q.jsx(b,{"aria-hidden":!0,...T,classes:m,ref:t,children:i})})}),wY=Ft("MuiBox",["root"]),TY=oy(),E4=Nq({themeId:yo,defaultTheme:TY,defaultClassName:wY.root,generateClassName:Yz.generate});function VL(n){return n.substring(2).toLowerCase()}function MY(n,e){return e.documentElement.clientWidth<n.clientX||e.documentElement.clientHeight<n.clientY}function EY(n){const{children:e,disableReactTree:t=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:s="onTouchEnd"}=n,o=P.useRef(!1),a=P.useRef(null),l=P.useRef(!1),c=P.useRef(!1);P.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const u=cr(Zu(e),a),h=Oa(p=>{const g=c.current;c.current=!1;const y=Ni(a.current);if(!l.current||!a.current||"clientX"in p&&MY(p,y))return;if(o.current){o.current=!1;return}let m;p.composedPath?m=p.composedPath().includes(a.current):m=!y.documentElement.contains(p.target)||a.current.contains(p.target),!m&&(t||!g)&&i(p)}),d=p=>g=>{c.current=!0;const y=e.props[p];y&&y(g)},f={ref:u};return s!==!1&&(f[s]=d(s)),P.useEffect(()=>{if(s!==!1){const p=VL(s),g=Ni(a.current),y=()=>{o.current=!0};return g.addEventListener(p,h),g.addEventListener("touchmove",y),()=>{g.removeEventListener(p,h),g.removeEventListener("touchmove",y)}}},[h,s]),r!==!1&&(f[r]=d(r)),P.useEffect(()=>{if(r!==!1){const p=VL(r),g=Ni(a.current);return g.addEventListener(p,h),()=>{g.removeEventListener(p,h)}}},[h,r]),q.jsx(P.Fragment,{children:P.cloneElement(e,f)})}const vE=typeof bN({})=="function",AY=(n,e)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...e&&!n.vars&&{colorScheme:n.palette.mode}}),CY=n=>({color:(n.vars||n).palette.text.primary,...n.typography.body1,backgroundColor:(n.vars||n).palette.background.default,"@media print":{backgroundColor:(n.vars||n).palette.common.white}}),A4=(n,e=!1)=>{var s,o;const t={};e&&n.colorSchemes&&typeof n.getColorSchemeSelector=="function"&&Object.entries(n.colorSchemes).forEach(([a,l])=>{var u,h;const c=n.getColorSchemeSelector(a);c.startsWith("@")?t[c]={":root":{colorScheme:(u=l.palette)==null?void 0:u.mode}}:t[c.replace(/\s*&/,"")]={colorScheme:(h=l.palette)==null?void 0:h.mode}});let r={html:AY(n,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:n.typography.fontWeightBold},body:{margin:0,...CY(n),"&::backdrop":{backgroundColor:(n.vars||n).palette.background.default}},...t};const i=(o=(s=n.components)==null?void 0:s.MuiCssBaseline)==null?void 0:o.styleOverrides;return i&&(r=[r,i]),r},Hv="mui-ecs",RY=n=>{const e=A4(n,!1),t=Array.isArray(e)?e[0]:e;return!n.vars&&t&&(t.html[`:root:has(${Hv})`]={colorScheme:n.palette.mode}),n.colorSchemes&&Object.entries(n.colorSchemes).forEach(([r,i])=>{var o,a;const s=n.getColorSchemeSelector(r);s.startsWith("@")?t[s]={[`:root:not(:has(.${Hv}))`]:{colorScheme:(o=i.palette)==null?void 0:o.mode}}:t[s.replace(/\s*&/,"")]={[`&:not(:has(.${Hv}))`]:{colorScheme:(a=i.palette)==null?void 0:a.mode}}}),e},NY=bN(vE?({theme:n,enableColorScheme:e})=>A4(n,e):({theme:n})=>RY(n));function PY(n){const e=Kt({props:n,name:"MuiCssBaseline"}),{children:t,enableColorScheme:r=!1}=e;return q.jsxs(P.Fragment,{children:[vE&&q.jsx(NY,{enableColorScheme:r}),!vE&&!r&&q.jsx("span",{className:Hv,style:{display:"none"}}),t]})}function IY(n){const e=Ni(n);return e.body===n?xo(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function Bm(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function GL(n){return parseInt(xo(n).getComputedStyle(n).paddingRight,10)||0}function LY(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(n.tagName),r=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||r}function HL(n,e,t,r,i){const s=[e,t,...r];[].forEach.call(n.children,o=>{const a=!s.includes(o),l=!LY(o);a&&l&&Bm(o,i)})}function X1(n,e){let t=-1;return n.some((r,i)=>e(r)?(t=i,!0):!1),t}function DY(n,e){const t=[],r=n.container;if(!e.disableScrollLock){if(IY(r)){const o=s4(xo(r));t.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${GL(r)+o}px`;const a=Ni(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{t.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${GL(l)+o}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=Ni(r).body;else{const o=r.parentElement,a=xo(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}t.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{t.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function OY(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class FY{constructor(){this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&Bm(e.modalRef,!1);const i=OY(t);HL(t,e.mount,e.modalRef,i,!0);const s=X1(this.containers,o=>o.container===t);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:i}),r)}mount(e,t){const r=X1(this.containers,s=>s.modals.includes(e)),i=this.containers[r];i.restore||(i.restore=DY(i,t))}remove(e,t=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=X1(this.containers,o=>o.modals.includes(e)),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&Bm(e.modalRef,t),HL(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&Bm(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const kY=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function UY(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function BY(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=r=>n.ownerDocument.querySelector(`input[type="radio"]${r}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function zY(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||BY(n))}function $Y(n){const e=[],t=[];return Array.from(n.querySelectorAll(kY)).forEach((r,i)=>{const s=UY(r);s===-1||!zY(r)||(s===0?e.push(r):t.push({documentOrder:i,tabIndex:s,node:r}))}),t.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function VY(){return!0}function GY(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=$Y,isEnabled:o=VY,open:a}=n,l=P.useRef(!1),c=P.useRef(null),u=P.useRef(null),h=P.useRef(null),d=P.useRef(null),f=P.useRef(!1),p=P.useRef(null),g=cr(Zu(e),p),y=P.useRef(null);P.useEffect(()=>{!a||!p.current||(f.current=!t)},[t,a]),P.useEffect(()=>{if(!a||!p.current)return;const v=Ni(p.current);return p.current.contains(v.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),f.current&&p.current.focus()),()=>{i||(h.current&&h.current.focus&&(l.current=!0,h.current.focus()),h.current=null)}},[a]),P.useEffect(()=>{if(!a||!p.current)return;const v=Ni(p.current),x=w=>{y.current=w,!(r||!o()||w.key!=="Tab")&&v.activeElement===p.current&&w.shiftKey&&(l.current=!0,u.current&&u.current.focus())},b=()=>{var C,S;const w=p.current;if(w===null)return;if(!v.hasFocus()||!o()||l.current){l.current=!1;return}if(w.contains(v.activeElement)||r&&v.activeElement!==c.current&&v.activeElement!==u.current)return;if(v.activeElement!==d.current)d.current=null;else if(d.current!==null)return;if(!f.current)return;let M=[];if((v.activeElement===c.current||v.activeElement===u.current)&&(M=s(p.current)),M.length>0){const E=!!((C=y.current)!=null&&C.shiftKey&&((S=y.current)==null?void 0:S.key)==="Tab"),I=M[0],F=M[M.length-1];typeof I!="string"&&typeof F!="string"&&(E?F.focus():I.focus())}else w.focus()};v.addEventListener("focusin",b),v.addEventListener("keydown",x,!0);const T=setInterval(()=>{v.activeElement&&v.activeElement.tagName==="BODY"&&b()},50);return()=>{clearInterval(T),v.removeEventListener("focusin",b),v.removeEventListener("keydown",x,!0)}},[t,r,i,o,a,s]);const m=v=>{h.current===null&&(h.current=v.relatedTarget),f.current=!0,d.current=v.target;const x=e.props.onFocus;x&&x(v)},_=v=>{h.current===null&&(h.current=v.relatedTarget),f.current=!0};return q.jsxs(P.Fragment,{children:[q.jsx("div",{tabIndex:a?0:-1,onFocus:_,ref:c,"data-testid":"sentinelStart"}),P.cloneElement(e,{ref:g,onFocus:m}),q.jsx("div",{tabIndex:a?0:-1,onFocus:_,ref:u,"data-testid":"sentinelEnd"})]})}function HY(n){return typeof n=="function"?n():n}function WY(n){return n?n.props.hasOwnProperty("in"):!1}const r0=new FY;function jY(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:r=!1,closeAfterTransition:i=!1,onTransitionEnter:s,onTransitionExited:o,children:a,onClose:l,open:c,rootRef:u}=n,h=P.useRef({}),d=P.useRef(null),f=P.useRef(null),p=cr(f,u),[g,y]=P.useState(!c),m=WY(a);let _=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(_=!1);const v=()=>Ni(d.current),x=()=>(h.current.modalRef=f.current,h.current.mount=d.current,h.current),b=()=>{r0.mount(x(),{disableScrollLock:r}),f.current&&(f.current.scrollTop=0)},T=Oa(()=>{const R=HY(e)||v().body;r0.add(x(),R),f.current&&b()}),w=()=>r0.isTopModal(x()),M=Oa(R=>{d.current=R,R&&(c&&w()?b():f.current&&Bm(f.current,_))}),C=P.useCallback(()=>{r0.remove(x(),_)},[_]);P.useEffect(()=>()=>{C()},[C]),P.useEffect(()=>{c?T():(!m||!i)&&C()},[c,C,m,i,T]);const S=R=>D=>{var j;(j=R.onKeyDown)==null||j.call(R,D),!(D.key!=="Escape"||D.which===229||!w())&&(t||(D.stopPropagation(),l&&l(D,"escapeKeyDown")))},E=R=>D=>{var j;(j=R.onClick)==null||j.call(R,D),D.target===D.currentTarget&&l&&l(D,"backdropClick")};return{getRootProps:(R={})=>{const D=K_(n);delete D.onTransitionEnter,delete D.onTransitionExited;const j={...D,...R};return{role:"presentation",...j,onKeyDown:S(j),ref:p}},getBackdropProps:(R={})=>{const D=R;return{"aria-hidden":!0,...D,onClick:E(D),open:c}},getTransitionProps:()=>{const R=()=>{y(!1),s&&s()},D=()=>{y(!0),o&&o(),i&&C()};return{onEnter:pL(R,a==null?void 0:a.props.onEnter),onExited:pL(D,a==null?void 0:a.props.onExited)}},rootRef:p,portalRef:M,isTopModal:w,exited:g,hasTransition:m}}function qY(n){return Gt("MuiModal",n)}Ft("MuiModal",["root","hidden","backdrop"]);const XY=n=>{const{open:e,exited:t,classes:r}=n;return Xt({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},qY,r)},KY=et("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(qt(({theme:n})=>({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),YY=et(M4,{name:"MuiModal",slot:"Backdrop",overridesResolver:(n,e)=>e.backdrop})({zIndex:-1}),PN=P.forwardRef(function(e,t){const r=Kt({name:"MuiModal",props:e}),{BackdropComponent:i=YY,BackdropProps:s,classes:o,className:a,closeAfterTransition:l=!1,children:c,container:u,component:h,components:d={},componentsProps:f={},disableAutoFocus:p=!1,disableEnforceFocus:g=!1,disableEscapeKeyDown:y=!1,disablePortal:m=!1,disableRestoreFocus:_=!1,disableScrollLock:v=!1,hideBackdrop:x=!1,keepMounted:b=!1,onBackdropClick:T,onClose:w,onTransitionEnter:M,onTransitionExited:C,open:S,slotProps:E={},slots:I={},theme:F,...N}=r,R={...r,closeAfterTransition:l,disableAutoFocus:p,disableEnforceFocus:g,disableEscapeKeyDown:y,disablePortal:m,disableRestoreFocus:_,disableScrollLock:v,hideBackdrop:x,keepMounted:b},{getRootProps:D,getBackdropProps:j,getTransitionProps:L,portalRef:W,isTopModal:z,exited:X,hasTransition:U}=jY({...R,rootRef:t}),te={...R,exited:X},k=XY(te),V={};if(c.props.tabIndex===void 0&&(V.tabIndex="-1"),U){const{onEnter:we,onExited:G}=L();V.onEnter=we,V.onExited=G}const Z={...N,slots:{root:d.Root,backdrop:d.Backdrop,...I},slotProps:{...f,...E}},[le,pe]=rs("root",{elementType:KY,externalForwardedProps:Z,getSlotProps:D,additionalProps:{ref:t,as:h},ownerState:te,className:ct(a,k==null?void 0:k.root,!te.open&&te.exited&&(k==null?void 0:k.hidden))}),[ue,be]=rs("backdrop",{elementType:i,externalForwardedProps:Z,additionalProps:s,getSlotProps:we=>j({...we,onClick:G=>{T&&T(G),we!=null&&we.onClick&&we.onClick(G)}}),className:ct(s==null?void 0:s.className,k==null?void 0:k.backdrop),ownerState:te}),Pe=cr(s==null?void 0:s.ref,be.ref);return!b&&!S&&(!U||X)?null:q.jsx(tY,{ref:W,container:u,disablePortal:m,children:q.jsxs(le,{...pe,children:[!x&&i?q.jsx(ue,{...be,ref:Pe}):null,q.jsx(GY,{disableEnforceFocus:g,disableAutoFocus:p,disableRestoreFocus:_,isEnabled:z,open:S,children:P.cloneElement(c,V)})]})})});function QY(n){return Gt("MuiDialog",n)}const K1=Ft("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),ZY=P.createContext({}),JY=et(M4,{name:"MuiDialog",slot:"Backdrop",overrides:(n,e)=>e.backdrop})({zIndex:-1}),eQ=n=>{const{classes:e,scroll:t,maxWidth:r,fullWidth:i,fullScreen:s}=n,o={root:["root"],container:["container",`scroll${We(t)}`],paper:["paper",`paperScroll${We(t)}`,`paperWidth${We(String(r))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return Xt(o,QY,e)},tQ=et(PN,{name:"MuiDialog",slot:"Root",overridesResolver:(n,e)=>e.root})({"@media print":{position:"absolute !important"}}),nQ=et("div",{name:"MuiDialog",slot:"Container",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.container,e[`scroll${We(t.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),rQ=et(Xf,{name:"MuiDialog",slot:"Paper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.paper,e[`scrollPaper${We(t.scroll)}`],e[`paperWidth${We(String(t.maxWidth))}`],t.fullWidth&&e.paperFullWidth,t.fullScreen&&e.paperFullScreen]}})(qt(({theme:n})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:n.breakpoints.unit==="px"?Math.max(n.breakpoints.values.xs,444):`max(${n.breakpoints.values.xs}${n.breakpoints.unit}, 444px)`,[`&.${K1.paperScrollBody}`]:{[n.breakpoints.down(Math.max(n.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(n.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${n.breakpoints.values[e]}${n.breakpoints.unit}`,[`&.${K1.paperScrollBody}`]:{[n.breakpoints.down(n.breakpoints.values[e]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${K1.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),iQ=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiDialog"}),i=Ac(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":a,BackdropComponent:l,BackdropProps:c,children:u,className:h,disableEscapeKeyDown:d=!1,fullScreen:f=!1,fullWidth:p=!1,maxWidth:g="sm",onBackdropClick:y,onClick:m,onClose:_,open:v,PaperComponent:x=Xf,PaperProps:b={},scroll:T="paper",TransitionComponent:w=T4,transitionDuration:M=s,TransitionProps:C,...S}=r,E={...r,disableEscapeKeyDown:d,fullScreen:f,fullWidth:p,maxWidth:g,scroll:T},I=eQ(E),F=P.useRef(),N=L=>{F.current=L.target===L.currentTarget},R=L=>{m&&m(L),F.current&&(F.current=null,y&&y(L),_&&_(L,"backdropClick"))},D=mN(a),j=P.useMemo(()=>({titleId:D}),[D]);return q.jsx(tQ,{className:ct(I.root,h),closeAfterTransition:!0,components:{Backdrop:JY},componentsProps:{backdrop:{transitionDuration:M,as:l,...c}},disableEscapeKeyDown:d,onClose:_,open:v,ref:t,onClick:R,ownerState:E,...S,children:q.jsx(w,{appear:!0,in:v,timeout:M,role:"presentation",...C,children:q.jsx(nQ,{className:ct(I.container),onMouseDown:N,ownerState:E,children:q.jsx(rQ,{as:x,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":D,...b,className:ct(I.paper,b.className),ownerState:E,children:q.jsx(ZY.Provider,{value:j,children:u})})})})})});function sQ(n){return Gt("MuiDialogContent",n)}Ft("MuiDialogContent",["root","dividers"]);const oQ=Ft("MuiDialogTitle",["root"]),aQ=n=>{const{classes:e,dividers:t}=n;return Xt({root:["root",t&&"dividers"]},sQ,e)},lQ=et("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.dividers&&e.dividers]}})(qt(({theme:n})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(n.vars||n).palette.divider}`,borderBottom:`1px solid ${(n.vars||n).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${oQ.root} + &`]:{paddingTop:0}}}]}))),cQ=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1,...o}=r,a={...r,dividers:s},l=aQ(a);return q.jsx(lQ,{className:ct(l.root,i),ownerState:a,ref:t,...o})});function uQ(n){return Gt("MuiDivider",n)}const WL=Ft("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),hQ=n=>{const{absolute:e,children:t,classes:r,flexItem:i,light:s,orientation:o,textAlign:a,variant:l}=n;return Xt({root:["root",e&&"absolute",l,s&&"light",o==="vertical"&&"vertical",i&&"flexItem",t&&"withChildren",t&&o==="vertical"&&"withChildrenVertical",a==="right"&&o!=="vertical"&&"textAlignRight",a==="left"&&o!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",o==="vertical"&&"wrapperVertical"]},uQ,r)},dQ=et("div",{name:"MuiDivider",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.absolute&&e.absolute,e[t.variant],t.light&&e.light,t.orientation==="vertical"&&e.vertical,t.flexItem&&e.flexItem,t.children&&e.withChildren,t.children&&t.orientation==="vertical"&&e.withChildrenVertical,t.textAlign==="right"&&t.orientation!=="vertical"&&e.textAlignRight,t.textAlign==="left"&&t.orientation!=="vertical"&&e.textAlignLeft]}})(qt(({theme:n})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(n.vars||n).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:n.vars?`rgba(${n.vars.palette.dividerChannel} / 0.08)`:Yn(n.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:n.spacing(2),marginRight:n.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:n.spacing(1),marginBottom:n.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(n.vars||n).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(n.vars||n).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),fQ=et("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.wrapper,t.orientation==="vertical"&&e.wrapperVertical]}})(qt(({theme:n})=>({display:"inline-block",paddingLeft:`calc(${n.spacing(1)} * 1.2)`,paddingRight:`calc(${n.spacing(1)} * 1.2)`,variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${n.spacing(1)} * 1.2)`,paddingBottom:`calc(${n.spacing(1)} * 1.2)`}}]}))),_E=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiDivider"}),{absolute:i=!1,children:s,className:o,orientation:a="horizontal",component:l=s||a==="vertical"?"div":"hr",flexItem:c=!1,light:u=!1,role:h=l!=="hr"?"separator":void 0,textAlign:d="center",variant:f="fullWidth",...p}=r,g={...r,absolute:i,component:l,flexItem:c,light:u,orientation:a,role:h,textAlign:d,variant:f},y=hQ(g);return q.jsx(dQ,{as:l,className:ct(y.root,o),role:h,ref:t,ownerState:g,"aria-orientation":h==="separator"&&(l!=="hr"||a==="vertical")?a:void 0,...p,children:s?q.jsx(fQ,{className:y.wrapper,ownerState:g,children:s}):null})});_E&&(_E.muiSkipListHighlight=!0);function pQ(n,e,t){const r=e.getBoundingClientRect(),i=t&&t.getBoundingClientRect(),s=xo(e);let o;if(e.fakeTransform)o=e.fakeTransform;else{const c=s.getComputedStyle(e);o=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("transform")}let a=0,l=0;if(o&&o!=="none"&&typeof o=="string"){const c=o.split("(")[1].split(")")[0].split(",");a=parseInt(c[4],10),l=parseInt(c[5],10)}return n==="left"?i?`translateX(${i.right+a-r.left}px)`:`translateX(${s.innerWidth+a-r.left}px)`:n==="right"?i?`translateX(-${r.right-i.left-a}px)`:`translateX(-${r.left+r.width-a}px)`:n==="up"?i?`translateY(${i.bottom+l-r.top}px)`:`translateY(${s.innerHeight+l-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}function mQ(n){return typeof n=="function"?n():n}function i0(n,e,t){const r=mQ(t),i=pQ(n,e,r);i&&(e.style.webkitTransform=i,e.style.transform=i)}const gQ=P.forwardRef(function(e,t){const r=Ac(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:l,container:c,direction:u="down",easing:h=i,in:d,onEnter:f,onEntered:p,onEntering:g,onExit:y,onExited:m,onExiting:_,style:v,timeout:x=s,TransitionComponent:b=To,...T}=e,w=P.useRef(null),M=cr(Zu(l),w,t),C=L=>W=>{L&&(W===void 0?L(w.current):L(w.current,W))},S=C((L,W)=>{i0(u,L,c),CN(L),f&&f(L,W)}),E=C((L,W)=>{const z=vf({timeout:x,style:v,easing:h},{mode:"enter"});L.style.webkitTransition=r.transitions.create("-webkit-transform",{...z}),L.style.transition=r.transitions.create("transform",{...z}),L.style.webkitTransform="none",L.style.transform="none",g&&g(L,W)}),I=C(p),F=C(_),N=C(L=>{const W=vf({timeout:x,style:v,easing:h},{mode:"exit"});L.style.webkitTransition=r.transitions.create("-webkit-transform",W),L.style.transition=r.transitions.create("transform",W),i0(u,L,c),y&&y(L)}),R=C(L=>{L.style.webkitTransition="",L.style.transition="",m&&m(L)}),D=L=>{o&&o(w.current,L)},j=P.useCallback(()=>{w.current&&i0(u,w.current,c)},[u,c]);return P.useEffect(()=>{if(d||u==="down"||u==="right")return;const L=pN(()=>{w.current&&i0(u,w.current,c)}),W=xo(w.current);return W.addEventListener("resize",L),()=>{L.clear(),W.removeEventListener("resize",L)}},[u,d,c]),P.useEffect(()=>{d||j()},[d,j]),q.jsx(b,{nodeRef:w,onEnter:S,onEntered:I,onEntering:E,onExit:N,onExited:R,onExiting:F,addEndListener:D,appear:a,in:d,timeout:x,...T,children:(L,W)=>P.cloneElement(l,{ref:M,style:{visibility:L==="exited"&&!d?"hidden":void 0,...v,...l.props.style},...W})})});function yQ(n){return Gt("MuiDrawer",n)}Ft("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const C4=(n,e)=>{const{ownerState:t}=n;return[e.root,(t.variant==="permanent"||t.variant==="persistent")&&e.docked,e.modal]},vQ=n=>{const{classes:e,anchor:t,variant:r}=n,i={root:["root"],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${We(t)}`,r!=="temporary"&&`paperAnchorDocked${We(t)}`]};return Xt(i,yQ,e)},_Q=et(PN,{name:"MuiDrawer",slot:"Root",overridesResolver:C4})(qt(({theme:n})=>({zIndex:(n.vars||n).zIndex.drawer}))),jL=et("div",{shouldForwardProp:Bs,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:C4})({flex:"0 0 auto"}),xQ=et(Xf,{name:"MuiDrawer",slot:"Paper",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.paper,e[`paperAnchor${We(t.anchor)}`],t.variant!=="temporary"&&e[`paperAnchorDocked${We(t.anchor)}`]]}})(qt(({theme:n})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(n.vars||n).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:e})=>e.anchor==="left"&&e.variant!=="temporary",style:{borderRight:`1px solid ${(n.vars||n).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="top"&&e.variant!=="temporary",style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="right"&&e.variant!=="temporary",style:{borderLeft:`1px solid ${(n.vars||n).palette.divider}`}},{props:({ownerState:e})=>e.anchor==="bottom"&&e.variant!=="temporary",style:{borderTop:`1px solid ${(n.vars||n).palette.divider}`}}]}))),R4={left:"right",right:"left",top:"down",bottom:"up"};function SQ(n){return["left","right"].includes(n)}function bQ({direction:n},e){return n==="rtl"&&SQ(e)?R4[e]:e}const wQ=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiDrawer"}),i=Ac(),s=h4(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:l,children:c,className:u,elevation:h=16,hideBackdrop:d=!1,ModalProps:{BackdropProps:f,...p}={},onClose:g,open:y=!1,PaperProps:m={},SlideProps:_,TransitionComponent:v=gQ,transitionDuration:x=o,variant:b="temporary",...T}=r,w=P.useRef(!1);P.useEffect(()=>{w.current=!0},[]);const M=bQ({direction:s?"rtl":"ltr"},a),S={...r,anchor:a,elevation:h,open:y,variant:b,...T},E=vQ(S),I=q.jsx(xQ,{elevation:b==="temporary"?h:0,square:!0,...m,className:ct(E.paper,m.className),ownerState:S,children:c});if(b==="permanent")return q.jsx(jL,{className:ct(E.root,E.docked,u),ownerState:S,ref:t,...T,children:I});const F=q.jsx(v,{in:y,direction:R4[M],timeout:x,appear:w.current,..._,children:I});return b==="persistent"?q.jsx(jL,{className:ct(E.root,E.docked,u),ownerState:S,ref:t,...T,children:F}):q.jsx(_Q,{BackdropProps:{...l,...f,transitionDuration:x},className:ct(E.root,E.modal,u),open:y,ownerState:S,onClose:g,hideBackdrop:d,ref:t,...T,...p,children:F})}),TQ=n=>{const{classes:e,disableUnderline:t,startAdornment:r,endAdornment:i,size:s,hiddenLabel:o,multiline:a}=n,l={root:["root",!t&&"underline",r&&"adornedStart",i&&"adornedEnd",s==="small"&&`size${We(s)}`,o&&"hiddenLabel",a&&"multiline"],input:["input"]},c=Xt(l,gY,e);return{...e,...c}},MQ=et(QS,{shouldForwardProp:n=>Bs(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...KS(n,e),!t.disableUnderline&&e.underline]}})(qt(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",i=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:i,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r}},[`&.${kc.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r},[`&.${kc.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:s},variants:[{props:({ownerState:o})=>!o.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${kc.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${kc.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${kc.disabled}, .${kc.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${kc.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(wi()).map(([o])=>{var a;return{props:{disableUnderline:!1,color:o},style:{"&::after":{borderBottom:`2px solid ${(a=(n.vars||n).palette[o])==null?void 0:a.main}`}}}}),{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:12}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:12}},{props:({ownerState:o})=>o.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:o,size:a})=>o.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel&&o.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),EQ=et(ZS,{name:"MuiFilledInput",slot:"Input",overridesResolver:YS})(qt(({theme:n})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),tx=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiFilledInput"}),{disableUnderline:i=!1,components:s={},componentsProps:o,fullWidth:a=!1,hiddenLabel:l,inputComponent:c="input",multiline:u=!1,slotProps:h,slots:d={},type:f="text",...p}=r,g={...r,disableUnderline:i,fullWidth:a,inputComponent:c,multiline:u,type:f},y=TQ(r),m={root:{ownerState:g},input:{ownerState:g}},_=h??o?Qr(m,h??o):m,v=d.root??s.Root??MQ,x=d.input??s.Input??EQ;return q.jsx(NN,{slots:{root:v,input:x},componentsProps:_,fullWidth:a,inputComponent:c,multiline:u,ref:t,type:f,...p,classes:y})});tx&&(tx.muiName="Input");function AQ(n){return Gt("MuiFormControl",n)}Ft("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const CQ=n=>{const{classes:e,margin:t,fullWidth:r}=n,i={root:["root",t!=="none"&&`margin${We(t)}`,r&&"fullWidth"]};return Xt(i,AQ,e)},RQ=et("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:n},e)=>({...e.root,...e[`margin${We(n.margin)}`],...n.fullWidth&&e.fullWidth})})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),NQ=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiFormControl"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:h=!1,hiddenLabel:d=!1,margin:f="none",required:p=!1,size:g="medium",variant:y="outlined",...m}=r,_={...r,color:o,component:a,disabled:l,error:c,fullWidth:h,hiddenLabel:d,margin:f,required:p,size:g,variant:y},v=CQ(_),[x,b]=P.useState(()=>{let F=!1;return i&&P.Children.forEach(i,N=>{if(!H1(N,["Input","Select"]))return;const R=H1(N,["Select"])?N.props.input:N;R&&hY(R.props)&&(F=!0)}),F}),[T,w]=P.useState(()=>{let F=!1;return i&&P.Children.forEach(i,N=>{H1(N,["Input","Select"])&&(ex(N.props,!0)||ex(N.props.inputProps,!0))&&(F=!0)}),F}),[M,C]=P.useState(!1);l&&M&&C(!1);const S=u!==void 0&&!l?u:M;let E;P.useRef(!1);const I=P.useMemo(()=>({adornedStart:x,setAdornedStart:b,color:o,disabled:l,error:c,filled:T,focused:S,fullWidth:h,hiddenLabel:d,size:g,onBlur:()=>{C(!1)},onEmpty:()=>{w(!1)},onFilled:()=>{w(!0)},onFocus:()=>{C(!0)},registerEffect:E,required:p,variant:y}),[x,o,l,c,T,S,h,d,E,p,g,y]);return q.jsx(RN.Provider,{value:I,children:q.jsx(RQ,{as:a,ownerState:_,className:ct(v.root,s),ref:t,...m,children:i})})});function PQ(n){return Gt("MuiFormHelperText",n)}const qL=Ft("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var XL;const IQ=n=>{const{classes:e,contained:t,size:r,disabled:i,error:s,filled:o,focused:a,required:l}=n,c={root:["root",i&&"disabled",s&&"error",r&&`size${We(r)}`,t&&"contained",a&&"focused",o&&"filled",l&&"required"]};return Xt(c,PQ,e)},LQ=et("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${We(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(qt(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${qL.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${qL.error}`]:{color:(n.vars||n).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),DQ=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:o="p",disabled:a,error:l,filled:c,focused:u,margin:h,required:d,variant:f,...p}=r,g=Yf(),y=Kf({props:r,muiFormControl:g,states:["variant","size","disabled","error","filled","focused","required"]}),m={...r,component:o,contained:y.variant==="filled"||y.variant==="outlined",variant:y.variant,size:y.size,disabled:y.disabled,error:y.error,filled:y.filled,focused:y.focused,required:y.required};delete m.ownerState;const _=IQ(m);return q.jsx(LQ,{as:o,className:ct(_.root,s),ref:t,...p,ownerState:m,children:i===" "?XL||(XL=q.jsx("span",{className:"notranslate",children:""})):i})});function OQ(n){return Gt("MuiFormLabel",n)}const zm=Ft("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),FQ=n=>{const{classes:e,color:t,focused:r,disabled:i,error:s,filled:o,required:a}=n,l={root:["root",`color${We(t)}`,i&&"disabled",s&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return Xt(l,OQ,e)},kQ=et("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:n},e)=>({...e.root,...n.color==="secondary"&&e.colorSecondary,...n.filled&&e.filled})})(qt(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(n.palette).filter(wi()).map(([e])=>({props:{color:e},style:{[`&.${zm.focused}`]:{color:(n.vars||n).palette[e].main}}})),{props:{},style:{[`&.${zm.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${zm.error}`]:{color:(n.vars||n).palette.error.main}}}]}))),UQ=et("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(qt(({theme:n})=>({[`&.${zm.error}`]:{color:(n.vars||n).palette.error.main}}))),BQ=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiFormLabel"}),{children:i,className:s,color:o,component:a="label",disabled:l,error:c,filled:u,focused:h,required:d,...f}=r,p=Yf(),g=Kf({props:r,muiFormControl:p,states:["color","required","focused","disabled","error","filled"]}),y={...r,color:g.color||"primary",component:a,disabled:g.disabled,error:g.error,filled:g.filled,focused:g.focused,required:g.required},m=FQ(y);return q.jsxs(kQ,{as:a,ownerState:y,className:ct(m.root,s),ref:t,...f,children:[i,g.required&&q.jsxs(UQ,{ownerState:y,"aria-hidden":!0,className:m.asterisk,children:["","*"]})]})});function xE(n){return`scale(${n}, ${n**2})`}const zQ={entering:{opacity:1,transform:xE(1)},entered:{opacity:1,transform:"none"}},Y1=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),nx=P.forwardRef(function(e,t){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:h,onExited:d,onExiting:f,style:p,timeout:g="auto",TransitionComponent:y=To,...m}=e,_=yN(),v=P.useRef(),x=Ac(),b=P.useRef(null),T=cr(b,Zu(s),t),w=R=>D=>{if(R){const j=b.current;D===void 0?R(j):R(j,D)}},M=w(u),C=w((R,D)=>{CN(R);const{duration:j,delay:L,easing:W}=vf({style:p,timeout:g,easing:o},{mode:"enter"});let z;g==="auto"?(z=x.transitions.getAutoHeightDuration(R.clientHeight),v.current=z):z=j,R.style.transition=[x.transitions.create("opacity",{duration:z,delay:L}),x.transitions.create("transform",{duration:Y1?z:z*.666,delay:L,easing:W})].join(","),l&&l(R,D)}),S=w(c),E=w(f),I=w(R=>{const{duration:D,delay:j,easing:L}=vf({style:p,timeout:g,easing:o},{mode:"exit"});let W;g==="auto"?(W=x.transitions.getAutoHeightDuration(R.clientHeight),v.current=W):W=D,R.style.transition=[x.transitions.create("opacity",{duration:W,delay:j}),x.transitions.create("transform",{duration:Y1?W:W*.666,delay:Y1?j:j||W*.333,easing:L})].join(","),R.style.opacity=0,R.style.transform=xE(.75),h&&h(R)}),F=w(d),N=R=>{g==="auto"&&_.start(v.current||0,R),r&&r(b.current,R)};return q.jsx(y,{appear:i,in:a,nodeRef:b,onEnter:C,onEntered:S,onEntering:M,onExit:I,onExited:F,onExiting:E,addEndListener:N,timeout:g==="auto"?null:g,...m,children:(R,D)=>P.cloneElement(s,{style:{opacity:0,transform:xE(.75),visibility:R==="exited"&&!a?"hidden":void 0,...zQ[R],...p,...s.props.style},ref:T,...D})})});nx&&(nx.muiSupportAuto=!0);const $Q=n=>{const{classes:e,disableUnderline:t}=n,i=Xt({root:["root",!t&&"underline"],input:["input"]},pY,e);return{...e,...i}},VQ=et(QS,{shouldForwardProp:n=>Bs(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...KS(n,e),!t.disableUnderline&&e.underline]}})(qt(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Tp.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Tp.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Tp.disabled}, .${Tp.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${Tp.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(wi()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[r].main}`}}}))]}})),GQ=et(ZS,{name:"MuiInput",slot:"Input",overridesResolver:YS})({}),rx=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiInput"}),{disableUnderline:i=!1,components:s={},componentsProps:o,fullWidth:a=!1,inputComponent:l="input",multiline:c=!1,slotProps:u,slots:h={},type:d="text",...f}=r,p=$Q(r),y={root:{ownerState:{disableUnderline:i}}},m=u??o?Qr(u??o,y):y,_=h.root??s.Root??VQ,v=h.input??s.Input??GQ;return q.jsx(NN,{slots:{root:_,input:v},slotProps:m,fullWidth:a,inputComponent:l,multiline:c,ref:t,type:d,...f,classes:p})});rx&&(rx.muiName="Input");function HQ(n){return Gt("MuiInputLabel",n)}Ft("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const WQ=n=>{const{classes:e,formControl:t,size:r,shrink:i,disableAnimation:s,variant:o,required:a}=n,l={root:["root",t&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="normal"&&`size${We(r)}`,o],asterisk:[a&&"asterisk"]},c=Xt(l,HQ,e);return{...e,...c}},jQ=et(BQ,{shouldForwardProp:n=>Bs(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${zm.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(qt(({theme:n})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="filled"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:t,size:r})=>e==="filled"&&t.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="outlined"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),qQ=P.forwardRef(function(e,t){const r=Kt({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,margin:s,shrink:o,variant:a,className:l,...c}=r,u=Yf();let h=o;typeof h>"u"&&u&&(h=u.filled||u.focused||u.adornedStart);const d=Kf({props:r,muiFormControl:u,states:["size","variant","required","focused"]}),f={...r,disableAnimation:i,formControl:u,shrink:h,size:d.size,variant:d.variant,required:d.required,focused:d.focused},p=WQ(f);return q.jsx(jQ,{"data-shrink":h,ref:t,className:ct(p.root,l),...c,ownerState:f,classes:p})}),SE=P.createContext({});function XQ(n){return Gt("MuiList",n)}Ft("MuiList",["root","padding","dense","subheader"]);const KQ=n=>{const{classes:e,disablePadding:t,dense:r,subheader:i}=n;return Xt({root:["root",!t&&"padding",r&&"dense",i&&"subheader"]},XQ,e)},YQ=et("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:n})=>!n.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:n})=>n.subheader,style:{paddingTop:0}}]}),QQ=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiList"}),{children:i,className:s,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:c,...u}=r,h=P.useMemo(()=>({dense:a}),[a]),d={...r,component:o,dense:a,disablePadding:l},f=KQ(d);return q.jsx(SE.Provider,{value:h,children:q.jsxs(YQ,{as:o,className:ct(f.root,s),ref:t,ownerState:d,...u,children:[c,i]})})}),KL=Ft("MuiListItemIcon",["root","alignItemsFlexStart"]),YL=Ft("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function Q1(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function QL(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function N4(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.startsWith(e.keys.join(""))}function Mp(n,e,t,r,i,s){let o=!1,a=i(n,e,e?t:!1);for(;a;){if(a===n.firstChild){if(o)return!1;o=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!N4(a,s)||l)a=i(n,a,t);else return a.focus(),!0}return!1}const ZQ=P.forwardRef(function(e,t){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:h="selectedMenu",...d}=e,f=P.useRef(null),p=P.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});nl(()=>{i&&f.current.focus()},[i]),P.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(v,{direction:x})=>{const b=!f.current.style.width;if(v.clientHeight<f.current.clientHeight&&b){const T=`${s4(xo(v))}px`;f.current.style[x==="rtl"?"paddingLeft":"paddingRight"]=T,f.current.style.width=`calc(100% + ${T})`}return f.current}}),[]);const g=v=>{const x=f.current,b=v.key;if(v.ctrlKey||v.metaKey||v.altKey){u&&u(v);return}const w=Ni(x).activeElement;if(b==="ArrowDown")v.preventDefault(),Mp(x,w,c,l,Q1);else if(b==="ArrowUp")v.preventDefault(),Mp(x,w,c,l,QL);else if(b==="Home")v.preventDefault(),Mp(x,null,c,l,Q1);else if(b==="End")v.preventDefault(),Mp(x,null,c,l,QL);else if(b.length===1){const M=p.current,C=b.toLowerCase(),S=performance.now();M.keys.length>0&&(S-M.lastTime>500?(M.keys=[],M.repeating=!0,M.previousKeyMatched=!0):M.repeating&&C!==M.keys[0]&&(M.repeating=!1)),M.lastTime=S,M.keys.push(C);const E=w&&!M.repeating&&N4(w,M);M.previousKeyMatched&&(E||Mp(x,w,!1,l,Q1,M))?v.preventDefault():M.previousKeyMatched=!1}u&&u(v)},y=cr(f,t);let m=-1;P.Children.forEach(o,(v,x)=>{if(!P.isValidElement(v)){m===x&&(m+=1,m>=o.length&&(m=-1));return}v.props.disabled||(h==="selectedMenu"&&v.props.selected||m===-1)&&(m=x),m===x&&(v.props.disabled||v.props.muiSkipListHighlight||v.type.muiSkipListHighlight)&&(m+=1,m>=o.length&&(m=-1))});const _=P.Children.map(o,(v,x)=>{if(x===m){const b={};return s&&(b.autoFocus=!0),v.props.tabIndex===void 0&&h==="selectedMenu"&&(b.tabIndex=0),P.cloneElement(v,b)}return v});return q.jsx(QQ,{role:"menu",ref:y,className:a,onKeyDown:g,tabIndex:i?0:-1,...d,children:_})});function JQ(n){return Gt("MuiPopover",n)}Ft("MuiPopover",["root","paper"]);function ZL(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function JL(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function eD(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function Z1(n){return typeof n=="function"?n():n}const eZ=n=>{const{classes:e}=n;return Xt({root:["root"],paper:["paper"]},JQ,e)},tZ=et(PN,{name:"MuiPopover",slot:"Root",overridesResolver:(n,e)=>e.root})({}),P4=et(Xf,{name:"MuiPopover",slot:"Paper",overridesResolver:(n,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),nZ=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiPopover"}),{action:i,anchorEl:s,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:l="anchorEl",children:c,className:u,container:h,elevation:d=8,marginThreshold:f=16,open:p,PaperProps:g={},slots:y={},slotProps:m={},transformOrigin:_={vertical:"top",horizontal:"left"},TransitionComponent:v=nx,transitionDuration:x="auto",TransitionProps:{onEntering:b,...T}={},disableScrollLock:w=!1,...M}=r,C=(m==null?void 0:m.paper)??g,S=P.useRef(),E={...r,anchorOrigin:o,anchorReference:l,elevation:d,marginThreshold:f,externalPaperSlotProps:C,transformOrigin:_,TransitionComponent:v,transitionDuration:x,TransitionProps:T},I=eZ(E),F=P.useCallback(()=>{if(l==="anchorPosition")return a;const be=Z1(s),we=(be&&be.nodeType===1?be:Ni(S.current).body).getBoundingClientRect();return{top:we.top+ZL(we,o.vertical),left:we.left+JL(we,o.horizontal)}},[s,o.horizontal,o.vertical,a,l]),N=P.useCallback(be=>({vertical:ZL(be,_.vertical),horizontal:JL(be,_.horizontal)}),[_.horizontal,_.vertical]),R=P.useCallback(be=>{const Pe={width:be.offsetWidth,height:be.offsetHeight},we=N(Pe);if(l==="none")return{top:null,left:null,transformOrigin:eD(we)};const G=F();let Ge=G.top-we.vertical,$e=G.left-we.horizontal;const Ye=Ge+Pe.height,De=$e+Pe.width,st=xo(Z1(s)),Ze=st.innerHeight-f,B=st.innerWidth-f;if(f!==null&&Ge<f){const A=Ge-f;Ge-=A,we.vertical+=A}else if(f!==null&&Ye>Ze){const A=Ye-Ze;Ge-=A,we.vertical+=A}if(f!==null&&$e<f){const A=$e-f;$e-=A,we.horizontal+=A}else if(De>B){const A=De-B;$e-=A,we.horizontal+=A}return{top:`${Math.round(Ge)}px`,left:`${Math.round($e)}px`,transformOrigin:eD(we)}},[s,l,F,N,f]),[D,j]=P.useState(p),L=P.useCallback(()=>{const be=S.current;if(!be)return;const Pe=R(be);Pe.top!==null&&be.style.setProperty("top",Pe.top),Pe.left!==null&&(be.style.left=Pe.left),be.style.transformOrigin=Pe.transformOrigin,j(!0)},[R]);P.useEffect(()=>(w&&window.addEventListener("scroll",L),()=>window.removeEventListener("scroll",L)),[s,w,L]);const W=(be,Pe)=>{b&&b(be,Pe),L()},z=()=>{j(!1)};P.useEffect(()=>{p&&L()}),P.useImperativeHandle(i,()=>p?{updatePosition:()=>{L()}}:null,[p,L]),P.useEffect(()=>{if(!p)return;const be=pN(()=>{L()}),Pe=xo(s);return Pe.addEventListener("resize",be),()=>{be.clear(),Pe.removeEventListener("resize",be)}},[s,p,L]);let X=x;x==="auto"&&!v.muiSupportAuto&&(X=void 0);const U=h||(s?Ni(Z1(s)).body:void 0),te={slots:y,slotProps:{...m,paper:C}},[k,V]=rs("paper",{elementType:P4,externalForwardedProps:te,additionalProps:{elevation:d,className:ct(I.paper,C==null?void 0:C.className),style:D?C.style:{...C.style,opacity:0}},ownerState:E}),[Z,{slotProps:le,...pe}]=rs("root",{elementType:tZ,externalForwardedProps:te,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:U,open:p},ownerState:E,className:ct(I.root,u)}),ue=cr(S,V.ref);return q.jsx(Z,{...pe,...!yE(Z)&&{slotProps:le,disableScrollLock:w},...M,ref:t,children:q.jsx(v,{appear:!0,in:p,onEntering:W,onExited:z,timeout:X,...T,children:q.jsx(k,{...V,ref:ue,children:c})})})});function rZ(n){return Gt("MuiMenu",n)}Ft("MuiMenu",["root","paper","list"]);const iZ={vertical:"top",horizontal:"right"},sZ={vertical:"top",horizontal:"left"},oZ=n=>{const{classes:e}=n;return Xt({root:["root"],paper:["paper"],list:["list"]},rZ,e)},aZ=et(nZ,{shouldForwardProp:n=>Bs(n)||n==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(n,e)=>e.root})({}),lZ=et(P4,{name:"MuiMenu",slot:"Paper",overridesResolver:(n,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),cZ=et(ZQ,{name:"MuiMenu",slot:"List",overridesResolver:(n,e)=>e.list})({outline:0}),uZ=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiMenu"}),{autoFocus:i=!0,children:s,className:o,disableAutoFocusItem:a=!1,MenuListProps:l={},onClose:c,open:u,PaperProps:h={},PopoverClasses:d,transitionDuration:f="auto",TransitionProps:{onEntering:p,...g}={},variant:y="selectedMenu",slots:m={},slotProps:_={},...v}=r,x=h4(),b={...r,autoFocus:i,disableAutoFocusItem:a,MenuListProps:l,onEntering:p,PaperProps:h,transitionDuration:f,TransitionProps:g,variant:y},T=oZ(b),w=i&&!a&&u,M=P.useRef(null),C=(D,j)=>{M.current&&M.current.adjustStyleForScrollbar(D,{direction:x?"rtl":"ltr"}),p&&p(D,j)},S=D=>{D.key==="Tab"&&(D.preventDefault(),c&&c(D,"tabKeyDown"))};let E=-1;P.Children.map(s,(D,j)=>{P.isValidElement(D)&&(D.props.disabled||(y==="selectedMenu"&&D.props.selected||E===-1)&&(E=j))});const I=m.paper??lZ,F=_.paper??h,N=dE({elementType:m.root,externalSlotProps:_.root,ownerState:b,className:[T.root,o]}),R=dE({elementType:I,externalSlotProps:F,ownerState:b,className:T.paper});return q.jsx(aZ,{onClose:c,anchorOrigin:{vertical:"bottom",horizontal:x?"right":"left"},transformOrigin:x?iZ:sZ,slots:{paper:I,root:m.root},slotProps:{root:N,paper:R},open:u,ref:t,transitionDuration:f,TransitionProps:{onEntering:C,...g},ownerState:b,...v,classes:d,children:q.jsx(cZ,{onKeyDown:S,actions:M,autoFocus:i&&(E===-1||a),autoFocusItem:w,variant:y,...l,className:ct(T.list,l.className),children:s})})});function hZ(n){return Gt("MuiMenuItem",n)}const Ep=Ft("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),dZ=(n,e)=>{const{ownerState:t}=n;return[e.root,t.dense&&e.dense,t.divider&&e.divider,!t.disableGutters&&e.gutters]},fZ=n=>{const{disabled:e,dense:t,divider:r,disableGutters:i,selected:s,classes:o}=n,l=Xt({root:["root",t&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},hZ,o);return{...o,...l}},pZ=et(J_,{shouldForwardProp:n=>Bs(n)||n==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:dZ})(qt(({theme:n})=>({...n.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Ep.selected}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:Yn(n.palette.primary.main,n.palette.action.selectedOpacity),[`&.${Ep.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:Yn(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}},[`&.${Ep.selected}:hover`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:Yn(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:Yn(n.palette.primary.main,n.palette.action.selectedOpacity)}},[`&.${Ep.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`&.${Ep.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity},[`& + .${WL.root}`]:{marginTop:n.spacing(1),marginBottom:n.spacing(1)},[`& + .${WL.inset}`]:{marginLeft:52},[`& .${YL.root}`]:{marginTop:0,marginBottom:0},[`& .${YL.inset}`]:{paddingLeft:36},[`& .${KL.root}`]:{minWidth:36},variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:e})=>!e.dense,style:{[n.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:({ownerState:e})=>e.dense,style:{minHeight:32,paddingTop:4,paddingBottom:4,...n.typography.body2,[`& .${KL.root} svg`]:{fontSize:"1.25rem"}}}]}))),mZ=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:o=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:h,className:d,...f}=r,p=P.useContext(SE),g=P.useMemo(()=>({dense:o||p.dense||!1,disableGutters:l}),[p.dense,o,l]),y=P.useRef(null);nl(()=>{i&&y.current&&y.current.focus()},[i]);const m={...r,dense:g.dense,divider:a,disableGutters:l},_=fZ(r),v=cr(y,t);let x;return r.disabled||(x=h!==void 0?h:-1),q.jsx(SE.Provider,{value:g,children:q.jsx(pZ,{ref:v,role:u,tabIndex:x,component:s,focusVisibleClassName:ct(_.focusVisible,c),className:ct(_.root,d),...f,ownerState:m,classes:_})})});function gZ(n){return Gt("MuiNativeSelect",n)}const IN=Ft("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),yZ=n=>{const{classes:e,variant:t,disabled:r,multiple:i,open:s,error:o}=n,a={select:["select",t,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${We(t)}`,s&&"iconOpen",r&&"disabled"]};return Xt(a,gZ,e)},I4=et("select")(({theme:n})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${IN.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}}}]})),vZ=et(I4,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Bs,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${IN.multiple}`]:e.multiple}]}})({}),L4=et("svg")(({theme:n})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${IN.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),_Z=et(L4,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${We(t.variant)}`],t.open&&e.iconOpen]}})({}),xZ=P.forwardRef(function(e,t){const{className:r,disabled:i,error:s,IconComponent:o,inputRef:a,variant:l="standard",...c}=e,u={...e,disabled:i,variant:l,error:s},h=yZ(u);return q.jsxs(P.Fragment,{children:[q.jsx(vZ,{ownerState:u,className:ct(h.select,r),disabled:i,ref:a||t,...c}),e.multiple?null:q.jsx(_Z,{as:o,ownerState:u,className:h.icon})]})});var tD;const SZ=et("fieldset",{shouldForwardProp:Bs})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),bZ=et("legend",{shouldForwardProp:Bs})(qt(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]})));function wZ(n){const{children:e,classes:t,className:r,label:i,notched:s,...o}=n,a=i!=null&&i!=="",l={...n,notched:s,withLabel:a};return q.jsx(SZ,{"aria-hidden":!0,className:r,ownerState:l,...o,children:q.jsx(bZ,{ownerState:l,children:a?q.jsx("span",{children:i}):tD||(tD=q.jsx("span",{className:"notranslate",children:""}))})})}const TZ=n=>{const{classes:e}=n,r=Xt({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},mY,e);return{...e,...r}},MZ=et(QS,{shouldForwardProp:n=>Bs(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:KS})(qt(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Ro.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ro.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Ro.focused} .${Ro.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(n.palette).filter(wi()).map(([t])=>({props:{color:t},style:{[`&.${Ro.focused} .${Ro.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}})),{props:{},style:{[`&.${Ro.error} .${Ro.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${Ro.disabled} .${Ro.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:14}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:14}},{props:({ownerState:t})=>t.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),EZ=et(wZ,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(n,e)=>e.notchedOutline})(qt(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),AZ=et(ZS,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:YS})(qt(({theme:n})=>({padding:"16.5px 14px",...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),ix=P.forwardRef(function(e,t){var r;const i=Kt({props:e,name:"MuiOutlinedInput"}),{components:s={},fullWidth:o=!1,inputComponent:a="input",label:l,multiline:c=!1,notched:u,slots:h={},type:d="text",...f}=i,p=TZ(i),g=Yf(),y=Kf({props:i,muiFormControl:g,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),m={...i,color:y.color||"primary",disabled:y.disabled,error:y.error,focused:y.focused,formControl:g,fullWidth:o,hiddenLabel:y.hiddenLabel,multiline:c,size:y.size,type:d},_=h.root??s.Root??MZ,v=h.input??s.Input??AZ;return q.jsx(NN,{slots:{root:_,input:v},renderSuffix:x=>q.jsx(EZ,{ownerState:m,className:p.notchedOutline,label:l!=null&&l!==""&&y.required?r||(r=q.jsxs(P.Fragment,{children:[l,"","*"]})):l,notched:typeof u<"u"?u:!!(x.startAdornment||x.filled||x.focused)}),fullWidth:o,inputComponent:a,multiline:c,ref:t,type:d,...f,classes:{...p,notchedOutline:null}})});ix&&(ix.muiName="Input");function CZ(n){return Gt("MuiSelect",n)}const Ap=Ft("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var nD;const RZ=et(I4,{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${Ap.select}`]:e.select},{[`&.${Ap.select}`]:e[t.variant]},{[`&.${Ap.error}`]:e.error},{[`&.${Ap.multiple}`]:e.multiple}]}})({[`&.${Ap.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),NZ=et(L4,{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${We(t.variant)}`],t.open&&e.iconOpen]}})({}),PZ=et("input",{shouldForwardProp:n=>x4(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(n,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function rD(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function IZ(n){return n==null||typeof n=="string"&&!n.trim()}const LZ=n=>{const{classes:e,variant:t,disabled:r,multiple:i,open:s,error:o}=n,a={select:["select",t,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${We(t)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return Xt(a,CZ,e)},DZ=P.forwardRef(function(e,t){var ut;const{"aria-describedby":r,"aria-label":i,autoFocus:s,autoWidth:o,children:a,className:l,defaultOpen:c,defaultValue:u,disabled:h,displayEmpty:d,error:f=!1,IconComponent:p,inputRef:g,labelId:y,MenuProps:m={},multiple:_,name:v,onBlur:x,onChange:b,onClose:T,onFocus:w,onOpen:M,open:C,readOnly:S,renderValue:E,SelectDisplayProps:I={},tabIndex:F,type:N,value:R,variant:D="standard",...j}=e,[L,W]=yL({controlled:R,default:u,name:"Select"}),[z,X]=yL({controlled:C,default:c,name:"Select"}),U=P.useRef(null),te=P.useRef(null),[k,V]=P.useState(null),{current:Z}=P.useRef(C!=null),[le,pe]=P.useState(),ue=cr(t,g),be=P.useCallback(Ne=>{te.current=Ne,Ne&&V(Ne)},[]),Pe=k==null?void 0:k.parentNode;P.useImperativeHandle(ue,()=>({focus:()=>{te.current.focus()},node:U.current,value:L}),[L]),P.useEffect(()=>{c&&z&&k&&!Z&&(pe(o?null:Pe.clientWidth),te.current.focus())},[k,o]),P.useEffect(()=>{s&&te.current.focus()},[s]),P.useEffect(()=>{if(!y)return;const Ne=Ni(te.current).getElementById(y);if(Ne){const K=()=>{getSelection().isCollapsed&&te.current.focus()};return Ne.addEventListener("click",K),()=>{Ne.removeEventListener("click",K)}}},[y]);const we=(Ne,K)=>{Ne?M&&M(K):T&&T(K),Z||(pe(o?null:Pe.clientWidth),X(Ne))},G=Ne=>{Ne.button===0&&(Ne.preventDefault(),te.current.focus(),we(!0,Ne))},Ge=Ne=>{we(!1,Ne)},$e=P.Children.toArray(a),Ye=Ne=>{const K=$e.find(H=>H.props.value===Ne.target.value);K!==void 0&&(W(K.props.value),b&&b(Ne,K))},De=Ne=>K=>{let H;if(K.currentTarget.hasAttribute("tabindex")){if(_){H=Array.isArray(L)?L.slice():[];const ve=L.indexOf(Ne.props.value);ve===-1?H.push(Ne.props.value):H.splice(ve,1)}else H=Ne.props.value;if(Ne.props.onClick&&Ne.props.onClick(K),L!==H&&(W(H),b)){const ve=K.nativeEvent||K,$=new ve.constructor(ve.type,ve);Object.defineProperty($,"target",{writable:!0,value:{value:H,name:v}}),b($,Ne)}_||we(!1,K)}},st=Ne=>{S||[" ","ArrowUp","ArrowDown","Enter"].includes(Ne.key)&&(Ne.preventDefault(),we(!0,Ne))},Ze=k!==null&&z,B=Ne=>{!Ze&&x&&(Object.defineProperty(Ne,"target",{writable:!0,value:{value:L,name:v}}),x(Ne))};delete j["aria-invalid"];let A,ae;const oe=[];let Te=!1;(ex({value:L})||d)&&(E?A=E(L):Te=!0);const Se=$e.map(Ne=>{if(!P.isValidElement(Ne))return null;let K;if(_){if(!Array.isArray(L))throw new Error(el(2));K=L.some(H=>rD(H,Ne.props.value)),K&&Te&&oe.push(Ne.props.children)}else K=rD(L,Ne.props.value),K&&Te&&(ae=Ne.props.children);return P.cloneElement(Ne,{"aria-selected":K?"true":"false",onClick:De(Ne),onKeyUp:H=>{H.key===" "&&H.preventDefault(),Ne.props.onKeyUp&&Ne.props.onKeyUp(H)},role:"option",selected:K,value:void 0,"data-value":Ne.props.value})});Te&&(_?oe.length===0?A=null:A=oe.reduce((Ne,K,H)=>(Ne.push(K),H<oe.length-1&&Ne.push(", "),Ne),[]):A=ae);let Xe=le;!o&&Z&&k&&(Xe=Pe.clientWidth);let Ie;typeof F<"u"?Ie=F:Ie=h?null:0;const Fe=I.id||(v?`mui-component-select-${v}`:void 0),pt={...e,variant:D,value:L,open:Ze,error:f},Le=LZ(pt),Oe={...m.PaperProps,...(ut=m.slotProps)==null?void 0:ut.paper},ot=mN();return q.jsxs(P.Fragment,{children:[q.jsx(RZ,{as:"div",ref:be,tabIndex:Ie,role:"combobox","aria-controls":ot,"aria-disabled":h?"true":void 0,"aria-expanded":Ze?"true":"false","aria-haspopup":"listbox","aria-label":i,"aria-labelledby":[y,Fe].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:st,onMouseDown:h||S?null:G,onBlur:B,onFocus:w,...I,ownerState:pt,className:ct(I.className,Le.select,l),id:Fe,children:IZ(A)?nD||(nD=q.jsx("span",{className:"notranslate",children:""})):A}),q.jsx(PZ,{"aria-invalid":f,value:Array.isArray(L)?L.join(","):L,name:v,ref:U,"aria-hidden":!0,onChange:Ye,tabIndex:-1,disabled:h,className:Le.nativeInput,autoFocus:s,...j,ownerState:pt}),q.jsx(NZ,{as:p,className:Le.icon,ownerState:pt}),q.jsx(uZ,{id:`menu-${v||""}`,anchorEl:Pe,open:Ze,onClose:Ge,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...m,MenuListProps:{"aria-labelledby":y,role:"listbox","aria-multiselectable":_?"true":void 0,disableListWrap:!0,id:ot,...m.MenuListProps},slotProps:{...m.slotProps,paper:{...Oe,style:{minWidth:Xe,...Oe!=null?Oe.style:null}}},children:Se})]})}),OZ=n=>{const{classes:e}=n;return e},LN={name:"MuiSelect",overridesResolver:(n,e)=>e.root,shouldForwardProp:n=>Bs(n)&&n!=="variant",slot:"Root"},FZ=et(rx,LN)(""),kZ=et(ix,LN)(""),UZ=et(tx,LN)(""),DN=P.forwardRef(function(e,t){const r=ZX({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=yY,id:h,input:d,inputProps:f,label:p,labelId:g,MenuProps:y,multiple:m=!1,native:_=!1,onClose:v,onOpen:x,open:b,renderValue:T,SelectDisplayProps:w,variant:M="outlined",...C}=r,S=_?xZ:DZ,E=Yf(),I=Kf({props:r,muiFormControl:E,states:["variant","error"]}),F=I.variant||M,N={...r,variant:F,classes:o},R=OZ(N),{root:D,...j}=R,L=d||{standard:q.jsx(FZ,{ownerState:N}),outlined:q.jsx(kZ,{label:p,ownerState:N}),filled:q.jsx(UZ,{ownerState:N})}[F],W=cr(t,Zu(L));return q.jsx(P.Fragment,{children:P.cloneElement(L,{inputComponent:S,inputProps:{children:s,error:I.error,IconComponent:u,variant:F,type:void 0,multiple:m,..._?{id:h}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:g,MenuProps:y,onClose:v,onOpen:x,open:b,renderValue:T,SelectDisplayProps:{id:h,...w}},...f,classes:f?Qr(j,f.classes):j,...d?d.props.inputProps:{}},...(m&&_||c)&&F==="outlined"?{notched:!0}:{},ref:W,className:ct(L.props.className,a,R.root),...!d&&{variant:F},...C})})});DN.muiName="Select";function BZ(n){return Gt("MuiSkeleton",n)}Ft("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);const zZ=n=>{const{classes:e,variant:t,animation:r,hasChildren:i,width:s,height:o}=n;return Xt({root:["root",t,r,i&&"withChildren",i&&!s&&"fitContent",i&&!o&&"heightAuto"]},BZ,e)},bE=ny`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`,wE=ny`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`,$Z=typeof bE!="string"?oN`
        animation: ${bE} 2s ease-in-out 0.5s infinite;
      `:null,VZ=typeof wE!="string"?oN`
        &::after {
          animation: ${wE} 2s linear 0.5s infinite;
        }
      `:null,GZ=et("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],t.animation!==!1&&e[t.animation],t.hasChildren&&e.withChildren,t.hasChildren&&!t.width&&e.fitContent,t.hasChildren&&!t.height&&e.heightAuto]}})(qt(({theme:n})=>{const e=YX(n.shape.borderRadius)||"px",t=QX(n.shape.borderRadius);return{display:"block",backgroundColor:n.vars?n.vars.palette.Skeleton.bg:Yn(n.palette.text.primary,n.palette.mode==="light"?.11:.13),height:"1.2em",variants:[{props:{variant:"text"},style:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${t}${e}/${Math.round(t/.6*10)/10}${e}`,"&:empty:before":{content:'"\\00a0"'}}},{props:{variant:"circular"},style:{borderRadius:"50%"}},{props:{variant:"rounded"},style:{borderRadius:(n.vars||n).shape.borderRadius}},{props:({ownerState:r})=>r.hasChildren,style:{"& > *":{visibility:"hidden"}}},{props:({ownerState:r})=>r.hasChildren&&!r.width,style:{maxWidth:"fit-content"}},{props:({ownerState:r})=>r.hasChildren&&!r.height,style:{height:"auto"}},{props:{animation:"pulse"},style:$Z||{animation:`${bE} 2s ease-in-out 0.5s infinite`}},{props:{animation:"wave"},style:{position:"relative",overflow:"hidden",WebkitMaskImage:"-webkit-radial-gradient(white, black)","&::after":{background:`linear-gradient(
                90deg,
                transparent,
                ${(n.vars||n).palette.action.hover},
                transparent
              )`,content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}}},{props:{animation:"wave"},style:VZ||{"&::after":{animation:`${wE} 2s linear 0.5s infinite`}}}]}})),s0=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiSkeleton"}),{animation:i="pulse",className:s,component:o="span",height:a,style:l,variant:c="text",width:u,...h}=r,d={...r,animation:i,component:o,variant:c,hasChildren:!!h.children},f=zZ(d);return q.jsx(GZ,{as:o,ref:t,className:ct(f.root,s),ownerState:d,...h,style:{width:u,height:a,...l}})});function HZ(n={}){const{autoHideDuration:e=null,disableWindowBlurListener:t=!1,onClose:r,open:i,resumeHideDuration:s}=n,o=yN();P.useEffect(()=>{if(!i)return;function m(_){_.defaultPrevented||_.key==="Escape"&&(r==null||r(_,"escapeKeyDown"))}return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[i,r]);const a=Oa((m,_)=>{r==null||r(m,_)}),l=Oa(m=>{!r||m==null||o.start(m,()=>{a(null,"timeout")})});P.useEffect(()=>(i&&l(e),o.clear),[i,e,l,o]);const c=m=>{r==null||r(m,"clickaway")},u=o.clear,h=P.useCallback(()=>{e!=null&&l(s??e*.5)},[e,s,l]),d=m=>_=>{const v=m.onBlur;v==null||v(_),h()},f=m=>_=>{const v=m.onFocus;v==null||v(_),u()},p=m=>_=>{const v=m.onMouseEnter;v==null||v(_),u()},g=m=>_=>{const v=m.onMouseLeave;v==null||v(_),h()};return P.useEffect(()=>{if(!t&&i)return window.addEventListener("focus",h),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",u)}},[t,i,h,u]),{getRootProps:(m={})=>{const _={...K_(n),...K_(m)};return{role:"presentation",...m,..._,onBlur:d(_),onFocus:f(_),onMouseEnter:p(_),onMouseLeave:g(_)}},onClickAway:c}}function WZ(n){return Gt("MuiSnackbarContent",n)}Ft("MuiSnackbarContent",["root","message","action"]);const jZ=n=>{const{classes:e}=n;return Xt({root:["root"],action:["action"],message:["message"]},WZ,e)},qZ=et(Xf,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(n,e)=>e.root})(qt(({theme:n})=>{const e=n.palette.mode==="light"?.8:.98,t=r4(n.palette.background.default,e);return{...n.typography.body2,color:n.vars?n.vars.palette.SnackbarContent.color:n.palette.getContrastText(t),backgroundColor:n.vars?n.vars.palette.SnackbarContent.bg:t,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(n.vars||n).shape.borderRadius,flexGrow:1,[n.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),XZ=et("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(n,e)=>e.message})({padding:"8px 0"}),KZ=et("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(n,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),YZ=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiSnackbarContent"}),{action:i,className:s,message:o,role:a="alert",...l}=r,c=r,u=jZ(c);return q.jsxs(qZ,{role:a,square:!0,elevation:6,className:ct(u.root,s),ownerState:c,ref:t,...l,children:[q.jsx(XZ,{className:u.message,ownerState:c,children:o}),i?q.jsx(KZ,{className:u.action,ownerState:c,children:i}):null]})});function QZ(n){return Gt("MuiSnackbar",n)}Ft("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const ZZ=n=>{const{classes:e,anchorOrigin:t}=n,r={root:["root",`anchorOrigin${We(t.vertical)}${We(t.horizontal)}`]};return Xt(r,QZ,e)},iD=et("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`anchorOrigin${We(t.anchorOrigin.vertical)}${We(t.anchorOrigin.horizontal)}`]]}})(qt(({theme:n})=>({zIndex:(n.vars||n).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:e})=>e.anchorOrigin.vertical==="top",style:{top:8,[n.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:e})=>e.anchorOrigin.vertical!=="top",style:{bottom:8,[n.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[n.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[n.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:e})=>e.anchorOrigin.horizontal==="center",style:{[n.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),JZ=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiSnackbar"}),i=Ac(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:o,anchorOrigin:{vertical:a,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:u,className:h,ClickAwayListenerProps:d,ContentProps:f,disableWindowBlurListener:p=!1,message:g,onBlur:y,onClose:m,onFocus:_,onMouseEnter:v,onMouseLeave:x,open:b,resumeHideDuration:T,TransitionComponent:w=nx,transitionDuration:M=s,TransitionProps:{onEnter:C,onExited:S,...E}={},...I}=r,F={...r,anchorOrigin:{vertical:a,horizontal:l},autoHideDuration:c,disableWindowBlurListener:p,TransitionComponent:w,transitionDuration:M},N=ZZ(F),{getRootProps:R,onClickAway:D}=HZ({...F}),[j,L]=P.useState(!0),W=dE({elementType:iD,getSlotProps:R,externalForwardedProps:I,ownerState:F,additionalProps:{ref:t},className:[N.root,h]}),z=U=>{L(!0),S&&S(U)},X=(U,te)=>{L(!1),C&&C(U,te)};return!b&&j?null:q.jsx(EY,{onClickAway:D,...d,children:q.jsx(iD,{...W,children:q.jsx(w,{appear:!0,in:b,timeout:M,direction:a==="top"?"down":"up",onEnter:X,onExited:z,...E,children:u||q.jsx(YZ,{message:g,action:o,...f})})})})});function eJ(n){return Gt("MuiTextField",n)}Ft("MuiTextField",["root"]);const tJ={standard:rx,filled:tx,outlined:ix},nJ=n=>{const{classes:e}=n;return Xt({root:["root"]},eJ,e)},rJ=et(NQ,{name:"MuiTextField",slot:"Root",overridesResolver:(n,e)=>e.root})({}),iJ=P.forwardRef(function(e,t){const r=Kt({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:o,className:a,color:l="primary",defaultValue:c,disabled:u=!1,error:h=!1,FormHelperTextProps:d,fullWidth:f=!1,helperText:p,id:g,InputLabelProps:y,inputProps:m,InputProps:_,inputRef:v,label:x,maxRows:b,minRows:T,multiline:w=!1,name:M,onBlur:C,onChange:S,onFocus:E,placeholder:I,required:F=!1,rows:N,select:R=!1,SelectProps:D,slots:j={},slotProps:L={},type:W,value:z,variant:X="outlined",...U}=r,te={...r,autoFocus:s,color:l,disabled:u,error:h,fullWidth:f,multiline:w,required:F,select:R,variant:X},k=nJ(te),V=mN(g),Z=p&&V?`${V}-helper-text`:void 0,le=x&&V?`${V}-label`:void 0,pe=tJ[X],ue={slots:j,slotProps:{input:_,inputLabel:y,htmlInput:m,formHelperText:d,select:D,...L}},be={},Pe=ue.slotProps.inputLabel;X==="outlined"&&(Pe&&typeof Pe.shrink<"u"&&(be.notched=Pe.shrink),be.label=x),R&&((!D||!D.native)&&(be.id=void 0),be["aria-describedby"]=void 0);const[we,G]=rs("input",{elementType:pe,externalForwardedProps:ue,additionalProps:be,ownerState:te}),[Ge,$e]=rs("inputLabel",{elementType:qQ,externalForwardedProps:ue,ownerState:te}),[Ye,De]=rs("htmlInput",{elementType:"input",externalForwardedProps:ue,ownerState:te}),[st,Ze]=rs("formHelperText",{elementType:DQ,externalForwardedProps:ue,ownerState:te}),[B,A]=rs("select",{elementType:DN,externalForwardedProps:ue,ownerState:te}),ae=q.jsx(we,{"aria-describedby":Z,autoComplete:i,autoFocus:s,defaultValue:c,fullWidth:f,multiline:w,name:M,rows:N,maxRows:b,minRows:T,type:W,value:z,id:V,inputRef:v,onBlur:C,onChange:S,onFocus:E,placeholder:I,inputProps:De,slots:{input:j.htmlInput?Ye:void 0},...G});return q.jsxs(rJ,{className:ct(k.root,a),disabled:u,error:h,fullWidth:f,ref:t,required:F,color:l,variant:X,ownerState:te,...U,children:[x!=null&&x!==""&&q.jsx(Ge,{htmlFor:V,id:le,...$e,children:x}),R?q.jsx(B,{"aria-describedby":Z,id:V,labelId:le,value:z,input:ae,...A,children:o}):ae,p&&q.jsx(st,{id:Z,...Ze,children:p})]})});var Ti=function(){return Ti=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ti.apply(this,arguments)};function sx(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var bn="-ms-",$m="-moz-",Zt="-webkit-",D4="comm",JS="rule",ON="decl",sJ="@import",O4="@keyframes",oJ="@layer",F4=Math.abs,FN=String.fromCharCode,TE=Object.assign;function aJ(n,e){return br(n,0)^45?(((e<<2^br(n,0))<<2^br(n,1))<<2^br(n,2))<<2^br(n,3):0}function k4(n){return n.trim()}function xa(n,e){return(n=e.exec(n))?n[0]:n}function Ct(n,e,t){return n.replace(e,t)}function Wv(n,e,t){return n.indexOf(e,t)}function br(n,e){return n.charCodeAt(e)|0}function xf(n,e,t){return n.slice(e,t)}function Uo(n){return n.length}function U4(n){return n.length}function vm(n,e){return e.push(n),n}function lJ(n,e){return n.map(e).join("")}function sD(n,e){return n.filter(function(t){return!xa(t,e)})}var eb=1,Sf=1,B4=0,ks=0,ir=0,Qf="";function tb(n,e,t,r,i,s,o,a){return{value:n,root:e,parent:t,type:r,props:i,children:s,line:eb,column:Sf,length:o,return:"",siblings:a}}function Dl(n,e){return TE(tb("",null,null,"",null,null,0,n.siblings),n,{length:-n.length},e)}function mh(n){for(;n.root;)n=Dl(n.root,{children:[n]});vm(n,n.siblings)}function cJ(){return ir}function uJ(){return ir=ks>0?br(Qf,--ks):0,Sf--,ir===10&&(Sf=1,eb--),ir}function vo(){return ir=ks<B4?br(Qf,ks++):0,Sf++,ir===10&&(Sf=1,eb++),ir}function Mu(){return br(Qf,ks)}function jv(){return ks}function nb(n,e){return xf(Qf,n,e)}function ME(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function hJ(n){return eb=Sf=1,B4=Uo(Qf=n),ks=0,[]}function dJ(n){return Qf="",n}function J1(n){return k4(nb(ks-1,EE(n===91?n+2:n===40?n+1:n)))}function fJ(n){for(;(ir=Mu())&&ir<33;)vo();return ME(n)>2||ME(ir)>3?"":" "}function pJ(n,e){for(;--e&&vo()&&!(ir<48||ir>102||ir>57&&ir<65||ir>70&&ir<97););return nb(n,jv()+(e<6&&Mu()==32&&vo()==32))}function EE(n){for(;vo();)switch(ir){case n:return ks;case 34:case 39:n!==34&&n!==39&&EE(ir);break;case 40:n===41&&EE(n);break;case 92:vo();break}return ks}function mJ(n,e){for(;vo()&&n+ir!==57;)if(n+ir===84&&Mu()===47)break;return"/*"+nb(e,ks-1)+"*"+FN(n===47?n:vo())}function gJ(n){for(;!ME(Mu());)vo();return nb(n,ks)}function yJ(n){return dJ(qv("",null,null,null,[""],n=hJ(n),0,[0],n))}function qv(n,e,t,r,i,s,o,a,l){for(var c=0,u=0,h=o,d=0,f=0,p=0,g=1,y=1,m=1,_=0,v="",x=i,b=s,T=r,w=v;y;)switch(p=_,_=vo()){case 40:if(p!=108&&br(w,h-1)==58){Wv(w+=Ct(J1(_),"&","&\f"),"&\f",F4(c?a[c-1]:0))!=-1&&(m=-1);break}case 34:case 39:case 91:w+=J1(_);break;case 9:case 10:case 13:case 32:w+=fJ(p);break;case 92:w+=pJ(jv()-1,7);continue;case 47:switch(Mu()){case 42:case 47:vm(vJ(mJ(vo(),jv()),e,t,l),l);break;default:w+="/"}break;case 123*g:a[c++]=Uo(w)*m;case 125*g:case 59:case 0:switch(_){case 0:case 125:y=0;case 59+u:m==-1&&(w=Ct(w,/\f/g,"")),f>0&&Uo(w)-h&&vm(f>32?aD(w+";",r,t,h-1,l):aD(Ct(w," ","")+";",r,t,h-2,l),l);break;case 59:w+=";";default:if(vm(T=oD(w,e,t,c,u,i,a,v,x=[],b=[],h,s),s),_===123)if(u===0)qv(w,e,T,T,x,s,h,a,b);else switch(d===99&&br(w,3)===110?100:d){case 100:case 108:case 109:case 115:qv(n,T,T,r&&vm(oD(n,T,T,0,0,i,a,v,i,x=[],h,b),b),i,b,h,a,r?x:b);break;default:qv(w,T,T,T,[""],b,0,a,b)}}c=u=f=0,g=m=1,v=w="",h=o;break;case 58:h=1+Uo(w),f=p;default:if(g<1){if(_==123)--g;else if(_==125&&g++==0&&uJ()==125)continue}switch(w+=FN(_),_*g){case 38:m=u>0?1:(w+="\f",-1);break;case 44:a[c++]=(Uo(w)-1)*m,m=1;break;case 64:Mu()===45&&(w+=J1(vo())),d=Mu(),u=h=Uo(v=w+=gJ(jv())),_++;break;case 45:p===45&&Uo(w)==2&&(g=0)}}return s}function oD(n,e,t,r,i,s,o,a,l,c,u,h){for(var d=i-1,f=i===0?s:[""],p=U4(f),g=0,y=0,m=0;g<r;++g)for(var _=0,v=xf(n,d+1,d=F4(y=o[g])),x=n;_<p;++_)(x=k4(y>0?f[_]+" "+v:Ct(v,/&\f/g,f[_])))&&(l[m++]=x);return tb(n,e,t,i===0?JS:a,l,c,u,h)}function vJ(n,e,t,r){return tb(n,e,t,D4,FN(cJ()),xf(n,2,-2),0,r)}function aD(n,e,t,r,i){return tb(n,e,t,ON,xf(n,0,r),xf(n,r+1,-1),r,i)}function z4(n,e,t){switch(aJ(n,e)){case 5103:return Zt+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Zt+n+n;case 4789:return $m+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return Zt+n+$m+n+bn+n+n;case 5936:switch(br(n,e+11)){case 114:return Zt+n+bn+Ct(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return Zt+n+bn+Ct(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return Zt+n+bn+Ct(n,/[svh]\w+-[tblr]{2}/,"lr")+n}case 6828:case 4268:case 2903:return Zt+n+bn+n+n;case 6165:return Zt+n+bn+"flex-"+n+n;case 5187:return Zt+n+Ct(n,/(\w+).+(:[^]+)/,Zt+"box-$1$2"+bn+"flex-$1$2")+n;case 5443:return Zt+n+bn+"flex-item-"+Ct(n,/flex-|-self/g,"")+(xa(n,/flex-|baseline/)?"":bn+"grid-row-"+Ct(n,/flex-|-self/g,""))+n;case 4675:return Zt+n+bn+"flex-line-pack"+Ct(n,/align-content|flex-|-self/g,"")+n;case 5548:return Zt+n+bn+Ct(n,"shrink","negative")+n;case 5292:return Zt+n+bn+Ct(n,"basis","preferred-size")+n;case 6060:return Zt+"box-"+Ct(n,"-grow","")+Zt+n+bn+Ct(n,"grow","positive")+n;case 4554:return Zt+Ct(n,/([^-])(transform)/g,"$1"+Zt+"$2")+n;case 6187:return Ct(Ct(Ct(n,/(zoom-|grab)/,Zt+"$1"),/(image-set)/,Zt+"$1"),n,"")+n;case 5495:case 3959:return Ct(n,/(image-set\([^]*)/,Zt+"$1$`$1");case 4968:return Ct(Ct(n,/(.+:)(flex-)?(.*)/,Zt+"box-pack:$3"+bn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Zt+n+n;case 4200:if(!xa(n,/flex-|baseline/))return bn+"grid-column-align"+xf(n,e)+n;break;case 2592:case 3360:return bn+Ct(n,"template-","")+n;case 4384:case 3616:return t&&t.some(function(r,i){return e=i,xa(r.props,/grid-\w+-end/)})?~Wv(n+(t=t[e].value),"span",0)?n:bn+Ct(n,"-start","")+n+bn+"grid-row-span:"+(~Wv(t,"span",0)?xa(t,/\d+/):+xa(t,/\d+/)-+xa(n,/\d+/))+";":bn+Ct(n,"-start","")+n;case 4896:case 4128:return t&&t.some(function(r){return xa(r.props,/grid-\w+-start/)})?n:bn+Ct(Ct(n,"-end","-span"),"span ","")+n;case 4095:case 3583:case 4068:case 2532:return Ct(n,/(.+)-inline(.+)/,Zt+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Uo(n)-1-e>6)switch(br(n,e+1)){case 109:if(br(n,e+4)!==45)break;case 102:return Ct(n,/(.+:)(.+)-([^]+)/,"$1"+Zt+"$2-$3$1"+$m+(br(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~Wv(n,"stretch",0)?z4(Ct(n,"stretch","fill-available"),e,t)+n:n}break;case 5152:case 5920:return Ct(n,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,s,o,a,l,c){return bn+i+":"+s+c+(o?bn+i+"-span:"+(a?l:+l-+s)+c:"")+n});case 4949:if(br(n,e+6)===121)return Ct(n,":",":"+Zt)+n;break;case 6444:switch(br(n,br(n,14)===45?18:11)){case 120:return Ct(n,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Zt+(br(n,14)===45?"inline-":"")+"box$3$1"+Zt+"$2$3$1"+bn+"$2box$3")+n;case 100:return Ct(n,":",":"+bn)+n}break;case 5719:case 2647:case 2135:case 3927:case 2391:return Ct(n,"scroll-","scroll-snap-")+n}return n}function ox(n,e){for(var t="",r=0;r<n.length;r++)t+=e(n[r],r,n,e)||"";return t}function _J(n,e,t,r){switch(n.type){case oJ:if(n.children.length)break;case sJ:case ON:return n.return=n.return||n.value;case D4:return"";case O4:return n.return=n.value+"{"+ox(n.children,r)+"}";case JS:if(!Uo(n.value=n.props.join(",")))return""}return Uo(t=ox(n.children,r))?n.return=n.value+"{"+t+"}":""}function xJ(n){var e=U4(n);return function(t,r,i,s){for(var o="",a=0;a<e;a++)o+=n[a](t,r,i,s)||"";return o}}function SJ(n){return function(e){e.root||(e=e.return)&&n(e)}}function bJ(n,e,t,r){if(n.length>-1&&!n.return)switch(n.type){case ON:n.return=z4(n.value,n.length,t);return;case O4:return ox([Dl(n,{value:Ct(n.value,"@","@"+Zt)})],r);case JS:if(n.length)return lJ(t=n.props,function(i){switch(xa(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":mh(Dl(n,{props:[Ct(i,/:(read-\w+)/,":"+$m+"$1")]})),mh(Dl(n,{props:[i]})),TE(n,{props:sD(t,r)});break;case"::placeholder":mh(Dl(n,{props:[Ct(i,/:(plac\w+)/,":"+Zt+"input-$1")]})),mh(Dl(n,{props:[Ct(i,/:(plac\w+)/,":"+$m+"$1")]})),mh(Dl(n,{props:[Ct(i,/:(plac\w+)/,bn+"input-$1")]})),mh(Dl(n,{props:[i]})),TE(n,{props:sD(t,r)});break}return""})}}var wJ={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Zi={},bf=typeof process<"u"&&Zi!==void 0&&(Zi.REACT_APP_SC_ATTR||Zi.SC_ATTR)||"data-styled",$4="active",V4="data-styled-version",rb="6.1.13",kN=`/*!sc*/
`,ax=typeof window<"u"&&"HTMLElement"in window,TJ=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Zi!==void 0&&Zi.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Zi.REACT_APP_SC_DISABLE_SPEEDY!==""?Zi.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Zi.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Zi!==void 0&&Zi.SC_DISABLE_SPEEDY!==void 0&&Zi.SC_DISABLE_SPEEDY!==""&&Zi.SC_DISABLE_SPEEDY!=="false"&&Zi.SC_DISABLE_SPEEDY),ib=Object.freeze([]),wf=Object.freeze({});function MJ(n,e,t){return t===void 0&&(t=wf),n.theme!==t.theme&&n.theme||e||t.theme}var G4=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),EJ=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,AJ=/(^-|-$)/g;function lD(n){return n.replace(EJ,"-").replace(AJ,"")}var CJ=/(a)(d)/gi,o0=52,cD=function(n){return String.fromCharCode(n+(n>25?39:97))};function AE(n){var e,t="";for(e=Math.abs(n);e>o0;e=e/o0|0)t=cD(e%o0)+t;return(cD(e%o0)+t).replace(CJ,"$1-$2")}var ew,H4=5381,gd=function(n,e){for(var t=e.length;t;)n=33*n^e.charCodeAt(--t);return n},W4=function(n){return gd(H4,n)};function RJ(n){return AE(W4(n)>>>0)}function NJ(n){return n.displayName||n.name||"Component"}function tw(n){return typeof n=="string"&&!0}var j4=typeof Symbol=="function"&&Symbol.for,q4=j4?Symbol.for("react.memo"):60115,PJ=j4?Symbol.for("react.forward_ref"):60112,IJ={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},LJ={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},X4={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},DJ=((ew={})[PJ]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ew[q4]=X4,ew);function uD(n){return("type"in(e=n)&&e.type.$$typeof)===q4?X4:"$$typeof"in n?DJ[n.$$typeof]:IJ;var e}var OJ=Object.defineProperty,FJ=Object.getOwnPropertyNames,hD=Object.getOwnPropertySymbols,kJ=Object.getOwnPropertyDescriptor,UJ=Object.getPrototypeOf,dD=Object.prototype;function K4(n,e,t){if(typeof e!="string"){if(dD){var r=UJ(e);r&&r!==dD&&K4(n,r,t)}var i=FJ(e);hD&&(i=i.concat(hD(e)));for(var s=uD(n),o=uD(e),a=0;a<i.length;++a){var l=i[a];if(!(l in LJ||t&&t[l]||o&&l in o||s&&l in s)){var c=kJ(e,l);try{OJ(n,l,c)}catch{}}}}return n}function Tf(n){return typeof n=="function"}function UN(n){return typeof n=="object"&&"styledComponentId"in n}function du(n,e){return n&&e?"".concat(n," ").concat(e):n||e||""}function fD(n,e){if(n.length===0)return"";for(var t=n[0],r=1;r<n.length;r++)t+=n[r];return t}function Eg(n){return n!==null&&typeof n=="object"&&n.constructor.name===Object.name&&!("props"in n&&n.$$typeof)}function CE(n,e,t){if(t===void 0&&(t=!1),!t&&!Eg(n)&&!Array.isArray(n))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)n[r]=CE(n[r],e[r]);else if(Eg(e))for(var r in e)n[r]=CE(n[r],e[r]);return n}function BN(n,e){Object.defineProperty(n,"toString",{value:e})}function ay(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(n," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var BJ=function(){function n(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return n.prototype.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},n.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,s=i;e>=s;)if((s<<=1)<0)throw ay(16,"".concat(e));this.groupSizes=new Uint32Array(s),this.groupSizes.set(r),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),l=(o=0,t.length);o<l;o++)this.tag.insertRule(a,t[o])&&(this.groupSizes[e]++,a++)},n.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),i=r+t;this.groupSizes[e]=0;for(var s=r;s<i;s++)this.tag.deleteRule(r)}},n.prototype.getGroup=function(e){var t="";if(e>=this.length||this.groupSizes[e]===0)return t;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),s=i+r,o=i;o<s;o++)t+="".concat(this.tag.getRule(o)).concat(kN);return t},n}(),Xv=new Map,lx=new Map,Kv=1,a0=function(n){if(Xv.has(n))return Xv.get(n);for(;lx.has(Kv);)Kv++;var e=Kv++;return Xv.set(n,e),lx.set(e,n),e},zJ=function(n,e){Kv=e+1,Xv.set(n,e),lx.set(e,n)},$J="style[".concat(bf,"][").concat(V4,'="').concat(rb,'"]'),VJ=new RegExp("^".concat(bf,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),GJ=function(n,e,t){for(var r,i=t.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&n.registerName(e,r)},HJ=function(n,e){for(var t,r=((t=e.textContent)!==null&&t!==void 0?t:"").split(kN),i=[],s=0,o=r.length;s<o;s++){var a=r[s].trim();if(a){var l=a.match(VJ);if(l){var c=0|parseInt(l[1],10),u=l[2];c!==0&&(zJ(u,c),GJ(n,u,l[3]),n.getTag().insertRules(c,i)),i.length=0}else i.push(a)}}},pD=function(n){for(var e=document.querySelectorAll($J),t=0,r=e.length;t<r;t++){var i=e[t];i&&i.getAttribute(bf)!==$4&&(HJ(n,i),i.parentNode&&i.parentNode.removeChild(i))}};function WJ(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Y4=function(n){var e=document.head,t=n||e,r=document.createElement("style"),i=function(a){var l=Array.from(a.querySelectorAll("style[".concat(bf,"]")));return l[l.length-1]}(t),s=i!==void 0?i.nextSibling:null;r.setAttribute(bf,$4),r.setAttribute(V4,rb);var o=WJ();return o&&r.setAttribute("nonce",o),t.insertBefore(r,s),r},jJ=function(){function n(e){this.element=Y4(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(t){if(t.sheet)return t.sheet;for(var r=document.styleSheets,i=0,s=r.length;i<s;i++){var o=r[i];if(o.ownerNode===t)return o}throw ay(17)}(this.element),this.length=0}return n.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},n.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},n}(),qJ=function(){function n(e){this.element=Y4(e),this.nodes=this.element.childNodes,this.length=0}return n.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},n.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},n}(),XJ=function(){function n(e){this.rules=[],this.length=0}return n.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},n.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},n}(),mD=ax,KJ={isServer:!ax,useCSSOMInjection:!TJ},Q4=function(){function n(e,t,r){e===void 0&&(e=wf),t===void 0&&(t={});var i=this;this.options=Ti(Ti({},KJ),e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&ax&&mD&&(mD=!1,pD(this)),BN(this,function(){return function(s){for(var o=s.getTag(),a=o.length,l="",c=function(h){var d=function(m){return lx.get(m)}(h);if(d===void 0)return"continue";var f=s.names.get(d),p=o.getGroup(h);if(f===void 0||!f.size||p.length===0)return"continue";var g="".concat(bf,".g").concat(h,'[id="').concat(d,'"]'),y="";f!==void 0&&f.forEach(function(m){m.length>0&&(y+="".concat(m,","))}),l+="".concat(p).concat(g,'{content:"').concat(y,'"}').concat(kN)},u=0;u<a;u++)c(u);return l}(i)})}return n.registerId=function(e){return a0(e)},n.prototype.rehydrate=function(){!this.server&&ax&&pD(this)},n.prototype.reconstructWithOptions=function(e,t){return t===void 0&&(t=!0),new n(Ti(Ti({},this.options),e),this.gs,t&&this.names||void 0)},n.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.prototype.getTag=function(){return this.tag||(this.tag=(e=function(t){var r=t.useCSSOMInjection,i=t.target;return t.isServer?new XJ(i):r?new jJ(i):new qJ(i)}(this.options),new BJ(e)));var e},n.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},n.prototype.registerName=function(e,t){if(a0(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},n.prototype.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(a0(e),r)},n.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.prototype.clearRules=function(e){this.getTag().clearGroup(a0(e)),this.clearNames(e)},n.prototype.clearTag=function(){this.tag=void 0},n}(),YJ=/&/g,QJ=/^\s*\/\/.*$/gm;function Z4(n,e){return n.map(function(t){return t.type==="rule"&&(t.value="".concat(e," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(e," ")),t.props=t.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(t.children)&&t.type!=="@keyframes"&&(t.children=Z4(t.children,e)),t})}function ZJ(n){var e,t,r,i=wf,s=i.options,o=s===void 0?wf:s,a=i.plugins,l=a===void 0?ib:a,c=function(d,f,p){return p.startsWith(t)&&p.endsWith(t)&&p.replaceAll(t,"").length>0?".".concat(e):d},u=l.slice();u.push(function(d){d.type===JS&&d.value.includes("&")&&(d.props[0]=d.props[0].replace(YJ,t).replace(r,c))}),o.prefix&&u.push(bJ),u.push(_J);var h=function(d,f,p,g){f===void 0&&(f=""),p===void 0&&(p=""),g===void 0&&(g="&"),e=g,t=f,r=new RegExp("\\".concat(t,"\\b"),"g");var y=d.replace(QJ,""),m=yJ(p||f?"".concat(p," ").concat(f," { ").concat(y," }"):y);o.namespace&&(m=Z4(m,o.namespace));var _=[];return ox(m,xJ(u.concat(SJ(function(v){return _.push(v)})))),_};return h.hash=l.length?l.reduce(function(d,f){return f.name||ay(15),gd(d,f.name)},H4).toString():"",h}var JJ=new Q4,RE=ZJ(),J4=Et.createContext({shouldForwardProp:void 0,styleSheet:JJ,stylis:RE});J4.Consumer;Et.createContext(void 0);function gD(){return P.useContext(J4)}var eee=function(){function n(e,t){var r=this;this.inject=function(i,s){s===void 0&&(s=RE);var o=r.name+s.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,s(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,BN(this,function(){throw ay(12,String(r.name))})}return n.prototype.getName=function(e){return e===void 0&&(e=RE),this.name+e.hash},n}(),tee=function(n){return n>="A"&&n<="Z"};function yD(n){for(var e="",t=0;t<n.length;t++){var r=n[t];if(t===1&&r==="-"&&n[0]==="-")return n;tee(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var e$=function(n){return n==null||n===!1||n===""},t$=function(n){var e,t,r=[];for(var i in n){var s=n[i];n.hasOwnProperty(i)&&!e$(s)&&(Array.isArray(s)&&s.isCss||Tf(s)?r.push("".concat(yD(i),":"),s,";"):Eg(s)?r.push.apply(r,sx(sx(["".concat(i," {")],t$(s),!1),["}"],!1)):r.push("".concat(yD(i),": ").concat((e=i,(t=s)==null||typeof t=="boolean"||t===""?"":typeof t!="number"||t===0||e in wJ||e.startsWith("--")?String(t).trim():"".concat(t,"px")),";")))}return r};function Eu(n,e,t,r){if(e$(n))return[];if(UN(n))return[".".concat(n.styledComponentId)];if(Tf(n)){if(!Tf(s=n)||s.prototype&&s.prototype.isReactComponent||!e)return[n];var i=n(e);return Eu(i,e,t,r)}var s;return n instanceof eee?t?(n.inject(t,r),[n.getName(r)]):[n]:Eg(n)?t$(n):Array.isArray(n)?Array.prototype.concat.apply(ib,n.map(function(o){return Eu(o,e,t,r)})):[n.toString()]}function nee(n){for(var e=0;e<n.length;e+=1){var t=n[e];if(Tf(t)&&!UN(t))return!1}return!0}var ree=W4(rb),iee=function(){function n(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&nee(e),this.componentId=t,this.baseHash=gd(ree,t),this.baseStyle=r,Q4.registerId(t)}return n.prototype.generateAndInjectStyles=function(e,t,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=du(i,this.staticRulesId);else{var s=fD(Eu(this.rules,e,t,r)),o=AE(gd(this.baseHash,s)>>>0);if(!t.hasNameForId(this.componentId,o)){var a=r(s,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,a)}i=du(i,o),this.staticRulesId=o}else{for(var l=gd(this.baseHash,r.hash),c="",u=0;u<this.rules.length;u++){var h=this.rules[u];if(typeof h=="string")c+=h;else if(h){var d=fD(Eu(h,e,t,r));l=gd(l,d+u),c+=d}}if(c){var f=AE(l>>>0);t.hasNameForId(this.componentId,f)||t.insertRules(this.componentId,f,r(c,".".concat(f),void 0,this.componentId)),i=du(i,f)}}return i},n}(),n$=Et.createContext(void 0);n$.Consumer;var nw={};function see(n,e,t){var r=UN(n),i=n,s=!tw(n),o=e.attrs,a=o===void 0?ib:o,l=e.componentId,c=l===void 0?function(x,b){var T=typeof x!="string"?"sc":lD(x);nw[T]=(nw[T]||0)+1;var w="".concat(T,"-").concat(RJ(rb+T+nw[T]));return b?"".concat(b,"-").concat(w):w}(e.displayName,e.parentComponentId):l,u=e.displayName,h=u===void 0?function(x){return tw(x)?"styled.".concat(x):"Styled(".concat(NJ(x),")")}(n):u,d=e.displayName&&e.componentId?"".concat(lD(e.displayName),"-").concat(e.componentId):e.componentId||c,f=r&&i.attrs?i.attrs.concat(a).filter(Boolean):a,p=e.shouldForwardProp;if(r&&i.shouldForwardProp){var g=i.shouldForwardProp;if(e.shouldForwardProp){var y=e.shouldForwardProp;p=function(x,b){return g(x,b)&&y(x,b)}}else p=g}var m=new iee(t,d,r?i.componentStyle:void 0);function _(x,b){return function(T,w,M){var C=T.attrs,S=T.componentStyle,E=T.defaultProps,I=T.foldedComponentIds,F=T.styledComponentId,N=T.target,R=Et.useContext(n$),D=gD(),j=T.shouldForwardProp||D.shouldForwardProp,L=MJ(w,R,E)||wf,W=function(V,Z,le){for(var pe,ue=Ti(Ti({},Z),{className:void 0,theme:le}),be=0;be<V.length;be+=1){var Pe=Tf(pe=V[be])?pe(ue):pe;for(var we in Pe)ue[we]=we==="className"?du(ue[we],Pe[we]):we==="style"?Ti(Ti({},ue[we]),Pe[we]):Pe[we]}return Z.className&&(ue.className=du(ue.className,Z.className)),ue}(C,w,L),z=W.as||N,X={};for(var U in W)W[U]===void 0||U[0]==="$"||U==="as"||U==="theme"&&W.theme===L||(U==="forwardedAs"?X.as=W.forwardedAs:j&&!j(U,z)||(X[U]=W[U]));var te=function(V,Z){var le=gD(),pe=V.generateAndInjectStyles(Z,le.styleSheet,le.stylis);return pe}(S,W),k=du(I,F);return te&&(k+=" "+te),W.className&&(k+=" "+W.className),X[tw(z)&&!G4.has(z)?"class":"className"]=k,X.ref=M,P.createElement(z,X)}(v,x,b)}_.displayName=h;var v=Et.forwardRef(_);return v.attrs=f,v.componentStyle=m,v.displayName=h,v.shouldForwardProp=p,v.foldedComponentIds=r?du(i.foldedComponentIds,i.styledComponentId):"",v.styledComponentId=d,v.target=r?i.target:n,Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(x){this._foldedDefaultProps=r?function(b){for(var T=[],w=1;w<arguments.length;w++)T[w-1]=arguments[w];for(var M=0,C=T;M<C.length;M++)CE(b,C[M],!0);return b}({},i.defaultProps,x):x}}),BN(v,function(){return".".concat(v.styledComponentId)}),s&&K4(v,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),v}function vD(n,e){for(var t=[n[0]],r=0,i=e.length;r<i;r+=1)t.push(e[r],n[r+1]);return t}var _D=function(n){return Object.assign(n,{isCss:!0})};function oee(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(Tf(n)||Eg(n))return _D(Eu(vD(ib,sx([n],e,!0))));var r=n;return e.length===0&&r.length===1&&typeof r[0]=="string"?Eu(r):_D(Eu(vD(r,e)))}function NE(n,e,t){if(t===void 0&&(t=wf),!e)throw ay(1,e);var r=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return n(e,t,oee.apply(void 0,sx([i],s,!1)))};return r.attrs=function(i){return NE(n,e,Ti(Ti({},t),{attrs:Array.prototype.concat(t.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return NE(n,e,Ti(Ti({},t),i))},r}var r$=function(n){return NE(see,n)},sb=r$;G4.forEach(function(n){sb[n]=r$(n)});const aee=sb(iQ)`
  .dialog-content {
    object-fit: cover;
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center;
    padding: 0;

    &-box {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;

      &-cancle {
        position: absolute;
        top: 8px;
        right: 8px;
      }

      &-subtitle {
        font-style: italic;
      }

      &-tags {
        display: flex;
        align-items: center;
        gap: 8px;
      }
    }
  }
`;function i$(n,e){return function(){return n.apply(e,arguments)}}const{toString:lee}=Object.prototype,{getPrototypeOf:zN}=Object,ob=(n=>e=>{const t=lee.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Mo=n=>(n=n.toLowerCase(),e=>ob(e)===n),ab=n=>e=>typeof e===n,{isArray:Zf}=Array,Ag=ab("undefined");function cee(n){return n!==null&&!Ag(n)&&n.constructor!==null&&!Ag(n.constructor)&&ls(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const s$=Mo("ArrayBuffer");function uee(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&s$(n.buffer),e}const hee=ab("string"),ls=ab("function"),o$=ab("number"),lb=n=>n!==null&&typeof n=="object",dee=n=>n===!0||n===!1,Yv=n=>{if(ob(n)!=="object")return!1;const e=zN(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},fee=Mo("Date"),pee=Mo("File"),mee=Mo("Blob"),gee=Mo("FileList"),yee=n=>lb(n)&&ls(n.pipe),vee=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||ls(n.append)&&((e=ob(n))==="formdata"||e==="object"&&ls(n.toString)&&n.toString()==="[object FormData]"))},_ee=Mo("URLSearchParams"),[xee,See,bee,wee]=["ReadableStream","Request","Response","Headers"].map(Mo),Tee=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ly(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Zf(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,n[a],a,n)}}function a$(n,e){e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const fu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,l$=n=>!Ag(n)&&n!==fu;function PE(){const{caseless:n}=l$(this)&&this||{},e={},t=(r,i)=>{const s=n&&a$(e,i)||i;Yv(e[s])&&Yv(r)?e[s]=PE(e[s],r):Yv(r)?e[s]=PE({},r):Zf(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ly(arguments[r],t);return e}const Mee=(n,e,t,{allOwnKeys:r}={})=>(ly(e,(i,s)=>{t&&ls(i)?n[s]=i$(i,t):n[s]=i},{allOwnKeys:r}),n),Eee=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Aee=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},Cee=(n,e,t,r)=>{let i,s,o;const a={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),s=i.length;s-- >0;)o=i[s],(!r||r(o,n,e))&&!a[o]&&(e[o]=n[o],a[o]=!0);n=t!==!1&&zN(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Ree=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},Nee=n=>{if(!n)return null;if(Zf(n))return n;let e=n.length;if(!o$(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Pee=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&zN(Uint8Array)),Iee=(n,e)=>{const r=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(n,s[0],s[1])}},Lee=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},Dee=Mo("HTMLFormElement"),Oee=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),xD=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),Fee=Mo("RegExp"),c$=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};ly(t,(i,s)=>{let o;(o=e(i,s,n))!==!1&&(r[s]=o||i)}),Object.defineProperties(n,r)},kee=n=>{c$(n,(e,t)=>{if(ls(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(ls(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Uee=(n,e)=>{const t={},r=i=>{i.forEach(s=>{t[s]=!0})};return Zf(n)?r(n):r(String(n).split(e)),t},Bee=()=>{},zee=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,rw="abcdefghijklmnopqrstuvwxyz",SD="0123456789",u$={DIGIT:SD,ALPHA:rw,ALPHA_DIGIT:rw+rw.toUpperCase()+SD},$ee=(n=16,e=u$.ALPHA_DIGIT)=>{let t="";const{length:r}=e;for(;n--;)t+=e[Math.random()*r|0];return t};function Vee(n){return!!(n&&ls(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const Gee=n=>{const e=new Array(10),t=(r,i)=>{if(lb(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Zf(r)?[]:{};return ly(r,(o,a)=>{const l=t(o,i+1);!Ag(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return t(n,0)},Hee=Mo("AsyncFunction"),Wee=n=>n&&(lb(n)||ls(n))&&ls(n.then)&&ls(n.catch),h$=((n,e)=>n?setImmediate:e?((t,r)=>(fu.addEventListener("message",({source:i,data:s})=>{i===fu&&s===t&&r.length&&r.shift()()},!1),i=>{r.push(i),fu.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ls(fu.postMessage)),jee=typeof queueMicrotask<"u"?queueMicrotask.bind(fu):typeof process<"u"&&process.nextTick||h$,ye={isArray:Zf,isArrayBuffer:s$,isBuffer:cee,isFormData:vee,isArrayBufferView:uee,isString:hee,isNumber:o$,isBoolean:dee,isObject:lb,isPlainObject:Yv,isReadableStream:xee,isRequest:See,isResponse:bee,isHeaders:wee,isUndefined:Ag,isDate:fee,isFile:pee,isBlob:mee,isRegExp:Fee,isFunction:ls,isStream:yee,isURLSearchParams:_ee,isTypedArray:Pee,isFileList:gee,forEach:ly,merge:PE,extend:Mee,trim:Tee,stripBOM:Eee,inherits:Aee,toFlatObject:Cee,kindOf:ob,kindOfTest:Mo,endsWith:Ree,toArray:Nee,forEachEntry:Iee,matchAll:Lee,isHTMLForm:Dee,hasOwnProperty:xD,hasOwnProp:xD,reduceDescriptors:c$,freezeMethods:kee,toObjectSet:Uee,toCamelCase:Oee,noop:Bee,toFiniteNumber:zee,findKey:a$,global:fu,isContextDefined:l$,ALPHABET:u$,generateString:$ee,isSpecCompliantForm:Vee,toJSONObject:Gee,isAsyncFn:Hee,isThenable:Wee,setImmediate:h$,asap:jee};function St(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}ye.inherits(St,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ye.toJSONObject(this.config),code:this.code,status:this.status}}});const d$=St.prototype,f$={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{f$[n]={value:n}});Object.defineProperties(St,f$);Object.defineProperty(d$,"isAxiosError",{value:!0});St.from=(n,e,t,r,i,s)=>{const o=Object.create(d$);return ye.toFlatObject(n,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),St.call(o,n.message,e,t,r,i),o.cause=n,o.name=n.name,s&&Object.assign(o,s),o};const qee=null;function IE(n){return ye.isPlainObject(n)||ye.isArray(n)}function p$(n){return ye.endsWith(n,"[]")?n.slice(0,-2):n}function bD(n,e,t){return n?n.concat(e).map(function(i,s){return i=p$(i),!t&&s?"["+i+"]":i}).join(t?".":""):e}function Xee(n){return ye.isArray(n)&&!n.some(IE)}const Kee=ye.toFlatObject(ye,{},null,function(e){return/^is[A-Z]/.test(e)});function cb(n,e,t){if(!ye.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ye.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!ye.isUndefined(y[g])});const r=t.metaTokens,i=t.visitor||u,s=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&ye.isSpecCompliantForm(e);if(!ye.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(ye.isDate(p))return p.toISOString();if(!l&&ye.isBlob(p))throw new St("Blob is not supported. Use a Buffer instead.");return ye.isArrayBuffer(p)||ye.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,g,y){let m=p;if(p&&!y&&typeof p=="object"){if(ye.endsWith(g,"{}"))g=r?g:g.slice(0,-2),p=JSON.stringify(p);else if(ye.isArray(p)&&Xee(p)||(ye.isFileList(p)||ye.endsWith(g,"[]"))&&(m=ye.toArray(p)))return g=p$(g),m.forEach(function(v,x){!(ye.isUndefined(v)||v===null)&&e.append(o===!0?bD([g],x,s):o===null?g:g+"[]",c(v))}),!1}return IE(p)?!0:(e.append(bD(y,g,s),c(p)),!1)}const h=[],d=Object.assign(Kee,{defaultVisitor:u,convertValue:c,isVisitable:IE});function f(p,g){if(!ye.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(p),ye.forEach(p,function(m,_){(!(ye.isUndefined(m)||m===null)&&i.call(e,m,ye.isString(_)?_.trim():_,g,d))===!0&&f(m,g?g.concat(_):[_])}),h.pop()}}if(!ye.isObject(n))throw new TypeError("data must be an object");return f(n),e}function wD(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function $N(n,e){this._pairs=[],n&&cb(n,this,e)}const m$=$N.prototype;m$.append=function(e,t){this._pairs.push([e,t])};m$.toString=function(e){const t=e?function(r){return e.call(this,r,wD)}:wD;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function Yee(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function g$(n,e,t){if(!e)return n;const r=t&&t.encode||Yee,i=t&&t.serialize;let s;if(i?s=i(e,t):s=ye.isURLSearchParams(e)?e.toString():new $N(e,t).toString(r),s){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class TD{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ye.forEach(this.handlers,function(r){r!==null&&e(r)})}}const y$={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Qee=typeof URLSearchParams<"u"?URLSearchParams:$N,Zee=typeof FormData<"u"?FormData:null,Jee=typeof Blob<"u"?Blob:null,ete={isBrowser:!0,classes:{URLSearchParams:Qee,FormData:Zee,Blob:Jee},protocols:["http","https","file","blob","url","data"]},VN=typeof window<"u"&&typeof document<"u",LE=typeof navigator=="object"&&navigator||void 0,tte=VN&&(!LE||["ReactNative","NativeScript","NS"].indexOf(LE.product)<0),nte=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",rte=VN&&window.location.href||"http://localhost",ite=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:VN,hasStandardBrowserEnv:tte,hasStandardBrowserWebWorkerEnv:nte,navigator:LE,origin:rte},Symbol.toStringTag,{value:"Module"})),Pi={...ite,...ete};function ste(n,e){return cb(n,new Pi.classes.URLSearchParams,Object.assign({visitor:function(t,r,i,s){return Pi.isNode&&ye.isBuffer(t)?(this.append(r,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function ote(n){return ye.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ate(n){const e={},t=Object.keys(n);let r;const i=t.length;let s;for(r=0;r<i;r++)s=t[r],e[s]=n[s];return e}function v$(n){function e(t,r,i,s){let o=t[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=t.length;return o=!o&&ye.isArray(i)?i.length:o,l?(ye.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!ye.isObject(i[o]))&&(i[o]=[]),e(t,r,i[o],s)&&ye.isArray(i[o])&&(i[o]=ate(i[o])),!a)}if(ye.isFormData(n)&&ye.isFunction(n.entries)){const t={};return ye.forEachEntry(n,(r,i)=>{e(ote(r),i,t,0)}),t}return null}function lte(n,e,t){if(ye.isString(n))try{return(e||JSON.parse)(n),ye.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(n)}const cy={transitional:y$,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,s=ye.isObject(e);if(s&&ye.isHTMLForm(e)&&(e=new FormData(e)),ye.isFormData(e))return i?JSON.stringify(v$(e)):e;if(ye.isArrayBuffer(e)||ye.isBuffer(e)||ye.isStream(e)||ye.isFile(e)||ye.isBlob(e)||ye.isReadableStream(e))return e;if(ye.isArrayBufferView(e))return e.buffer;if(ye.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return ste(e,this.formSerializer).toString();if((a=ye.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return cb(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),lte(e)):e}],transformResponse:[function(e){const t=this.transitional||cy.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(ye.isResponse(e)||ye.isReadableStream(e))return e;if(e&&ye.isString(e)&&(r&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?St.from(a,St.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pi.classes.FormData,Blob:Pi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ye.forEach(["delete","get","head","post","put","patch"],n=>{cy.headers[n]={}});const cte=ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ute=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!t||e[t]&&cte[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},MD=Symbol("internals");function Cp(n){return n&&String(n).trim().toLowerCase()}function Qv(n){return n===!1||n==null?n:ye.isArray(n)?n.map(Qv):String(n)}function hte(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const dte=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function iw(n,e,t,r,i){if(ye.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!ye.isString(e)){if(ye.isString(r))return e.indexOf(r)!==-1;if(ye.isRegExp(r))return r.test(e)}}function fte(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function pte(n,e){const t=ye.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Ii{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function s(a,l,c){const u=Cp(l);if(!u)throw new Error("header name must be a non-empty string");const h=ye.findKey(i,u);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||l]=Qv(a))}const o=(a,l)=>ye.forEach(a,(c,u)=>s(c,u,l));if(ye.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(ye.isString(e)&&(e=e.trim())&&!dte(e))o(ute(e),t);else if(ye.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(t,e,r);return this}get(e,t){if(e=Cp(e),e){const r=ye.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return hte(i);if(ye.isFunction(t))return t.call(this,i,r);if(ye.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Cp(e),e){const r=ye.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||iw(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function s(o){if(o=Cp(o),o){const a=ye.findKey(r,o);a&&(!t||iw(r,r[a],a,t))&&(delete r[a],i=!0)}}return ye.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const s=t[r];(!e||iw(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const t=this,r={};return ye.forEach(this,(i,s)=>{const o=ye.findKey(r,s);if(o){t[o]=Qv(i),delete t[s];return}const a=e?fte(s):String(s).trim();a!==s&&delete t[s],t[a]=Qv(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ye.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&ye.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[MD]=this[MD]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Cp(o);r[a]||(pte(i,o),r[a]=!0)}return ye.isArray(e)?e.forEach(s):s(e),this}}Ii.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ye.reduceDescriptors(Ii.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});ye.freezeMethods(Ii);function sw(n,e){const t=this||cy,r=e||t,i=Ii.from(r.headers);let s=r.data;return ye.forEach(n,function(a){s=a.call(t,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function _$(n){return!!(n&&n.__CANCEL__)}function Jf(n,e,t){St.call(this,n??"canceled",St.ERR_CANCELED,e,t),this.name="CanceledError"}ye.inherits(Jf,St,{__CANCEL__:!0});function x$(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new St("Request failed with status code "+t.status,[St.ERR_BAD_REQUEST,St.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function mte(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function gte(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),t[i]=l,r[i]=c;let h=s,d=0;for(;h!==i;)d+=t[h++],h=h%n;if(i=(i+1)%n,i===s&&(s=(s+1)%n),c-o<e)return;const f=u&&c-u;return f?Math.round(d*1e3/f):void 0}}function yte(n,e){let t=0,r=1e3/e,i,s;const o=(c,u=Date.now())=>{t=u,i=null,s&&(clearTimeout(s),s=null),n.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-t;h>=r?o(c,u):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const cx=(n,e,t=3)=>{let r=0;const i=gte(50,250);return yte(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),u=o<=a;r=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};n(h)},t)},ED=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},AD=n=>(...e)=>ye.asap(()=>n(...e)),vte=Pi.hasStandardBrowserEnv?function(){const e=Pi.navigator&&/(msie|trident)/i.test(Pi.navigator.userAgent),t=document.createElement("a");let r;function i(s){let o=s;return e&&(t.setAttribute("href",o),o=t.href),t.setAttribute("href",o),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return r=i(window.location.href),function(o){const a=ye.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}(),_te=Pi.hasStandardBrowserEnv?{write(n,e,t,r,i,s){const o=[n+"="+encodeURIComponent(e)];ye.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),ye.isString(r)&&o.push("path="+r),ye.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function xte(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Ste(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function S$(n,e){return n&&!xte(e)?Ste(n,e):e}const CD=n=>n instanceof Ii?{...n}:n;function ku(n,e){e=e||{};const t={};function r(c,u,h){return ye.isPlainObject(c)&&ye.isPlainObject(u)?ye.merge.call({caseless:h},c,u):ye.isPlainObject(u)?ye.merge({},u):ye.isArray(u)?u.slice():u}function i(c,u,h){if(ye.isUndefined(u)){if(!ye.isUndefined(c))return r(void 0,c,h)}else return r(c,u,h)}function s(c,u){if(!ye.isUndefined(u))return r(void 0,u)}function o(c,u){if(ye.isUndefined(u)){if(!ye.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,h){if(h in e)return r(c,u);if(h in n)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>i(CD(c),CD(u),!0)};return ye.forEach(Object.keys(Object.assign({},n,e)),function(u){const h=l[u]||i,d=h(n[u],e[u],u);ye.isUndefined(d)&&h!==a||(t[u]=d)}),t}const b$=n=>{const e=ku({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Ii.from(o),e.url=g$(S$(e.baseURL,e.url),n.params,n.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(ye.isFormData(t)){if(Pi.hasStandardBrowserEnv||Pi.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Pi.hasStandardBrowserEnv&&(r&&ye.isFunction(r)&&(r=r(e)),r||r!==!1&&vte(e.url))){const c=i&&s&&_te.read(s);c&&o.set(i,c)}return e},bte=typeof XMLHttpRequest<"u",wte=bte&&function(n){return new Promise(function(t,r){const i=b$(n);let s=i.data;const o=Ii.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,h,d,f,p;function g(){f&&f(),p&&p(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function m(){if(!y)return;const v=Ii.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),b={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:v,config:n,request:y};x$(function(w){t(w),g()},function(w){r(w),g()},b),y=null}"onloadend"in y?y.onloadend=m:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(m)},y.onabort=function(){y&&(r(new St("Request aborted",St.ECONNABORTED,n,y)),y=null)},y.onerror=function(){r(new St("Network Error",St.ERR_NETWORK,n,y)),y=null},y.ontimeout=function(){let x=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const b=i.transitional||y$;i.timeoutErrorMessage&&(x=i.timeoutErrorMessage),r(new St(x,b.clarifyTimeoutError?St.ETIMEDOUT:St.ECONNABORTED,n,y)),y=null},s===void 0&&o.setContentType(null),"setRequestHeader"in y&&ye.forEach(o.toJSON(),function(x,b){y.setRequestHeader(b,x)}),ye.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),a&&a!=="json"&&(y.responseType=i.responseType),c&&([d,p]=cx(c,!0),y.addEventListener("progress",d)),l&&y.upload&&([h,f]=cx(l),y.upload.addEventListener("progress",h),y.upload.addEventListener("loadend",f)),(i.cancelToken||i.signal)&&(u=v=>{y&&(r(!v||v.type?new Jf(null,n,y):v),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const _=mte(i.url);if(_&&Pi.protocols.indexOf(_)===-1){r(new St("Unsupported protocol "+_+":",St.ERR_BAD_REQUEST,n));return}y.send(s||null)})},Tte=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof St?u:new Jf(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new St(`timeout ${e} of ms exceeded`,St.ETIMEDOUT))},e);const a=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),n=null)};n.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>ye.asap(a),l}},Mte=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},Ete=async function*(n,e){for await(const t of Ate(n))yield*Mte(t,e)},Ate=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},RD=(n,e,t,r)=>{const i=Ete(n,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let h=u.byteLength;if(t){let d=s+=h;t(d)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},ub=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",w$=ub&&typeof ReadableStream=="function",Cte=ub&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),T$=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Rte=w$&&T$(()=>{let n=!1;const e=new Request(Pi.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),ND=64*1024,DE=w$&&T$(()=>ye.isReadableStream(new Response("").body)),ux={stream:DE&&(n=>n.body)};ub&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ux[e]&&(ux[e]=ye.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new St(`Response type '${e}' is not supported`,St.ERR_NOT_SUPPORT,r)})})})(new Response);const Nte=async n=>{if(n==null)return 0;if(ye.isBlob(n))return n.size;if(ye.isSpecCompliantForm(n))return(await new Request(Pi.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(ye.isArrayBufferView(n)||ye.isArrayBuffer(n))return n.byteLength;if(ye.isURLSearchParams(n)&&(n=n+""),ye.isString(n))return(await Cte(n)).byteLength},Pte=async(n,e)=>{const t=ye.toFiniteNumber(n.getContentLength());return t??Nte(e)},Ite=ub&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:d}=b$(n);c=c?(c+"").toLowerCase():"text";let f=Tte([i,s&&s.toAbortSignal()],o),p;const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let y;try{if(l&&Rte&&t!=="get"&&t!=="head"&&(y=await Pte(u,r))!==0){let b=new Request(e,{method:"POST",body:r,duplex:"half"}),T;if(ye.isFormData(r)&&(T=b.headers.get("content-type"))&&u.setContentType(T),b.body){const[w,M]=ED(y,cx(AD(l)));r=RD(b.body,ND,w,M)}}ye.isString(h)||(h=h?"include":"omit");const m="credentials"in Request.prototype;p=new Request(e,{...d,signal:f,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:m?h:void 0});let _=await fetch(p);const v=DE&&(c==="stream"||c==="response");if(DE&&(a||v&&g)){const b={};["status","statusText","headers"].forEach(C=>{b[C]=_[C]});const T=ye.toFiniteNumber(_.headers.get("content-length")),[w,M]=a&&ED(T,cx(AD(a),!0))||[];_=new Response(RD(_.body,ND,w,()=>{M&&M(),g&&g()}),b)}c=c||"text";let x=await ux[ye.findKey(ux,c)||"text"](_,n);return!v&&g&&g(),await new Promise((b,T)=>{x$(b,T,{data:x,headers:Ii.from(_.headers),status:_.status,statusText:_.statusText,config:n,request:p})})}catch(m){throw g&&g(),m&&m.name==="TypeError"&&/fetch/i.test(m.message)?Object.assign(new St("Network Error",St.ERR_NETWORK,n,p),{cause:m.cause||m}):St.from(m,m&&m.code,n,p)}}),OE={http:qee,xhr:wte,fetch:Ite};ye.forEach(OE,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const PD=n=>`- ${n}`,Lte=n=>ye.isFunction(n)||n===null||n===!1,M$={getAdapter:n=>{n=ye.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let s=0;s<e;s++){t=n[s];let o;if(r=t,!Lte(t)&&(r=OE[(o=String(t)).toLowerCase()],r===void 0))throw new St(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(PD).join(`
`):" "+PD(s[0]):"as no adapter specified";throw new St("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:OE};function ow(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Jf(null,n)}function ID(n){return ow(n),n.headers=Ii.from(n.headers),n.data=sw.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),M$.getAdapter(n.adapter||cy.adapter)(n).then(function(r){return ow(n),r.data=sw.call(n,n.transformResponse,r),r.headers=Ii.from(r.headers),r},function(r){return _$(r)||(ow(n),r&&r.response&&(r.response.data=sw.call(n,n.transformResponse,r.response),r.response.headers=Ii.from(r.response.headers))),Promise.reject(r)})}const E$="1.7.7",GN={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{GN[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const LD={};GN.transitional=function(e,t,r){function i(s,o){return"[Axios v"+E$+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new St(i(o," has been removed"+(t?" in "+t:"")),St.ERR_DEPRECATED);return t&&!LD[o]&&(LD[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,o,a):!0}};function Dte(n,e,t){if(typeof n!="object")throw new St("options must be an object",St.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=n[s],l=a===void 0||o(a,s,n);if(l!==!0)throw new St("option "+s+" must be "+l,St.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new St("Unknown option "+s,St.ERR_BAD_OPTION)}}const FE={assertOptions:Dte,validators:GN},ml=FE.validators;let Au=class{constructor(e){this.defaults=e,this.interceptors={request:new TD,response:new TD}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ku(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:s}=t;r!==void 0&&FE.assertOptions(r,{silentJSONParsing:ml.transitional(ml.boolean),forcedJSONParsing:ml.transitional(ml.boolean),clarifyTimeoutError:ml.transitional(ml.boolean)},!1),i!=null&&(ye.isFunction(i)?t.paramsSerializer={serialize:i}:FE.assertOptions(i,{encode:ml.function,serialize:ml.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&ye.merge(s.common,s[t.method]);s&&ye.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),t.headers=Ii.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(t)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let u,h=0,d;if(!l){const p=[ID.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,c),d=p.length,u=Promise.resolve(t);h<d;)u=u.then(p[h++],p[h++]);return u}d=a.length;let f=t;for(h=0;h<d;){const p=a[h++],g=a[h++];try{f=p(f)}catch(y){g.call(this,y);break}}try{u=ID.call(this,f)}catch(p){return Promise.reject(p)}for(h=0,d=c.length;h<d;)u=u.then(c[h++],c[h++]);return u}getUri(e){e=ku(this.defaults,e);const t=S$(e.baseURL,e.url);return g$(t,e.params,e.paramsSerializer)}};ye.forEach(["delete","get","head","options"],function(e){Au.prototype[e]=function(t,r){return this.request(ku(r||{},{method:e,url:t,data:(r||{}).data}))}});ye.forEach(["post","put","patch"],function(e){function t(r){return function(s,o,a){return this.request(ku(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Au.prototype[e]=t(),Au.prototype[e+"Form"]=t(!0)});class HN{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Jf(s,o,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new HN(function(i){e=i}),cancel:e}}}function Ote(n){return function(t){return n.apply(null,t)}}function Fte(n){return ye.isObject(n)&&n.isAxiosError===!0}const kE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kE).forEach(([n,e])=>{kE[e]=n});function A$(n){const e=new Au(n),t=i$(Au.prototype.request,e);return ye.extend(t,Au.prototype,e,{allOwnKeys:!0}),ye.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return A$(ku(n,i))},t}const ur=A$(cy);ur.Axios=Au;ur.CanceledError=Jf;ur.CancelToken=HN;ur.isCancel=_$;ur.VERSION=E$;ur.toFormData=cb;ur.AxiosError=St;ur.Cancel=ur.CanceledError;ur.all=function(e){return Promise.all(e)};ur.spread=Ote;ur.isAxiosError=Fte;ur.mergeConfig=ku;ur.AxiosHeaders=Ii;ur.formToJSON=n=>v$(ye.isHTMLForm(n)?new FormData(n):n);ur.getAdapter=M$.getAdapter;ur.HttpStatusCode=kE;ur.default=ur;const C$=ur.create({baseURL:"https://ddragon.leagueoflegends.com/cdn",headers:{"Content-Type":"application/json"}}),kte=async n=>await C$.get(`/14.20.1/data/${n.language}/champion.json`).then(e=>e.data),Ute=async n=>await C$.get(`/14.20.1/data/${n.language}/champion/${n.champId}.json`,{}).then(e=>e.data);var uy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Uu=typeof window>"u"||"Deno"in globalThis;function xs(){}function Bte(n,e){return typeof n=="function"?n(e):n}function UE(n){return typeof n=="number"&&n>=0&&n!==1/0}function R$(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Fd(n,e){return typeof n=="function"?n(e):n}function oo(n,e){return typeof n=="function"?n(e):n}function DD(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==WN(o,e.options))return!1}else if(!Rg(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function OD(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(Cg(e.options.mutationKey)!==Cg(s))return!1}else if(!Rg(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function WN(n,e){return((e==null?void 0:e.queryKeyHashFn)||Cg)(n)}function Cg(n){return JSON.stringify(n,(e,t)=>zE(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function Rg(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Rg(n[t],e[t])):!1}function N$(n,e){if(n===e)return n;const t=FD(n)&&FD(e);if(t||zE(n)&&zE(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{};let l=0;for(let c=0;c<o;c++){const u=t?c:s[c];(!t&&r.includes(u)||t)&&n[u]===void 0&&e[u]===void 0?(a[u]=void 0,l++):(a[u]=N$(n[u],e[u]),a[u]===n[u]&&n[u]!==void 0&&l++)}return i===o&&l===i?n:a}return e}function BE(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function FD(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function zE(n){if(!kD(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!kD(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function kD(n){return Object.prototype.toString.call(n)==="[object Object]"}function zte(n){return new Promise(e=>{setTimeout(e,n)})}function $E(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?N$(n,e):e}function $te(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function Vte(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var jN=Symbol();function P$(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===jN?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var gu,ql,Yd,n3,Gte=(n3=class extends uy{constructor(){super();yt(this,gu);yt(this,ql);yt(this,Yd);tt(this,Yd,e=>{if(!Uu&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ee(this,ql)||this.setEventListener(ee(this,Yd))}onUnsubscribe(){var e;this.hasListeners()||((e=ee(this,ql))==null||e.call(this),tt(this,ql,void 0))}setEventListener(e){var t;tt(this,Yd,e),(t=ee(this,ql))==null||t.call(this),tt(this,ql,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ee(this,gu)!==e&&(tt(this,gu,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ee(this,gu)=="boolean"?ee(this,gu):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},gu=new WeakMap,ql=new WeakMap,Yd=new WeakMap,n3),qN=new Gte,Qd,Xl,Zd,r3,Hte=(r3=class extends uy{constructor(){super();yt(this,Qd,!0);yt(this,Xl);yt(this,Zd);tt(this,Zd,e=>{if(!Uu&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ee(this,Xl)||this.setEventListener(ee(this,Zd))}onUnsubscribe(){var e;this.hasListeners()||((e=ee(this,Xl))==null||e.call(this),tt(this,Xl,void 0))}setEventListener(e){var t;tt(this,Zd,e),(t=ee(this,Xl))==null||t.call(this),tt(this,Xl,e(this.setOnline.bind(this)))}setOnline(e){ee(this,Qd)!==e&&(tt(this,Qd,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ee(this,Qd)}},Qd=new WeakMap,Xl=new WeakMap,Zd=new WeakMap,r3),hx=new Hte;function VE(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function Wte(n){return Math.min(1e3*2**n,3e4)}function I$(n){return(n??"online")==="online"?hx.isOnline():!0}var L$=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function aw(n){return n instanceof L$}function D$(n){let e=!1,t=0,r=!1,i;const s=VE(),o=g=>{var y;r||(d(new L$(g)),(y=n.abort)==null||y.call(n))},a=()=>{e=!0},l=()=>{e=!1},c=()=>qN.isFocused()&&(n.networkMode==="always"||hx.isOnline())&&n.canRun(),u=()=>I$(n.networkMode)&&n.canRun(),h=g=>{var y;r||(r=!0,(y=n.onSuccess)==null||y.call(n,g),i==null||i(),s.resolve(g))},d=g=>{var y;r||(r=!0,(y=n.onError)==null||y.call(n,g),i==null||i(),s.reject(g))},f=()=>new Promise(g=>{var y;i=m=>{(r||c())&&g(m)},(y=n.onPause)==null||y.call(n)}).then(()=>{var g;i=void 0,r||(g=n.onContinue)==null||g.call(n)}),p=()=>{if(r)return;let g;const y=t===0?n.initialPromise:void 0;try{g=y??n.fn()}catch(m){g=Promise.reject(m)}Promise.resolve(g).then(h).catch(m=>{var T;if(r)return;const _=n.retry??(Uu?0:3),v=n.retryDelay??Wte,x=typeof v=="function"?v(t,m):v,b=_===!0||typeof _=="number"&&t<_||typeof _=="function"&&_(t,m);if(e||!b){d(m);return}t++,(T=n.onFail)==null||T.call(n,t,m),zte(x).then(()=>c()?void 0:f()).then(()=>{e?d(m):p()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?p():f().then(p),s)}}function jte(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=a=>setTimeout(a,0);const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Or=jte(),yu,i3,O$=(i3=class{constructor(){yt(this,yu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),UE(this.gcTime)&&tt(this,yu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Uu?1/0:5*60*1e3))}clearGcTimeout(){ee(this,yu)&&(clearTimeout(ee(this,yu)),tt(this,yu,void 0))}},yu=new WeakMap,i3),Jd,ef,_s,qr,jg,vu,no,ya,s3,qte=(s3=class extends O${constructor(e){super();yt(this,no);yt(this,Jd);yt(this,ef);yt(this,_s);yt(this,qr);yt(this,jg);yt(this,vu);tt(this,vu,!1),tt(this,jg,e.defaultOptions),this.setOptions(e.options),this.observers=[],tt(this,_s,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,tt(this,Jd,Xte(this.options)),this.state=e.state??ee(this,Jd),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ee(this,qr))==null?void 0:e.promise}setOptions(e){this.options={...ee(this,jg),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ee(this,_s).remove(this)}setData(e,t){const r=$E(this.state.data,e,this.options);return kt(this,no,ya).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){kt(this,no,ya).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=ee(this,qr))==null?void 0:r.promise;return(i=ee(this,qr))==null||i.cancel(e),t?t.then(xs).catch(xs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ee(this,Jd))}isActive(){return this.observers.some(e=>oo(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jN||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!R$(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=ee(this,qr))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=ee(this,qr))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ee(this,_s).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(ee(this,qr)&&(ee(this,vu)?ee(this,qr).cancel({revert:!0}):ee(this,qr).cancelRetry()),this.scheduleGc()),ee(this,_s).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||kt(this,no,ya).call(this,{type:"invalidate"})}fetch(e,t){var l,c,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(ee(this,qr))return ee(this,qr).continueRetry(),ee(this,qr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(d=>d.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(tt(this,vu,!0),r.signal)})},s=()=>{const h=P$(this.options,t),d={queryKey:this.queryKey,meta:this.meta};return i(d),tt(this,vu,!1),this.options.persister?this.options.persister(h,d,this):h(d)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};i(o),(l=this.options.behavior)==null||l.onFetch(o,this),tt(this,ef,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=o.fetchOptions)==null?void 0:c.meta))&&kt(this,no,ya).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const a=h=>{var d,f,p,g;aw(h)&&h.silent||kt(this,no,ya).call(this,{type:"error",error:h}),aw(h)||((f=(d=ee(this,_s).config).onError)==null||f.call(d,h,this),(g=(p=ee(this,_s).config).onSettled)==null||g.call(p,this.state.data,h,this)),this.scheduleGc()};return tt(this,qr,D$({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var d,f,p,g;if(h===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){a(y);return}(f=(d=ee(this,_s).config).onSuccess)==null||f.call(d,h,this),(g=(p=ee(this,_s).config).onSettled)==null||g.call(p,h,this.state.error,this),this.scheduleGc()},onError:a,onFail:(h,d)=>{kt(this,no,ya).call(this,{type:"failed",failureCount:h,error:d})},onPause:()=>{kt(this,no,ya).call(this,{type:"pause"})},onContinue:()=>{kt(this,no,ya).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),ee(this,qr).start()}},Jd=new WeakMap,ef=new WeakMap,_s=new WeakMap,qr=new WeakMap,jg=new WeakMap,vu=new WeakMap,no=new WeakSet,ya=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...F$(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return aw(i)&&i.revert&&ee(this,ef)?{...ee(this,ef),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Or.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ee(this,_s).notify({query:this,type:"updated",action:e})})},s3);function F$(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:I$(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function Xte(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Io,o3,Kte=(o3=class extends uy{constructor(e={}){super();yt(this,Io);this.config=e,tt(this,Io,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??WN(i,t);let o=this.get(s);return o||(o=new qte({cache:this,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ee(this,Io).has(e.queryHash)||(ee(this,Io).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ee(this,Io).get(e.queryHash);t&&(e.destroy(),t===e&&ee(this,Io).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Or.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ee(this,Io).get(e)}getAll(){return[...ee(this,Io).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>DD(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>DD(e,r)):t}notify(e){Or.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Or.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Or.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Io=new WeakMap,o3),Lo,oi,_u,Do,Ol,a3,Yte=(a3=class extends O${constructor(e){super();yt(this,Do);yt(this,Lo);yt(this,oi);yt(this,_u);this.mutationId=e.mutationId,tt(this,oi,e.mutationCache),tt(this,Lo,[]),this.state=e.state||Qte(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ee(this,Lo).includes(e)||(ee(this,Lo).push(e),this.clearGcTimeout(),ee(this,oi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){tt(this,Lo,ee(this,Lo).filter(t=>t!==e)),this.scheduleGc(),ee(this,oi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ee(this,Lo).length||(this.state.status==="pending"?this.scheduleGc():ee(this,oi).remove(this))}continue(){var e;return((e=ee(this,_u))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,s,o,a,l,c,u,h,d,f,p,g,y,m,_,v,x,b,T,w;tt(this,_u,D$({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(M,C)=>{kt(this,Do,Ol).call(this,{type:"failed",failureCount:M,error:C})},onPause:()=>{kt(this,Do,Ol).call(this,{type:"pause"})},onContinue:()=>{kt(this,Do,Ol).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ee(this,oi).canRun(this)}));const t=this.state.status==="pending",r=!ee(this,_u).canStart();try{if(!t){kt(this,Do,Ol).call(this,{type:"pending",variables:e,isPaused:r}),await((s=(i=ee(this,oi).config).onMutate)==null?void 0:s.call(i,e,this));const C=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));C!==this.state.context&&kt(this,Do,Ol).call(this,{type:"pending",context:C,variables:e,isPaused:r})}const M=await ee(this,_u).start();return await((c=(l=ee(this,oi).config).onSuccess)==null?void 0:c.call(l,M,e,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,M,e,this.state.context)),await((f=(d=ee(this,oi).config).onSettled)==null?void 0:f.call(d,M,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,M,null,e,this.state.context)),kt(this,Do,Ol).call(this,{type:"success",data:M}),M}catch(M){try{throw await((m=(y=ee(this,oi).config).onError)==null?void 0:m.call(y,M,e,this.state.context,this)),await((v=(_=this.options).onError)==null?void 0:v.call(_,M,e,this.state.context)),await((b=(x=ee(this,oi).config).onSettled)==null?void 0:b.call(x,void 0,M,this.state.variables,this.state.context,this)),await((w=(T=this.options).onSettled)==null?void 0:w.call(T,void 0,M,e,this.state.context)),M}finally{kt(this,Do,Ol).call(this,{type:"error",error:M})}}finally{ee(this,oi).runNext(this)}}},Lo=new WeakMap,oi=new WeakMap,_u=new WeakMap,Do=new WeakSet,Ol=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Or.batch(()=>{ee(this,Lo).forEach(r=>{r.onMutationUpdate(e)}),ee(this,oi).notify({mutation:this,type:"updated",action:e})})},a3);function Qte(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ji,qg,l3,Zte=(l3=class extends uy{constructor(e={}){super();yt(this,Ji);yt(this,qg);this.config=e,tt(this,Ji,new Map),tt(this,qg,Date.now())}build(e,t,r){const i=new Yte({mutationCache:this,mutationId:++Dy(this,qg)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){const t=l0(e),r=ee(this,Ji).get(t)??[];r.push(e),ee(this,Ji).set(t,r),this.notify({type:"added",mutation:e})}remove(e){var r;const t=l0(e);if(ee(this,Ji).has(t)){const i=(r=ee(this,Ji).get(t))==null?void 0:r.filter(s=>s!==e);i&&(i.length===0?ee(this,Ji).delete(t):ee(this,Ji).set(t,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const t=(r=ee(this,Ji).get(l0(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!t||t===e}runNext(e){var r;const t=(r=ee(this,Ji).get(l0(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){Or.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...ee(this,Ji).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(r=>OD(t,r))}findAll(e={}){return this.getAll().filter(t=>OD(e,t))}notify(e){Or.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Or.batch(()=>Promise.all(e.map(t=>t.continue().catch(xs))))}},Ji=new WeakMap,qg=new WeakMap,l3);function l0(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function UD(n){return{onFetch:(e,t)=>{var u,h,d,f,p;const r=e.options,i=(d=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:d.direction,s=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let g=!1;const y=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},m=P$(e.options,e.fetchOptions),_=async(v,x,b)=>{if(g)return Promise.reject();if(x==null&&v.pages.length)return Promise.resolve(v);const T={queryKey:e.queryKey,pageParam:x,direction:b?"backward":"forward",meta:e.options.meta};y(T);const w=await m(T),{maxPages:M}=e.options,C=b?Vte:$te;return{pages:C(v.pages,w,M),pageParams:C(v.pageParams,x,M)}};if(i&&s.length){const v=i==="backward",x=v?Jte:BD,b={pages:s,pageParams:o},T=x(r,b);a=await _(b,T,v)}else{const v=n??s.length;do{const x=l===0?o[0]??r.initialPageParam:BD(r,a);if(l>0&&x==null)break;a=await _(a,x),l++}while(l<v)}return a};e.options.persister?e.fetchFn=()=>{var g,y;return(y=(g=e.options).persister)==null?void 0:y.call(g,c,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=c}}}function BD(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function Jte(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var Hn,Kl,Yl,tf,nf,Ql,rf,sf,c3,ene=(c3=class{constructor(n={}){yt(this,Hn);yt(this,Kl);yt(this,Yl);yt(this,tf);yt(this,nf);yt(this,Ql);yt(this,rf);yt(this,sf);tt(this,Hn,n.queryCache||new Kte),tt(this,Kl,n.mutationCache||new Zte),tt(this,Yl,n.defaultOptions||{}),tt(this,tf,new Map),tt(this,nf,new Map),tt(this,Ql,0)}mount(){Dy(this,Ql)._++,ee(this,Ql)===1&&(tt(this,rf,qN.subscribe(async n=>{n&&(await this.resumePausedMutations(),ee(this,Hn).onFocus())})),tt(this,sf,hx.subscribe(async n=>{n&&(await this.resumePausedMutations(),ee(this,Hn).onOnline())})))}unmount(){var n,e;Dy(this,Ql)._--,ee(this,Ql)===0&&((n=ee(this,rf))==null||n.call(this),tt(this,rf,void 0),(e=ee(this,sf))==null||e.call(this),tt(this,sf,void 0))}isFetching(n){return ee(this,Hn).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ee(this,Kl).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ee(this,Hn).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.getQueryData(n.queryKey);if(e===void 0)return this.fetchQuery(n);{const t=this.defaultQueryOptions(n),r=ee(this,Hn).build(this,t);return n.revalidateIfStale&&r.isStaleByTime(Fd(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(e)}}getQueriesData(n){return ee(this,Hn).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=ee(this,Hn).get(r.queryHash),s=i==null?void 0:i.state.data,o=Bte(e,s);if(o!==void 0)return ee(this,Hn).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Or.batch(()=>ee(this,Hn).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ee(this,Hn).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ee(this,Hn);Or.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ee(this,Hn),r={type:"active",...n};return Or.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(n={},e={}){const t={revert:!0,...e},r=Or.batch(()=>ee(this,Hn).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(xs).catch(xs)}invalidateQueries(n={},e={}){return Or.batch(()=>{if(ee(this,Hn).findAll(n).forEach(r=>{r.invalidate()}),n.refetchType==="none")return Promise.resolve();const t={...n,type:n.refetchType??n.type??"active"};return this.refetchQueries(t,e)})}refetchQueries(n={},e){const t={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Or.batch(()=>ee(this,Hn).findAll(n).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(xs)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(xs)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ee(this,Hn).build(this,e);return t.isStaleByTime(Fd(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(xs).catch(xs)}fetchInfiniteQuery(n){return n.behavior=UD(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(xs).catch(xs)}ensureInfiniteQueryData(n){return n.behavior=UD(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return hx.isOnline()?ee(this,Kl).resumePausedMutations():Promise.resolve()}getQueryCache(){return ee(this,Hn)}getMutationCache(){return ee(this,Kl)}getDefaultOptions(){return ee(this,Yl)}setDefaultOptions(n){tt(this,Yl,n)}setQueryDefaults(n,e){ee(this,tf).set(Cg(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ee(this,tf).values()];let t={};return e.forEach(r=>{Rg(n,r.queryKey)&&(t={...t,...r.defaultOptions})}),t}setMutationDefaults(n,e){ee(this,nf).set(Cg(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ee(this,nf).values()];let t={};return e.forEach(r=>{Rg(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ee(this,Yl).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=WN(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===jN&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ee(this,Yl).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ee(this,Hn).clear(),ee(this,Kl).clear()}},Hn=new WeakMap,Kl=new WeakMap,Yl=new WeakMap,tf=new WeakMap,nf=new WeakMap,Ql=new WeakMap,rf=new WeakMap,sf=new WeakMap,c3),_i,Ut,Xg,ai,xu,of,Zl,Oo,Kg,af,lf,Su,bu,Jl,cf,nn,_m,GE,HE,WE,jE,qE,XE,KE,k$,u3,tne=(u3=class extends uy{constructor(e,t){super();yt(this,nn);yt(this,_i);yt(this,Ut);yt(this,Xg);yt(this,ai);yt(this,xu);yt(this,of);yt(this,Zl);yt(this,Oo);yt(this,Kg);yt(this,af);yt(this,lf);yt(this,Su);yt(this,bu);yt(this,Jl);yt(this,cf,new Set);this.options=t,tt(this,_i,e),tt(this,Oo,null),tt(this,Zl,VE()),this.options.experimental_prefetchInRender||ee(this,Zl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ee(this,Ut).addObserver(this),zD(ee(this,Ut),this.options)?kt(this,nn,_m).call(this):this.updateResult(),kt(this,nn,jE).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return YE(ee(this,Ut),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return YE(ee(this,Ut),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,kt(this,nn,qE).call(this),kt(this,nn,XE).call(this),ee(this,Ut).removeObserver(this)}setOptions(e,t){const r=this.options,i=ee(this,Ut);if(this.options=ee(this,_i).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof oo(this.options.enabled,ee(this,Ut))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");kt(this,nn,KE).call(this),ee(this,Ut).setOptions(this.options),r._defaulted&&!BE(this.options,r)&&ee(this,_i).getQueryCache().notify({type:"observerOptionsUpdated",query:ee(this,Ut),observer:this});const s=this.hasListeners();s&&$D(ee(this,Ut),i,this.options,r)&&kt(this,nn,_m).call(this),this.updateResult(t),s&&(ee(this,Ut)!==i||oo(this.options.enabled,ee(this,Ut))!==oo(r.enabled,ee(this,Ut))||Fd(this.options.staleTime,ee(this,Ut))!==Fd(r.staleTime,ee(this,Ut)))&&kt(this,nn,GE).call(this);const o=kt(this,nn,HE).call(this);s&&(ee(this,Ut)!==i||oo(this.options.enabled,ee(this,Ut))!==oo(r.enabled,ee(this,Ut))||o!==ee(this,Jl))&&kt(this,nn,WE).call(this,o)}getOptimisticResult(e){const t=ee(this,_i).getQueryCache().build(ee(this,_i),e),r=this.createResult(t,e);return rne(this,r)&&(tt(this,ai,r),tt(this,of,this.options),tt(this,xu,ee(this,Ut).state)),r}getCurrentResult(){return ee(this,ai)}trackResult(e,t){const r={};return Object.keys(e).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),t==null||t(i),e[i])})}),r}trackProp(e){ee(this,cf).add(e)}getCurrentQuery(){return ee(this,Ut)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=ee(this,_i).defaultQueryOptions(e),r=ee(this,_i).getQueryCache().build(ee(this,_i),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return kt(this,nn,_m).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ee(this,ai)))}createResult(e,t){var M;const r=ee(this,Ut),i=this.options,s=ee(this,ai),o=ee(this,xu),a=ee(this,of),c=e!==r?e.state:ee(this,Xg),{state:u}=e;let h={...u},d=!1,f;if(t._optimisticResults){const C=this.hasListeners(),S=!C&&zD(e,t),E=C&&$D(e,r,t,i);(S||E)&&(h={...h,...F$(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:y}=h;if(t.select&&h.data!==void 0)if(s&&h.data===(o==null?void 0:o.data)&&t.select===ee(this,Kg))f=ee(this,af);else try{tt(this,Kg,t.select),f=t.select(h.data),f=$E(s==null?void 0:s.data,f,t),tt(this,af,f),tt(this,Oo,null)}catch(C){tt(this,Oo,C)}else f=h.data;if(t.placeholderData!==void 0&&f===void 0&&y==="pending"){let C;if(s!=null&&s.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData))C=s.data;else if(C=typeof t.placeholderData=="function"?t.placeholderData((M=ee(this,lf))==null?void 0:M.state.data,ee(this,lf)):t.placeholderData,t.select&&C!==void 0)try{C=t.select(C),tt(this,Oo,null)}catch(S){tt(this,Oo,S)}C!==void 0&&(y="success",f=$E(s==null?void 0:s.data,C,t),d=!0)}ee(this,Oo)&&(p=ee(this,Oo),f=ee(this,af),g=Date.now(),y="error");const m=h.fetchStatus==="fetching",_=y==="pending",v=y==="error",x=_&&m,b=f!==void 0,w={status:y,fetchStatus:h.fetchStatus,isPending:_,isSuccess:y==="success",isError:v,isInitialLoading:x,isLoading:x,data:f,dataUpdatedAt:h.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:m,isRefetching:m&&!_,isLoadingError:v&&!b,isPaused:h.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:v&&b,isStale:XN(e,t),refetch:this.refetch,promise:ee(this,Zl)};if(this.options.experimental_prefetchInRender){const C=I=>{w.status==="error"?I.reject(w.error):w.data!==void 0&&I.resolve(w.data)},S=()=>{const I=tt(this,Zl,w.promise=VE());C(I)},E=ee(this,Zl);switch(E.status){case"pending":e.queryHash===r.queryHash&&C(E);break;case"fulfilled":(w.status==="error"||w.data!==E.value)&&S();break;case"rejected":(w.status!=="error"||w.error!==E.reason)&&S();break}}return w}updateResult(e){const t=ee(this,ai),r=this.createResult(ee(this,Ut),this.options);if(tt(this,xu,ee(this,Ut).state),tt(this,of,this.options),ee(this,xu).data!==void 0&&tt(this,lf,ee(this,Ut)),BE(r,t))return;tt(this,ai,r);const i={},s=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!ee(this,cf).size)return!0;const l=new Set(a??ee(this,cf));return this.options.throwOnError&&l.add("error"),Object.keys(ee(this,ai)).some(c=>{const u=c;return ee(this,ai)[u]!==t[u]&&l.has(u)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),kt(this,nn,k$).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&kt(this,nn,jE).call(this)}},_i=new WeakMap,Ut=new WeakMap,Xg=new WeakMap,ai=new WeakMap,xu=new WeakMap,of=new WeakMap,Zl=new WeakMap,Oo=new WeakMap,Kg=new WeakMap,af=new WeakMap,lf=new WeakMap,Su=new WeakMap,bu=new WeakMap,Jl=new WeakMap,cf=new WeakMap,nn=new WeakSet,_m=function(e){kt(this,nn,KE).call(this);let t=ee(this,Ut).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(xs)),t},GE=function(){kt(this,nn,qE).call(this);const e=Fd(this.options.staleTime,ee(this,Ut));if(Uu||ee(this,ai).isStale||!UE(e))return;const r=R$(ee(this,ai).dataUpdatedAt,e)+1;tt(this,Su,setTimeout(()=>{ee(this,ai).isStale||this.updateResult()},r))},HE=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ee(this,Ut)):this.options.refetchInterval)??!1},WE=function(e){kt(this,nn,XE).call(this),tt(this,Jl,e),!(Uu||oo(this.options.enabled,ee(this,Ut))===!1||!UE(ee(this,Jl))||ee(this,Jl)===0)&&tt(this,bu,setInterval(()=>{(this.options.refetchIntervalInBackground||qN.isFocused())&&kt(this,nn,_m).call(this)},ee(this,Jl)))},jE=function(){kt(this,nn,GE).call(this),kt(this,nn,WE).call(this,kt(this,nn,HE).call(this))},qE=function(){ee(this,Su)&&(clearTimeout(ee(this,Su)),tt(this,Su,void 0))},XE=function(){ee(this,bu)&&(clearInterval(ee(this,bu)),tt(this,bu,void 0))},KE=function(){const e=ee(this,_i).getQueryCache().build(ee(this,_i),this.options);if(e===ee(this,Ut))return;const t=ee(this,Ut);tt(this,Ut,e),tt(this,Xg,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},k$=function(e){Or.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(ee(this,ai))}),ee(this,_i).getQueryCache().notify({query:ee(this,Ut),type:"observerResultsUpdated"})})},u3);function nne(n,e){return oo(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function zD(n,e){return nne(n,e)||n.state.data!==void 0&&YE(n,e,e.refetchOnMount)}function YE(n,e,t){if(oo(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&XN(n,e)}return!1}function $D(n,e,t,r){return(n!==e||oo(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&XN(n,t)}function XN(n,e){return oo(e.enabled,n)!==!1&&n.isStaleByTime(Fd(e.staleTime,n))}function rne(n,e){return!BE(n.getCurrentResult(),e)}var U$=P.createContext(void 0),ine=n=>{const e=P.useContext(U$);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},sne=({client:n,children:e})=>(P.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),q.jsx(U$.Provider,{value:n,children:e})),B$=P.createContext(!1),one=()=>P.useContext(B$);B$.Provider;function ane(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var lne=P.createContext(ane()),cne=()=>P.useContext(lne);function une(n,e){return typeof n=="function"?n(...e):!!n}function hne(){}var dne=(n,e)=>{(n.suspense||n.throwOnError)&&(e.isReset()||(n.retryOnMount=!1))},fne=n=>{P.useEffect(()=>{n.clearReset()},[n])},pne=({result:n,errorResetBoundary:e,throwOnError:t,query:r})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&une(t,[n.error,r]),mne=n=>{n.suspense&&(n.staleTime===void 0&&(n.staleTime=1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},gne=(n,e)=>n.isLoading&&n.isFetching&&!e,yne=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,VD=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function vne(n,e,t){var u,h,d,f,p;const r=ine(),i=one(),s=cne(),o=r.defaultQueryOptions(n);(h=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||h.call(u,o),o._optimisticResults=i?"isRestoring":"optimistic",mne(o),dne(o,s),fne(s);const a=!r.getQueryCache().get(o.queryHash),[l]=P.useState(()=>new e(r,o)),c=l.getOptimisticResult(o);if(P.useSyncExternalStore(P.useCallback(g=>{const y=i?()=>{}:l.subscribe(Or.batchCalls(g));return l.updateResult(),y},[l,i]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),P.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),yne(o,c))throw VD(o,l,s);if(pne({result:c,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw c.error;if((f=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_afterQuery)==null||f.call(d,o,c),o.experimental_prefetchInRender&&!Uu&&gne(c,i)){const g=a?VD(o,l,s):(p=r.getQueryCache().get(o.queryHash))==null?void 0:p.promise;g==null||g.catch(hne).finally(()=>{l.hasListeners()||l.updateResult()})}return o.notifyOnChangeProps?c:l.trackResult(c)}function z$(n,e){return vne(n,tne)}const _ne=n=>z$({queryKey:["championList",n],queryFn:async()=>await kte(n)}),xne=(n,e)=>z$({queryKey:["championDetail",n],queryFn:async()=>await Ute(n),enabled:!!n.champId});var Ng=(n=>(n.ERROR="error",n.SUCCESS="success",n.INFO="info",n))(Ng||{}),$$={};function Sne(n){const e=new Error(n);if(e.stack===void 0)try{throw e}catch{}return e}var bne=Sne,Rt=bne;function wne(n){return!!n&&typeof n.then=="function"}var En=wne;function Tne(n,e){if(n!=null)return n;throw Rt(e??"Got unexpected null or undefined")}var Ln=Tne;function bt(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class hb{getValue(){throw Rt("BaseLoadable")}toPromise(){throw Rt("BaseLoadable")}valueMaybe(){throw Rt("BaseLoadable")}valueOrThrow(){throw Rt(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw Rt("BaseLoadable")}promiseOrThrow(){throw Rt(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw Rt("BaseLoadable")}errorOrThrow(){throw Rt(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw Rt("BaseLoadable")}}class Mne extends hb{constructor(e){super(),bt(this,"state","hasValue"),bt(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const t=e(this.contents);return En(t)?Bu(t):Mf(t)?t:hy(t)}catch(t){return En(t)?Bu(t.next(()=>this.map(e))):db(t)}}}class Ene extends hb{constructor(e){super(),bt(this,"state","hasError"),bt(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class V$ extends hb{constructor(e){super(),bt(this,"state","loading"),bt(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return Bu(this.contents.then(t=>{const r=e(t);if(Mf(r)){const i=r;switch(i.state){case"hasValue":return i.contents;case"hasError":throw i.contents;case"loading":return i.contents}}return r}).catch(t=>{if(En(t))return t.then(()=>this.map(e).contents);throw t}))}}function hy(n){return Object.freeze(new Mne(n))}function db(n){return Object.freeze(new Ene(n))}function Bu(n){return Object.freeze(new V$(n))}function G$(){return Object.freeze(new V$(new Promise(()=>{})))}function Ane(n){return n.every(e=>e.state==="hasValue")?hy(n.map(e=>e.contents)):n.some(e=>e.state==="hasError")?db(Ln(n.find(e=>e.state==="hasError"),"Invalid loadable passed to loadableAll").contents):Bu(Promise.all(n.map(e=>e.contents)))}function H$(n){const t=(Array.isArray(n)?n:Object.getOwnPropertyNames(n).map(i=>n[i])).map(i=>Mf(i)?i:En(i)?Bu(i):hy(i)),r=Ane(t);return Array.isArray(n)?r:r.map(i=>Object.getOwnPropertyNames(n).reduce((s,o,a)=>({...s,[o]:i[a]}),{}))}function Mf(n){return n instanceof hb}const Cne={of:n=>En(n)?Bu(n):Mf(n)?n:hy(n),error:n=>db(n),loading:()=>G$(),all:H$,isLoadable:Mf};var Ju={loadableWithValue:hy,loadableWithError:db,loadableWithPromise:Bu,loadableLoading:G$,loadableAll:H$,isLoadable:Mf,RecoilLoadable:Cne},Rne=Ju.loadableWithValue,Nne=Ju.loadableWithError,Pne=Ju.loadableWithPromise,Ine=Ju.loadableLoading,Lne=Ju.loadableAll,Dne=Ju.isLoadable,One=Ju.RecoilLoadable,dy=Object.freeze({__proto__:null,loadableWithValue:Rne,loadableWithError:Nne,loadableWithPromise:Pne,loadableLoading:Ine,loadableAll:Lne,isLoadable:Dne,RecoilLoadable:One});const QE={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};function Fne(n,e){var t,r;const i=(t=$$[n])===null||t===void 0||(r=t.toLowerCase())===null||r===void 0?void 0:r.trim();if(i==null||i==="")return;if(!["true","false"].includes(i))throw Rt(`process.env.${n} value must be 'true', 'false', or empty: ${i}`);e(i==="true")}function kne(n,e){var t;const r=(t=$$[n])===null||t===void 0?void 0:t.trim();r==null||r===""||e(r.split(/\s*,\s*|\s+/))}function Une(){var n;typeof process>"u"||((n=process)===null||n===void 0?void 0:n.env)!=null&&(Fne("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",e=>{QE.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e}),kne("RECOIL_GKS_ENABLED",e=>{e.forEach(t=>{QE.RECOIL_GKS_ENABLED.add(t)})}))}Une();var ep=QE;function fb(n){return ep.RECOIL_GKS_ENABLED.has(n)}fb.setPass=n=>{ep.RECOIL_GKS_ENABLED.add(n)};fb.setFail=n=>{ep.RECOIL_GKS_ENABLED.delete(n)};fb.clear=()=>{ep.RECOIL_GKS_ENABLED.clear()};var vn=fb;function Bne(n,e,{error:t}={}){return null}var zne=Bne,KN=zne,lw,cw,uw;const $ne=(lw=Et.createMutableSource)!==null&&lw!==void 0?lw:Et.unstable_createMutableSource,W$=(cw=Et.useMutableSource)!==null&&cw!==void 0?cw:Et.unstable_useMutableSource,j$=(uw=Et.useSyncExternalStore)!==null&&uw!==void 0?uw:Et.unstable_useSyncExternalStore;function Vne(){var n;const{ReactCurrentDispatcher:e,ReactCurrentOwner:t}=Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;return((n=e==null?void 0:e.current)!==null&&n!==void 0?n:t.currentDispatcher).useSyncExternalStore!=null}function Gne(){return vn("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:vn("recoil_sync_external_store")&&j$!=null?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:vn("recoil_mutable_source")&&W$!=null&&typeof window<"u"&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?vn("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:vn("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}}function Hne(){return!1}var fy={createMutableSource:$ne,useMutableSource:W$,useSyncExternalStore:j$,currentRendererSupportsUseSyncExternalStore:Vne,reactMode:Gne,isFastRefreshEnabled:Hne};class YN{constructor(e){bt(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class q$ extends YN{}class X$ extends YN{}function Wne(n){return n instanceof q$||n instanceof X$}var pb={AbstractRecoilValue:YN,RecoilState:q$,RecoilValueReadOnly:X$,isRecoilValue:Wne},jne=pb.AbstractRecoilValue,qne=pb.RecoilState,Xne=pb.RecoilValueReadOnly,Kne=pb.isRecoilValue,Ef=Object.freeze({__proto__:null,AbstractRecoilValue:jne,RecoilState:qne,RecoilValueReadOnly:Xne,isRecoilValue:Kne});function Yne(n,e){return function*(){let t=0;for(const r of n)yield e(r,t++)}()}var mb=Yne;class K${}const Qne=new K$,zu=new Map,QN=new Map;function Zne(n){return mb(n,e=>Ln(QN.get(e)))}function Jne(n){if(zu.has(n)){const e=`Duplicate atom key "${n}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(e)}}function ere(n){ep.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&Jne(n.key),zu.set(n.key,n);const e=n.set==null?new Ef.RecoilValueReadOnly(n.key):new Ef.RecoilState(n.key);return QN.set(n.key,e),e}class Y$ extends Error{}function tre(n){const e=zu.get(n);if(e==null)throw new Y$(`Missing definition for RecoilValue: "${n}""`);return e}function nre(n){return zu.get(n)}const dx=new Map;function rre(n){var e;if(!vn("recoil_memory_managament_2020"))return;const t=zu.get(n);if(t!=null&&(e=t.shouldDeleteConfigOnRelease)!==null&&e!==void 0&&e.call(t)){var r;zu.delete(n),(r=Q$(n))===null||r===void 0||r(),dx.delete(n)}}function ire(n,e){vn("recoil_memory_managament_2020")&&(e===void 0?dx.delete(n):dx.set(n,e))}function Q$(n){return dx.get(n)}var Bi={nodes:zu,recoilValues:QN,registerNode:ere,getNode:tre,getNodeMaybe:nre,deleteNodeConfigIfPossible:rre,setConfigDeletionHandler:ire,getConfigDeletionHandler:Q$,recoilValuesForKeys:Zne,NodeMissingError:Y$,DefaultValue:K$,DEFAULT_VALUE:Qne};function sre(n,e){e()}var ore={enqueueExecution:sre};function are(n,e){return e={exports:{}},n(e,e.exports),e.exports}var lre=are(function(n){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},t={},r=5,i=Math.pow(2,r),s=i-1,o=i/2,a=i/4,l={},c=function(H){return function(){return H}},u=t.hash=function(K){var H=typeof K>"u"?"undefined":e(K);if(H==="number")return K;H!=="string"&&(K+="");for(var ve=0,$=0,me=K.length;$<me;++$){var J=K.charCodeAt($);ve=(ve<<5)-ve+J|0}return ve},h=function(H){return H-=H>>1&1431655765,H=(H&858993459)+(H>>2&858993459),H=H+(H>>4)&252645135,H+=H>>8,H+=H>>16,H&127},d=function(H,ve){return ve>>>H&s},f=function(H){return 1<<H},p=function(H,ve){return h(H&ve-1)},g=function(H,ve,$,me){var J=me;if(!H){var he=me.length;J=new Array(he);for(var Ee=0;Ee<he;++Ee)J[Ee]=me[Ee]}return J[ve]=$,J},y=function(H,ve,$){var me=$.length-1,J=0,he=0,Ee=$;if(H)J=he=ve;else for(Ee=new Array(me);J<ve;)Ee[he++]=$[J++];for(++J;J<=me;)Ee[he++]=$[J++];return H&&(Ee.length=me),Ee},m=function(H,ve,$,me){var J=me.length;if(H){for(var he=J;he>=ve;)me[he--]=me[he];return me[ve]=$,me}for(var Ee=0,Re=0,qe=new Array(J+1);Ee<ve;)qe[Re++]=me[Ee++];for(qe[ve]=$;Ee<J;)qe[++Re]=me[Ee++];return qe},_=1,v=2,x=3,b=4,T={__hamt_isEmpty:!0},w=function(H){return H===T||H&&H.__hamt_isEmpty},M=function(H,ve,$,me){return{type:_,edit:H,hash:ve,key:$,value:me,_modify:L}},C=function(H,ve,$){return{type:v,edit:H,hash:ve,children:$,_modify:W}},S=function(H,ve,$){return{type:x,edit:H,mask:ve,children:$,_modify:z}},E=function(H,ve,$){return{type:b,edit:H,size:ve,children:$,_modify:X}},I=function(H){return H===T||H.type===_||H.type===v},F=function(H,ve,$,me,J){for(var he=[],Ee=me,Re=0,qe=0;Ee;++qe)Ee&1&&(he[qe]=J[Re++]),Ee>>>=1;return he[ve]=$,E(H,Re+1,he)},N=function(H,ve,$,me){for(var J=new Array(ve-1),he=0,Ee=0,Re=0,qe=me.length;Re<qe;++Re)if(Re!==$){var vt=me[Re];vt&&!w(vt)&&(J[he++]=vt,Ee|=1<<Re)}return S(H,Ee,J)},R=function K(H,ve,$,me,J,he){if($===J)return C(H,$,[he,me]);var Ee=d(ve,$),Re=d(ve,J);return S(H,f(Ee)|f(Re),Ee===Re?[K(H,ve+r,$,me,J,he)]:Ee<Re?[me,he]:[he,me])},D=function(H,ve,$,me,J,he,Ee,Re){for(var qe=J.length,vt=0;vt<qe;++vt){var on=J[vt];if($(Ee,on.key)){var dt=on.value,pn=he(dt);return pn===dt?J:pn===l?(--Re.value,y(H,vt,J)):g(H,vt,M(ve,me,Ee,pn),J)}}var Xn=he();return Xn===l?J:(++Re.value,g(H,qe,M(ve,me,Ee,Xn),J))},j=function(H,ve){return H===ve.edit},L=function(H,ve,$,me,J,he,Ee){if(ve(he,this.key)){var Re=me(this.value);return Re===this.value?this:Re===l?(--Ee.value,T):j(H,this)?(this.value=Re,this):M(H,J,he,Re)}var qe=me();return qe===l?this:(++Ee.value,R(H,$,this.hash,this,J,M(H,J,he,qe)))},W=function(H,ve,$,me,J,he,Ee){if(J===this.hash){var Re=j(H,this),qe=D(Re,H,ve,this.hash,this.children,me,he,Ee);return qe===this.children?this:qe.length>1?C(H,this.hash,qe):qe[0]}var vt=me();return vt===l?this:(++Ee.value,R(H,$,this.hash,this,J,M(H,J,he,vt)))},z=function(H,ve,$,me,J,he,Ee){var Re=this.mask,qe=this.children,vt=d($,J),on=f(vt),dt=p(Re,on),pn=Re&on,Xn=pn?qe[dt]:T,na=Xn._modify(H,ve,$+r,me,J,he,Ee);if(Xn===na)return this;var Fc=j(H,this),$i=Re,ra=void 0;if(pn&&w(na)){if($i&=~on,!$i)return T;if(qe.length<=2&&I(qe[dt^1]))return qe[dt^1];ra=y(Fc,dt,qe)}else if(!pn&&!w(na)){if(qe.length>=o)return F(H,vt,na,Re,qe);$i|=on,ra=m(Fc,dt,na,qe)}else ra=g(Fc,dt,na,qe);return Fc?(this.mask=$i,this.children=ra,this):S(H,$i,ra)},X=function(H,ve,$,me,J,he,Ee){var Re=this.size,qe=this.children,vt=d($,J),on=qe[vt],dt=(on||T)._modify(H,ve,$+r,me,J,he,Ee);if(on===dt)return this;var pn=j(H,this),Xn=void 0;if(w(on)&&!w(dt))++Re,Xn=g(pn,vt,dt,qe);else if(!w(on)&&w(dt)){if(--Re,Re<=a)return N(H,Re,vt,qe);Xn=g(pn,vt,T,qe)}else Xn=g(pn,vt,dt,qe);return pn?(this.size=Re,this.children=Xn,this):E(H,Re,Xn)};T._modify=function(K,H,ve,$,me,J,he){var Ee=$();return Ee===l?T:(++he.value,M(K,me,J,Ee))};function U(K,H,ve,$,me){this._editable=K,this._edit=H,this._config=ve,this._root=$,this._size=me}U.prototype.setTree=function(K,H){return this._editable?(this._root=K,this._size=H,this):K===this._root?this:new U(this._editable,this._edit,this._config,K,H)};var te=t.tryGetHash=function(K,H,ve,$){for(var me=$._root,J=0,he=$._config.keyEq;;)switch(me.type){case _:return he(ve,me.key)?me.value:K;case v:{if(H===me.hash)for(var Ee=me.children,Re=0,qe=Ee.length;Re<qe;++Re){var vt=Ee[Re];if(he(ve,vt.key))return vt.value}return K}case x:{var on=d(J,H),dt=f(on);if(me.mask&dt){me=me.children[p(me.mask,dt)],J+=r;break}return K}case b:{if(me=me.children[d(J,H)],me){J+=r;break}return K}default:return K}};U.prototype.tryGetHash=function(K,H,ve){return te(K,H,ve,this)};var k=t.tryGet=function(K,H,ve){return te(K,ve._config.hash(H),H,ve)};U.prototype.tryGet=function(K,H){return k(K,H,this)};var V=t.getHash=function(K,H,ve){return te(void 0,K,H,ve)};U.prototype.getHash=function(K,H){return V(K,H,this)},t.get=function(K,H){return te(void 0,H._config.hash(K),K,H)},U.prototype.get=function(K,H){return k(H,K,this)};var Z=t.has=function(K,H,ve){return te(l,K,H,ve)!==l};U.prototype.hasHash=function(K,H){return Z(K,H,this)};var le=t.has=function(K,H){return Z(H._config.hash(K),K,H)};U.prototype.has=function(K){return le(K,this)};var pe=function(H,ve){return H===ve};t.make=function(K){return new U(0,0,{keyEq:K&&K.keyEq||pe,hash:K&&K.hash||u},T,0)},t.empty=t.make();var ue=t.isEmpty=function(K){return K&&!!w(K._root)};U.prototype.isEmpty=function(){return ue(this)};var be=t.modifyHash=function(K,H,ve,$){var me={value:$._size},J=$._root._modify($._editable?$._edit:NaN,$._config.keyEq,0,K,H,ve,me);return $.setTree(J,me.value)};U.prototype.modifyHash=function(K,H,ve){return be(ve,K,H,this)};var Pe=t.modify=function(K,H,ve){return be(K,ve._config.hash(H),H,ve)};U.prototype.modify=function(K,H){return Pe(H,K,this)};var we=t.setHash=function(K,H,ve,$){return be(c(ve),K,H,$)};U.prototype.setHash=function(K,H,ve){return we(K,H,ve,this)};var G=t.set=function(K,H,ve){return we(ve._config.hash(K),K,H,ve)};U.prototype.set=function(K,H){return G(K,H,this)};var Ge=c(l),$e=t.removeHash=function(K,H,ve){return be(Ge,K,H,ve)};U.prototype.removeHash=U.prototype.deleteHash=function(K,H){return $e(K,H,this)};var Ye=t.remove=function(K,H){return $e(H._config.hash(K),K,H)};U.prototype.remove=U.prototype.delete=function(K){return Ye(K,this)};var De=t.beginMutation=function(K){return new U(K._editable+1,K._edit+1,K._config,K._root,K._size)};U.prototype.beginMutation=function(){return De(this)};var st=t.endMutation=function(K){return K._editable=K._editable&&K._editable-1,K};U.prototype.endMutation=function(){return st(this)};var Ze=t.mutate=function(K,H){var ve=De(H);return K(ve),st(ve)};U.prototype.mutate=function(K){return Ze(K,this)};var B=function(H){return H&&A(H[0],H[1],H[2],H[3],H[4])},A=function(H,ve,$,me,J){for(;$<H;){var he=ve[$++];if(he&&!w(he))return ae(he,me,[H,ve,$,me,J])}return B(J)},ae=function(H,ve,$){switch(H.type){case _:return{value:ve(H),rest:$};case v:case b:case x:var me=H.children;return A(me.length,me,0,ve,$);default:return B($)}},oe={done:!0};function Te(K){this.v=K}Te.prototype.next=function(){if(!this.v)return oe;var K=this.v;return this.v=B(K.rest),K},Te.prototype[Symbol.iterator]=function(){return this};var Se=function(H,ve){return new Te(ae(H._root,ve))},Xe=function(H){return[H.key,H.value]},Ie=t.entries=function(K){return Se(K,Xe)};U.prototype.entries=U.prototype[Symbol.iterator]=function(){return Ie(this)};var Fe=function(H){return H.key},pt=t.keys=function(K){return Se(K,Fe)};U.prototype.keys=function(){return pt(this)};var Le=function(H){return H.value},Oe=t.values=U.prototype.values=function(K){return Se(K,Le)};U.prototype.values=function(){return Oe(this)};var ot=t.fold=function(K,H,ve){var $=ve._root;if($.type===_)return K(H,$.value,$.key);for(var me=[$.children],J=void 0;J=me.pop();)for(var he=0,Ee=J.length;he<Ee;){var Re=J[he++];Re&&Re.type&&(Re.type===_?H=K(H,Re.value,Re.key):me.push(Re.children))}return H};U.prototype.fold=function(K,H){return ot(K,H,this)};var ut=t.forEach=function(K,H){return ot(function(ve,$,me){return K($,me,H)},null,H)};U.prototype.forEach=function(K){return ut(K,this)};var Ne=t.count=function(K){return K._size};U.prototype.count=function(){return Ne(this)},Object.defineProperty(U.prototype,"size",{get:U.prototype.count}),n.exports?n.exports=t:(void 0).hamt=t});class cre{constructor(e){bt(this,"_map",void 0),this._map=new Map(e==null?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,t){return this._map.set(e,t),this}delete(e){return this._map.delete(e),this}clone(){return JN(this)}toMap(){return new Map(this._map)}}class ZN{constructor(e){if(bt(this,"_hamt",lre.empty.beginMutation()),e instanceof ZN){const t=e._hamt.endMutation();e._hamt=t.beginMutation(),this._hamt=t.beginMutation()}else if(e)for(const[t,r]of e.entries())this._hamt.set(t,r)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,t){return this._hamt.set(e,t),this}delete(e){return this._hamt.delete(e),this}clone(){return JN(this)}toMap(){return new Map(this._hamt)}}function JN(n){return vn("recoil_hamt_2020")?new ZN(n):new cre(n)}var ure={persistentMap:JN},hre=ure.persistentMap,dre=Object.freeze({__proto__:null,persistentMap:hre});function fre(n,...e){const t=new Set;e:for(const r of n){for(const i of e)if(i.has(r))continue e;t.add(r)}return t}var Vm=fre;function pre(n,e){const t=new Map;return n.forEach((r,i)=>{t.set(i,e(r,i))}),t}var fx=pre;function mre(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function gre(n){return{nodeDeps:fx(n.nodeDeps,e=>new Set(e)),nodeToNodeSubscriptions:fx(n.nodeToNodeSubscriptions,e=>new Set(e))}}function hw(n,e,t,r){const{nodeDeps:i,nodeToNodeSubscriptions:s}=t,o=i.get(n);if(o&&r&&o!==r.nodeDeps.get(n))return;i.set(n,e);const a=o==null?e:Vm(e,o);for(const l of a)s.has(l)||s.set(l,new Set),Ln(s.get(l)).add(n);if(o){const l=Vm(o,e);for(const c of l){if(!s.has(c))return;const u=Ln(s.get(c));u.delete(n),u.size===0&&s.delete(c)}}}function yre(n,e,t,r){var i,s,o,a;const l=t.getState();r===l.currentTree.version||r===((i=l.nextTree)===null||i===void 0?void 0:i.version)||((s=l.previousTree)===null||s===void 0||s.version);const c=t.getGraph(r);if(hw(n,e,c),r===((o=l.previousTree)===null||o===void 0?void 0:o.version)){const h=t.getGraph(l.currentTree.version);hw(n,e,h,c)}if(r===((a=l.previousTree)===null||a===void 0?void 0:a.version)||r===l.currentTree.version){var u;const h=(u=l.nextTree)===null||u===void 0?void 0:u.version;if(h!==void 0){const d=t.getGraph(h);hw(n,e,d,c)}}}var py={cloneGraph:gre,graph:mre,saveDepsToStore:yre};let vre=0;const _re=()=>vre++;let xre=0;const Sre=()=>xre++;let bre=0;const wre=()=>bre++;var gb={getNextTreeStateVersion:_re,getNextStoreID:Sre,getNextComponentID:wre};const{persistentMap:GD}=dre,{graph:Tre}=py,{getNextTreeStateVersion:Z$}=gb;function J$(){const n=Z$();return{version:n,stateID:n,transactionMetadata:{},dirtyAtoms:new Set,atomValues:GD(),nonvalidatedAtoms:GD()}}function Mre(){const n=J$();return{currentTree:n,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(n.version,Tre()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var e5={makeEmptyTreeState:J$,makeEmptyStoreState:Mre,getNextTreeStateVersion:Z$};class t5{}function Ere(){return new t5}var yb={RetentionZone:t5,retentionZone:Ere};function Are(n,e){const t=new Set(n);return t.add(e),t}function Cre(n,e){const t=new Set(n);return t.delete(e),t}function Rre(n,e,t){const r=new Map(n);return r.set(e,t),r}function Nre(n,e,t){const r=new Map(n);return r.set(e,t(r.get(e))),r}function Pre(n,e){const t=new Map(n);return t.delete(e),t}function Ire(n,e){const t=new Map(n);return e.forEach(r=>t.delete(r)),t}var n5={setByAddingToSet:Are,setByDeletingFromSet:Cre,mapBySettingInMap:Rre,mapByUpdatingInMap:Nre,mapByDeletingFromMap:Pre,mapByDeletingMultipleFromMap:Ire};function*Lre(n,e){let t=0;for(const r of n)e(r,t++)&&(yield r)}var eP=Lre;function Dre(n,e){return new Proxy(n,{get:(r,i)=>(!(i in r)&&i in e&&(r[i]=e[i]()),r[i]),ownKeys:r=>Object.keys(r)})}var r5=Dre;const{getNode:my,getNodeMaybe:Ore,recoilValuesForKeys:HD}=Bi,{RetentionZone:WD}=yb,{setByAddingToSet:Fre}=n5,kre=Object.freeze(new Set);class Ure extends Error{}function Bre(n,e,t){if(!vn("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=n.getState().retention;function i(s){let o=r.get(s);o||r.set(s,o=new Set),o.add(e)}if(t instanceof WD)i(t);else if(Array.isArray(t))for(const s of t)i(s);return()=>{if(!vn("recoil_memory_managament_2020"))return;const{retention:s}=n.getState();function o(a){const l=s.nodesRetainedByZone.get(a);l==null||l.delete(e),l&&l.size===0&&s.nodesRetainedByZone.delete(a)}if(t instanceof WD)o(t);else if(Array.isArray(t))for(const a of t)o(a)}}function tP(n,e,t,r){const i=n.getState();if(i.nodeCleanupFunctions.has(t))return;const s=my(t),o=Bre(n,t,s.retainedBy),a=s.init(n,e,r);i.nodeCleanupFunctions.set(t,()=>{a(),o()})}function zre(n,e,t){tP(n,n.getState().currentTree,e,t)}function $re(n,e){var t;const r=n.getState();(t=r.nodeCleanupFunctions.get(e))===null||t===void 0||t(),r.nodeCleanupFunctions.delete(e)}function Vre(n,e,t){return tP(n,e,t,"get"),my(t).get(n,e)}function i5(n,e,t){return my(t).peek(n,e)}function Gre(n,e,t){var r;const i=Ore(e);return i==null||(r=i.invalidate)===null||r===void 0||r.call(i,n),{...n,atomValues:n.atomValues.clone().delete(e),nonvalidatedAtoms:n.nonvalidatedAtoms.clone().set(e,t),dirtyAtoms:Fre(n.dirtyAtoms,e)}}function Hre(n,e,t,r){const i=my(t);if(i.set==null)throw new Ure(`Attempt to set read-only RecoilValue: ${t}`);const s=i.set;return tP(n,e,t,"set"),s(n,e,r)}function Wre(n,e,t){const r=n.getState(),i=n.getGraph(e.version),s=my(t).nodeType;return r5({type:s},{loadable:()=>i5(n,e,t),isActive:()=>r.knownAtoms.has(t)||r.knownSelectors.has(t),isSet:()=>s==="selector"?!1:e.atomValues.has(t),isModified:()=>e.dirtyAtoms.has(t),deps:()=>{var o;return HD((o=i.nodeDeps.get(t))!==null&&o!==void 0?o:[])},subscribers:()=>{var o,a;return{nodes:HD(eP(s5(n,e,new Set([t])),l=>l!==t)),components:mb((o=(a=r.nodeToComponentSubscriptions.get(t))===null||a===void 0?void 0:a.values())!==null&&o!==void 0?o:[],([l])=>({name:l}))}}})}function s5(n,e,t){const r=new Set,i=Array.from(t),s=n.getGraph(e.version);for(let a=i.pop();a;a=i.pop()){var o;r.add(a);const l=(o=s.nodeToNodeSubscriptions.get(a))!==null&&o!==void 0?o:kre;for(const c of l)r.has(c)||i.push(c)}return r}var Cc={getNodeLoadable:Vre,peekNodeLoadable:i5,setNodeValue:Hre,initializeNode:zre,cleanUpNode:$re,setUnvalidatedAtomValue_DEPRECATED:Gre,peekNodeInfo:Wre,getDownstreamNodes:s5};let o5=null;function jre(n){o5=n}function qre(){var n;(n=o5)===null||n===void 0||n()}var a5={setInvalidateMemoizedSnapshot:jre,invalidateMemoizedSnapshot:qre};const{getDownstreamNodes:Xre,getNodeLoadable:l5,setNodeValue:Kre}=Cc,{getNextComponentID:Yre}=gb,{getNode:Qre,getNodeMaybe:c5}=Bi,{DefaultValue:nP}=Bi,{reactMode:Zre}=fy,{AbstractRecoilValue:Jre,RecoilState:eie,RecoilValueReadOnly:tie,isRecoilValue:nie}=Ef,{invalidateMemoizedSnapshot:rie}=a5;function iie(n,{key:e},t=n.getState().currentTree){var r,i;const s=n.getState();t.version===s.currentTree.version||t.version===((r=s.nextTree)===null||r===void 0?void 0:r.version)||(t.version,(i=s.previousTree)===null||i===void 0||i.version);const o=l5(n,t,e);return o.state==="loading"&&o.contents.catch(()=>{}),o}function sie(n,e){const t=n.clone();return e.forEach((r,i)=>{r.state==="hasValue"&&r.contents instanceof nP?t.delete(i):t.set(i,r)}),t}function oie(n,e,{key:t},r){if(typeof r=="function"){const i=l5(n,e,t);if(i.state==="loading"){const s=`Tried to set atom or selector "${t}" using an updater function while the current state is pending, this is not currently supported.`;throw Rt(s)}else if(i.state==="hasError")throw i.contents;return r(i.contents)}else return r}function aie(n,e,t){if(t.type==="set"){const{recoilValue:i,valueOrUpdater:s}=t,o=oie(n,e,i,s),a=Kre(n,e,i.key,o);for(const[l,c]of a.entries())ZE(e,l,c)}else if(t.type==="setLoadable"){const{recoilValue:{key:i},loadable:s}=t;ZE(e,i,s)}else if(t.type==="markModified"){const{recoilValue:{key:i}}=t;e.dirtyAtoms.add(i)}else if(t.type==="setUnvalidated"){var r;const{recoilValue:{key:i},unvalidatedValue:s}=t,o=c5(i);o==null||(r=o.invalidate)===null||r===void 0||r.call(o,e),e.atomValues.delete(i),e.nonvalidatedAtoms.set(i,s),e.dirtyAtoms.add(i)}else KN(`Unknown action ${t.type}`)}function ZE(n,e,t){t.state==="hasValue"&&t.contents instanceof nP?n.atomValues.delete(e):n.atomValues.set(e,t),n.dirtyAtoms.add(e),n.nonvalidatedAtoms.delete(e)}function u5(n,e){n.replaceState(t=>{const r=h5(t);for(const i of e)aie(n,r,i);return d5(n,r),rie(),r})}function vb(n,e){if(Gm.length){const t=Gm[Gm.length-1];let r=t.get(n);r||t.set(n,r=[]),r.push(e)}else u5(n,[e])}const Gm=[];function lie(){const n=new Map;return Gm.push(n),()=>{for(const[e,t]of n)u5(e,t);Gm.pop()}}function h5(n){return{...n,atomValues:n.atomValues.clone(),nonvalidatedAtoms:n.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(n.dirtyAtoms)}}function d5(n,e){const t=Xre(n,e,e.dirtyAtoms);for(const s of t){var r,i;(r=c5(s))===null||r===void 0||(i=r.invalidate)===null||i===void 0||i.call(r,e)}}function f5(n,e,t){vb(n,{type:"set",recoilValue:e,valueOrUpdater:t})}function cie(n,e,t){if(t instanceof nP)return f5(n,e,t);vb(n,{type:"setLoadable",recoilValue:e,loadable:t})}function uie(n,e){vb(n,{type:"markModified",recoilValue:e})}function hie(n,e,t){vb(n,{type:"setUnvalidated",recoilValue:e,unvalidatedValue:t})}function die(n,{key:e},t,r=null){const i=Yre(),s=n.getState();s.nodeToComponentSubscriptions.has(e)||s.nodeToComponentSubscriptions.set(e,new Map),Ln(s.nodeToComponentSubscriptions.get(e)).set(i,[r??"<not captured>",t]);const o=Zre();if(o.early&&(o.mode==="LEGACY"||o.mode==="MUTABLE_SOURCE")){const a=n.getState().nextTree;a&&a.dirtyAtoms.has(e)&&t(a)}return{release:()=>{const a=n.getState(),l=a.nodeToComponentSubscriptions.get(e);l===void 0||!l.has(i)||(l.delete(i),l.size===0&&a.nodeToComponentSubscriptions.delete(e))}}}function fie(n,e){var t;const{currentTree:r}=n.getState(),i=Qre(e.key);(t=i.clearCache)===null||t===void 0||t.call(i,n,r)}var Jo={RecoilValueReadOnly:tie,AbstractRecoilValue:Jre,RecoilState:eie,getRecoilValueAsLoadable:iie,setRecoilValue:f5,setRecoilValueLoadable:cie,markRecoilValueModified:uie,setUnvalidatedRecoilValue:hie,subscribeToRecoilValue:die,isRecoilValue:nie,applyAtomValueWrites:sie,batchStart:lie,writeLoadableToTreeState:ZE,invalidateDownstreams:d5,copyTreeState:h5,refreshRecoilValue:fie};function pie(n,e,t){const r=n.entries();let i=r.next();for(;!i.done;){const s=i.value;if(e.call(t,s[1],s[0],n))return!0;i=r.next()}return!1}var mie=pie;const{cleanUpNode:gie}=Cc,{deleteNodeConfigIfPossible:yie,getNode:p5}=Bi,{RetentionZone:m5}=yb,vie=12e4,g5=new Set;function y5(n,e){const t=n.getState(),r=t.currentTree;if(t.nextTree)return;const i=new Set;for(const o of e)if(o instanceof m5)for(const a of bie(t,o))i.add(a);else i.add(o);const s=_ie(n,i);for(const o of s)Sie(n,r,o)}function _ie(n,e){const t=n.getState(),r=t.currentTree,i=n.getGraph(r.version),s=new Set,o=new Set;return a(e),s;function a(l){const c=new Set,u=xie(n,r,l,s,o);for(const p of u){var h;if(p5(p).retainedBy==="recoilRoot"){o.add(p);continue}if(((h=t.retention.referenceCounts.get(p))!==null&&h!==void 0?h:0)>0){o.add(p);continue}if(v5(p).some(y=>t.retention.referenceCounts.get(y))){o.add(p);continue}const g=i.nodeToNodeSubscriptions.get(p);if(g&&mie(g,y=>o.has(y))){o.add(p);continue}s.add(p),c.add(p)}const d=new Set;for(const p of c)for(const g of(f=i.nodeDeps.get(p))!==null&&f!==void 0?f:g5){var f;s.has(g)||d.add(g)}d.size&&a(d)}}function xie(n,e,t,r,i){const s=n.getGraph(e.version),o=[],a=new Set;for(;t.size>0;)l(Ln(t.values().next().value));return o;function l(c){if(r.has(c)||i.has(c)){t.delete(c);return}if(a.has(c))return;const u=s.nodeToNodeSubscriptions.get(c);if(u)for(const h of u)l(h);a.add(c),t.delete(c),o.push(c)}}function Sie(n,e,t){if(!vn("recoil_memory_managament_2020"))return;gie(n,t);const r=n.getState();r.knownAtoms.delete(t),r.knownSelectors.delete(t),r.nodeTransactionSubscriptions.delete(t),r.retention.referenceCounts.delete(t);const i=v5(t);for(const l of i){var s;(s=r.retention.nodesRetainedByZone.get(l))===null||s===void 0||s.delete(t)}e.atomValues.delete(t),e.dirtyAtoms.delete(t),e.nonvalidatedAtoms.delete(t);const o=r.graphsByVersion.get(e.version);if(o){const l=o.nodeDeps.get(t);if(l!==void 0){o.nodeDeps.delete(t);for(const c of l){var a;(a=o.nodeToNodeSubscriptions.get(c))===null||a===void 0||a.delete(t)}}o.nodeToNodeSubscriptions.delete(t)}yie(t)}function bie(n,e){var t;return(t=n.retention.nodesRetainedByZone.get(e))!==null&&t!==void 0?t:g5}function v5(n){const e=p5(n).retainedBy;return e===void 0||e==="components"||e==="recoilRoot"?[]:e instanceof m5?[e]:e}function wie(n,e){const t=n.getState();t.nextTree?t.retention.retainablesToCheckForRelease.add(e):y5(n,new Set([e]))}function Tie(n,e,t){var r;if(!vn("recoil_memory_managament_2020"))return;const i=n.getState().retention.referenceCounts,s=((r=i.get(e))!==null&&r!==void 0?r:0)+t;s===0?_5(n,e):i.set(e,s)}function _5(n,e){if(!vn("recoil_memory_managament_2020"))return;n.getState().retention.referenceCounts.delete(e),wie(n,e)}function Mie(n){if(!vn("recoil_memory_managament_2020"))return;const e=n.getState();y5(n,e.retention.retainablesToCheckForRelease),e.retention.retainablesToCheckForRelease.clear()}function Eie(n){return n===void 0?"recoilRoot":n}var eh={SUSPENSE_TIMEOUT_MS:vie,updateRetainCount:Tie,updateRetainCountToZero:_5,releaseScheduledRetainablesNow:Mie,retainedByOptionWithDefault:Eie};const{unstable_batchedUpdates:Aie}=pm;var Cie={unstable_batchedUpdates:Aie};const{unstable_batchedUpdates:Rie}=Cie;var Nie={unstable_batchedUpdates:Rie};const{batchStart:Pie}=Jo,{unstable_batchedUpdates:Iie}=Nie;let rP=Iie||(n=>n());const Lie=n=>{rP=n},Die=()=>rP,Oie=n=>{rP(()=>{let e=()=>{};try{e=Pie(),n()}finally{e()}})};var _b={getBatcher:Die,setBatcher:Lie,batchUpdates:Oie};function*Fie(n){for(const e of n)for(const t of e)yield t}var x5=Fie;const S5=typeof Window>"u"||typeof window>"u",kie=n=>!S5&&(n===window||n instanceof Window),Uie=typeof navigator<"u"&&navigator.product==="ReactNative";var xb={isSSR:S5,isReactNative:Uie,isWindow:kie};function Bie(n,e){let t;return(...r)=>{t||(t={});const i=e(...r);return Object.hasOwnProperty.call(t,i)||(t[i]=n(...r)),t[i]}}function zie(n,e){let t,r;return(...i)=>{const s=e(...i);return t===s||(t=s,r=n(...i)),r}}function $ie(n,e){let t,r;return[(...o)=>{const a=e(...o);return t===a||(t=a,r=n(...o)),r},()=>{t=null}]}var Vie={memoizeWithArgsHash:Bie,memoizeOneWithArgsHash:zie,memoizeOneWithArgsHashAndInvalidation:$ie};const{batchUpdates:JE}=_b,{initializeNode:Gie,peekNodeInfo:Hie}=Cc,{graph:Wie}=py,{getNextStoreID:jie}=gb,{DEFAULT_VALUE:qie,recoilValues:jD,recoilValuesForKeys:qD}=Bi,{AbstractRecoilValue:Xie,getRecoilValueAsLoadable:Kie,setRecoilValue:XD,setUnvalidatedRecoilValue:Yie}=Jo,{updateRetainCount:Zv}=eh,{setInvalidateMemoizedSnapshot:Qie}=a5,{getNextTreeStateVersion:Zie,makeEmptyStoreState:Jie}=e5,{isSSR:ese}=xb,{memoizeOneWithArgsHashAndInvalidation:tse}=Vie;class Sb{constructor(e,t){bt(this,"_store",void 0),bt(this,"_refCount",1),bt(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),Kie(this._store,r))),bt(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),bt(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];const o=this._store.getState().currentTree;return qD(o.dirtyAtoms)}const i=this._store.getState().knownAtoms,s=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?jD.values():r.isInitialized===!0?qD(x5([i,s])):eP(jD.values(),({key:o})=>!i.has(o)&&!s.has(o))}),bt(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),Hie(this._store,this._store.getState().currentTree,r))),bt(this,"map",r=>{this.checkRefCount_INTERNAL();const i=new eA(this,JE);return r(i),i}),bt(this,"asyncMap",async r=>{this.checkRefCount_INTERNAL();const i=new eA(this,JE);return i.retain(),await r(i),i.autoRelease_INTERNAL(),i}),this._store={storeID:jie(),parentStoreID:t,getState:()=>e,replaceState:r=>{e.currentTree=r(e.currentTree)},getGraph:r=>{const i=e.graphsByVersion;if(i.has(r))return Ln(i.get(r));const s=Wie();return i.set(r,s),s},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw Rt("Cannot subscribe to Snapshots")}};for(const r of this._store.getState().knownAtoms)Gie(this._store,r,"get"),Zv(this._store,r,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0,this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){ese||window.setTimeout(()=>this._release(),10)}_release(){if(this._refCount--,this._refCount===0){if(this._store.getState().nodeCleanupFunctions.forEach(e=>e()),this._store.getState().nodeCleanupFunctions.clear(),!vn("recoil_memory_managament_2020"))return}else this._refCount<0}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){vn("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function b5(n,e,t=!1){const r=n.getState(),i=t?Zie():e.version;return{currentTree:{version:t?i:e.version,stateID:t?i:e.stateID,transactionMetadata:{...e.transactionMetadata},dirtyAtoms:new Set(e.dirtyAtoms),atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(i,n.getGraph(e.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(mb(r.nodeCleanupFunctions.entries(),([s])=>[s,()=>{}]))}}function nse(n){const e=new Sb(Jie());return n!=null?e.map(n):e}const[KD,w5]=tse((n,e)=>{var t;const r=n.getState(),i=e==="latest"?(t=r.nextTree)!==null&&t!==void 0?t:r.currentTree:Ln(r.previousTree);return new Sb(b5(n,i),n.storeID)},(n,e)=>{var t,r;return String(e)+String(n.storeID)+String((t=n.getState().nextTree)===null||t===void 0?void 0:t.version)+String(n.getState().currentTree.version)+String((r=n.getState().previousTree)===null||r===void 0?void 0:r.version)});Qie(w5);function rse(n,e="latest"){const t=KD(n,e);return t.isRetained()?t:(w5(),KD(n,e))}class eA extends Sb{constructor(e,t){super(b5(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),bt(this,"_batch",void 0),bt(this,"set",(r,i)=>{this.checkRefCount_INTERNAL();const s=this.getStore_INTERNAL();this._batch(()=>{Zv(s,r.key,1),XD(this.getStore_INTERNAL(),r,i)})}),bt(this,"reset",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();this._batch(()=>{Zv(i,r.key,1),XD(this.getStore_INTERNAL(),r,qie)})}),bt(this,"setUnvalidatedAtomValues_DEPRECATED",r=>{this.checkRefCount_INTERNAL();const i=this.getStore_INTERNAL();JE(()=>{for(const[s,o]of r.entries())Zv(i,s,1),Yie(i,new Xie(s),o)})}),this._batch=t}}var bb={Snapshot:Sb,MutableSnapshot:eA,freshSnapshot:nse,cloneSnapshot:rse},ise=bb.Snapshot,sse=bb.MutableSnapshot,ose=bb.freshSnapshot,ase=bb.cloneSnapshot,wb=Object.freeze({__proto__:null,Snapshot:ise,MutableSnapshot:sse,freshSnapshot:ose,cloneSnapshot:ase});function lse(...n){const e=new Set;for(const t of n)for(const r of t)e.add(r);return e}var cse=lse;const{useRef:use}=Et;function hse(n){const e=use(n);return e.current===n&&typeof n=="function"&&(e.current=n()),e}var YD=hse;const{getNextTreeStateVersion:dse,makeEmptyStoreState:T5}=e5,{cleanUpNode:fse,getDownstreamNodes:pse,initializeNode:mse,setNodeValue:gse,setUnvalidatedAtomValue_DEPRECATED:yse}=Cc,{graph:vse}=py,{cloneGraph:_se}=py,{getNextStoreID:M5}=gb,{createMutableSource:dw,reactMode:E5}=fy,{applyAtomValueWrites:xse}=Jo,{releaseScheduledRetainablesNow:A5}=eh,{freshSnapshot:Sse}=wb,{useCallback:bse,useContext:C5,useEffect:tA,useMemo:wse,useRef:Tse,useState:Mse}=Et;function Rp(){throw Rt("This component must be used inside a <RecoilRoot> component.")}const R5=Object.freeze({storeID:M5(),getState:Rp,replaceState:Rp,getGraph:Rp,subscribeToTransactions:Rp,addTransactionMetadata:Rp});let nA=!1;function QD(n){if(nA)throw Rt("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const e=n.getState();if(e.nextTree===null){vn("recoil_memory_managament_2020")&&vn("recoil_release_on_cascading_update_killswitch_2021")&&e.commitDepth>0&&A5(n);const t=e.currentTree.version,r=dse();e.nextTree={...e.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},e.graphsByVersion.set(r,_se(Ln(e.graphsByVersion.get(t))))}}const N5=Et.createContext({current:R5}),Tb=()=>C5(N5),P5=Et.createContext(null);function Ese(){return C5(P5)}function iP(n,e,t){const r=pse(n,t,t.dirtyAtoms);for(const i of r){const s=e.nodeToComponentSubscriptions.get(i);if(s)for(const[o,[a,l]]of s)l(t)}}function I5(n){const e=n.getState(),t=e.currentTree,r=t.dirtyAtoms;if(r.size){for(const[i,s]of e.nodeTransactionSubscriptions)if(r.has(i))for(const[o,a]of s)a(n);for(const[i,s]of e.transactionSubscriptions)s(n);(!E5().early||e.suspendedComponentResolvers.size>0)&&(iP(n,e,t),e.suspendedComponentResolvers.forEach(i=>i()),e.suspendedComponentResolvers.clear())}e.queuedComponentCallbacks_DEPRECATED.forEach(i=>i(t)),e.queuedComponentCallbacks_DEPRECATED.splice(0,e.queuedComponentCallbacks_DEPRECATED.length)}function Ase(n){const e=n.getState();e.commitDepth++;try{const{nextTree:t}=e;if(t==null)return;e.previousTree=e.currentTree,e.currentTree=t,e.nextTree=null,I5(n),e.previousTree!=null?e.graphsByVersion.delete(e.previousTree.version):KN("Ended batch with no previous state, which is unexpected","recoil"),e.previousTree=null,vn("recoil_memory_managament_2020")&&t==null&&A5(n)}finally{e.commitDepth--}}function Cse({setNotifyBatcherOfChange:n}){const e=Tb(),[,t]=Mse([]);return n(()=>t({})),tA(()=>(n(()=>t({})),()=>{n(()=>{})}),[n]),tA(()=>{ore.enqueueExecution("Batcher",()=>{Ase(e.current)})}),null}function Rse(n,e){const t=T5();return e({set:(r,i)=>{const s=t.currentTree,o=gse(n,s,r.key,i),a=new Set(o.keys()),l=s.nonvalidatedAtoms.clone();for(const c of a)l.delete(c);t.currentTree={...s,dirtyAtoms:cse(s.dirtyAtoms,a),atomValues:xse(s.atomValues,o),nonvalidatedAtoms:l}},setUnvalidatedAtomValues:r=>{r.forEach((i,s)=>{t.currentTree=yse(t.currentTree,s,i)})}}),t}function Nse(n){const e=Sse(n),t=e.getStore_INTERNAL().getState();return e.retain(),t.nodeCleanupFunctions.forEach(r=>r()),t.nodeCleanupFunctions.clear(),t}let ZD=0;function Pse({initializeState_DEPRECATED:n,initializeState:e,store_INTERNAL:t,children:r}){let i;const s=f=>{const p=i.current.graphsByVersion;if(p.has(f))return Ln(p.get(f));const g=vse();return p.set(f,g),g},o=(f,p)=>{if(p==null){const{transactionSubscriptions:g}=h.current.getState(),y=ZD++;return g.set(y,f),{release:()=>{g.delete(y)}}}else{const{nodeTransactionSubscriptions:g}=h.current.getState();g.has(p)||g.set(p,new Map);const y=ZD++;return Ln(g.get(p)).set(y,f),{release:()=>{const m=g.get(p);m&&(m.delete(y),m.size===0&&g.delete(p))}}}},a=f=>{QD(h.current);for(const p of Object.keys(f))Ln(h.current.getState().nextTree).transactionMetadata[p]=f[p]},l=f=>{QD(h.current);const p=Ln(i.current.nextTree);let g;try{nA=!0,g=f(p)}finally{nA=!1}g!==p&&(i.current.nextTree=g,E5().early&&iP(h.current,i.current,g),Ln(c.current)())},c=Tse(null),u=bse(f=>{c.current=f},[c]),h=YD(()=>t??{storeID:M5(),getState:()=>i.current,replaceState:l,getGraph:s,subscribeToTransactions:o,addTransactionMetadata:a});t!=null&&(h.current=t),i=YD(()=>n!=null?Rse(h.current,n):e!=null?Nse(e):T5());const d=wse(()=>dw==null?void 0:dw(i,()=>i.current.currentTree.version),[i]);return tA(()=>{const f=h.current;for(const p of new Set(f.getState().knownAtoms))mse(f,p,"get");return()=>{for(const p of f.getState().knownAtoms)fse(f,p)}},[h]),Et.createElement(N5.Provider,{value:h},Et.createElement(P5.Provider,{value:d},Et.createElement(Cse,{setNotifyBatcherOfChange:u}),r))}function Ise(n){const{override:e,...t}=n,r=Tb();return e===!1&&r.current!==R5?n.children:Et.createElement(Pse,t)}function Lse(){return Tb().current.storeID}var al={RecoilRoot:Ise,useStoreRef:Tb,useRecoilMutableSource:Ese,useRecoilStoreID:Lse,notifyComponents_FOR_TESTING:iP,sendEndOfBatchNotifications_FOR_TESTING:I5};function Dse(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}var Ose=Dse;const{useEffect:Fse,useRef:kse}=Et;function Use(n){const e=kse();return Fse(()=>{e.current=n}),e.current}var L5=Use;const{useStoreRef:Bse}=al,{SUSPENSE_TIMEOUT_MS:zse}=eh,{updateRetainCount:Np}=eh,{RetentionZone:$se}=yb,{useEffect:Vse,useRef:Gse}=Et,{isSSR:JD}=xb;function Hse(n){if(vn("recoil_memory_managament_2020"))return Wse(n)}function Wse(n){const t=(Array.isArray(n)?n:[n]).map(o=>o instanceof $se?o:o.key),r=Bse();Vse(()=>{if(!vn("recoil_memory_managament_2020"))return;const o=r.current;if(i.current&&!JD)window.clearTimeout(i.current),i.current=null;else for(const a of t)Np(o,a,1);return()=>{for(const a of t)Np(o,a,-1)}},[r,...t]);const i=Gse(),s=L5(t);if(!JD&&(s===void 0||!Ose(s,t))){const o=r.current;for(const a of t)Np(o,a,1);if(s)for(const a of s)Np(o,a,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout(()=>{i.current=null;for(const a of t)Np(o,a,-1)},zse)}}var sP=Hse;function jse(){return"<component name not available>"}var gy=jse;const{batchUpdates:qse}=_b,{DEFAULT_VALUE:D5}=Bi,{currentRendererSupportsUseSyncExternalStore:Xse,reactMode:tp,useMutableSource:Kse,useSyncExternalStore:Yse}=fy,{useRecoilMutableSource:Qse,useStoreRef:ea}=al,{AbstractRecoilValue:rA,getRecoilValueAsLoadable:yy,setRecoilValue:px,setUnvalidatedRecoilValue:Zse,subscribeToRecoilValue:Af}=Jo,{useCallback:Li,useEffect:Cf,useMemo:O5,useRef:Hm,useState:oP}=Et,{setByAddingToSet:Jse}=n5,{isSSR:eoe}=xb;function aP(n,e,t){if(n.state==="hasValue")return n.contents;throw n.state==="loading"?new Promise(i=>{const s=t.current.getState().suspendedComponentResolvers;s.add(i),eoe&&En(n.contents)&&n.contents.finally(()=>{s.delete(i)})}):n.state==="hasError"?n.contents:Rt(`Invalid value of loadable atom "${e.key}"`)}function toe(){const n=gy(),e=ea(),[,t]=oP([]),r=Hm(new Set);r.current=new Set;const i=Hm(new Set),s=Hm(new Map),o=Li(l=>{const c=s.current.get(l);c&&(c.release(),s.current.delete(l))},[s]),a=Li((l,c)=>{s.current.has(c)&&t([])},[]);return Cf(()=>{const l=e.current;Vm(r.current,i.current).forEach(c=>{if(s.current.has(c))return;const u=Af(l,new rA(c),d=>a(d,c),n);s.current.set(c,u),l.getState().nextTree?l.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a(l.getState(),c)}):a(l.getState(),c)}),Vm(i.current,r.current).forEach(c=>{o(c)}),i.current=r.current}),Cf(()=>{const l=s.current;return Vm(r.current,new Set(l.keys())).forEach(c=>{const u=Af(e.current,new rA(c),h=>a(h,c),n);l.set(c,u)}),()=>l.forEach((c,u)=>o(u))},[n,e,o,a]),O5(()=>{function l(p){return g=>{px(e.current,p,g)}}function c(p){return()=>px(e.current,p,D5)}function u(p){var g;r.current.has(p.key)||(r.current=Jse(r.current,p.key));const y=e.current.getState();return yy(e.current,p,tp().early&&(g=y.nextTree)!==null&&g!==void 0?g:y.currentTree)}function h(p){const g=u(p);return aP(g,p,e)}function d(p){return[h(p),l(p)]}function f(p){return[u(p),l(p)]}return{getRecoilValue:h,getRecoilValueLoadable:u,getRecoilState:d,getRecoilStateLoadable:f,getSetRecoilState:l,getResetRecoilState:c}},[r,e])}const noe={current:0};function roe(n){const e=ea(),t=gy(),r=Li(()=>{var a;const l=e.current,c=l.getState(),u=tp().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return{loadable:yy(l,n,u),key:n.key}},[e,n]),i=Li(a=>{let l;return()=>{var c,u;const h=a();return(c=l)!==null&&c!==void 0&&c.loadable.is(h.loadable)&&((u=l)===null||u===void 0?void 0:u.key)===h.key?l:(l=h,h)}},[]),s=O5(()=>i(r),[r,i]),o=Li(a=>{const l=e.current;return Af(l,n,a,t).release},[e,n,t]);return Yse(o,s,s).loadable}function ioe(n){const e=ea(),t=Li(()=>{var c;const u=e.current,h=u.getState(),d=tp().early&&(c=h.nextTree)!==null&&c!==void 0?c:h.currentTree;return yy(u,n,d)},[e,n]),r=Li(()=>t(),[t]),i=gy(),s=Li((c,u)=>{const h=e.current;return Af(h,n,()=>{if(!vn("recoil_suppress_rerender_in_callback"))return u();const f=t();l.current.is(f)||u(),l.current=f},i).release},[e,n,i,t]),o=Qse();if(o==null)throw Rt("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=Kse(o,r,s),l=Hm(a);return Cf(()=>{l.current=a}),a}function iA(n){const e=ea(),t=gy(),r=Li(()=>{var l;const c=e.current,u=c.getState(),h=tp().early&&(l=u.nextTree)!==null&&l!==void 0?l:u.currentTree;return yy(c,n,h)},[e,n]),i=Li(()=>({loadable:r(),key:n.key}),[r,n.key]),s=Li(l=>{const c=i();return l.loadable.is(c.loadable)&&l.key===c.key?l:c},[i]);Cf(()=>{const l=Af(e.current,n,c=>{a(s)},t);return a(s),l.release},[t,n,e,s]);const[o,a]=oP(i);return o.key!==n.key?i().loadable:o.loadable}function soe(n){const e=ea(),[,t]=oP([]),r=gy(),i=Li(()=>{var a;const l=e.current,c=l.getState(),u=tp().early&&(a=c.nextTree)!==null&&a!==void 0?a:c.currentTree;return yy(l,n,u)},[e,n]),s=i(),o=Hm(s);return Cf(()=>{o.current=s}),Cf(()=>{const a=e.current,l=a.getState(),c=Af(a,n,h=>{var d;if(!vn("recoil_suppress_rerender_in_callback"))return t([]);const f=i();(d=o.current)!==null&&d!==void 0&&d.is(f)||t(f),o.current=f},r);if(l.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{o.current=null,t([])});else{var u;if(!vn("recoil_suppress_rerender_in_callback"))return t([]);const h=i();(u=o.current)!==null&&u!==void 0&&u.is(h)||t(h),o.current=h}return c.release},[r,i,n,e]),s}function lP(n){return vn("recoil_memory_managament_2020")&&sP(n),{TRANSITION_SUPPORT:iA,SYNC_EXTERNAL_STORE:Xse()?roe:iA,MUTABLE_SOURCE:ioe,LEGACY:soe}[tp().mode](n)}function F5(n){const e=ea(),t=lP(n);return aP(t,n,e)}function Mb(n){const e=ea();return Li(t=>{px(e.current,n,t)},[e,n])}function ooe(n){const e=ea();return Li(()=>{px(e.current,n,D5)},[e,n])}function aoe(n){return[F5(n),Mb(n)]}function loe(n){return[lP(n),Mb(n)]}function coe(){const n=ea();return(e,t={})=>{qse(()=>{n.current.addTransactionMetadata(t),e.forEach((r,i)=>Zse(n.current,new rA(i),r))})}}function k5(n){return vn("recoil_memory_managament_2020")&&sP(n),iA(n)}function U5(n){const e=ea(),t=k5(n);return aP(t,n,e)}function uoe(n){return[U5(n),Mb(n)]}var hoe={recoilComponentGetRecoilValueCount_FOR_TESTING:noe,useRecoilInterface:toe,useRecoilState:aoe,useRecoilStateLoadable:loe,useRecoilValue:F5,useRecoilValueLoadable:lP,useResetRecoilState:ooe,useSetRecoilState:Mb,useSetUnvalidatedAtomValues:coe,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:k5,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:U5,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:uoe};function doe(n,e){const t=new Map;for(const[r,i]of n)e(i,r)&&t.set(r,i);return t}var foe=doe;function poe(n,e){const t=new Set;for(const r of n)e(r)&&t.add(r);return t}var moe=poe;function goe(...n){const e=new Map;for(let t=0;t<n.length;t++){const r=n[t].keys();let i;for(;!(i=r.next()).done;)e.set(i.value,n[t].get(i.value))}return e}var yoe=goe;const{batchUpdates:voe}=_b,{DEFAULT_VALUE:_oe,getNode:B5,nodes:xoe}=Bi,{useStoreRef:cP}=al,{AbstractRecoilValue:Soe,setRecoilValueLoadable:boe}=Jo,{SUSPENSE_TIMEOUT_MS:woe}=eh,{cloneSnapshot:mx}=wb,{useCallback:Eb,useEffect:z5,useRef:eO,useState:Toe}=Et,{isSSR:tO}=xb;function Ab(n){const e=cP();z5(()=>e.current.subscribeToTransactions(n).release,[n,e])}function nO(n){const e=n.atomValues.toMap(),t=fx(foe(e,(r,i)=>{const o=B5(i).persistence_UNSTABLE;return o!=null&&o.type!=="none"&&r.state==="hasValue"}),r=>r.contents);return yoe(n.nonvalidatedAtoms.toMap(),t)}function Moe(n){Ab(Eb(e=>{let t=e.getState().previousTree;const r=e.getState().currentTree;t||(t=e.getState().currentTree);const i=nO(r),s=nO(t),o=fx(xoe,l=>{var c,u,h,d;return{persistence_UNSTABLE:{type:(c=(u=l.persistence_UNSTABLE)===null||u===void 0?void 0:u.type)!==null&&c!==void 0?c:"none",backButton:(h=(d=l.persistence_UNSTABLE)===null||d===void 0?void 0:d.backButton)!==null&&h!==void 0?h:!1}}}),a=moe(r.dirtyAtoms,l=>i.has(l)||s.has(l));n({atomValues:i,previousAtomValues:s,atomInfo:o,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})},[n]))}function Eoe(n){Ab(Eb(e=>{const t=mx(e,"latest"),r=mx(e,"previous");n({snapshot:t,previousSnapshot:r})},[n]))}function Aoe(){const n=cP(),[e,t]=Toe(()=>mx(n.current)),r=L5(e),i=eO(),s=eO();if(Ab(Eb(a=>t(mx(a)),[])),z5(()=>{const a=e.retain();if(i.current&&!tO){var l;window.clearTimeout(i.current),i.current=null,(l=s.current)===null||l===void 0||l.call(s),s.current=null}return()=>{window.setTimeout(a,10)}},[e]),r!==e&&!tO){if(i.current){var o;window.clearTimeout(i.current),i.current=null,(o=s.current)===null||o===void 0||o.call(s),s.current=null}s.current=e.retain(),i.current=window.setTimeout(()=>{var a;i.current=null,(a=s.current)===null||a===void 0||a.call(s),s.current=null},woe)}return e}function $5(n,e){var t;const r=n.getState(),i=(t=r.nextTree)!==null&&t!==void 0?t:r.currentTree,s=e.getStore_INTERNAL().getState().currentTree;voe(()=>{const o=new Set;for(const c of[i.atomValues.keys(),s.atomValues.keys()])for(const u of c){var a,l;((a=i.atomValues.get(u))===null||a===void 0?void 0:a.contents)!==((l=s.atomValues.get(u))===null||l===void 0?void 0:l.contents)&&B5(u).shouldRestoreFromSnapshots&&o.add(u)}o.forEach(c=>{boe(n,new Soe(c),s.atomValues.has(c)?Ln(s.atomValues.get(c)):_oe)}),n.replaceState(c=>({...c,stateID:e.getID()}))})}function Coe(){const n=cP();return Eb(e=>$5(n.current,e),[n])}var V5={useRecoilSnapshot:Aoe,gotoSnapshot:$5,useGotoRecoilSnapshot:Coe,useRecoilTransactionObserver:Eoe,useTransactionObservation_DEPRECATED:Moe,useTransactionSubscription_DEPRECATED:Ab};const{peekNodeInfo:Roe}=Cc,{useStoreRef:Noe}=al;function Poe(){const n=Noe();return({key:e})=>Roe(n.current,n.current.getState().currentTree,e)}var Ioe=Poe;const{reactMode:Loe}=fy,{RecoilRoot:Doe,useStoreRef:Ooe}=al,{useMemo:Foe}=Et;function koe(){Loe().mode==="MUTABLE_SOURCE"&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const n=Ooe().current;return Foe(()=>{function e({children:t}){return Et.createElement(Doe,{store_INTERNAL:n},t)}return e},[n])}var Uoe=koe;const{loadableWithValue:Boe}=dy,{initializeNode:zoe}=Cc,{DEFAULT_VALUE:$oe,getNode:Voe}=Bi,{copyTreeState:Goe,getRecoilValueAsLoadable:Hoe,invalidateDownstreams:Woe,writeLoadableToTreeState:joe}=Jo;function rO(n){return Voe(n.key).nodeType==="atom"}class qoe{constructor(e,t){bt(this,"_store",void 0),bt(this,"_treeState",void 0),bt(this,"_changes",void 0),bt(this,"get",r=>{if(this._changes.has(r.key))return this._changes.get(r.key);if(!rO(r))throw Rt("Reading selectors within atomicUpdate is not supported");const i=Hoe(this._store,r,this._treeState);if(i.state==="hasValue")return i.contents;throw i.state==="hasError"?i.contents:Rt(`Expected Recoil atom ${r.key} to have a value, but it is in a loading state.`)}),bt(this,"set",(r,i)=>{if(!rO(r))throw Rt("Setting selectors within atomicUpdate is not supported");if(typeof i=="function"){const s=this.get(r);this._changes.set(r.key,i(s))}else zoe(this._store,r.key,"set"),this._changes.set(r.key,i)}),bt(this,"reset",r=>{this.set(r,$oe)}),this._store=e,this._treeState=t,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;const e=Goe(this._treeState);for(const[t,r]of this._changes)joe(e,t,Boe(r));return Woe(this._store,e),e}}function Xoe(n){return e=>{n.replaceState(t=>{const r=new qoe(n,t);return e(r),r.newTreeState_INTERNAL()})}}var Koe={atomicUpdater:Xoe},Yoe=Koe.atomicUpdater,G5=Object.freeze({__proto__:null,atomicUpdater:Yoe});function Qoe(n,e){if(!n)throw new Error(e)}var Zoe=Qoe,xm=Zoe;const{atomicUpdater:Joe}=G5,{batchUpdates:eae}=_b,{DEFAULT_VALUE:tae}=Bi,{useStoreRef:nae}=al,{refreshRecoilValue:rae,setRecoilValue:iO}=Jo,{cloneSnapshot:iae}=wb,{gotoSnapshot:sae}=V5,{useCallback:oae}=Et;class H5{}const aae=new H5;function W5(n,e,t,r){let i=aae,s;if(eae(()=>{const a="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw Rt(a);const l=r5({...r??{},set:(u,h)=>iO(n,u,h),reset:u=>iO(n,u,tae),refresh:u=>rae(n,u),gotoSnapshot:u=>sae(n,u),transact_UNSTABLE:u=>Joe(n)(u)},{snapshot:()=>{const u=iae(n);return s=u.retain(),u}}),c=e(l);if(typeof c!="function")throw Rt(a);i=c(...t)}),i instanceof H5&&xm(!1),En(i))i=i.finally(()=>{var a;(a=s)===null||a===void 0||a()});else{var o;(o=s)===null||o===void 0||o()}return i}function lae(n,e){const t=nae();return oae((...r)=>W5(t.current,n,r),e!=null?[...e,t]:void 0)}var j5={recoilCallback:W5,useRecoilCallback:lae};const{useStoreRef:cae}=al,{refreshRecoilValue:uae}=Jo,{useCallback:hae}=Et;function dae(n){const e=cae();return hae(()=>{const t=e.current;uae(t,n)},[n,e])}var fae=dae;const{atomicUpdater:pae}=G5,{useStoreRef:mae}=al,{useMemo:gae}=Et;function yae(n,e){const t=mae();return gae(()=>(...r)=>{pae(t.current)(s=>{n(s)(...r)})},e!=null?[...e,t]:void 0)}var vae=yae;class _ae{constructor(e){bt(this,"value",void 0),this.value=e}}var xae={WrappedValue:_ae},Sae=xae.WrappedValue,q5=Object.freeze({__proto__:null,WrappedValue:Sae});const{isFastRefreshEnabled:bae}=fy;class sO extends Error{}class wae{constructor(e){var t,r,i;bt(this,"_name",void 0),bt(this,"_numLeafs",void 0),bt(this,"_root",void 0),bt(this,"_onHit",void 0),bt(this,"_onSet",void 0),bt(this,"_mapNodeValue",void 0),this._name=e==null?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=(t=e==null?void 0:e.onHit)!==null&&t!==void 0?t:()=>{},this._onSet=(r=e==null?void 0:e.onSet)!==null&&r!==void 0?r:()=>{},this._mapNodeValue=(i=e==null?void 0:e.mapNodeValue)!==null&&i!==void 0?i:s=>s}size(){return this._numLeafs}root(){return this._root}get(e,t){var r;return(r=this.getLeafNode(e,t))===null||r===void 0?void 0:r.value}getLeafNode(e,t){if(this._root==null)return;let r=this._root;for(;r;){if(t==null||t.onNodeVisit(r),r.type==="leaf")return this._onHit(r),r;const i=this._mapNodeValue(e(r.nodeKey));r=r.branches.get(i)}}set(e,t,r){const i=()=>{var s,o,a,l;let c,u;for(const[y,m]of e){var h,d,f;const _=this._root;if((_==null?void 0:_.type)==="leaf")throw this.invalidCacheError();const v=c;if(c=v?v.branches.get(u):_,c=(h=c)!==null&&h!==void 0?h:{type:"branch",nodeKey:y,parent:v,branches:new Map,branchKey:u},c.type!=="branch"||c.nodeKey!==y)throw this.invalidCacheError();v==null||v.branches.set(u,c),r==null||(d=r.onNodeVisit)===null||d===void 0||d.call(r,c),u=this._mapNodeValue(m),this._root=(f=this._root)!==null&&f!==void 0?f:c}const p=c?(s=c)===null||s===void 0?void 0:s.branches.get(u):this._root;if(p!=null&&(p.type!=="leaf"||p.branchKey!==u))throw this.invalidCacheError();const g={type:"leaf",value:t,parent:c,branchKey:u};(o=c)===null||o===void 0||o.branches.set(u,g),this._root=(a=this._root)!==null&&a!==void 0?a:g,this._numLeafs++,this._onSet(g),r==null||(l=r.onNodeVisit)===null||l===void 0||l.call(r,g)};try{i()}catch(s){if(s instanceof sO)this.clear(),i();else throw s}}delete(e){const t=this.root();if(!t)return!1;if(e===t)return this._root=null,this._numLeafs=0,!0;let r=e.parent,i=e.branchKey;for(;r;){var s;if(r.branches.delete(i),r===t)return r.branches.size===0?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(r.branches.size>0)break;i=(s=r)===null||s===void 0?void 0:s.branchKey,r=r.parent}for(;r!==t;r=r.parent)if(r==null)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=bae()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw KN(e+(this._name!=null?` - ${this._name}`:"")),new sO}}var Tae={TreeCache:wae},Mae=Tae.TreeCache,X5=Object.freeze({__proto__:null,TreeCache:Mae});class Eae{constructor(e){var t;bt(this,"_maxSize",void 0),bt(this,"_size",void 0),bt(this,"_head",void 0),bt(this,"_tail",void 0),bt(this,"_map",void 0),bt(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(t=e.mapKey)!==null&&t!==void 0?t:r=>r}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const t=this._keyMapper(e),r=this._map.get(t);if(r)return this.set(e,r.value),r.value}set(e,t){const r=this._keyMapper(e);this._map.get(r)&&this.delete(e);const s=this.head(),o={key:e,right:s,left:null,value:t};s?s.left=o:this._tail=o,this._map.set(r,o),this._head=o,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const t=this._keyMapper(e);if(!this._size||!this._map.has(t))return;const r=Ln(this._map.get(t)),i=r.right,s=r.left;i&&(i.left=r.left),s&&(s.right=r.right),r===this.head()&&(this._head=i),r===this.tail()&&(this._tail=s),this._map.delete(t),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}}var Aae={LRUCache:Eae},Cae=Aae.LRUCache,K5=Object.freeze({__proto__:null,LRUCache:Cae});const{LRUCache:Rae}=K5,{TreeCache:Nae}=X5;function Pae({name:n,maxSize:e,mapNodeValue:t=r=>r}){const r=new Rae({maxSize:e}),i=new Nae({name:n,mapNodeValue:t,onHit:s=>{r.set(s,!0)},onSet:s=>{const o=r.tail();r.set(s,!0),o&&i.size()>e&&i.delete(o.key)}});return i}var oO=Pae;function Zs(n,e,t){if(typeof n=="string"&&!n.includes('"')&&!n.includes("\\"))return`"${n}"`;switch(typeof n){case"undefined":return"";case"boolean":return n?"true":"false";case"number":case"symbol":return String(n);case"string":return JSON.stringify(n);case"function":if((e==null?void 0:e.allowFunctions)!==!0)throw Rt("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${n.name})__`}if(n===null)return"null";if(typeof n!="object"){var r;return(r=JSON.stringify(n))!==null&&r!==void 0?r:""}if(En(n))return"__PROMISE__";if(Array.isArray(n))return`[${n.map((i,s)=>Zs(i,e,s.toString()))}]`;if(typeof n.toJSON=="function")return Zs(n.toJSON(t),e,t);if(n instanceof Map){const i={};for(const[s,o]of n)i[typeof s=="string"?s:Zs(s,e)]=o;return Zs(i,e,t)}return n instanceof Set?Zs(Array.from(n).sort((i,s)=>Zs(i,e).localeCompare(Zs(s,e))),e,t):Symbol!==void 0&&n[Symbol.iterator]!=null&&typeof n[Symbol.iterator]=="function"?Zs(Array.from(n),e,t):`{${Object.keys(n).filter(i=>n[i]!==void 0).sort().map(i=>`${Zs(i,e)}:${Zs(n[i],e,i)}`).join(",")}}`}function Iae(n,e={allowFunctions:!1}){return Zs(n,e)}var Cb=Iae;const{TreeCache:Lae}=X5,c0={equality:"reference",eviction:"keep-all",maxSize:1/0};function Dae({equality:n=c0.equality,eviction:e=c0.eviction,maxSize:t=c0.maxSize}=c0,r){const i=Oae(n);return Fae(e,t,i,r)}function Oae(n){switch(n){case"reference":return e=>e;case"value":return e=>Cb(e)}throw Rt(`Unrecognized equality policy ${n}`)}function Fae(n,e,t,r){switch(n){case"keep-all":return new Lae({name:r,mapNodeValue:t});case"lru":return oO({name:r,maxSize:Ln(e),mapNodeValue:t});case"most-recent":return oO({name:r,maxSize:1,mapNodeValue:t})}throw Rt(`Unrecognized eviction policy ${n}`)}var kae=Dae;function Uae(n){return()=>null}var Bae={startPerfBlock:Uae};const{isLoadable:zae,loadableWithError:u0,loadableWithPromise:$ae,loadableWithValue:fw}=dy,{WrappedValue:Y5}=q5,{getNodeLoadable:h0,peekNodeLoadable:Vae,setNodeValue:Gae}=Cc,{saveDepsToStore:Hae}=py,{DEFAULT_VALUE:Wae,getConfigDeletionHandler:jae,getNode:qae,registerNode:aO}=Bi,{isRecoilValue:Xae}=Ef,{markRecoilValueModified:lO}=Jo,{retainedByOptionWithDefault:Kae}=eh,{recoilCallback:Yae}=j5,{startPerfBlock:Qae}=Bae;class Q5{}const Pp=new Q5,Ip=[],d0=new Map,Zae=(()=>{let n=0;return()=>n++})();function Z5(n){let e=null;const{key:t,get:r,cachePolicy_UNSTABLE:i}=n,s=n.set!=null?n.set:void 0,o=new Set,a=kae(i??{equality:"reference",eviction:"keep-all"},t),l=Kae(n.retainedBy_UNSTABLE),c=new Map;let u=0;function h(){return!vn("recoil_memory_managament_2020")||u>0}function d(U){return U.getState().knownSelectors.add(t),u++,()=>{u--}}function f(){return jae(t)!==void 0&&!h()}function p(U,te,k,V,Z){D(te,V,Z),g(U,k)}function g(U,te){N(U,te)&&F(U),m(te,!0)}function y(U,te){N(U,te)&&(Ln(S(U)).stateVersions.clear(),m(te,!1))}function m(U,te){const k=d0.get(U);if(k!=null){for(const V of k)lO(V,Ln(e));te&&d0.delete(U)}}function _(U,te){let k=d0.get(te);k==null&&d0.set(te,k=new Set),k.add(U)}function v(U,te,k,V,Z,le){return te.then(pe=>{if(!h())throw F(U),Pp;const ue=fw(pe);return p(U,k,Z,ue,V),pe}).catch(pe=>{if(!h())throw F(U),Pp;if(En(pe))return x(U,pe,k,V,Z,le);const ue=u0(pe);throw p(U,k,Z,ue,V),pe})}function x(U,te,k,V,Z,le){return te.then(pe=>{if(!h())throw F(U),Pp;le.loadingDepKey!=null&&le.loadingDepPromise===te?k.atomValues.set(le.loadingDepKey,fw(pe)):U.getState().knownSelectors.forEach(we=>{k.atomValues.delete(we)});const ue=w(U,k);if(ue&&ue.state!=="loading"){if((N(U,Z)||S(U)==null)&&g(U,Z),ue.state==="hasValue")return ue.contents;throw ue.contents}if(!N(U,Z)){const we=C(U,k);if(we!=null)return we.loadingLoadable.contents}const[be,Pe]=T(U,k,Z);if(be.state!=="loading"&&p(U,k,Z,be,Pe),be.state==="hasError")throw be.contents;return be.contents}).catch(pe=>{if(pe instanceof Q5)throw Pp;if(!h())throw F(U),Pp;const ue=u0(pe);throw p(U,k,Z,ue,V),pe})}function b(U,te,k,V){var Z,le,pe,ue;if(N(U,V)||te.version===((Z=U.getState())===null||Z===void 0||(le=Z.currentTree)===null||le===void 0?void 0:le.version)||te.version===((pe=U.getState())===null||pe===void 0||(ue=pe.nextTree)===null||ue===void 0?void 0:ue.version)){var be,Pe,we;Hae(t,k,U,(be=(Pe=U.getState())===null||Pe===void 0||(we=Pe.nextTree)===null||we===void 0?void 0:we.version)!==null&&be!==void 0?be:U.getState().currentTree.version)}for(const G of k)o.add(G)}function T(U,te,k){const V=Qae(t);let Z=!0,le=!0;const pe=()=>{V(),le=!1};let ue,be=!1,Pe;const we={loadingDepKey:null,loadingDepPromise:null},G=new Map;function Ge({key:Ye}){const De=h0(U,te,Ye);switch(G.set(Ye,De),Z||(b(U,te,new Set(G.keys()),k),y(U,k)),De.state){case"hasValue":return De.contents;case"hasError":throw De.contents;case"loading":throw we.loadingDepKey=Ye,we.loadingDepPromise=De.contents,De.contents}throw Rt("Invalid Loadable state")}const $e=Ye=>(...De)=>{if(le)throw Rt("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return e==null&&xm(!1),Yae(U,Ye,De,{node:e})};try{ue=r({get:Ge,getCallback:$e}),ue=Xae(ue)?Ge(ue):ue,zae(ue)&&(ue.state==="hasError"&&(be=!0),ue=ue.contents),En(ue)?ue=v(U,ue,te,G,k,we).finally(pe):pe(),ue=ue instanceof Y5?ue.value:ue}catch(Ye){ue=Ye,En(ue)?ue=x(U,ue,te,G,k,we).finally(pe):(be=!0,pe())}return be?Pe=u0(ue):En(ue)?Pe=$ae(ue):Pe=fw(ue),Z=!1,I(U,k,G),b(U,te,new Set(G.keys()),k),[Pe,G]}function w(U,te){let k=te.atomValues.get(t);if(k!=null)return k;const V=new Set;try{k=a.get(le=>(typeof le!="string"&&xm(!1),h0(U,te,le).contents),{onNodeVisit:le=>{le.type==="branch"&&le.nodeKey!==t&&V.add(le.nodeKey)}})}catch(le){throw Rt(`Problem with cache lookup for selector "${t}": ${le.message}`)}if(k){var Z;te.atomValues.set(t,k),b(U,te,V,(Z=S(U))===null||Z===void 0?void 0:Z.executionID)}return k}function M(U,te){const k=w(U,te);if(k!=null)return F(U),k;const V=C(U,te);if(V!=null){var Z;return((Z=V.loadingLoadable)===null||Z===void 0?void 0:Z.state)==="loading"&&_(U,V.executionID),V.loadingLoadable}const le=Zae(),[pe,ue]=T(U,te,le);return pe.state==="loading"?(E(U,le,pe,ue,te),_(U,le)):(F(U),D(te,pe,ue)),pe}function C(U,te){const k=x5([c.has(U)?[Ln(c.get(U))]:[],mb(eP(c,([Z])=>Z!==U),([,Z])=>Z)]);function V(Z){for(const[le,pe]of Z)if(!h0(U,te,le).is(pe))return!0;return!1}for(const Z of k){if(Z.stateVersions.get(te.version)||!V(Z.depValuesDiscoveredSoFarDuringAsyncWork))return Z.stateVersions.set(te.version,!0),Z;Z.stateVersions.set(te.version,!1)}}function S(U){return c.get(U)}function E(U,te,k,V,Z){c.set(U,{depValuesDiscoveredSoFarDuringAsyncWork:V,executionID:te,loadingLoadable:k,stateVersions:new Map([[Z.version,!0]])})}function I(U,te,k){if(N(U,te)){const V=S(U);V!=null&&(V.depValuesDiscoveredSoFarDuringAsyncWork=k)}}function F(U){c.delete(U)}function N(U,te){var k;return te===((k=S(U))===null||k===void 0?void 0:k.executionID)}function R(U){return Array.from(U.entries()).map(([te,k])=>[te,k.contents])}function D(U,te,k){U.atomValues.set(t,te);try{a.set(R(k),te)}catch(V){throw Rt(`Problem with setting cache for selector "${t}": ${V.message}`)}}function j(U){if(Ip.includes(t)){const te=`Recoil selector has circular dependencies: ${Ip.slice(Ip.indexOf(t)).join("  ")}`;return u0(Rt(te))}Ip.push(t);try{return U()}finally{Ip.pop()}}function L(U,te){const k=te.atomValues.get(t);return k??a.get(V=>{var Z;return typeof V!="string"&&xm(!1),(Z=Vae(U,te,V))===null||Z===void 0?void 0:Z.contents})}function W(U,te){return j(()=>M(U,te))}function z(U){U.atomValues.delete(t)}function X(U,te){e==null&&xm(!1);for(const V of o){var k;const Z=qae(V);(k=Z.clearCache)===null||k===void 0||k.call(Z,U,te)}o.clear(),z(te),a.clear(),lO(U,e)}return s!=null?e=aO({key:t,nodeType:"selector",peek:L,get:W,set:(te,k,V)=>{let Z=!1;const le=new Map;function pe({key:we}){if(Z)throw Rt("Recoil: Async selector sets are not currently supported.");const G=h0(te,k,we);if(G.state==="hasValue")return G.contents;if(G.state==="loading"){const Ge=`Getting value of asynchronous atom or selector "${we}" in a pending state while setting selector "${t}" is not yet supported.`;throw Rt(Ge)}else throw G.contents}function ue(we,G){if(Z)throw Rt("Recoil: Async selector sets are not currently supported.");const Ge=typeof G=="function"?G(pe(we)):G;Gae(te,k,we.key,Ge).forEach((Ye,De)=>le.set(De,Ye))}function be(we){ue(we,Wae)}const Pe=s({set:ue,get:pe,reset:be},V);if(Pe!==void 0)throw En(Pe)?Rt("Recoil: Async selector sets are not currently supported."):Rt("Recoil: selector set should be a void function.");return Z=!0,le},init:d,invalidate:z,clearCache:X,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:n.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l}):e=aO({key:t,nodeType:"selector",peek:L,get:W,init:d,invalidate:z,clearCache:X,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:n.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}Z5.value=n=>new Y5(n);var Rf=Z5;const{isLoadable:Jae,loadableWithError:pw,loadableWithPromise:mw,loadableWithValue:gh}=dy,{WrappedValue:J5}=q5,{peekNodeInfo:ele}=Cc,{DEFAULT_VALUE:iu,DefaultValue:Ul,getConfigDeletionHandler:eV,registerNode:tle,setConfigDeletionHandler:nle}=Bi,{isRecoilValue:rle}=Ef,{getRecoilValueAsLoadable:ile,markRecoilValueModified:sle,setRecoilValue:cO,setRecoilValueLoadable:ole}=Jo,{retainedByOptionWithDefault:ale}=eh,Lp=n=>n instanceof J5?n.value:n;function lle(n){const{key:e,persistence_UNSTABLE:t}=n,r=ale(n.retainedBy_UNSTABLE);let i=0;function s(_){return mw(_.then(v=>(o=gh(v),v)).catch(v=>{throw o=pw(v),v}))}let o=En(n.default)?s(n.default):Jae(n.default)?n.default.state==="loading"?s(n.default.contents):n.default:gh(Lp(n.default));o.contents;let a;const l=new Map;function c(_){return _}function u(_,v){const x=v.then(b=>{var T,w;return((w=((T=_.getState().nextTree)!==null&&T!==void 0?T:_.getState().currentTree).atomValues.get(e))===null||w===void 0?void 0:w.contents)===x&&cO(_,m,b),b}).catch(b=>{var T,w;throw((w=((T=_.getState().nextTree)!==null&&T!==void 0?T:_.getState().currentTree).atomValues.get(e))===null||w===void 0?void 0:w.contents)===x&&ole(_,m,pw(b)),b});return x}function h(_,v,x){var b;i++;const T=()=>{var S;i--,(S=l.get(_))===null||S===void 0||S.forEach(E=>E()),l.delete(_)};if(_.getState().knownAtoms.add(e),o.state==="loading"){const S=()=>{var E;((E=_.getState().nextTree)!==null&&E!==void 0?E:_.getState().currentTree).atomValues.has(e)||sle(_,m)};o.contents.finally(S)}const w=(b=n.effects)!==null&&b!==void 0?b:n.effects_UNSTABLE;if(w!=null){let S=function(z){if(N&&z.key===e){const X=F;return X instanceof Ul?d(_,v):En(X)?mw(X.then(U=>U instanceof Ul?o.toPromise():U)):gh(X)}return ile(_,z)},E=function(z){return S(z).toPromise()},I=function(z){var X;const U=ele(_,(X=_.getState().nextTree)!==null&&X!==void 0?X:_.getState().currentTree,z.key);return N&&z.key===e&&!(F instanceof Ul)?{...U,isSet:!0,loadable:S(z)}:U},F=iu,N=!0,R=!1,D=null;const j=z=>X=>{if(N){const U=S(m),te=U.state==="hasValue"?U.contents:iu;F=typeof X=="function"?X(te):X,En(F)&&(F=F.then(k=>(D={effect:z,value:k},k)))}else{if(En(X))throw Rt("Setting atoms to async values is not implemented.");typeof X!="function"&&(D={effect:z,value:Lp(X)}),cO(_,m,typeof X=="function"?U=>{const te=Lp(X(U));return D={effect:z,value:te},te}:Lp(X))}},L=z=>()=>j(z)(iu),W=z=>X=>{var U;const{release:te}=_.subscribeToTransactions(k=>{var V;let{currentTree:Z,previousTree:le}=k.getState();le||(le=Z);const pe=(V=Z.atomValues.get(e))!==null&&V!==void 0?V:o;if(pe.state==="hasValue"){var ue,be,Pe,we;const G=pe.contents,Ge=(ue=le.atomValues.get(e))!==null&&ue!==void 0?ue:o,$e=Ge.state==="hasValue"?Ge.contents:iu;((be=D)===null||be===void 0?void 0:be.effect)!==z||((Pe=D)===null||Pe===void 0?void 0:Pe.value)!==G?X(G,$e,!Z.atomValues.has(e)):((we=D)===null||we===void 0?void 0:we.effect)===z&&(D=null)}},e);l.set(_,[...(U=l.get(_))!==null&&U!==void 0?U:[],te])};for(const z of w)try{const X=z({node:m,storeID:_.storeID,parentStoreID_UNSTABLE:_.parentStoreID,trigger:x,setSelf:j(z),resetSelf:L(z),onSet:W(z),getPromise:E,getLoadable:S,getInfo_UNSTABLE:I});if(X!=null){var M;l.set(_,[...(M=l.get(_))!==null&&M!==void 0?M:[],X])}}catch(X){F=X,R=!0}if(N=!1,!(F instanceof Ul)){var C;const z=R?pw(F):En(F)?mw(u(_,F)):gh(Lp(F));z.contents,v.atomValues.set(e,z),(C=_.getState().nextTree)===null||C===void 0||C.atomValues.set(e,z)}}return T}function d(_,v){var x,b;return(x=(b=v.atomValues.get(e))!==null&&b!==void 0?b:a)!==null&&x!==void 0?x:o}function f(_,v){if(v.atomValues.has(e))return Ln(v.atomValues.get(e));if(v.nonvalidatedAtoms.has(e)){if(a!=null)return a;if(t==null)return o;const x=v.nonvalidatedAtoms.get(e),b=t.validator(x,iu);return a=b instanceof Ul?o:gh(b),a}else return o}function p(){a=void 0}function g(_,v,x){if(v.atomValues.has(e)){const b=Ln(v.atomValues.get(e));if(b.state==="hasValue"&&x===b.contents)return new Map}else if(!v.nonvalidatedAtoms.has(e)&&x instanceof Ul)return new Map;return a=void 0,new Map().set(e,gh(x))}function y(){return eV(e)!==void 0&&i<=0}const m=tle({key:e,nodeType:"atom",peek:d,get:f,set:g,init:h,invalidate:p,shouldDeleteConfigOnRelease:y,dangerouslyAllowMutability:n.dangerouslyAllowMutability,persistence_UNSTABLE:n.persistence_UNSTABLE?{type:n.persistence_UNSTABLE.type,backButton:n.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return m}function uP(n){const{...e}=n,t="default"in n?n.default:new Promise(()=>{});return rle(t)?cle({...e,default:t}):lle({...e,default:t})}function cle(n){const e=uP({...n,default:iu,persistence_UNSTABLE:n.persistence_UNSTABLE===void 0?void 0:{...n.persistence_UNSTABLE,validator:r=>r instanceof Ul?r:Ln(n.persistence_UNSTABLE).validator(r,iu)},effects:n.effects,effects_UNSTABLE:n.effects_UNSTABLE}),t=Rf({key:`${n.key}__withFallback`,get:({get:r})=>{const i=r(e);return i instanceof Ul?n.default:i},set:({set:r},i)=>r(e,i),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:n.dangerouslyAllowMutability});return nle(t.key,eV(n.key)),t}uP.value=n=>new J5(n);var tV=uP;class ule{constructor(e){var t;bt(this,"_map",void 0),bt(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(t=e==null?void 0:e.mapKey)!==null&&t!==void 0?t:r=>r}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,t){this._map.set(this._keyMapper(e),t)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}}var hle={MapCache:ule},dle=hle.MapCache,fle=Object.freeze({__proto__:null,MapCache:dle});const{LRUCache:uO}=K5,{MapCache:ple}=fle,f0={equality:"reference",eviction:"none",maxSize:1/0};function mle({equality:n=f0.equality,eviction:e=f0.eviction,maxSize:t=f0.maxSize}=f0){const r=gle(n);return yle(e,t,r)}function gle(n){switch(n){case"reference":return e=>e;case"value":return e=>Cb(e)}throw Rt(`Unrecognized equality policy ${n}`)}function yle(n,e,t){switch(n){case"keep-all":return new ple({mapKey:t});case"lru":return new uO({mapKey:t,maxSize:Ln(e)});case"most-recent":return new uO({mapKey:t,maxSize:1})}throw Rt(`Unrecognized eviction policy ${n}`)}var nV=mle;const{setConfigDeletionHandler:vle}=Bi;function _le(n){var e,t;const r=nV({equality:(e=(t=n.cachePolicyForParams_UNSTABLE)===null||t===void 0?void 0:t.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s,o;const a=r.get(i);if(a!=null)return a;const{cachePolicyForParams_UNSTABLE:l,...c}=n,u="default"in n?n.default:new Promise(()=>{}),h=tV({...c,key:`${n.key}__${(s=Cb(i))!==null&&s!==void 0?s:"void"}`,default:typeof u=="function"?u(i):u,retainedBy_UNSTABLE:typeof n.retainedBy_UNSTABLE=="function"?n.retainedBy_UNSTABLE(i):n.retainedBy_UNSTABLE,effects:typeof n.effects=="function"?n.effects(i):typeof n.effects_UNSTABLE=="function"?n.effects_UNSTABLE(i):(o=n.effects)!==null&&o!==void 0?o:n.effects_UNSTABLE});return r.set(i,h),vle(h.key,()=>{r.delete(i)}),h}}var xle=_le;const{setConfigDeletionHandler:Sle}=Bi;let ble=0;function wle(n){var e,t;const r=nV({equality:(e=(t=n.cachePolicyForParams_UNSTABLE)===null||t===void 0?void 0:t.equality)!==null&&e!==void 0?e:"value",eviction:"keep-all"});return i=>{var s;let o;try{o=r.get(i)}catch(d){throw Rt(`Problem with cache lookup for selector ${n.key}: ${d.message}`)}if(o!=null)return o;const a=`${n.key}__selectorFamily/${(s=Cb(i,{allowFunctions:!0}))!==null&&s!==void 0?s:"void"}/${ble++}`,l=d=>n.get(i)(d),c=n.cachePolicy_UNSTABLE,u=typeof n.retainedBy_UNSTABLE=="function"?n.retainedBy_UNSTABLE(i):n.retainedBy_UNSTABLE;let h;if(n.set!=null){const d=n.set;h=Rf({key:a,get:l,set:(p,g)=>d(i)(p,g),cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:n.dangerouslyAllowMutability,retainedBy_UNSTABLE:u})}else h=Rf({key:a,get:l,cachePolicy_UNSTABLE:c,dangerouslyAllowMutability:n.dangerouslyAllowMutability,retainedBy_UNSTABLE:u});return r.set(i,h),Sle(h.key,()=>{r.delete(i)}),h}}var Rc=wle;const Tle=Rc({key:"__constant",get:n=>()=>n,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function Mle(n){return Tle(n)}var Ele=Mle;const Ale=Rc({key:"__error",get:n=>()=>{throw Rt(n)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function Cle(n){return Ale(n)}var Rle=Cle;function Nle(n){return n}var Ple=Nle;const{loadableWithError:rV,loadableWithPromise:iV,loadableWithValue:sV}=dy;function Rb(n,e){const t=Array(e.length).fill(void 0),r=Array(e.length).fill(void 0);for(const[i,s]of e.entries())try{t[i]=n(s)}catch(o){r[i]=o}return[t,r]}function Ile(n){return n!=null&&!En(n)}function Nb(n){return Array.isArray(n)?n:Object.getOwnPropertyNames(n).map(e=>n[e])}function sA(n,e){return Array.isArray(n)?e:Object.getOwnPropertyNames(n).reduce((t,r,i)=>({...t,[r]:e[i]}),{})}function kd(n,e,t){const r=t.map((i,s)=>i==null?sV(e[s]):En(i)?iV(i):rV(i));return sA(n,r)}function Lle(n,e){return e.map((t,r)=>t===void 0?n[r]:t)}const Dle=Rc({key:"__waitForNone",get:n=>({get:e})=>{const t=Nb(n),[r,i]=Rb(e,t);return kd(n,r,i)},dangerouslyAllowMutability:!0}),Ole=Rc({key:"__waitForAny",get:n=>({get:e})=>{const t=Nb(n),[r,i]=Rb(e,t);return i.some(s=>!En(s))?kd(n,r,i):new Promise(s=>{for(const[o,a]of i.entries())En(a)&&a.then(l=>{r[o]=l,i[o]=void 0,s(kd(n,r,i))}).catch(l=>{i[o]=l,s(kd(n,r,i))})})},dangerouslyAllowMutability:!0}),Fle=Rc({key:"__waitForAll",get:n=>({get:e})=>{const t=Nb(n),[r,i]=Rb(e,t);if(i.every(o=>o==null))return sA(n,r);const s=i.find(Ile);if(s!=null)throw s;return Promise.all(i).then(o=>sA(n,Lle(r,o)))},dangerouslyAllowMutability:!0}),kle=Rc({key:"__waitForAllSettled",get:n=>({get:e})=>{const t=Nb(n),[r,i]=Rb(e,t);return i.every(s=>!En(s))?kd(n,r,i):Promise.all(i.map((s,o)=>En(s)?s.then(a=>{r[o]=a,i[o]=void 0}).catch(a=>{r[o]=void 0,i[o]=a}):null)).then(()=>kd(n,r,i))},dangerouslyAllowMutability:!0}),Ule=Rc({key:"__noWait",get:n=>({get:e})=>{try{return Rf.value(sV(e(n)))}catch(t){return Rf.value(En(t)?iV(t):rV(t))}},dangerouslyAllowMutability:!0});var Ble={waitForNone:Dle,waitForAny:Ole,waitForAll:Fle,waitForAllSettled:kle,noWait:Ule};const{RecoilLoadable:zle}=dy,{DefaultValue:$le}=Bi,{RecoilRoot:Vle,useRecoilStoreID:Gle}=al,{isRecoilValue:Hle}=Ef,{retentionZone:Wle}=yb,{freshSnapshot:jle}=wb,{useRecoilState:qle,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Xle,useRecoilStateLoadable:Kle,useRecoilValue:Yle,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Qle,useRecoilValueLoadable:Zle,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Jle,useResetRecoilState:ece,useSetRecoilState:tce}=hoe,{useGotoRecoilSnapshot:nce,useRecoilSnapshot:rce,useRecoilTransactionObserver:ice}=V5,{useRecoilCallback:sce}=j5,{noWait:oce,waitForAll:ace,waitForAllSettled:lce,waitForAny:cce,waitForNone:uce}=Ble;var Pb={DefaultValue:$le,isRecoilValue:Hle,RecoilLoadable:zle,RecoilEnv:ep,RecoilRoot:Vle,useRecoilStoreID:Gle,useRecoilBridgeAcrossReactRoots_UNSTABLE:Uoe,atom:tV,selector:Rf,atomFamily:xle,selectorFamily:Rc,constSelector:Ele,errorSelector:Rle,readOnlySelector:Ple,noWait:oce,waitForNone:uce,waitForAny:cce,waitForAll:ace,waitForAllSettled:lce,useRecoilValue:Yle,useRecoilValueLoadable:Zle,useRecoilState:qle,useRecoilStateLoadable:Kle,useSetRecoilState:tce,useResetRecoilState:ece,useGetRecoilValueInfo_UNSTABLE:Ioe,useRecoilRefresher_UNSTABLE:fae,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Jle,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Qle,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:Xle,useRecoilCallback:sce,useRecoilTransaction_UNSTABLE:vae,useGotoRecoilSnapshot:nce,useRecoilSnapshot:rce,useRecoilTransactionObserver_UNSTABLE:ice,snapshot_UNSTABLE:jle,useRetain:sP,retentionZone:Wle},hce=Pb.RecoilRoot,vy=Pb.atom,dce=Pb.useRecoilValue,_y=Pb.useRecoilState;const fce=vy({key:"alertState_key",default:{isOpen:!1,hideDuration:5e3,message:"",type:Ng.ERROR}}),oV=()=>{const[n,e]=_y(fce),t=P.useCallback(({message:i,hideDuration:s=5e3,alertType:o=Ng.INFO})=>{e(a=>({...a,message:i,hideDuration:s,type:o,isOpen:!0}))},[e]),r=P.useCallback(()=>{e(i=>({...i,isOpen:!1}))},[e]);return{isOpen:n.isOpen,alertOption:n,onAlertOpen:t,onAlertClose:r}};var Ud=(n=>(n[n.LIGHT=0]="LIGHT",n[n.DARK=1]="DARK",n))(Ud||{});const pce=()=>{const{LIGHT:n,DARK:e}=Ud;return window.matchMedia("(prefers-color-scheme: dark)").matches?e:n},aV=vy({key:"themeState",default:pce()}),lV=()=>{const[n,e]=_y(aV),{LIGHT:t,DARK:r}=Ud,i=P.useCallback(()=>{e(n===Ud.LIGHT?r:t)},[e,n]);return{isThemeLight:P.useMemo(()=>n===Ud.LIGHT,[n]),onChangeTheme:i}};var gx=(n=>(n.ar_AE="ar_AE",n.en_US="en_US",n.cs_CZ="cs_CZ",n.de_DE="de_DE",n.el_GR="el_GR",n.en_AU="en_AU",n.en_GB="en_GB",n.en_PH="en_PH",n.en_SG="en_SG",n.es_ES="es_ES",n.es_MX="es_MX",n.fr_FR="fr_FR",n.hu_HU="hu_HU",n.it_IT="it_IT",n.ja_JP="ja_JP",n.ko_KR="ko_KR",n.pl_PL="pl_PL",n.pt_BR="pt_BR",n.ro_RO="ro_RO",n.ru_RU="ru_RU",n.th_TH="th_TH",n.tr_TR="tr_TR",n.vi_VN="vi_VN",n.zh_CN="zh_CN",n.zh_TW="zh_TW",n))(gx||{});const mce={ar_AE:"",en_US:"English (NA)",cs_CZ:"etina",de_DE:"Deutsch",el_GR:"",en_AU:"English (OCE)",en_GB:"English (EUW)",en_PH:"English (PH)",en_SG:"English (SG)",es_ES:"Espaol (EUW)",es_MX:"Espaol (LATAM)",fr_FR:"Franais",hu_HU:"Magyar",it_IT:"Italiano",ja_JP:"",ko_KR:"",pl_PL:"Polski",pt_BR:"Portugus",ro_RO:"Romn",ru_RU:"",th_TH:"",tr_TR:"Trke",vi_VN:"Ting Vit",zh_CN:"",zh_TW:""},gce=()=>{let n=navigator.language.replace("-","_");switch(n){case"ar":n="ar_AE";break;case"cs":n="cs_CZ";break;case"de":n="de_DE";break;case"el":n="el_GR";break;case"en":n="en_US";break;case"es":n="es_ES";break;case"fr":n="fr_FR";break;case"hu":n="hu_HU";break;case"it":n="it_IT";break;case"ja":n="ja_JP";break;case"ko":n="ko_KR";break;case"pl":n="pl_PL";break;case"pt":n="pt_BR";break;case"ro":n="ro_RO";break;case"ru":n="ru_RU";break;case"th":n="th_TH";break;case"tr":n="tr_TR";break;case"vi":n="vi_VN";break;case"zh":n="zh_CN";break}return gx[n]||gx.en_US},hO=n=>{var e=/[a-zA-Z]/;return e.test(n)},yce=vy({key:"filterState_key",default:{language:gce()}}),hP=()=>{const[n,e]=_y(yce),t=P.useCallback(r=>{e(i=>({...i,language:r}))},[e]);return{language:n.language,onChangeLanguage:t}},vce=vy({key:"modalState",default:{isOpen:!1,champId:""}}),cV=()=>{const[n,e]=_y(vce),t=P.useCallback(i=>{e({isOpen:!0,champId:i})},[e]),r=P.useCallback(()=>{e({isOpen:!1,champId:""})},[e]);return{open:n.isOpen,championId:n.champId,openModal:t,closeModal:r}},_ce=vy({key:"searchState",default:""}),dP=()=>{const[n,e]=_y(_ce),t=P.useCallback(i=>{e(i)},[]),r=P.useCallback(()=>{e("")},[]);return{searchParams:n,onSearch:t,onResetSearch:r}},xce=zs(q.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel"),Sce=zs(q.jsx("path",{d:"M18.3 5.71a.996.996 0 0 0-1.41 0L12 10.59 7.11 5.7a.996.996 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41s1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0s.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4"}),"CloseRounded"),bce=zs(q.jsx("path",{d:"M11.01 3.05C6.51 3.54 3 7.36 3 12c0 4.97 4.03 9 9 9 4.63 0 8.45-3.5 8.95-8 .09-.79-.78-1.42-1.54-.95-.84.54-1.84.85-2.91.85-2.98 0-5.4-2.42-5.4-5.4 0-1.06.31-2.06.84-2.89.45-.67-.04-1.63-.93-1.56"}),"DarkModeRounded"),wce=zs(q.jsx("path",{d:"M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0s.41-1.08 0-1.49zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"SearchRounded"),Tce=zs(q.jsx("path",{d:"M19.5 12c0-.23-.01-.45-.03-.68l1.86-1.41c.4-.3.51-.86.26-1.3l-1.87-3.23c-.25-.44-.79-.62-1.25-.42l-2.15.91c-.37-.26-.76-.49-1.17-.68l-.29-2.31c-.06-.5-.49-.88-.99-.88h-3.73c-.51 0-.94.38-1 .88l-.29 2.31c-.41.19-.8.42-1.17.68l-2.15-.91c-.46-.2-1-.02-1.25.42L2.41 8.62c-.25.44-.14.99.26 1.3l1.86 1.41c-.02.22-.03.44-.03.67s.01.45.03.68l-1.86 1.41c-.4.3-.51.86-.26 1.3l1.87 3.23c.25.44.79.62 1.25.42l2.15-.91c.37.26.76.49 1.17.68l.29 2.31c.06.5.49.88.99.88h3.73c.5 0 .93-.38.99-.88l.29-2.31c.41-.19.8-.42 1.17-.68l2.15.91c.46.2 1 .02 1.25-.42l1.87-3.23c.25-.44.14-.99-.26-1.3l-1.86-1.41c.03-.23.04-.45.04-.68m-7.46 3.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5"}),"SettingsRounded"),Mce=({})=>{var h;const{closeModal:n,open:e,championId:t}=cV(),{isThemeLight:r}=lV(),{language:i}=hP(),{data:s,isLoading:o}=xne({champId:t,language:i}),a=Ac(),l=Hq(a.breakpoints.down("sm")),c=P.useMemo(()=>{var f;const d=((f=s==null?void 0:s.data)==null?void 0:f[t])||{};return{bgImgMb:`https://ddragon.leagueoflegends.com/cdn/img/champion/loading/${t}_0.jpg`,bgImg:`https://ddragon.leagueoflegends.com/cdn/img/champion/splash/${t}_0.jpg`,champName:d.name||"",champTitle:d.title||"",champLore:d.lore||"",champTags:d.tags||[]}},[t,s]),u=()=>{n()};return q.jsx(aee,{open:e,onClose:u,fullWidth:!0,maxWidth:"lg",fullScreen:l,children:q.jsx(cQ,{className:"dialog-content",sx:{backgroundImage:`url(${l?c.bgImgMb:c.bgImg})`,height:{xs:"100vh",sm:"90vh",md:"80vh"}},children:q.jsxs(E4,{className:"dialog-content-box",sx:{padding:{xs:"20px 16px",sm:"30px",md:"50px 52px",lg:"70px 72px"},background:r?"linear-gradient(45deg, #ffffff, #ffffff42, #fff0)":"linear-gradient(45deg, #000000, #00000042, #fff0)"},children:[q.jsx(Mg,{className:"dialog-content-box-cancle",size:"large",onClick:u,children:q.jsx(xce,{})}),o?q.jsxs(q.Fragment,{children:[q.jsx(s0,{variant:"rounded",width:"60%",height:20}),q.jsx(s0,{variant:"rounded",width:"50%",height:50,sx:{mt:2,mb:2}}),q.jsx(s0,{variant:"text",width:"30%",height:40}),q.jsx(s0,{variant:"rounded",sx:{width:{xs:"100%",sm:"65%"},mt:2},height:200})]}):q.jsxs(q.Fragment,{children:[q.jsx(Od,{className:"dialog-content-box-subtitle",variant:"h5",fontWeight:"regular",textAlign:"left",children:c==null?void 0:c.champTitle}),q.jsx(Od,{variant:"h2",fontWeight:"bold",textAlign:"left",children:c.champName}),c.champTags.length>0&&q.jsx("div",{className:"dialog-content-box-tags",children:(h=c.champTags)==null?void 0:h.map(d=>q.jsx(aY,{label:`#${d}`,size:"small",itemType:"detail"},`${t}_${d}`))}),q.jsx(Od,{variant:"body1",textAlign:"left",sx:{width:{xs:"100%",sm:"65%"},mt:2},children:c.champLore})]})]})})})},Ece=sb(wQ)`
  .drawer-wrapper {
    padding: 24px 0;
    height: 100%;
    display: flex;
    flex-direction: column;

    &-top {
      width: 100%;
      display: flex;
      justify-content: space-between;
      padding: 0 24px;
      align-items: center;
    }

    &-middle {
      width: 100%;
      flex: 1;
      text-align: left;
      padding: 0 24px;
      margin: 12px 0 24px 0;

      > p {
        font-weight: bold;
      }
    }

    &-bottom {
      width: 100%;

      &-lang {
        margin-bottom: 24px;
        padding: 0 24px;
        text-align: left;

        > p {
          text-align: left;
          font-weight: bold;
          margin-bottom: 4px;
        }
      }

      &-footer {
        padding: 24px 0 0 24px;

        > p {
          text-align: left;
          font-size: 0.9rem;
        }
      }
    }
  }
`,Ace=n=>Object.entries(n.data).map(([e,t])=>({id:t.id,img:`https://ddragon.leagueoflegends.com/cdn/14.21.1/img/champion/${t.image.full}`,name:t.name})),Cce=n=>Object.entries(n).map(([e,t])=>({key:e,value:t})),Rce=({drawerOpen:n=!1,onDrawerClose:e})=>{const{onResetSearch:t}=dP(),{language:r,onChangeLanguage:i}=hP(),[s,o]=P.useState({lang:r,filter:{}}),a=P.useMemo(()=>Cce(mce),[]),l=async()=>{i(s.lang),t&&t(),e&&e()},c=u=>{o(h=>({...h,lang:u.target.value}))};return q.jsx(Ece,{open:n,anchor:"right",onClose:l,children:q.jsxs(E4,{className:"drawer-wrapper",sx:{width:{xs:"100vw",sm:"300px"}},children:[q.jsxs("div",{className:"drawer-wrapper-top",children:[q.jsx(Od,{variant:"h6",fontWeight:"bold",children:"SETTING"}),q.jsx(Mg,{onClick:l,children:q.jsx(Sce,{})})]}),q.jsx("div",{className:"drawer-wrapper-middle",children:q.jsx("p",{children:"FILTER"})}),q.jsxs("div",{className:"drawer-wrapper-bottom",children:[q.jsxs("div",{className:"drawer-wrapper-bottom-lang",children:[q.jsx("p",{children:"LANGUAGE"}),q.jsx(DN,{defaultValue:gx.en_US,value:s.lang,fullWidth:!0,size:"small",variant:"outlined",color:"secondary",onChange:c,children:a.map(({key:u,value:h})=>q.jsx(mZ,{value:u,children:h},u))})]}),q.jsx(_E,{}),q.jsxs("div",{className:"drawer-wrapper-bottom-footer",children:[q.jsx(Od,{color:"secondary",children:"@emyo.155"}),q.jsx(Od,{color:"secondary",children:"https://github.com/leemyou"})]})]})]})})},Nce=sb.div`
  height: 40px;
  padding: 0 40px;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;

  .header-search-wrapper {
    display: flex;
    align-items: center;

    > svg {
      margin: 4px 2px 0 0;
      cursor: pointer;
    }
  }

  .header-btn-wrapper {
    display: flex;
    column-gap: 8px;
  }
`,Pce=()=>{const{onChangeTheme:n}=lV(),{onSearch:e,searchParams:t}=dP(),[r,i]=P.useState(!1),[s,o]=P.useState(t),a=()=>{i(!0)},l=()=>{i(!1)},c=()=>{n()},u=f=>{o(f.target.value)},h=()=>{e(s)},d=f=>{f.key==="Enter"&&h()};return q.jsxs(q.Fragment,{children:[q.jsxs(Nce,{style:{borderBottom:".5px solid #95959539"},children:[q.jsxs("div",{className:"header-search-wrapper",children:[q.jsx(iJ,{id:"input-with-sx",label:"",variant:"standard",color:"secondary",placeholder:" ",value:s,onKeyDown:d,onChange:u}),q.jsx(wce,{sx:{color:"action.active",mr:1,my:.5},onClick:h})]}),q.jsxs("div",{className:"header-btn-wrapper",children:[q.jsx(Mg,{onClick:c,children:q.jsx(bce,{})}),q.jsx(Mg,{onClick:a,children:q.jsx(Tce,{})})]})]}),q.jsx(Rce,{drawerOpen:r,onDrawerClose:l})]})},Ice=[{id:"Demacia",img:"src/assets/images/region/demacia.webp"},{id:"Noxus",img:"src/assets/images/region/noxus.webp"},{id:"Bilgewater",img:"src/assets/images/region/bilgewater.webp"},{id:"Freljord",img:"src/assets/images/region/freljoird.webp"},{id:"ShadowIsles",img:"src/assets/images/region/shadowIsles.webp"},{id:"Shurima",img:"src/assets/images/region/shurima.webp"},{id:"Ixtal",img:"src/assets/images/region/ixtal.webp"},{id:"Ionia",img:"src/assets/images/region/ionia.webp"},{id:"BandleCity",img:"src/assets/images/region/bandleCity.webp"},{id:"Targon",img:"src/assets/images/region/targon.webp"},{id:"Zaun",img:"src/assets/images/region/zaun.webp"},{id:"Void",img:"src/assets/images/region/void.webp"},{id:"Piltover",img:"src/assets/images/region/piltover.webp"},{id:"Runeterra",img:"src/assets/images/region/runeterra.webp"}],Lce=[{source:"Runeterra",target:"Demacia"},{source:"Runeterra",target:"Noxus"},{source:"Runeterra",target:"Bilgewater"},{source:"Runeterra",target:"Freljord"},{source:"Runeterra",target:"ShadowIsles"},{source:"Runeterra",target:"Ixtal"},{source:"Runeterra",target:"Ionia"},{source:"Runeterra",target:"Targon"},{source:"Runeterra",target:"Zaun"},{source:"Runeterra",target:"Piltover"},{source:"Runeterra",target:"Shurima"}],gl={nodes:Ice,links:Lce},Dce=[{source:"Aatrox",target:"Runeterra"},{source:"Ahri",target:"Ionia"},{source:"Akali",target:"Ionia"},{source:"Akshan",target:"Shurima"},{source:"Alistar",target:"Runeterra"},{source:"Amumu",target:"Shurima"},{source:"Anivia",target:"Freljord"},{source:"Annie",target:"Runeterra"},{source:"Aphelios",target:"Targon"},{source:"Ashe",target:"Freljord"},{source:"AurelionSol",target:"Runeterra"},{source:"Aurora",target:"Freljord"},{source:"Azir",target:"Shurima"},{source:"Bard",target:"Runeterra"},{source:"Belveth",target:"Void"},{source:"Blitzcrank",target:"Zaun"},{source:"Brand",target:"Runeterra"},{source:"Braum",target:"Freljord"},{source:"Briar",target:"Noxus"},{source:"Caitlyn",target:"Piltover"},{source:"Camille",target:"Piltover"},{source:"Cassiopeia",target:"Noxus"},{source:"Chogath",target:"Void"},{source:"Corki",target:"BandleCity"},{source:"Darius",target:"Noxus"},{source:"Diana",target:"Targon"},{source:"Draven",target:"Noxus"},{source:"DrMundo",target:"Zaun"},{source:"Ekko",target:"Zaun"},{source:"Elise",target:"ShadowIsles"},{source:"Evelynn",target:"Runeterra"},{source:"Ezreal",target:"Piltover"},{source:"Fiddlesticks",target:"Runeterra"},{source:"Fiora",target:"Demacia"},{source:"Fizz",target:"Runeterra"},{source:"Galio",target:"Demacia"},{source:"Gangplank",target:"Bilgewater"},{source:"Garen",target:"Demacia"},{source:"Gnar",target:"Freljord"},{source:"Gragas",target:"Freljord"},{source:"Graves",target:"Bilgewater"},{source:"Gwen",target:"ShadowIsles"},{source:"Hecarim",target:"ShadowIsles"},{source:"Heimerdinger",target:"Piltover"},{source:"Hwei",target:"Ionia"},{source:"Illaoi",target:"Bilgewater"},{source:"Irelia",target:"Ionia"},{source:"Ivern",target:"Ionia"},{source:"Janna",target:"Zaun"},{source:"JarvanIV",target:"Demacia"},{source:"Jax",target:"Runeterra"},{source:"Jayce",target:"Piltover"},{source:"Jhin",target:"Ionia"},{source:"Jinx",target:"Zaun"},{source:"Kaisa",target:"Void"},{source:"Kalista",target:"ShadowIsles"},{source:"Karma",target:"Ionia"},{source:"Karthus",target:"ShadowIsles"},{source:"Kassadin",target:"Void"},{source:"Katarina",target:"Noxus"},{source:"Kayle",target:"Demacia"},{source:"Kayn",target:"Ionia"},{source:"Kennen",target:"Ionia"},{source:"Khazix",target:"Void"},{source:"Kindred",target:"Runeterra"},{source:"Kled",target:"Noxus"},{source:"KogMaw",target:"Void"},{source:"KSante",target:"Shurima"},{source:"Leblanc",target:"Noxus"},{source:"LeeSin",target:"Ionia"},{source:"Leona",target:"Targon"},{source:"Lillia",target:"Ionia"},{source:"Lissandra",target:"Freljord"},{source:"Lucian",target:"Runeterra"},{source:"Lulu",target:"BandleCity"},{source:"Lux",target:"Demacia"},{source:"Malphite",target:"Ixtal"},{source:"Malzahar",target:"Void"},{source:"Maokai",target:"ShadowIsles"},{source:"MasterYi",target:"Ionia"},{source:"Milio",target:"Ixtal"},{source:"MissFortune",target:"Bilgewater"},{source:"MonkeyKing",target:"Ionia"},{source:"Mordekaiser",target:"Noxus"},{source:"Morgana",target:"Demacia"},{source:"Naafiri",target:"Shurima"},{source:"Nami",target:"Runeterra"},{source:"Nasus",target:"Shurima"},{source:"Nautilus",target:"Bilgewater"},{source:"Neeko",target:"Ixtal"},{source:"Nidalee",target:"Ixtal"},{source:"Nilah",target:"Bilgewater"},{source:"Nocturne",target:"Runeterra"},{source:"Nunu",target:"Freljord"},{source:"Olaf",target:"Freljord"},{source:"Orianna",target:"Piltover"},{source:"Ornn",target:"Freljord"},{source:"Pantheon",target:"Targon"},{source:"Poppy",target:"Demacia"},{source:"Pyke",target:"Bilgewater"},{source:"Qiyana",target:"Ixtal"},{source:"Quinn",target:"Demacia"},{source:"Rakan",target:"Ionia"},{source:"Rammus",target:"Shurima"},{source:"RekSai",target:"Void"},{source:"Rell",target:"Noxus"},{source:"Renata",target:"Zaun"},{source:"Renekton",target:"Shurima"},{source:"Rengar",target:"Ixtal"},{source:"Riven",target:"Noxus"},{source:"Rumble",target:"BandleCity"},{source:"Ryze",target:"Runeterra"},{source:"Samira",target:"Noxus"},{source:"Sejuani",target:"Freljord"},{source:"Senna",target:"Runeterra"},{source:"Seraphine",target:"Piltover"},{source:"Sett",target:"Ionia"},{source:"Shaco",target:"Runeterra"},{source:"Shen",target:"Ionia"},{source:"Shyvana",target:"Demacia"},{source:"Singed",target:"Zaun"},{source:"Sion",target:"Noxus"},{source:"Sivir",target:"Shurima"},{source:"Skarner",target:"Ixtal"},{source:"Smolder",target:"Runeterra"},{source:"Sona",target:"Demacia"},{source:"Soraka",target:"Targon"},{source:"Swain",target:"Noxus"},{source:"Sylas",target:"Demacia"},{source:"Syndra",target:"Ionia"},{source:"TahmKench",target:"Runeterra"},{source:"Taliyah",target:"Shurima"},{source:"Talon",target:"Noxus"},{source:"Taric",target:"Targon"},{source:"Teemo",target:"BandleCity"},{source:"Thresh",target:"ShadowIsles"},{source:"Tristana",target:"BandleCity"},{source:"Trundle",target:"Freljord"},{source:"Tryndamere",target:"Freljord"},{source:"TwistedFate",target:"Bilgewater"},{source:"Twitch",target:"Zaun"},{source:"Udyr",target:"Freljord"},{source:"Urgot",target:"Zaun"},{source:"Varus",target:"Ionia"},{source:"Vayne",target:"Demacia"},{source:"Veigar",target:"BandleCity"},{source:"Velkoz",target:"Void"},{source:"Vex",target:"ShadowIsles"},{source:"Vi",target:"Piltover"},{source:"Viego",target:"ShadowIsles"},{source:"Viktor",target:"Zaun"},{source:"Vladimir",target:"Noxus"},{source:"Volibear",target:"Freljord"},{source:"Warwick",target:"Zaun"},{source:"Xayah",target:"Ionia"},{source:"Xerath",target:"Shurima"},{source:"XinZhao",target:"Demacia"},{source:"Yasuo",target:"Ionia"},{source:"Yone",target:"Ionia"},{source:"Yorick",target:"ShadowIsles"},{source:"Yuumi",target:"BandleCity"},{source:"Zac",target:"Zaun"},{source:"Zed",target:"Ionia"},{source:"Zeri",target:"Zaun"},{source:"Ziggs",target:"Zaun"},{source:"Zilean",target:"Runeterra"},{source:"Zoe",target:"Targon"},{source:"Zyra",target:"Ixtal"}],Oce={links:Dce},yl={primary:wz[700],grey:W_[300],bg:W_[50],text:"#000",bgCardChip:"#ffffff70",bgDetailChip:"#00000050"},vl={primary:wz[900],grey:W_[500],bg:"#000",text:W_[50],bgCardChip:"#00000070",bgDetailChip:"#ffffff50"},Fce=50;function kce(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function Uce(n,e,t){return e=jce(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function dO(n,e){return $ce(n)||kce(n,e)||uV(n,e)||Hce()}function Bce(n){return zce(n)||Vce(n)||uV(n)||Gce()}function zce(n){if(Array.isArray(n))return oA(n)}function $ce(n){if(Array.isArray(n))return n}function Vce(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function uV(n,e){if(n){if(typeof n=="string")return oA(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oA(n,e)}}function oA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Gce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wce(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function jce(n){var e=Wce(n,"string");return typeof e=="symbol"?e:String(e)}var qce=function(e,t){var r=new Set(t);return Object.assign.apply(Object,[{}].concat(Bce(Object.entries(e).filter(function(i){var s=dO(i,1),o=s[0];return!r.has(o)}).map(function(i){var s=dO(i,2),o=s[0],a=s[1];return Uce({},o,a)}))))};/*! fromentries. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Xce=function(e){return[...e].reduce((t,[r,i])=>(t[r]=i,t),{})};const fO=Gf(Xce);function aA(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Kce(n){if(Array.isArray(n))return n}function Yce(n){if(Array.isArray(n))return aA(n)}function Qce(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Zce(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function Jce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hV(n,e){return Kce(n)||Zce(n,e)||dV(n,e)||Jce()}function pO(n){return Yce(n)||Qce(n)||dV(n)||eue()}function lA(n){"@babel/helpers - typeof";return lA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lA(n)}function dV(n,e){if(n){if(typeof n=="string")return aA(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?aA(n,e):void 0}}function tue(n,e){var t=lA(e)==="object"?e:{wrapperElementType:e,methodNames:(arguments.length<=2?void 0:arguments[2])||void 0,initPropNames:(arguments.length<=3?void 0:arguments[3])||void 0},r=t.wrapperElementType,i=r===void 0?"div":r,s=t.nodeMapper,o=s===void 0?function(h){return h}:s,a=t.methodNames,l=a===void 0?[]:a,c=t.initPropNames,u=c===void 0?[]:c;return P.forwardRef(function(h,d){var f=P.useRef(),p=P.useState({}),g=hV(p,2),y=g[0],m=g[1];P.useEffect(function(){return m(h)});var _=P.useMemo(function(){var b=fO(u.filter(function(T){return h.hasOwnProperty(T)}).map(function(T){return[T,h[T]]}));return n(b)},[]);mO(function(){_(o(f.current))},P.useLayoutEffect),mO(function(){return _._destructor instanceof Function?_._destructor:void 0});var v=P.useCallback(function(b){for(var T=arguments.length,w=new Array(T>1?T-1:0),M=1;M<T;M++)w[M-1]=arguments[M];return _[b]instanceof Function?_[b].apply(_,w):void 0},[_]),x=qce(h,[].concat(pO(l),pO(u)));return Object.keys(x).filter(function(b){return y[b]!==h[b]}).forEach(function(b){return v(b,h[b])}),P.useImperativeHandle(d,function(){return fO(l.map(function(b){return[b,function(){for(var T=arguments.length,w=new Array(T),M=0;M<T;M++)w[M]=arguments[M];return v.apply(void 0,[b].concat(w))}]}))}),Et.createElement(i,{ref:f})})}function mO(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:P.useEffect,t=P.useRef(),r=P.useRef(!1),i=P.useRef(!1),s=P.useState(0),o=hV(s,2);o[0];var a=o[1];r.current&&(i.current=!0),e(function(){return r.current||(t.current=n(),r.current=!0),a(function(l){return l+1}),function(){i.current&&t.current&&t.current()}},[])}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ib="169",Tr={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Fa={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},nue=0,gO=1,rue=2,fV=1,iue=2,va=3,yc=0,fi=1,Ca=2,Ga=0,Bd=1,yO=2,vO=3,_O=4,sue=5,su=100,oue=101,aue=102,lue=103,cue=104,uue=200,hue=201,due=202,fue=203,cA=204,uA=205,pue=206,mue=207,gue=208,yue=209,vue=210,_ue=211,xue=212,Sue=213,bue=214,hA=0,dA=1,fA=2,Nf=3,pA=4,mA=5,gA=6,yA=7,fP=0,wue=1,Tue=2,uc=0,Mue=1,Eue=2,Aue=3,Cue=4,Rue=5,Nue=6,Pue=7,pV=300,Pf=301,If=302,vA=303,_A=304,Lb=306,xA=1e3,pu=1001,SA=1002,Rs=1003,Iue=1004,p0=1005,ao=1006,gw=1007,mu=1008,rl=1009,mV=1010,gV=1011,Pg=1012,pP=1013,$u=1014,ka=1015,np=1016,mP=1017,gP=1018,Lf=1020,yV=35902,vV=1021,_V=1022,uo=1023,xV=1024,SV=1025,zd=1026,Df=1027,bV=1028,yP=1029,wV=1030,vP=1031,_P=1033,Jv=33776,e_=33777,t_=33778,n_=33779,bA=35840,wA=35841,TA=35842,MA=35843,EA=36196,AA=37492,CA=37496,RA=37808,NA=37809,PA=37810,IA=37811,LA=37812,DA=37813,OA=37814,FA=37815,kA=37816,UA=37817,BA=37818,zA=37819,$A=37820,VA=37821,r_=36492,GA=36494,HA=36495,TV=36283,WA=36284,jA=36285,qA=36286,Lue=3200,Due=3201,MV=0,Oue=1,Gl="",bs="srgb",Nc="srgb-linear",xP="display-p3",Db="display-p3-linear",yx="linear",wn="srgb",vx="rec709",_x="p3",yh=7680,xO=519,Fue=512,kue=513,Uue=514,EV=515,Bue=516,zue=517,$ue=518,Vue=519,XA=35044,SO="300 es",Ua=2e3,xx=2001;let Pc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Vr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let bO=1234567;const Wm=Math.PI/180,Ig=180/Math.PI;function Ha(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Vr[n&255]+Vr[n>>8&255]+Vr[n>>16&255]+Vr[n>>24&255]+"-"+Vr[e&255]+Vr[e>>8&255]+"-"+Vr[e>>16&15|64]+Vr[e>>24&255]+"-"+Vr[t&63|128]+Vr[t>>8&255]+"-"+Vr[t>>16&255]+Vr[t>>24&255]+Vr[r&255]+Vr[r>>8&255]+Vr[r>>16&255]+Vr[r>>24&255]).toLowerCase()}function wr(n,e,t){return Math.max(e,Math.min(t,n))}function SP(n,e){return(n%e+e)%e}function Gue(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function Hue(n,e,t){return n!==e?(t-n)/(e-n):0}function jm(n,e,t){return(1-t)*n+t*e}function Wue(n,e,t,r){return jm(n,e,1-Math.exp(-t*r))}function jue(n,e=1){return e-Math.abs(SP(n,e*2)-e)}function que(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Xue(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Kue(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Yue(n,e){return n+Math.random()*(e-n)}function Que(n){return n*(.5-Math.random())}function Zue(n){n!==void 0&&(bO=n);let e=bO+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Jue(n){return n*Wm}function ehe(n){return n*Ig}function the(n){return(n&n-1)===0&&n!==0}function nhe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function rhe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function ihe(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),h=s((e-r)/2),d=o((e-r)/2),f=s((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*h,l*d,a*c);break;case"YZY":n.set(l*d,a*u,l*h,a*c);break;case"ZXZ":n.set(l*h,l*d,a*u,a*c);break;case"XZX":n.set(a*u,l*p,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*p,a*c);break;case"ZYZ":n.set(l*p,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function lo(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ln(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const KA={DEG2RAD:Wm,RAD2DEG:Ig,generateUUID:Ha,clamp:wr,euclideanModulo:SP,mapLinear:Gue,inverseLerp:Hue,lerp:jm,damp:Wue,pingpong:jue,smoothstep:que,smootherstep:Xue,randInt:Kue,randFloat:Yue,randFloatSpread:Que,seededRandom:Zue,degToRad:Jue,radToDeg:ehe,isPowerOfTwo:the,ceilPowerOfTwo:nhe,floorPowerOfTwo:rhe,setQuaternionFromProperEuler:ihe,normalize:ln,denormalize:lo};let Ve=class AV{constructor(e=0,t=0){AV.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(wr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Pt=class CV{constructor(e,t,r,i,s,o,a,l,c){CV.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],h=r[7],d=r[2],f=r[5],p=r[8],g=i[0],y=i[3],m=i[6],_=i[1],v=i[4],x=i[7],b=i[2],T=i[5],w=i[8];return s[0]=o*g+a*_+l*b,s[3]=o*y+a*v+l*T,s[6]=o*m+a*x+l*w,s[1]=c*g+u*_+h*b,s[4]=c*y+u*v+h*T,s[7]=c*m+u*x+h*w,s[2]=d*g+f*_+p*b,s[5]=d*y+f*v+p*T,s[8]=d*m+f*x+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*s,f=c*s-o*l,p=t*h+r*d+i*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=h*g,e[1]=(i*c-u*r)*g,e[2]=(a*r-i*o)*g,e[3]=d*g,e[4]=(u*t-i*l)*g,e[5]=(i*s-a*t)*g,e[6]=f*g,e[7]=(r*l-c*t)*g,e[8]=(o*t-r*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(yw.makeScale(e,t)),this}rotate(e){return this.premultiply(yw.makeRotation(-e)),this}translate(e,t){return this.premultiply(yw.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const yw=new Pt;function RV(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Lg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function she(){const n=Lg("canvas");return n.style.display="block",n}const wO={};function i_(n){n in wO||(wO[n]=!0,console.warn(n))}function ohe(n,e,t){return new Promise(function(r,i){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:r()}}setTimeout(s,t)})}function ahe(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function lhe(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const TO=new Pt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),MO=new Pt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Dp={[Nc]:{transfer:yx,primaries:vx,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n,fromReference:n=>n},[bs]:{transfer:wn,primaries:vx,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Db]:{transfer:yx,primaries:_x,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.applyMatrix3(MO),fromReference:n=>n.applyMatrix3(TO)},[xP]:{transfer:wn,primaries:_x,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.convertSRGBToLinear().applyMatrix3(MO),fromReference:n=>n.applyMatrix3(TO).convertLinearToSRGB()}},che=new Set([Nc,Db]),Jt={enabled:!0,_workingColorSpace:Nc,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!che.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=Dp[e].toReference,i=Dp[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Dp[n].primaries},getTransfer:function(n){return n===Gl?yx:Dp[n].transfer},getLuminanceCoefficients:function(n,e=this._workingColorSpace){return n.fromArray(Dp[e].luminanceCoefficients)}};function $d(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function vw(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let vh,uhe=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{vh===void 0&&(vh=Lg("canvas")),vh.width=e.width,vh.height=e.height;const r=vh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=vh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Lg("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=$d(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor($d(t[r]/255)*255):t[r]=$d(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},hhe=0,NV=class{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:hhe++}),this.uuid=Ha(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(_w(i[o].image)):s.push(_w(i[o]))}else s=_w(i);r.url=s}return t||(e.images[this.uuid]=r),r}};function _w(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?uhe.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let dhe=0,Eo=class s_ extends Pc{constructor(e=s_.DEFAULT_IMAGE,t=s_.DEFAULT_MAPPING,r=pu,i=pu,s=ao,o=mu,a=uo,l=rl,c=s_.DEFAULT_ANISOTROPY,u=Gl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:dhe++}),this.uuid=Ha(),this.name="",this.source=new NV(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ve(0,0),this.repeat=new Ve(1,1),this.center=new Ve(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Pt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==pV)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case xA:e.x=e.x-Math.floor(e.x);break;case pu:e.x=e.x<0?0:1;break;case SA:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case xA:e.y=e.y-Math.floor(e.y);break;case pu:e.y=e.y<0?0:1;break;case SA:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}};Eo.DEFAULT_IMAGE=null;Eo.DEFAULT_MAPPING=pV;Eo.DEFAULT_ANISOTROPY=1;let ar=class PV{constructor(e=0,t=0,r=0,i=1){PV.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],p=l[9],g=l[2],y=l[6],m=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-g)<.01&&Math.abs(p-y)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+g)<.1&&Math.abs(p+y)<.1&&Math.abs(c+f+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(c+1)/2,x=(f+1)/2,b=(m+1)/2,T=(u+d)/4,w=(h+g)/4,M=(p+y)/4;return v>x&&v>b?v<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(v),i=T/r,s=w/r):x>b?x<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(x),r=T/i,s=M/i):b<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(b),r=w/s,i=M/s),this.set(r,i,s,t),this}let _=Math.sqrt((y-p)*(y-p)+(h-g)*(h-g)+(d-u)*(d-u));return Math.abs(_)<.001&&(_=1),this.x=(y-p)/_,this.y=(h-g)/_,this.z=(d-u)/_,this.w=Math.acos((c+f+m-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},fhe=class extends Pc{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ar(0,0,e,t),this.scissorTest=!1,this.viewport=new ar(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ao,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new Eo(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new NV(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},vc=class extends fhe{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}},IV=class extends Eo{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Rs,this.minFilter=Rs,this.wrapR=pu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}};class phe extends Eo{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Rs,this.minFilter=Rs,this.wrapR=pu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let So=class{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],h=r[i+3];const d=s[o+0],f=s[o+1],p=s[o+2],g=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=p,e[t+3]=g;return}if(h!==g||l!==d||c!==f||u!==p){let y=1-a;const m=l*d+c*f+u*p+h*g,_=m>=0?1:-1,v=1-m*m;if(v>Number.EPSILON){const b=Math.sqrt(v),T=Math.atan2(b,m*_);y=Math.sin(y*T)/b,a=Math.sin(a*T)/b}const x=a*_;if(l=l*y+d*x,c=c*y+f*x,u=u*y+p*x,h=h*y+g*x,y===1-a){const b=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=b,c*=b,u*=b,h*=b}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],h=s[o],d=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*h+l*f-c*d,e[t+1]=l*p+u*d+c*h-a*f,e[t+2]=c*p+u*f+a*d-l*h,e[t+3]=u*p-a*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),h=a(s/2),d=l(r/2),f=l(i/2),p=l(s/2);switch(o){case"XYZ":this._x=d*u*h+c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h-d*f*p;break;case"YXZ":this._x=d*u*h+c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h+d*f*p;break;case"ZXY":this._x=d*u*h-c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h-d*f*p;break;case"ZYX":this._x=d*u*h-c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h+d*f*p;break;case"YZX":this._x=d*u*h+c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h-d*f*p;break;case"XZY":this._x=d*u*h-c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=r+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-i)*f}else if(r>a&&r>h){const f=2*Math.sqrt(1+r-a-h);this._w=(u-l)/f,this._x=.25*f,this._y=(i+o)/f,this._z=(s+c)/f}else if(a>h){const f=2*Math.sqrt(1+a-r-h);this._w=(s-c)/f,this._x=(i+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-r-a);this._w=(o-i)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(wr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=r*h+this._x*d,this._y=i*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},Y=class LV{constructor(e=0,t=0,r=0){LV.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(EO.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(EO.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*t-s*i),h=2*(s*r-o*t);return this.x=t+l*c+o*h-a*u,this.y=r+l*u+a*c-s*h,this.z=i+l*h+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return xw.copy(this).projectOnVector(e),this.sub(xw)}reflect(e){return this.sub(xw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(wr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const xw=new Y,EO=new So;let th=class{constructor(e=new Y(1/0,1/0,1/0),t=new Y(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Ws.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Ws.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Ws.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Ws):Ws.fromBufferAttribute(s,o),Ws.applyMatrix4(e.matrixWorld),this.expandByPoint(Ws);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),m0.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),m0.copy(r.boundingBox)),m0.applyMatrix4(e.matrixWorld),this.union(m0)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ws),Ws.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Op),g0.subVectors(this.max,Op),_h.subVectors(e.a,Op),xh.subVectors(e.b,Op),Sh.subVectors(e.c,Op),_l.subVectors(xh,_h),xl.subVectors(Sh,xh),Uc.subVectors(_h,Sh);let t=[0,-_l.z,_l.y,0,-xl.z,xl.y,0,-Uc.z,Uc.y,_l.z,0,-_l.x,xl.z,0,-xl.x,Uc.z,0,-Uc.x,-_l.y,_l.x,0,-xl.y,xl.x,0,-Uc.y,Uc.x,0];return!Sw(t,_h,xh,Sh,g0)||(t=[1,0,0,0,1,0,0,0,1],!Sw(t,_h,xh,Sh,g0))?!1:(y0.crossVectors(_l,xl),t=[y0.x,y0.y,y0.z],Sw(t,_h,xh,Sh,g0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ws).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ws).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(sa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),sa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),sa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),sa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),sa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),sa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),sa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),sa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(sa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const sa=[new Y,new Y,new Y,new Y,new Y,new Y,new Y,new Y],Ws=new Y,m0=new th,_h=new Y,xh=new Y,Sh=new Y,_l=new Y,xl=new Y,Uc=new Y,Op=new Y,g0=new Y,y0=new Y,Bc=new Y;function Sw(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Bc.fromArray(n,s);const a=i.x*Math.abs(Bc.x)+i.y*Math.abs(Bc.y)+i.z*Math.abs(Bc.z),l=e.dot(Bc),c=t.dot(Bc),u=r.dot(Bc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const mhe=new th,Fp=new Y,bw=new Y;let Ob=class{constructor(e=new Y,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):mhe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Fp.subVectors(e,this.center);const t=Fp.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Fp,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(bw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Fp.copy(e.center).add(bw)),this.expandByPoint(Fp.copy(e.center).sub(bw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const oa=new Y,ww=new Y,v0=new Y,Sl=new Y,Tw=new Y,_0=new Y,Mw=new Y;let Fb=class{constructor(e=new Y,t=new Y(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,oa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=oa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(oa.copy(this.origin).addScaledVector(this.direction,t),oa.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){ww.copy(e).add(t).multiplyScalar(.5),v0.copy(t).sub(e).normalize(),Sl.copy(this.origin).sub(ww);const s=e.distanceTo(t)*.5,o=-this.direction.dot(v0),a=Sl.dot(this.direction),l=-Sl.dot(v0),c=Sl.lengthSq(),u=Math.abs(1-o*o);let h,d,f,p;if(u>0)if(h=o*l-a,d=o*a-l,p=s*u,h>=0)if(d>=-p)if(d<=p){const g=1/u;h*=g,d*=g,f=h*(h+o*d+2*a)+d*(o*h+d+2*l)+c}else d=s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d=-s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d<=-p?(h=Math.max(0,-(-o*s+a)),d=h>0?-s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c):d<=p?(h=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(h=Math.max(0,-(o*s+a)),d=h>0?s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c);else d=o>0?-s:s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(ww).addScaledVector(v0,d),f}intersectSphere(e,t){oa.subVectors(e.center,this.origin);const r=oa.dot(this.direction),i=oa.dot(oa)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(r=(e.min.x-d.x)*c,i=(e.max.x-d.x)*c):(r=(e.max.x-d.x)*c,i=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,oa)!==null}intersectTriangle(e,t,r,i,s){Tw.subVectors(t,e),_0.subVectors(r,e),Mw.crossVectors(Tw,_0);let o=this.direction.dot(Mw),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Sl.subVectors(this.origin,e);const l=a*this.direction.dot(_0.crossVectors(Sl,_0));if(l<0)return null;const c=a*this.direction.dot(Tw.cross(Sl));if(c<0||l+c>o)return null;const u=-a*Sl.dot(Mw);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Cn=class YA{constructor(e,t,r,i,s,o,a,l,c,u,h,d,f,p,g,y){YA.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,u,h,d,f,p,g,y)}set(e,t,r,i,s,o,a,l,c,u,h,d,f,p,g,y){const m=this.elements;return m[0]=e,m[4]=t,m[8]=r,m[12]=i,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=u,m[10]=h,m[14]=d,m[3]=f,m[7]=p,m[11]=g,m[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new YA().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/bh.setFromMatrixColumn(e,0).length(),s=1/bh.setFromMatrixColumn(e,1).length(),o=1/bh.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=o*u,f=o*h,p=a*u,g=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+p*c,t[5]=d-g*c,t[9]=-a*l,t[2]=g-d*c,t[6]=p+f*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,p=c*u,g=c*h;t[0]=d+g*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=g+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,p=c*u,g=c*h;t[0]=d-g*a,t[4]=-o*h,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=g-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,f=o*h,p=a*u,g=a*h;t[0]=l*u,t[4]=p*c-f,t[8]=d*c+g,t[1]=l*h,t[5]=g*c+d,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,p=a*l,g=a*c;t[0]=l*u,t[4]=g-d*h,t[8]=p*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*h+p,t[10]=d-g*h}else if(e.order==="XZY"){const d=o*l,f=o*c,p=a*l,g=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+g,t[5]=o*u,t[9]=f*h-p,t[2]=p*h-f,t[6]=a*u,t[10]=g*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ghe,e,yhe)}lookAt(e,t,r){const i=this.elements;return Hi.subVectors(e,t),Hi.lengthSq()===0&&(Hi.z=1),Hi.normalize(),bl.crossVectors(r,Hi),bl.lengthSq()===0&&(Math.abs(r.z)===1?Hi.x+=1e-4:Hi.z+=1e-4,Hi.normalize(),bl.crossVectors(r,Hi)),bl.normalize(),x0.crossVectors(Hi,bl),i[0]=bl.x,i[4]=x0.x,i[8]=Hi.x,i[1]=bl.y,i[5]=x0.y,i[9]=Hi.y,i[2]=bl.z,i[6]=x0.z,i[10]=Hi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],h=r[5],d=r[9],f=r[13],p=r[2],g=r[6],y=r[10],m=r[14],_=r[3],v=r[7],x=r[11],b=r[15],T=i[0],w=i[4],M=i[8],C=i[12],S=i[1],E=i[5],I=i[9],F=i[13],N=i[2],R=i[6],D=i[10],j=i[14],L=i[3],W=i[7],z=i[11],X=i[15];return s[0]=o*T+a*S+l*N+c*L,s[4]=o*w+a*E+l*R+c*W,s[8]=o*M+a*I+l*D+c*z,s[12]=o*C+a*F+l*j+c*X,s[1]=u*T+h*S+d*N+f*L,s[5]=u*w+h*E+d*R+f*W,s[9]=u*M+h*I+d*D+f*z,s[13]=u*C+h*F+d*j+f*X,s[2]=p*T+g*S+y*N+m*L,s[6]=p*w+g*E+y*R+m*W,s[10]=p*M+g*I+y*D+m*z,s[14]=p*C+g*F+y*j+m*X,s[3]=_*T+v*S+x*N+b*L,s[7]=_*w+v*E+x*R+b*W,s[11]=_*M+v*I+x*D+b*z,s[15]=_*C+v*F+x*j+b*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],p=e[3],g=e[7],y=e[11],m=e[15];return p*(+s*l*h-i*c*h-s*a*d+r*c*d+i*a*f-r*l*f)+g*(+t*l*f-t*c*d+s*o*d-i*o*f+i*c*u-s*l*u)+y*(+t*c*h-t*a*f-s*o*h+r*o*f+s*a*u-r*c*u)+m*(-i*a*u-t*l*h+t*a*d+i*o*h-r*o*d+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],g=e[13],y=e[14],m=e[15],_=h*y*c-g*d*c+g*l*f-a*y*f-h*l*m+a*d*m,v=p*d*c-u*y*c-p*l*f+o*y*f+u*l*m-o*d*m,x=u*g*c-p*h*c+p*a*f-o*g*f-u*a*m+o*h*m,b=p*h*l-u*g*l-p*a*d+o*g*d+u*a*y-o*h*y,T=t*_+r*v+i*x+s*b;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/T;return e[0]=_*w,e[1]=(g*d*s-h*y*s-g*i*f+r*y*f+h*i*m-r*d*m)*w,e[2]=(a*y*s-g*l*s+g*i*c-r*y*c-a*i*m+r*l*m)*w,e[3]=(h*l*s-a*d*s-h*i*c+r*d*c+a*i*f-r*l*f)*w,e[4]=v*w,e[5]=(u*y*s-p*d*s+p*i*f-t*y*f-u*i*m+t*d*m)*w,e[6]=(p*l*s-o*y*s-p*i*c+t*y*c+o*i*m-t*l*m)*w,e[7]=(o*d*s-u*l*s+u*i*c-t*d*c-o*i*f+t*l*f)*w,e[8]=x*w,e[9]=(p*h*s-u*g*s-p*r*f+t*g*f+u*r*m-t*h*m)*w,e[10]=(o*g*s-p*a*s+p*r*c-t*g*c-o*r*m+t*a*m)*w,e[11]=(u*a*s-o*h*s-u*r*c+t*h*c+o*r*f-t*a*f)*w,e[12]=b*w,e[13]=(u*g*i-p*h*i+p*r*d-t*g*d-u*r*y+t*h*y)*w,e[14]=(p*a*i-o*g*i-p*r*l+t*g*l+o*r*y-t*a*y)*w,e[15]=(o*h*i-u*a*i+u*r*l-t*h*l-o*r*d+t*a*d)*w,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,d=s*c,f=s*u,p=s*h,g=o*u,y=o*h,m=a*h,_=l*c,v=l*u,x=l*h,b=r.x,T=r.y,w=r.z;return i[0]=(1-(g+m))*b,i[1]=(f+x)*b,i[2]=(p-v)*b,i[3]=0,i[4]=(f-x)*T,i[5]=(1-(d+m))*T,i[6]=(y+_)*T,i[7]=0,i[8]=(p+v)*w,i[9]=(y-_)*w,i[10]=(1-(d+g))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=bh.set(i[0],i[1],i[2]).length();const o=bh.set(i[4],i[5],i[6]).length(),a=bh.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],js.copy(this);const c=1/s,u=1/o,h=1/a;return js.elements[0]*=c,js.elements[1]*=c,js.elements[2]*=c,js.elements[4]*=u,js.elements[5]*=u,js.elements[6]*=u,js.elements[8]*=h,js.elements[9]*=h,js.elements[10]*=h,t.setFromRotationMatrix(js),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=Ua){const l=this.elements,c=2*s/(t-e),u=2*s/(r-i),h=(t+e)/(t-e),d=(r+i)/(r-i);let f,p;if(a===Ua)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===xx)f=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=Ua){const l=this.elements,c=1/(t-e),u=1/(r-i),h=1/(o-s),d=(t+e)*c,f=(r+i)*u;let p,g;if(a===Ua)p=(o+s)*h,g=-2*h;else if(a===xx)p=s*h,g=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=g,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}};const bh=new Y,js=new Cn,ghe=new Y(0,0,0),yhe=new Y(1,1,1),bl=new Y,x0=new Y,Hi=new Y,AO=new Cn,CO=new So;let _c=class DV{constructor(e=0,t=0,r=0,i=DV.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],h=i[2],d=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(wr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-wr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(wr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-wr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(wr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-wr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return AO.makeRotationFromQuaternion(e),this.setFromRotationMatrix(AO,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return CO.setFromEuler(this),this.setFromQuaternion(CO,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};_c.DEFAULT_ORDER="XYZ";let bP=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},vhe=0;const RO=new Y,wh=new So,aa=new Cn,S0=new Y,kp=new Y,_he=new Y,xhe=new So,NO=new Y(1,0,0),PO=new Y(0,1,0),IO=new Y(0,0,1),LO={type:"added"},She={type:"removed"},Th={type:"childadded",child:null},Ew={type:"childremoved",child:null};let Oi=class o_ extends Pc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:vhe++}),this.uuid=Ha(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=o_.DEFAULT_UP.clone();const e=new Y,t=new _c,r=new So,i=new Y(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Cn},normalMatrix:{value:new Pt}}),this.matrix=new Cn,this.matrixWorld=new Cn,this.matrixAutoUpdate=o_.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=o_.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new bP,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return wh.setFromAxisAngle(e,t),this.quaternion.multiply(wh),this}rotateOnWorldAxis(e,t){return wh.setFromAxisAngle(e,t),this.quaternion.premultiply(wh),this}rotateX(e){return this.rotateOnAxis(NO,e)}rotateY(e){return this.rotateOnAxis(PO,e)}rotateZ(e){return this.rotateOnAxis(IO,e)}translateOnAxis(e,t){return RO.copy(e).applyQuaternion(this.quaternion),this.position.add(RO.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(NO,e)}translateY(e){return this.translateOnAxis(PO,e)}translateZ(e){return this.translateOnAxis(IO,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(aa.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?S0.copy(e):S0.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),kp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?aa.lookAt(kp,S0,this.up):aa.lookAt(S0,kp,this.up),this.quaternion.setFromRotationMatrix(aa),i&&(aa.extractRotation(i.matrixWorld),wh.setFromRotationMatrix(aa),this.quaternion.premultiply(wh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(LO),Th.child=e,this.dispatchEvent(Th),Th.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(She),Ew.child=e,this.dispatchEvent(Ew),Ew.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),aa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),aa.multiply(e.parent.matrixWorld)),e.applyMatrix4(aa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(LO),Th.child=e,this.dispatchEvent(Th),Th.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kp,e,_he),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kp,xhe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),p=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),d.length>0&&(r.skeletons=d),f.length>0&&(r.animations=f),p.length>0&&(r.nodes=p)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}};Oi.DEFAULT_UP=new Y(0,1,0);Oi.DEFAULT_MATRIX_AUTO_UPDATE=!0;Oi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const qs=new Y,la=new Y,Aw=new Y,ca=new Y,Mh=new Y,Eh=new Y,DO=new Y,Cw=new Y,Rw=new Y,Nw=new Y,Pw=new ar,Iw=new ar,Lw=new ar;let td=class nd{constructor(e=new Y,t=new Y,r=new Y){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),qs.subVectors(e,t),i.cross(qs);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){qs.subVectors(i,t),la.subVectors(r,t),Aw.subVectors(e,t);const o=qs.dot(qs),a=qs.dot(la),l=qs.dot(Aw),c=la.dot(la),u=la.dot(Aw),h=o*c-a*a;if(h===0)return s.set(0,0,0),null;const d=1/h,f=(c*l-a*u)*d,p=(o*u-a*l)*d;return s.set(1-f-p,p,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,ca)===null?!1:ca.x>=0&&ca.y>=0&&ca.x+ca.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,ca)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ca.x),l.addScaledVector(o,ca.y),l.addScaledVector(a,ca.z),l)}static getInterpolatedAttribute(e,t,r,i,s,o){return Pw.setScalar(0),Iw.setScalar(0),Lw.setScalar(0),Pw.fromBufferAttribute(e,t),Iw.fromBufferAttribute(e,r),Lw.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(Pw,s.x),o.addScaledVector(Iw,s.y),o.addScaledVector(Lw,s.z),o}static isFrontFacing(e,t,r,i){return qs.subVectors(r,t),la.subVectors(e,t),qs.cross(la).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return qs.subVectors(this.c,this.b),la.subVectors(this.a,this.b),qs.cross(la).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return nd.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return nd.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return nd.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return nd.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return nd.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Mh.subVectors(i,r),Eh.subVectors(s,r),Cw.subVectors(e,r);const l=Mh.dot(Cw),c=Eh.dot(Cw);if(l<=0&&c<=0)return t.copy(r);Rw.subVectors(e,i);const u=Mh.dot(Rw),h=Eh.dot(Rw);if(u>=0&&h<=u)return t.copy(i);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(Mh,o);Nw.subVectors(e,s);const f=Mh.dot(Nw),p=Eh.dot(Nw);if(p>=0&&f<=p)return t.copy(s);const g=f*c-l*p;if(g<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(r).addScaledVector(Eh,a);const y=u*p-f*h;if(y<=0&&h-u>=0&&f-p>=0)return DO.subVectors(s,i),a=(h-u)/(h-u+(f-p)),t.copy(i).addScaledVector(DO,a);const m=1/(y+g+d);return o=g*m,a=d*m,t.copy(r).addScaledVector(Mh,o).addScaledVector(Eh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}};const OV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wl={h:0,s:0,l:0},b0={h:0,s:0,l:0};function Dw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Ot=class{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=bs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Jt.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Jt.workingColorSpace){return this.r=e,this.g=t,this.b=r,Jt.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Jt.workingColorSpace){if(e=SP(e,1),t=wr(t,0,1),r=wr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=Dw(o,s,e+1/3),this.g=Dw(o,s,e),this.b=Dw(o,s,e-1/3)}return Jt.toWorkingColorSpace(this,i),this}setStyle(e,t=bs){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=bs){const r=OV[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=$d(e.r),this.g=$d(e.g),this.b=$d(e.b),this}copyLinearToSRGB(e){return this.r=vw(e.r),this.g=vw(e.g),this.b=vw(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=bs){return Jt.fromWorkingColorSpace(Gr.copy(this),e),Math.round(wr(Gr.r*255,0,255))*65536+Math.round(wr(Gr.g*255,0,255))*256+Math.round(wr(Gr.b*255,0,255))}getHexString(e=bs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Jt.workingColorSpace){Jt.fromWorkingColorSpace(Gr.copy(this),t);const r=Gr.r,i=Gr.g,s=Gr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Jt.workingColorSpace){return Jt.fromWorkingColorSpace(Gr.copy(this),t),e.r=Gr.r,e.g=Gr.g,e.b=Gr.b,e}getStyle(e=bs){Jt.fromWorkingColorSpace(Gr.copy(this),e);const t=Gr.r,r=Gr.g,i=Gr.b;return e!==bs?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(wl),this.setHSL(wl.h+e,wl.s+t,wl.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(wl),e.getHSL(b0);const r=jm(wl.h,b0.h,t),i=jm(wl.s,b0.s,t),s=jm(wl.l,b0.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Gr=new Ot;Ot.NAMES=OV;let bhe=0,nh=class extends Pc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:bhe++}),this.uuid=Ha(),this.name="",this.type="Material",this.blending=Bd,this.side=yc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=cA,this.blendDst=uA,this.blendEquation=su,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ot(0,0,0),this.blendAlpha=0,this.depthFunc=Nf,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=xO,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=yh,this.stencilZFail=yh,this.stencilZPass=yh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Bd&&(r.blending=this.blending),this.side!==yc&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==cA&&(r.blendSrc=this.blendSrc),this.blendDst!==uA&&(r.blendDst=this.blendDst),this.blendEquation!==su&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Nf&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==xO&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==yh&&(r.stencilFail=this.stencilFail),this.stencilZFail!==yh&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==yh&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}},wP=class extends nh{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new _c,this.combine=fP,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};const Jn=new Y,w0=new Ve;let Is=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=XA,this.updateRanges=[],this.gpuType=ka,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)w0.fromBufferAttribute(this,t),w0.applyMatrix3(e),this.setXY(t,w0.x,w0.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.applyMatrix3(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.applyMatrix4(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.applyNormalMatrix(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Jn.fromBufferAttribute(this,t),Jn.transformDirection(e),this.setXYZ(t,Jn.x,Jn.y,Jn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=lo(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=ln(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=lo(t,this.array)),t}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=lo(t,this.array)),t}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=lo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=lo(t,this.array)),t}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==XA&&(e.usage=this.usage),e}},FV=class extends Is{constructor(e,t,r){super(new Uint16Array(e),t,r)}},kV=class extends Is{constructor(e,t,r){super(new Uint32Array(e),t,r)}},gr=class extends Is{constructor(e,t,r){super(new Float32Array(e),t,r)}},whe=0;const ys=new Cn,Ow=new Oi,Ah=new Y,Wi=new th,Up=new th,_r=new Y;let Vs=class UV extends Pc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:whe++}),this.uuid=Ha(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(RV(e)?kV:FV)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Pt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ys.makeRotationFromQuaternion(e),this.applyMatrix4(ys),this}rotateX(e){return ys.makeRotationX(e),this.applyMatrix4(ys),this}rotateY(e){return ys.makeRotationY(e),this.applyMatrix4(ys),this}rotateZ(e){return ys.makeRotationZ(e),this.applyMatrix4(ys),this}translate(e,t,r){return ys.makeTranslation(e,t,r),this.applyMatrix4(ys),this}scale(e,t,r){return ys.makeScale(e,t,r),this.applyMatrix4(ys),this}lookAt(e){return Ow.lookAt(e),Ow.updateMatrix(),this.applyMatrix4(Ow.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ah).negate(),this.translate(Ah.x,Ah.y,Ah.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new gr(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new th);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Y(-1/0,-1/0,-1/0),new Y(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Wi.setFromBufferAttribute(s),this.morphTargetsRelative?(_r.addVectors(this.boundingBox.min,Wi.min),this.boundingBox.expandByPoint(_r),_r.addVectors(this.boundingBox.max,Wi.max),this.boundingBox.expandByPoint(_r)):(this.boundingBox.expandByPoint(Wi.min),this.boundingBox.expandByPoint(Wi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ob);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Y,1/0);return}if(e){const r=this.boundingSphere.center;if(Wi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Up.setFromBufferAttribute(a),this.morphTargetsRelative?(_r.addVectors(Wi.min,Up.min),Wi.expandByPoint(_r),_r.addVectors(Wi.max,Up.max),Wi.expandByPoint(_r)):(Wi.expandByPoint(Up.min),Wi.expandByPoint(Up.max))}Wi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)_r.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(_r));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)_r.fromBufferAttribute(a,c),l&&(Ah.fromBufferAttribute(e,c),_r.add(Ah)),i=Math.max(i,r.distanceToSquared(_r))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Is(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let M=0;M<r.count;M++)a[M]=new Y,l[M]=new Y;const c=new Y,u=new Y,h=new Y,d=new Ve,f=new Ve,p=new Ve,g=new Y,y=new Y;function m(M,C,S){c.fromBufferAttribute(r,M),u.fromBufferAttribute(r,C),h.fromBufferAttribute(r,S),d.fromBufferAttribute(s,M),f.fromBufferAttribute(s,C),p.fromBufferAttribute(s,S),u.sub(c),h.sub(c),f.sub(d),p.sub(d);const E=1/(f.x*p.y-p.x*f.y);isFinite(E)&&(g.copy(u).multiplyScalar(p.y).addScaledVector(h,-f.y).multiplyScalar(E),y.copy(h).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(E),a[M].add(g),a[C].add(g),a[S].add(g),l[M].add(y),l[C].add(y),l[S].add(y))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let M=0,C=_.length;M<C;++M){const S=_[M],E=S.start,I=S.count;for(let F=E,N=E+I;F<N;F+=3)m(e.getX(F+0),e.getX(F+1),e.getX(F+2))}const v=new Y,x=new Y,b=new Y,T=new Y;function w(M){b.fromBufferAttribute(i,M),T.copy(b);const C=a[M];v.copy(C),v.sub(b.multiplyScalar(b.dot(C))).normalize(),x.crossVectors(T,C);const E=x.dot(l[M])<0?-1:1;o.setXYZW(M,v.x,v.y,v.z,E)}for(let M=0,C=_.length;M<C;++M){const S=_[M],E=S.start,I=S.count;for(let F=E,N=E+I;F<N;F+=3)w(e.getX(F+0)),w(e.getX(F+1)),w(e.getX(F+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Is(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,f=r.count;d<f;d++)r.setXYZ(d,0,0,0);const i=new Y,s=new Y,o=new Y,a=new Y,l=new Y,c=new Y,u=new Y,h=new Y;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),g=e.getX(d+1),y=e.getX(d+2);i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,y),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),a.fromBufferAttribute(r,p),l.fromBufferAttribute(r,g),c.fromBufferAttribute(r,y),a.add(u),l.add(u),c.add(u),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(g,l.x,l.y,l.z),r.setXYZ(y,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),r.setXYZ(d+0,u.x,u.y,u.z),r.setXYZ(d+1,u.x,u.y,u.z),r.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)_r.fromBufferAttribute(e,t),_r.normalize(),e.setXYZ(t,_r.x,_r.y,_r.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,d=new c.constructor(l.length*u);let f=0,p=0;for(let g=0,y=l.length;g<y;g++){a.isInterleavedBufferAttribute?f=l[g]*a.data.stride+a.offset:f=l[g]*u;for(let m=0;m<u;m++)d[p++]=c[f++]}return new Is(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new UV,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const d=c[u],f=e(d,r);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h];u.push(f.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}};const OO=new Cn,zc=new Fb,T0=new Ob,FO=new Y,M0=new Y,E0=new Y,A0=new Y,Fw=new Y,C0=new Y,kO=new Y,R0=new Y;let Ns=class extends Oi{constructor(e=new Vs,t=new wP){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){C0.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],h=s[l];u!==0&&(Fw.fromBufferAttribute(h,e),o?C0.addScaledVector(Fw,u):C0.addScaledVector(Fw.sub(t),u))}t.add(C0)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),T0.copy(r.boundingSphere),T0.applyMatrix4(s),zc.copy(e.ray).recast(e.near),!(T0.containsPoint(zc.origin)===!1&&(zc.intersectSphere(T0,FO)===null||zc.origin.distanceToSquared(FO)>(e.far-e.near)**2))&&(OO.copy(s).invert(),zc.copy(e.ray).applyMatrix4(OO),!(r.boundingBox!==null&&zc.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,zc)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,d=s.groups,f=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,g=d.length;p<g;p++){const y=d[p],m=o[y.materialIndex],_=Math.max(y.start,f.start),v=Math.min(a.count,Math.min(y.start+y.count,f.start+f.count));for(let x=_,b=v;x<b;x+=3){const T=a.getX(x),w=a.getX(x+1),M=a.getX(x+2);i=N0(this,m,e,r,c,u,h,T,w,M),i&&(i.faceIndex=Math.floor(x/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),g=Math.min(a.count,f.start+f.count);for(let y=p,m=g;y<m;y+=3){const _=a.getX(y),v=a.getX(y+1),x=a.getX(y+2);i=N0(this,o,e,r,c,u,h,_,v,x),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,g=d.length;p<g;p++){const y=d[p],m=o[y.materialIndex],_=Math.max(y.start,f.start),v=Math.min(l.count,Math.min(y.start+y.count,f.start+f.count));for(let x=_,b=v;x<b;x+=3){const T=x,w=x+1,M=x+2;i=N0(this,m,e,r,c,u,h,T,w,M),i&&(i.faceIndex=Math.floor(x/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),g=Math.min(l.count,f.start+f.count);for(let y=p,m=g;y<m;y+=3){const _=y,v=y+1,x=y+2;i=N0(this,o,e,r,c,u,h,_,v,x),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}};function The(n,e,t,r,i,s,o,a){let l;if(e.side===fi?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===yc,a),l===null)return null;R0.copy(a),R0.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(R0);return c<t.near||c>t.far?null:{distance:c,point:R0.clone(),object:n}}function N0(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,M0),n.getVertexPosition(l,E0),n.getVertexPosition(c,A0);const u=The(n,e,t,r,M0,E0,A0,kO);if(u){const h=new Y;td.getBarycoord(kO,M0,E0,A0,h),i&&(u.uv=td.getInterpolatedAttribute(i,a,l,c,h,new Ve)),s&&(u.uv1=td.getInterpolatedAttribute(s,a,l,c,h,new Ve)),o&&(u.normal=td.getInterpolatedAttribute(o,a,l,c,h,new Y),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new Y,materialIndex:0};td.getNormal(M0,E0,A0,d.normal),u.face=d,u.barycoord=h}return u}let TP=class BV extends Vs{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let d=0,f=0;p("z","y","x",-1,-1,r,t,e,o,s,0),p("z","y","x",1,-1,r,t,-e,o,s,1),p("x","z","y",1,1,e,r,t,i,o,2),p("x","z","y",1,-1,e,r,-t,i,o,3),p("x","y","z",1,-1,e,t,r,i,s,4),p("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new gr(c,3)),this.setAttribute("normal",new gr(u,3)),this.setAttribute("uv",new gr(h,2));function p(g,y,m,_,v,x,b,T,w,M,C){const S=x/w,E=b/M,I=x/2,F=b/2,N=T/2,R=w+1,D=M+1;let j=0,L=0;const W=new Y;for(let z=0;z<D;z++){const X=z*E-F;for(let U=0;U<R;U++){const te=U*S-I;W[g]=te*_,W[y]=X*v,W[m]=N,c.push(W.x,W.y,W.z),W[g]=0,W[y]=0,W[m]=T>0?1:-1,u.push(W.x,W.y,W.z),h.push(U/w),h.push(1-z/M),j+=1}}for(let z=0;z<M;z++)for(let X=0;X<w;X++){const U=d+X+R*z,te=d+X+R*(z+1),k=d+(X+1)+R*(z+1),V=d+(X+1)+R*z;l.push(U,te,V),l.push(te,k,V),L+=6}a.addGroup(f,L,C),f+=L,d+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BV(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Of(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function si(n){const e={};for(let t=0;t<n.length;t++){const r=Of(n[t]);for(const i in r)e[i]=r[i]}return e}function Mhe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function zV(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Jt.workingColorSpace}const $V={clone:Of,merge:si};var Ehe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ahe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;let Xo=class extends nh{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Ehe,this.fragmentShader=Ahe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Of(e.uniforms),this.uniformsGroups=Mhe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},VV=class extends Oi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Cn,this.projectionMatrix=new Cn,this.projectionMatrixInverse=new Cn,this.coordinateSystem=Ua}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}};const Tl=new Y,UO=new Ve,BO=new Ve;let As=class extends VV{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ig*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Wm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ig*2*Math.atan(Math.tan(Wm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Tl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Tl.x,Tl.y).multiplyScalar(-e/Tl.z),Tl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Tl.x,Tl.y).multiplyScalar(-e/Tl.z)}getViewSize(e,t){return this.getViewBounds(e,UO,BO),t.subVectors(BO,UO)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Wm*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Ch=-90,Rh=1;let Che=class extends Oi{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new As(Ch,Rh,e,t);i.layers=this.layers,this.add(i);const s=new As(Ch,Rh,e,t);s.layers=this.layers,this.add(s);const o=new As(Ch,Rh,e,t);o.layers=this.layers,this.add(o);const a=new As(Ch,Rh,e,t);a.layers=this.layers,this.add(a);const l=new As(Ch,Rh,e,t);l.layers=this.layers,this.add(l);const c=new As(Ch,Rh,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Ua)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===xx)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,h=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const g=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=g,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(h,d,f),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}},GV=class extends Eo{constructor(e,t,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Pf,super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},Rhe=class extends vc{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new GV(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ao}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new TP(5,5,5),s=new Xo({name:"CubemapFromEquirect",uniforms:Of(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:fi,blending:Ga});s.uniforms.tEquirect.value=t;const o=new Ns(i,s),a=t.minFilter;return t.minFilter===mu&&(t.minFilter=ao),new Che(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}};const kw=new Y,Nhe=new Y,Phe=new Pt;let wa=class{constructor(e=new Y(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=kw.subVectors(r,t).cross(Nhe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(kw),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||Phe.getNormalMatrix(e),i=this.coplanarPoint(kw).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const $c=new Ob,P0=new Y;let MP=class{constructor(e=new wa,t=new wa,r=new wa,i=new wa,s=new wa,o=new wa){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Ua){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],h=i[6],d=i[7],f=i[8],p=i[9],g=i[10],y=i[11],m=i[12],_=i[13],v=i[14],x=i[15];if(r[0].setComponents(l-s,d-c,y-f,x-m).normalize(),r[1].setComponents(l+s,d+c,y+f,x+m).normalize(),r[2].setComponents(l+o,d+u,y+p,x+_).normalize(),r[3].setComponents(l-o,d-u,y-p,x-_).normalize(),r[4].setComponents(l-a,d-h,y-g,x-v).normalize(),t===Ua)r[5].setComponents(l+a,d+h,y+g,x+v).normalize();else if(t===xx)r[5].setComponents(a,h,g,v).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),$c.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),$c.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere($c)}intersectsSprite(e){return $c.center.set(0,0,0),$c.radius=.7071067811865476,$c.applyMatrix4(e.matrixWorld),this.intersectsSphere($c)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(P0.x=i.normal.x>0?e.max.x:e.min.x,P0.y=i.normal.y>0?e.max.y:e.min.y,P0.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(P0)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function HV(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Ihe(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,h=c.byteLength,d=n.createBuffer();n.bindBuffer(l,d),n.bufferData(l,c,u),a.onUploadCallback();let f;if(c instanceof Float32Array)f=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)f=n.SHORT;else if(c instanceof Uint32Array)f=n.UNSIGNED_INT;else if(c instanceof Int32Array)f=n.INT;else if(c instanceof Int8Array)f=n.BYTE;else if(c instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:d,type:f,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:h}}function r(a,l,c){const u=l.array,h=l.updateRanges;if(n.bindBuffer(c,a),h.length===0)n.bufferSubData(c,0,u);else{h.sort((f,p)=>f.start-p.start);let d=0;for(let f=1;f<h.length;f++){const p=h[d],g=h[f];g.start<=p.start+p.count+1?p.count=Math.max(p.count,g.start+g.count-p.start):(++d,h[d]=g)}h.length=d+1;for(let f=0,p=h.length;f<p;f++){const g=h[f];n.bufferSubData(c,g.start*u.BYTES_PER_ELEMENT,u,g.start,g.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:s,update:o}}class kb extends Vs{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,h=e/a,d=t/l,f=[],p=[],g=[],y=[];for(let m=0;m<u;m++){const _=m*d-o;for(let v=0;v<c;v++){const x=v*h-s;p.push(x,-_,0),g.push(0,0,1),y.push(v/a),y.push(1-m/l)}}for(let m=0;m<l;m++)for(let _=0;_<a;_++){const v=_+c*m,x=_+c*(m+1),b=_+1+c*(m+1),T=_+1+c*m;f.push(v,x,T),f.push(x,b,T)}this.setIndex(f),this.setAttribute("position",new gr(p,3)),this.setAttribute("normal",new gr(g,3)),this.setAttribute("uv",new gr(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kb(e.width,e.height,e.widthSegments,e.heightSegments)}}var Lhe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Dhe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Ohe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Fhe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,khe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Uhe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Bhe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,zhe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,$he=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Vhe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Ghe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Hhe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Whe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,jhe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,qhe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Xhe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Khe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Yhe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Qhe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Zhe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Jhe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,ede=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,tde=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,nde=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,rde=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ide=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,sde=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ode=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,ade=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,lde=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,cde="gl_FragColor = linearToOutputTexel( gl_FragColor );",ude=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,hde=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,dde=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,fde=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,pde=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,mde=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,gde=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,yde=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,vde=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,_de=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,xde=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Sde=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,bde=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,wde=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Tde=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Mde=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Ede=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Ade=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Cde=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Rde=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Nde=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Pde=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ide=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Lde=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Dde=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Ode=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Fde=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,kde=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ude=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Bde=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,zde=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,$de=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Vde=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Gde=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Hde=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Wde=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,jde=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,qde=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Xde=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Kde=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Yde=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Qde=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Zde=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Jde=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,efe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,tfe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,nfe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,rfe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,ife=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,sfe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,ofe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,afe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,lfe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,cfe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ufe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,hfe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,dfe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ffe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,pfe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,mfe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,gfe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,yfe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,vfe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,_fe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,xfe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Sfe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,bfe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,wfe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Tfe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Mfe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Efe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Afe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Cfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Rfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Nfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Pfe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Ife=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Lfe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Dfe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Ofe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ffe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kfe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Ufe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Bfe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,zfe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,$fe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Vfe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Gfe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Hfe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Wfe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,jfe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,qfe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xfe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Kfe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yfe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Qfe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Zfe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Jfe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,epe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tpe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,npe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,rpe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ipe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,spe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ope=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ape=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,lpe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cpe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,upe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hpe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,At={alphahash_fragment:Lhe,alphahash_pars_fragment:Dhe,alphamap_fragment:Ohe,alphamap_pars_fragment:Fhe,alphatest_fragment:khe,alphatest_pars_fragment:Uhe,aomap_fragment:Bhe,aomap_pars_fragment:zhe,batching_pars_vertex:$he,batching_vertex:Vhe,begin_vertex:Ghe,beginnormal_vertex:Hhe,bsdfs:Whe,iridescence_fragment:jhe,bumpmap_pars_fragment:qhe,clipping_planes_fragment:Xhe,clipping_planes_pars_fragment:Khe,clipping_planes_pars_vertex:Yhe,clipping_planes_vertex:Qhe,color_fragment:Zhe,color_pars_fragment:Jhe,color_pars_vertex:ede,color_vertex:tde,common:nde,cube_uv_reflection_fragment:rde,defaultnormal_vertex:ide,displacementmap_pars_vertex:sde,displacementmap_vertex:ode,emissivemap_fragment:ade,emissivemap_pars_fragment:lde,colorspace_fragment:cde,colorspace_pars_fragment:ude,envmap_fragment:hde,envmap_common_pars_fragment:dde,envmap_pars_fragment:fde,envmap_pars_vertex:pde,envmap_physical_pars_fragment:Mde,envmap_vertex:mde,fog_vertex:gde,fog_pars_vertex:yde,fog_fragment:vde,fog_pars_fragment:_de,gradientmap_pars_fragment:xde,lightmap_pars_fragment:Sde,lights_lambert_fragment:bde,lights_lambert_pars_fragment:wde,lights_pars_begin:Tde,lights_toon_fragment:Ede,lights_toon_pars_fragment:Ade,lights_phong_fragment:Cde,lights_phong_pars_fragment:Rde,lights_physical_fragment:Nde,lights_physical_pars_fragment:Pde,lights_fragment_begin:Ide,lights_fragment_maps:Lde,lights_fragment_end:Dde,logdepthbuf_fragment:Ode,logdepthbuf_pars_fragment:Fde,logdepthbuf_pars_vertex:kde,logdepthbuf_vertex:Ude,map_fragment:Bde,map_pars_fragment:zde,map_particle_fragment:$de,map_particle_pars_fragment:Vde,metalnessmap_fragment:Gde,metalnessmap_pars_fragment:Hde,morphinstance_vertex:Wde,morphcolor_vertex:jde,morphnormal_vertex:qde,morphtarget_pars_vertex:Xde,morphtarget_vertex:Kde,normal_fragment_begin:Yde,normal_fragment_maps:Qde,normal_pars_fragment:Zde,normal_pars_vertex:Jde,normal_vertex:efe,normalmap_pars_fragment:tfe,clearcoat_normal_fragment_begin:nfe,clearcoat_normal_fragment_maps:rfe,clearcoat_pars_fragment:ife,iridescence_pars_fragment:sfe,opaque_fragment:ofe,packing:afe,premultiplied_alpha_fragment:lfe,project_vertex:cfe,dithering_fragment:ufe,dithering_pars_fragment:hfe,roughnessmap_fragment:dfe,roughnessmap_pars_fragment:ffe,shadowmap_pars_fragment:pfe,shadowmap_pars_vertex:mfe,shadowmap_vertex:gfe,shadowmask_pars_fragment:yfe,skinbase_vertex:vfe,skinning_pars_vertex:_fe,skinning_vertex:xfe,skinnormal_vertex:Sfe,specularmap_fragment:bfe,specularmap_pars_fragment:wfe,tonemapping_fragment:Tfe,tonemapping_pars_fragment:Mfe,transmission_fragment:Efe,transmission_pars_fragment:Afe,uv_pars_fragment:Cfe,uv_pars_vertex:Rfe,uv_vertex:Nfe,worldpos_vertex:Pfe,background_vert:Ife,background_frag:Lfe,backgroundCube_vert:Dfe,backgroundCube_frag:Ofe,cube_vert:Ffe,cube_frag:kfe,depth_vert:Ufe,depth_frag:Bfe,distanceRGBA_vert:zfe,distanceRGBA_frag:$fe,equirect_vert:Vfe,equirect_frag:Gfe,linedashed_vert:Hfe,linedashed_frag:Wfe,meshbasic_vert:jfe,meshbasic_frag:qfe,meshlambert_vert:Xfe,meshlambert_frag:Kfe,meshmatcap_vert:Yfe,meshmatcap_frag:Qfe,meshnormal_vert:Zfe,meshnormal_frag:Jfe,meshphong_vert:epe,meshphong_frag:tpe,meshphysical_vert:npe,meshphysical_frag:rpe,meshtoon_vert:ipe,meshtoon_frag:spe,points_vert:ope,points_frag:ape,shadow_vert:lpe,shadow_frag:cpe,sprite_vert:upe,sprite_frag:hpe},He={common:{diffuse:{value:new Ot(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Pt},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Pt}},envmap:{envMap:{value:null},envMapRotation:{value:new Pt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Pt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Pt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Pt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Pt},normalScale:{value:new Ve(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Pt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Pt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Pt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Pt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ot(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ot(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0},uvTransform:{value:new Pt}},sprite:{diffuse:{value:new Ot(16777215)},opacity:{value:1},center:{value:new Ve(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Pt},alphaMap:{value:null},alphaMapTransform:{value:new Pt},alphaTest:{value:0}}},Bo={basic:{uniforms:si([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.fog]),vertexShader:At.meshbasic_vert,fragmentShader:At.meshbasic_frag},lambert:{uniforms:si([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.fog,He.lights,{emissive:{value:new Ot(0)}}]),vertexShader:At.meshlambert_vert,fragmentShader:At.meshlambert_frag},phong:{uniforms:si([He.common,He.specularmap,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.fog,He.lights,{emissive:{value:new Ot(0)},specular:{value:new Ot(1118481)},shininess:{value:30}}]),vertexShader:At.meshphong_vert,fragmentShader:At.meshphong_frag},standard:{uniforms:si([He.common,He.envmap,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.roughnessmap,He.metalnessmap,He.fog,He.lights,{emissive:{value:new Ot(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag},toon:{uniforms:si([He.common,He.aomap,He.lightmap,He.emissivemap,He.bumpmap,He.normalmap,He.displacementmap,He.gradientmap,He.fog,He.lights,{emissive:{value:new Ot(0)}}]),vertexShader:At.meshtoon_vert,fragmentShader:At.meshtoon_frag},matcap:{uniforms:si([He.common,He.bumpmap,He.normalmap,He.displacementmap,He.fog,{matcap:{value:null}}]),vertexShader:At.meshmatcap_vert,fragmentShader:At.meshmatcap_frag},points:{uniforms:si([He.points,He.fog]),vertexShader:At.points_vert,fragmentShader:At.points_frag},dashed:{uniforms:si([He.common,He.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:At.linedashed_vert,fragmentShader:At.linedashed_frag},depth:{uniforms:si([He.common,He.displacementmap]),vertexShader:At.depth_vert,fragmentShader:At.depth_frag},normal:{uniforms:si([He.common,He.bumpmap,He.normalmap,He.displacementmap,{opacity:{value:1}}]),vertexShader:At.meshnormal_vert,fragmentShader:At.meshnormal_frag},sprite:{uniforms:si([He.sprite,He.fog]),vertexShader:At.sprite_vert,fragmentShader:At.sprite_frag},background:{uniforms:{uvTransform:{value:new Pt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:At.background_vert,fragmentShader:At.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Pt}},vertexShader:At.backgroundCube_vert,fragmentShader:At.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:At.cube_vert,fragmentShader:At.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:At.equirect_vert,fragmentShader:At.equirect_frag},distanceRGBA:{uniforms:si([He.common,He.displacementmap,{referencePosition:{value:new Y},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:At.distanceRGBA_vert,fragmentShader:At.distanceRGBA_frag},shadow:{uniforms:si([He.lights,He.fog,{color:{value:new Ot(0)},opacity:{value:1}}]),vertexShader:At.shadow_vert,fragmentShader:At.shadow_frag}};Bo.physical={uniforms:si([Bo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Pt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Pt},clearcoatNormalScale:{value:new Ve(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Pt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Pt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Pt},sheen:{value:0},sheenColor:{value:new Ot(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Pt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Pt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Pt},transmissionSamplerSize:{value:new Ve},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Pt},attenuationDistance:{value:0},attenuationColor:{value:new Ot(0)},specularColor:{value:new Ot(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Pt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Pt},anisotropyVector:{value:new Ve},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Pt}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag};const I0={r:0,b:0,g:0},Vc=new _c,dpe=new Cn;function fpe(n,e,t,r,i,s,o){const a=new Ot(0);let l=s===!0?0:1,c,u,h=null,d=0,f=null;function p(_){let v=_.isScene===!0?_.background:null;return v&&v.isTexture&&(v=(_.backgroundBlurriness>0?t:e).get(v)),v}function g(_){let v=!1;const x=p(_);x===null?m(a,l):x&&x.isColor&&(m(x,1),v=!0);const b=n.xr.getEnvironmentBlendMode();b==="additive"?r.buffers.color.setClear(0,0,0,1,o):b==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(n.autoClear||v)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function y(_,v){const x=p(v);x&&(x.isCubeTexture||x.mapping===Lb)?(u===void 0&&(u=new Ns(new TP(1,1,1),new Xo({name:"BackgroundCubeMaterial",uniforms:Of(Bo.backgroundCube.uniforms),vertexShader:Bo.backgroundCube.vertexShader,fragmentShader:Bo.backgroundCube.fragmentShader,side:fi,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(b,T,w){this.matrixWorld.copyPosition(w.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),Vc.copy(v.backgroundRotation),Vc.x*=-1,Vc.y*=-1,Vc.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(Vc.y*=-1,Vc.z*=-1),u.material.uniforms.envMap.value=x,u.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(dpe.makeRotationFromEuler(Vc)),u.material.toneMapped=Jt.getTransfer(x.colorSpace)!==wn,(h!==x||d!==x.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,h=x,d=x.version,f=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new Ns(new kb(2,2),new Xo({name:"BackgroundMaterial",uniforms:Of(Bo.background.uniforms),vertexShader:Bo.background.vertexShader,fragmentShader:Bo.background.fragmentShader,side:yc,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=Jt.getTransfer(x.colorSpace)!==wn,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(h!==x||d!==x.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,h=x,d=x.version,f=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function m(_,v){_.getRGB(I0,zV(n)),r.buffers.color.setClear(I0.r,I0.g,I0.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(_,v=1){a.set(_),l=v,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,m(a,l)},render:g,addToRenderList:y}}function ppe(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=d(null);let s=i,o=!1;function a(S,E,I,F,N){let R=!1;const D=h(F,I,E);s!==D&&(s=D,c(s.object)),R=f(S,F,I,N),R&&p(S,F,I,N),N!==null&&e.update(N,n.ELEMENT_ARRAY_BUFFER),(R||o)&&(o=!1,x(S,E,I,F),N!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(N).buffer))}function l(){return n.createVertexArray()}function c(S){return n.bindVertexArray(S)}function u(S){return n.deleteVertexArray(S)}function h(S,E,I){const F=I.wireframe===!0;let N=r[S.id];N===void 0&&(N={},r[S.id]=N);let R=N[E.id];R===void 0&&(R={},N[E.id]=R);let D=R[F];return D===void 0&&(D=d(l()),R[F]=D),D}function d(S){const E=[],I=[],F=[];for(let N=0;N<t;N++)E[N]=0,I[N]=0,F[N]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:E,enabledAttributes:I,attributeDivisors:F,object:S,attributes:{},index:null}}function f(S,E,I,F){const N=s.attributes,R=E.attributes;let D=0;const j=I.getAttributes();for(const L in j)if(j[L].location>=0){const z=N[L];let X=R[L];if(X===void 0&&(L==="instanceMatrix"&&S.instanceMatrix&&(X=S.instanceMatrix),L==="instanceColor"&&S.instanceColor&&(X=S.instanceColor)),z===void 0||z.attribute!==X||X&&z.data!==X.data)return!0;D++}return s.attributesNum!==D||s.index!==F}function p(S,E,I,F){const N={},R=E.attributes;let D=0;const j=I.getAttributes();for(const L in j)if(j[L].location>=0){let z=R[L];z===void 0&&(L==="instanceMatrix"&&S.instanceMatrix&&(z=S.instanceMatrix),L==="instanceColor"&&S.instanceColor&&(z=S.instanceColor));const X={};X.attribute=z,z&&z.data&&(X.data=z.data),N[L]=X,D++}s.attributes=N,s.attributesNum=D,s.index=F}function g(){const S=s.newAttributes;for(let E=0,I=S.length;E<I;E++)S[E]=0}function y(S){m(S,0)}function m(S,E){const I=s.newAttributes,F=s.enabledAttributes,N=s.attributeDivisors;I[S]=1,F[S]===0&&(n.enableVertexAttribArray(S),F[S]=1),N[S]!==E&&(n.vertexAttribDivisor(S,E),N[S]=E)}function _(){const S=s.newAttributes,E=s.enabledAttributes;for(let I=0,F=E.length;I<F;I++)E[I]!==S[I]&&(n.disableVertexAttribArray(I),E[I]=0)}function v(S,E,I,F,N,R,D){D===!0?n.vertexAttribIPointer(S,E,I,N,R):n.vertexAttribPointer(S,E,I,F,N,R)}function x(S,E,I,F){g();const N=F.attributes,R=I.getAttributes(),D=E.defaultAttributeValues;for(const j in R){const L=R[j];if(L.location>=0){let W=N[j];if(W===void 0&&(j==="instanceMatrix"&&S.instanceMatrix&&(W=S.instanceMatrix),j==="instanceColor"&&S.instanceColor&&(W=S.instanceColor)),W!==void 0){const z=W.normalized,X=W.itemSize,U=e.get(W);if(U===void 0)continue;const te=U.buffer,k=U.type,V=U.bytesPerElement,Z=k===n.INT||k===n.UNSIGNED_INT||W.gpuType===pP;if(W.isInterleavedBufferAttribute){const le=W.data,pe=le.stride,ue=W.offset;if(le.isInstancedInterleavedBuffer){for(let be=0;be<L.locationSize;be++)m(L.location+be,le.meshPerAttribute);S.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let be=0;be<L.locationSize;be++)y(L.location+be);n.bindBuffer(n.ARRAY_BUFFER,te);for(let be=0;be<L.locationSize;be++)v(L.location+be,X/L.locationSize,k,z,pe*V,(ue+X/L.locationSize*be)*V,Z)}else{if(W.isInstancedBufferAttribute){for(let le=0;le<L.locationSize;le++)m(L.location+le,W.meshPerAttribute);S.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let le=0;le<L.locationSize;le++)y(L.location+le);n.bindBuffer(n.ARRAY_BUFFER,te);for(let le=0;le<L.locationSize;le++)v(L.location+le,X/L.locationSize,k,z,X*V,X/L.locationSize*le*V,Z)}}else if(D!==void 0){const z=D[j];if(z!==void 0)switch(z.length){case 2:n.vertexAttrib2fv(L.location,z);break;case 3:n.vertexAttrib3fv(L.location,z);break;case 4:n.vertexAttrib4fv(L.location,z);break;default:n.vertexAttrib1fv(L.location,z)}}}}_()}function b(){M();for(const S in r){const E=r[S];for(const I in E){const F=E[I];for(const N in F)u(F[N].object),delete F[N];delete E[I]}delete r[S]}}function T(S){if(r[S.id]===void 0)return;const E=r[S.id];for(const I in E){const F=E[I];for(const N in F)u(F[N].object),delete F[N];delete E[I]}delete r[S.id]}function w(S){for(const E in r){const I=r[E];if(I[S.id]===void 0)continue;const F=I[S.id];for(const N in F)u(F[N].object),delete F[N];delete I[S.id]}}function M(){C(),o=!0,s!==i&&(s=i,c(s.object))}function C(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:M,resetDefaultState:C,dispose:b,releaseStatesOfGeometry:T,releaseStatesOfProgram:w,initAttributes:g,enableAttribute:y,disableUnusedAttributes:_}}function mpe(n,e,t){let r;function i(c){r=c}function s(c,u){n.drawArrays(r,c,u),t.update(u,r,1)}function o(c,u,h){h!==0&&(n.drawArraysInstanced(r,c,u,h),t.update(u,r,h))}function a(c,u,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,h);let f=0;for(let p=0;p<h;p++)f+=u[p];t.update(f,r,1)}function l(c,u,h,d){if(h===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<c.length;p++)o(c[p],u[p],d[p]);else{f.multiDrawArraysInstancedWEBGL(r,c,0,u,0,d,0,h);let p=0;for(let g=0;g<h;g++)p+=u[g];for(let g=0;g<d.length;g++)t.update(p,r,d[g])}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function gpe(n,e,t,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const w=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(w.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(w){return!(w!==uo&&r.convert(w)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(w){const M=w===np&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(w!==rl&&r.convert(w)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&w!==ka&&!M)}function l(w){if(w==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";w="mediump"}return w==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const h=t.logarithmicDepthBuffer===!0,d=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control");if(d===!0){const w=e.get("EXT_clip_control");w.clipControlEXT(w.LOWER_LEFT_EXT,w.ZERO_TO_ONE_EXT)}const f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),x=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),b=p>0,T=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:h,reverseDepthBuffer:d,maxTextures:f,maxVertexTextures:p,maxTextureSize:g,maxCubemapSize:y,maxAttributes:m,maxVertexUniforms:_,maxVaryings:v,maxFragmentUniforms:x,vertexTextures:b,maxSamples:T}}function ype(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new wa,a=new Pt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||r!==0||i;return i=d,r=h.length,f},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,d){t=u(h,d,0)},this.setState=function(h,d,f){const p=h.clippingPlanes,g=h.clipIntersection,y=h.clipShadows,m=n.get(h);if(!i||p===null||p.length===0||s&&!y)s?u(null):c();else{const _=s?0:r,v=_*4;let x=m.clippingState||null;l.value=x,x=u(p,d,v,f);for(let b=0;b!==v;++b)x[b]=t[b];m.clippingState=x,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(h,d,f,p){const g=h!==null?h.length:0;let y=null;if(g!==0){if(y=l.value,p!==!0||y===null){const m=f+g*4,_=d.matrixWorldInverse;a.getNormalMatrix(_),(y===null||y.length<m)&&(y=new Float32Array(m));for(let v=0,x=f;v!==g;++v,x+=4)o.copy(h[v]).applyMatrix4(_,a),o.normal.toArray(y,x),y[x+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,y}}function vpe(n){let e=new WeakMap;function t(o,a){return a===vA?o.mapping=Pf:a===_A&&(o.mapping=If),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===vA||a===_A)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new Rhe(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}let EP=class extends VV{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const yd=4,zO=[.125,.215,.35,.446,.526,.582],ou=20,Uw=new EP,$O=new Ot;let Bw=null,zw=0,$w=0,Vw=!1;const Jc=(1+Math.sqrt(5))/2,Nh=1/Jc,VO=[new Y(-Jc,Nh,0),new Y(Jc,Nh,0),new Y(-Nh,0,Jc),new Y(Nh,0,Jc),new Y(0,Jc,-Nh),new Y(0,Jc,Nh),new Y(-1,1,-1),new Y(1,1,-1),new Y(-1,1,1),new Y(1,1,1)];let GO=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){Bw=this._renderer.getRenderTarget(),zw=this._renderer.getActiveCubeFace(),$w=this._renderer.getActiveMipmapLevel(),Vw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=jO(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=WO(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Bw,zw,$w),this._renderer.xr.enabled=Vw,e.scissorTest=!1,L0(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Pf||e.mapping===If?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Bw=this._renderer.getRenderTarget(),zw=this._renderer.getActiveCubeFace(),$w=this._renderer.getActiveMipmapLevel(),Vw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:ao,minFilter:ao,generateMipmaps:!1,type:np,format:uo,colorSpace:Nc,depthBuffer:!1},i=HO(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=HO(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_pe(s)),this._blurMaterial=xpe(s,e,t)}return i}_compileMaterial(e){const t=new Ns(this._lodPlanes[0],e);this._renderer.compile(t,Uw)}_sceneToCubeUV(e,t,r,i){const a=new As(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,d=u.toneMapping;u.getClearColor($O),u.toneMapping=uc,u.autoClear=!1;const f=new wP({name:"PMREM.Background",side:fi,depthWrite:!1,depthTest:!1}),p=new Ns(new TP,f);let g=!1;const y=e.background;y?y.isColor&&(f.color.copy(y),e.background=null,g=!0):(f.color.copy($O),g=!0);for(let m=0;m<6;m++){const _=m%3;_===0?(a.up.set(0,l[m],0),a.lookAt(c[m],0,0)):_===1?(a.up.set(0,0,l[m]),a.lookAt(0,c[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,c[m]));const v=this._cubeSize;L0(i,_*v,m>2?v:0,v,v),u.setRenderTarget(i),g&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=d,u.autoClear=h,e.background=y}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Pf||e.mapping===If;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=jO()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=WO());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Ns(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;L0(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,Uw)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=VO[(i-s-1)%VO.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new Ns(this._lodPlanes[i],c),d=c.uniforms,f=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*ou-1),g=s/p,y=isFinite(s)?1+Math.floor(u*g):ou;y>ou&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${ou}`);const m=[];let _=0;for(let w=0;w<ou;++w){const M=w/g,C=Math.exp(-M*M/2);m.push(C),w===0?_+=C:w<y&&(_+=2*C)}for(let w=0;w<m.length;w++)m[w]=m[w]/_;d.envMap.value=e.texture,d.samples.value=y,d.weights.value=m,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:v}=this;d.dTheta.value=p,d.mipInt.value=v-r;const x=this._sizeLods[i],b=3*x*(i>v-yd?i-v+yd:0),T=4*(this._cubeSize-x);L0(t,b,T,3*x,2*x),l.setRenderTarget(t),l.render(h,Uw)}};function _pe(n){const e=[],t=[],r=[];let i=n;const s=n-yd+1+zO.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-yd?l=zO[o-n+yd-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,h=1+c,d=[u,u,h,u,h,h,u,u,h,h,u,h],f=6,p=6,g=3,y=2,m=1,_=new Float32Array(g*p*f),v=new Float32Array(y*p*f),x=new Float32Array(m*p*f);for(let T=0;T<f;T++){const w=T%3*2/3-1,M=T>2?0:-1,C=[w,M,0,w+2/3,M,0,w+2/3,M+1,0,w,M,0,w+2/3,M+1,0,w,M+1,0];_.set(C,g*p*T),v.set(d,y*p*T);const S=[T,T,T,T,T,T];x.set(S,m*p*T)}const b=new Vs;b.setAttribute("position",new Is(_,g)),b.setAttribute("uv",new Is(v,y)),b.setAttribute("faceIndex",new Is(x,m)),e.push(b),i>yd&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function HO(n,e,t){const r=new vc(n,e,t);return r.texture.mapping=Lb,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function L0(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function xpe(n,e,t){const r=new Float32Array(ou),i=new Y(0,1,0);return new Xo({name:"SphericalGaussianBlur",defines:{n:ou,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:AP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ga,depthTest:!1,depthWrite:!1})}function WO(){return new Xo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:AP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ga,depthTest:!1,depthWrite:!1})}function jO(){return new Xo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:AP(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ga,depthTest:!1,depthWrite:!1})}function AP(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Spe(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===vA||l===_A,u=l===Pf||l===If;if(c||u){let h=e.get(a);const d=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==d)return t===null&&(t=new GO(n)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{const f=a.image;return c&&f&&f.height>0||u&&f&&i(f)?(t===null&&(t=new GO(n)),h=c?t.fromEquirectangular(a):t.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",s),h.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function bpe(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&i_("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function wpe(n,e,t,r){const i={},s=new WeakMap;function o(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);for(const p in d.morphAttributes){const g=d.morphAttributes[p];for(let y=0,m=g.length;y<m;y++)e.remove(g[y])}d.removeEventListener("dispose",o),delete i[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(h,d){return i[d.id]===!0||(d.addEventListener("dispose",o),i[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const p in d)e.update(d[p],n.ARRAY_BUFFER);const f=h.morphAttributes;for(const p in f){const g=f[p];for(let y=0,m=g.length;y<m;y++)e.update(g[y],n.ARRAY_BUFFER)}}function c(h){const d=[],f=h.index,p=h.attributes.position;let g=0;if(f!==null){const _=f.array;g=f.version;for(let v=0,x=_.length;v<x;v+=3){const b=_[v+0],T=_[v+1],w=_[v+2];d.push(b,T,T,w,w,b)}}else if(p!==void 0){const _=p.array;g=p.version;for(let v=0,x=_.length/3-1;v<x;v+=3){const b=v+0,T=v+1,w=v+2;d.push(b,T,T,w,w,b)}}else return;const y=new(RV(d)?kV:FV)(d,1);y.version=g;const m=s.get(h);m&&e.remove(m),s.set(h,y)}function u(h){const d=s.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function Tpe(n,e,t){let r;function i(d){r=d}let s,o;function a(d){s=d.type,o=d.bytesPerElement}function l(d,f){n.drawElements(r,f,s,d*o),t.update(f,r,1)}function c(d,f,p){p!==0&&(n.drawElementsInstanced(r,f,s,d*o,p),t.update(f,r,p))}function u(d,f,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,f,0,s,d,0,p);let y=0;for(let m=0;m<p;m++)y+=f[m];t.update(y,r,1)}function h(d,f,p,g){if(p===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let m=0;m<d.length;m++)c(d[m]/o,f[m],g[m]);else{y.multiDrawElementsInstancedWEBGL(r,f,0,s,d,0,g,0,p);let m=0;for(let _=0;_<p;_++)m+=f[_];for(let _=0;_<g.length;_++)t.update(m,r,g[_])}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function Mpe(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Epe(n,e,t){const r=new WeakMap,i=new ar;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=u!==void 0?u.length:0;let d=r.get(a);if(d===void 0||d.count!==h){let S=function(){M.dispose(),r.delete(a),a.removeEventListener("dispose",S)};var f=S;d!==void 0&&d.texture.dispose();const p=a.morphAttributes.position!==void 0,g=a.morphAttributes.normal!==void 0,y=a.morphAttributes.color!==void 0,m=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],v=a.morphAttributes.color||[];let x=0;p===!0&&(x=1),g===!0&&(x=2),y===!0&&(x=3);let b=a.attributes.position.count*x,T=1;b>e.maxTextureSize&&(T=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);const w=new Float32Array(b*T*4*h),M=new IV(w,b,T,h);M.type=ka,M.needsUpdate=!0;const C=x*4;for(let E=0;E<h;E++){const I=m[E],F=_[E],N=v[E],R=b*T*4*E;for(let D=0;D<I.count;D++){const j=D*C;p===!0&&(i.fromBufferAttribute(I,D),w[R+j+0]=i.x,w[R+j+1]=i.y,w[R+j+2]=i.z,w[R+j+3]=0),g===!0&&(i.fromBufferAttribute(F,D),w[R+j+4]=i.x,w[R+j+5]=i.y,w[R+j+6]=i.z,w[R+j+7]=0),y===!0&&(i.fromBufferAttribute(N,D),w[R+j+8]=i.x,w[R+j+9]=i.y,w[R+j+10]=i.z,w[R+j+11]=N.itemSize===4?i.w:1)}}d={count:h,texture:M,size:new Ve(b,T)},r.set(a,d),a.addEventListener("dispose",S)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let p=0;for(let y=0;y<c.length;y++)p+=c[y];const g=a.morphTargetsRelative?1:1-p;l.getUniforms().setValue(n,"morphTargetBaseInfluence",g),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",d.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",d.size)}return{update:s}}function Ape(n,e,t,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,h=e.get(l,u);if(i.get(h)!==c&&(e.update(h),i.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;i.get(d)!==c&&(d.update(),i.set(d,c))}return h}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}let WV=class extends Eo{constructor(e,t,r,i,s,o,a,l,c,u=zd){if(u!==zd&&u!==Df)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===zd&&(r=$u),r===void 0&&u===Df&&(r=Lf),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Rs,this.minFilter=l!==void 0?l:Rs,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}};const jV=new Eo,qO=new WV(1,1),qV=new IV,XV=new phe,KV=new GV,XO=[],KO=[],YO=new Float32Array(16),QO=new Float32Array(9),ZO=new Float32Array(4);function rp(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=XO[i];if(s===void 0&&(s=new Float32Array(i),XO[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function yr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function vr(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Ub(n,e){let t=KO[e];t===void 0&&(t=new Int32Array(e),KO[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function Cpe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Rpe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(yr(t,e))return;n.uniform2fv(this.addr,e),vr(t,e)}}function Npe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(yr(t,e))return;n.uniform3fv(this.addr,e),vr(t,e)}}function Ppe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(yr(t,e))return;n.uniform4fv(this.addr,e),vr(t,e)}}function Ipe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(yr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),vr(t,e)}else{if(yr(t,r))return;ZO.set(r),n.uniformMatrix2fv(this.addr,!1,ZO),vr(t,r)}}function Lpe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(yr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),vr(t,e)}else{if(yr(t,r))return;QO.set(r),n.uniformMatrix3fv(this.addr,!1,QO),vr(t,r)}}function Dpe(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(yr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),vr(t,e)}else{if(yr(t,r))return;YO.set(r),n.uniformMatrix4fv(this.addr,!1,YO),vr(t,r)}}function Ope(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Fpe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(yr(t,e))return;n.uniform2iv(this.addr,e),vr(t,e)}}function kpe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(yr(t,e))return;n.uniform3iv(this.addr,e),vr(t,e)}}function Upe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(yr(t,e))return;n.uniform4iv(this.addr,e),vr(t,e)}}function Bpe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function zpe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(yr(t,e))return;n.uniform2uiv(this.addr,e),vr(t,e)}}function $pe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(yr(t,e))return;n.uniform3uiv(this.addr,e),vr(t,e)}}function Vpe(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(yr(t,e))return;n.uniform4uiv(this.addr,e),vr(t,e)}}function Gpe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let s;this.type===n.SAMPLER_2D_SHADOW?(qO.compareFunction=EV,s=qO):s=jV,t.setTexture2D(e||s,i)}function Hpe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||XV,i)}function Wpe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||KV,i)}function jpe(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||qV,i)}function qpe(n){switch(n){case 5126:return Cpe;case 35664:return Rpe;case 35665:return Npe;case 35666:return Ppe;case 35674:return Ipe;case 35675:return Lpe;case 35676:return Dpe;case 5124:case 35670:return Ope;case 35667:case 35671:return Fpe;case 35668:case 35672:return kpe;case 35669:case 35673:return Upe;case 5125:return Bpe;case 36294:return zpe;case 36295:return $pe;case 36296:return Vpe;case 35678:case 36198:case 36298:case 36306:case 35682:return Gpe;case 35679:case 36299:case 36307:return Hpe;case 35680:case 36300:case 36308:case 36293:return Wpe;case 36289:case 36303:case 36311:case 36292:return jpe}}function Xpe(n,e){n.uniform1fv(this.addr,e)}function Kpe(n,e){const t=rp(e,this.size,2);n.uniform2fv(this.addr,t)}function Ype(n,e){const t=rp(e,this.size,3);n.uniform3fv(this.addr,t)}function Qpe(n,e){const t=rp(e,this.size,4);n.uniform4fv(this.addr,t)}function Zpe(n,e){const t=rp(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Jpe(n,e){const t=rp(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function eme(n,e){const t=rp(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function tme(n,e){n.uniform1iv(this.addr,e)}function nme(n,e){n.uniform2iv(this.addr,e)}function rme(n,e){n.uniform3iv(this.addr,e)}function ime(n,e){n.uniform4iv(this.addr,e)}function sme(n,e){n.uniform1uiv(this.addr,e)}function ome(n,e){n.uniform2uiv(this.addr,e)}function ame(n,e){n.uniform3uiv(this.addr,e)}function lme(n,e){n.uniform4uiv(this.addr,e)}function cme(n,e,t){const r=this.cache,i=e.length,s=Ub(t,i);yr(r,s)||(n.uniform1iv(this.addr,s),vr(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||jV,s[o])}function ume(n,e,t){const r=this.cache,i=e.length,s=Ub(t,i);yr(r,s)||(n.uniform1iv(this.addr,s),vr(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||XV,s[o])}function hme(n,e,t){const r=this.cache,i=e.length,s=Ub(t,i);yr(r,s)||(n.uniform1iv(this.addr,s),vr(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||KV,s[o])}function dme(n,e,t){const r=this.cache,i=e.length,s=Ub(t,i);yr(r,s)||(n.uniform1iv(this.addr,s),vr(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||qV,s[o])}function fme(n){switch(n){case 5126:return Xpe;case 35664:return Kpe;case 35665:return Ype;case 35666:return Qpe;case 35674:return Zpe;case 35675:return Jpe;case 35676:return eme;case 5124:case 35670:return tme;case 35667:case 35671:return nme;case 35668:case 35672:return rme;case 35669:case 35673:return ime;case 5125:return sme;case 36294:return ome;case 36295:return ame;case 36296:return lme;case 35678:case 36198:case 36298:case 36306:case 35682:return cme;case 35679:case 36299:case 36307:return ume;case 35680:case 36300:case 36308:case 36293:return hme;case 36289:case 36303:case 36311:case 36292:return dme}}class pme{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=qpe(t.type)}}class mme{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=fme(t.type)}}class gme{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const Gw=/(\w+)(\])?(\[|\.)?/g;function JO(n,e){n.seq.push(e),n.map[e.id]=e}function yme(n,e,t){const r=n.name,i=r.length;for(Gw.lastIndex=0;;){const s=Gw.exec(r),o=Gw.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){JO(t,c===void 0?new pme(a,n,e):new mme(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new gme(a),JO(t,h)),t=h}}}class a_{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);yme(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function eF(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const vme=37297;let _me=0;function xme(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function Sme(n){const e=Jt.getPrimaries(Jt.workingColorSpace),t=Jt.getPrimaries(n);let r;switch(e===t?r="":e===_x&&t===vx?r="LinearDisplayP3ToLinearSRGB":e===vx&&t===_x&&(r="LinearSRGBToLinearDisplayP3"),n){case Nc:case Db:return[r,"LinearTransferOETF"];case bs:case xP:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[r,"LinearTransferOETF"]}}function tF(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+xme(n.getShaderSource(e),o)}else return i}function bme(n,e){const t=Sme(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function wme(n,e){let t;switch(e){case Mue:t="Linear";break;case Eue:t="Reinhard";break;case Aue:t="Cineon";break;case Cue:t="ACESFilmic";break;case Nue:t="AgX";break;case Pue:t="Neutral";break;case Rue:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const D0=new Y;function Tme(){Jt.getLuminanceCoefficients(D0);const n=D0.x.toFixed(4),e=D0.y.toFixed(4),t=D0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Mme(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Sm).join(`
`)}function Eme(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function Ame(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Sm(n){return n!==""}function nF(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function rF(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Cme=/^[ \t]*#include +<([\w\d./]+)>/gm;function QA(n){return n.replace(Cme,Nme)}const Rme=new Map;function Nme(n,e){let t=At[e];if(t===void 0){const r=Rme.get(e);if(r!==void 0)t=At[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return QA(t)}const Pme=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function iF(n){return n.replace(Pme,Ime)}function Ime(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function sF(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Lme(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===fV?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===iue?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===va&&(e="SHADOWMAP_TYPE_VSM"),e}function Dme(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Pf:case If:e="ENVMAP_TYPE_CUBE";break;case Lb:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Ome(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case If:e="ENVMAP_MODE_REFRACTION";break}return e}function Fme(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case fP:e="ENVMAP_BLENDING_MULTIPLY";break;case wue:e="ENVMAP_BLENDING_MIX";break;case Tue:e="ENVMAP_BLENDING_ADD";break}return e}function kme(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Ume(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Lme(t),c=Dme(t),u=Ome(t),h=Fme(t),d=kme(t),f=Mme(t),p=Eme(s),g=i.createProgram();let y,m,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Sm).join(`
`),y.length>0&&(y+=`
`),m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(Sm).join(`
`),m.length>0&&(m+=`
`)):(y=[sF(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Sm).join(`
`),m=[sF(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==uc?"#define TONE_MAPPING":"",t.toneMapping!==uc?At.tonemapping_pars_fragment:"",t.toneMapping!==uc?wme("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",At.colorspace_pars_fragment,bme("linearToOutputTexel",t.outputColorSpace),Tme(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Sm).join(`
`)),o=QA(o),o=nF(o,t),o=rF(o,t),a=QA(a),a=nF(a,t),a=rF(a,t),o=iF(o),a=iF(a),t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,y=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,m=["#define varying in",t.glslVersion===SO?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===SO?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const v=_+y+o,x=_+m+a,b=eF(i,i.VERTEX_SHADER,v),T=eF(i,i.FRAGMENT_SHADER,x);i.attachShader(g,b),i.attachShader(g,T),t.index0AttributeName!==void 0?i.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g);function w(E){if(n.debug.checkShaderErrors){const I=i.getProgramInfoLog(g).trim(),F=i.getShaderInfoLog(b).trim(),N=i.getShaderInfoLog(T).trim();let R=!0,D=!0;if(i.getProgramParameter(g,i.LINK_STATUS)===!1)if(R=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,g,b,T);else{const j=tF(i,b,"vertex"),L=tF(i,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(g,i.VALIDATE_STATUS)+`

Material Name: `+E.name+`
Material Type: `+E.type+`

Program Info Log: `+I+`
`+j+`
`+L)}else I!==""?console.warn("THREE.WebGLProgram: Program Info Log:",I):(F===""||N==="")&&(D=!1);D&&(E.diagnostics={runnable:R,programLog:I,vertexShader:{log:F,prefix:y},fragmentShader:{log:N,prefix:m}})}i.deleteShader(b),i.deleteShader(T),M=new a_(i,g),C=Ame(i,g)}let M;this.getUniforms=function(){return M===void 0&&w(this),M};let C;this.getAttributes=function(){return C===void 0&&w(this),C};let S=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return S===!1&&(S=i.getProgramParameter(g,vme)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=_me++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=b,this.fragmentShader=T,this}let Bme=0;class zme{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new $me(e),t.set(e,r)),r}}class $me{constructor(e){this.id=Bme++,this.code=e,this.usedTimes=0}}function Vme(n,e,t,r,i,s,o){const a=new bP,l=new zme,c=new Set,u=[],h=i.logarithmicDepthBuffer,d=i.reverseDepthBuffer,f=i.vertexTextures;let p=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(S){return c.add(S),S===0?"uv":`uv${S}`}function m(S,E,I,F,N){const R=F.fog,D=N.geometry,j=S.isMeshStandardMaterial?F.environment:null,L=(S.isMeshStandardMaterial?t:e).get(S.envMap||j),W=L&&L.mapping===Lb?L.image.height:null,z=g[S.type];S.precision!==null&&(p=i.getMaxPrecision(S.precision),p!==S.precision&&console.warn("THREE.WebGLProgram.getParameters:",S.precision,"not supported, using",p,"instead."));const X=D.morphAttributes.position||D.morphAttributes.normal||D.morphAttributes.color,U=X!==void 0?X.length:0;let te=0;D.morphAttributes.position!==void 0&&(te=1),D.morphAttributes.normal!==void 0&&(te=2),D.morphAttributes.color!==void 0&&(te=3);let k,V,Z,le;if(z){const pn=Bo[z];k=pn.vertexShader,V=pn.fragmentShader}else k=S.vertexShader,V=S.fragmentShader,l.update(S),Z=l.getVertexShaderID(S),le=l.getFragmentShaderID(S);const pe=n.getRenderTarget(),ue=N.isInstancedMesh===!0,be=N.isBatchedMesh===!0,Pe=!!S.map,we=!!S.matcap,G=!!L,Ge=!!S.aoMap,$e=!!S.lightMap,Ye=!!S.bumpMap,De=!!S.normalMap,st=!!S.displacementMap,Ze=!!S.emissiveMap,B=!!S.metalnessMap,A=!!S.roughnessMap,ae=S.anisotropy>0,oe=S.clearcoat>0,Te=S.dispersion>0,Se=S.iridescence>0,Xe=S.sheen>0,Ie=S.transmission>0,Fe=ae&&!!S.anisotropyMap,pt=oe&&!!S.clearcoatMap,Le=oe&&!!S.clearcoatNormalMap,Oe=oe&&!!S.clearcoatRoughnessMap,ot=Se&&!!S.iridescenceMap,ut=Se&&!!S.iridescenceThicknessMap,Ne=Xe&&!!S.sheenColorMap,K=Xe&&!!S.sheenRoughnessMap,H=!!S.specularMap,ve=!!S.specularColorMap,$=!!S.specularIntensityMap,me=Ie&&!!S.transmissionMap,J=Ie&&!!S.thicknessMap,he=!!S.gradientMap,Ee=!!S.alphaMap,Re=S.alphaTest>0,qe=!!S.alphaHash,vt=!!S.extensions;let on=uc;S.toneMapped&&(pe===null||pe.isXRRenderTarget===!0)&&(on=n.toneMapping);const dt={shaderID:z,shaderType:S.type,shaderName:S.name,vertexShader:k,fragmentShader:V,defines:S.defines,customVertexShaderID:Z,customFragmentShaderID:le,isRawShaderMaterial:S.isRawShaderMaterial===!0,glslVersion:S.glslVersion,precision:p,batching:be,batchingColor:be&&N._colorsTexture!==null,instancing:ue,instancingColor:ue&&N.instanceColor!==null,instancingMorph:ue&&N.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:pe===null?n.outputColorSpace:pe.isXRRenderTarget===!0?pe.texture.colorSpace:Nc,alphaToCoverage:!!S.alphaToCoverage,map:Pe,matcap:we,envMap:G,envMapMode:G&&L.mapping,envMapCubeUVHeight:W,aoMap:Ge,lightMap:$e,bumpMap:Ye,normalMap:De,displacementMap:f&&st,emissiveMap:Ze,normalMapObjectSpace:De&&S.normalMapType===Oue,normalMapTangentSpace:De&&S.normalMapType===MV,metalnessMap:B,roughnessMap:A,anisotropy:ae,anisotropyMap:Fe,clearcoat:oe,clearcoatMap:pt,clearcoatNormalMap:Le,clearcoatRoughnessMap:Oe,dispersion:Te,iridescence:Se,iridescenceMap:ot,iridescenceThicknessMap:ut,sheen:Xe,sheenColorMap:Ne,sheenRoughnessMap:K,specularMap:H,specularColorMap:ve,specularIntensityMap:$,transmission:Ie,transmissionMap:me,thicknessMap:J,gradientMap:he,opaque:S.transparent===!1&&S.blending===Bd&&S.alphaToCoverage===!1,alphaMap:Ee,alphaTest:Re,alphaHash:qe,combine:S.combine,mapUv:Pe&&y(S.map.channel),aoMapUv:Ge&&y(S.aoMap.channel),lightMapUv:$e&&y(S.lightMap.channel),bumpMapUv:Ye&&y(S.bumpMap.channel),normalMapUv:De&&y(S.normalMap.channel),displacementMapUv:st&&y(S.displacementMap.channel),emissiveMapUv:Ze&&y(S.emissiveMap.channel),metalnessMapUv:B&&y(S.metalnessMap.channel),roughnessMapUv:A&&y(S.roughnessMap.channel),anisotropyMapUv:Fe&&y(S.anisotropyMap.channel),clearcoatMapUv:pt&&y(S.clearcoatMap.channel),clearcoatNormalMapUv:Le&&y(S.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Oe&&y(S.clearcoatRoughnessMap.channel),iridescenceMapUv:ot&&y(S.iridescenceMap.channel),iridescenceThicknessMapUv:ut&&y(S.iridescenceThicknessMap.channel),sheenColorMapUv:Ne&&y(S.sheenColorMap.channel),sheenRoughnessMapUv:K&&y(S.sheenRoughnessMap.channel),specularMapUv:H&&y(S.specularMap.channel),specularColorMapUv:ve&&y(S.specularColorMap.channel),specularIntensityMapUv:$&&y(S.specularIntensityMap.channel),transmissionMapUv:me&&y(S.transmissionMap.channel),thicknessMapUv:J&&y(S.thicknessMap.channel),alphaMapUv:Ee&&y(S.alphaMap.channel),vertexTangents:!!D.attributes.tangent&&(De||ae),vertexColors:S.vertexColors,vertexAlphas:S.vertexColors===!0&&!!D.attributes.color&&D.attributes.color.itemSize===4,pointsUvs:N.isPoints===!0&&!!D.attributes.uv&&(Pe||Ee),fog:!!R,useFog:S.fog===!0,fogExp2:!!R&&R.isFogExp2,flatShading:S.flatShading===!0,sizeAttenuation:S.sizeAttenuation===!0,logarithmicDepthBuffer:h,reverseDepthBuffer:d,skinning:N.isSkinnedMesh===!0,morphTargets:D.morphAttributes.position!==void 0,morphNormals:D.morphAttributes.normal!==void 0,morphColors:D.morphAttributes.color!==void 0,morphTargetsCount:U,morphTextureStride:te,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:S.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:on,decodeVideoTexture:Pe&&S.map.isVideoTexture===!0&&Jt.getTransfer(S.map.colorSpace)===wn,premultipliedAlpha:S.premultipliedAlpha,doubleSided:S.side===Ca,flipSided:S.side===fi,useDepthPacking:S.depthPacking>=0,depthPacking:S.depthPacking||0,index0AttributeName:S.index0AttributeName,extensionClipCullDistance:vt&&S.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(vt&&S.extensions.multiDraw===!0||be)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:S.customProgramCacheKey()};return dt.vertexUv1s=c.has(1),dt.vertexUv2s=c.has(2),dt.vertexUv3s=c.has(3),c.clear(),dt}function _(S){const E=[];if(S.shaderID?E.push(S.shaderID):(E.push(S.customVertexShaderID),E.push(S.customFragmentShaderID)),S.defines!==void 0)for(const I in S.defines)E.push(I),E.push(S.defines[I]);return S.isRawShaderMaterial===!1&&(v(E,S),x(E,S),E.push(n.outputColorSpace)),E.push(S.customProgramCacheKey),E.join()}function v(S,E){S.push(E.precision),S.push(E.outputColorSpace),S.push(E.envMapMode),S.push(E.envMapCubeUVHeight),S.push(E.mapUv),S.push(E.alphaMapUv),S.push(E.lightMapUv),S.push(E.aoMapUv),S.push(E.bumpMapUv),S.push(E.normalMapUv),S.push(E.displacementMapUv),S.push(E.emissiveMapUv),S.push(E.metalnessMapUv),S.push(E.roughnessMapUv),S.push(E.anisotropyMapUv),S.push(E.clearcoatMapUv),S.push(E.clearcoatNormalMapUv),S.push(E.clearcoatRoughnessMapUv),S.push(E.iridescenceMapUv),S.push(E.iridescenceThicknessMapUv),S.push(E.sheenColorMapUv),S.push(E.sheenRoughnessMapUv),S.push(E.specularMapUv),S.push(E.specularColorMapUv),S.push(E.specularIntensityMapUv),S.push(E.transmissionMapUv),S.push(E.thicknessMapUv),S.push(E.combine),S.push(E.fogExp2),S.push(E.sizeAttenuation),S.push(E.morphTargetsCount),S.push(E.morphAttributeCount),S.push(E.numDirLights),S.push(E.numPointLights),S.push(E.numSpotLights),S.push(E.numSpotLightMaps),S.push(E.numHemiLights),S.push(E.numRectAreaLights),S.push(E.numDirLightShadows),S.push(E.numPointLightShadows),S.push(E.numSpotLightShadows),S.push(E.numSpotLightShadowsWithMaps),S.push(E.numLightProbes),S.push(E.shadowMapType),S.push(E.toneMapping),S.push(E.numClippingPlanes),S.push(E.numClipIntersection),S.push(E.depthPacking)}function x(S,E){a.disableAll(),E.supportsVertexTextures&&a.enable(0),E.instancing&&a.enable(1),E.instancingColor&&a.enable(2),E.instancingMorph&&a.enable(3),E.matcap&&a.enable(4),E.envMap&&a.enable(5),E.normalMapObjectSpace&&a.enable(6),E.normalMapTangentSpace&&a.enable(7),E.clearcoat&&a.enable(8),E.iridescence&&a.enable(9),E.alphaTest&&a.enable(10),E.vertexColors&&a.enable(11),E.vertexAlphas&&a.enable(12),E.vertexUv1s&&a.enable(13),E.vertexUv2s&&a.enable(14),E.vertexUv3s&&a.enable(15),E.vertexTangents&&a.enable(16),E.anisotropy&&a.enable(17),E.alphaHash&&a.enable(18),E.batching&&a.enable(19),E.dispersion&&a.enable(20),E.batchingColor&&a.enable(21),S.push(a.mask),a.disableAll(),E.fog&&a.enable(0),E.useFog&&a.enable(1),E.flatShading&&a.enable(2),E.logarithmicDepthBuffer&&a.enable(3),E.reverseDepthBuffer&&a.enable(4),E.skinning&&a.enable(5),E.morphTargets&&a.enable(6),E.morphNormals&&a.enable(7),E.morphColors&&a.enable(8),E.premultipliedAlpha&&a.enable(9),E.shadowMapEnabled&&a.enable(10),E.doubleSided&&a.enable(11),E.flipSided&&a.enable(12),E.useDepthPacking&&a.enable(13),E.dithering&&a.enable(14),E.transmission&&a.enable(15),E.sheen&&a.enable(16),E.opaque&&a.enable(17),E.pointsUvs&&a.enable(18),E.decodeVideoTexture&&a.enable(19),E.alphaToCoverage&&a.enable(20),S.push(a.mask)}function b(S){const E=g[S.type];let I;if(E){const F=Bo[E];I=$V.clone(F.uniforms)}else I=S.uniforms;return I}function T(S,E){let I;for(let F=0,N=u.length;F<N;F++){const R=u[F];if(R.cacheKey===E){I=R,++I.usedTimes;break}}return I===void 0&&(I=new Ume(n,E,S,s),u.push(I)),I}function w(S){if(--S.usedTimes===0){const E=u.indexOf(S);u[E]=u[u.length-1],u.pop(),S.destroy()}}function M(S){l.remove(S)}function C(){l.dispose()}return{getParameters:m,getProgramCacheKey:_,getUniforms:b,acquireProgram:T,releaseProgram:w,releaseShaderCache:M,programs:u,dispose:C}}function Gme(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function r(o){n.delete(o)}function i(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:s}}function Hme(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function oF(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function aF(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(h,d,f,p,g,y){let m=n[e];return m===void 0?(m={id:h.id,object:h,geometry:d,material:f,groupOrder:p,renderOrder:h.renderOrder,z:g,group:y},n[e]=m):(m.id=h.id,m.object=h,m.geometry=d,m.material=f,m.groupOrder=p,m.renderOrder=h.renderOrder,m.z=g,m.group=y),e++,m}function a(h,d,f,p,g,y){const m=o(h,d,f,p,g,y);f.transmission>0?r.push(m):f.transparent===!0?i.push(m):t.push(m)}function l(h,d,f,p,g,y){const m=o(h,d,f,p,g,y);f.transmission>0?r.unshift(m):f.transparent===!0?i.unshift(m):t.unshift(m)}function c(h,d){t.length>1&&t.sort(h||Hme),r.length>1&&r.sort(d||oF),i.length>1&&i.sort(d||oF)}function u(){for(let h=e,d=n.length;h<d;h++){const f=n[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function Wme(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new aF,n.set(r,[o])):i>=s.length?(o=new aF,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function jme(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Y,color:new Ot};break;case"SpotLight":t={position:new Y,direction:new Y,color:new Ot,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Y,color:new Ot,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Y,skyColor:new Ot,groundColor:new Ot};break;case"RectAreaLight":t={color:new Ot,position:new Y,halfWidth:new Y,halfHeight:new Y};break}return n[e.id]=t,t}}}function qme(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ve,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Xme=0;function Kme(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Yme(n){const e=new jme,t=qme(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new Y);const i=new Y,s=new Cn,o=new Cn;function a(c){let u=0,h=0,d=0;for(let C=0;C<9;C++)r.probe[C].set(0,0,0);let f=0,p=0,g=0,y=0,m=0,_=0,v=0,x=0,b=0,T=0,w=0;c.sort(Kme);for(let C=0,S=c.length;C<S;C++){const E=c[C],I=E.color,F=E.intensity,N=E.distance,R=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)u+=I.r*F,h+=I.g*F,d+=I.b*F;else if(E.isLightProbe){for(let D=0;D<9;D++)r.probe[D].addScaledVector(E.sh.coefficients[D],F);w++}else if(E.isDirectionalLight){const D=e.get(E);if(D.color.copy(E.color).multiplyScalar(E.intensity),E.castShadow){const j=E.shadow,L=t.get(E);L.shadowIntensity=j.intensity,L.shadowBias=j.bias,L.shadowNormalBias=j.normalBias,L.shadowRadius=j.radius,L.shadowMapSize=j.mapSize,r.directionalShadow[f]=L,r.directionalShadowMap[f]=R,r.directionalShadowMatrix[f]=E.shadow.matrix,_++}r.directional[f]=D,f++}else if(E.isSpotLight){const D=e.get(E);D.position.setFromMatrixPosition(E.matrixWorld),D.color.copy(I).multiplyScalar(F),D.distance=N,D.coneCos=Math.cos(E.angle),D.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),D.decay=E.decay,r.spot[g]=D;const j=E.shadow;if(E.map&&(r.spotLightMap[b]=E.map,b++,j.updateMatrices(E),E.castShadow&&T++),r.spotLightMatrix[g]=j.matrix,E.castShadow){const L=t.get(E);L.shadowIntensity=j.intensity,L.shadowBias=j.bias,L.shadowNormalBias=j.normalBias,L.shadowRadius=j.radius,L.shadowMapSize=j.mapSize,r.spotShadow[g]=L,r.spotShadowMap[g]=R,x++}g++}else if(E.isRectAreaLight){const D=e.get(E);D.color.copy(I).multiplyScalar(F),D.halfWidth.set(E.width*.5,0,0),D.halfHeight.set(0,E.height*.5,0),r.rectArea[y]=D,y++}else if(E.isPointLight){const D=e.get(E);if(D.color.copy(E.color).multiplyScalar(E.intensity),D.distance=E.distance,D.decay=E.decay,E.castShadow){const j=E.shadow,L=t.get(E);L.shadowIntensity=j.intensity,L.shadowBias=j.bias,L.shadowNormalBias=j.normalBias,L.shadowRadius=j.radius,L.shadowMapSize=j.mapSize,L.shadowCameraNear=j.camera.near,L.shadowCameraFar=j.camera.far,r.pointShadow[p]=L,r.pointShadowMap[p]=R,r.pointShadowMatrix[p]=E.shadow.matrix,v++}r.point[p]=D,p++}else if(E.isHemisphereLight){const D=e.get(E);D.skyColor.copy(E.color).multiplyScalar(F),D.groundColor.copy(E.groundColor).multiplyScalar(F),r.hemi[m]=D,m++}}y>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=He.LTC_FLOAT_1,r.rectAreaLTC2=He.LTC_FLOAT_2):(r.rectAreaLTC1=He.LTC_HALF_1,r.rectAreaLTC2=He.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=h,r.ambient[2]=d;const M=r.hash;(M.directionalLength!==f||M.pointLength!==p||M.spotLength!==g||M.rectAreaLength!==y||M.hemiLength!==m||M.numDirectionalShadows!==_||M.numPointShadows!==v||M.numSpotShadows!==x||M.numSpotMaps!==b||M.numLightProbes!==w)&&(r.directional.length=f,r.spot.length=g,r.rectArea.length=y,r.point.length=p,r.hemi.length=m,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=v,r.pointShadowMap.length=v,r.spotShadow.length=x,r.spotShadowMap.length=x,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=v,r.spotLightMatrix.length=x+b-T,r.spotLightMap.length=b,r.numSpotLightShadowsWithMaps=T,r.numLightProbes=w,M.directionalLength=f,M.pointLength=p,M.spotLength=g,M.rectAreaLength=y,M.hemiLength=m,M.numDirectionalShadows=_,M.numPointShadows=v,M.numSpotShadows=x,M.numSpotMaps=b,M.numLightProbes=w,r.version=Xme++)}function l(c,u){let h=0,d=0,f=0,p=0,g=0;const y=u.matrixWorldInverse;for(let m=0,_=c.length;m<_;m++){const v=c[m];if(v.isDirectionalLight){const x=r.directional[h];x.direction.setFromMatrixPosition(v.matrixWorld),i.setFromMatrixPosition(v.target.matrixWorld),x.direction.sub(i),x.direction.transformDirection(y),h++}else if(v.isSpotLight){const x=r.spot[f];x.position.setFromMatrixPosition(v.matrixWorld),x.position.applyMatrix4(y),x.direction.setFromMatrixPosition(v.matrixWorld),i.setFromMatrixPosition(v.target.matrixWorld),x.direction.sub(i),x.direction.transformDirection(y),f++}else if(v.isRectAreaLight){const x=r.rectArea[p];x.position.setFromMatrixPosition(v.matrixWorld),x.position.applyMatrix4(y),o.identity(),s.copy(v.matrixWorld),s.premultiply(y),o.extractRotation(s),x.halfWidth.set(v.width*.5,0,0),x.halfHeight.set(0,v.height*.5,0),x.halfWidth.applyMatrix4(o),x.halfHeight.applyMatrix4(o),p++}else if(v.isPointLight){const x=r.point[d];x.position.setFromMatrixPosition(v.matrixWorld),x.position.applyMatrix4(y),d++}else if(v.isHemisphereLight){const x=r.hemi[g];x.direction.setFromMatrixPosition(v.matrixWorld),x.direction.transformDirection(y),g++}}}return{setup:a,setupView:l,state:r}}function lF(n){const e=new Yme(n),t=[],r=[];function i(u){c.camera=u,t.length=0,r.length=0}function s(u){t.push(u)}function o(u){r.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function Qme(n){let e=new WeakMap;function t(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new lF(n),e.set(i,[a])):s>=o.length?(a=new lF(n),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:t,dispose:r}}class Zme extends nh{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Lue,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Jme extends nh{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const ege=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,tge=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function nge(n,e,t){let r=new MP;const i=new Ve,s=new Ve,o=new ar,a=new Zme({depthPacking:Due}),l=new Jme,c={},u=t.maxTextureSize,h={[yc]:fi,[fi]:yc,[Ca]:Ca},d=new Xo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ve},radius:{value:4}},vertexShader:ege,fragmentShader:tge}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new Vs;p.setAttribute("position",new Is(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Ns(p,d),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fV;let m=this.type;this.render=function(T,w,M){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||T.length===0)return;const C=n.getRenderTarget(),S=n.getActiveCubeFace(),E=n.getActiveMipmapLevel(),I=n.state;I.setBlending(Ga),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);const F=m!==va&&this.type===va,N=m===va&&this.type!==va;for(let R=0,D=T.length;R<D;R++){const j=T[R],L=j.shadow;if(L===void 0){console.warn("THREE.WebGLShadowMap:",j,"has no shadow.");continue}if(L.autoUpdate===!1&&L.needsUpdate===!1)continue;i.copy(L.mapSize);const W=L.getFrameExtents();if(i.multiply(W),s.copy(L.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/W.x),i.x=s.x*W.x,L.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/W.y),i.y=s.y*W.y,L.mapSize.y=s.y)),L.map===null||F===!0||N===!0){const X=this.type!==va?{minFilter:Rs,magFilter:Rs}:{};L.map!==null&&L.map.dispose(),L.map=new vc(i.x,i.y,X),L.map.texture.name=j.name+".shadowMap",L.camera.updateProjectionMatrix()}n.setRenderTarget(L.map),n.clear();const z=L.getViewportCount();for(let X=0;X<z;X++){const U=L.getViewport(X);o.set(s.x*U.x,s.y*U.y,s.x*U.z,s.y*U.w),I.viewport(o),L.updateMatrices(j,X),r=L.getFrustum(),x(w,M,L.camera,j,this.type)}L.isPointLightShadow!==!0&&this.type===va&&_(L,M),L.needsUpdate=!1}m=this.type,y.needsUpdate=!1,n.setRenderTarget(C,S,E)};function _(T,w){const M=e.update(g);d.defines.VSM_SAMPLES!==T.blurSamples&&(d.defines.VSM_SAMPLES=T.blurSamples,f.defines.VSM_SAMPLES=T.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new vc(i.x,i.y)),d.uniforms.shadow_pass.value=T.map.texture,d.uniforms.resolution.value=T.mapSize,d.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(w,null,M,d,g,null),f.uniforms.shadow_pass.value=T.mapPass.texture,f.uniforms.resolution.value=T.mapSize,f.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(w,null,M,f,g,null)}function v(T,w,M,C){let S=null;const E=M.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(E!==void 0)S=E;else if(S=M.isPointLight===!0?l:a,n.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){const I=S.uuid,F=w.uuid;let N=c[I];N===void 0&&(N={},c[I]=N);let R=N[F];R===void 0&&(R=S.clone(),N[F]=R,w.addEventListener("dispose",b)),S=R}if(S.visible=w.visible,S.wireframe=w.wireframe,C===va?S.side=w.shadowSide!==null?w.shadowSide:w.side:S.side=w.shadowSide!==null?w.shadowSide:h[w.side],S.alphaMap=w.alphaMap,S.alphaTest=w.alphaTest,S.map=w.map,S.clipShadows=w.clipShadows,S.clippingPlanes=w.clippingPlanes,S.clipIntersection=w.clipIntersection,S.displacementMap=w.displacementMap,S.displacementScale=w.displacementScale,S.displacementBias=w.displacementBias,S.wireframeLinewidth=w.wireframeLinewidth,S.linewidth=w.linewidth,M.isPointLight===!0&&S.isMeshDistanceMaterial===!0){const I=n.properties.get(S);I.light=M}return S}function x(T,w,M,C,S){if(T.visible===!1)return;if(T.layers.test(w.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&S===va)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,T.matrixWorld);const F=e.update(T),N=T.material;if(Array.isArray(N)){const R=F.groups;for(let D=0,j=R.length;D<j;D++){const L=R[D],W=N[L.materialIndex];if(W&&W.visible){const z=v(T,W,C,S);T.onBeforeShadow(n,T,w,M,F,z,L),n.renderBufferDirect(M,null,F,z,T,L),T.onAfterShadow(n,T,w,M,F,z,L)}}}else if(N.visible){const R=v(T,N,C,S);T.onBeforeShadow(n,T,w,M,F,R,null),n.renderBufferDirect(M,null,F,R,T,null),T.onAfterShadow(n,T,w,M,F,R,null)}}const I=T.children;for(let F=0,N=I.length;F<N;F++)x(I[F],w,M,C,S)}function b(T){T.target.removeEventListener("dispose",b);for(const M in c){const C=c[M],S=T.target.uuid;S in C&&(C[S].dispose(),delete C[S])}}}const rge={[hA]:dA,[fA]:gA,[pA]:yA,[Nf]:mA,[dA]:hA,[gA]:fA,[yA]:pA,[mA]:Nf};function ige(n){function e(){let $=!1;const me=new ar;let J=null;const he=new ar(0,0,0,0);return{setMask:function(Ee){J!==Ee&&!$&&(n.colorMask(Ee,Ee,Ee,Ee),J=Ee)},setLocked:function(Ee){$=Ee},setClear:function(Ee,Re,qe,vt,on){on===!0&&(Ee*=vt,Re*=vt,qe*=vt),me.set(Ee,Re,qe,vt),he.equals(me)===!1&&(n.clearColor(Ee,Re,qe,vt),he.copy(me))},reset:function(){$=!1,J=null,he.set(-1,0,0,0)}}}function t(){let $=!1,me=!1,J=null,he=null,Ee=null;return{setReversed:function(Re){me=Re},setTest:function(Re){Re?Z(n.DEPTH_TEST):le(n.DEPTH_TEST)},setMask:function(Re){J!==Re&&!$&&(n.depthMask(Re),J=Re)},setFunc:function(Re){if(me&&(Re=rge[Re]),he!==Re){switch(Re){case hA:n.depthFunc(n.NEVER);break;case dA:n.depthFunc(n.ALWAYS);break;case fA:n.depthFunc(n.LESS);break;case Nf:n.depthFunc(n.LEQUAL);break;case pA:n.depthFunc(n.EQUAL);break;case mA:n.depthFunc(n.GEQUAL);break;case gA:n.depthFunc(n.GREATER);break;case yA:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}he=Re}},setLocked:function(Re){$=Re},setClear:function(Re){Ee!==Re&&(n.clearDepth(Re),Ee=Re)},reset:function(){$=!1,J=null,he=null,Ee=null}}}function r(){let $=!1,me=null,J=null,he=null,Ee=null,Re=null,qe=null,vt=null,on=null;return{setTest:function(dt){$||(dt?Z(n.STENCIL_TEST):le(n.STENCIL_TEST))},setMask:function(dt){me!==dt&&!$&&(n.stencilMask(dt),me=dt)},setFunc:function(dt,pn,Xn){(J!==dt||he!==pn||Ee!==Xn)&&(n.stencilFunc(dt,pn,Xn),J=dt,he=pn,Ee=Xn)},setOp:function(dt,pn,Xn){(Re!==dt||qe!==pn||vt!==Xn)&&(n.stencilOp(dt,pn,Xn),Re=dt,qe=pn,vt=Xn)},setLocked:function(dt){$=dt},setClear:function(dt){on!==dt&&(n.clearStencil(dt),on=dt)},reset:function(){$=!1,me=null,J=null,he=null,Ee=null,Re=null,qe=null,vt=null,on=null}}}const i=new e,s=new t,o=new r,a=new WeakMap,l=new WeakMap;let c={},u={},h=new WeakMap,d=[],f=null,p=!1,g=null,y=null,m=null,_=null,v=null,x=null,b=null,T=new Ot(0,0,0),w=0,M=!1,C=null,S=null,E=null,I=null,F=null;const N=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let R=!1,D=0;const j=n.getParameter(n.VERSION);j.indexOf("WebGL")!==-1?(D=parseFloat(/^WebGL (\d)/.exec(j)[1]),R=D>=1):j.indexOf("OpenGL ES")!==-1&&(D=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),R=D>=2);let L=null,W={};const z=n.getParameter(n.SCISSOR_BOX),X=n.getParameter(n.VIEWPORT),U=new ar().fromArray(z),te=new ar().fromArray(X);function k($,me,J,he){const Ee=new Uint8Array(4),Re=n.createTexture();n.bindTexture($,Re),n.texParameteri($,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri($,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let qe=0;qe<J;qe++)$===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY?n.texImage3D(me,0,n.RGBA,1,1,he,0,n.RGBA,n.UNSIGNED_BYTE,Ee):n.texImage2D(me+qe,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ee);return Re}const V={};V[n.TEXTURE_2D]=k(n.TEXTURE_2D,n.TEXTURE_2D,1),V[n.TEXTURE_CUBE_MAP]=k(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),V[n.TEXTURE_2D_ARRAY]=k(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),V[n.TEXTURE_3D]=k(n.TEXTURE_3D,n.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Z(n.DEPTH_TEST),s.setFunc(Nf),$e(!1),Ye(gO),Z(n.CULL_FACE),G(Ga);function Z($){c[$]!==!0&&(n.enable($),c[$]=!0)}function le($){c[$]!==!1&&(n.disable($),c[$]=!1)}function pe($,me){return u[$]!==me?(n.bindFramebuffer($,me),u[$]=me,$===n.DRAW_FRAMEBUFFER&&(u[n.FRAMEBUFFER]=me),$===n.FRAMEBUFFER&&(u[n.DRAW_FRAMEBUFFER]=me),!0):!1}function ue($,me){let J=d,he=!1;if($){J=h.get(me),J===void 0&&(J=[],h.set(me,J));const Ee=$.textures;if(J.length!==Ee.length||J[0]!==n.COLOR_ATTACHMENT0){for(let Re=0,qe=Ee.length;Re<qe;Re++)J[Re]=n.COLOR_ATTACHMENT0+Re;J.length=Ee.length,he=!0}}else J[0]!==n.BACK&&(J[0]=n.BACK,he=!0);he&&n.drawBuffers(J)}function be($){return f!==$?(n.useProgram($),f=$,!0):!1}const Pe={[su]:n.FUNC_ADD,[oue]:n.FUNC_SUBTRACT,[aue]:n.FUNC_REVERSE_SUBTRACT};Pe[lue]=n.MIN,Pe[cue]=n.MAX;const we={[uue]:n.ZERO,[hue]:n.ONE,[due]:n.SRC_COLOR,[cA]:n.SRC_ALPHA,[vue]:n.SRC_ALPHA_SATURATE,[gue]:n.DST_COLOR,[pue]:n.DST_ALPHA,[fue]:n.ONE_MINUS_SRC_COLOR,[uA]:n.ONE_MINUS_SRC_ALPHA,[yue]:n.ONE_MINUS_DST_COLOR,[mue]:n.ONE_MINUS_DST_ALPHA,[_ue]:n.CONSTANT_COLOR,[xue]:n.ONE_MINUS_CONSTANT_COLOR,[Sue]:n.CONSTANT_ALPHA,[bue]:n.ONE_MINUS_CONSTANT_ALPHA};function G($,me,J,he,Ee,Re,qe,vt,on,dt){if($===Ga){p===!0&&(le(n.BLEND),p=!1);return}if(p===!1&&(Z(n.BLEND),p=!0),$!==sue){if($!==g||dt!==M){if((y!==su||v!==su)&&(n.blendEquation(n.FUNC_ADD),y=su,v=su),dt)switch($){case Bd:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case yO:n.blendFunc(n.ONE,n.ONE);break;case vO:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case _O:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}else switch($){case Bd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case yO:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case vO:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case _O:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",$);break}m=null,_=null,x=null,b=null,T.set(0,0,0),w=0,g=$,M=dt}return}Ee=Ee||me,Re=Re||J,qe=qe||he,(me!==y||Ee!==v)&&(n.blendEquationSeparate(Pe[me],Pe[Ee]),y=me,v=Ee),(J!==m||he!==_||Re!==x||qe!==b)&&(n.blendFuncSeparate(we[J],we[he],we[Re],we[qe]),m=J,_=he,x=Re,b=qe),(vt.equals(T)===!1||on!==w)&&(n.blendColor(vt.r,vt.g,vt.b,on),T.copy(vt),w=on),g=$,M=!1}function Ge($,me){$.side===Ca?le(n.CULL_FACE):Z(n.CULL_FACE);let J=$.side===fi;me&&(J=!J),$e(J),$.blending===Bd&&$.transparent===!1?G(Ga):G($.blending,$.blendEquation,$.blendSrc,$.blendDst,$.blendEquationAlpha,$.blendSrcAlpha,$.blendDstAlpha,$.blendColor,$.blendAlpha,$.premultipliedAlpha),s.setFunc($.depthFunc),s.setTest($.depthTest),s.setMask($.depthWrite),i.setMask($.colorWrite);const he=$.stencilWrite;o.setTest(he),he&&(o.setMask($.stencilWriteMask),o.setFunc($.stencilFunc,$.stencilRef,$.stencilFuncMask),o.setOp($.stencilFail,$.stencilZFail,$.stencilZPass)),st($.polygonOffset,$.polygonOffsetFactor,$.polygonOffsetUnits),$.alphaToCoverage===!0?Z(n.SAMPLE_ALPHA_TO_COVERAGE):le(n.SAMPLE_ALPHA_TO_COVERAGE)}function $e($){C!==$&&($?n.frontFace(n.CW):n.frontFace(n.CCW),C=$)}function Ye($){$!==nue?(Z(n.CULL_FACE),$!==S&&($===gO?n.cullFace(n.BACK):$===rue?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):le(n.CULL_FACE),S=$}function De($){$!==E&&(R&&n.lineWidth($),E=$)}function st($,me,J){$?(Z(n.POLYGON_OFFSET_FILL),(I!==me||F!==J)&&(n.polygonOffset(me,J),I=me,F=J)):le(n.POLYGON_OFFSET_FILL)}function Ze($){$?Z(n.SCISSOR_TEST):le(n.SCISSOR_TEST)}function B($){$===void 0&&($=n.TEXTURE0+N-1),L!==$&&(n.activeTexture($),L=$)}function A($,me,J){J===void 0&&(L===null?J=n.TEXTURE0+N-1:J=L);let he=W[J];he===void 0&&(he={type:void 0,texture:void 0},W[J]=he),(he.type!==$||he.texture!==me)&&(L!==J&&(n.activeTexture(J),L=J),n.bindTexture($,me||V[$]),he.type=$,he.texture=me)}function ae(){const $=W[L];$!==void 0&&$.type!==void 0&&(n.bindTexture($.type,null),$.type=void 0,$.texture=void 0)}function oe(){try{n.compressedTexImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Te(){try{n.compressedTexImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Se(){try{n.texSubImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Xe(){try{n.texSubImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Ie(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Fe(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function pt(){try{n.texStorage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Le(){try{n.texStorage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function Oe(){try{n.texImage2D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function ot(){try{n.texImage3D.apply(n,arguments)}catch($){console.error("THREE.WebGLState:",$)}}function ut($){U.equals($)===!1&&(n.scissor($.x,$.y,$.z,$.w),U.copy($))}function Ne($){te.equals($)===!1&&(n.viewport($.x,$.y,$.z,$.w),te.copy($))}function K($,me){let J=l.get(me);J===void 0&&(J=new WeakMap,l.set(me,J));let he=J.get($);he===void 0&&(he=n.getUniformBlockIndex(me,$.name),J.set($,he))}function H($,me){const he=l.get(me).get($);a.get(me)!==he&&(n.uniformBlockBinding(me,he,$.__bindingPointIndex),a.set(me,he))}function ve(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},L=null,W={},u={},h=new WeakMap,d=[],f=null,p=!1,g=null,y=null,m=null,_=null,v=null,x=null,b=null,T=new Ot(0,0,0),w=0,M=!1,C=null,S=null,E=null,I=null,F=null,U.set(0,0,n.canvas.width,n.canvas.height),te.set(0,0,n.canvas.width,n.canvas.height),i.reset(),s.reset(),o.reset()}return{buffers:{color:i,depth:s,stencil:o},enable:Z,disable:le,bindFramebuffer:pe,drawBuffers:ue,useProgram:be,setBlending:G,setMaterial:Ge,setFlipSided:$e,setCullFace:Ye,setLineWidth:De,setPolygonOffset:st,setScissorTest:Ze,activeTexture:B,bindTexture:A,unbindTexture:ae,compressedTexImage2D:oe,compressedTexImage3D:Te,texImage2D:Oe,texImage3D:ot,updateUBOMapping:K,uniformBlockBinding:H,texStorage2D:pt,texStorage3D:Le,texSubImage2D:Se,texSubImage3D:Xe,compressedTexSubImage2D:Ie,compressedTexSubImage3D:Fe,scissor:ut,viewport:Ne,reset:ve}}function cF(n,e,t,r){const i=sge(r);switch(t){case vV:return n*e;case xV:return n*e;case SV:return n*e*2;case bV:return n*e/i.components*i.byteLength;case yP:return n*e/i.components*i.byteLength;case wV:return n*e*2/i.components*i.byteLength;case vP:return n*e*2/i.components*i.byteLength;case _V:return n*e*3/i.components*i.byteLength;case uo:return n*e*4/i.components*i.byteLength;case _P:return n*e*4/i.components*i.byteLength;case Jv:case e_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case t_:case n_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case wA:case MA:return Math.max(n,16)*Math.max(e,8)/4;case bA:case TA:return Math.max(n,8)*Math.max(e,8)/2;case EA:case AA:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case CA:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case RA:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case NA:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case PA:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case IA:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case LA:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case DA:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case OA:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case FA:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case kA:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case UA:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case BA:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case zA:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case $A:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case VA:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case r_:case GA:case HA:return Math.ceil(n/4)*Math.ceil(e/4)*16;case TV:case WA:return Math.ceil(n/4)*Math.ceil(e/4)*8;case jA:case qA:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function sge(n){switch(n){case rl:case mV:return{byteLength:1,components:1};case Pg:case gV:case np:return{byteLength:2,components:1};case mP:case gP:return{byteLength:2,components:4};case $u:case pP:case ka:return{byteLength:4,components:1};case yV:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}function oge(n,e,t,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ve,u=new WeakMap;let h;const d=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(B,A){return f?new OffscreenCanvas(B,A):Lg("canvas")}function g(B,A,ae){let oe=1;const Te=Ze(B);if((Te.width>ae||Te.height>ae)&&(oe=ae/Math.max(Te.width,Te.height)),oe<1)if(typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap||typeof VideoFrame<"u"&&B instanceof VideoFrame){const Se=Math.floor(oe*Te.width),Xe=Math.floor(oe*Te.height);h===void 0&&(h=p(Se,Xe));const Ie=A?p(Se,Xe):h;return Ie.width=Se,Ie.height=Xe,Ie.getContext("2d").drawImage(B,0,0,Se,Xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Te.width+"x"+Te.height+") to ("+Se+"x"+Xe+")."),Ie}else return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Te.width+"x"+Te.height+")."),B;return B}function y(B){return B.generateMipmaps&&B.minFilter!==Rs&&B.minFilter!==ao}function m(B){n.generateMipmap(B)}function _(B,A,ae,oe,Te=!1){if(B!==null){if(n[B]!==void 0)return n[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let Se=A;if(A===n.RED&&(ae===n.FLOAT&&(Se=n.R32F),ae===n.HALF_FLOAT&&(Se=n.R16F),ae===n.UNSIGNED_BYTE&&(Se=n.R8)),A===n.RED_INTEGER&&(ae===n.UNSIGNED_BYTE&&(Se=n.R8UI),ae===n.UNSIGNED_SHORT&&(Se=n.R16UI),ae===n.UNSIGNED_INT&&(Se=n.R32UI),ae===n.BYTE&&(Se=n.R8I),ae===n.SHORT&&(Se=n.R16I),ae===n.INT&&(Se=n.R32I)),A===n.RG&&(ae===n.FLOAT&&(Se=n.RG32F),ae===n.HALF_FLOAT&&(Se=n.RG16F),ae===n.UNSIGNED_BYTE&&(Se=n.RG8)),A===n.RG_INTEGER&&(ae===n.UNSIGNED_BYTE&&(Se=n.RG8UI),ae===n.UNSIGNED_SHORT&&(Se=n.RG16UI),ae===n.UNSIGNED_INT&&(Se=n.RG32UI),ae===n.BYTE&&(Se=n.RG8I),ae===n.SHORT&&(Se=n.RG16I),ae===n.INT&&(Se=n.RG32I)),A===n.RGB_INTEGER&&(ae===n.UNSIGNED_BYTE&&(Se=n.RGB8UI),ae===n.UNSIGNED_SHORT&&(Se=n.RGB16UI),ae===n.UNSIGNED_INT&&(Se=n.RGB32UI),ae===n.BYTE&&(Se=n.RGB8I),ae===n.SHORT&&(Se=n.RGB16I),ae===n.INT&&(Se=n.RGB32I)),A===n.RGBA_INTEGER&&(ae===n.UNSIGNED_BYTE&&(Se=n.RGBA8UI),ae===n.UNSIGNED_SHORT&&(Se=n.RGBA16UI),ae===n.UNSIGNED_INT&&(Se=n.RGBA32UI),ae===n.BYTE&&(Se=n.RGBA8I),ae===n.SHORT&&(Se=n.RGBA16I),ae===n.INT&&(Se=n.RGBA32I)),A===n.RGB&&ae===n.UNSIGNED_INT_5_9_9_9_REV&&(Se=n.RGB9_E5),A===n.RGBA){const Xe=Te?yx:Jt.getTransfer(oe);ae===n.FLOAT&&(Se=n.RGBA32F),ae===n.HALF_FLOAT&&(Se=n.RGBA16F),ae===n.UNSIGNED_BYTE&&(Se=Xe===wn?n.SRGB8_ALPHA8:n.RGBA8),ae===n.UNSIGNED_SHORT_4_4_4_4&&(Se=n.RGBA4),ae===n.UNSIGNED_SHORT_5_5_5_1&&(Se=n.RGB5_A1)}return(Se===n.R16F||Se===n.R32F||Se===n.RG16F||Se===n.RG32F||Se===n.RGBA16F||Se===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Se}function v(B,A){let ae;return B?A===null||A===$u||A===Lf?ae=n.DEPTH24_STENCIL8:A===ka?ae=n.DEPTH32F_STENCIL8:A===Pg&&(ae=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):A===null||A===$u||A===Lf?ae=n.DEPTH_COMPONENT24:A===ka?ae=n.DEPTH_COMPONENT32F:A===Pg&&(ae=n.DEPTH_COMPONENT16),ae}function x(B,A){return y(B)===!0||B.isFramebufferTexture&&B.minFilter!==Rs&&B.minFilter!==ao?Math.log2(Math.max(A.width,A.height))+1:B.mipmaps!==void 0&&B.mipmaps.length>0?B.mipmaps.length:B.isCompressedTexture&&Array.isArray(B.image)?A.mipmaps.length:1}function b(B){const A=B.target;A.removeEventListener("dispose",b),w(A),A.isVideoTexture&&u.delete(A)}function T(B){const A=B.target;A.removeEventListener("dispose",T),C(A)}function w(B){const A=r.get(B);if(A.__webglInit===void 0)return;const ae=B.source,oe=d.get(ae);if(oe){const Te=oe[A.__cacheKey];Te.usedTimes--,Te.usedTimes===0&&M(B),Object.keys(oe).length===0&&d.delete(ae)}r.remove(B)}function M(B){const A=r.get(B);n.deleteTexture(A.__webglTexture);const ae=B.source,oe=d.get(ae);delete oe[A.__cacheKey],o.memory.textures--}function C(B){const A=r.get(B);if(B.depthTexture&&B.depthTexture.dispose(),B.isWebGLCubeRenderTarget)for(let oe=0;oe<6;oe++){if(Array.isArray(A.__webglFramebuffer[oe]))for(let Te=0;Te<A.__webglFramebuffer[oe].length;Te++)n.deleteFramebuffer(A.__webglFramebuffer[oe][Te]);else n.deleteFramebuffer(A.__webglFramebuffer[oe]);A.__webglDepthbuffer&&n.deleteRenderbuffer(A.__webglDepthbuffer[oe])}else{if(Array.isArray(A.__webglFramebuffer))for(let oe=0;oe<A.__webglFramebuffer.length;oe++)n.deleteFramebuffer(A.__webglFramebuffer[oe]);else n.deleteFramebuffer(A.__webglFramebuffer);if(A.__webglDepthbuffer&&n.deleteRenderbuffer(A.__webglDepthbuffer),A.__webglMultisampledFramebuffer&&n.deleteFramebuffer(A.__webglMultisampledFramebuffer),A.__webglColorRenderbuffer)for(let oe=0;oe<A.__webglColorRenderbuffer.length;oe++)A.__webglColorRenderbuffer[oe]&&n.deleteRenderbuffer(A.__webglColorRenderbuffer[oe]);A.__webglDepthRenderbuffer&&n.deleteRenderbuffer(A.__webglDepthRenderbuffer)}const ae=B.textures;for(let oe=0,Te=ae.length;oe<Te;oe++){const Se=r.get(ae[oe]);Se.__webglTexture&&(n.deleteTexture(Se.__webglTexture),o.memory.textures--),r.remove(ae[oe])}r.remove(B)}let S=0;function E(){S=0}function I(){const B=S;return B>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+i.maxTextures),S+=1,B}function F(B){const A=[];return A.push(B.wrapS),A.push(B.wrapT),A.push(B.wrapR||0),A.push(B.magFilter),A.push(B.minFilter),A.push(B.anisotropy),A.push(B.internalFormat),A.push(B.format),A.push(B.type),A.push(B.generateMipmaps),A.push(B.premultiplyAlpha),A.push(B.flipY),A.push(B.unpackAlignment),A.push(B.colorSpace),A.join()}function N(B,A){const ae=r.get(B);if(B.isVideoTexture&&De(B),B.isRenderTargetTexture===!1&&B.version>0&&ae.__version!==B.version){const oe=B.image;if(oe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{te(ae,B,A);return}}t.bindTexture(n.TEXTURE_2D,ae.__webglTexture,n.TEXTURE0+A)}function R(B,A){const ae=r.get(B);if(B.version>0&&ae.__version!==B.version){te(ae,B,A);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ae.__webglTexture,n.TEXTURE0+A)}function D(B,A){const ae=r.get(B);if(B.version>0&&ae.__version!==B.version){te(ae,B,A);return}t.bindTexture(n.TEXTURE_3D,ae.__webglTexture,n.TEXTURE0+A)}function j(B,A){const ae=r.get(B);if(B.version>0&&ae.__version!==B.version){k(ae,B,A);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ae.__webglTexture,n.TEXTURE0+A)}const L={[xA]:n.REPEAT,[pu]:n.CLAMP_TO_EDGE,[SA]:n.MIRRORED_REPEAT},W={[Rs]:n.NEAREST,[Iue]:n.NEAREST_MIPMAP_NEAREST,[p0]:n.NEAREST_MIPMAP_LINEAR,[ao]:n.LINEAR,[gw]:n.LINEAR_MIPMAP_NEAREST,[mu]:n.LINEAR_MIPMAP_LINEAR},z={[Fue]:n.NEVER,[Vue]:n.ALWAYS,[kue]:n.LESS,[EV]:n.LEQUAL,[Uue]:n.EQUAL,[$ue]:n.GEQUAL,[Bue]:n.GREATER,[zue]:n.NOTEQUAL};function X(B,A){if(A.type===ka&&e.has("OES_texture_float_linear")===!1&&(A.magFilter===ao||A.magFilter===gw||A.magFilter===p0||A.magFilter===mu||A.minFilter===ao||A.minFilter===gw||A.minFilter===p0||A.minFilter===mu)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(B,n.TEXTURE_WRAP_S,L[A.wrapS]),n.texParameteri(B,n.TEXTURE_WRAP_T,L[A.wrapT]),(B===n.TEXTURE_3D||B===n.TEXTURE_2D_ARRAY)&&n.texParameteri(B,n.TEXTURE_WRAP_R,L[A.wrapR]),n.texParameteri(B,n.TEXTURE_MAG_FILTER,W[A.magFilter]),n.texParameteri(B,n.TEXTURE_MIN_FILTER,W[A.minFilter]),A.compareFunction&&(n.texParameteri(B,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(B,n.TEXTURE_COMPARE_FUNC,z[A.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(A.magFilter===Rs||A.minFilter!==p0&&A.minFilter!==mu||A.type===ka&&e.has("OES_texture_float_linear")===!1)return;if(A.anisotropy>1||r.get(A).__currentAnisotropy){const ae=e.get("EXT_texture_filter_anisotropic");n.texParameterf(B,ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(A.anisotropy,i.getMaxAnisotropy())),r.get(A).__currentAnisotropy=A.anisotropy}}}function U(B,A){let ae=!1;B.__webglInit===void 0&&(B.__webglInit=!0,A.addEventListener("dispose",b));const oe=A.source;let Te=d.get(oe);Te===void 0&&(Te={},d.set(oe,Te));const Se=F(A);if(Se!==B.__cacheKey){Te[Se]===void 0&&(Te[Se]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ae=!0),Te[Se].usedTimes++;const Xe=Te[B.__cacheKey];Xe!==void 0&&(Te[B.__cacheKey].usedTimes--,Xe.usedTimes===0&&M(A)),B.__cacheKey=Se,B.__webglTexture=Te[Se].texture}return ae}function te(B,A,ae){let oe=n.TEXTURE_2D;(A.isDataArrayTexture||A.isCompressedArrayTexture)&&(oe=n.TEXTURE_2D_ARRAY),A.isData3DTexture&&(oe=n.TEXTURE_3D);const Te=U(B,A),Se=A.source;t.bindTexture(oe,B.__webglTexture,n.TEXTURE0+ae);const Xe=r.get(Se);if(Se.version!==Xe.__version||Te===!0){t.activeTexture(n.TEXTURE0+ae);const Ie=Jt.getPrimaries(Jt.workingColorSpace),Fe=A.colorSpace===Gl?null:Jt.getPrimaries(A.colorSpace),pt=A.colorSpace===Gl||Ie===Fe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,A.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,A.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,A.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,pt);let Le=g(A.image,!1,i.maxTextureSize);Le=st(A,Le);const Oe=s.convert(A.format,A.colorSpace),ot=s.convert(A.type);let ut=_(A.internalFormat,Oe,ot,A.colorSpace,A.isVideoTexture);X(oe,A);let Ne;const K=A.mipmaps,H=A.isVideoTexture!==!0,ve=Xe.__version===void 0||Te===!0,$=Se.dataReady,me=x(A,Le);if(A.isDepthTexture)ut=v(A.format===Df,A.type),ve&&(H?t.texStorage2D(n.TEXTURE_2D,1,ut,Le.width,Le.height):t.texImage2D(n.TEXTURE_2D,0,ut,Le.width,Le.height,0,Oe,ot,null));else if(A.isDataTexture)if(K.length>0){H&&ve&&t.texStorage2D(n.TEXTURE_2D,me,ut,K[0].width,K[0].height);for(let J=0,he=K.length;J<he;J++)Ne=K[J],H?$&&t.texSubImage2D(n.TEXTURE_2D,J,0,0,Ne.width,Ne.height,Oe,ot,Ne.data):t.texImage2D(n.TEXTURE_2D,J,ut,Ne.width,Ne.height,0,Oe,ot,Ne.data);A.generateMipmaps=!1}else H?(ve&&t.texStorage2D(n.TEXTURE_2D,me,ut,Le.width,Le.height),$&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Le.width,Le.height,Oe,ot,Le.data)):t.texImage2D(n.TEXTURE_2D,0,ut,Le.width,Le.height,0,Oe,ot,Le.data);else if(A.isCompressedTexture)if(A.isCompressedArrayTexture){H&&ve&&t.texStorage3D(n.TEXTURE_2D_ARRAY,me,ut,K[0].width,K[0].height,Le.depth);for(let J=0,he=K.length;J<he;J++)if(Ne=K[J],A.format!==uo)if(Oe!==null)if(H){if($)if(A.layerUpdates.size>0){const Ee=cF(Ne.width,Ne.height,A.format,A.type);for(const Re of A.layerUpdates){const qe=Ne.data.subarray(Re*Ee/Ne.data.BYTES_PER_ELEMENT,(Re+1)*Ee/Ne.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,J,0,0,Re,Ne.width,Ne.height,1,Oe,qe,0,0)}A.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,J,0,0,0,Ne.width,Ne.height,Le.depth,Oe,Ne.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,J,ut,Ne.width,Ne.height,Le.depth,0,Ne.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else H?$&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,J,0,0,0,Ne.width,Ne.height,Le.depth,Oe,ot,Ne.data):t.texImage3D(n.TEXTURE_2D_ARRAY,J,ut,Ne.width,Ne.height,Le.depth,0,Oe,ot,Ne.data)}else{H&&ve&&t.texStorage2D(n.TEXTURE_2D,me,ut,K[0].width,K[0].height);for(let J=0,he=K.length;J<he;J++)Ne=K[J],A.format!==uo?Oe!==null?H?$&&t.compressedTexSubImage2D(n.TEXTURE_2D,J,0,0,Ne.width,Ne.height,Oe,Ne.data):t.compressedTexImage2D(n.TEXTURE_2D,J,ut,Ne.width,Ne.height,0,Ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):H?$&&t.texSubImage2D(n.TEXTURE_2D,J,0,0,Ne.width,Ne.height,Oe,ot,Ne.data):t.texImage2D(n.TEXTURE_2D,J,ut,Ne.width,Ne.height,0,Oe,ot,Ne.data)}else if(A.isDataArrayTexture)if(H){if(ve&&t.texStorage3D(n.TEXTURE_2D_ARRAY,me,ut,Le.width,Le.height,Le.depth),$)if(A.layerUpdates.size>0){const J=cF(Le.width,Le.height,A.format,A.type);for(const he of A.layerUpdates){const Ee=Le.data.subarray(he*J/Le.data.BYTES_PER_ELEMENT,(he+1)*J/Le.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,he,Le.width,Le.height,1,Oe,ot,Ee)}A.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Le.width,Le.height,Le.depth,Oe,ot,Le.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ut,Le.width,Le.height,Le.depth,0,Oe,ot,Le.data);else if(A.isData3DTexture)H?(ve&&t.texStorage3D(n.TEXTURE_3D,me,ut,Le.width,Le.height,Le.depth),$&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Le.width,Le.height,Le.depth,Oe,ot,Le.data)):t.texImage3D(n.TEXTURE_3D,0,ut,Le.width,Le.height,Le.depth,0,Oe,ot,Le.data);else if(A.isFramebufferTexture){if(ve)if(H)t.texStorage2D(n.TEXTURE_2D,me,ut,Le.width,Le.height);else{let J=Le.width,he=Le.height;for(let Ee=0;Ee<me;Ee++)t.texImage2D(n.TEXTURE_2D,Ee,ut,J,he,0,Oe,ot,null),J>>=1,he>>=1}}else if(K.length>0){if(H&&ve){const J=Ze(K[0]);t.texStorage2D(n.TEXTURE_2D,me,ut,J.width,J.height)}for(let J=0,he=K.length;J<he;J++)Ne=K[J],H?$&&t.texSubImage2D(n.TEXTURE_2D,J,0,0,Oe,ot,Ne):t.texImage2D(n.TEXTURE_2D,J,ut,Oe,ot,Ne);A.generateMipmaps=!1}else if(H){if(ve){const J=Ze(Le);t.texStorage2D(n.TEXTURE_2D,me,ut,J.width,J.height)}$&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Oe,ot,Le)}else t.texImage2D(n.TEXTURE_2D,0,ut,Oe,ot,Le);y(A)&&m(oe),Xe.__version=Se.version,A.onUpdate&&A.onUpdate(A)}B.__version=A.version}function k(B,A,ae){if(A.image.length!==6)return;const oe=U(B,A),Te=A.source;t.bindTexture(n.TEXTURE_CUBE_MAP,B.__webglTexture,n.TEXTURE0+ae);const Se=r.get(Te);if(Te.version!==Se.__version||oe===!0){t.activeTexture(n.TEXTURE0+ae);const Xe=Jt.getPrimaries(Jt.workingColorSpace),Ie=A.colorSpace===Gl?null:Jt.getPrimaries(A.colorSpace),Fe=A.colorSpace===Gl||Xe===Ie?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,A.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,A.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,A.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Fe);const pt=A.isCompressedTexture||A.image[0].isCompressedTexture,Le=A.image[0]&&A.image[0].isDataTexture,Oe=[];for(let he=0;he<6;he++)!pt&&!Le?Oe[he]=g(A.image[he],!0,i.maxCubemapSize):Oe[he]=Le?A.image[he].image:A.image[he],Oe[he]=st(A,Oe[he]);const ot=Oe[0],ut=s.convert(A.format,A.colorSpace),Ne=s.convert(A.type),K=_(A.internalFormat,ut,Ne,A.colorSpace),H=A.isVideoTexture!==!0,ve=Se.__version===void 0||oe===!0,$=Te.dataReady;let me=x(A,ot);X(n.TEXTURE_CUBE_MAP,A);let J;if(pt){H&&ve&&t.texStorage2D(n.TEXTURE_CUBE_MAP,me,K,ot.width,ot.height);for(let he=0;he<6;he++){J=Oe[he].mipmaps;for(let Ee=0;Ee<J.length;Ee++){const Re=J[Ee];A.format!==uo?ut!==null?H?$&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee,0,0,Re.width,Re.height,ut,Re.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee,K,Re.width,Re.height,0,Re.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):H?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee,0,0,Re.width,Re.height,ut,Ne,Re.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee,K,Re.width,Re.height,0,ut,Ne,Re.data)}}}else{if(J=A.mipmaps,H&&ve){J.length>0&&me++;const he=Ze(Oe[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,me,K,he.width,he.height)}for(let he=0;he<6;he++)if(Le){H?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,0,0,Oe[he].width,Oe[he].height,ut,Ne,Oe[he].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,K,Oe[he].width,Oe[he].height,0,ut,Ne,Oe[he].data);for(let Ee=0;Ee<J.length;Ee++){const qe=J[Ee].image[he].image;H?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee+1,0,0,qe.width,qe.height,ut,Ne,qe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee+1,K,qe.width,qe.height,0,ut,Ne,qe.data)}}else{H?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,0,0,ut,Ne,Oe[he]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,K,ut,Ne,Oe[he]);for(let Ee=0;Ee<J.length;Ee++){const Re=J[Ee];H?$&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee+1,0,0,ut,Ne,Re.image[he]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Ee+1,K,ut,Ne,Re.image[he])}}}y(A)&&m(n.TEXTURE_CUBE_MAP),Se.__version=Te.version,A.onUpdate&&A.onUpdate(A)}B.__version=A.version}function V(B,A,ae,oe,Te,Se){const Xe=s.convert(ae.format,ae.colorSpace),Ie=s.convert(ae.type),Fe=_(ae.internalFormat,Xe,Ie,ae.colorSpace);if(!r.get(A).__hasExternalTextures){const Le=Math.max(1,A.width>>Se),Oe=Math.max(1,A.height>>Se);Te===n.TEXTURE_3D||Te===n.TEXTURE_2D_ARRAY?t.texImage3D(Te,Se,Fe,Le,Oe,A.depth,0,Xe,Ie,null):t.texImage2D(Te,Se,Fe,Le,Oe,0,Xe,Ie,null)}t.bindFramebuffer(n.FRAMEBUFFER,B),Ye(A)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,oe,Te,r.get(ae).__webglTexture,0,$e(A)):(Te===n.TEXTURE_2D||Te>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Te<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,oe,Te,r.get(ae).__webglTexture,Se),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Z(B,A,ae){if(n.bindRenderbuffer(n.RENDERBUFFER,B),A.depthBuffer){const oe=A.depthTexture,Te=oe&&oe.isDepthTexture?oe.type:null,Se=v(A.stencilBuffer,Te),Xe=A.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ie=$e(A);Ye(A)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ie,Se,A.width,A.height):ae?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ie,Se,A.width,A.height):n.renderbufferStorage(n.RENDERBUFFER,Se,A.width,A.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Xe,n.RENDERBUFFER,B)}else{const oe=A.textures;for(let Te=0;Te<oe.length;Te++){const Se=oe[Te],Xe=s.convert(Se.format,Se.colorSpace),Ie=s.convert(Se.type),Fe=_(Se.internalFormat,Xe,Ie,Se.colorSpace),pt=$e(A);ae&&Ye(A)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,pt,Fe,A.width,A.height):Ye(A)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,pt,Fe,A.width,A.height):n.renderbufferStorage(n.RENDERBUFFER,Fe,A.width,A.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function le(B,A){if(A&&A.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,B),!(A.depthTexture&&A.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(A.depthTexture).__webglTexture||A.depthTexture.image.width!==A.width||A.depthTexture.image.height!==A.height)&&(A.depthTexture.image.width=A.width,A.depthTexture.image.height=A.height,A.depthTexture.needsUpdate=!0),N(A.depthTexture,0);const oe=r.get(A.depthTexture).__webglTexture,Te=$e(A);if(A.depthTexture.format===zd)Ye(A)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,oe,0,Te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,oe,0);else if(A.depthTexture.format===Df)Ye(A)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,oe,0,Te):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,oe,0);else throw new Error("Unknown depthTexture format")}function pe(B){const A=r.get(B),ae=B.isWebGLCubeRenderTarget===!0;if(A.__boundDepthTexture!==B.depthTexture){const oe=B.depthTexture;if(A.__depthDisposeCallback&&A.__depthDisposeCallback(),oe){const Te=()=>{delete A.__boundDepthTexture,delete A.__depthDisposeCallback,oe.removeEventListener("dispose",Te)};oe.addEventListener("dispose",Te),A.__depthDisposeCallback=Te}A.__boundDepthTexture=oe}if(B.depthTexture&&!A.__autoAllocateDepthBuffer){if(ae)throw new Error("target.depthTexture not supported in Cube render targets");le(A.__webglFramebuffer,B)}else if(ae){A.__webglDepthbuffer=[];for(let oe=0;oe<6;oe++)if(t.bindFramebuffer(n.FRAMEBUFFER,A.__webglFramebuffer[oe]),A.__webglDepthbuffer[oe]===void 0)A.__webglDepthbuffer[oe]=n.createRenderbuffer(),Z(A.__webglDepthbuffer[oe],B,!1);else{const Te=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Se=A.__webglDepthbuffer[oe];n.bindRenderbuffer(n.RENDERBUFFER,Se),n.framebufferRenderbuffer(n.FRAMEBUFFER,Te,n.RENDERBUFFER,Se)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,A.__webglFramebuffer),A.__webglDepthbuffer===void 0)A.__webglDepthbuffer=n.createRenderbuffer(),Z(A.__webglDepthbuffer,B,!1);else{const oe=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Te=A.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Te),n.framebufferRenderbuffer(n.FRAMEBUFFER,oe,n.RENDERBUFFER,Te)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function ue(B,A,ae){const oe=r.get(B);A!==void 0&&V(oe.__webglFramebuffer,B,B.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ae!==void 0&&pe(B)}function be(B){const A=B.texture,ae=r.get(B),oe=r.get(A);B.addEventListener("dispose",T);const Te=B.textures,Se=B.isWebGLCubeRenderTarget===!0,Xe=Te.length>1;if(Xe||(oe.__webglTexture===void 0&&(oe.__webglTexture=n.createTexture()),oe.__version=A.version,o.memory.textures++),Se){ae.__webglFramebuffer=[];for(let Ie=0;Ie<6;Ie++)if(A.mipmaps&&A.mipmaps.length>0){ae.__webglFramebuffer[Ie]=[];for(let Fe=0;Fe<A.mipmaps.length;Fe++)ae.__webglFramebuffer[Ie][Fe]=n.createFramebuffer()}else ae.__webglFramebuffer[Ie]=n.createFramebuffer()}else{if(A.mipmaps&&A.mipmaps.length>0){ae.__webglFramebuffer=[];for(let Ie=0;Ie<A.mipmaps.length;Ie++)ae.__webglFramebuffer[Ie]=n.createFramebuffer()}else ae.__webglFramebuffer=n.createFramebuffer();if(Xe)for(let Ie=0,Fe=Te.length;Ie<Fe;Ie++){const pt=r.get(Te[Ie]);pt.__webglTexture===void 0&&(pt.__webglTexture=n.createTexture(),o.memory.textures++)}if(B.samples>0&&Ye(B)===!1){ae.__webglMultisampledFramebuffer=n.createFramebuffer(),ae.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ae.__webglMultisampledFramebuffer);for(let Ie=0;Ie<Te.length;Ie++){const Fe=Te[Ie];ae.__webglColorRenderbuffer[Ie]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ae.__webglColorRenderbuffer[Ie]);const pt=s.convert(Fe.format,Fe.colorSpace),Le=s.convert(Fe.type),Oe=_(Fe.internalFormat,pt,Le,Fe.colorSpace,B.isXRRenderTarget===!0),ot=$e(B);n.renderbufferStorageMultisample(n.RENDERBUFFER,ot,Oe,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ie,n.RENDERBUFFER,ae.__webglColorRenderbuffer[Ie])}n.bindRenderbuffer(n.RENDERBUFFER,null),B.depthBuffer&&(ae.__webglDepthRenderbuffer=n.createRenderbuffer(),Z(ae.__webglDepthRenderbuffer,B,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Se){t.bindTexture(n.TEXTURE_CUBE_MAP,oe.__webglTexture),X(n.TEXTURE_CUBE_MAP,A);for(let Ie=0;Ie<6;Ie++)if(A.mipmaps&&A.mipmaps.length>0)for(let Fe=0;Fe<A.mipmaps.length;Fe++)V(ae.__webglFramebuffer[Ie][Fe],B,A,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,Fe);else V(ae.__webglFramebuffer[Ie],B,A,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0);y(A)&&m(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Xe){for(let Ie=0,Fe=Te.length;Ie<Fe;Ie++){const pt=Te[Ie],Le=r.get(pt);t.bindTexture(n.TEXTURE_2D,Le.__webglTexture),X(n.TEXTURE_2D,pt),V(ae.__webglFramebuffer,B,pt,n.COLOR_ATTACHMENT0+Ie,n.TEXTURE_2D,0),y(pt)&&m(n.TEXTURE_2D)}t.unbindTexture()}else{let Ie=n.TEXTURE_2D;if((B.isWebGL3DRenderTarget||B.isWebGLArrayRenderTarget)&&(Ie=B.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ie,oe.__webglTexture),X(Ie,A),A.mipmaps&&A.mipmaps.length>0)for(let Fe=0;Fe<A.mipmaps.length;Fe++)V(ae.__webglFramebuffer[Fe],B,A,n.COLOR_ATTACHMENT0,Ie,Fe);else V(ae.__webglFramebuffer,B,A,n.COLOR_ATTACHMENT0,Ie,0);y(A)&&m(Ie),t.unbindTexture()}B.depthBuffer&&pe(B)}function Pe(B){const A=B.textures;for(let ae=0,oe=A.length;ae<oe;ae++){const Te=A[ae];if(y(Te)){const Se=B.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Xe=r.get(Te).__webglTexture;t.bindTexture(Se,Xe),m(Se),t.unbindTexture()}}}const we=[],G=[];function Ge(B){if(B.samples>0){if(Ye(B)===!1){const A=B.textures,ae=B.width,oe=B.height;let Te=n.COLOR_BUFFER_BIT;const Se=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Xe=r.get(B),Ie=A.length>1;if(Ie)for(let Fe=0;Fe<A.length;Fe++)t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Xe.__webglFramebuffer);for(let Fe=0;Fe<A.length;Fe++){if(B.resolveDepthBuffer&&(B.depthBuffer&&(Te|=n.DEPTH_BUFFER_BIT),B.stencilBuffer&&B.resolveStencilBuffer&&(Te|=n.STENCIL_BUFFER_BIT)),Ie){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Xe.__webglColorRenderbuffer[Fe]);const pt=r.get(A[Fe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,pt,0)}n.blitFramebuffer(0,0,ae,oe,0,0,ae,oe,Te,n.NEAREST),l===!0&&(we.length=0,G.length=0,we.push(n.COLOR_ATTACHMENT0+Fe),B.depthBuffer&&B.resolveDepthBuffer===!1&&(we.push(Se),G.push(Se),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,G)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,we))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ie)for(let Fe=0;Fe<A.length;Fe++){t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.RENDERBUFFER,Xe.__webglColorRenderbuffer[Fe]);const pt=r.get(A[Fe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Xe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Fe,n.TEXTURE_2D,pt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Xe.__webglMultisampledFramebuffer)}else if(B.depthBuffer&&B.resolveDepthBuffer===!1&&l){const A=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[A])}}}function $e(B){return Math.min(i.maxSamples,B.samples)}function Ye(B){const A=r.get(B);return B.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&A.__useRenderToTexture!==!1}function De(B){const A=o.render.frame;u.get(B)!==A&&(u.set(B,A),B.update())}function st(B,A){const ae=B.colorSpace,oe=B.format,Te=B.type;return B.isCompressedTexture===!0||B.isVideoTexture===!0||ae!==Nc&&ae!==Gl&&(Jt.getTransfer(ae)===wn?(oe!==uo||Te!==rl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ae)),A}function Ze(B){return typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement?(c.width=B.naturalWidth||B.width,c.height=B.naturalHeight||B.height):typeof VideoFrame<"u"&&B instanceof VideoFrame?(c.width=B.displayWidth,c.height=B.displayHeight):(c.width=B.width,c.height=B.height),c}this.allocateTextureUnit=I,this.resetTextureUnits=E,this.setTexture2D=N,this.setTexture2DArray=R,this.setTexture3D=D,this.setTextureCube=j,this.rebindTextures=ue,this.setupRenderTarget=be,this.updateRenderTargetMipmap=Pe,this.updateMultisampleRenderTarget=Ge,this.setupDepthRenderbuffer=pe,this.setupFrameBufferTexture=V,this.useMultisampledRTT=Ye}function age(n,e){function t(r,i=Gl){let s;const o=Jt.getTransfer(i);if(r===rl)return n.UNSIGNED_BYTE;if(r===mP)return n.UNSIGNED_SHORT_4_4_4_4;if(r===gP)return n.UNSIGNED_SHORT_5_5_5_1;if(r===yV)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===mV)return n.BYTE;if(r===gV)return n.SHORT;if(r===Pg)return n.UNSIGNED_SHORT;if(r===pP)return n.INT;if(r===$u)return n.UNSIGNED_INT;if(r===ka)return n.FLOAT;if(r===np)return n.HALF_FLOAT;if(r===vV)return n.ALPHA;if(r===_V)return n.RGB;if(r===uo)return n.RGBA;if(r===xV)return n.LUMINANCE;if(r===SV)return n.LUMINANCE_ALPHA;if(r===zd)return n.DEPTH_COMPONENT;if(r===Df)return n.DEPTH_STENCIL;if(r===bV)return n.RED;if(r===yP)return n.RED_INTEGER;if(r===wV)return n.RG;if(r===vP)return n.RG_INTEGER;if(r===_P)return n.RGBA_INTEGER;if(r===Jv||r===e_||r===t_||r===n_)if(o===wn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===Jv)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===e_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===t_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===n_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===Jv)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===e_)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===t_)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===n_)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===bA||r===wA||r===TA||r===MA)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===bA)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===wA)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===TA)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===MA)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===EA||r===AA||r===CA)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===EA||r===AA)return o===wn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===CA)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===RA||r===NA||r===PA||r===IA||r===LA||r===DA||r===OA||r===FA||r===kA||r===UA||r===BA||r===zA||r===$A||r===VA)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===RA)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===NA)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===PA)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===IA)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===LA)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===DA)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===OA)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===FA)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===kA)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===UA)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===BA)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===zA)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===$A)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===VA)return o===wn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===r_||r===GA||r===HA)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===r_)return o===wn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===GA)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===HA)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===TV||r===WA||r===jA||r===qA)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===r_)return s.COMPRESSED_RED_RGTC1_EXT;if(r===WA)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===jA)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===qA)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Lf?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}class lge extends As{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let vd=class extends Oi{constructor(){super(),this.isGroup=!0,this.type="Group"}};const cge={type:"move"};class Hw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new vd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new vd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Y,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Y),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new vd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Y,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Y),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const g of e.hand.values()){const y=t.getJointPose(g,r),m=this._getHandJoint(c,g);y!==null&&(m.matrix.fromArray(y.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=y.radius),m.visible=y!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],d=u.position.distanceTo(h.position),f=.02,p=.005;c.inputState.pinching&&d>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(cge)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new vd;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}const uge=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,hge=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class dge{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,r){if(this.texture===null){const i=new Eo,s=e.properties.get(i);s.__webglTexture=t.texture,(t.depthNear!=r.depthNear||t.depthFar!=r.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new Xo({vertexShader:uge,fragmentShader:hge,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ns(new kb(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class fge extends Pc{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,d=null,f=null,p=null;const g=new dge,y=t.getContextAttributes();let m=null,_=null;const v=[],x=[],b=new Ve;let T=null;const w=new As;w.layers.enable(1),w.viewport=new ar;const M=new As;M.layers.enable(2),M.viewport=new ar;const C=[w,M],S=new lge;S.layers.enable(1),S.layers.enable(2);let E=null,I=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(k){let V=v[k];return V===void 0&&(V=new Hw,v[k]=V),V.getTargetRaySpace()},this.getControllerGrip=function(k){let V=v[k];return V===void 0&&(V=new Hw,v[k]=V),V.getGripSpace()},this.getHand=function(k){let V=v[k];return V===void 0&&(V=new Hw,v[k]=V),V.getHandSpace()};function F(k){const V=x.indexOf(k.inputSource);if(V===-1)return;const Z=v[V];Z!==void 0&&(Z.update(k.inputSource,k.frame,c||o),Z.dispatchEvent({type:k.type,data:k.inputSource}))}function N(){i.removeEventListener("select",F),i.removeEventListener("selectstart",F),i.removeEventListener("selectend",F),i.removeEventListener("squeeze",F),i.removeEventListener("squeezestart",F),i.removeEventListener("squeezeend",F),i.removeEventListener("end",N),i.removeEventListener("inputsourceschange",R);for(let k=0;k<v.length;k++){const V=x[k];V!==null&&(x[k]=null,v[k].disconnect(V))}E=null,I=null,g.reset(),e.setRenderTarget(m),f=null,d=null,h=null,i=null,_=null,te.stop(),r.isPresenting=!1,e.setPixelRatio(T),e.setSize(b.width,b.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(k){s=k,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(k){a=k,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(k){c=k},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(k){if(i=k,i!==null){if(m=e.getRenderTarget(),i.addEventListener("select",F),i.addEventListener("selectstart",F),i.addEventListener("selectend",F),i.addEventListener("squeeze",F),i.addEventListener("squeezestart",F),i.addEventListener("squeezeend",F),i.addEventListener("end",N),i.addEventListener("inputsourceschange",R),y.xrCompatible!==!0&&await t.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(b),i.renderState.layers===void 0){const V={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(i,t,V),i.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),_=new vc(f.framebufferWidth,f.framebufferHeight,{format:uo,type:rl,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let V=null,Z=null,le=null;y.depth&&(le=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,V=y.stencil?Df:zd,Z=y.stencil?Lf:$u);const pe={colorFormat:t.RGBA8,depthFormat:le,scaleFactor:s};h=new XRWebGLBinding(i,t),d=h.createProjectionLayer(pe),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),_=new vc(d.textureWidth,d.textureHeight,{format:uo,type:rl,depthTexture:new WV(d.textureWidth,d.textureHeight,Z,void 0,void 0,void 0,void 0,void 0,void 0,V),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),te.setContext(i),te.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function R(k){for(let V=0;V<k.removed.length;V++){const Z=k.removed[V],le=x.indexOf(Z);le>=0&&(x[le]=null,v[le].disconnect(Z))}for(let V=0;V<k.added.length;V++){const Z=k.added[V];let le=x.indexOf(Z);if(le===-1){for(let ue=0;ue<v.length;ue++)if(ue>=x.length){x.push(Z),le=ue;break}else if(x[ue]===null){x[ue]=Z,le=ue;break}if(le===-1)break}const pe=v[le];pe&&pe.connect(Z)}}const D=new Y,j=new Y;function L(k,V,Z){D.setFromMatrixPosition(V.matrixWorld),j.setFromMatrixPosition(Z.matrixWorld);const le=D.distanceTo(j),pe=V.projectionMatrix.elements,ue=Z.projectionMatrix.elements,be=pe[14]/(pe[10]-1),Pe=pe[14]/(pe[10]+1),we=(pe[9]+1)/pe[5],G=(pe[9]-1)/pe[5],Ge=(pe[8]-1)/pe[0],$e=(ue[8]+1)/ue[0],Ye=be*Ge,De=be*$e,st=le/(-Ge+$e),Ze=st*-Ge;if(V.matrixWorld.decompose(k.position,k.quaternion,k.scale),k.translateX(Ze),k.translateZ(st),k.matrixWorld.compose(k.position,k.quaternion,k.scale),k.matrixWorldInverse.copy(k.matrixWorld).invert(),pe[10]===-1)k.projectionMatrix.copy(V.projectionMatrix),k.projectionMatrixInverse.copy(V.projectionMatrixInverse);else{const B=be+st,A=Pe+st,ae=Ye-Ze,oe=De+(le-Ze),Te=we*Pe/A*B,Se=G*Pe/A*B;k.projectionMatrix.makePerspective(ae,oe,Te,Se,B,A),k.projectionMatrixInverse.copy(k.projectionMatrix).invert()}}function W(k,V){V===null?k.matrixWorld.copy(k.matrix):k.matrixWorld.multiplyMatrices(V.matrixWorld,k.matrix),k.matrixWorldInverse.copy(k.matrixWorld).invert()}this.updateCamera=function(k){if(i===null)return;let V=k.near,Z=k.far;g.texture!==null&&(g.depthNear>0&&(V=g.depthNear),g.depthFar>0&&(Z=g.depthFar)),S.near=M.near=w.near=V,S.far=M.far=w.far=Z,(E!==S.near||I!==S.far)&&(i.updateRenderState({depthNear:S.near,depthFar:S.far}),E=S.near,I=S.far);const le=k.parent,pe=S.cameras;W(S,le);for(let ue=0;ue<pe.length;ue++)W(pe[ue],le);pe.length===2?L(S,w,M):S.projectionMatrix.copy(w.projectionMatrix),z(k,S,le)};function z(k,V,Z){Z===null?k.matrix.copy(V.matrixWorld):(k.matrix.copy(Z.matrixWorld),k.matrix.invert(),k.matrix.multiply(V.matrixWorld)),k.matrix.decompose(k.position,k.quaternion,k.scale),k.updateMatrixWorld(!0),k.projectionMatrix.copy(V.projectionMatrix),k.projectionMatrixInverse.copy(V.projectionMatrixInverse),k.isPerspectiveCamera&&(k.fov=Ig*2*Math.atan(1/k.projectionMatrix.elements[5]),k.zoom=1)}this.getCamera=function(){return S},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(k){l=k,d!==null&&(d.fixedFoveation=k),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=k)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(S)};let X=null;function U(k,V){if(u=V.getViewerPose(c||o),p=V,u!==null){const Z=u.views;f!==null&&(e.setRenderTargetFramebuffer(_,f.framebuffer),e.setRenderTarget(_));let le=!1;Z.length!==S.cameras.length&&(S.cameras.length=0,le=!0);for(let ue=0;ue<Z.length;ue++){const be=Z[ue];let Pe=null;if(f!==null)Pe=f.getViewport(be);else{const G=h.getViewSubImage(d,be);Pe=G.viewport,ue===0&&(e.setRenderTargetTextures(_,G.colorTexture,d.ignoreDepthValues?void 0:G.depthStencilTexture),e.setRenderTarget(_))}let we=C[ue];we===void 0&&(we=new As,we.layers.enable(ue),we.viewport=new ar,C[ue]=we),we.matrix.fromArray(be.transform.matrix),we.matrix.decompose(we.position,we.quaternion,we.scale),we.projectionMatrix.fromArray(be.projectionMatrix),we.projectionMatrixInverse.copy(we.projectionMatrix).invert(),we.viewport.set(Pe.x,Pe.y,Pe.width,Pe.height),ue===0&&(S.matrix.copy(we.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),le===!0&&S.cameras.push(we)}const pe=i.enabledFeatures;if(pe&&pe.includes("depth-sensing")){const ue=h.getDepthInformation(Z[0]);ue&&ue.isValid&&ue.texture&&g.init(e,ue,i.renderState)}}for(let Z=0;Z<v.length;Z++){const le=x[Z],pe=v[Z];le!==null&&pe!==void 0&&pe.update(le,V,c||o)}X&&X(k,V),V.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:V}),p=null}const te=new HV;te.setAnimationLoop(U),this.setAnimationLoop=function(k){X=k},this.dispose=function(){}}}const Gc=new _c,pge=new Cn;function mge(n,e){function t(y,m){y.matrixAutoUpdate===!0&&y.updateMatrix(),m.value.copy(y.matrix)}function r(y,m){m.color.getRGB(y.fogColor.value,zV(n)),m.isFog?(y.fogNear.value=m.near,y.fogFar.value=m.far):m.isFogExp2&&(y.fogDensity.value=m.density)}function i(y,m,_,v,x){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(y,m):m.isMeshToonMaterial?(s(y,m),h(y,m)):m.isMeshPhongMaterial?(s(y,m),u(y,m)):m.isMeshStandardMaterial?(s(y,m),d(y,m),m.isMeshPhysicalMaterial&&f(y,m,x)):m.isMeshMatcapMaterial?(s(y,m),p(y,m)):m.isMeshDepthMaterial?s(y,m):m.isMeshDistanceMaterial?(s(y,m),g(y,m)):m.isMeshNormalMaterial?s(y,m):m.isLineBasicMaterial?(o(y,m),m.isLineDashedMaterial&&a(y,m)):m.isPointsMaterial?l(y,m,_,v):m.isSpriteMaterial?c(y,m):m.isShadowMaterial?(y.color.value.copy(m.color),y.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(y,m){y.opacity.value=m.opacity,m.color&&y.diffuse.value.copy(m.color),m.emissive&&y.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(y.map.value=m.map,t(m.map,y.mapTransform)),m.alphaMap&&(y.alphaMap.value=m.alphaMap,t(m.alphaMap,y.alphaMapTransform)),m.bumpMap&&(y.bumpMap.value=m.bumpMap,t(m.bumpMap,y.bumpMapTransform),y.bumpScale.value=m.bumpScale,m.side===fi&&(y.bumpScale.value*=-1)),m.normalMap&&(y.normalMap.value=m.normalMap,t(m.normalMap,y.normalMapTransform),y.normalScale.value.copy(m.normalScale),m.side===fi&&y.normalScale.value.negate()),m.displacementMap&&(y.displacementMap.value=m.displacementMap,t(m.displacementMap,y.displacementMapTransform),y.displacementScale.value=m.displacementScale,y.displacementBias.value=m.displacementBias),m.emissiveMap&&(y.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,y.emissiveMapTransform)),m.specularMap&&(y.specularMap.value=m.specularMap,t(m.specularMap,y.specularMapTransform)),m.alphaTest>0&&(y.alphaTest.value=m.alphaTest);const _=e.get(m),v=_.envMap,x=_.envMapRotation;v&&(y.envMap.value=v,Gc.copy(x),Gc.x*=-1,Gc.y*=-1,Gc.z*=-1,v.isCubeTexture&&v.isRenderTargetTexture===!1&&(Gc.y*=-1,Gc.z*=-1),y.envMapRotation.value.setFromMatrix4(pge.makeRotationFromEuler(Gc)),y.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=m.reflectivity,y.ior.value=m.ior,y.refractionRatio.value=m.refractionRatio),m.lightMap&&(y.lightMap.value=m.lightMap,y.lightMapIntensity.value=m.lightMapIntensity,t(m.lightMap,y.lightMapTransform)),m.aoMap&&(y.aoMap.value=m.aoMap,y.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,y.aoMapTransform))}function o(y,m){y.diffuse.value.copy(m.color),y.opacity.value=m.opacity,m.map&&(y.map.value=m.map,t(m.map,y.mapTransform))}function a(y,m){y.dashSize.value=m.dashSize,y.totalSize.value=m.dashSize+m.gapSize,y.scale.value=m.scale}function l(y,m,_,v){y.diffuse.value.copy(m.color),y.opacity.value=m.opacity,y.size.value=m.size*_,y.scale.value=v*.5,m.map&&(y.map.value=m.map,t(m.map,y.uvTransform)),m.alphaMap&&(y.alphaMap.value=m.alphaMap,t(m.alphaMap,y.alphaMapTransform)),m.alphaTest>0&&(y.alphaTest.value=m.alphaTest)}function c(y,m){y.diffuse.value.copy(m.color),y.opacity.value=m.opacity,y.rotation.value=m.rotation,m.map&&(y.map.value=m.map,t(m.map,y.mapTransform)),m.alphaMap&&(y.alphaMap.value=m.alphaMap,t(m.alphaMap,y.alphaMapTransform)),m.alphaTest>0&&(y.alphaTest.value=m.alphaTest)}function u(y,m){y.specular.value.copy(m.specular),y.shininess.value=Math.max(m.shininess,1e-4)}function h(y,m){m.gradientMap&&(y.gradientMap.value=m.gradientMap)}function d(y,m){y.metalness.value=m.metalness,m.metalnessMap&&(y.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,y.metalnessMapTransform)),y.roughness.value=m.roughness,m.roughnessMap&&(y.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,y.roughnessMapTransform)),m.envMap&&(y.envMapIntensity.value=m.envMapIntensity)}function f(y,m,_){y.ior.value=m.ior,m.sheen>0&&(y.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),y.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(y.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,y.sheenColorMapTransform)),m.sheenRoughnessMap&&(y.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,y.sheenRoughnessMapTransform))),m.clearcoat>0&&(y.clearcoat.value=m.clearcoat,y.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(y.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,y.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(y.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===fi&&y.clearcoatNormalScale.value.negate())),m.dispersion>0&&(y.dispersion.value=m.dispersion),m.iridescence>0&&(y.iridescence.value=m.iridescence,y.iridescenceIOR.value=m.iridescenceIOR,y.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(y.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,y.iridescenceMapTransform)),m.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),m.transmission>0&&(y.transmission.value=m.transmission,y.transmissionSamplerMap.value=_.texture,y.transmissionSamplerSize.value.set(_.width,_.height),m.transmissionMap&&(y.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,y.transmissionMapTransform)),y.thickness.value=m.thickness,m.thicknessMap&&(y.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=m.attenuationDistance,y.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(y.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(y.anisotropyMap.value=m.anisotropyMap,t(m.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=m.specularIntensity,y.specularColor.value.copy(m.specularColor),m.specularColorMap&&(y.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,y.specularColorMapTransform)),m.specularIntensityMap&&(y.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,y.specularIntensityMapTransform))}function p(y,m){m.matcap&&(y.matcap.value=m.matcap)}function g(y,m){const _=e.get(m).light;y.referencePosition.value.setFromMatrixPosition(_.matrixWorld),y.nearDistance.value=_.shadow.camera.near,y.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function gge(n,e,t,r){let i={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,v){const x=v.program;r.uniformBlockBinding(_,x)}function c(_,v){let x=i[_.id];x===void 0&&(p(_),x=u(_),i[_.id]=x,_.addEventListener("dispose",y));const b=v.program;r.updateUBOMapping(_,b);const T=e.render.frame;s[_.id]!==T&&(d(_),s[_.id]=T)}function u(_){const v=h();_.__bindingPointIndex=v;const x=n.createBuffer(),b=_.__size,T=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,x),n.bufferData(n.UNIFORM_BUFFER,b,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,v,x),x}function h(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(_){const v=i[_.id],x=_.uniforms,b=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,v);for(let T=0,w=x.length;T<w;T++){const M=Array.isArray(x[T])?x[T]:[x[T]];for(let C=0,S=M.length;C<S;C++){const E=M[C];if(f(E,T,C,b)===!0){const I=E.__offset,F=Array.isArray(E.value)?E.value:[E.value];let N=0;for(let R=0;R<F.length;R++){const D=F[R],j=g(D);typeof D=="number"||typeof D=="boolean"?(E.__data[0]=D,n.bufferSubData(n.UNIFORM_BUFFER,I+N,E.__data)):D.isMatrix3?(E.__data[0]=D.elements[0],E.__data[1]=D.elements[1],E.__data[2]=D.elements[2],E.__data[3]=0,E.__data[4]=D.elements[3],E.__data[5]=D.elements[4],E.__data[6]=D.elements[5],E.__data[7]=0,E.__data[8]=D.elements[6],E.__data[9]=D.elements[7],E.__data[10]=D.elements[8],E.__data[11]=0):(D.toArray(E.__data,N),N+=j.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,I,E.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(_,v,x,b){const T=_.value,w=v+"_"+x;if(b[w]===void 0)return typeof T=="number"||typeof T=="boolean"?b[w]=T:b[w]=T.clone(),!0;{const M=b[w];if(typeof T=="number"||typeof T=="boolean"){if(M!==T)return b[w]=T,!0}else if(M.equals(T)===!1)return M.copy(T),!0}return!1}function p(_){const v=_.uniforms;let x=0;const b=16;for(let w=0,M=v.length;w<M;w++){const C=Array.isArray(v[w])?v[w]:[v[w]];for(let S=0,E=C.length;S<E;S++){const I=C[S],F=Array.isArray(I.value)?I.value:[I.value];for(let N=0,R=F.length;N<R;N++){const D=F[N],j=g(D),L=x%b,W=L%j.boundary,z=L+W;x+=W,z!==0&&b-z<j.storage&&(x+=b-z),I.__data=new Float32Array(j.storage/Float32Array.BYTES_PER_ELEMENT),I.__offset=x,x+=j.storage}}}const T=x%b;return T>0&&(x+=b-T),_.__size=x,_.__cache={},this}function g(_){const v={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(v.boundary=4,v.storage=4):_.isVector2?(v.boundary=8,v.storage=8):_.isVector3||_.isColor?(v.boundary=16,v.storage=12):_.isVector4?(v.boundary=16,v.storage=16):_.isMatrix3?(v.boundary=48,v.storage=48):_.isMatrix4?(v.boundary=64,v.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),v}function y(_){const v=_.target;v.removeEventListener("dispose",y);const x=o.indexOf(v.__bindingPointIndex);o.splice(x,1),n.deleteBuffer(i[v.id]),delete i[v.id],delete s[v.id]}function m(){for(const _ in i)n.deleteBuffer(i[_]);o=[],i={},s={}}return{bind:l,update:c,dispose:m}}class yge{constructor(e={}){const{canvas:t=she(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let d;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=r.getContextAttributes().alpha}else d=o;const f=new Uint32Array(4),p=new Int32Array(4);let g=null,y=null;const m=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=bs,this.toneMapping=uc,this.toneMappingExposure=1;const v=this;let x=!1,b=0,T=0,w=null,M=-1,C=null;const S=new ar,E=new ar;let I=null;const F=new Ot(0);let N=0,R=t.width,D=t.height,j=1,L=null,W=null;const z=new ar(0,0,R,D),X=new ar(0,0,R,D);let U=!1;const te=new MP;let k=!1,V=!1;const Z=new Cn,le=new Cn,pe=new Y,ue=new ar,be={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Pe=!1;function we(){return w===null?j:1}let G=r;function Ge(O,ie){return t.getContext(O,ie)}try{const O={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ib}`),t.addEventListener("webglcontextlost",he,!1),t.addEventListener("webglcontextrestored",Ee,!1),t.addEventListener("webglcontextcreationerror",Re,!1),G===null){const ie="webgl2";if(G=Ge(ie,O),G===null)throw Ge(ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}let $e,Ye,De,st,Ze,B,A,ae,oe,Te,Se,Xe,Ie,Fe,pt,Le,Oe,ot,ut,Ne,K,H,ve,$;function me(){$e=new bpe(G),$e.init(),H=new age(G,$e),Ye=new gpe(G,$e,e,H),De=new ige(G),Ye.reverseDepthBuffer&&De.buffers.depth.setReversed(!0),st=new Mpe(G),Ze=new Gme,B=new oge(G,$e,De,Ze,Ye,H,st),A=new vpe(v),ae=new Spe(v),oe=new Ihe(G),ve=new ppe(G,oe),Te=new wpe(G,oe,st,ve),Se=new Ape(G,Te,oe,st),ut=new Epe(G,Ye,B),Le=new ype(Ze),Xe=new Vme(v,A,ae,$e,Ye,ve,Le),Ie=new mge(v,Ze),Fe=new Wme,pt=new Qme($e),ot=new fpe(v,A,ae,De,Se,d,l),Oe=new nge(v,Se,Ye),$=new gge(G,st,Ye,De),Ne=new mpe(G,$e,st),K=new Tpe(G,$e,st),st.programs=Xe.programs,v.capabilities=Ye,v.extensions=$e,v.properties=Ze,v.renderLists=Fe,v.shadowMap=Oe,v.state=De,v.info=st}me();const J=new fge(v,G);this.xr=J,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){const O=$e.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){const O=$e.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(O){O!==void 0&&(j=O,this.setSize(R,D,!1))},this.getSize=function(O){return O.set(R,D)},this.setSize=function(O,ie,de=!0){if(J.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}R=O,D=ie,t.width=Math.floor(O*j),t.height=Math.floor(ie*j),de===!0&&(t.style.width=O+"px",t.style.height=ie+"px"),this.setViewport(0,0,O,ie)},this.getDrawingBufferSize=function(O){return O.set(R*j,D*j).floor()},this.setDrawingBufferSize=function(O,ie,de){R=O,D=ie,j=de,t.width=Math.floor(O*de),t.height=Math.floor(ie*de),this.setViewport(0,0,O,ie)},this.getCurrentViewport=function(O){return O.copy(S)},this.getViewport=function(O){return O.copy(z)},this.setViewport=function(O,ie,de,fe){O.isVector4?z.set(O.x,O.y,O.z,O.w):z.set(O,ie,de,fe),De.viewport(S.copy(z).multiplyScalar(j).round())},this.getScissor=function(O){return O.copy(X)},this.setScissor=function(O,ie,de,fe){O.isVector4?X.set(O.x,O.y,O.z,O.w):X.set(O,ie,de,fe),De.scissor(E.copy(X).multiplyScalar(j).round())},this.getScissorTest=function(){return U},this.setScissorTest=function(O){De.setScissorTest(U=O)},this.setOpaqueSort=function(O){L=O},this.setTransparentSort=function(O){W=O},this.getClearColor=function(O){return O.copy(ot.getClearColor())},this.setClearColor=function(){ot.setClearColor.apply(ot,arguments)},this.getClearAlpha=function(){return ot.getClearAlpha()},this.setClearAlpha=function(){ot.setClearAlpha.apply(ot,arguments)},this.clear=function(O=!0,ie=!0,de=!0){let fe=0;if(O){let se=!1;if(w!==null){const Be=w.texture.format;se=Be===_P||Be===vP||Be===yP}if(se){const Be=w.texture.type,Qe=Be===rl||Be===$u||Be===Pg||Be===Lf||Be===mP||Be===gP,nt=ot.getClearColor(),rt=ot.getClearAlpha(),mt=nt.r,gt=nt.g,at=nt.b;Qe?(f[0]=mt,f[1]=gt,f[2]=at,f[3]=rt,G.clearBufferuiv(G.COLOR,0,f)):(p[0]=mt,p[1]=gt,p[2]=at,p[3]=rt,G.clearBufferiv(G.COLOR,0,p))}else fe|=G.COLOR_BUFFER_BIT}ie&&(fe|=G.DEPTH_BUFFER_BIT,G.clearDepth(this.capabilities.reverseDepthBuffer?0:1)),de&&(fe|=G.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),G.clear(fe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",he,!1),t.removeEventListener("webglcontextrestored",Ee,!1),t.removeEventListener("webglcontextcreationerror",Re,!1),Fe.dispose(),pt.dispose(),Ze.dispose(),A.dispose(),ae.dispose(),Se.dispose(),ve.dispose(),$.dispose(),Xe.dispose(),J.dispose(),J.removeEventListener("sessionstart",na),J.removeEventListener("sessionend",Fc),$i.stop()};function he(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Ee(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const O=st.autoReset,ie=Oe.enabled,de=Oe.autoUpdate,fe=Oe.needsUpdate,se=Oe.type;me(),st.autoReset=O,Oe.enabled=ie,Oe.autoUpdate=de,Oe.needsUpdate=fe,Oe.type=se}function Re(O){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",O.statusMessage)}function qe(O){const ie=O.target;ie.removeEventListener("dispose",qe),vt(ie)}function vt(O){on(O),Ze.remove(O)}function on(O){const ie=Ze.get(O).programs;ie!==void 0&&(ie.forEach(function(de){Xe.releaseProgram(de)}),O.isShaderMaterial&&Xe.releaseShaderCache(O))}this.renderBufferDirect=function(O,ie,de,fe,se,Be){ie===null&&(ie=be);const Qe=se.isMesh&&se.matrixWorld.determinant()<0,nt=k8(O,ie,de,fe,se);De.setMaterial(fe,Qe);let rt=de.index,mt=1;if(fe.wireframe===!0){if(rt=Te.getWireframeAttribute(de),rt===void 0)return;mt=2}const gt=de.drawRange,at=de.attributes.position;let an=gt.start*mt,xn=(gt.start+gt.count)*mt;Be!==null&&(an=Math.max(an,Be.start*mt),xn=Math.min(xn,(Be.start+Be.count)*mt)),rt!==null?(an=Math.max(an,0),xn=Math.min(xn,rt.count)):at!=null&&(an=Math.max(an,0),xn=Math.min(xn,at.count));const $n=xn-an;if($n<0||$n===1/0)return;ve.setup(se,fe,nt,de,rt);let Vi,Yt=Ne;if(rt!==null&&(Vi=oe.get(rt),Yt=K,Yt.setIndex(Vi)),se.isMesh)fe.wireframe===!0?(De.setLineWidth(fe.wireframeLinewidth*we()),Yt.setMode(G.LINES)):Yt.setMode(G.TRIANGLES);else if(se.isLine){let lt=fe.linewidth;lt===void 0&&(lt=1),De.setLineWidth(lt*we()),se.isLineSegments?Yt.setMode(G.LINES):se.isLineLoop?Yt.setMode(G.LINE_LOOP):Yt.setMode(G.LINE_STRIP)}else se.isPoints?Yt.setMode(G.POINTS):se.isSprite&&Yt.setMode(G.TRIANGLES);if(se.isBatchedMesh)if(se._multiDrawInstances!==null)Yt.renderMultiDrawInstances(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount,se._multiDrawInstances);else if($e.get("WEBGL_multi_draw"))Yt.renderMultiDraw(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount);else{const lt=se._multiDrawStarts,Rr=se._multiDrawCounts,Qt=se._multiDrawCount,Gs=rt?oe.get(rt).bytesPerElement:1,ah=Ze.get(fe).currentProgram.getUniforms();for(let Gi=0;Gi<Qt;Gi++)ah.setValue(G,"_gl_DrawID",Gi),Yt.render(lt[Gi]/Gs,Rr[Gi])}else if(se.isInstancedMesh)Yt.renderInstances(an,$n,se.count);else if(de.isInstancedBufferGeometry){const lt=de._maxInstanceCount!==void 0?de._maxInstanceCount:1/0,Rr=Math.min(de.instanceCount,lt);Yt.renderInstances(an,$n,Rr)}else Yt.render(an,$n)};function dt(O,ie,de){O.transparent===!0&&O.side===Ca&&O.forceSinglePass===!1?(O.side=fi,O.needsUpdate=!0,Ly(O,ie,de),O.side=yc,O.needsUpdate=!0,Ly(O,ie,de),O.side=Ca):Ly(O,ie,de)}this.compile=function(O,ie,de=null){de===null&&(de=O),y=pt.get(de),y.init(ie),_.push(y),de.traverseVisible(function(se){se.isLight&&se.layers.test(ie.layers)&&(y.pushLight(se),se.castShadow&&y.pushShadow(se))}),O!==de&&O.traverseVisible(function(se){se.isLight&&se.layers.test(ie.layers)&&(y.pushLight(se),se.castShadow&&y.pushShadow(se))}),y.setupLights();const fe=new Set;return O.traverse(function(se){if(!(se.isMesh||se.isPoints||se.isLine||se.isSprite))return;const Be=se.material;if(Be)if(Array.isArray(Be))for(let Qe=0;Qe<Be.length;Qe++){const nt=Be[Qe];dt(nt,de,se),fe.add(nt)}else dt(Be,de,se),fe.add(Be)}),_.pop(),y=null,fe},this.compileAsync=function(O,ie,de=null){const fe=this.compile(O,ie,de);return new Promise(se=>{function Be(){if(fe.forEach(function(Qe){Ze.get(Qe).currentProgram.isReady()&&fe.delete(Qe)}),fe.size===0){se(O);return}setTimeout(Be,10)}$e.get("KHR_parallel_shader_compile")!==null?Be():setTimeout(Be,10)})};let pn=null;function Xn(O){pn&&pn(O)}function na(){$i.stop()}function Fc(){$i.start()}const $i=new HV;$i.setAnimationLoop(Xn),typeof self<"u"&&$i.setContext(self),this.setAnimationLoop=function(O){pn=O,J.setAnimationLoop(O),O===null?$i.stop():$i.start()},J.addEventListener("sessionstart",na),J.addEventListener("sessionend",Fc),this.render=function(O,ie){if(ie!==void 0&&ie.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;if(O.matrixWorldAutoUpdate===!0&&O.updateMatrixWorld(),ie.parent===null&&ie.matrixWorldAutoUpdate===!0&&ie.updateMatrixWorld(),J.enabled===!0&&J.isPresenting===!0&&(J.cameraAutoUpdate===!0&&J.updateCamera(ie),ie=J.getCamera()),O.isScene===!0&&O.onBeforeRender(v,O,ie,w),y=pt.get(O,_.length),y.init(ie),_.push(y),le.multiplyMatrices(ie.projectionMatrix,ie.matrixWorldInverse),te.setFromProjectionMatrix(le),V=this.localClippingEnabled,k=Le.init(this.clippingPlanes,V),g=Fe.get(O,m.length),g.init(),m.push(g),J.enabled===!0&&J.isPresenting===!0){const Be=v.xr.getDepthSensingMesh();Be!==null&&ra(Be,ie,-1/0,v.sortObjects)}ra(O,ie,0,v.sortObjects),g.finish(),v.sortObjects===!0&&g.sort(L,W),Pe=J.enabled===!1||J.isPresenting===!1||J.hasDepthSensing()===!1,Pe&&ot.addToRenderList(g,O),this.info.render.frame++,k===!0&&Le.beginShadows();const de=y.state.shadowsArray;Oe.render(de,O,ie),k===!0&&Le.endShadows(),this.info.autoReset===!0&&this.info.reset();const fe=g.opaque,se=g.transmissive;if(y.setupLights(),ie.isArrayCamera){const Be=ie.cameras;if(se.length>0)for(let Qe=0,nt=Be.length;Qe<nt;Qe++){const rt=Be[Qe];B2(fe,se,O,rt)}Pe&&ot.render(O);for(let Qe=0,nt=Be.length;Qe<nt;Qe++){const rt=Be[Qe];U2(g,O,rt,rt.viewport)}}else se.length>0&&B2(fe,se,O,ie),Pe&&ot.render(O),U2(g,O,ie);w!==null&&(B.updateMultisampleRenderTarget(w),B.updateRenderTargetMipmap(w)),O.isScene===!0&&O.onAfterRender(v,O,ie),ve.resetDefaultState(),M=-1,C=null,_.pop(),_.length>0?(y=_[_.length-1],k===!0&&Le.setGlobalState(v.clippingPlanes,y.state.camera)):y=null,m.pop(),m.length>0?g=m[m.length-1]:g=null};function ra(O,ie,de,fe){if(O.visible===!1)return;if(O.layers.test(ie.layers)){if(O.isGroup)de=O.renderOrder;else if(O.isLOD)O.autoUpdate===!0&&O.update(ie);else if(O.isLight)y.pushLight(O),O.castShadow&&y.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||te.intersectsSprite(O)){fe&&ue.setFromMatrixPosition(O.matrixWorld).applyMatrix4(le);const Qe=Se.update(O),nt=O.material;nt.visible&&g.push(O,Qe,nt,de,ue.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(!O.frustumCulled||te.intersectsObject(O))){const Qe=Se.update(O),nt=O.material;if(fe&&(O.boundingSphere!==void 0?(O.boundingSphere===null&&O.computeBoundingSphere(),ue.copy(O.boundingSphere.center)):(Qe.boundingSphere===null&&Qe.computeBoundingSphere(),ue.copy(Qe.boundingSphere.center)),ue.applyMatrix4(O.matrixWorld).applyMatrix4(le)),Array.isArray(nt)){const rt=Qe.groups;for(let mt=0,gt=rt.length;mt<gt;mt++){const at=rt[mt],an=nt[at.materialIndex];an&&an.visible&&g.push(O,Qe,an,de,ue.z,at)}}else nt.visible&&g.push(O,Qe,nt,de,ue.z,null)}}const Be=O.children;for(let Qe=0,nt=Be.length;Qe<nt;Qe++)ra(Be[Qe],ie,de,fe)}function U2(O,ie,de,fe){const se=O.opaque,Be=O.transmissive,Qe=O.transparent;y.setupLightsView(de),k===!0&&Le.setGlobalState(v.clippingPlanes,de),fe&&De.viewport(S.copy(fe)),se.length>0&&Iy(se,ie,de),Be.length>0&&Iy(Be,ie,de),Qe.length>0&&Iy(Qe,ie,de),De.buffers.depth.setTest(!0),De.buffers.depth.setMask(!0),De.buffers.color.setMask(!0),De.setPolygonOffset(!1)}function B2(O,ie,de,fe){if((de.isScene===!0?de.overrideMaterial:null)!==null)return;y.state.transmissionRenderTarget[fe.id]===void 0&&(y.state.transmissionRenderTarget[fe.id]=new vc(1,1,{generateMipmaps:!0,type:$e.has("EXT_color_buffer_half_float")||$e.has("EXT_color_buffer_float")?np:rl,minFilter:mu,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Jt.workingColorSpace}));const Be=y.state.transmissionRenderTarget[fe.id],Qe=fe.viewport||S;Be.setSize(Qe.z,Qe.w);const nt=v.getRenderTarget();v.setRenderTarget(Be),v.getClearColor(F),N=v.getClearAlpha(),N<1&&v.setClearColor(16777215,.5),v.clear(),Pe&&ot.render(de);const rt=v.toneMapping;v.toneMapping=uc;const mt=fe.viewport;if(fe.viewport!==void 0&&(fe.viewport=void 0),y.setupLightsView(fe),k===!0&&Le.setGlobalState(v.clippingPlanes,fe),Iy(O,de,fe),B.updateMultisampleRenderTarget(Be),B.updateRenderTargetMipmap(Be),$e.has("WEBGL_multisampled_render_to_texture")===!1){let gt=!1;for(let at=0,an=ie.length;at<an;at++){const xn=ie[at],$n=xn.object,Vi=xn.geometry,Yt=xn.material,lt=xn.group;if(Yt.side===Ca&&$n.layers.test(fe.layers)){const Rr=Yt.side;Yt.side=fi,Yt.needsUpdate=!0,z2($n,de,fe,Vi,Yt,lt),Yt.side=Rr,Yt.needsUpdate=!0,gt=!0}}gt===!0&&(B.updateMultisampleRenderTarget(Be),B.updateRenderTargetMipmap(Be))}v.setRenderTarget(nt),v.setClearColor(F,N),mt!==void 0&&(fe.viewport=mt),v.toneMapping=rt}function Iy(O,ie,de){const fe=ie.isScene===!0?ie.overrideMaterial:null;for(let se=0,Be=O.length;se<Be;se++){const Qe=O[se],nt=Qe.object,rt=Qe.geometry,mt=fe===null?Qe.material:fe,gt=Qe.group;nt.layers.test(de.layers)&&z2(nt,ie,de,rt,mt,gt)}}function z2(O,ie,de,fe,se,Be){O.onBeforeRender(v,ie,de,fe,se,Be),O.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),se.onBeforeRender(v,ie,de,fe,O,Be),se.transparent===!0&&se.side===Ca&&se.forceSinglePass===!1?(se.side=fi,se.needsUpdate=!0,v.renderBufferDirect(de,ie,fe,se,O,Be),se.side=yc,se.needsUpdate=!0,v.renderBufferDirect(de,ie,fe,se,O,Be),se.side=Ca):v.renderBufferDirect(de,ie,fe,se,O,Be),O.onAfterRender(v,ie,de,fe,se,Be)}function Ly(O,ie,de){ie.isScene!==!0&&(ie=be);const fe=Ze.get(O),se=y.state.lights,Be=y.state.shadowsArray,Qe=se.state.version,nt=Xe.getParameters(O,se.state,Be,ie,de),rt=Xe.getProgramCacheKey(nt);let mt=fe.programs;fe.environment=O.isMeshStandardMaterial?ie.environment:null,fe.fog=ie.fog,fe.envMap=(O.isMeshStandardMaterial?ae:A).get(O.envMap||fe.environment),fe.envMapRotation=fe.environment!==null&&O.envMap===null?ie.environmentRotation:O.envMapRotation,mt===void 0&&(O.addEventListener("dispose",qe),mt=new Map,fe.programs=mt);let gt=mt.get(rt);if(gt!==void 0){if(fe.currentProgram===gt&&fe.lightsStateVersion===Qe)return V2(O,nt),gt}else nt.uniforms=Xe.getUniforms(O),O.onBeforeCompile(nt,v),gt=Xe.acquireProgram(nt,rt),mt.set(rt,gt),fe.uniforms=nt.uniforms;const at=fe.uniforms;return(!O.isShaderMaterial&&!O.isRawShaderMaterial||O.clipping===!0)&&(at.clippingPlanes=Le.uniform),V2(O,nt),fe.needsLights=B8(O),fe.lightsStateVersion=Qe,fe.needsLights&&(at.ambientLightColor.value=se.state.ambient,at.lightProbe.value=se.state.probe,at.directionalLights.value=se.state.directional,at.directionalLightShadows.value=se.state.directionalShadow,at.spotLights.value=se.state.spot,at.spotLightShadows.value=se.state.spotShadow,at.rectAreaLights.value=se.state.rectArea,at.ltc_1.value=se.state.rectAreaLTC1,at.ltc_2.value=se.state.rectAreaLTC2,at.pointLights.value=se.state.point,at.pointLightShadows.value=se.state.pointShadow,at.hemisphereLights.value=se.state.hemi,at.directionalShadowMap.value=se.state.directionalShadowMap,at.directionalShadowMatrix.value=se.state.directionalShadowMatrix,at.spotShadowMap.value=se.state.spotShadowMap,at.spotLightMatrix.value=se.state.spotLightMatrix,at.spotLightMap.value=se.state.spotLightMap,at.pointShadowMap.value=se.state.pointShadowMap,at.pointShadowMatrix.value=se.state.pointShadowMatrix),fe.currentProgram=gt,fe.uniformsList=null,gt}function $2(O){if(O.uniformsList===null){const ie=O.currentProgram.getUniforms();O.uniformsList=a_.seqWithValue(ie.seq,O.uniforms)}return O.uniformsList}function V2(O,ie){const de=Ze.get(O);de.outputColorSpace=ie.outputColorSpace,de.batching=ie.batching,de.batchingColor=ie.batchingColor,de.instancing=ie.instancing,de.instancingColor=ie.instancingColor,de.instancingMorph=ie.instancingMorph,de.skinning=ie.skinning,de.morphTargets=ie.morphTargets,de.morphNormals=ie.morphNormals,de.morphColors=ie.morphColors,de.morphTargetsCount=ie.morphTargetsCount,de.numClippingPlanes=ie.numClippingPlanes,de.numIntersection=ie.numClipIntersection,de.vertexAlphas=ie.vertexAlphas,de.vertexTangents=ie.vertexTangents,de.toneMapping=ie.toneMapping}function k8(O,ie,de,fe,se){ie.isScene!==!0&&(ie=be),B.resetTextureUnits();const Be=ie.fog,Qe=fe.isMeshStandardMaterial?ie.environment:null,nt=w===null?v.outputColorSpace:w.isXRRenderTarget===!0?w.texture.colorSpace:Nc,rt=(fe.isMeshStandardMaterial?ae:A).get(fe.envMap||Qe),mt=fe.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,gt=!!de.attributes.tangent&&(!!fe.normalMap||fe.anisotropy>0),at=!!de.morphAttributes.position,an=!!de.morphAttributes.normal,xn=!!de.morphAttributes.color;let $n=uc;fe.toneMapped&&(w===null||w.isXRRenderTarget===!0)&&($n=v.toneMapping);const Vi=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,Yt=Vi!==void 0?Vi.length:0,lt=Ze.get(fe),Rr=y.state.lights;if(k===!0&&(V===!0||O!==C)){const gs=O===C&&fe.id===M;Le.setState(fe,O,gs)}let Qt=!1;fe.version===lt.__version?(lt.needsLights&&lt.lightsStateVersion!==Rr.state.version||lt.outputColorSpace!==nt||se.isBatchedMesh&&lt.batching===!1||!se.isBatchedMesh&&lt.batching===!0||se.isBatchedMesh&&lt.batchingColor===!0&&se.colorTexture===null||se.isBatchedMesh&&lt.batchingColor===!1&&se.colorTexture!==null||se.isInstancedMesh&&lt.instancing===!1||!se.isInstancedMesh&&lt.instancing===!0||se.isSkinnedMesh&&lt.skinning===!1||!se.isSkinnedMesh&&lt.skinning===!0||se.isInstancedMesh&&lt.instancingColor===!0&&se.instanceColor===null||se.isInstancedMesh&&lt.instancingColor===!1&&se.instanceColor!==null||se.isInstancedMesh&&lt.instancingMorph===!0&&se.morphTexture===null||se.isInstancedMesh&&lt.instancingMorph===!1&&se.morphTexture!==null||lt.envMap!==rt||fe.fog===!0&&lt.fog!==Be||lt.numClippingPlanes!==void 0&&(lt.numClippingPlanes!==Le.numPlanes||lt.numIntersection!==Le.numIntersection)||lt.vertexAlphas!==mt||lt.vertexTangents!==gt||lt.morphTargets!==at||lt.morphNormals!==an||lt.morphColors!==xn||lt.toneMapping!==$n||lt.morphTargetsCount!==Yt)&&(Qt=!0):(Qt=!0,lt.__version=fe.version);let Gs=lt.currentProgram;Qt===!0&&(Gs=Ly(fe,ie,se));let ah=!1,Gi=!1,d1=!1;const Kn=Gs.getUniforms(),fl=lt.uniforms;if(De.useProgram(Gs.program)&&(ah=!0,Gi=!0,d1=!0),fe.id!==M&&(M=fe.id,Gi=!0),ah||C!==O){Ye.reverseDepthBuffer?(Z.copy(O.projectionMatrix),ahe(Z),lhe(Z),Kn.setValue(G,"projectionMatrix",Z)):Kn.setValue(G,"projectionMatrix",O.projectionMatrix),Kn.setValue(G,"viewMatrix",O.matrixWorldInverse);const gs=Kn.map.cameraPosition;gs!==void 0&&gs.setValue(G,pe.setFromMatrixPosition(O.matrixWorld)),Ye.logarithmicDepthBuffer&&Kn.setValue(G,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),(fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshLambertMaterial||fe.isMeshBasicMaterial||fe.isMeshStandardMaterial||fe.isShaderMaterial)&&Kn.setValue(G,"isOrthographic",O.isOrthographicCamera===!0),C!==O&&(C=O,Gi=!0,d1=!0)}if(se.isSkinnedMesh){Kn.setOptional(G,se,"bindMatrix"),Kn.setOptional(G,se,"bindMatrixInverse");const gs=se.skeleton;gs&&(gs.boneTexture===null&&gs.computeBoneTexture(),Kn.setValue(G,"boneTexture",gs.boneTexture,B))}se.isBatchedMesh&&(Kn.setOptional(G,se,"batchingTexture"),Kn.setValue(G,"batchingTexture",se._matricesTexture,B),Kn.setOptional(G,se,"batchingIdTexture"),Kn.setValue(G,"batchingIdTexture",se._indirectTexture,B),Kn.setOptional(G,se,"batchingColorTexture"),se._colorsTexture!==null&&Kn.setValue(G,"batchingColorTexture",se._colorsTexture,B));const f1=de.morphAttributes;if((f1.position!==void 0||f1.normal!==void 0||f1.color!==void 0)&&ut.update(se,de,Gs),(Gi||lt.receiveShadow!==se.receiveShadow)&&(lt.receiveShadow=se.receiveShadow,Kn.setValue(G,"receiveShadow",se.receiveShadow)),fe.isMeshGouraudMaterial&&fe.envMap!==null&&(fl.envMap.value=rt,fl.flipEnvMap.value=rt.isCubeTexture&&rt.isRenderTargetTexture===!1?-1:1),fe.isMeshStandardMaterial&&fe.envMap===null&&ie.environment!==null&&(fl.envMapIntensity.value=ie.environmentIntensity),Gi&&(Kn.setValue(G,"toneMappingExposure",v.toneMappingExposure),lt.needsLights&&U8(fl,d1),Be&&fe.fog===!0&&Ie.refreshFogUniforms(fl,Be),Ie.refreshMaterialUniforms(fl,fe,j,D,y.state.transmissionRenderTarget[O.id]),a_.upload(G,$2(lt),fl,B)),fe.isShaderMaterial&&fe.uniformsNeedUpdate===!0&&(a_.upload(G,$2(lt),fl,B),fe.uniformsNeedUpdate=!1),fe.isSpriteMaterial&&Kn.setValue(G,"center",se.center),Kn.setValue(G,"modelViewMatrix",se.modelViewMatrix),Kn.setValue(G,"normalMatrix",se.normalMatrix),Kn.setValue(G,"modelMatrix",se.matrixWorld),fe.isShaderMaterial||fe.isRawShaderMaterial){const gs=fe.uniformsGroups;for(let p1=0,z8=gs.length;p1<z8;p1++){const G2=gs[p1];$.update(G2,Gs),$.bind(G2,Gs)}}return Gs}function U8(O,ie){O.ambientLightColor.needsUpdate=ie,O.lightProbe.needsUpdate=ie,O.directionalLights.needsUpdate=ie,O.directionalLightShadows.needsUpdate=ie,O.pointLights.needsUpdate=ie,O.pointLightShadows.needsUpdate=ie,O.spotLights.needsUpdate=ie,O.spotLightShadows.needsUpdate=ie,O.rectAreaLights.needsUpdate=ie,O.hemisphereLights.needsUpdate=ie}function B8(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&O.lights===!0}this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(O,ie,de){Ze.get(O.texture).__webglTexture=ie,Ze.get(O.depthTexture).__webglTexture=de;const fe=Ze.get(O);fe.__hasExternalTextures=!0,fe.__autoAllocateDepthBuffer=de===void 0,fe.__autoAllocateDepthBuffer||$e.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),fe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(O,ie){const de=Ze.get(O);de.__webglFramebuffer=ie,de.__useDefaultFramebuffer=ie===void 0},this.setRenderTarget=function(O,ie=0,de=0){w=O,b=ie,T=de;let fe=!0,se=null,Be=!1,Qe=!1;if(O){const rt=Ze.get(O);if(rt.__useDefaultFramebuffer!==void 0)De.bindFramebuffer(G.FRAMEBUFFER,null),fe=!1;else if(rt.__webglFramebuffer===void 0)B.setupRenderTarget(O);else if(rt.__hasExternalTextures)B.rebindTextures(O,Ze.get(O.texture).__webglTexture,Ze.get(O.depthTexture).__webglTexture);else if(O.depthBuffer){const at=O.depthTexture;if(rt.__boundDepthTexture!==at){if(at!==null&&Ze.has(at)&&(O.width!==at.image.width||O.height!==at.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");B.setupDepthRenderbuffer(O)}}const mt=O.texture;(mt.isData3DTexture||mt.isDataArrayTexture||mt.isCompressedArrayTexture)&&(Qe=!0);const gt=Ze.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?(Array.isArray(gt[ie])?se=gt[ie][de]:se=gt[ie],Be=!0):O.samples>0&&B.useMultisampledRTT(O)===!1?se=Ze.get(O).__webglMultisampledFramebuffer:Array.isArray(gt)?se=gt[de]:se=gt,S.copy(O.viewport),E.copy(O.scissor),I=O.scissorTest}else S.copy(z).multiplyScalar(j).floor(),E.copy(X).multiplyScalar(j).floor(),I=U;if(De.bindFramebuffer(G.FRAMEBUFFER,se)&&fe&&De.drawBuffers(O,se),De.viewport(S),De.scissor(E),De.setScissorTest(I),Be){const rt=Ze.get(O.texture);G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_CUBE_MAP_POSITIVE_X+ie,rt.__webglTexture,de)}else if(Qe){const rt=Ze.get(O.texture),mt=ie||0;G.framebufferTextureLayer(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,rt.__webglTexture,de||0,mt)}M=-1},this.readRenderTargetPixels=function(O,ie,de,fe,se,Be,Qe){if(!(O&&O.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let nt=Ze.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&Qe!==void 0&&(nt=nt[Qe]),nt){De.bindFramebuffer(G.FRAMEBUFFER,nt);try{const rt=O.texture,mt=rt.format,gt=rt.type;if(!Ye.textureFormatReadable(mt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ye.textureTypeReadable(gt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ie>=0&&ie<=O.width-fe&&de>=0&&de<=O.height-se&&G.readPixels(ie,de,fe,se,H.convert(mt),H.convert(gt),Be)}finally{const rt=w!==null?Ze.get(w).__webglFramebuffer:null;De.bindFramebuffer(G.FRAMEBUFFER,rt)}}},this.readRenderTargetPixelsAsync=async function(O,ie,de,fe,se,Be,Qe){if(!(O&&O.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let nt=Ze.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&Qe!==void 0&&(nt=nt[Qe]),nt){const rt=O.texture,mt=rt.format,gt=rt.type;if(!Ye.textureFormatReadable(mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ye.textureTypeReadable(gt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ie>=0&&ie<=O.width-fe&&de>=0&&de<=O.height-se){De.bindFramebuffer(G.FRAMEBUFFER,nt);const at=G.createBuffer();G.bindBuffer(G.PIXEL_PACK_BUFFER,at),G.bufferData(G.PIXEL_PACK_BUFFER,Be.byteLength,G.STREAM_READ),G.readPixels(ie,de,fe,se,H.convert(mt),H.convert(gt),0);const an=w!==null?Ze.get(w).__webglFramebuffer:null;De.bindFramebuffer(G.FRAMEBUFFER,an);const xn=G.fenceSync(G.SYNC_GPU_COMMANDS_COMPLETE,0);return G.flush(),await ohe(G,xn,4),G.bindBuffer(G.PIXEL_PACK_BUFFER,at),G.getBufferSubData(G.PIXEL_PACK_BUFFER,0,Be),G.deleteBuffer(at),G.deleteSync(xn),Be}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(O,ie=null,de=0){O.isTexture!==!0&&(i_("WebGLRenderer: copyFramebufferToTexture function signature has changed."),ie=arguments[0]||null,O=arguments[1]);const fe=Math.pow(2,-de),se=Math.floor(O.image.width*fe),Be=Math.floor(O.image.height*fe),Qe=ie!==null?ie.x:0,nt=ie!==null?ie.y:0;B.setTexture2D(O,0),G.copyTexSubImage2D(G.TEXTURE_2D,de,0,0,Qe,nt,se,Be),De.unbindTexture()},this.copyTextureToTexture=function(O,ie,de=null,fe=null,se=0){O.isTexture!==!0&&(i_("WebGLRenderer: copyTextureToTexture function signature has changed."),fe=arguments[0]||null,O=arguments[1],ie=arguments[2],se=arguments[3]||0,de=null);let Be,Qe,nt,rt,mt,gt;de!==null?(Be=de.max.x-de.min.x,Qe=de.max.y-de.min.y,nt=de.min.x,rt=de.min.y):(Be=O.image.width,Qe=O.image.height,nt=0,rt=0),fe!==null?(mt=fe.x,gt=fe.y):(mt=0,gt=0);const at=H.convert(ie.format),an=H.convert(ie.type);B.setTexture2D(ie,0),G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,ie.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,ie.unpackAlignment);const xn=G.getParameter(G.UNPACK_ROW_LENGTH),$n=G.getParameter(G.UNPACK_IMAGE_HEIGHT),Vi=G.getParameter(G.UNPACK_SKIP_PIXELS),Yt=G.getParameter(G.UNPACK_SKIP_ROWS),lt=G.getParameter(G.UNPACK_SKIP_IMAGES),Rr=O.isCompressedTexture?O.mipmaps[se]:O.image;G.pixelStorei(G.UNPACK_ROW_LENGTH,Rr.width),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,Rr.height),G.pixelStorei(G.UNPACK_SKIP_PIXELS,nt),G.pixelStorei(G.UNPACK_SKIP_ROWS,rt),O.isDataTexture?G.texSubImage2D(G.TEXTURE_2D,se,mt,gt,Be,Qe,at,an,Rr.data):O.isCompressedTexture?G.compressedTexSubImage2D(G.TEXTURE_2D,se,mt,gt,Rr.width,Rr.height,at,Rr.data):G.texSubImage2D(G.TEXTURE_2D,se,mt,gt,Be,Qe,at,an,Rr),G.pixelStorei(G.UNPACK_ROW_LENGTH,xn),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,$n),G.pixelStorei(G.UNPACK_SKIP_PIXELS,Vi),G.pixelStorei(G.UNPACK_SKIP_ROWS,Yt),G.pixelStorei(G.UNPACK_SKIP_IMAGES,lt),se===0&&ie.generateMipmaps&&G.generateMipmap(G.TEXTURE_2D),De.unbindTexture()},this.copyTextureToTexture3D=function(O,ie,de=null,fe=null,se=0){O.isTexture!==!0&&(i_("WebGLRenderer: copyTextureToTexture3D function signature has changed."),de=arguments[0]||null,fe=arguments[1]||null,O=arguments[2],ie=arguments[3],se=arguments[4]||0);let Be,Qe,nt,rt,mt,gt,at,an,xn;const $n=O.isCompressedTexture?O.mipmaps[se]:O.image;de!==null?(Be=de.max.x-de.min.x,Qe=de.max.y-de.min.y,nt=de.max.z-de.min.z,rt=de.min.x,mt=de.min.y,gt=de.min.z):(Be=$n.width,Qe=$n.height,nt=$n.depth,rt=0,mt=0,gt=0),fe!==null?(at=fe.x,an=fe.y,xn=fe.z):(at=0,an=0,xn=0);const Vi=H.convert(ie.format),Yt=H.convert(ie.type);let lt;if(ie.isData3DTexture)B.setTexture3D(ie,0),lt=G.TEXTURE_3D;else if(ie.isDataArrayTexture||ie.isCompressedArrayTexture)B.setTexture2DArray(ie,0),lt=G.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}G.pixelStorei(G.UNPACK_FLIP_Y_WEBGL,ie.flipY),G.pixelStorei(G.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),G.pixelStorei(G.UNPACK_ALIGNMENT,ie.unpackAlignment);const Rr=G.getParameter(G.UNPACK_ROW_LENGTH),Qt=G.getParameter(G.UNPACK_IMAGE_HEIGHT),Gs=G.getParameter(G.UNPACK_SKIP_PIXELS),ah=G.getParameter(G.UNPACK_SKIP_ROWS),Gi=G.getParameter(G.UNPACK_SKIP_IMAGES);G.pixelStorei(G.UNPACK_ROW_LENGTH,$n.width),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,$n.height),G.pixelStorei(G.UNPACK_SKIP_PIXELS,rt),G.pixelStorei(G.UNPACK_SKIP_ROWS,mt),G.pixelStorei(G.UNPACK_SKIP_IMAGES,gt),O.isDataTexture||O.isData3DTexture?G.texSubImage3D(lt,se,at,an,xn,Be,Qe,nt,Vi,Yt,$n.data):ie.isCompressedArrayTexture?G.compressedTexSubImage3D(lt,se,at,an,xn,Be,Qe,nt,Vi,$n.data):G.texSubImage3D(lt,se,at,an,xn,Be,Qe,nt,Vi,Yt,$n),G.pixelStorei(G.UNPACK_ROW_LENGTH,Rr),G.pixelStorei(G.UNPACK_IMAGE_HEIGHT,Qt),G.pixelStorei(G.UNPACK_SKIP_PIXELS,Gs),G.pixelStorei(G.UNPACK_SKIP_ROWS,ah),G.pixelStorei(G.UNPACK_SKIP_IMAGES,Gi),se===0&&ie.generateMipmaps&&G.generateMipmap(lt),De.unbindTexture()},this.initRenderTarget=function(O){Ze.get(O).__webglFramebuffer===void 0&&B.setupRenderTarget(O)},this.initTexture=function(O){O.isCubeTexture?B.setTextureCube(O,0):O.isData3DTexture?B.setTexture3D(O,0):O.isDataArrayTexture||O.isCompressedArrayTexture?B.setTexture2DArray(O,0):B.setTexture2D(O,0),De.unbindTexture()},this.resetState=function(){b=0,T=0,w=null,De.reset(),ve.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ua}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===xP?"display-p3":"srgb",t.unpackColorSpace=Jt.workingColorSpace===Db?"display-p3":"srgb"}}let vge=class extends Oi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new _c,this.environmentIntensity=1,this.environmentRotation=new _c,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}},_ge=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=XA,this.updateRanges=[],this.version=0,this.uuid=Ha()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ha()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ha()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}};const ri=new Y;let uF=class YV{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)ri.fromBufferAttribute(this,t),ri.applyMatrix4(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ri.fromBufferAttribute(this,t),ri.applyNormalMatrix(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ri.fromBufferAttribute(this,t),ri.transformDirection(e),this.setXYZ(t,ri.x,ri.y,ri.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=lo(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=ln(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ln(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=lo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=lo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=lo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=lo(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ln(t,this.array),r=ln(r,this.array),i=ln(i,this.array),s=ln(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Is(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new YV(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},QV=class extends nh{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ot(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},Ph;const Bp=new Y,Ih=new Y,Lh=new Y,Dh=new Ve,zp=new Ve,ZV=new Cn,O0=new Y,$p=new Y,F0=new Y,hF=new Ve,Ww=new Ve,dF=new Ve;class xge extends Oi{constructor(e=new QV){if(super(),this.isSprite=!0,this.type="Sprite",Ph===void 0){Ph=new Vs;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new _ge(t,5);Ph.setIndex([0,1,2,0,2,3]),Ph.setAttribute("position",new uF(r,3,0,!1)),Ph.setAttribute("uv",new uF(r,2,3,!1))}this.geometry=Ph,this.material=e,this.center=new Ve(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ih.setFromMatrixScale(this.matrixWorld),ZV.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Lh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ih.multiplyScalar(-Lh.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;k0(O0.set(-.5,-.5,0),Lh,o,Ih,i,s),k0($p.set(.5,-.5,0),Lh,o,Ih,i,s),k0(F0.set(.5,.5,0),Lh,o,Ih,i,s),hF.set(0,0),Ww.set(1,0),dF.set(1,1);let a=e.ray.intersectTriangle(O0,$p,F0,!1,Bp);if(a===null&&(k0($p.set(-.5,.5,0),Lh,o,Ih,i,s),Ww.set(0,1),a=e.ray.intersectTriangle(O0,F0,$p,!1,Bp),a===null))return;const l=e.ray.origin.distanceTo(Bp);l<e.near||l>e.far||t.push({distance:l,point:Bp.clone(),uv:td.getInterpolation(Bp,O0,$p,F0,hF,Ww,dF,new Ve),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function k0(n,e,t,r,i,s){Dh.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(zp.x=s*Dh.x-i*Dh.y,zp.y=i*Dh.x+s*Dh.y):zp.copy(Dh),n.copy(e),n.x+=zp.x,n.y+=zp.y,n.applyMatrix4(ZV)}let JV=class extends nh{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ot(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}};const Sx=new Y,bx=new Y,fF=new Cn,Vp=new Fb,U0=new Ob,jw=new Y,pF=new Y;class Sge extends Oi{constructor(e=new Vs,t=new JV){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)Sx.fromBufferAttribute(t,i-1),bx.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=Sx.distanceTo(bx);e.setAttribute("lineDistance",new gr(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),U0.copy(r.boundingSphere),U0.applyMatrix4(i),U0.radius+=s,e.ray.intersectsSphere(U0)===!1)return;fF.copy(i).invert(),Vp.copy(e.ray).applyMatrix4(fF);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=r.index,d=r.attributes.position;if(u!==null){const f=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let g=f,y=p-1;g<y;g+=c){const m=u.getX(g),_=u.getX(g+1),v=B0(this,e,Vp,l,m,_);v&&t.push(v)}if(this.isLineLoop){const g=u.getX(p-1),y=u.getX(f),m=B0(this,e,Vp,l,g,y);m&&t.push(m)}}else{const f=Math.max(0,o.start),p=Math.min(d.count,o.start+o.count);for(let g=f,y=p-1;g<y;g+=c){const m=B0(this,e,Vp,l,g,g+1);m&&t.push(m)}if(this.isLineLoop){const g=B0(this,e,Vp,l,p-1,f);g&&t.push(g)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function B0(n,e,t,r,i,s){const o=n.geometry.attributes.position;if(Sx.fromBufferAttribute(o,i),bx.fromBufferAttribute(o,s),t.distanceSqToSegment(Sx,bx,jw,pF)>r)return;jw.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(jw);if(!(l<e.near||l>e.far))return{distance:l,point:pF.clone().applyMatrix4(n.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:n}}class ll{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,c;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else if(c>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const u=r[i],d=r[i+1]-u,f=(o-u)/d;return(i+f)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Ve:new Y);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new Y,i=[],s=[],o=[],a=new Y,l=new Cn;for(let f=0;f<=e;f++){const p=f/e;i[f]=this.getTangentAt(p,new Y)}s[0]=new Y,o[0]=new Y;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),h=Math.abs(i[0].y),d=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),h<=c&&(c=h,r.set(0,1,0)),d<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(i[f-1],i[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(wr(i[f-1].dot(i[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,p))}o[f].crossVectors(i[f],s[f])}if(t===!0){let f=Math.acos(wr(s[0].dot(s[e]),-1,1));f/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(i[p],f*p)),o[p].crossVectors(i[p],s[p])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class eG extends ll{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Ve){const r=t,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,f=c-this.aY;l=d*u-f*h+this.aX,c=d*h+f*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class bge extends eG{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function CP(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,h){let d=(o-s)/c-(a-s)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+h)+(l-a)/h;d*=u,f*=u,i(o,a,d,f)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const z0=new Y,qw=new CP,Xw=new CP,Kw=new CP;class wge extends ll{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new Y){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=i[(a-1)%s]:(z0.subVectors(i[0],i[1]).add(i[0]),c=z0);const h=i[a%s],d=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(z0.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=z0),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let p=Math.pow(c.distanceToSquared(h),f),g=Math.pow(h.distanceToSquared(d),f),y=Math.pow(d.distanceToSquared(u),f);g<1e-4&&(g=1),p<1e-4&&(p=g),y<1e-4&&(y=g),qw.initNonuniformCatmullRom(c.x,h.x,d.x,u.x,p,g,y),Xw.initNonuniformCatmullRom(c.y,h.y,d.y,u.y,p,g,y),Kw.initNonuniformCatmullRom(c.z,h.z,d.z,u.z,p,g,y)}else this.curveType==="catmullrom"&&(qw.initCatmullRom(c.x,h.x,d.x,u.x,this.tension),Xw.initCatmullRom(c.y,h.y,d.y,u.y,this.tension),Kw.initCatmullRom(c.z,h.z,d.z,u.z,this.tension));return r.set(qw.calc(l),Xw.calc(l),Kw.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Y().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function mF(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function Tge(n,e){const t=1-n;return t*t*e}function Mge(n,e){return 2*(1-n)*n*e}function Ege(n,e){return n*n*e}function qm(n,e,t,r){return Tge(n,e)+Mge(n,t)+Ege(n,r)}function Age(n,e){const t=1-n;return t*t*t*e}function Cge(n,e){const t=1-n;return 3*t*t*n*e}function Rge(n,e){return 3*(1-n)*n*n*e}function Nge(n,e){return n*n*n*e}function Xm(n,e,t,r,i){return Age(n,e)+Cge(n,t)+Rge(n,r)+Nge(n,i)}class Pge extends ll{constructor(e=new Ve,t=new Ve,r=new Ve,i=new Ve){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Ve){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Xm(e,i.x,s.x,o.x,a.x),Xm(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class tG extends ll{constructor(e=new Y,t=new Y,r=new Y,i=new Y){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Y){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Xm(e,i.x,s.x,o.x,a.x),Xm(e,i.y,s.y,o.y,a.y),Xm(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ige extends ll{constructor(e=new Ve,t=new Ve){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ve){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Lge extends ll{constructor(e=new Y,t=new Y){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Y){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Y){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Dge extends ll{constructor(e=new Ve,t=new Ve,r=new Ve){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Ve){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(qm(e,i.x,s.x,o.x),qm(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RP extends ll{constructor(e=new Y,t=new Y,r=new Y){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Y){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(qm(e,i.x,s.x,o.x),qm(e,i.y,s.y,o.y),qm(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Oge extends ll{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ve){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(mF(a,l.x,c.x,u.x,h.x),mF(a,l.y,c.y,u.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new Ve().fromArray(i))}return this}}var Fge=Object.freeze({__proto__:null,ArcCurve:bge,CatmullRomCurve3:wge,CubicBezierCurve:Pge,CubicBezierCurve3:tG,EllipseCurve:eG,LineCurve:Ige,LineCurve3:Lge,QuadraticBezierCurve:Dge,QuadraticBezierCurve3:RP,SplineCurve:Oge});class Bb extends Vs{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;i=Math.floor(i),s=Math.floor(s);const u=[],h=[],d=[],f=[];let p=0;const g=[],y=r/2;let m=0;_(),o===!1&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new gr(h,3)),this.setAttribute("normal",new gr(d,3)),this.setAttribute("uv",new gr(f,2));function _(){const x=new Y,b=new Y;let T=0;const w=(t-e)/r;for(let M=0;M<=s;M++){const C=[],S=M/s,E=S*(t-e)+e;for(let I=0;I<=i;I++){const F=I/i,N=F*l+a,R=Math.sin(N),D=Math.cos(N);b.x=E*R,b.y=-S*r+y,b.z=E*D,h.push(b.x,b.y,b.z),x.set(R,w,D).normalize(),d.push(x.x,x.y,x.z),f.push(F,1-S),C.push(p++)}g.push(C)}for(let M=0;M<i;M++)for(let C=0;C<s;C++){const S=g[C][M],E=g[C+1][M],I=g[C+1][M+1],F=g[C][M+1];e>0&&(u.push(S,E,F),T+=3),t>0&&(u.push(E,I,F),T+=3)}c.addGroup(m,T,0),m+=T}function v(x){const b=p,T=new Ve,w=new Y;let M=0;const C=x===!0?e:t,S=x===!0?1:-1;for(let I=1;I<=i;I++)h.push(0,y*S,0),d.push(0,S,0),f.push(.5,.5),p++;const E=p;for(let I=0;I<=i;I++){const N=I/i*l+a,R=Math.cos(N),D=Math.sin(N);w.x=C*D,w.y=y*S,w.z=C*R,h.push(w.x,w.y,w.z),d.push(0,S,0),T.x=R*.5+.5,T.y=D*.5*S+.5,f.push(T.x,T.y),p++}for(let I=0;I<i;I++){const F=b+I,N=E+I;x===!0?u.push(N,N+1,F):u.push(N+1,N,F),M+=3}c.addGroup(m,M,x===!0?1:2),m+=M}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bb(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class NP extends Bb{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new NP(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}let nG=class rG extends Vs{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new Y,d=new Y,f=[],p=[],g=[],y=[];for(let m=0;m<=r;m++){const _=[],v=m/r;let x=0;m===0&&o===0?x=.5/t:m===r&&l===Math.PI&&(x=-.5/t);for(let b=0;b<=t;b++){const T=b/t;h.x=-e*Math.cos(i+T*s)*Math.sin(o+v*a),h.y=e*Math.cos(o+v*a),h.z=e*Math.sin(i+T*s)*Math.sin(o+v*a),p.push(h.x,h.y,h.z),d.copy(h).normalize(),g.push(d.x,d.y,d.z),y.push(T+x,1-v),_.push(c++)}u.push(_)}for(let m=0;m<r;m++)for(let _=0;_<t;_++){const v=u[m][_+1],x=u[m][_],b=u[m+1][_],T=u[m+1][_+1];(m!==0||o>0)&&f.push(v,x,T),(m!==r-1||l<Math.PI)&&f.push(x,b,T)}this.setIndex(f),this.setAttribute("position",new gr(p,3)),this.setAttribute("normal",new gr(g,3)),this.setAttribute("uv",new gr(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rG(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}};class PP extends Vs{constructor(e=new RP(new Y(-1,-1,0),new Y(-1,1,0),new Y(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Y,l=new Y,c=new Ve;let u=new Y;const h=[],d=[],f=[],p=[];g(),this.setIndex(p),this.setAttribute("position",new gr(h,3)),this.setAttribute("normal",new gr(d,3)),this.setAttribute("uv",new gr(f,2));function g(){for(let v=0;v<t;v++)y(v);y(s===!1?t:0),_(),m()}function y(v){u=e.getPointAt(v/t,u);const x=o.normals[v],b=o.binormals[v];for(let T=0;T<=i;T++){const w=T/i*Math.PI*2,M=Math.sin(w),C=-Math.cos(w);l.x=C*x.x+M*b.x,l.y=C*x.y+M*b.y,l.z=C*x.z+M*b.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=u.x+r*l.x,a.y=u.y+r*l.y,a.z=u.z+r*l.z,h.push(a.x,a.y,a.z)}}function m(){for(let v=1;v<=t;v++)for(let x=1;x<=i;x++){const b=(i+1)*(v-1)+(x-1),T=(i+1)*v+(x-1),w=(i+1)*v+x,M=(i+1)*(v-1)+x;p.push(b,T,M),p.push(T,w,M)}}function _(){for(let v=0;v<=t;v++)for(let x=0;x<=i;x++)c.x=v/t,c.y=x/i,f.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new PP(new Fge[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}let kge=class extends nh{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=MV,this.normalScale=new Ve(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new _c,this.combine=fP,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};const gF={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Uge{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,s===!1&&i.onStart!==void 0&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,d=c.length;h<d;h+=2){const f=c[h],p=c[h+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}}const Bge=new Uge;class IP{constructor(e){this.manager=e!==void 0?e:Bge,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}IP.DEFAULT_MATERIAL_NAME="__DEFAULT";class zge extends IP{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=gF.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Lg("img");function l(){u(),gF.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){u(),i&&i(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class iG extends IP{constructor(e){super(e)}load(e,t,r,i){const s=new Eo,o=new zge(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}let sG=class extends Oi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ot(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}};const Yw=new Cn,yF=new Y,vF=new Y;let $ge=class{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ve(512,512),this.map=null,this.mapPass=null,this.matrix=new Cn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new MP,this._frameExtents=new Ve(1,1),this._viewportCount=1,this._viewports=[new ar(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;yF.setFromMatrixPosition(e.matrixWorld),t.position.copy(yF),vF.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(vF),t.updateMatrixWorld(),Yw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Yw),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Yw)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},Vge=class extends $ge{constructor(){super(new EP(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Gge=class extends sG{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Oi.DEFAULT_UP),this.updateMatrix(),this.target=new Oi,this.shadow=new Vge}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},Hge=class extends sG{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};class oG{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=_F(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=_F();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function _F(){return performance.now()}const xF=new Cn;class aG{constructor(e,t,r=0,i=1/0){this.ray=new Fb(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new bP,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return xF.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(xF),this}intersectObject(e,t=!0,r=[]){return ZA(e,this,r,t),r.sort(SF),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)ZA(e[i],this,r,t);return r.sort(SF),r}}function SF(n,e){return n.distance-e.distance}function ZA(n,e,t,r){let i=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(i=!1),i===!0&&r===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)ZA(s[o],e,t,!0)}}class JA{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(wr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class zb extends Pc{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ib}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ib);const Vd=new wa,Ra=new Ve,lG=new Y,Qw=new Ve,l_=new Ve,wx=new Y,eC=new Y,cG=new Cn,uG=new Y,hG=new Y;let Si=null,No=null;const Na=[],hc={NONE:-1,PAN:0,ROTATE:1};class Wge extends zb{constructor(e,t,r=null){super(t,r),this.objects=e,this.recursive=!0,this.transformGroup=!1,this.rotateSpeed=1,this.raycaster=new aG,this.mouseButtons={LEFT:Tr.PAN,MIDDLE:Tr.PAN,RIGHT:Tr.ROTATE},this.touches={ONE:Fa.PAN},this._onPointerMove=jge.bind(this),this._onPointerDown=qge.bind(this),this._onPointerCancel=Xge.bind(this),this._onContextMenu=Kge.bind(this),r!==null&&this.connect()}connect(){this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerCancel),this.domElement.addEventListener("pointerleave",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerCancel),this.domElement.removeEventListener("pointerleave",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto",this.domElement.style.cursor=""}dispose(){this.disconnect()}_updatePointer(e){const t=this.domElement.getBoundingClientRect();Ra.x=(e.clientX-t.left)/t.width*2-1,Ra.y=-(e.clientY-t.top)/t.height*2+1}_updateState(e){let t;if(e.pointerType==="touch")t=this.touches.ONE;else switch(e.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=null}switch(t){case Tr.PAN:case Fa.PAN:this.state=hc.PAN;break;case Tr.ROTATE:case Fa.ROTATE:this.state=hc.ROTATE;break;default:this.state=hc.NONE}}getRaycaster(){return console.warn("THREE.DragControls: getRaycaster() has been deprecated. Use controls.raycaster instead."),this.raycaster}setObjects(e){console.warn("THREE.DragControls: setObjects() has been deprecated. Use controls.objects instead."),this.objects=e}getObjects(){return console.warn("THREE.DragControls: getObjects() has been deprecated. Use controls.objects instead."),this.objects}activate(){console.warn("THREE.DragControls: activate() has been renamed to connect()."),this.connect()}deactivate(){console.warn("THREE.DragControls: deactivate() has been renamed to disconnect()."),this.disconnect()}set mode(e){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}get mode(){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}}function jge(n){const e=this.object,t=this.domElement,r=this.raycaster;if(this.enabled!==!1){if(this._updatePointer(n),r.setFromCamera(Ra,e),Si)this.state===hc.PAN?r.ray.intersectPlane(Vd,wx)&&Si.position.copy(wx.sub(lG).applyMatrix4(cG)):this.state===hc.ROTATE&&(Qw.subVectors(Ra,l_).multiplyScalar(this.rotateSpeed),Si.rotateOnWorldAxis(uG,Qw.x),Si.rotateOnWorldAxis(hG.normalize(),-Qw.y)),this.dispatchEvent({type:"drag",object:Si}),l_.copy(Ra);else if(n.pointerType==="mouse"||n.pointerType==="pen")if(Na.length=0,r.setFromCamera(Ra,e),r.intersectObjects(this.objects,this.recursive,Na),Na.length>0){const i=Na[0].object;Vd.setFromNormalAndCoplanarPoint(e.getWorldDirection(Vd.normal),eC.setFromMatrixPosition(i.matrixWorld)),No!==i&&No!==null&&(this.dispatchEvent({type:"hoveroff",object:No}),t.style.cursor="auto",No=null),No!==i&&(this.dispatchEvent({type:"hoveron",object:i}),t.style.cursor="pointer",No=i)}else No!==null&&(this.dispatchEvent({type:"hoveroff",object:No}),t.style.cursor="auto",No=null);l_.copy(Ra)}}function qge(n){const e=this.object,t=this.domElement,r=this.raycaster;this.enabled!==!1&&(this._updatePointer(n),this._updateState(n),Na.length=0,r.setFromCamera(Ra,e),r.intersectObjects(this.objects,this.recursive,Na),Na.length>0&&(this.transformGroup===!0?Si=dG(Na[0].object):Si=Na[0].object,Vd.setFromNormalAndCoplanarPoint(e.getWorldDirection(Vd.normal),eC.setFromMatrixPosition(Si.matrixWorld)),r.ray.intersectPlane(Vd,wx)&&(this.state===hc.PAN?(cG.copy(Si.parent.matrixWorld).invert(),lG.copy(wx).sub(eC.setFromMatrixPosition(Si.matrixWorld))):this.state===hc.ROTATE&&(uG.set(0,1,0).applyQuaternion(e.quaternion).normalize(),hG.set(1,0,0).applyQuaternion(e.quaternion).normalize())),t.style.cursor="move",this.dispatchEvent({type:"dragstart",object:Si})),l_.copy(Ra))}function Xge(){this.enabled!==!1&&(Si&&(this.dispatchEvent({type:"dragend",object:Si}),Si=null),this.domElement.style.cursor=No?"pointer":"auto",this.state=hc.NONE)}function Kge(n){this.enabled!==!1&&n.preventDefault()}function dG(n,e=null){return n.isGroup&&(e=n),n.parent===null?e:dG(n.parent,e)}function Yge(n,e,t){var r,i=1;n==null&&(n=0),e==null&&(e=0),t==null&&(t=0);function s(){var o,a=r.length,l,c=0,u=0,h=0;for(o=0;o<a;++o)l=r[o],c+=l.x||0,u+=l.y||0,h+=l.z||0;for(c=(c/a-n)*i,u=(u/a-e)*i,h=(h/a-t)*i,o=0;o<a;++o)l=r[o],c&&(l.x-=c),u&&(l.y-=u),h&&(l.z-=h)}return s.initialize=function(o){r=o},s.x=function(o){return arguments.length?(n=+o,s):n},s.y=function(o){return arguments.length?(e=+o,s):e},s.z=function(o){return arguments.length?(t=+o,s):t},s.strength=function(o){return arguments.length?(i=+o,s):i},s}function Qge(n){const e=+this._x.call(null,n);return fG(this.cover(e),e,n)}function fG(n,e,t){if(isNaN(e))return n;var r,i=n._root,s={data:t},o=n._x0,a=n._x1,l,c,u,h,d;if(!i)return n._root=s,n;for(;i.length;)if((u=e>=(l=(o+a)/2))?o=l:a=l,r=i,!(i=i[h=+u]))return r[h]=s,n;if(c=+n._x.call(null,i.data),e===c)return s.next=i,r?r[h]=s:n._root=s,n;do r=r?r[h]=new Array(2):n._root=new Array(2),(u=e>=(l=(o+a)/2))?o=l:a=l;while((h=+u)==(d=+(c>=l)));return r[d]=i,r[h]=s,n}function Zge(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e);let r=1/0,i=-1/0;for(let s=0,o;s<e;++s)isNaN(o=+this._x.call(null,n[s]))||(t[s]=o,o<r&&(r=o),o>i&&(i=o));if(r>i)return this;this.cover(r).cover(i);for(let s=0;s<e;++s)fG(this,t[s],n[s]);return this}function Jge(n){if(isNaN(n=+n))return this;var e=this._x0,t=this._x1;if(isNaN(e))t=(e=Math.floor(n))+1;else{for(var r=t-e||1,i=this._root,s,o;e>n||n>=t;)switch(o=+(n<e),s=new Array(2),s[o]=i,i=s,r*=2,o){case 0:t=e+r;break;case 1:e=t-r;break}this._root&&this._root.length&&(this._root=i)}return this._x0=e,this._x1=t,this}function eye(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function tye(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Wa(n,e,t){this.node=n,this.x0=e,this.x1=t}function nye(n,e){var t,r=this._x0,i,s,o=this._x1,a=[],l=this._root,c,u;for(l&&a.push(new Wa(l,r,o)),e==null?e=1/0:(r=n-e,o=n+e);c=a.pop();)if(!(!(l=c.node)||(i=c.x0)>o||(s=c.x1)<r))if(l.length){var h=(i+s)/2;a.push(new Wa(l[1],h,s),new Wa(l[0],i,h)),(u=+(n>=h))&&(c=a[a.length-1],a[a.length-1]=a[a.length-1-u],a[a.length-1-u]=c)}else{var d=Math.abs(n-+this._x.call(null,l.data));d<e&&(e=d,r=n-d,o=n+d,t=l.data)}return t}function rye(n){if(isNaN(l=+this._x.call(null,n)))return this;var e,t=this._root,r,i,s,o=this._x0,a=this._x1,l,c,u,h,d;if(!t)return this;if(t.length)for(;;){if((u=l>=(c=(o+a)/2))?o=c:a=c,e=t,!(t=t[h=+u]))return this;if(!t.length)break;e[h+1&1]&&(r=e,d=h)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):e?(s?e[h]=s:delete e[h],(t=e[0]||e[1])&&t===(e[1]||e[0])&&!t.length&&(r?r[d]=t:this._root=t),this):(this._root=s,this)}function iye(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function sye(){return this._root}function oye(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function aye(n){var e=[],t,r=this._root,i,s,o;for(r&&e.push(new Wa(r,this._x0,this._x1));t=e.pop();)if(!n(r=t.node,s=t.x0,o=t.x1)&&r.length){var a=(s+o)/2;(i=r[1])&&e.push(new Wa(i,a,o)),(i=r[0])&&e.push(new Wa(i,s,a))}return this}function lye(n){var e=[],t=[],r;for(this._root&&e.push(new Wa(this._root,this._x0,this._x1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.x1,l=(o+a)/2;(s=i[0])&&e.push(new Wa(s,o,l)),(s=i[1])&&e.push(new Wa(s,l,a))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.x1);return this}function cye(n){return n[0]}function uye(n){return arguments.length?(this._x=n,this):this._x}function pG(n,e){var t=new LP(e??cye,NaN,NaN);return n==null?t:t.addAll(n)}function LP(n,e,t){this._x=n,this._x0=e,this._x1=t,this._root=void 0}function bF(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var zi=pG.prototype=LP.prototype;zi.copy=function(){var n=new LP(this._x,this._x0,this._x1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=bF(e),n;for(t=[{source:e,target:n._root=new Array(2)}];e=t.pop();)for(var i=0;i<2;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(2)}):e.target[i]=bF(r));return n};zi.add=Qge;zi.addAll=Zge;zi.cover=Jge;zi.data=eye;zi.extent=tye;zi.find=nye;zi.remove=rye;zi.removeAll=iye;zi.root=sye;zi.size=oye;zi.visit=aye;zi.visitAfter=lye;zi.x=uye;function hye(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return mG(this.cover(e,t),e,t,n)}function mG(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var i,s=n._root,o={data:r},a=n._x0,l=n._y0,c=n._x1,u=n._y1,h,d,f,p,g,y,m,_;if(!s)return n._root=o,n;for(;s.length;)if((g=e>=(h=(a+c)/2))?a=h:c=h,(y=t>=(d=(l+u)/2))?l=d:u=d,i=s,!(s=s[m=y<<1|g]))return i[m]=o,n;if(f=+n._x.call(null,s.data),p=+n._y.call(null,s.data),e===f&&t===p)return o.next=s,i?i[m]=o:n._root=o,n;do i=i?i[m]=new Array(4):n._root=new Array(4),(g=e>=(h=(a+c)/2))?a=h:c=h,(y=t>=(d=(l+u)/2))?l=d:u=d;while((m=y<<1|g)===(_=(p>=d)<<1|f>=h));return i[_]=s,i[m]=o,n}function dye(n){var e,t,r=n.length,i,s,o=new Array(r),a=new Array(r),l=1/0,c=1/0,u=-1/0,h=-1/0;for(t=0;t<r;++t)isNaN(i=+this._x.call(null,e=n[t]))||isNaN(s=+this._y.call(null,e))||(o[t]=i,a[t]=s,i<l&&(l=i),i>u&&(u=i),s<c&&(c=s),s>h&&(h=s));if(l>u||c>h)return this;for(this.cover(l,c).cover(u,h),t=0;t<r;++t)mG(this,o[t],a[t],n[t]);return this}function fye(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(t))i=(t=Math.floor(n))+1,s=(r=Math.floor(e))+1;else{for(var o=i-t||1,a=this._root,l,c;t>n||n>=i||r>e||e>=s;)switch(c=(e<r)<<1|n<t,l=new Array(4),l[c]=a,a=l,o*=2,c){case 0:i=t+o,s=r+o;break;case 1:t=i-o,s=r+o;break;case 2:i=t+o,r=s-o;break;case 3:t=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._y0=r,this._x1=i,this._y1=s,this}function pye(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function mye(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ui(n,e,t,r,i){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=i}function gye(n,e,t){var r,i=this._x0,s=this._y0,o,a,l,c,u=this._x1,h=this._y1,d=[],f=this._root,p,g;for(f&&d.push(new ui(f,i,s,u,h)),t==null?t=1/0:(i=n-t,s=e-t,u=n+t,h=e+t,t*=t);p=d.pop();)if(!(!(f=p.node)||(o=p.x0)>u||(a=p.y0)>h||(l=p.x1)<i||(c=p.y1)<s))if(f.length){var y=(o+l)/2,m=(a+c)/2;d.push(new ui(f[3],y,m,l,c),new ui(f[2],o,m,y,c),new ui(f[1],y,a,l,m),new ui(f[0],o,a,y,m)),(g=(e>=m)<<1|n>=y)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var _=n-+this._x.call(null,f.data),v=e-+this._y.call(null,f.data),x=_*_+v*v;if(x<t){var b=Math.sqrt(t=x);i=n-b,s=e-b,u=n+b,h=e+b,r=f.data}}return r}function yye(n){if(isNaN(u=+this._x.call(null,n))||isNaN(h=+this._y.call(null,n)))return this;var e,t=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,c=this._y1,u,h,d,f,p,g,y,m;if(!t)return this;if(t.length)for(;;){if((p=u>=(d=(o+l)/2))?o=d:l=d,(g=h>=(f=(a+c)/2))?a=f:c=f,e=t,!(t=t[y=g<<1|p]))return this;if(!t.length)break;(e[y+1&3]||e[y+2&3]||e[y+3&3])&&(r=e,m=y)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):e?(s?e[y]=s:delete e[y],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[m]=t:this._root=t),this):(this._root=s,this)}function vye(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function _ye(){return this._root}function xye(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function Sye(n){var e=[],t,r=this._root,i,s,o,a,l;for(r&&e.push(new ui(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,s=t.x0,o=t.y0,a=t.x1,l=t.y1)&&r.length){var c=(s+a)/2,u=(o+l)/2;(i=r[3])&&e.push(new ui(i,c,u,a,l)),(i=r[2])&&e.push(new ui(i,s,u,c,l)),(i=r[1])&&e.push(new ui(i,c,o,a,u)),(i=r[0])&&e.push(new ui(i,s,o,c,u))}return this}function bye(n){var e=[],t=[],r;for(this._root&&e.push(new ui(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,c=r.y1,u=(o+l)/2,h=(a+c)/2;(s=i[0])&&e.push(new ui(s,o,a,u,h)),(s=i[1])&&e.push(new ui(s,u,a,l,h)),(s=i[2])&&e.push(new ui(s,o,h,u,c)),(s=i[3])&&e.push(new ui(s,u,h,l,c))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function wye(n){return n[0]}function Tye(n){return arguments.length?(this._x=n,this):this._x}function Mye(n){return n[1]}function Eye(n){return arguments.length?(this._y=n,this):this._y}function gG(n,e,t){var r=new DP(e??wye,t??Mye,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function DP(n,e,t,r,i,s){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function wF(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var yi=gG.prototype=DP.prototype;yi.copy=function(){var n=new DP(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=wF(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=wF(r));return n};yi.add=hye;yi.addAll=dye;yi.cover=fye;yi.data=pye;yi.extent=mye;yi.find=gye;yi.remove=yye;yi.removeAll=vye;yi.root=_ye;yi.size=xye;yi.visit=Sye;yi.visitAfter=bye;yi.x=Tye;yi.y=Eye;function Aye(n){const e=+this._x.call(null,n),t=+this._y.call(null,n),r=+this._z.call(null,n);return yG(this.cover(e,t,r),e,t,r,n)}function yG(n,e,t,r,i){if(isNaN(e)||isNaN(t)||isNaN(r))return n;var s,o=n._root,a={data:i},l=n._x0,c=n._y0,u=n._z0,h=n._x1,d=n._y1,f=n._z1,p,g,y,m,_,v,x,b,T,w,M;if(!o)return n._root=a,n;for(;o.length;)if((x=e>=(p=(l+h)/2))?l=p:h=p,(b=t>=(g=(c+d)/2))?c=g:d=g,(T=r>=(y=(u+f)/2))?u=y:f=y,s=o,!(o=o[w=T<<2|b<<1|x]))return s[w]=a,n;if(m=+n._x.call(null,o.data),_=+n._y.call(null,o.data),v=+n._z.call(null,o.data),e===m&&t===_&&r===v)return a.next=o,s?s[w]=a:n._root=a,n;do s=s?s[w]=new Array(8):n._root=new Array(8),(x=e>=(p=(l+h)/2))?l=p:h=p,(b=t>=(g=(c+d)/2))?c=g:d=g,(T=r>=(y=(u+f)/2))?u=y:f=y;while((w=T<<2|b<<1|x)===(M=(v>=y)<<2|(_>=g)<<1|m>=p));return s[M]=o,s[w]=a,n}function Cye(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,t=new Float64Array(e),r=new Float64Array(e),i=new Float64Array(e);let s=1/0,o=1/0,a=1/0,l=-1/0,c=-1/0,u=-1/0;for(let h=0,d,f,p,g;h<e;++h)isNaN(f=+this._x.call(null,d=n[h]))||isNaN(p=+this._y.call(null,d))||isNaN(g=+this._z.call(null,d))||(t[h]=f,r[h]=p,i[h]=g,f<s&&(s=f),f>l&&(l=f),p<o&&(o=p),p>c&&(c=p),g<a&&(a=g),g>u&&(u=g));if(s>l||o>c||a>u)return this;this.cover(s,o,a).cover(l,c,u);for(let h=0;h<e;++h)yG(this,t[h],r[h],i[h],n[h]);return this}function Rye(n,e,t){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,i=this._y0,s=this._z0,o=this._x1,a=this._y1,l=this._z1;if(isNaN(r))o=(r=Math.floor(n))+1,a=(i=Math.floor(e))+1,l=(s=Math.floor(t))+1;else{for(var c=o-r||1,u=this._root,h,d;r>n||n>=o||i>e||e>=a||s>t||t>=l;)switch(d=(t<s)<<2|(e<i)<<1|n<r,h=new Array(8),h[d]=u,u=h,c*=2,d){case 0:o=r+c,a=i+c,l=s+c;break;case 1:r=o-c,a=i+c,l=s+c;break;case 2:o=r+c,i=a-c,l=s+c;break;case 3:r=o-c,i=a-c,l=s+c;break;case 4:o=r+c,a=i+c,s=l-c;break;case 5:r=o-c,a=i+c,s=l-c;break;case 6:o=r+c,i=a-c,s=l-c;break;case 7:r=o-c,i=a-c,s=l-c;break}this._root&&this._root.length&&(this._root=u)}return this._x0=r,this._y0=i,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this}function Nye(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Pye(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function yn(n,e,t,r,i,s,o){this.node=n,this.x0=e,this.y0=t,this.z0=r,this.x1=i,this.y1=s,this.z1=o}function Iye(n,e,t,r){var i,s=this._x0,o=this._y0,a=this._z0,l,c,u,h,d,f,p=this._x1,g=this._y1,y=this._z1,m=[],_=this._root,v,x;for(_&&m.push(new yn(_,s,o,a,p,g,y)),r==null?r=1/0:(s=n-r,o=e-r,a=t-r,p=n+r,g=e+r,y=t+r,r*=r);v=m.pop();)if(!(!(_=v.node)||(l=v.x0)>p||(c=v.y0)>g||(u=v.z0)>y||(h=v.x1)<s||(d=v.y1)<o||(f=v.z1)<a))if(_.length){var b=(l+h)/2,T=(c+d)/2,w=(u+f)/2;m.push(new yn(_[7],b,T,w,h,d,f),new yn(_[6],l,T,w,b,d,f),new yn(_[5],b,c,w,h,T,f),new yn(_[4],l,c,w,b,T,f),new yn(_[3],b,T,u,h,d,w),new yn(_[2],l,T,u,b,d,w),new yn(_[1],b,c,u,h,T,w),new yn(_[0],l,c,u,b,T,w)),(x=(t>=w)<<2|(e>=T)<<1|n>=b)&&(v=m[m.length-1],m[m.length-1]=m[m.length-1-x],m[m.length-1-x]=v)}else{var M=n-+this._x.call(null,_.data),C=e-+this._y.call(null,_.data),S=t-+this._z.call(null,_.data),E=M*M+C*C+S*S;if(E<r){var I=Math.sqrt(r=E);s=n-I,o=e-I,a=t-I,p=n+I,g=e+I,y=t+I,i=_.data}}return i}function Lye(n){if(isNaN(d=+this._x.call(null,n))||isNaN(f=+this._y.call(null,n))||isNaN(p=+this._z.call(null,n)))return this;var e,t=this._root,r,i,s,o=this._x0,a=this._y0,l=this._z0,c=this._x1,u=this._y1,h=this._z1,d,f,p,g,y,m,_,v,x,b,T;if(!t)return this;if(t.length)for(;;){if((_=d>=(g=(o+c)/2))?o=g:c=g,(v=f>=(y=(a+u)/2))?a=y:u=y,(x=p>=(m=(l+h)/2))?l=m:h=m,e=t,!(t=t[b=x<<2|v<<1|_]))return this;if(!t.length)break;(e[b+1&7]||e[b+2&7]||e[b+3&7]||e[b+4&7]||e[b+5&7]||e[b+6&7]||e[b+7&7])&&(r=e,T=b)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,i?(s?i.next=s:delete i.next,this):e?(s?e[b]=s:delete e[b],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[T]=t:this._root=t),this):(this._root=s,this)}function Dye(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function Oye(){return this._root}function Fye(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function kye(n){var e=[],t,r=this._root,i,s,o,a,l,c,u;for(r&&e.push(new yn(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!n(r=t.node,s=t.x0,o=t.y0,a=t.z0,l=t.x1,c=t.y1,u=t.z1)&&r.length){var h=(s+l)/2,d=(o+c)/2,f=(a+u)/2;(i=r[7])&&e.push(new yn(i,h,d,f,l,c,u)),(i=r[6])&&e.push(new yn(i,s,d,f,h,c,u)),(i=r[5])&&e.push(new yn(i,h,o,f,l,d,u)),(i=r[4])&&e.push(new yn(i,s,o,f,h,d,u)),(i=r[3])&&e.push(new yn(i,h,d,a,l,c,f)),(i=r[2])&&e.push(new yn(i,s,d,a,h,c,f)),(i=r[1])&&e.push(new yn(i,h,o,a,l,d,f)),(i=r[0])&&e.push(new yn(i,s,o,a,h,d,f))}return this}function Uye(n){var e=[],t=[],r;for(this._root&&e.push(new yn(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.z0,c=r.x1,u=r.y1,h=r.z1,d=(o+c)/2,f=(a+u)/2,p=(l+h)/2;(s=i[0])&&e.push(new yn(s,o,a,l,d,f,p)),(s=i[1])&&e.push(new yn(s,d,a,l,c,f,p)),(s=i[2])&&e.push(new yn(s,o,f,l,d,u,p)),(s=i[3])&&e.push(new yn(s,d,f,l,c,u,p)),(s=i[4])&&e.push(new yn(s,o,a,p,d,f,h)),(s=i[5])&&e.push(new yn(s,d,a,p,c,f,h)),(s=i[6])&&e.push(new yn(s,o,f,p,d,u,h)),(s=i[7])&&e.push(new yn(s,d,f,p,c,u,h))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function Bye(n){return n[0]}function zye(n){return arguments.length?(this._x=n,this):this._x}function $ye(n){return n[1]}function Vye(n){return arguments.length?(this._y=n,this):this._y}function Gye(n){return n[2]}function Hye(n){return arguments.length?(this._z=n,this):this._z}function vG(n,e,t,r){var i=new OP(e??Bye,t??$ye,r??Gye,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function OP(n,e,t,r,i,s,o,a,l){this._x=n,this._y=e,this._z=t,this._x0=r,this._y0=i,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this._root=void 0}function TF(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var ni=vG.prototype=OP.prototype;ni.copy=function(){var n=new OP(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=TF(e),n;for(t=[{source:e,target:n._root=new Array(8)}];e=t.pop();)for(var i=0;i<8;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(8)}):e.target[i]=TF(r));return n};ni.add=Aye;ni.addAll=Cye;ni.cover=Rye;ni.data=Nye;ni.extent=Pye;ni.find=Iye;ni.remove=Lye;ni.removeAll=Dye;ni.root=Oye;ni.size=Fye;ni.visit=kye;ni.visitAfter=Uye;ni.x=zye;ni.y=Vye;ni.z=Hye;function Ba(n){return function(){return n}}function Ta(n){return(n()-.5)*1e-6}function Wye(n){return n.index}function MF(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function jye(n){var e=Wye,t=d,r,i=Ba(30),s,o,a,l,c,u,h=1;n==null&&(n=[]);function d(m){return 1/Math.min(l[m.source.index],l[m.target.index])}function f(m){for(var _=0,v=n.length;_<h;++_)for(var x=0,b,T,w,M=0,C=0,S=0,E,I;x<v;++x)b=n[x],T=b.source,w=b.target,M=w.x+w.vx-T.x-T.vx||Ta(u),a>1&&(C=w.y+w.vy-T.y-T.vy||Ta(u)),a>2&&(S=w.z+w.vz-T.z-T.vz||Ta(u)),E=Math.sqrt(M*M+C*C+S*S),E=(E-s[x])/E*m*r[x],M*=E,C*=E,S*=E,w.vx-=M*(I=c[x]),a>1&&(w.vy-=C*I),a>2&&(w.vz-=S*I),T.vx+=M*(I=1-I),a>1&&(T.vy+=C*I),a>2&&(T.vz+=S*I)}function p(){if(o){var m,_=o.length,v=n.length,x=new Map(o.map((T,w)=>[e(T,w,o),T])),b;for(m=0,l=new Array(_);m<v;++m)b=n[m],b.index=m,typeof b.source!="object"&&(b.source=MF(x,b.source)),typeof b.target!="object"&&(b.target=MF(x,b.target)),l[b.source.index]=(l[b.source.index]||0)+1,l[b.target.index]=(l[b.target.index]||0)+1;for(m=0,c=new Array(v);m<v;++m)b=n[m],c[m]=l[b.source.index]/(l[b.source.index]+l[b.target.index]);r=new Array(v),g(),s=new Array(v),y()}}function g(){if(o)for(var m=0,_=n.length;m<_;++m)r[m]=+t(n[m],m,n)}function y(){if(o)for(var m=0,_=n.length;m<_;++m)s[m]=+i(n[m],m,n)}return f.initialize=function(m,..._){o=m,u=_.find(v=>typeof v=="function")||Math.random,a=_.find(v=>[1,2,3].includes(v))||2,p()},f.links=function(m){return arguments.length?(n=m,p(),f):n},f.id=function(m){return arguments.length?(e=m,f):e},f.iterations=function(m){return arguments.length?(h=+m,f):h},f.strength=function(m){return arguments.length?(t=typeof m=="function"?m:Ba(+m),g(),f):t},f.distance=function(m){return arguments.length?(i=typeof m=="function"?m:Ba(+m),y(),f):i},f}var qye={value:()=>{}};function _G(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new c_(t)}function c_(n){this._=n}function Xye(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}c_.prototype=_G.prototype={constructor:c_,on:function(n,e){var t=this._,r=Xye(n+"",t),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(n=r[s]).type)&&(i=Kye(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(n=r[s]).type)t[i]=EF(t[i],n.name,e);else if(e==null)for(i in t)t[i]=EF(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new c_(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,s;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],r=0,i=s.length;r<i;++r)s[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,s=r.length;i<s;++i)r[i].value.apply(e,t)}};function Kye(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function EF(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=qye,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var Ff=0,bm=0,Gp=0,xG=1e3,Tx,wm,Mx=0,Vu=0,$b=0,Dg=typeof performance=="object"&&performance.now?performance:Date,SG=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function bG(){return Vu||(SG(Yye),Vu=Dg.now()+$b)}function Yye(){Vu=0}function tC(){this._call=this._time=this._next=null}tC.prototype=wG.prototype={constructor:tC,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?bG():+t)+(e==null?0:+e),!this._next&&wm!==this&&(wm?wm._next=this:Tx=this,wm=this),this._call=n,this._time=t,nC()},stop:function(){this._call&&(this._call=null,this._time=1/0,nC())}};function wG(n,e,t){var r=new tC;return r.restart(n,e,t),r}function Qye(){bG(),++Ff;for(var n=Tx,e;n;)(e=Vu-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Ff}function AF(){Vu=(Mx=Dg.now())+$b,Ff=bm=0;try{Qye()}finally{Ff=0,Jye(),Vu=0}}function Zye(){var n=Dg.now(),e=n-Mx;e>xG&&($b-=e,Mx=n)}function Jye(){for(var n,e=Tx,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:Tx=t);wm=n,nC(r)}function nC(n){if(!Ff){bm&&(bm=clearTimeout(bm));var e=n-Vu;e>24?(n<1/0&&(bm=setTimeout(AF,n-Dg.now()-$b)),Gp&&(Gp=clearInterval(Gp))):(Gp||(Mx=Dg.now(),Gp=setInterval(Zye,xG)),Ff=1,SG(AF))}}const e0e=1664525,t0e=1013904223,CF=4294967296;function n0e(){let n=1;return()=>(n=(e0e*n+t0e)%CF)/CF}var RF=3;function Zw(n){return n.x}function NF(n){return n.y}function r0e(n){return n.z}var i0e=10,s0e=Math.PI*(3-Math.sqrt(5)),o0e=Math.PI*20/(9+Math.sqrt(221));function a0e(n,e){e=e||2;var t=Math.min(RF,Math.max(1,Math.round(e))),r,i=1,s=.001,o=1-Math.pow(s,1/300),a=0,l=.6,c=new Map,u=wG(f),h=_G("tick","end"),d=n0e();n==null&&(n=[]);function f(){p(),h.call("tick",r),i<s&&(u.stop(),h.call("end",r))}function p(m){var _,v=n.length,x;m===void 0&&(m=1);for(var b=0;b<m;++b)for(i+=(a-i)*o,c.forEach(function(T){T(i)}),_=0;_<v;++_)x=n[_],x.fx==null?x.x+=x.vx*=l:(x.x=x.fx,x.vx=0),t>1&&(x.fy==null?x.y+=x.vy*=l:(x.y=x.fy,x.vy=0)),t>2&&(x.fz==null?x.z+=x.vz*=l:(x.z=x.fz,x.vz=0));return r}function g(){for(var m=0,_=n.length,v;m<_;++m){if(v=n[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),v.fz!=null&&(v.z=v.fz),isNaN(v.x)||t>1&&isNaN(v.y)||t>2&&isNaN(v.z)){var x=i0e*(t>2?Math.cbrt(.5+m):t>1?Math.sqrt(.5+m):m),b=m*s0e,T=m*o0e;t===1?v.x=x:t===2?(v.x=x*Math.cos(b),v.y=x*Math.sin(b)):(v.x=x*Math.sin(b)*Math.cos(T),v.y=x*Math.cos(b),v.z=x*Math.sin(b)*Math.sin(T))}(isNaN(v.vx)||t>1&&isNaN(v.vy)||t>2&&isNaN(v.vz))&&(v.vx=0,t>1&&(v.vy=0),t>2&&(v.vz=0))}}function y(m){return m.initialize&&m.initialize(n,d,t),m}return g(),r={tick:p,restart:function(){return u.restart(f),r},stop:function(){return u.stop(),r},numDimensions:function(m){return arguments.length?(t=Math.min(RF,Math.max(1,Math.round(m))),c.forEach(y),r):t},nodes:function(m){return arguments.length?(n=m,g(),c.forEach(y),r):n},alpha:function(m){return arguments.length?(i=+m,r):i},alphaMin:function(m){return arguments.length?(s=+m,r):s},alphaDecay:function(m){return arguments.length?(o=+m,r):+o},alphaTarget:function(m){return arguments.length?(a=+m,r):a},velocityDecay:function(m){return arguments.length?(l=1-m,r):1-l},randomSource:function(m){return arguments.length?(d=m,c.forEach(y),r):d},force:function(m,_){return arguments.length>1?(_==null?c.delete(m):c.set(m,y(_)),r):c.get(m)},find:function(){var m=Array.prototype.slice.call(arguments),_=m.shift()||0,v=(t>1?m.shift():null)||0,x=(t>2?m.shift():null)||0,b=m.shift()||1/0,T=0,w=n.length,M,C,S,E,I,F;for(b*=b,T=0;T<w;++T)I=n[T],M=_-I.x,C=v-(I.y||0),S=x-(I.z||0),E=M*M+C*C+S*S,E<b&&(F=I,b=E);return F},on:function(m,_){return arguments.length>1?(h.on(m,_),r):h.on(m)}}}function l0e(){var n,e,t,r,i,s=Ba(-30),o,a=1,l=1/0,c=.81;function u(p){var g,y=n.length,m=(e===1?pG(n,Zw):e===2?gG(n,Zw,NF):e===3?vG(n,Zw,NF,r0e):null).visitAfter(d);for(i=p,g=0;g<y;++g)t=n[g],m.visit(f)}function h(){if(n){var p,g=n.length,y;for(o=new Array(g),p=0;p<g;++p)y=n[p],o[y.index]=+s(y,p,n)}}function d(p){var g=0,y,m,_=0,v,x,b,T,w=p.length;if(w){for(v=x=b=T=0;T<w;++T)(y=p[T])&&(m=Math.abs(y.value))&&(g+=y.value,_+=m,v+=m*(y.x||0),x+=m*(y.y||0),b+=m*(y.z||0));g*=Math.sqrt(4/w),p.x=v/_,e>1&&(p.y=x/_),e>2&&(p.z=b/_)}else{y=p,y.x=y.data.x,e>1&&(y.y=y.data.y),e>2&&(y.z=y.data.z);do g+=o[y.data.index];while(y=y.next)}p.value=g}function f(p,g,y,m,_){if(!p.value)return!0;var v=[y,m,_][e-1],x=p.x-t.x,b=e>1?p.y-t.y:0,T=e>2?p.z-t.z:0,w=v-g,M=x*x+b*b+T*T;if(w*w/c<M)return M<l&&(x===0&&(x=Ta(r),M+=x*x),e>1&&b===0&&(b=Ta(r),M+=b*b),e>2&&T===0&&(T=Ta(r),M+=T*T),M<a&&(M=Math.sqrt(a*M)),t.vx+=x*p.value*i/M,e>1&&(t.vy+=b*p.value*i/M),e>2&&(t.vz+=T*p.value*i/M)),!0;if(p.length||M>=l)return;(p.data!==t||p.next)&&(x===0&&(x=Ta(r),M+=x*x),e>1&&b===0&&(b=Ta(r),M+=b*b),e>2&&T===0&&(T=Ta(r),M+=T*T),M<a&&(M=Math.sqrt(a*M)));do p.data!==t&&(w=o[p.data.index]*i/M,t.vx+=x*w,e>1&&(t.vy+=b*w),e>2&&(t.vz+=T*w));while(p=p.next)}return u.initialize=function(p,...g){n=p,r=g.find(y=>typeof y=="function")||Math.random,e=g.find(y=>[1,2,3].includes(y))||2,h()},u.strength=function(p){return arguments.length?(s=typeof p=="function"?p:Ba(+p),h(),u):s},u.distanceMin=function(p){return arguments.length?(a=p*p,u):Math.sqrt(a)},u.distanceMax=function(p){return arguments.length?(l=p*p,u):Math.sqrt(l)},u.theta=function(p){return arguments.length?(c=p*p,u):Math.sqrt(c)},u}function c0e(n,e,t,r){var i,s,o=Ba(.1),a,l;typeof n!="function"&&(n=Ba(+n)),e==null&&(e=0),t==null&&(t=0),r==null&&(r=0);function c(h){for(var d=0,f=i.length;d<f;++d){var p=i[d],g=p.x-e||1e-6,y=(p.y||0)-t||1e-6,m=(p.z||0)-r||1e-6,_=Math.sqrt(g*g+y*y+m*m),v=(l[d]-_)*a[d]*h/_;p.vx+=g*v,s>1&&(p.vy+=y*v),s>2&&(p.vz+=m*v)}}function u(){if(i){var h,d=i.length;for(a=new Array(d),l=new Array(d),h=0;h<d;++h)l[h]=+n(i[h],h,i),a[h]=isNaN(l[h])?0:+o(i[h],h,i)}}return c.initialize=function(h,...d){i=h,s=d.find(f=>[1,2,3].includes(f))||2,u()},c.strength=function(h){return arguments.length?(o=typeof h=="function"?h:Ba(+h),u(),c):o},c.radius=function(h){return arguments.length?(n=typeof h=="function"?h:Ba(+h),u(),c):n},c.x=function(h){return arguments.length?(e=+h,c):e},c.y=function(h){return arguments.length?(t=+h,c):t},c.z=function(h){return arguments.length?(r=+h,c):r},c}var FP=function(e){h0e(e);var t=u0e(e);return e.on=t.on,e.off=t.off,e.fire=t.fire,e};function u0e(n){var e=Object.create(null);return{on:function(t,r,i){if(typeof r!="function")throw new Error("callback is expected to be a function");var s=e[t];return s||(s=e[t]=[]),s.push({callback:r,ctx:i}),n},off:function(t,r){var i=typeof t>"u";if(i)return e=Object.create(null),n;if(e[t]){var s=typeof r!="function";if(s)delete e[t];else for(var o=e[t],a=0;a<o.length;++a)o[a].callback===r&&o.splice(a,1)}return n},fire:function(t){var r=e[t];if(!r)return n;var i;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var s=0;s<r.length;++s){var o=r[s];o.callback.apply(o.ctx,i)}return n}}}function h0e(n){if(!n)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],t=0;t<e.length;++t)if(n.hasOwnProperty(e[t]))throw new Error("Subject cannot be eventified, since it already has property '"+e[t]+"'")}var d0e=p0e,f0e=FP;function p0e(n){if(n=n||{},"uniqueLinkId"in n&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),n.multigraph=n.uniqueLinkId),n.multigraph===void 0&&(n.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,t=new Map,r={},i=0,s=n.multigraph?x:v,o=[],a=D,l=D,c=D,u=D,h={version:20,addNode:g,addLink:_,removeLink:M,removeNode:m,getNode:y,getNodeCount:b,getLinkCount:T,getEdgeCount:T,getLinksCount:T,getNodesCount:b,getLinks:w,forEachNode:W,forEachLinkedNode:F,forEachLink:I,beginUpdate:c,endUpdate:u,clear:E,hasLink:S,hasNode:y,getLink:S};return f0e(h),d(),h;function d(){var z=h.on;h.on=X;function X(){return h.beginUpdate=c=j,h.endUpdate=u=L,a=f,l=p,h.on=z,z.apply(h,arguments)}}function f(z,X){o.push({link:z,changeType:X})}function p(z,X){o.push({node:z,changeType:X})}function g(z,X){if(z===void 0)throw new Error("Invalid node identifier");c();var U=y(z);return U?(U.data=X,l(U,"update")):(U=new m0e(z,X),l(U,"add")),e.set(z,U),u(),U}function y(z){return e.get(z)}function m(z){var X=y(z);if(!X)return!1;c();var U=X.links;return U&&(U.forEach(C),X.links=null),e.delete(z),l(X,"remove"),u(),!0}function _(z,X,U){c();var te=y(z)||g(z),k=y(X)||g(X),V=s(z,X,U),Z=t.has(V.id);return t.set(V.id,V),PF(te,V),z!==X&&PF(k,V),a(V,Z?"update":"add"),u(),V}function v(z,X,U){var te=$0(z,X),k=t.get(te);return k?(k.data=U,k):new IF(z,X,U,te)}function x(z,X,U){var te=$0(z,X),k=r.hasOwnProperty(te);if(k||S(z,X)){k||(r[te]=0);var V="@"+ ++r[te];te=$0(z+V,X+V)}return new IF(z,X,U,te)}function b(){return e.size}function T(){return t.size}function w(z){var X=y(z);return X?X.links:null}function M(z,X){return X!==void 0&&(z=S(z,X)),C(z)}function C(z){if(!z||!t.get(z.id))return!1;c(),t.delete(z.id);var X=y(z.fromId),U=y(z.toId);return X&&X.links.delete(z),U&&U.links.delete(z),a(z,"remove"),u(),!0}function S(z,X){if(!(z===void 0||X===void 0))return t.get($0(z,X))}function E(){c(),W(function(z){m(z.id)}),u()}function I(z){if(typeof z=="function")for(var X=t.values(),U=X.next();!U.done;){if(z(U.value))return!0;U=X.next()}}function F(z,X,U){var te=y(z);if(te&&te.links&&typeof X=="function")return U?R(te.links,z,X):N(te.links,z,X)}function N(z,X,U){for(var te,k=z.values(),V=k.next();!V.done;){var Z=V.value,le=Z.fromId===X?Z.toId:Z.fromId;if(te=U(e.get(le),Z),te)return!0;V=k.next()}}function R(z,X,U){for(var te,k=z.values(),V=k.next();!V.done;){var Z=V.value;if(Z.fromId===X&&(te=U(e.get(Z.toId),Z),te))return!0;V=k.next()}}function D(){}function j(){i+=1}function L(){i-=1,i===0&&o.length>0&&(h.fire("changed",o),o.length=0)}function W(z){if(typeof z!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+z);for(var X=e.values(),U=X.next();!U.done;){if(z(U.value))return!0;U=X.next()}}}function m0e(n,e){this.id=n,this.links=null,this.data=e}function PF(n,e){n.links?n.links.add(e):n.links=new Set([e])}function IF(n,e,t,r){this.fromId=n,this.toId=e,this.data=t,this.id=r}function $0(n,e){return n.toString()+" "+e.toString()}const g0e=Gf(d0e);var kP={exports:{}},xy={exports:{}},TG=function(e){return e===0?"x":e===1?"y":e===2?"z":"c"+(e+1)};const y0e=TG;var ip=function(e){return t;function t(r,i){let s=i&&i.indent||0,o=i&&i.join!==void 0?i.join:`
`,a=Array(s+1).join(" "),l=[];for(let c=0;c<e;++c){let u=y0e(c),h=c===0?"":a;l.push(h+r.replace(/{var}/g,u))}return l.join(o)}};const MG=ip;xy.exports=v0e;xy.exports.generateCreateBodyFunctionBody=EG;xy.exports.getVectorCode=CG;xy.exports.getBodyCode=AG;function v0e(n,e){let t=EG(n,e),{Body:r}=new Function(t)();return r}function EG(n,e){return`
${CG(n,e)}
${AG(n)}
return {Body: Body, Vector: Vector};
`}function AG(n){let e=MG(n),t=e("{var}",{join:", "});return`
function Body(${t}) {
  this.isPinned = false;
  this.pos = new Vector(${t});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${t}) {
  ${e("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function CG(n,e){let t=MG(n),r="";return e&&(r=`${t(`
   var v{var};
Object.defineProperty(this, '{var}', {
  set: function(v) { 
    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
    v{var} = v; 
  },
  get: function() { return v{var}; }
});`)}`),`function Vector(${t("{var}",{join:", "})}) {
  ${r}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${t('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${t("this.{var} = v.{var};",{indent:4})}
    } else {
      ${t('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${t("this.{var} = ",{join:""})}0;
  };`}var _0e=xy.exports,Ic={exports:{}};const UP=ip,Ml=TG;Ic.exports=x0e;Ic.exports.generateQuadTreeFunctionBody=RG;Ic.exports.getInsertStackCode=DG;Ic.exports.getQuadNodeCode=LG;Ic.exports.isSamePosition=NG;Ic.exports.getChildBodyCode=IG;Ic.exports.setChildBodyCode=PG;function x0e(n){let e=RG(n);return new Function(e)()}function RG(n){let e=UP(n),t=Math.pow(2,n);return`
${DG()}
${LG(n)}
${NG(n)}
${IG(n)}
${PG(n)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${o("      node.")}
      node.body = null;
      node.mass = ${e("node.mass_{var} = ",{join:""})}0;
      ${e("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${e("var d{var};",{indent:4})}
    var r; 
    ${e("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${e("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${e("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${e("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < , treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${Ml(0)} - node.min_${Ml(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${e("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${s()}
        }
      }
    }

    ${e("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${e("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${e("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${e("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${e("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${e("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${e("root.min_{var} = {var}min;",{indent:4})}
    ${e("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${e("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${e("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${e("var min_{var} = node.min_{var};",{indent:8})}
        ${e("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${i(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${e("child.min_{var} = min_{var};",{indent:10})}
          ${e("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${e("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${e("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function i(a){let l=[],c=Array(a+1).join(" ");for(let u=0;u<n;++u)l.push(c+`if (${Ml(u)} > max_${Ml(u)}) {`),l.push(c+`  quadIdx = quadIdx + ${Math.pow(2,u)};`),l.push(c+`  min_${Ml(u)} = max_${Ml(u)};`),l.push(c+`  max_${Ml(u)} = node.max_${Ml(u)};`),l.push(c+"}");return l.join(`
`)}function s(){let a=Array(11).join(" "),l=[];for(let c=0;c<t;++c)l.push(a+`if (node.quad${c}) {`),l.push(a+`  queue[pushIdx] = node.quad${c};`),l.push(a+"  queueLength += 1;"),l.push(a+"  pushIdx += 1;"),l.push(a+"}");return l.join(`
`)}function o(a){let l=[];for(let c=0;c<t;++c)l.push(`${a}quad${c} = null;`);return l.join(`
`)}}function NG(n){let e=UP(n);return`
  function isSamePosition(point1, point2) {
    ${e("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${e("d{var} < 1e-8",{join:" && "})};
  }  
`}function PG(n){var e=Math.pow(2,n);return`
function setChild(node, idx, child) {
  ${t()}
}`;function t(){let r=[];for(let i=0;i<e;++i){let s=i===0?"  ":"  else ";r.push(`${s}if (idx === ${i}) node.quad${i} = child;`)}return r.join(`
`)}}function IG(n){return`function getChild(node, idx) {
${e()}
  return null;
}`;function e(){let t=[],r=Math.pow(2,n);for(let i=0;i<r;++i)t.push(`  if (idx === ${i}) return node.quad${i};`);return t.join(`
`)}}function LG(n){let e=UP(n),t=Math.pow(2,n);var r=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${i("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${e("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${e("this.min_{var} = 0;",{indent:2})}
  ${e("this.max_{var} = 0;",{indent:2})}
}
`;return r;function i(s){let o=[];for(let a=0;a<t;++a)o.push(`${s}quad${a} = null;`);return o.join(`
`)}}function DG(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}var S0e=Ic.exports,BP={exports:{}};BP.exports=w0e;BP.exports.generateFunctionBody=OG;const b0e=ip;function w0e(n){let e=OG(n);return new Function("bodies","settings","random",e)}function OG(n){let e=b0e(n);return`
  var boundingBox = {
    ${e("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${e("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${e("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${e("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${e("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${e("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${e("var max_{var} = -Infinity;",{indent:4})}
    ${e("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${e("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${e("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${e("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${e("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${e("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}var T0e=BP.exports,zP={exports:{}};const M0e=ip;zP.exports=E0e;zP.exports.generateCreateDragForceFunctionBody=FG;function E0e(n){let e=FG(n);return new Function("options",e)}function FG(n){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${M0e(n)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}var A0e=zP.exports,$P={exports:{}};const C0e=ip;$P.exports=R0e;$P.exports.generateCreateSpringForceFunctionBody=kG;function R0e(n){let e=kG(n);return new Function("options","random",e)}function kG(n){let e=C0e(n);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${e("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${e("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${e("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}var N0e=$P.exports,VP={exports:{}};const P0e=ip;VP.exports=I0e;VP.exports.generateIntegratorFunctionBody=UG;function I0e(n){let e=UG(n);return new Function("bodies","timeStep","adaptiveTimeStepWeight",e)}function UG(n){let e=P0e(n);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${e("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${e("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${e("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${e("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${e("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${e("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${e("body.pos.{var} += d{var};",{indent:4})}

    ${e("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${e("t{var} * t{var}",{join:" + "})})/length;
`}var L0e=VP.exports,Jw,LF;function D0e(){if(LF)return Jw;LF=1,Jw=n;function n(e,t,r,i){this.from=e,this.to=t,this.length=r,this.coefficient=i}return Jw}var eT,DF;function O0e(){if(DF)return eT;DF=1,eT=n;function n(e,t){var r;if(e||(e={}),t){for(r in t)if(t.hasOwnProperty(r)){var i=e.hasOwnProperty(r),s=typeof t[r],o=!i||typeof e[r]!==s;o?e[r]=t[r]:s==="object"&&(e[r]=n(e[r],t[r]))}}return e}return eT}var Hp={exports:{}},OF;function F0e(){if(OF)return Hp.exports;OF=1,Hp.exports=n,Hp.exports.random=n,Hp.exports.randomIterator=a;function n(l){var c=typeof l=="number"?l:+new Date;return new e(c)}function e(l){this.seed=l}e.prototype.next=o,e.prototype.nextDouble=s,e.prototype.uniform=s,e.prototype.gaussian=t;function t(){var l,c,u;do c=this.nextDouble()*2-1,u=this.nextDouble()*2-1,l=c*c+u*u;while(l>=1||l===0);return c*Math.sqrt(-2*Math.log(l)/l)}e.prototype.levy=r;function r(){var l=1.5,c=Math.pow(i(1+l)*Math.sin(Math.PI*l/2)/(i((1+l)/2)*l*Math.pow(2,(l-1)/2)),1/l);return this.gaussian()*c/Math.pow(Math.abs(this.gaussian()),1/l)}function i(l){return Math.sqrt(2*Math.PI/l)*Math.pow(1/Math.E*(l+1/(12*l-1/(10*l))),l)}function s(){var l=this.seed;return l=l+2127912214+(l<<12)&4294967295,l=(l^3345072700^l>>>19)&4294967295,l=l+374761393+(l<<5)&4294967295,l=(l+3550635116^l<<9)&4294967295,l=l+4251993797+(l<<3)&4294967295,l=(l^3042594569^l>>>16)&4294967295,this.seed=l,(l&268435455)/268435456}function o(l){return Math.floor(this.nextDouble()*l)}function a(l,c){var u=c||n();if(typeof u.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:d,shuffle:h};function h(){var f,p,g;for(f=l.length-1;f>0;--f)p=u.next(f+1),g=l[p],l[p]=l[f],l[f]=g;return l}function d(f){var p,g,y;for(p=l.length-1;p>0;--p)g=u.next(p+1),y=l[g],l[g]=l[p],l[p]=y,f(y);l.length&&f(l[0])}}return Hp.exports}var BG=G0e,k0e=_0e,U0e=S0e,B0e=T0e,z0e=A0e,$0e=N0e,V0e=L0e,FF={};function G0e(n){var e=D0e(),t=O0e(),r=FP;if(n){if(n.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(n.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}n=t(n,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var i=FF[n.dimensions];if(!i){var s=n.dimensions;i={Body:k0e(s,n.debug),createQuadTree:U0e(s),createBounds:B0e(s),createDragForce:z0e(s),createSpringForce:$0e(s),integrate:V0e(s)},FF[s]=i}var o=i.Body,a=i.createQuadTree,l=i.createBounds,c=i.createDragForce,u=i.createSpringForce,h=i.integrate,d=R=>new o(R),f=F0e().random(42),p=[],g=[],y=a(n,f),m=l(p,n,f),_=u(n,f),v=c(n),x=0,b=[],T=new Map,w=0;S("nbody",F),S("spring",N);var M={bodies:p,quadTree:y,springs:g,settings:n,addForce:S,removeForce:E,getForces:I,step:function(){for(var R=0;R<b.length;++R)b[R](w);var D=h(p,n.timeStep,n.adaptiveTimeStepWeight);return w+=1,D},addBody:function(R){if(!R)throw new Error("Body is required");return p.push(R),R},addBodyAt:function(R){if(!R)throw new Error("Body position is required");var D=d(R);return p.push(D),D},removeBody:function(R){if(R){var D=p.indexOf(R);if(!(D<0))return p.splice(D,1),p.length===0&&m.reset(),!0}},addSpring:function(R,D,j,L){if(!R||!D)throw new Error("Cannot add null spring to force simulator");typeof j!="number"&&(j=-1);var W=new e(R,D,j,L>=0?L:-1);return g.push(W),W},getTotalMovement:function(){return x},removeSpring:function(R){if(R){var D=g.indexOf(R);if(D>-1)return g.splice(D,1),!0}},getBestNewBodyPosition:function(R){return m.getBestNewPosition(R)},getBBox:C,getBoundingBox:C,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(R){return R!==void 0?(n.gravity=R,y.options({gravity:R}),this):n.gravity},theta:function(R){return R!==void 0?(n.theta=R,y.options({theta:R}),this):n.theta},random:f};return H0e(n,M),r(M),M;function C(){return m.update(),m.box}function S(R,D){if(T.has(R))throw new Error("Force "+R+" is already added");T.set(R,D),b.push(D)}function E(R){var D=b.indexOf(T.get(R));D<0||(b.splice(D,1),T.delete(R))}function I(){return T}function F(){if(p.length!==0){y.insertBodies(p);for(var R=p.length;R--;){var D=p[R];D.isPinned||(D.reset(),y.updateBodyForce(D),v.update(D))}}}function N(){for(var R=g.length;R--;)_.update(g[R])}}function H0e(n,e){for(var t in n)W0e(n,e,t)}function W0e(n,e,t){if(n.hasOwnProperty(t)&&typeof e[t]!="function"){var r=Number.isFinite(n[t]);r?e[t]=function(i){if(i!==void 0){if(!Number.isFinite(i))throw new Error("Value of "+t+" should be a valid number.");return n[t]=i,e}return n[t]}:e[t]=function(i){return i!==void 0?(n[t]=i,e):n[t]}}}kP.exports=q0e;kP.exports.simulator=BG;var j0e=FP;function q0e(n,e){if(!n)throw new Error("Graph structure cannot be undefined");var t=e&&e.createSimulator||BG,r=t(e);if(Array.isArray(e))throw new Error("Physics settings is expected to be an object");var i=n.version>19?F:I;e&&typeof e.nodeMass=="function"&&(i=e.nodeMass);var s=new Map,o={},a=0,l=r.settings.springTransform||X0e;v(),y();var c=!1,u={step:function(){if(a===0)return h(!0),!0;var N=r.step();u.lastMove=N,u.fire("step");var R=N/a,D=R<=.01;return h(D),D},getNodePosition:function(N){return E(N).pos},setNodePosition:function(N){var R=E(N);R.setPosition.apply(R,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(N){var R=o[N];if(R)return{from:R.from.pos,to:R.to.pos}},getGraphRect:function(){return r.getBBox()},forEachBody:d,pinNode:function(N,R){var D=E(N.id);D.isPinned=!!R},isNodePinned:function(N){return E(N.id).isPinned},dispose:function(){n.off("changed",_),u.fire("disposed")},getBody:g,getSpring:p,getForceVectorLength:f,simulator:r,graph:n,lastMove:0};return j0e(u),u;function h(N){c!==N&&(c=N,m(N))}function d(N){s.forEach(N)}function f(){var N=0,R=0;return d(function(D){N+=Math.abs(D.force.x),R+=Math.abs(D.force.y)}),Math.sqrt(N*N+R*R)}function p(N,R){var D;if(R===void 0)typeof N!="object"?D=N:D=N.id;else{var j=n.hasLink(N,R);if(!j)return;D=j.id}return o[D]}function g(N){return s.get(N)}function y(){n.on("changed",_)}function m(N){u.fire("stable",N)}function _(N){for(var R=0;R<N.length;++R){var D=N[R];D.changeType==="add"?(D.node&&x(D.node.id),D.link&&T(D.link)):D.changeType==="remove"&&(D.node&&b(D.node),D.link&&w(D.link))}a=n.getNodesCount()}function v(){a=0,n.forEachNode(function(N){x(N.id),a+=1}),n.forEachLink(T)}function x(N){var R=s.get(N);if(!R){var D=n.getNode(N);if(!D)throw new Error("initBody() was called with unknown node id");var j=D.position;if(!j){var L=M(D);j=r.getBestNewBodyPosition(L)}R=r.addBodyAt(j),R.id=N,s.set(N,R),C(N),S(D)&&(R.isPinned=!0)}}function b(N){var R=N.id,D=s.get(R);D&&(s.delete(R),r.removeBody(D))}function T(N){C(N.fromId),C(N.toId);var R=s.get(N.fromId),D=s.get(N.toId),j=r.addSpring(R,D,N.length);l(N,j),o[N.id]=j}function w(N){var R=o[N.id];if(R){var D=n.getNode(N.fromId),j=n.getNode(N.toId);D&&C(D.id),j&&C(j.id),delete o[N.id],r.removeSpring(R)}}function M(N){var R=[];if(!N.links)return R;for(var D=Math.min(N.links.length,2),j=0;j<D;++j){var L=N.links[j],W=L.fromId!==N.id?s.get(L.fromId):s.get(L.toId);W&&W.pos&&R.push(W)}return R}function C(N){var R=s.get(N);if(R.mass=i(N),Number.isNaN(R.mass))throw new Error("Node mass should be a number")}function S(N){return N&&(N.isPinned||N.data&&N.data.isPinned)}function E(N){var R=s.get(N);return R||(x(N),R=s.get(N)),R}function I(N){var R=n.getLinks(N);return R?1+R.length/3:1}function F(N){var R=n.getLinks(N);return R?1+R.size/3:1}}function X0e(){}var K0e=kP.exports;const Y0e=Gf(K0e);function rC(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Q0e=typeof global=="object"&&global&&global.Object===Object&&global,Z0e=typeof self=="object"&&self&&self.Object===Object&&self,zG=Q0e||Z0e||Function("return this")(),tT=function(){return zG.Date.now()},J0e=/\s/;function eve(n){for(var e=n.length;e--&&J0e.test(n.charAt(e)););return e}var tve=/^\s+/;function nve(n){return n&&n.slice(0,eve(n)+1).replace(tve,"")}var Ex=zG.Symbol,$G=Object.prototype,rve=$G.hasOwnProperty,ive=$G.toString,Wp=Ex?Ex.toStringTag:void 0;function sve(n){var e=rve.call(n,Wp),t=n[Wp];try{n[Wp]=void 0;var r=!0}catch{}var i=ive.call(n);return r&&(e?n[Wp]=t:delete n[Wp]),i}var ove=Object.prototype,ave=ove.toString;function lve(n){return ave.call(n)}var cve="[object Null]",uve="[object Undefined]",kF=Ex?Ex.toStringTag:void 0;function hve(n){return n==null?n===void 0?uve:cve:kF&&kF in Object(n)?sve(n):lve(n)}function dve(n){return n!=null&&typeof n=="object"}var fve="[object Symbol]";function pve(n){return typeof n=="symbol"||dve(n)&&hve(n)==fve}var UF=NaN,mve=/^[-+]0x[0-9a-f]+$/i,gve=/^0b[01]+$/i,yve=/^0o[0-7]+$/i,vve=parseInt;function BF(n){if(typeof n=="number")return n;if(pve(n))return UF;if(rC(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=rC(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=nve(n);var t=gve.test(n);return t||yve.test(n)?vve(n.slice(2),t?2:8):mve.test(n)?UF:+n}var _ve="Expected a function",xve=Math.max,Sve=Math.min;function bve(n,e,t){var r,i,s,o,a,l,c=0,u=!1,h=!1,d=!0;if(typeof n!="function")throw new TypeError(_ve);e=BF(e)||0,rC(t)&&(u=!!t.leading,h="maxWait"in t,s=h?xve(BF(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function f(T){var w=r,M=i;return r=i=void 0,c=T,o=n.apply(M,w),o}function p(T){return c=T,a=setTimeout(m,e),u?f(T):o}function g(T){var w=T-l,M=T-c,C=e-w;return h?Sve(C,s-M):C}function y(T){var w=T-l,M=T-c;return l===void 0||w>=e||w<0||h&&M>=s}function m(){var T=tT();if(y(T))return _(T);a=setTimeout(m,g(T))}function _(T){return a=void 0,d&&r?f(T):(r=i=void 0,o)}function v(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function x(){return a===void 0?o:_(tT())}function b(){var T=tT(),w=y(T);if(r=arguments,i=this,l=T,w){if(a===void 0)return p(l);if(h)return clearTimeout(a),a=setTimeout(m,e),f(l)}return a===void 0&&(a=setTimeout(m,e)),o}return b.cancel=v,b.flush=x,b}function zF(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function wve(n){if(Array.isArray(n))return n}function Tve(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Mve(n,e,t){return Object.defineProperty(n,"prototype",{writable:!1}),n}function Eve(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function Ave(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cve(n,e){return wve(n)||Eve(n,e)||Rve(n,e)||Ave()}function Rve(n,e){if(n){if(typeof n=="string")return zF(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?zF(n,e):void 0}}var Nve=Mve(function n(e,t){var r=t.default,i=r===void 0?null:r,s=t.triggerUpdate,o=s===void 0?!0:s,a=t.onChange,l=a===void 0?function(c,u){}:a;Tve(this,n),this.name=e,this.defaultVal=i,this.triggerUpdate=o,this.onChange=l});function GP(n){var e=n.stateInit,t=e===void 0?function(){return{}}:e,r=n.props,i=r===void 0?{}:r,s=n.methods,o=s===void 0?{}:s,a=n.aliases,l=a===void 0?{}:a,c=n.init,u=c===void 0?function(){}:c,h=n.update,d=h===void 0?function(){}:h,f=Object.keys(i).map(function(p){return new Nve(p,i[p])});return function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=Object.assign({},t instanceof Function?t(p):t,{initialised:!1}),y={};function m(x){return _(x,p),v(),m}var _=function(b,T){u.call(m,b,g,T),g.initialised=!0},v=bve(function(){g.initialised&&(d.call(m,g,y),y={})},1);return f.forEach(function(x){m[x.name]=b(x);function b(T){var w=T.name,M=T.triggerUpdate,C=M===void 0?!1:M,S=T.onChange,E=S===void 0?function(N,R){}:S,I=T.defaultVal,F=I===void 0?null:I;return function(N){var R=g[w];if(!arguments.length)return R;var D=N===void 0?F:N;return g[w]=D,E.call(m,D,g,R),!y.hasOwnProperty(w)&&(y[w]=R),C&&v(),m}}}),Object.keys(o).forEach(function(x){m[x]=function(){for(var b,T=arguments.length,w=new Array(T),M=0;M<T;M++)w[M]=arguments[M];return(b=o[x]).call.apply(b,[m,g].concat(w))}}),Object.entries(l).forEach(function(x){var b=Cve(x,2),T=b[0],w=b[1];return m[T]=m[w]}),m.resetProps=function(){return f.forEach(function(x){m[x.name](x.defaultVal)}),m},m.resetProps(),g._rerender=v,m}}var $t=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};class $F extends Map{constructor(e,t=Lve){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(VF(this,e))}has(e){return super.has(VF(this,e))}set(e,t){return super.set(Pve(this,e),t)}delete(e){return super.delete(Ive(this,e))}}function VF({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function Pve({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function Ive({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function Lve(n){return n!==null&&typeof n=="object"?n.valueOf():n}function Dve(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t<r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function Ove(n,e){let t;if(e===void 0)for(const r of n)r!=null&&(t>r||t===void 0&&r>=r)&&(t=r);else{let r=-1;for(let i of n)(i=e(i,++r,n))!=null&&(t>i||t===void 0&&i>=i)&&(t=i)}return t}function iC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Fve(n){if(Array.isArray(n))return n}function kve(n){if(Array.isArray(n))return iC(n)}function Uve(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Bve(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function zve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $ve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vve(n,e){if(n==null)return{};var t,r,i=Gve(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function Gve(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.includes(r))continue;t[r]=n[r]}return t}function Hve(n,e){return Fve(n)||Bve(n,e)||VG(n,e)||zve()}function Wve(n){return kve(n)||Uve(n)||VG(n)||$ve()}function jve(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function qve(n){var e=jve(n,"string");return typeof e=="symbol"?e:e+""}function VG(n,e){if(n){if(typeof n=="string")return iC(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?iC(n,e):void 0}}var GF=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(a){return{keyAccessor:a,isProp:!(a instanceof Function)}}),s=n.reduce(function(a,l){var c=a,u=l;return i.forEach(function(h,d){var f=h.keyAccessor,p=h.isProp,g;if(p){var y=u,m=y[f],_=Vve(y,[f].map(qve));g=m,u=_}else g=f(u,d);d+1<i.length?(c.hasOwnProperty(g)||(c[g]={}),c=c[g]):t?(c.hasOwnProperty(g)||(c[g]=[]),c[g].push(u)):c[g]=u}),a},{});t instanceof Function&&function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;c===i.length?Object.keys(l).forEach(function(u){return l[u]=t(l[u])}):Object.values(l).forEach(function(u){return a(u,c+1)})}(s);var o=s;return r&&(o=[],function a(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];c.length===i.length?o.push({keys:c,vals:l}):Object.entries(l).forEach(function(u){var h=Hve(u,2),d=h[0],f=h[1];return a(f,[].concat(Wve(c),[d]))})}(s),e instanceof Array&&e.length===0&&o.length===1&&(o[0].keys=[])),o};function Xve(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function HF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Kve(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HF(Object(t),!0).forEach(function(r){GG(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):HF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function GG(n,e,t){return e=i_e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Yve(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function Qve(n,e){if(n==null)return{};var t=Yve(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function HG(n,e){return Jve(n)||Xve(n,e)||WG(n,e)||n_e()}function Ax(n){return Zve(n)||e_e(n)||WG(n)||t_e()}function Zve(n){if(Array.isArray(n))return sC(n)}function Jve(n){if(Array.isArray(n))return n}function e_e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function WG(n,e){if(n){if(typeof n=="string")return sC(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sC(n,e)}}function sC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function t_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r_e(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function i_e(n){var e=r_e(n,"string");return typeof e=="symbol"?e:String(e)}var s_e=["createObj","updateObj","exitObj","objBindAttr","dataBindAttr"];function o_e(n,e,t){var r={enter:[],update:[],exit:[]};if(t){var o=GF(n,t,!1),a=GF(e,t,!1),l=Object.assign({},o,a);Object.entries(l).forEach(function(c){var u=HG(c,2),h=u[0],d=u[1],f=o.hasOwnProperty(h)?a.hasOwnProperty(h)?"update":"exit":"enter";r[f].push(f==="update"?[o[h],a[h]]:d)})}else{var i=new Set(n),s=new Set(e);new Set([].concat(Ax(i),Ax(s))).forEach(function(c){var u=i.has(c)?s.has(c)?"update":"exit":"enter";r[u].push(u==="update"?[c,c]:c)})}return r}function a_e(n,e,t){var r=t.objBindAttr,i=r===void 0?"__obj":r,s=t.dataBindAttr,o=s===void 0?"__data":s,a=t.idAccessor,l=t.purge,c=l===void 0?!1:l,u=function(y){return y.hasOwnProperty(o)},h=e.filter(function(g){return!u(g)}),d=e.filter(u).map(function(g){return g[o]}),f=n,p=c?{enter:f,exit:d,update:[]}:o_e(d,f,a);return p.update=p.update.map(function(g){var y=HG(g,2),m=y[0],_=y[1];return m!==_&&(_[i]=m[i],_[i][o]=_),_}),p.exit=p.exit.concat(h.map(function(g){return GG({},i,g)})),p}function l_e(n,e,t,r,i){var s=i.createObj,o=s===void 0?function(M){return{}}:s,a=i.updateObj,l=a===void 0?function(M,C){}:a,c=i.exitObj,u=c===void 0?function(M){}:c,h=i.objBindAttr,d=h===void 0?"__obj":h,f=i.dataBindAttr,p=f===void 0?"__data":f,g=Qve(i,s_e),y=a_e(n,e,Kve({objBindAttr:d,dataBindAttr:p},g)),m=y.enter,_=y.update,v=y.exit;v.forEach(function(M){var C=M[d];delete M[d],u(C),r(C)});var x=T(m),b=[].concat(Ax(m),Ax(_));w(b),x.forEach(t);function T(M){var C=[];return M.forEach(function(S){var E=o(S);E&&(E[p]=S,S[d]=E,C.push(E))}),C}function w(M){M.forEach(function(C){var S=C[d];S&&(S[p]=C,l(S,C))})}}function c_e(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const WF=Symbol("implicit");function jG(){var n=new $F,e=[],t=[],r=WF;function i(s){let o=n.get(s);if(o===void 0){if(r!==WF)return r;n.set(s,o=e.push(s)-1)}return t[o%t.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new $F;for(const o of s)n.has(o)||n.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(t=Array.from(s),i):t.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return jG(e,t).unknown(r)},c_e.apply(i,arguments),i}function u_e(n){for(var e=n.length/6|0,t=new Array(e),r=0;r<e;)t[r]="#"+n.slice(r*6,++r*6);return t}const h_e=u_e("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function Cx(n){"@babel/helpers - typeof";return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cx(n)}var d_e=/^\s+/,f_e=/\s+$/;function it(n,e){if(n=n||"",e=e||{},n instanceof it)return n;if(!(this instanceof it))return new it(n,e);var t=p_e(n);this._originalInput=n,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}it.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,r,i,s,o,a;return t=e.r/255,r=e.g/255,i=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*s+.7152*o+.0722*a},setAlpha:function(e){return this._a=qG(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=qF(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=qF(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+i+"%)":"hsva("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=jF(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=jF(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+i+"%)":"hsla("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return XF(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return v_e(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Pn(this._r,255)*100)+"%",g:Math.round(Pn(this._g,255)*100)+"%",b:Math.round(Pn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Pn(this._r,255)*100)+"%, "+Math.round(Pn(this._g,255)*100)+"%, "+Math.round(Pn(this._b,255)*100)+"%)":"rgba("+Math.round(Pn(this._r,255)*100)+"%, "+Math.round(Pn(this._g,255)*100)+"%, "+Math.round(Pn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:N_e[XF(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+KF(this._r,this._g,this._b,this._a),r=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var s=it(e);r="#"+KF(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0,s=!t&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return it(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(b_e,arguments)},brighten:function(){return this._applyModification(w_e,arguments)},darken:function(){return this._applyModification(T_e,arguments)},desaturate:function(){return this._applyModification(__e,arguments)},saturate:function(){return this._applyModification(x_e,arguments)},greyscale:function(){return this._applyModification(S_e,arguments)},spin:function(){return this._applyModification(M_e,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(C_e,arguments)},complement:function(){return this._applyCombination(E_e,arguments)},monochromatic:function(){return this._applyCombination(R_e,arguments)},splitcomplement:function(){return this._applyCombination(A_e,arguments)},triad:function(){return this._applyCombination(YF,[3])},tetrad:function(){return this._applyCombination(YF,[4])}};it.fromRatio=function(n,e){if(Cx(n)=="object"){var t={};for(var r in n)n.hasOwnProperty(r)&&(r==="a"?t[r]=n[r]:t[r]=Tm(n[r]));n=t}return it(n,e)};function p_e(n){var e={r:0,g:0,b:0},t=1,r=null,i=null,s=null,o=!1,a=!1;return typeof n=="string"&&(n=D_e(n)),Cx(n)=="object"&&(ua(n.r)&&ua(n.g)&&ua(n.b)?(e=m_e(n.r,n.g,n.b),o=!0,a=String(n.r).substr(-1)==="%"?"prgb":"rgb"):ua(n.h)&&ua(n.s)&&ua(n.v)?(r=Tm(n.s),i=Tm(n.v),e=y_e(n.h,r,i),o=!0,a="hsv"):ua(n.h)&&ua(n.s)&&ua(n.l)&&(r=Tm(n.s),s=Tm(n.l),e=g_e(n.h,r,s),o=!0,a="hsl"),n.hasOwnProperty("a")&&(t=n.a)),t=qG(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function m_e(n,e,t){return{r:Pn(n,255)*255,g:Pn(e,255)*255,b:Pn(t,255)*255}}function jF(n,e,t){n=Pn(n,255),e=Pn(e,255),t=Pn(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,o,a=(r+i)/2;if(r==i)s=o=0;else{var l=r-i;switch(o=a>.5?l/(2-r-i):l/(r+i),r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function g_e(n,e,t){var r,i,s;n=Pn(n,360),e=Pn(e,100),t=Pn(t,100);function o(c,u,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?c+(u-c)*6*h:h<1/2?u:h<2/3?c+(u-c)*(2/3-h)*6:c}if(e===0)r=i=s=t;else{var a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=o(l,a,n+1/3),i=o(l,a,n),s=o(l,a,n-1/3)}return{r:r*255,g:i*255,b:s*255}}function qF(n,e,t){n=Pn(n,255),e=Pn(e,255),t=Pn(t,255);var r=Math.max(n,e,t),i=Math.min(n,e,t),s,o,a=r,l=r-i;if(o=r===0?0:l/r,r==i)s=0;else{switch(r){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,v:a}}function y_e(n,e,t){n=Pn(n,360)*6,e=Pn(e,100),t=Pn(t,100);var r=Math.floor(n),i=n-r,s=t*(1-e),o=t*(1-i*e),a=t*(1-(1-i)*e),l=r%6,c=[t,o,s,s,a,t][l],u=[a,t,t,o,s,s][l],h=[s,s,a,t,t,o][l];return{r:c*255,g:u*255,b:h*255}}function XF(n,e,t,r){var i=[ho(Math.round(n).toString(16)),ho(Math.round(e).toString(16)),ho(Math.round(t).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function v_e(n,e,t,r,i){var s=[ho(Math.round(n).toString(16)),ho(Math.round(e).toString(16)),ho(Math.round(t).toString(16)),ho(XG(r))];return i&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function KF(n,e,t,r){var i=[ho(XG(r)),ho(Math.round(n).toString(16)),ho(Math.round(e).toString(16)),ho(Math.round(t).toString(16))];return i.join("")}it.equals=function(n,e){return!n||!e?!1:it(n).toRgbString()==it(e).toRgbString()};it.random=function(){return it.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function __e(n,e){e=e===0?0:e||10;var t=it(n).toHsl();return t.s-=e/100,t.s=Vb(t.s),it(t)}function x_e(n,e){e=e===0?0:e||10;var t=it(n).toHsl();return t.s+=e/100,t.s=Vb(t.s),it(t)}function S_e(n){return it(n).desaturate(100)}function b_e(n,e){e=e===0?0:e||10;var t=it(n).toHsl();return t.l+=e/100,t.l=Vb(t.l),it(t)}function w_e(n,e){e=e===0?0:e||10;var t=it(n).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),it(t)}function T_e(n,e){e=e===0?0:e||10;var t=it(n).toHsl();return t.l-=e/100,t.l=Vb(t.l),it(t)}function M_e(n,e){var t=it(n).toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,it(t)}function E_e(n){var e=it(n).toHsl();return e.h=(e.h+180)%360,it(e)}function YF(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=it(n).toHsl(),r=[it(n)],i=360/e,s=1;s<e;s++)r.push(it({h:(t.h+s*i)%360,s:t.s,l:t.l}));return r}function A_e(n){var e=it(n).toHsl(),t=e.h;return[it(n),it({h:(t+72)%360,s:e.s,l:e.l}),it({h:(t+216)%360,s:e.s,l:e.l})]}function C_e(n,e,t){e=e||6,t=t||30;var r=it(n).toHsl(),i=360/t,s=[it(n)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,s.push(it(r));return s}function R_e(n,e){e=e||6;for(var t=it(n).toHsv(),r=t.h,i=t.s,s=t.v,o=[],a=1/e;e--;)o.push(it({h:r,s:i,v:s})),s=(s+a)%1;return o}it.mix=function(n,e,t){t=t===0?0:t||50;var r=it(n).toRgb(),i=it(e).toRgb(),s=t/100,o={r:(i.r-r.r)*s+r.r,g:(i.g-r.g)*s+r.g,b:(i.b-r.b)*s+r.b,a:(i.a-r.a)*s+r.a};return it(o)};it.readability=function(n,e){var t=it(n),r=it(e);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)};it.isReadable=function(n,e,t){var r=it.readability(n,e),i,s;switch(s=!1,i=O_e(t),i.level+i.size){case"AAsmall":case"AAAlarge":s=r>=4.5;break;case"AAlarge":s=r>=3;break;case"AAAsmall":s=r>=7;break}return s};it.mostReadable=function(n,e,t){var r=null,i=0,s,o,a,l;t=t||{},o=t.includeFallbackColors,a=t.level,l=t.size;for(var c=0;c<e.length;c++)s=it.readability(n,e[c]),s>i&&(i=s,r=it(e[c]));return it.isReadable(n,r,{level:a,size:l})||!o?r:(t.includeFallbackColors=!1,it.mostReadable(n,["#fff","#000"],t))};var oC=it.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},N_e=it.hexNames=P_e(oC);function P_e(n){var e={};for(var t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function qG(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function Pn(n,e){I_e(n)&&(n="100%");var t=L_e(n);return n=Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function Vb(n){return Math.min(1,Math.max(0,n))}function Yi(n){return parseInt(n,16)}function I_e(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function L_e(n){return typeof n=="string"&&n.indexOf("%")!=-1}function ho(n){return n.length==1?"0"+n:""+n}function Tm(n){return n<=1&&(n=n*100+"%"),n}function XG(n){return Math.round(parseFloat(n)*255).toString(16)}function QF(n){return Yi(n)/255}var Js=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+n+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",i="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function ua(n){return!!Js.CSS_UNIT.exec(n)}function D_e(n){n=n.replace(d_e,"").replace(f_e,"").toLowerCase();var e=!1;if(oC[n])n=oC[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=Js.rgb.exec(n))?{r:t[1],g:t[2],b:t[3]}:(t=Js.rgba.exec(n))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Js.hsl.exec(n))?{h:t[1],s:t[2],l:t[3]}:(t=Js.hsla.exec(n))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Js.hsv.exec(n))?{h:t[1],s:t[2],v:t[3]}:(t=Js.hsva.exec(n))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Js.hex8.exec(n))?{r:Yi(t[1]),g:Yi(t[2]),b:Yi(t[3]),a:QF(t[4]),format:e?"name":"hex8"}:(t=Js.hex6.exec(n))?{r:Yi(t[1]),g:Yi(t[2]),b:Yi(t[3]),format:e?"name":"hex"}:(t=Js.hex4.exec(n))?{r:Yi(t[1]+""+t[1]),g:Yi(t[2]+""+t[2]),b:Yi(t[3]+""+t[3]),a:QF(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=Js.hex3.exec(n))?{r:Yi(t[1]+""+t[1]),g:Yi(t[2]+""+t[2]),b:Yi(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function O_e(n){var e,t;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),t=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}function aC(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function F_e(n){if(Array.isArray(n))return n}function k_e(n){if(Array.isArray(n))return aC(n)}function U_e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function B_e(n,e,t){return e=Rx(e),Y_e(n,WP()?Reflect.construct(e,t||[],Rx(n).constructor):e.apply(n,t))}function z_e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function $_e(n,e,t){if(WP())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(n.bind.apply(n,r));return i}function V_e(n,e,t){return Object.defineProperty(n,"prototype",{writable:!1}),n}function HP(n,e,t){return(e=Z_e(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Rx(n){return Rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rx(n)}function G_e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&lC(n,e)}function WP(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WP=function(){return!!n})()}function H_e(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function W_e(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function j_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZF(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function KG(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZF(Object(t),!0).forEach(function(r){HP(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZF(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function X_e(n,e){if(n==null)return{};var t,r,i=K_e(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function K_e(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.includes(r))continue;t[r]=n[r]}return t}function Y_e(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U_e(n)}function lC(n,e){return lC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},lC(n,e)}function JF(n,e){return F_e(n)||W_e(n,e)||YG(n,e)||j_e()}function io(n){return k_e(n)||H_e(n)||YG(n)||q_e()}function Q_e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Z_e(n){var e=Q_e(n,"string");return typeof e=="symbol"?e:e+""}function cC(n){"@babel/helpers - typeof";return cC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cC(n)}function YG(n,e){if(n){if(typeof n=="string")return aC(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?aC(n,e):void 0}}var QG=function(e){e instanceof Array?e.forEach(QG):(e.map&&e.map.dispose(),e.dispose())},ZG=function(e){e.geometry&&e.geometry.dispose(),e.material&&QG(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(ZG)},uC=function(e){for(;e.children.length;){var t=e.children[0];e.remove(t),ZG(t)}},J_e=["objFilter"];function jp(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=t.objFilter,i=r===void 0?function(){return!0}:r,s=X_e(t,J_e);return l_e(n,e.children.filter(i),function(o){return e.add(o)},function(o){e.remove(o),uC(o)},KG({objBindAttr:"__threeObj"},s))}var qp=function(e){return isNaN(e)?parseInt(it(e).toHex(),16):e},nT=function(e){return isNaN(e)?it(e).getAlpha():1},exe=jG(h_e);function ek(n,e,t){!e||typeof t!="string"||n.filter(function(r){return!r[t]}).forEach(function(r){r[t]=exe(e(r))})}function txe(n,e){var t=n.nodes,r=n.links,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.nodeFilter,o=s===void 0?function(){return!0}:s,a=i.onLoopError,l=a===void 0?function(f){throw"Invalid DAG structure! Found cycle in node path: ".concat(f.join(" -> "),".")}:a,c={};t.forEach(function(f){return c[e(f)]={data:f,out:[],depth:-1,skip:!o(f)}}),r.forEach(function(f){var p=f.source,g=f.target,y=x(p),m=x(g);if(!c.hasOwnProperty(y))throw"Missing source node with id: ".concat(y);if(!c.hasOwnProperty(m))throw"Missing target node with id: ".concat(m);var _=c[y],v=c[m];_.out.push(v);function x(b){return cC(b)==="object"?e(b):b}});var u=[];d(Object.values(c));var h=Object.assign.apply(Object,[{}].concat(io(Object.entries(c).filter(function(f){var p=JF(f,2),g=p[1];return!g.skip}).map(function(f){var p=JF(f,2),g=p[0],y=p[1];return HP({},g,y.depth)}))));return h;function d(f){for(var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,y=function(){var x=f[m];if(p.indexOf(x)!==-1){var b=[].concat(io(p.slice(p.indexOf(x))),[x]).map(function(T){return e(T.data)});return u.some(function(T){return T.length===b.length&&T.every(function(w,M){return w===b[M]})})||(u.push(b),l(b)),1}g>x.depth&&(x.depth=g,d(x.out,[].concat(io(p),[x]),g+(x.skip?0:1)))},m=0,_=f.length;m<_;m++)y()}}var ft=window.THREE?window.THREE:{Group:vd,Mesh:Ns,MeshLambertMaterial:kge,Color:Ot,BufferGeometry:Vs,BufferAttribute:Is,Matrix4:Cn,Vector3:Y,SphereGeometry:nG,CylinderGeometry:Bb,TubeGeometry:PP,ConeGeometry:NP,Line:Sge,LineBasicMaterial:JV,QuadraticBezierCurve3:RP,CubicBezierCurve3:tG,Box3:th},tk={graph:g0e,forcelayout:Y0e},nxe=2,nk=new ft.BufferGeometry().setAttribute?"setAttribute":"addAttribute",V0=new ft.BufferGeometry().applyMatrix4?"applyMatrix4":"applyMatrix",rxe=GP({props:{jsonUrl:{onChange:function(e,t){var r=this;e&&!t.fetchingJson&&(t.fetchingJson=!0,t.onLoading(),fetch(e).then(function(i){return i.json()}).then(function(i){t.fetchingJson=!1,t.onFinishLoading(i),r.graphData(i)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,t){t.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,t){var r=t.d3ForceLayout.force("charge");r&&r.strength(e>2?-60:-30),e<3&&i(t.graphData.nodes,"z"),e<2&&i(t.graphData.nodes,"y");function i(s,o){s.forEach(function(a){delete a[o],delete a["v".concat(o)]})}}},dagMode:{onChange:function(e,t){!e&&t.forceEngine==="d3"&&(t.graphData.nodes||[]).forEach(function(r){return r.fx=r.fy=r.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,t){t.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,t,r){return r===void 0?e.d3ForceLayout.force(t):(e.d3ForceLayout.force(t,r),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var t=e.forceEngine!=="ngraph";return e.engineRunning&&r(),i(),s(),this;function r(){++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||t&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[t?"tick":"step"](),e.onEngineTick());var o=$t(e.nodeThreeObjectExtend);e.graphData.nodes.forEach(function(d){var f=d.__threeObj;if(f){var p=t?d:e.layout.getNodePosition(d[e.nodeId]),g=o(d);(!e.nodePositionUpdate||!e.nodePositionUpdate(g?f.children[0]:f,{x:p.x,y:p.y,z:p.z},d)||g)&&(f.position.x=p.x,f.position.y=p.y||0,f.position.z=p.z||0)}});var a=$t(e.linkWidth),l=$t(e.linkCurvature),c=$t(e.linkCurveRotation),u=$t(e.linkThreeObjectExtend);e.graphData.links.forEach(function(d){var f=d.__lineObj;if(f){var p=t?d:e.layout.getLinkPosition(e.layout.graph.getLink(d.source,d.target).id),g=p[t?"source":"from"],y=p[t?"target":"to"];if(!(!g||!y||!g.hasOwnProperty("x")||!y.hasOwnProperty("x"))){h(d);var m=u(d);if(!(e.linkPositionUpdate&&e.linkPositionUpdate(m?f.children[1]:f,{start:{x:g.x,y:g.y,z:g.z},end:{x:y.x,y:y.y,z:y.z}},d)&&!m)){var _=30,v=d.__curve,x=f.children.length?f.children[0]:f;if(x.type==="Line"){if(v)x.geometry.setFromPoints(v.getPoints(_));else{var b=x.geometry.getAttribute("position");(!b||!b.array||b.array.length!==6)&&x.geometry[nk]("position",b=new ft.BufferAttribute(new Float32Array(2*3),3)),b.array[0]=g.x,b.array[1]=g.y||0,b.array[2]=g.z||0,b.array[3]=y.x,b.array[4]=y.y||0,b.array[5]=y.z||0,b.needsUpdate=!0}x.geometry.computeBoundingSphere()}else if(x.type==="Mesh")if(v){x.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(x.position.set(0,0,0),x.rotation.set(0,0,0),x.scale.set(1,1,1));var I=Math.ceil(a(d)*10)/10,F=I/2,N=new ft.TubeGeometry(v,_,F,e.linkResolution,!1);x.geometry.dispose(),x.geometry=N}else{if(!x.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var T=Math.ceil(a(d)*10)/10,w=T/2,M=new ft.CylinderGeometry(w,w,1,e.linkResolution,1,!1);M[V0](new ft.Matrix4().makeTranslation(0,1/2,0)),M[V0](new ft.Matrix4().makeRotationX(Math.PI/2)),x.geometry.dispose(),x.geometry=M}var C=new ft.Vector3(g.x,g.y||0,g.z||0),S=new ft.Vector3(y.x,y.y||0,y.z||0),E=C.distanceTo(S);x.position.x=C.x,x.position.y=C.y,x.position.z=C.z,x.scale.z=E,x.parent.localToWorld(S),x.lookAt(S)}}}}});function h(d){var f=t?d:e.layout.getLinkPosition(e.layout.graph.getLink(d.source,d.target).id),p=f[t?"source":"from"],g=f[t?"target":"to"];if(!(!p||!g||!p.hasOwnProperty("x")||!g.hasOwnProperty("x"))){var y=l(d);if(!y)d.__curve=null;else{var m=new ft.Vector3(p.x,p.y||0,p.z||0),_=new ft.Vector3(g.x,g.y||0,g.z||0),v=m.distanceTo(_),x,b=c(d);if(v>0){var T=g.x-p.x,w=g.y-p.y||0,M=new ft.Vector3().subVectors(_,m),C=M.clone().multiplyScalar(y).cross(T!==0||w!==0?new ft.Vector3(0,0,1):new ft.Vector3(0,1,0)).applyAxisAngle(M.normalize(),b).add(new ft.Vector3().addVectors(m,_).divideScalar(2));x=new ft.QuadraticBezierCurve3(m,C,_)}else{var S=y*70,E=-b,I=E+Math.PI/2;x=new ft.CubicBezierCurve3(m,new ft.Vector3(S*Math.cos(I),S*Math.sin(I),0).add(m),new ft.Vector3(S*Math.cos(E),S*Math.sin(E),0).add(m),_)}d.__curve=x}}}}function i(){var o=$t(e.linkDirectionalArrowRelPos),a=$t(e.linkDirectionalArrowLength),l=$t(e.nodeVal);e.graphData.links.forEach(function(c){var u=c.__arrowObj;if(u){var h=t?c:e.layout.getLinkPosition(e.layout.graph.getLink(c.source,c.target).id),d=h[t?"source":"from"],f=h[t?"target":"to"];if(!(!d||!f||!d.hasOwnProperty("x")||!f.hasOwnProperty("x"))){var p=Math.cbrt(Math.max(0,l(d)||1))*e.nodeRelSize,g=Math.cbrt(Math.max(0,l(f)||1))*e.nodeRelSize,y=a(c),m=o(c),_=c.__curve?function(M){return c.__curve.getPoint(M)}:function(M){var C=function(E,I,F,N){return I[E]+(F[E]-I[E])*N||0};return{x:C("x",d,f,M),y:C("y",d,f,M),z:C("z",d,f,M)}},v=c.__curve?c.__curve.getLength():Math.sqrt(["x","y","z"].map(function(M){return Math.pow((f[M]||0)-(d[M]||0),2)}).reduce(function(M,C){return M+C},0)),x=p+y+(v-p-g-y)*m,b=_(x/v),T=_((x-y)/v);["x","y","z"].forEach(function(M){return u.position[M]=T[M]});var w=$_e(ft.Vector3,io(["x","y","z"].map(function(M){return b[M]})));u.parent.localToWorld(w),u.lookAt(w)}}})}function s(){var o=$t(e.linkDirectionalParticleSpeed);e.graphData.links.forEach(function(a){var l=a.__photonsObj&&a.__photonsObj.children,c=a.__singleHopPhotonsObj&&a.__singleHopPhotonsObj.children;if(!((!c||!c.length)&&(!l||!l.length))){var u=t?a:e.layout.getLinkPosition(e.layout.graph.getLink(a.source,a.target).id),h=u[t?"source":"from"],d=u[t?"target":"to"];if(!(!h||!d||!h.hasOwnProperty("x")||!d.hasOwnProperty("x"))){var f=o(a),p=a.__curve?function(y){return a.__curve.getPoint(y)}:function(y){var m=function(v,x,b,T){return x[v]+(b[v]-x[v])*T||0};return{x:m("x",h,d,y),y:m("y",h,d,y),z:m("z",h,d,y)}},g=[].concat(io(l||[]),io(c||[]));g.forEach(function(y,m){var _=y.parent.__linkThreeObjType==="singleHopPhotons";if(y.hasOwnProperty("__progressRatio")||(y.__progressRatio=_?0:m/l.length),y.__progressRatio+=f,y.__progressRatio>=1)if(!_)y.__progressRatio=y.__progressRatio%1;else{y.parent.remove(y),uC(y);return}var v=y.__progressRatio,x=p(v);["x","y","z"].forEach(function(b){return y.position[b]=x[b]})})}}})}},emitParticle:function(e,t){if(t&&e.graphData.links.includes(t)){if(!t.__singleHopPhotonsObj){var r=new ft.Group;r.__linkThreeObjType="singleHopPhotons",t.__singleHopPhotonsObj=r,e.graphScene.add(r)}var i=$t(e.linkDirectionalParticleWidth),s=Math.ceil(i(t)*10)/10/2,o=e.linkDirectionalParticleResolution,a=new ft.SphereGeometry(s,o,o),l=$t(e.linkColor),c=$t(e.linkDirectionalParticleColor),u=c(t)||l(t)||"#f0f0f0",h=new ft.Color(qp(u)),d=e.linkOpacity*3,f=new ft.MeshLambertMaterial({color:h,transparent:!0,opacity:d});t.__singleHopPhotonsObj.add(new ft.Mesh(a,f))}return this},getGraphBbox:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if(!e.initialised)return null;var r=function i(s){var o=[];if(s.geometry){s.geometry.computeBoundingBox();var a=new ft.Box3;a.copy(s.geometry.boundingBox).applyMatrix4(s.matrixWorld),o.push(a)}return o.concat.apply(o,io((s.children||[]).filter(function(l){return!l.hasOwnProperty("__graphObjType")||l.__graphObjType==="node"&&t(l.__data)}).map(i)))}(e.graphScene);return r.length?Object.assign.apply(Object,io(["x","y","z"].map(function(i){return HP({},i,[Ove(r,function(s){return s.min[i]}),Dve(r,function(s){return s.max[i]})])}))):null}},stateInit:function(){return{d3ForceLayout:a0e().force("link",jye()).force("charge",l0e()).force("center",Yge()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,t){t.graphScene=e},update:function(e,t){var r=function(V){return V.some(function(Z){return t.hasOwnProperty(Z)})};if(e.engineRunning=!1,e.onUpdate(),e.nodeAutoColorBy!==null&&r(["nodeAutoColorBy","graphData","nodeColor"])&&ek(e.graphData.nodes,$t(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&r(["linkAutoColorBy","graphData","linkColor"])&&ek(e.graphData.links,$t(e.linkAutoColorBy),e.linkColor),e._flushObjects||r(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var i=$t(e.nodeThreeObject),s=$t(e.nodeThreeObjectExtend),o=$t(e.nodeVal),a=$t(e.nodeColor),l=$t(e.nodeVisibility),c={},u={};jp(e.graphData.nodes.filter(l),e.graphScene,{purge:e._flushObjects||r(["nodeThreeObject","nodeThreeObjectExtend"]),objFilter:function(V){return V.__graphObjType==="node"},createObj:function(V){var Z=i(V),le=s(V);Z&&e.nodeThreeObject===Z&&(Z=Z.clone());var pe;return Z&&!le?pe=Z:(pe=new ft.Mesh,pe.__graphDefaultObj=!0,Z&&le&&pe.add(Z)),pe.__graphObjType="node",pe},updateObj:function(V,Z){if(V.__graphDefaultObj){var le=o(Z)||1,pe=Math.cbrt(le)*e.nodeRelSize,ue=e.nodeResolution;(!V.geometry.type.match(/^Sphere(Buffer)?Geometry$/)||V.geometry.parameters.radius!==pe||V.geometry.parameters.widthSegments!==ue)&&(c.hasOwnProperty(le)||(c[le]=new ft.SphereGeometry(pe,ue,ue)),V.geometry.dispose(),V.geometry=c[le]);var be=a(Z),Pe=new ft.Color(qp(be||"#ffffaa")),we=e.nodeOpacity*nT(be);(V.material.type!=="MeshLambertMaterial"||!V.material.color.equals(Pe)||V.material.opacity!==we)&&(u.hasOwnProperty(be)||(u[be]=new ft.MeshLambertMaterial({color:Pe,transparent:!0,opacity:we})),V.material.dispose(),V.material=u[be])}}})}if(e._flushObjects||r(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var h=$t(e.linkThreeObject),d=$t(e.linkThreeObjectExtend),f=$t(e.linkMaterial),p=$t(e.linkVisibility),g=$t(e.linkColor),y=$t(e.linkWidth),m={},_={},v={},x=e.graphData.links.filter(p);if(jp(x,e.graphScene,{objBindAttr:"__lineObj",purge:e._flushObjects||r(["linkThreeObject","linkThreeObjectExtend","linkWidth"]),objFilter:function(V){return V.__graphObjType==="link"},exitObj:function(V){var Z=V.__data&&V.__data.__singleHopPhotonsObj;Z&&(Z.parent.remove(Z),uC(Z),delete V.__data.__singleHopPhotonsObj)},createObj:function(V){var Z=h(V),le=d(V);Z&&e.linkThreeObject===Z&&(Z=Z.clone());var pe;if(!Z||le){var ue=!!y(V);if(ue)pe=new ft.Mesh;else{var be=new ft.BufferGeometry;be[nk]("position",new ft.BufferAttribute(new Float32Array(2*3),3)),pe=new ft.Line(be)}}var Pe;return Z?le?(Pe=new ft.Group,Pe.__graphDefaultObj=!0,Pe.add(pe),Pe.add(Z)):Pe=Z:(Pe=pe,Pe.__graphDefaultObj=!0),Pe.renderOrder=10,Pe.__graphObjType="link",Pe},updateObj:function(V,Z){if(V.__graphDefaultObj){var le=V.children.length?V.children[0]:V,pe=Math.ceil(y(Z)*10)/10,ue=!!pe;if(ue){var be=pe/2,Pe=e.linkResolution;if(!le.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||le.geometry.parameters.radiusTop!==be||le.geometry.parameters.radialSegments!==Pe){if(!m.hasOwnProperty(pe)){var we=new ft.CylinderGeometry(be,be,1,Pe,1,!1);we[V0](new ft.Matrix4().makeTranslation(0,1/2,0)),we[V0](new ft.Matrix4().makeRotationX(Math.PI/2)),m[pe]=we}le.geometry.dispose(),le.geometry=m[pe]}}var G=f(Z);if(G)le.material=G;else{var Ge=g(Z),$e=new ft.Color(qp(Ge||"#f0f0f0")),Ye=e.linkOpacity*nT(Ge),De=ue?"MeshLambertMaterial":"LineBasicMaterial";if(le.material.type!==De||!le.material.color.equals($e)||le.material.opacity!==Ye){var st=ue?_:v;st.hasOwnProperty(Ge)||(st[Ge]=new ft[De]({color:$e,transparent:Ye<1,opacity:Ye,depthWrite:Ye>=1})),le.material.dispose(),le.material=st[Ge]}}}}}),e.linkDirectionalArrowLength||t.hasOwnProperty("linkDirectionalArrowLength")){var b=$t(e.linkDirectionalArrowLength),T=$t(e.linkDirectionalArrowColor);jp(x.filter(b),e.graphScene,{objBindAttr:"__arrowObj",objFilter:function(V){return V.__linkThreeObjType==="arrow"},createObj:function(){var V=new ft.Mesh(void 0,new ft.MeshLambertMaterial({transparent:!0}));return V.__linkThreeObjType="arrow",V},updateObj:function(V,Z){var le=b(Z),pe=e.linkDirectionalArrowResolution;if(!V.geometry.type.match(/^Cone(Buffer)?Geometry$/)||V.geometry.parameters.height!==le||V.geometry.parameters.radialSegments!==pe){var ue=new ft.ConeGeometry(le*.25,le,pe);ue.translate(0,le/2,0),ue.rotateX(Math.PI/2),V.geometry.dispose(),V.geometry=ue}var be=T(Z)||g(Z)||"#f0f0f0";V.material.color=new ft.Color(qp(be)),V.material.opacity=e.linkOpacity*3*nT(be)}})}if(e.linkDirectionalParticles||t.hasOwnProperty("linkDirectionalParticles")){var w=$t(e.linkDirectionalParticles),M=$t(e.linkDirectionalParticleWidth),C=$t(e.linkDirectionalParticleColor),S={},E={};jp(x.filter(w),e.graphScene,{objBindAttr:"__photonsObj",objFilter:function(V){return V.__linkThreeObjType==="photons"},createObj:function(){var V=new ft.Group;return V.__linkThreeObjType="photons",V},updateObj:function(V,Z){var le=Math.round(Math.abs(w(Z))),pe=!!V.children.length&&V.children[0],ue=Math.ceil(M(Z)*10)/10/2,be=e.linkDirectionalParticleResolution,Pe;pe&&pe.geometry.parameters.radius===ue&&pe.geometry.parameters.widthSegments===be?Pe=pe.geometry:(E.hasOwnProperty(ue)||(E[ue]=new ft.SphereGeometry(ue,be,be)),Pe=E[ue],pe&&pe.geometry.dispose());var we=C(Z)||g(Z)||"#f0f0f0",G=new ft.Color(qp(we)),Ge=e.linkOpacity*3,$e;pe&&pe.material.color.equals(G)&&pe.material.opacity===Ge?$e=pe.material:(S.hasOwnProperty(we)||(S[we]=new ft.MeshLambertMaterial({color:G,transparent:!0,opacity:Ge})),$e=S[we],pe&&pe.material.dispose()),jp(io(new Array(le)).map(function(Ye,De){return{idx:De}}),V,{idAccessor:function(De){return De.idx},createObj:function(){return new ft.Mesh(Pe,$e)},updateObj:function(De){De.geometry=Pe,De.material=$e}})}})}}if(e._flushObjects=!1,r(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach(function(k){k.source=k[e.linkSource],k.target=k[e.linkTarget]});var I=e.forceEngine!=="ngraph",F;if(I){(F=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var N=e.d3ForceLayout.force("link");N&&N.id(function(k){return k[e.nodeId]}).links(e.graphData.links);var R=e.dagMode&&txe(e.graphData,function(k){return k[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),D=Math.max.apply(Math,io(Object.values(R||[]))),j=e.dagLevelDistance||e.graphData.nodes.length/(D||1)*nxe*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu","zin","zout"].includes(t.dagMode)){var L=["lr","rl"].includes(t.dagMode)?"fx":["td","bu"].includes(t.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(k){return delete k[L]})}if(["lr","rl","td","bu","zin","zout"].includes(e.dagMode)){var W=["rl","td","zout"].includes(e.dagMode),z=function(V){return(R[V[e.nodeId]]-D/2)*j*(W?-1:1)},X=["lr","rl"].includes(e.dagMode)?"fx":["td","bu"].includes(e.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(k){return k[X]=z(k)})}e.d3ForceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?c0e(function(k){var V=R[k[e.nodeId]]||-1;return(e.dagMode==="radialin"?D-V:V)*j}).strength(function(k){return e.dagNodeFilter(k)?1:0}):null)}else{var U=tk.graph();e.graphData.nodes.forEach(function(k){U.addNode(k[e.nodeId])}),e.graphData.links.forEach(function(k){U.addLink(k.source,k.target)}),F=tk.forcelayout(U,KG({dimensions:e.numDimensions},e.ngraphPhysics)),F.graph=U}for(var te=0;te<e.warmupTicks&&!(I&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);te++)F[I?"tick":"step"]();e.layout=F,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}});function ixe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=function(i){function s(){var o;z_e(this,s);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return o=B_e(this,s,[].concat(l)),o.__kapsuleInstance=n().apply(void 0,[].concat(io(t?[o]:[]),l)),o}return G_e(s,i),V_e(s)}(e);return Object.keys(n()).forEach(function(i){return r.prototype[i]=function(){var s,o=(s=this.__kapsuleInstance)[i].apply(s,arguments);return o===this.__kapsuleInstance?this:o}}),r}var sxe=window.THREE?window.THREE:{Group:vd},JG=ixe(rxe,sxe.Group,!0);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Gb="169",oxe=0,axe=1,lxe=2,cxe=1,G0=3,Og=0,cl=1,Nx=2,kf=0,dc=1,Px=2,Ix=3,Lx=4,e6=5,Hl=100,t6=101,n6=102,uxe=103,hxe=104,r6=200,i6=201,s6=202,o6=203,Dx=204,Ox=205,a6=206,l6=207,c6=208,u6=209,h6=210,d6=0,f6=1,p6=2,Fx=3,m6=4,g6=5,y6=6,v6=7,Hb=0,dxe=1,fxe=2,Gd=0,pxe=1,mxe=2,gxe=3,yxe=4,vxe=6,_xe=7,_6=300,Gu=301,Uf=302,Sy=303,by=304,hC=306,kx=1e3,_d=1001,Ux=1002,kr=1003,dC=1004,Hd=1005,Fi=1006,fC=1007,ja=1008,za=1009,Km=1010,Ym=1011,xd=1012,ci=1013,Dr=1014,is=1015,qa=1016,xxe=1017,Sxe=1018,wy=1020,x6=35902,bxe=1021,jP=1022,sp=1023,wxe=1024,Txe=1025,Cu=1026,Bf=1027,qP=1028,XP=1029,Fg=1030,KP=1031,Mxe=1032,YP=1033,rT=33776,u_=33777,h_=33778,d_=33779,rk=35840,ik=35841,sk=35842,ok=35843,ak=36196,pC=37492,mC=37496,gC=37808,yC=37809,vC=37810,_C=37811,xC=37812,SC=37813,bC=37814,wC=37815,TC=37816,MC=37817,EC=37818,AC=37819,CC=37820,RC=37821,iT=36492,Exe=36283,lk=36284,ck=36285,uk=36286,xc=0,Axe=1,Hu="",ht="srgb",Ls="srgb-linear",Cxe="display-p3",S6="display-p3-linear",NC="linear",hk="srgb",dk="rec709",fk="p3",Rxe=0,eu=7680,Nxe=7681,Pxe=7682,Ixe=7683,Lxe=34055,Dxe=34056,Oxe=5386,Fxe=512,kxe=513,Uxe=514,Bxe=515,zxe=516,$xe=517,Vxe=518,PC=519,b6=512,QP=513,w6=514,T6=515,M6=516,E6=517,A6=518,C6=519,Bx=35044,Sd=35048,fo=2e3,Wu=2001;class op{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Hr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let pk=1234567;const Qm=Math.PI/180,kg=180/Math.PI;function Xa(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Hr[n&255]+Hr[n>>8&255]+Hr[n>>16&255]+Hr[n>>24&255]+"-"+Hr[e&255]+Hr[e>>8&255]+"-"+Hr[e>>16&15|64]+Hr[e>>24&255]+"-"+Hr[t&63|128]+Hr[t>>8&255]+"-"+Hr[t>>16&255]+Hr[t>>24&255]+Hr[r&255]+Hr[r>>8&255]+Hr[r>>16&255]+Hr[r>>24&255]).toLowerCase()}function Fr(n,e,t){return Math.max(e,Math.min(t,n))}function ZP(n,e){return(n%e+e)%e}function Gxe(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function Hxe(n,e,t){return n!==e?(t-n)/(e-n):0}function Zm(n,e,t){return(1-t)*n+t*e}function Wxe(n,e,t,r){return Zm(n,e,1-Math.exp(-t*r))}function jxe(n,e=1){return e-Math.abs(ZP(n,e*2)-e)}function qxe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Xxe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Kxe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Yxe(n,e){return n+Math.random()*(e-n)}function Qxe(n){return n*(.5-Math.random())}function Zxe(n){n!==void 0&&(pk=n);let e=pk+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Jxe(n){return n*Qm}function eSe(n){return n*kg}function tSe(n){return(n&n-1)===0&&n!==0}function nSe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function rSe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function iSe(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),h=s((e-r)/2),d=o((e-r)/2),f=s((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*h,l*d,a*c);break;case"YZY":n.set(l*d,a*u,l*h,a*c);break;case"ZXZ":n.set(l*h,l*d,a*u,a*c);break;case"XZX":n.set(a*u,l*p,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*p,a*c);break;case"ZYZ":n.set(l*p,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function hi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function xt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const sSe={DEG2RAD:Qm,RAD2DEG:kg,generateUUID:Xa,clamp:Fr,euclideanModulo:ZP,mapLinear:Gxe,inverseLerp:Hxe,lerp:Zm,damp:Wxe,pingpong:jxe,smoothstep:qxe,smootherstep:Xxe,randInt:Kxe,randFloat:Yxe,randFloatSpread:Qxe,seededRandom:Zxe,degToRad:Jxe,radToDeg:eSe,isPowerOfTwo:tSe,ceilPowerOfTwo:nSe,floorPowerOfTwo:rSe,setQuaternionFromProperEuler:iSe,normalize:xt,denormalize:hi};class Bt{constructor(e=0,t=0){Bt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Fr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ps{constructor(e,t,r,i,s,o,a,l,c){ps.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c)}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],h=r[7],d=r[2],f=r[5],p=r[8],g=i[0],y=i[3],m=i[6],_=i[1],v=i[4],x=i[7],b=i[2],T=i[5],w=i[8];return s[0]=o*g+a*_+l*b,s[3]=o*y+a*v+l*T,s[6]=o*m+a*x+l*w,s[1]=c*g+u*_+h*b,s[4]=c*y+u*v+h*T,s[7]=c*m+u*x+h*w,s[2]=d*g+f*_+p*b,s[5]=d*y+f*v+p*T,s[8]=d*m+f*x+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=a*l-u*s,f=c*s-o*l,p=t*h+r*d+i*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=h*g,e[1]=(i*c-u*r)*g,e[2]=(a*r-i*o)*g,e[3]=d*g,e[4]=(u*t-i*l)*g,e[5]=(i*s-a*t)*g,e[6]=f*g,e[7]=(r*l-c*t)*g,e[8]=(o*t-r*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(sT.makeScale(e,t)),this}rotate(e){return this.premultiply(sT.makeRotation(-e)),this}translate(e,t){return this.premultiply(sT.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const sT=new ps;function oSe(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function IC(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function aSe(){const n=IC("canvas");return n.style.display="block",n}const mk={};function lSe(n){n in mk||(mk[n]=!0,console.warn(n))}const gk=new ps().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),yk=new ps().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Xp={[Ls]:{transfer:NC,primaries:dk,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n,fromReference:n=>n},[ht]:{transfer:hk,primaries:dk,luminanceCoefficients:[.2126,.7152,.0722],toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[S6]:{transfer:NC,primaries:fk,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.applyMatrix3(yk),fromReference:n=>n.applyMatrix3(gk)},[Cxe]:{transfer:hk,primaries:fk,luminanceCoefficients:[.2289,.6917,.0793],toReference:n=>n.convertSRGBToLinear().applyMatrix3(yk),fromReference:n=>n.applyMatrix3(gk).convertLinearToSRGB()}},cSe=new Set([Ls,S6]),Qi={enabled:!0,_workingColorSpace:Ls,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!cSe.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=Xp[e].toReference,i=Xp[t].fromReference;return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Xp[n].primaries},getTransfer:function(n){return n===Hu?NC:Xp[n].transfer},getLuminanceCoefficients:function(n,e=this._workingColorSpace){return n.fromArray(Xp[e].luminanceCoefficients)}};function Wd(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function oT(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Oh;class uSe{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Oh===void 0&&(Oh=IC("canvas")),Oh.width=e.width,Oh.height=e.height;const r=Oh.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Oh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=IC("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Wd(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Wd(t[r]/255)*255):t[r]=Wd(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let hSe=0;class R6{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:hSe++}),this.uuid=Xa(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(aT(i[o].image)):s.push(aT(i[o]))}else s=aT(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function aT(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?uSe.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let dSe=0;class pi extends op{constructor(e=pi.DEFAULT_IMAGE,t=pi.DEFAULT_MAPPING,r=_d,i=_d,s=Fi,o=ja,a=sp,l=za,c=pi.DEFAULT_ANISOTROPY,u=Hu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:dSe++}),this.uuid=Xa(),this.name="",this.source=new R6(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Bt(0,0),this.repeat=new Bt(1,1),this.center=new Bt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ps,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==_6)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case kx:e.x=e.x-Math.floor(e.x);break;case _d:e.x=e.x<0?0:1;break;case Ux:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case kx:e.y=e.y-Math.floor(e.y);break;case _d:e.y=e.y<0?0:1;break;case Ux:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}pi.DEFAULT_IMAGE=null;pi.DEFAULT_MAPPING=_6;pi.DEFAULT_ANISOTROPY=1;class tn{constructor(e=0,t=0,r=0,i=1){tn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],h=l[8],d=l[1],f=l[5],p=l[9],g=l[2],y=l[6],m=l[10];if(Math.abs(u-d)<.01&&Math.abs(h-g)<.01&&Math.abs(p-y)<.01){if(Math.abs(u+d)<.1&&Math.abs(h+g)<.1&&Math.abs(p+y)<.1&&Math.abs(c+f+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(c+1)/2,x=(f+1)/2,b=(m+1)/2,T=(u+d)/4,w=(h+g)/4,M=(p+y)/4;return v>x&&v>b?v<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(v),i=T/r,s=w/r):x>b?x<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(x),r=T/i,s=M/i):b<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(b),r=w/s,i=M/s),this.set(r,i,s,t),this}let _=Math.sqrt((y-p)*(y-p)+(h-g)*(h-g)+(d-u)*(d-u));return Math.abs(_)<.001&&(_=1),this.x=(y-p)/_,this.y=(h-g)/_,this.z=(d-u)/_,this.w=Math.acos((c+f+m-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ap extends op{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new tn(0,0,e,t),this.scissorTest=!1,this.viewport=new tn(0,0,e,t);const i={width:e,height:t,depth:1};r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Fi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},r);const s=new pi(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace);s.flipY=!1,s.generateMipmaps=r.generateMipmaps,s.internalFormat=r.internalFormat,this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let r=0,i=e.textures.length;r<i;r++)this.textures[r]=e.textures[r].clone(),this.textures[r].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new R6(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class fSe extends ap{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class pSe extends pi{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=kr,this.minFilter=kr,this.wrapR=_d,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Ty{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],h=r[i+3];const d=s[o+0],f=s[o+1],p=s[o+2],g=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=f,e[t+2]=p,e[t+3]=g;return}if(h!==g||l!==d||c!==f||u!==p){let y=1-a;const m=l*d+c*f+u*p+h*g,_=m>=0?1:-1,v=1-m*m;if(v>Number.EPSILON){const b=Math.sqrt(v),T=Math.atan2(b,m*_);y=Math.sin(y*T)/b,a=Math.sin(a*T)/b}const x=a*_;if(l=l*y+d*x,c=c*y+f*x,u=u*y+p*x,h=h*y+g*x,y===1-a){const b=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=b,c*=b,u*=b,h*=b}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],h=s[o],d=s[o+1],f=s[o+2],p=s[o+3];return e[t]=a*p+u*h+l*f-c*d,e[t+1]=l*p+u*d+c*h-a*f,e[t+2]=c*p+u*f+a*d-l*h,e[t+3]=u*p-a*h-l*d-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),h=a(s/2),d=l(r/2),f=l(i/2),p=l(s/2);switch(o){case"XYZ":this._x=d*u*h+c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h-d*f*p;break;case"YXZ":this._x=d*u*h+c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h+d*f*p;break;case"ZXY":this._x=d*u*h-c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h-d*f*p;break;case"ZYX":this._x=d*u*h-c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h+d*f*p;break;case"YZX":this._x=d*u*h+c*f*p,this._y=c*f*h+d*u*p,this._z=c*u*p-d*f*h,this._w=c*u*h-d*f*p;break;case"XZY":this._x=d*u*h-c*f*p,this._y=c*f*h-d*u*p,this._z=c*u*p+d*f*h,this._w=c*u*h+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],d=r+a+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-i)*f}else if(r>a&&r>h){const f=2*Math.sqrt(1+r-a-h);this._w=(u-l)/f,this._x=.25*f,this._y=(i+o)/f,this._z=(s+c)/f}else if(a>h){const f=2*Math.sqrt(1+a-r-h);this._w=(s-c)/f,this._x=(i+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+h-r-a);this._w=(o-i)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Fr(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,d=Math.sin(t*u)/c;return this._w=o*h+this._w*d,this._x=r*h+this._x*d,this._y=i*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ce{constructor(e=0,t=0,r=0){ce.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(vk.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(vk.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*t-s*i),h=2*(s*r-o*t);return this.x=t+l*c+o*h-a*u,this.y=r+l*u+a*c-s*h,this.z=i+l*h+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return lT.copy(this).projectOnVector(e),this.sub(lT)}reflect(e){return this.sub(lT.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Fr(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const lT=new ce,vk=new Ty;class My{constructor(e=new ce(1/0,1/0,1/0),t=new ce(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Xs.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Xs.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Xs.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Xs):Xs.fromBufferAttribute(s,o),Xs.applyMatrix4(e.matrixWorld),this.expandByPoint(Xs);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),H0.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),H0.copy(r.boundingBox)),H0.applyMatrix4(e.matrixWorld),this.union(H0)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Xs),Xs.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Kp),W0.subVectors(this.max,Kp),Fh.subVectors(e.a,Kp),kh.subVectors(e.b,Kp),Uh.subVectors(e.c,Kp),El.subVectors(kh,Fh),Al.subVectors(Uh,kh),Hc.subVectors(Fh,Uh);let t=[0,-El.z,El.y,0,-Al.z,Al.y,0,-Hc.z,Hc.y,El.z,0,-El.x,Al.z,0,-Al.x,Hc.z,0,-Hc.x,-El.y,El.x,0,-Al.y,Al.x,0,-Hc.y,Hc.x,0];return!cT(t,Fh,kh,Uh,W0)||(t=[1,0,0,0,1,0,0,0,1],!cT(t,Fh,kh,Uh,W0))?!1:(j0.crossVectors(El,Al),t=[j0.x,j0.y,j0.z],cT(t,Fh,kh,Uh,W0))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Xs).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Xs).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ha[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ha[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ha[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ha[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ha[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ha[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ha[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ha[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ha),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ha=[new ce,new ce,new ce,new ce,new ce,new ce,new ce,new ce],Xs=new ce,H0=new My,Fh=new ce,kh=new ce,Uh=new ce,El=new ce,Al=new ce,Hc=new ce,Kp=new ce,W0=new ce,j0=new ce,Wc=new ce;function cT(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Wc.fromArray(n,s);const a=i.x*Math.abs(Wc.x)+i.y*Math.abs(Wc.y)+i.z*Math.abs(Wc.z),l=e.dot(Wc),c=t.dot(Wc),u=r.dot(Wc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const mSe=new My,Yp=new ce,uT=new ce;class JP{constructor(e=new ce,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):mSe.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Yp.subVectors(e,this.center);const t=Yp.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Yp,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(uT.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Yp.copy(e.center).add(uT)),this.expandByPoint(Yp.copy(e.center).sub(uT))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const da=new ce,hT=new ce,q0=new ce,Cl=new ce,dT=new ce,X0=new ce,fT=new ce;class gSe{constructor(e=new ce,t=new ce(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,da)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=da.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(da.copy(this.origin).addScaledVector(this.direction,t),da.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){hT.copy(e).add(t).multiplyScalar(.5),q0.copy(t).sub(e).normalize(),Cl.copy(this.origin).sub(hT);const s=e.distanceTo(t)*.5,o=-this.direction.dot(q0),a=Cl.dot(this.direction),l=-Cl.dot(q0),c=Cl.lengthSq(),u=Math.abs(1-o*o);let h,d,f,p;if(u>0)if(h=o*l-a,d=o*a-l,p=s*u,h>=0)if(d>=-p)if(d<=p){const g=1/u;h*=g,d*=g,f=h*(h+o*d+2*a)+d*(o*h+d+2*l)+c}else d=s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d=-s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;else d<=-p?(h=Math.max(0,-(-o*s+a)),d=h>0?-s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c):d<=p?(h=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+c):(h=Math.max(0,-(o*s+a)),d=h>0?s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+c);else d=o>0?-s:s,h=Math.max(0,-(o*d+a)),f=-h*h+d*(d+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(hT).addScaledVector(q0,d),f}intersectSphere(e,t){da.subVectors(e.center,this.origin);const r=da.dot(this.direction),i=da.dot(da)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,d=this.origin;return c>=0?(r=(e.min.x-d.x)*c,i=(e.max.x-d.x)*c):(r=(e.max.x-d.x)*c,i=(e.min.x-d.x)*c),u>=0?(s=(e.min.y-d.y)*u,o=(e.max.y-d.y)*u):(s=(e.max.y-d.y)*u,o=(e.min.y-d.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,da)!==null}intersectTriangle(e,t,r,i,s){dT.subVectors(t,e),X0.subVectors(r,e),fT.crossVectors(dT,X0);let o=this.direction.dot(fT),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Cl.subVectors(this.origin,e);const l=a*this.direction.dot(X0.crossVectors(Cl,X0));if(l<0)return null;const c=a*this.direction.dot(dT.cross(Cl));if(c<0||l+c>o)return null;const u=-a*Cl.dot(fT);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Bn{constructor(e,t,r,i,s,o,a,l,c,u,h,d,f,p,g,y){Bn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,c,u,h,d,f,p,g,y)}set(e,t,r,i,s,o,a,l,c,u,h,d,f,p,g,y){const m=this.elements;return m[0]=e,m[4]=t,m[8]=r,m[12]=i,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=u,m[10]=h,m[14]=d,m[3]=f,m[7]=p,m[11]=g,m[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Bn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Bh.setFromMatrixColumn(e,0).length(),s=1/Bh.setFromMatrixColumn(e,1).length(),o=1/Bh.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=o*u,f=o*h,p=a*u,g=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=f+p*c,t[5]=d-g*c,t[9]=-a*l,t[2]=g-d*c,t[6]=p+f*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*u,f=l*h,p=c*u,g=c*h;t[0]=d+g*a,t[4]=p*a-f,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=f*a-p,t[6]=g+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*u,f=l*h,p=c*u,g=c*h;t[0]=d-g*a,t[4]=-o*h,t[8]=p+f*a,t[1]=f+p*a,t[5]=o*u,t[9]=g-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*u,f=o*h,p=a*u,g=a*h;t[0]=l*u,t[4]=p*c-f,t[8]=d*c+g,t[1]=l*h,t[5]=g*c+d,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,f=o*c,p=a*l,g=a*c;t[0]=l*u,t[4]=g-d*h,t[8]=p*h+f,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*h+p,t[10]=d-g*h}else if(e.order==="XZY"){const d=o*l,f=o*c,p=a*l,g=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=d*h+g,t[5]=o*u,t[9]=f*h-p,t[2]=p*h-f,t[6]=a*u,t[10]=g*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ySe,e,vSe)}lookAt(e,t,r){const i=this.elements;return ji.subVectors(e,t),ji.lengthSq()===0&&(ji.z=1),ji.normalize(),Rl.crossVectors(r,ji),Rl.lengthSq()===0&&(Math.abs(r.z)===1?ji.x+=1e-4:ji.z+=1e-4,ji.normalize(),Rl.crossVectors(r,ji)),Rl.normalize(),K0.crossVectors(ji,Rl),i[0]=Rl.x,i[4]=K0.x,i[8]=ji.x,i[1]=Rl.y,i[5]=K0.y,i[9]=ji.y,i[2]=Rl.z,i[6]=K0.z,i[10]=ji.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],h=r[5],d=r[9],f=r[13],p=r[2],g=r[6],y=r[10],m=r[14],_=r[3],v=r[7],x=r[11],b=r[15],T=i[0],w=i[4],M=i[8],C=i[12],S=i[1],E=i[5],I=i[9],F=i[13],N=i[2],R=i[6],D=i[10],j=i[14],L=i[3],W=i[7],z=i[11],X=i[15];return s[0]=o*T+a*S+l*N+c*L,s[4]=o*w+a*E+l*R+c*W,s[8]=o*M+a*I+l*D+c*z,s[12]=o*C+a*F+l*j+c*X,s[1]=u*T+h*S+d*N+f*L,s[5]=u*w+h*E+d*R+f*W,s[9]=u*M+h*I+d*D+f*z,s[13]=u*C+h*F+d*j+f*X,s[2]=p*T+g*S+y*N+m*L,s[6]=p*w+g*E+y*R+m*W,s[10]=p*M+g*I+y*D+m*z,s[14]=p*C+g*F+y*j+m*X,s[3]=_*T+v*S+x*N+b*L,s[7]=_*w+v*E+x*R+b*W,s[11]=_*M+v*I+x*D+b*z,s[15]=_*C+v*F+x*j+b*X,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],d=e[10],f=e[14],p=e[3],g=e[7],y=e[11],m=e[15];return p*(+s*l*h-i*c*h-s*a*d+r*c*d+i*a*f-r*l*f)+g*(+t*l*f-t*c*d+s*o*d-i*o*f+i*c*u-s*l*u)+y*(+t*c*h-t*a*f-s*o*h+r*o*f+s*a*u-r*c*u)+m*(-i*a*u-t*l*h+t*a*d+i*o*h-r*o*d+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],g=e[13],y=e[14],m=e[15],_=h*y*c-g*d*c+g*l*f-a*y*f-h*l*m+a*d*m,v=p*d*c-u*y*c-p*l*f+o*y*f+u*l*m-o*d*m,x=u*g*c-p*h*c+p*a*f-o*g*f-u*a*m+o*h*m,b=p*h*l-u*g*l-p*a*d+o*g*d+u*a*y-o*h*y,T=t*_+r*v+i*x+s*b;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/T;return e[0]=_*w,e[1]=(g*d*s-h*y*s-g*i*f+r*y*f+h*i*m-r*d*m)*w,e[2]=(a*y*s-g*l*s+g*i*c-r*y*c-a*i*m+r*l*m)*w,e[3]=(h*l*s-a*d*s-h*i*c+r*d*c+a*i*f-r*l*f)*w,e[4]=v*w,e[5]=(u*y*s-p*d*s+p*i*f-t*y*f-u*i*m+t*d*m)*w,e[6]=(p*l*s-o*y*s-p*i*c+t*y*c+o*i*m-t*l*m)*w,e[7]=(o*d*s-u*l*s+u*i*c-t*d*c-o*i*f+t*l*f)*w,e[8]=x*w,e[9]=(p*h*s-u*g*s-p*r*f+t*g*f+u*r*m-t*h*m)*w,e[10]=(o*g*s-p*a*s+p*r*c-t*g*c-o*r*m+t*a*m)*w,e[11]=(u*a*s-o*h*s-u*r*c+t*h*c+o*r*f-t*a*f)*w,e[12]=b*w,e[13]=(u*g*i-p*h*i+p*r*d-t*g*d-u*r*y+t*h*y)*w,e[14]=(p*a*i-o*g*i-p*r*l+t*g*l+o*r*y-t*a*y)*w,e[15]=(o*h*i-u*a*i+u*r*l-t*h*l-o*r*d+t*a*d)*w,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,d=s*c,f=s*u,p=s*h,g=o*u,y=o*h,m=a*h,_=l*c,v=l*u,x=l*h,b=r.x,T=r.y,w=r.z;return i[0]=(1-(g+m))*b,i[1]=(f+x)*b,i[2]=(p-v)*b,i[3]=0,i[4]=(f-x)*T,i[5]=(1-(d+m))*T,i[6]=(y+_)*T,i[7]=0,i[8]=(p+v)*w,i[9]=(y-_)*w,i[10]=(1-(d+g))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Bh.set(i[0],i[1],i[2]).length();const o=Bh.set(i[4],i[5],i[6]).length(),a=Bh.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ks.copy(this);const c=1/s,u=1/o,h=1/a;return Ks.elements[0]*=c,Ks.elements[1]*=c,Ks.elements[2]*=c,Ks.elements[4]*=u,Ks.elements[5]*=u,Ks.elements[6]*=u,Ks.elements[8]*=h,Ks.elements[9]*=h,Ks.elements[10]*=h,t.setFromRotationMatrix(Ks),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=fo){const l=this.elements,c=2*s/(t-e),u=2*s/(r-i),h=(t+e)/(t-e),d=(r+i)/(r-i);let f,p;if(a===fo)f=-(o+s)/(o-s),p=-2*o*s/(o-s);else if(a===Wu)f=-o/(o-s),p=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=fo){const l=this.elements,c=1/(t-e),u=1/(r-i),h=1/(o-s),d=(t+e)*c,f=(r+i)*u;let p,g;if(a===fo)p=(o+s)*h,g=-2*h;else if(a===Wu)p=s*h,g=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-f,l[2]=0,l[6]=0,l[10]=g,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Bh=new ce,Ks=new Bn,ySe=new ce(0,0,0),vSe=new ce(1,1,1),Rl=new ce,K0=new ce,ji=new ce,_k=new Bn,xk=new Ty;class Ko{constructor(e=0,t=0,r=0,i=Ko.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],h=i[2],d=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(Fr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Fr(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Fr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Fr(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Fr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Fr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return _k.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_k,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return xk.setFromEuler(this),this.setFromQuaternion(xk,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ko.DEFAULT_ORDER="XYZ";class _Se{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let xSe=0;const Sk=new ce,zh=new Ty,fa=new Bn,Y0=new ce,Qp=new ce,SSe=new ce,bSe=new Ty,bk=new ce(1,0,0),wk=new ce(0,1,0),Tk=new ce(0,0,1),Mk={type:"added"},wSe={type:"removed"},$h={type:"childadded",child:null},pT={type:"childremoved",child:null};class Ar extends op{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:xSe++}),this.uuid=Xa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ar.DEFAULT_UP.clone();const e=new ce,t=new Ko,r=new Ty,i=new ce(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Bn},normalMatrix:{value:new ps}}),this.matrix=new Bn,this.matrixWorld=new Bn,this.matrixAutoUpdate=Ar.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ar.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new _Se,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return zh.setFromAxisAngle(e,t),this.quaternion.multiply(zh),this}rotateOnWorldAxis(e,t){return zh.setFromAxisAngle(e,t),this.quaternion.premultiply(zh),this}rotateX(e){return this.rotateOnAxis(bk,e)}rotateY(e){return this.rotateOnAxis(wk,e)}rotateZ(e){return this.rotateOnAxis(Tk,e)}translateOnAxis(e,t){return Sk.copy(e).applyQuaternion(this.quaternion),this.position.add(Sk.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(bk,e)}translateY(e){return this.translateOnAxis(wk,e)}translateZ(e){return this.translateOnAxis(Tk,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(fa.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Y0.copy(e):Y0.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Qp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fa.lookAt(Qp,Y0,this.up):fa.lookAt(Y0,Qp,this.up),this.quaternion.setFromRotationMatrix(fa),i&&(fa.extractRotation(i.matrixWorld),zh.setFromRotationMatrix(fa),this.quaternion.premultiply(zh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Mk),$h.child=e,this.dispatchEvent($h),$h.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(wSe),pT.child=e,this.dispatchEvent(pT),pT.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),fa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),fa.multiply(e.parent.matrixWorld)),e.applyMatrix4(fa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Mk),$h.child=e,this.dispatchEvent($h),$h.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qp,e,SSe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qp,bSe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),d=o(e.skeletons),f=o(e.animations),p=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),d.length>0&&(r.skeletons=d),f.length>0&&(r.animations=f),p.length>0&&(r.nodes=p)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Ar.DEFAULT_UP=new ce(0,1,0);Ar.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ar.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ys=new ce,pa=new ce,mT=new ce,ma=new ce,Vh=new ce,Gh=new ce,Ek=new ce,gT=new ce,yT=new ce,vT=new ce,_T=new tn,xT=new tn,ST=new tn;class co{constructor(e=new ce,t=new ce,r=new ce){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ys.subVectors(e,t),i.cross(Ys);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Ys.subVectors(i,t),pa.subVectors(r,t),mT.subVectors(e,t);const o=Ys.dot(Ys),a=Ys.dot(pa),l=Ys.dot(mT),c=pa.dot(pa),u=pa.dot(mT),h=o*c-a*a;if(h===0)return s.set(0,0,0),null;const d=1/h,f=(c*l-a*u)*d,p=(o*u-a*l)*d;return s.set(1-f-p,p,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,ma)===null?!1:ma.x>=0&&ma.y>=0&&ma.x+ma.y<=1}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,ma)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ma.x),l.addScaledVector(o,ma.y),l.addScaledVector(a,ma.z),l)}static getInterpolatedAttribute(e,t,r,i,s,o){return _T.setScalar(0),xT.setScalar(0),ST.setScalar(0),_T.fromBufferAttribute(e,t),xT.fromBufferAttribute(e,r),ST.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(_T,s.x),o.addScaledVector(xT,s.y),o.addScaledVector(ST,s.z),o}static isFrontFacing(e,t,r,i){return Ys.subVectors(r,t),pa.subVectors(e,t),Ys.cross(pa).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ys.subVectors(this.c,this.b),pa.subVectors(this.a,this.b),Ys.cross(pa).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return co.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return co.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,s){return co.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return co.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return co.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Vh.subVectors(i,r),Gh.subVectors(s,r),gT.subVectors(e,r);const l=Vh.dot(gT),c=Gh.dot(gT);if(l<=0&&c<=0)return t.copy(r);yT.subVectors(e,i);const u=Vh.dot(yT),h=Gh.dot(yT);if(u>=0&&h<=u)return t.copy(i);const d=l*h-u*c;if(d<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(Vh,o);vT.subVectors(e,s);const f=Vh.dot(vT),p=Gh.dot(vT);if(p>=0&&f<=p)return t.copy(s);const g=f*c-l*p;if(g<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(r).addScaledVector(Gh,a);const y=u*p-f*h;if(y<=0&&h-u>=0&&f-p>=0)return Ek.subVectors(s,i),a=(h-u)/(h-u+(f-p)),t.copy(i).addScaledVector(Ek,a);const m=1/(y+g+d);return o=g*m,a=d*m,t.copy(r).addScaledVector(Vh,o).addScaledVector(Gh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const N6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Nl={h:0,s:0,l:0},Q0={h:0,s:0,l:0};function bT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class rn{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ht){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Qi.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Qi.workingColorSpace){return this.r=e,this.g=t,this.b=r,Qi.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Qi.workingColorSpace){if(e=ZP(e,1),t=Fr(t,0,1),r=Fr(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=bT(o,s,e+1/3),this.g=bT(o,s,e),this.b=bT(o,s,e-1/3)}return Qi.toWorkingColorSpace(this,i),this}setStyle(e,t=ht){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ht){const r=N6[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Wd(e.r),this.g=Wd(e.g),this.b=Wd(e.b),this}copyLinearToSRGB(e){return this.r=oT(e.r),this.g=oT(e.g),this.b=oT(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ht){return Qi.fromWorkingColorSpace(Wr.copy(this),e),Math.round(Fr(Wr.r*255,0,255))*65536+Math.round(Fr(Wr.g*255,0,255))*256+Math.round(Fr(Wr.b*255,0,255))}getHexString(e=ht){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Qi.workingColorSpace){Qi.fromWorkingColorSpace(Wr.copy(this),t);const r=Wr.r,i=Wr.g,s=Wr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Qi.workingColorSpace){return Qi.fromWorkingColorSpace(Wr.copy(this),t),e.r=Wr.r,e.g=Wr.g,e.b=Wr.b,e}getStyle(e=ht){Qi.fromWorkingColorSpace(Wr.copy(this),e);const t=Wr.r,r=Wr.g,i=Wr.b;return e!==ht?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(Nl),this.setHSL(Nl.h+e,Nl.s+t,Nl.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(Nl),e.getHSL(Q0);const r=Zm(Nl.h,Q0.h,t),i=Zm(Nl.s,Q0.s,t),s=Zm(Nl.l,Q0.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Wr=new rn;rn.NAMES=N6;let TSe=0;class ki extends op{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:TSe++}),this.uuid=Xa(),this.name="",this.type="Material",this.blending=dc,this.side=Og,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Dx,this.blendDst=Ox,this.blendEquation=Hl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new rn(0,0,0),this.blendAlpha=0,this.depthFunc=Fx,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=PC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=eu,this.stencilZFail=eu,this.stencilZPass=eu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==dc&&(r.blending=this.blending),this.side!==Og&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==Dx&&(r.blendSrc=this.blendSrc),this.blendDst!==Ox&&(r.blendDst=this.blendDst),this.blendEquation!==Hl&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==Fx&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==PC&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==eu&&(r.stencilFail=this.stencilFail),this.stencilZFail!==eu&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==eu&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Wb extends ki{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new rn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ko,this.combine=Hb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Pa=MSe();function MSe(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):c<-14?(r[l]=1024>>-c-14,r[l|256]=1024>>-c-14|32768,i[l]=-c-1,i[l|256]=-c-1):c<=15?(r[l]=c+15<<10,r[l|256]=c+15<<10|32768,i[l]=13,i[l|256]=13):c<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function qi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Fr(n,-65504,65504),Pa.floatView[0]=n;const e=Pa.uint32View[0],t=e>>23&511;return Pa.baseTable[t]+((e&8388607)>>Pa.shiftTable[t])}function Z0(n){const e=n>>10;return Pa.uint32View[0]=Pa.mantissaTable[Pa.offsetTable[e]+(n&1023)]+Pa.exponentTable[e],Pa.floatView[0]}const er=new ce,J0=new Bt;class Ds{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Bx,this.updateRanges=[],this.gpuType=is,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)J0.fromBufferAttribute(this,t),J0.applyMatrix3(e),this.setXY(t,J0.x,J0.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)er.fromBufferAttribute(this,t),er.applyMatrix3(e),this.setXYZ(t,er.x,er.y,er.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)er.fromBufferAttribute(this,t),er.applyMatrix4(e),this.setXYZ(t,er.x,er.y,er.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)er.fromBufferAttribute(this,t),er.applyNormalMatrix(e),this.setXYZ(t,er.x,er.y,er.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)er.fromBufferAttribute(this,t),er.transformDirection(e),this.setXYZ(t,er.x,er.y,er.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=hi(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=xt(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=hi(t,this.array)),t}setX(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=hi(t,this.array)),t}setY(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=hi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=hi(t,this.array)),t}setW(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array),i=xt(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array),i=xt(i,this.array),s=xt(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Bx&&(e.usage=this.usage),e}}class P6 extends Ds{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class I6 extends Ds{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class L6 extends Ds{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=Z0(this.array[e*this.itemSize]);return this.normalized&&(t=hi(t,this.array)),t}setX(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize]=qi(t),this}getY(e){let t=Z0(this.array[e*this.itemSize+1]);return this.normalized&&(t=hi(t,this.array)),t}setY(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+1]=qi(t),this}getZ(e){let t=Z0(this.array[e*this.itemSize+2]);return this.normalized&&(t=hi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+2]=qi(t),this}getW(e){let t=Z0(this.array[e*this.itemSize+3]);return this.normalized&&(t=hi(t,this.array)),t}setW(e,t){return this.normalized&&(t=xt(t,this.array)),this.array[e*this.itemSize+3]=qi(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array)),this.array[e+0]=qi(t),this.array[e+1]=qi(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array),i=xt(i,this.array)),this.array[e+0]=qi(t),this.array[e+1]=qi(r),this.array[e+2]=qi(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array),i=xt(i,this.array),s=xt(s,this.array)),this.array[e+0]=qi(t),this.array[e+1]=qi(r),this.array[e+2]=qi(i),this.array[e+3]=qi(s),this}}class Ka extends Ds{constructor(e,t,r){super(new Float32Array(e),t,r)}}let ESe=0;const vs=new Bn,wT=new Ar,Hh=new ce,Xi=new My,Zp=new My,xr=new ce;class rh extends op{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ESe++}),this.uuid=Xa(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(oSe(e)?I6:P6)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new ps().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return vs.makeRotationFromQuaternion(e),this.applyMatrix4(vs),this}rotateX(e){return vs.makeRotationX(e),this.applyMatrix4(vs),this}rotateY(e){return vs.makeRotationY(e),this.applyMatrix4(vs),this}rotateZ(e){return vs.makeRotationZ(e),this.applyMatrix4(vs),this}translate(e,t,r){return vs.makeTranslation(e,t,r),this.applyMatrix4(vs),this}scale(e,t,r){return vs.makeScale(e,t,r),this.applyMatrix4(vs),this}lookAt(e){return wT.lookAt(e),wT.updateMatrix(),this.applyMatrix4(wT.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hh).negate(),this.translate(Hh.x,Hh.y,Hh.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ka(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new My);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ce(-1/0,-1/0,-1/0),new ce(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Xi.setFromBufferAttribute(s),this.morphTargetsRelative?(xr.addVectors(this.boundingBox.min,Xi.min),this.boundingBox.expandByPoint(xr),xr.addVectors(this.boundingBox.max,Xi.max),this.boundingBox.expandByPoint(xr)):(this.boundingBox.expandByPoint(Xi.min),this.boundingBox.expandByPoint(Xi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new JP);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ce,1/0);return}if(e){const r=this.boundingSphere.center;if(Xi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Zp.setFromBufferAttribute(a),this.morphTargetsRelative?(xr.addVectors(Xi.min,Zp.min),Xi.expandByPoint(xr),xr.addVectors(Xi.max,Zp.max),Xi.expandByPoint(xr)):(Xi.expandByPoint(Zp.min),Xi.expandByPoint(Zp.max))}Xi.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)xr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(xr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)xr.fromBufferAttribute(a,c),l&&(Hh.fromBufferAttribute(e,c),xr.add(Hh)),i=Math.max(i,r.distanceToSquared(xr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ds(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let M=0;M<r.count;M++)a[M]=new ce,l[M]=new ce;const c=new ce,u=new ce,h=new ce,d=new Bt,f=new Bt,p=new Bt,g=new ce,y=new ce;function m(M,C,S){c.fromBufferAttribute(r,M),u.fromBufferAttribute(r,C),h.fromBufferAttribute(r,S),d.fromBufferAttribute(s,M),f.fromBufferAttribute(s,C),p.fromBufferAttribute(s,S),u.sub(c),h.sub(c),f.sub(d),p.sub(d);const E=1/(f.x*p.y-p.x*f.y);isFinite(E)&&(g.copy(u).multiplyScalar(p.y).addScaledVector(h,-f.y).multiplyScalar(E),y.copy(h).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(E),a[M].add(g),a[C].add(g),a[S].add(g),l[M].add(y),l[C].add(y),l[S].add(y))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let M=0,C=_.length;M<C;++M){const S=_[M],E=S.start,I=S.count;for(let F=E,N=E+I;F<N;F+=3)m(e.getX(F+0),e.getX(F+1),e.getX(F+2))}const v=new ce,x=new ce,b=new ce,T=new ce;function w(M){b.fromBufferAttribute(i,M),T.copy(b);const C=a[M];v.copy(C),v.sub(b.multiplyScalar(b.dot(C))).normalize(),x.crossVectors(T,C);const E=x.dot(l[M])<0?-1:1;o.setXYZW(M,v.x,v.y,v.z,E)}for(let M=0,C=_.length;M<C;++M){const S=_[M],E=S.start,I=S.count;for(let F=E,N=E+I;F<N;F+=3)w(e.getX(F+0)),w(e.getX(F+1)),w(e.getX(F+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Ds(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,f=r.count;d<f;d++)r.setXYZ(d,0,0,0);const i=new ce,s=new ce,o=new ce,a=new ce,l=new ce,c=new ce,u=new ce,h=new ce;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),g=e.getX(d+1),y=e.getX(d+2);i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,y),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),a.fromBufferAttribute(r,p),l.fromBufferAttribute(r,g),c.fromBufferAttribute(r,y),a.add(u),l.add(u),c.add(u),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(g,l.x,l.y,l.z),r.setXYZ(y,c.x,c.y,c.z)}else for(let d=0,f=t.count;d<f;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),u.subVectors(o,s),h.subVectors(i,s),u.cross(h),r.setXYZ(d+0,u.x,u.y,u.z),r.setXYZ(d+1,u.x,u.y,u.z),r.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)xr.fromBufferAttribute(e,t),xr.normalize(),e.setXYZ(t,xr.x,xr.y,xr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,d=new c.constructor(l.length*u);let f=0,p=0;for(let g=0,y=l.length;g<y;g++){a.isInterleavedBufferAttribute?f=l[g]*a.data.stride+a.offset:f=l[g]*u;for(let m=0;m<u;m++)d[p++]=c[f++]}return new Ds(d,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new rh,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const d=c[u],f=e(d,r);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,d=c.length;h<d;h++){const f=c[h];u.push(f.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let d=0,f=h.length;d<f;d++)u.push(h[d].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ak=new Bn,jc=new gSe,ev=new JP,Ck=new ce,tv=new ce,nv=new ce,rv=new ce,TT=new ce,iv=new ce,Rk=new ce,sv=new ce;class ju extends Ar{constructor(e=new rh,t=new Wb){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){iv.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],h=s[l];u!==0&&(TT.fromBufferAttribute(h,e),o?iv.addScaledVector(TT,u):iv.addScaledVector(TT.sub(t),u))}t.add(iv)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),ev.copy(r.boundingSphere),ev.applyMatrix4(s),jc.copy(e.ray).recast(e.near),!(ev.containsPoint(jc.origin)===!1&&(jc.intersectSphere(ev,Ck)===null||jc.origin.distanceToSquared(Ck)>(e.far-e.near)**2))&&(Ak.copy(s).invert(),jc.copy(e.ray).applyMatrix4(Ak),!(r.boundingBox!==null&&jc.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,jc)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,d=s.groups,f=s.drawRange;if(a!==null)if(Array.isArray(o))for(let p=0,g=d.length;p<g;p++){const y=d[p],m=o[y.materialIndex],_=Math.max(y.start,f.start),v=Math.min(a.count,Math.min(y.start+y.count,f.start+f.count));for(let x=_,b=v;x<b;x+=3){const T=a.getX(x),w=a.getX(x+1),M=a.getX(x+2);i=ov(this,m,e,r,c,u,h,T,w,M),i&&(i.faceIndex=Math.floor(x/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),g=Math.min(a.count,f.start+f.count);for(let y=p,m=g;y<m;y+=3){const _=a.getX(y),v=a.getX(y+1),x=a.getX(y+2);i=ov(this,o,e,r,c,u,h,_,v,x),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let p=0,g=d.length;p<g;p++){const y=d[p],m=o[y.materialIndex],_=Math.max(y.start,f.start),v=Math.min(l.count,Math.min(y.start+y.count,f.start+f.count));for(let x=_,b=v;x<b;x+=3){const T=x,w=x+1,M=x+2;i=ov(this,m,e,r,c,u,h,T,w,M),i&&(i.faceIndex=Math.floor(x/3),i.face.materialIndex=y.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),g=Math.min(l.count,f.start+f.count);for(let y=p,m=g;y<m;y+=3){const _=y,v=y+1,x=y+2;i=ov(this,o,e,r,c,u,h,_,v,x),i&&(i.faceIndex=Math.floor(y/3),t.push(i))}}}}function ASe(n,e,t,r,i,s,o,a){let l;if(e.side===cl?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Og,a),l===null)return null;sv.copy(a),sv.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(sv);return c<t.near||c>t.far?null:{distance:c,point:sv.clone(),object:n}}function ov(n,e,t,r,i,s,o,a,l,c){n.getVertexPosition(a,tv),n.getVertexPosition(l,nv),n.getVertexPosition(c,rv);const u=ASe(n,e,t,r,tv,nv,rv,Rk);if(u){const h=new ce;co.getBarycoord(Rk,tv,nv,rv,h),i&&(u.uv=co.getInterpolatedAttribute(i,a,l,c,h,new Bt)),s&&(u.uv1=co.getInterpolatedAttribute(s,a,l,c,h,new Bt)),o&&(u.normal=co.getInterpolatedAttribute(o,a,l,c,h,new ce),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new ce,materialIndex:0};co.getNormal(tv,nv,rv,d.normal),u.face=d,u.barycoord=h}return u}class Ey extends rh{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let d=0,f=0;p("z","y","x",-1,-1,r,t,e,o,s,0),p("z","y","x",1,-1,r,t,-e,o,s,1),p("x","z","y",1,1,e,r,t,i,o,2),p("x","z","y",1,-1,e,r,-t,i,o,3),p("x","y","z",1,-1,e,t,r,i,s,4),p("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Ka(c,3)),this.setAttribute("normal",new Ka(u,3)),this.setAttribute("uv",new Ka(h,2));function p(g,y,m,_,v,x,b,T,w,M,C){const S=x/w,E=b/M,I=x/2,F=b/2,N=T/2,R=w+1,D=M+1;let j=0,L=0;const W=new ce;for(let z=0;z<D;z++){const X=z*E-F;for(let U=0;U<R;U++){const te=U*S-I;W[g]=te*_,W[y]=X*v,W[m]=N,c.push(W.x,W.y,W.z),W[g]=0,W[y]=0,W[m]=T>0?1:-1,u.push(W.x,W.y,W.z),h.push(U/w),h.push(1-z/M),j+=1}}for(let z=0;z<M;z++)for(let X=0;X<w;X++){const U=d+X+R*z,te=d+X+R*(z+1),k=d+(X+1)+R*(z+1),V=d+(X+1)+R*z;l.push(U,te,V),l.push(te,k,V),L+=6}a.addGroup(f,L,C),f+=L,d+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ey(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function D6(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function CSe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}var RSe=`
void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}
`,NSe=`
void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}
`;class PSe extends ki{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=RSe,this.fragmentShader=NSe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=D6(e.uniforms),this.uniformsGroups=CSe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class O6 extends Ar{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Bn,this.projectionMatrix=new Bn,this.projectionMatrixInverse=new Bn,this.coordinateSystem=fo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Pl=new ce,Nk=new Bt,Pk=new Bt;class Ma extends O6{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=kg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Qm*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return kg*2*Math.atan(Math.tan(Qm*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Pl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Pl.x,Pl.y).multiplyScalar(-e/Pl.z),Pl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Pl.x,Pl.y).multiplyScalar(-e/Pl.z)}getViewSize(e,t){return this.getViewBounds(e,Nk,Pk),t.subVectors(Pk,Nk)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Qm*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Wh=-90,jh=1;class F6 extends Ar{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Ma(Wh,jh,e,t);i.layers=this.layers,this.add(i);const s=new Ma(Wh,jh,e,t);s.layers=this.layers,this.add(s);const o=new Ma(Wh,jh,e,t);o.layers=this.layers,this.add(o);const a=new Ma(Wh,jh,e,t);a.layers=this.layers,this.add(a);const l=new Ma(Wh,jh,e,t);l.layers=this.layers,this.add(l);const c=new Ma(Wh,jh,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===fo)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Wu)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,h=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const g=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,s),e.setRenderTarget(r,1,i),e.render(t,o),e.setRenderTarget(r,2,i),e.render(t,a),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,c),r.texture.generateMipmaps=g,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(h,d,f),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class e2 extends pi{constructor(e,t,r,i,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Gu,super(e,t,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ISe extends fSe{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new e2(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Fi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ey(5,5,5),s=new PSe({name:"CubemapFromEquirect",uniforms:D6(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:cl,blending:kf});s.uniforms.tEquirect.value=t;const o=new ju(i,s),a=t.minFilter;return t.minFilter===ja&&(t.minFilter=Fi),new F6(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}class k6 extends Ar{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ko,this.environmentIntensity=1,this.environmentRotation=new Ko,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class U6{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Bx,this.updateRanges=[],this.version=0,this.uuid=Xa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ii=new ce;class t2{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)ii.fromBufferAttribute(this,t),ii.applyMatrix4(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ii.fromBufferAttribute(this,t),ii.applyNormalMatrix(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ii.fromBufferAttribute(this,t),ii.transformDirection(e),this.setXYZ(t,ii.x,ii.y,ii.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=hi(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=xt(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=hi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=hi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=hi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=hi(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array),i=xt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=xt(t,this.array),r=xt(r,this.array),i=xt(i,this.array),s=xt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Ds(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new t2(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class B6 extends ki{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new rn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class LSe extends pi{constructor(e=null,t=1,r=1,i,s,o,a,l,c=kr,u=kr,h,d){super(null,o,a,l,c,u,i,s,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class DSe extends Ds{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const MT=new ce,OSe=new ce,FSe=new ps;class Bl{constructor(e=new ce(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=MT.subVectors(r,t).cross(OSe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(MT),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||FSe.getNormalMatrix(e),i=this.coplanarPoint(MT).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const qc=new JP,av=new ce;class z6{constructor(e=new Bl,t=new Bl,r=new Bl,i=new Bl,s=new Bl,o=new Bl){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=fo){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],h=i[6],d=i[7],f=i[8],p=i[9],g=i[10],y=i[11],m=i[12],_=i[13],v=i[14],x=i[15];if(r[0].setComponents(l-s,d-c,y-f,x-m).normalize(),r[1].setComponents(l+s,d+c,y+f,x+m).normalize(),r[2].setComponents(l+o,d+u,y+p,x+_).normalize(),r[3].setComponents(l-o,d-u,y-p,x-_).normalize(),r[4].setComponents(l-a,d-h,y-g,x-v).normalize(),t===fo)r[5].setComponents(l+a,d+h,y+g,x+v).normalize();else if(t===Wu)r[5].setComponents(a,h,g,v).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),qc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),qc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(qc)}intersectsSprite(e){return qc.center.set(0,0,0),qc.radius=.7071067811865476,qc.applyMatrix4(e.matrixWorld),this.intersectsSphere(qc)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(av.x=i.normal.x>0?e.max.x:e.min.x,av.y=i.normal.y>0?e.max.y:e.min.y,av.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(av)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class n2 extends ki{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new rn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}class $6 extends ki{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new rn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}class kSe extends pi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=kr,this.minFilter=kr,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ay extends pi{constructor(e,t,r,i,s,o,a,l,c,u=Cu){if(u!==Cu&&u!==Bf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&u===Cu&&(r=Dr),r===void 0&&u===Bf&&(r=wy),super(null,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:kr,this.minFilter=l!==void 0?l:kr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class r2 extends rh{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new ce,d=new ce,f=[],p=[],g=[],y=[];for(let m=0;m<=r;m++){const _=[],v=m/r;let x=0;m===0&&o===0?x=.5/t:m===r&&l===Math.PI&&(x=-.5/t);for(let b=0;b<=t;b++){const T=b/t;h.x=-e*Math.cos(i+T*s)*Math.sin(o+v*a),h.y=e*Math.cos(o+v*a),h.z=e*Math.sin(i+T*s)*Math.sin(o+v*a),p.push(h.x,h.y,h.z),d.copy(h).normalize(),g.push(d.x,d.y,d.z),y.push(T+x,1-v),_.push(c++)}u.push(_)}for(let m=0;m<r;m++)for(let _=0;_<t;_++){const v=u[m][_+1],x=u[m][_],b=u[m+1][_],T=u[m+1][_+1];(m!==0||o>0)&&f.push(v,x,T),(m!==r-1||l<Math.PI)&&f.push(x,b,T)}this.setIndex(f),this.setAttribute("position",new Ka(p,3)),this.setAttribute("normal",new Ka(g,3)),this.setAttribute("uv",new Ka(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new r2(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class V6 extends ki{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new rn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class i2 extends ki{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new rn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xc,this.normalScale=new Bt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ko,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class G6 extends i2{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Bt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Fr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new rn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new rn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new rn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class H6 extends ki{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new rn(16777215),this.specular=new rn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xc,this.normalScale=new Bt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ko,this.combine=Hb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class W6 extends ki{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new rn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xc,this.normalScale=new Bt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class j6 extends ki{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xc,this.normalScale=new Bt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class q6 extends ki{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new rn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xc,this.normalScale=new Bt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ko,this.combine=Hb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class X6 extends ki{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new rn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=xc,this.normalScale=new Bt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class K6 extends n2{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}class ih extends Ar{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new rn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class USe extends ih{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ar.DEFAULT_UP),this.updateMatrix(),this.groundColor=new rn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const ET=new Bn,Ik=new ce,Lk=new ce;class s2{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Bt(512,512),this.map=null,this.mapPass=null,this.matrix=new Bn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new z6,this._frameExtents=new Bt(1,1),this._viewportCount=1,this._viewports=[new tn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;Ik.setFromMatrixPosition(e.matrixWorld),t.position.copy(Ik),Lk.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Lk),t.updateMatrixWorld(),ET.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ET),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(ET)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class BSe extends s2{constructor(){super(new Ma(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=kg*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Y6 extends ih{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ar.DEFAULT_UP),this.updateMatrix(),this.target=new Ar,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new BSe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Dk=new Bn,Jp=new ce,AT=new ce;class zSe extends s2{constructor(){super(new Ma(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Bt(4,2),this._viewportCount=6,this._viewports=[new tn(2,1,1,1),new tn(0,1,1,1),new tn(3,1,1,1),new tn(1,1,1,1),new tn(3,0,1,1),new tn(1,0,1,1)],this._cubeDirections=[new ce(1,0,0),new ce(-1,0,0),new ce(0,0,1),new ce(0,0,-1),new ce(0,1,0),new ce(0,-1,0)],this._cubeUps=[new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,1,0),new ce(0,0,1),new ce(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Jp.setFromMatrixPosition(e.matrixWorld),r.position.copy(Jp),AT.copy(r.position),AT.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(AT),r.updateMatrixWorld(),i.makeTranslation(-Jp.x,-Jp.y,-Jp.z),Dk.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Dk)}}class $Se extends ih{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new zSe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class o2 extends O6{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class VSe extends s2{constructor(){super(new o2(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class GSe extends ih{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ar.DEFAULT_UP),this.updateMatrix(),this.target=new Ar,this.shadow=new VSe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class HSe extends ih{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class WSe extends ih{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class jSe{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ce)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class qSe extends ih{constructor(e=new jSe,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class XSe extends U6{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}const KSe=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveMap","envMap","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"];class YSe{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=KSe,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}getRenderObjectData(e){let t=this.renderObjects.get(e);return t===void 0&&(t={material:this.getMaterialData(e.material),worldMatrix:e.object.matrixWorld.clone()},e.object.center&&(t.center=e.object.center.clone()),e.object.morphTargetInfluences&&(t.morphTargetInfluences=e.object.morphTargetInfluences.slice()),e.bundle!==null&&(t.version=e.bundle.version),this.renderObjects.set(e,t)),t}containsNode(e){const t=e.material;for(const r in t)if(t[r]&&t[r].isNode)return!0;return e.renderer.nodes.modelViewMatrix!==null||e.renderer.nodes.modelNormalViewMatrix!==null}getMaterialData(e){const t={};for(const r of this.refreshUniforms){const i=e[r];i!=null&&(typeof i=="object"&&i.clone!==void 0?i.isTexture===!0?t[r]={id:i.id,version:i.version}:t[r]=i.clone():t[r]=i)}return t}equals(e){const{object:t,material:r}=e,i=this.getRenderObjectData(e);if(i.worldMatrix.equals(t.matrixWorld)!==!0)return i.worldMatrix.copy(t.matrixWorld),!1;const s=i.material;for(const o in s){const a=s[o],l=r[o];if(a.equals!==void 0){if(a.equals(l)===!1)return a.copy(l),!1}else if(l.isTexture===!0){if(a.id!==l.id||a.version!==l.version)return a.id=l.id,a.version=l.version,!1}else if(a!==l)return s[o]=l,!1}if(i.morphTargetInfluences){let o=!1;for(let a=0;a<i.morphTargetInfluences.length;a++)i.morphTargetInfluences[a]!==t.morphTargetInfluences[a]&&(o=!0);if(o)return!0}return i.center&&i.center.equals(t.center)===!1?(i.center.copy(t.center),!0):(e.bundle!==null&&(i.version=e.bundle.version),!0)}needsRefresh(e,t){if(this.hasNode||this.hasAnimation||this.firstInitialization(e))return!0;const{renderId:r}=t;if(this.renderId!==r)return this.renderId=r,!0;const i=e.object.static===!0,s=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;return i||s?!1:this.equals(e)!==!0}}function Ug(n,e=0){let t=3735928559^e,r=1103547991^e;if(n instanceof Array)for(let i=0,s;i<n.length;i++)s=n[i],t=Math.imul(t^s,2654435761),r=Math.imul(r^s,1597334677);else for(let i=0,s;i<n.length;i++)s=n.charCodeAt(i),t=Math.imul(t^s,2654435761),r=Math.imul(r^s,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&r)+(t>>>0)}const QSe=n=>Ug(n),Q6=n=>Ug(n),zx=(...n)=>Ug(n);function Z6(n,e=!1){const t=[];n.isNode===!0&&(t.push(n.id),n=n.getSelf());for(const{property:r,childNode:i}of $x(n))t.push(t,Ug(r.slice(0,-4)),i.getCacheKey(e));return Ug(t)}function*$x(n,e=!1){for(const t in n){if(t.startsWith("_")===!0)continue;const r=n[t];if(Array.isArray(r)===!0)for(let i=0;i<r.length;i++){const s=r[i];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:i,childNode:s})}else if(r&&r.isNode===!0)yield{property:t,childNode:r};else if(typeof r=="object")for(const i in r){const s=r[i];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:i,childNode:s})}}}function Vx(n){if(n==null)return null;const e=typeof n;return n.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":n.isVector2===!0?"vec2":n.isVector3===!0?"vec3":n.isVector4===!0?"vec4":n.isMatrix3===!0?"mat3":n.isMatrix4===!0?"mat4":n.isColor===!0?"color":n instanceof ArrayBuffer?"ArrayBuffer":null}function J6(n,...e){const t=n?n.slice(-4):void 0;return e.length===1&&(t==="vec2"?e=[e[0],e[0]]:t==="vec3"?e=[e[0],e[0],e[0]]:t==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),n==="color"?new rn(...e):t==="vec2"?new Bt(...e):t==="vec3"?new ce(...e):t==="vec4"?new tn(...e):t==="mat3"?new ps(...e):t==="mat4"?new Bn(...e):n==="bool"?e[0]||!1:n==="float"||n==="int"||n==="uint"?e[0]||0:n==="string"?e[0]||"":n==="ArrayBuffer"?JSe(e[0]):null}function ZSe(n){let e="";const t=new Uint8Array(n);for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function JSe(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0)).buffer}const Ok={VERTEX:"vertex",FRAGMENT:"fragment"},Nt={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},ebe=["fragment","vertex"],Fk=["setup","analyze","generate"],kk=[...ebe,"compute"],lp=["x","y","z","w"];let tbe=0;class wt extends op{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=Nt.NONE,this.updateBeforeType=Nt.NONE,this.updateAfterType=Nt.NONE,this.uuid=sSe.generateUUID(),this.version=0,this._cacheKey=null,this._cacheKeyVersion=0,this.global=!1,this.isNode=!0,Object.defineProperty(this,"id",{value:tbe++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,Nt.FRAME)}onRenderUpdate(e){return this.onUpdate(e,Nt.RENDER)}onObjectUpdate(e){return this.onUpdate(e,Nt.OBJECT)}onReference(e){return this.updateReference=e.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of $x(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const t of this.getChildren())t.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=Z6(this,e),this._cacheKeyVersion=this.version),this._cacheKey}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const t=this.getNodeType(e);return e.getElementType(t)}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){const t=this.getHash(e);return e.getNodeFromHash(t)||this}setup(e){const t=e.getNodeProperties(this);let r=0;for(const i of this.getChildren())t["node"+r++]=i;return null}analyze(e){if(e.increaseUsage(this)===1){const r=e.getNodeProperties(this);for(const i of Object.values(r))i&&i.isNode===!0&&i.build(e)}}generate(e,t){const{outputNode:r}=e.getNodeProperties(this);if(r&&r.isNode===!0)return r.build(e,t)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,t=null){const r=this.getShared(e);if(this!==r)return r.build(e,t);e.addNode(this),e.addChain(this);let i=null;const s=e.getBuildStage();if(s==="setup"){this.updateReference(e);const o=e.getNodeProperties(this);if(o.initialized!==!0){const a=e.stack.nodes.length;o.initialized=!0,o.outputNode=this.setup(e),o.outputNode!==null&&e.stack.nodes.length;for(const l of Object.values(o))l&&l.isNode===!0&&l.build(e)}}else if(s==="analyze")this.analyze(e);else if(s==="generate")if(this.generate.length===1){const a=this.getNodeType(e),l=e.getDataFromNode(this);i=l.snippet,i===void 0?(i=this.generate(e)||"",l.snippet=i):l.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),i=e.format(i,a,t)}else i=this.generate(e,t)||"";return e.removeChain(this),i}getSerializeChildren(){return $x(this)}serialize(e){const t=this.getSerializeChildren(),r={};for(const{property:i,index:s,childNode:o}of t)s!==void 0?(r[i]===void 0&&(r[i]=Number.isInteger(s)?[]:{}),r[i][s]=o.toJSON(e.meta).uuid):r[i]=o.toJSON(e.meta).uuid;Object.keys(r).length>0&&(e.inputNodes=r)}deserialize(e){if(e.inputNodes!==void 0){const t=e.meta.nodes;for(const r in e.inputNodes)if(Array.isArray(e.inputNodes[r])){const i=[];for(const s of e.inputNodes[r])i.push(t[s]);this[r]=i}else if(typeof e.inputNodes[r]=="object"){const i={};for(const s in e.inputNodes[r]){const o=e.inputNodes[r][s];i[s]=t[o]}this[r]=i}else{const i=e.inputNodes[r];this[r]=t[i]}}}toJSON(e){const{uuid:t,type:r}=this,i=e===void 0||typeof e=="string";i&&(e={textures:{},images:{},nodes:{}});let s=e.nodes[t];s===void 0&&(s={uuid:t,type:r,meta:e,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},i!==!0&&(e.nodes[s.uuid]=s),this.serialize(s),delete s.meta);function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}if(i){const a=o(e.textures),l=o(e.images),c=o(e.nodes);a.length>0&&(s.textures=a),l.length>0&&(s.images=l),c.length>0&&(s.nodes=c)}return s}}class Cy extends wt{static get type(){return"ArrayElementNode"}constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const t=this.node.build(e),r=this.indexNode.build(e,"uint");return`${t}[ ${r} ]`}}class eH extends wt{static get type(){return"ConvertNode"}constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let r=null;for(const i of this.convertTo.split("|"))(r===null||e.getTypeLength(t)===e.getTypeLength(i))&&(r=i);return r}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const r=this.node,i=this.getNodeType(e),s=r.build(e,i);return e.format(s,i,t)}}class hr extends wt{static get type(){return"TempNode"}constructor(e){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if(e.getBuildStage()==="generate"){const i=e.getVectorType(this.getNodeType(e,t)),s=e.getDataFromNode(this);if(s.propertyName!==void 0)return e.format(s.propertyName,i,t);if(i!=="void"&&t!=="void"&&this.hasDependencies(e)){const o=super.build(e,i),a=e.getVarFromNode(this,null,i),l=e.getPropertyName(a);return e.addLineFlowCode(`${l} = ${o}`,this),s.snippet=o,s.propertyName=l,e.format(s.propertyName,i,t)}}return super.build(e,t)}}class nbe extends hr{static get type(){return"JoinNode"}constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,r)=>t+e.getTypeLength(r.getNodeType(e)),0))}generate(e,t){const r=this.getNodeType(e),i=this.nodes,s=e.getComponentType(r),o=[];for(const l of i){let c=l.build(e);const u=e.getComponentType(l.getNodeType(e));u!==s&&(c=e.format(c,u,s)),o.push(c)}const a=`${e.getType(r)}( ${o.join(", ")} )`;return e.format(a,r,t)}}const rbe=lp.join("");class Uk extends wt{static get type(){return"SplitNode"}constructor(e,t="x"){super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(lp.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,t){const r=this.node,i=e.getTypeLength(r.getNodeType(e));let s=null;if(i>1){let o=null;this.getVectorLength()>=i&&(o=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const l=r.build(e,o);this.components.length===i&&this.components===rbe.slice(0,this.components.length)?s=e.format(l,o,t):s=e.format(`${l}.${this.components}`,this.getNodeType(e),t)}else s=r.build(e,t);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class ibe extends hr{static get type(){return"SetNode"}constructor(e,t,r){super(),this.sourceNode=e,this.components=t,this.targetNode=r}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:r,targetNode:i}=this,s=this.getNodeType(e),o=e.getTypeFromLength(r.length,i.getNodeType(e)),a=i.build(e,o),l=t.build(e,s),c=e.getTypeLength(s),u=[];for(let h=0;h<c;h++){const d=lp[h];d===r[0]?(u.push(a),h+=r.length-1):u.push(l+"."+d)}return`${e.getType(s)}( ${u.join(", ")} )`}}class sbe extends hr{static get type(){return"FlipNode"}constructor(e,t){super(),this.sourceNode=e,this.components=t}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:t,sourceNode:r}=this,i=this.getNodeType(e),s=r.build(e),o=e.getVarFromNode(this),a=e.getPropertyName(o);e.addLineFlowCode(a+" = "+s,this);const l=e.getTypeLength(i),c=[];let u=0;for(let h=0;h<l;h++){const d=lp[h];d===t[u]?(c.push("1.0 - "+(a+"."+d)),u++):c.push(a+"."+d)}return`${e.getType(i)}( ${c.join(", ")} )`}}class a2 extends wt{static get type(){return"InputNode"}constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?Vx(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=Vx(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=ZSe(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?J6(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}class ul extends a2{static get type(){return"ConstNode"}constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){const r=this.getNodeType(e);return e.format(this.generateConst(e),r,t)}}let zf=null;const bd=new Map;function xe(n,e){if(bd.has(n)){console.warn(`Redefinition of method chaining ${n}`);return}if(typeof e!="function")throw new Error(`Node element ${n} is not a function`);bd.set(n,e)}const tH=n=>n.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),Bk=n=>tH(n).split("").sort().join(""),nH={setup(n,e){const t=e.shift();return n(Xb(t),...e)},get(n,e,t){if(typeof e=="string"&&n[e]===void 0){if(n.isStackNode!==!0&&e==="assign")return(...r)=>(zf.assign(t,...r),t);if(bd.has(e)){const r=bd.get(e);return n.isStackNode?(...i)=>t.add(r(...i)):(...i)=>r(t,...i)}else{if(e==="self")return n;if(e.endsWith("Assign")&&bd.has(e.slice(0,e.length-6))){const r=bd.get(e.slice(0,e.length-6));return n.isStackNode?(...i)=>t.assign(i[0],r(...i)):(...i)=>t.assign(r(t,...i))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=tH(e),Ue(new Uk(t,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=Bk(e.slice(3).toLowerCase()),r=>Ue(new ibe(n,e,r));if(/^flip[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=Bk(e.slice(4).toLowerCase()),()=>Ue(new sbe(Ue(n),e));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),Ue(new Uk(n,e));if(/^\d+$/.test(e)===!0)return Ue(new Cy(t,new ul(Number(e),"uint")))}}}return Reflect.get(n,e,t)},set(n,e,t,r){return typeof e=="string"&&n[e]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0||e==="width"||e==="height"||e==="depth"||/^\d+$/.test(e)===!0)?(r[e].assign(t),!0):Reflect.set(n,e,t,r)}},CT=new WeakMap,zk=new WeakMap,obe=function(n,e=null){const t=Vx(n);if(t==="node"){let r=CT.get(n);return r===void 0&&(r=new Proxy(n,nH),CT.set(n,r),CT.set(r,r)),r}else{if(e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string")return Ue(LC(n,e));if(t==="shader")return je(n)}return n},abe=function(n,e=null){for(const t in n)n[t]=Ue(n[t],e);return n},lbe=function(n,e=null){const t=n.length;for(let r=0;r<t;r++)n[r]=Ue(n[r],e);return n},cbe=function(n,e=null,t=null,r=null){const i=s=>Ue(r!==null?Object.assign(s,r):s);return e===null?(...s)=>i(new n(...jd(s))):t!==null?(t=Ue(t),(...s)=>i(new n(e,...jd(s),t))):(...s)=>i(new n(e,...jd(s)))},ube=function(n,...e){return Ue(new n(...jd(e)))};class hbe extends wt{constructor(e,t){super(),this.shaderNode=e,this.inputNodes=t}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}call(e){const{shaderNode:t,inputNodes:r}=this,i=e.getNodeProperties(t);if(i.onceOutput)return i.onceOutput;let s=null;if(t.layout){let o=zk.get(e.constructor);o===void 0&&(o=new WeakMap,zk.set(e.constructor,o));let a=o.get(t);a===void 0&&(a=Ue(e.buildFunctionNode(t)),o.set(t,a)),e.currentFunctionNode!==null&&e.currentFunctionNode.includes.push(a),s=Ue(a.call(r))}else{const o=t.jsFunc,a=r!==null?o(r,e):o(e);s=Ue(a)}return t.once&&(i.onceOutput=s),s}getOutputNode(e){const t=e.getNodeProperties(this);return t.outputNode===null&&(t.outputNode=this.setupOutput(e)),t.outputNode}setup(e){return this.getOutputNode(e)}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,t){return this.getOutputNode(e).build(e,t)}}class dbe extends wt{constructor(e,t){super(t),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return Xb(e),Ue(new hbe(this,e))}setup(){return this.call()}}const fbe=[!1,!0],pbe=[0,1,2,3],mbe=[-1,-2],rH=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],l2=new Map;for(const n of fbe)l2.set(n,new ul(n));const c2=new Map;for(const n of pbe)c2.set(n,new ul(n,"uint"));const u2=new Map([...c2].map(n=>new ul(n.value,"int")));for(const n of mbe)u2.set(n,new ul(n,"int"));const jb=new Map([...u2].map(n=>new ul(n.value)));for(const n of rH)jb.set(n,new ul(n));for(const n of rH)jb.set(-n,new ul(-n));const qb={bool:l2,uint:c2,ints:u2,float:jb},$k=new Map([...l2,...jb]),LC=(n,e)=>$k.has(n)?$k.get(n):n.isNode===!0?n:new ul(n,e),gbe=n=>{try{return n.getNodeType()}catch{return}},dr=function(n,e=null){return(...t)=>{if((t.length===0||!["bool","float","int","uint"].includes(n)&&t.every(i=>typeof i!="object"))&&(t=[J6(n,...t)]),t.length===1&&e!==null&&e.has(t[0]))return Ue(e.get(t[0]));if(t.length===1){const i=LC(t[0],n);return gbe(i)===n?Ue(i):Ue(new eH(i,n))}const r=t.map(i=>LC(i));return Ue(new nbe(r,n))}},Vk=n=>typeof n=="object"&&n!==null?n.value:n,ybe=n=>n!=null?n.nodeType||n.convertTo||(typeof n=="string"?n:null):null;function f_(n,e){return new Proxy(new dbe(n,e),nH)}const Ue=(n,e=null)=>obe(n,e),Xb=(n,e=null)=>new abe(n,e),jd=(n,e=null)=>new lbe(n,e),Ce=(...n)=>new cbe(...n),ze=(...n)=>new ube(...n),je=(n,e)=>{const t=new f_(n,e),r=(...i)=>{let s;return Xb(i),i[0]&&i[0].isNode?s=[...i]:s=i[0],t.call(s)};return r.shaderNode=t,r.setLayout=i=>(t.setLayout(i),r),r.once=()=>(t.once=!0,r),r};xe("toGlobal",n=>(n.global=!0,n));const Gx=n=>{zf=n},iH=()=>zf,Zr=(...n)=>zf.If(...n);function vbe(n){return zf&&zf.add(n),n}xe("append",vbe);const _be=new dr("color"),Ae=new dr("float",qb.float),jn=new dr("int",qb.ints),xbe=new dr("uint",qb.uint),Sbe=new dr("bool",qb.bool),Ke=new dr("vec2"),Ea=new dr("ivec2"),bbe=new dr("uvec2"),wbe=new dr("bvec2"),Me=new dr("vec3"),Tbe=new dr("ivec3"),Mbe=new dr("uvec3"),Ebe=new dr("bvec3"),Tt=new dr("vec4"),Abe=new dr("ivec4"),Cbe=new dr("uvec4"),Rbe=new dr("bvec4"),h2=new dr("mat2"),Ui=new dr("mat3"),qd=new dr("mat4");xe("toColor",_be);xe("toFloat",Ae);xe("toInt",jn);xe("toUint",xbe);xe("toBool",Sbe);xe("toVec2",Ke);xe("toIVec2",Ea);xe("toUVec2",bbe);xe("toBVec2",wbe);xe("toVec3",Me);xe("toIVec3",Tbe);xe("toUVec3",Mbe);xe("toBVec3",Ebe);xe("toVec4",Tt);xe("toIVec4",Abe);xe("toUVec4",Cbe);xe("toBVec4",Rbe);xe("toMat2",h2);xe("toMat3",Ui);xe("toMat4",qd);const Nbe=Ce(Cy),Pbe=(n,e)=>Ue(new eH(Ue(n),e));xe("element",Nbe);xe("convert",Pbe);class sH extends wt{static get type(){return"UniformGroupNode"}constructor(e,t=!1,r=1){super("string"),this.name=e,this.version=0,this.shared=t,this.order=r,this.isUniformGroup=!0}set needsUpdate(e){e===!0&&this.version++}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const Ibe=n=>new sH(n),oH=(n,e=0)=>new sH(n,!0,e),Lbe=oH("frame"),Dt=oH("render"),aH=Ibe("object");class cp extends a2{static get type(){return"UniformNode"}constructor(e,t=null){super(e,t),this.isUniformNode=!0,this.name="",this.groupNode=aH}label(e){return this.name=e,this}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){const r=this.getSelf();return e=e.bind(r),super.onUpdate(i=>{const s=e(i,r);s!==void 0&&(this.value=s)},t)}generate(e,t){const r=this.getNodeType(e),i=this.getUniformHash(e);let s=e.getNodeFromHash(i);s===void 0&&(e.setHashNode(this,i),s=this);const o=s.getInputType(e),a=e.getUniformFromNode(s,o,e.shaderStage,this.name||e.context.label),l=e.getPropertyName(a);return e.context.label!==void 0&&delete e.context.label,e.format(l,r,t)}}const Mt=(n,e)=>{const t=ybe(e||n),r=n&&n.isNode===!0?n.node&&n.node.value||n.value:n;return Ue(new cp(r,t))};class sn extends wt{static get type(){return"PropertyNode"}constructor(e,t=null,r=!1){super(e),this.name=t,this.varying=r,this.isPropertyNode=!0}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){let t;return this.varying===!0?(t=e.getVaryingFromNode(this,this.name),t.needsInterpolation=!0):t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}const rd=(n,e)=>Ue(new sn(n,e)),Hx=(n,e)=>Ue(new sn(n,e,!0)),en=ze(sn,"vec4","DiffuseColor"),Gk=ze(sn,"vec3","EmissiveColor"),Ia=ze(sn,"float","Roughness"),Wx=ze(sn,"float","Metalness"),DC=ze(sn,"float","Clearcoat"),jx=ze(sn,"float","ClearcoatRoughness"),wd=ze(sn,"vec3","Sheen"),d2=ze(sn,"float","SheenRoughness"),f2=ze(sn,"float","Iridescence"),lH=ze(sn,"float","IridescenceIOR"),cH=ze(sn,"float","IridescenceThickness"),OC=ze(sn,"float","AlphaT"),tu=ze(sn,"float","Anisotropy"),p_=ze(sn,"vec3","AnisotropyT"),Xd=ze(sn,"vec3","AnisotropyB"),es=ze(sn,"color","SpecularColor"),qx=ze(sn,"float","SpecularF90"),FC=ze(sn,"float","Shininess"),Dbe=ze(sn,"vec4","Output"),RT=ze(sn,"float","dashSize"),Hk=ze(sn,"float","gapSize"),m_=ze(sn,"float","IOR"),kC=ze(sn,"float","Transmission"),uH=ze(sn,"float","Thickness"),hH=ze(sn,"float","AttenuationDistance"),dH=ze(sn,"color","AttenuationColor"),fH=ze(sn,"float","Dispersion");class Obe extends hr{static get type(){return"AssignNode"}constructor(e,t){super(),this.targetNode=e,this.sourceNode=t}hasDependencies(){return!1}getNodeType(e,t){return t!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:t}=this;if(e.isAvailable("swizzleAssign")===!1&&t.isSplitNode&&t.components.length>1){const r=e.getTypeLength(t.node.getNodeType(e));return lp.join("").slice(0,r)!==t.components}return!1}generate(e,t){const{targetNode:r,sourceNode:i}=this,s=this.needsSplitAssign(e),o=r.getNodeType(e),a=r.context({assign:!0}).build(e),l=i.build(e,o),c=i.getNodeType(e),u=e.getDataFromNode(this);let h;if(u.initialized===!0)t!=="void"&&(h=a);else if(s){const d=e.getVarFromNode(this,null,o),f=e.getPropertyName(d);e.addLineFlowCode(`${f} = ${l}`,this);const p=r.node.context({assign:!0}).build(e);for(let g=0;g<r.components.length;g++){const y=r.components[g];e.addLineFlowCode(`${p}.${y} = ${f}[ ${g} ]`,this)}t!=="void"&&(h=a)}else h=`${a} = ${l}`,(t==="void"||c==="void")&&(e.addLineFlowCode(h,this),t!=="void"&&(h=a));return u.initialized=!0,e.format(h,o,t)}}const Fbe=Ce(Obe);xe("assign",Fbe);class kbe extends hr{static get type(){return"FunctionCallNode"}constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const t=[],r=this.functionNode,i=r.getInputs(e),s=this.parameters;if(Array.isArray(s))for(let a=0;a<s.length;a++){const l=i[a],c=s[a];t.push(c.build(e,l.type))}else for(const a of i){const l=s[a.name];if(l!==void 0)t.push(l.build(e,a.type));else throw new Error(`FunctionCallNode: Input '${a.name}' not found in FunctionNode.`)}return`${r.build(e,"property")}( ${t.join(", ")} )`}}const Ube=(n,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?jd(e):Xb(e[0]),Ue(new kbe(Ue(n),e)));xe("call",Ube);class Dn extends hr{static get type(){return"OperatorNode"}constructor(e,t,r,...i){if(super(),i.length>0){let s=new Dn(e,t,r);for(let o=0;o<i.length-1;o++)s=new Dn(e,s,i[o]);t=s,r=i[i.length-1]}this.op=e,this.aNode=t,this.bNode=r}getNodeType(e,t){const r=this.op,i=this.aNode,s=this.bNode,o=i.getNodeType(e),a=typeof s<"u"?s.getNodeType(e):null;if(o==="void"||a==="void")return"void";if(r==="%")return o;if(r==="~"||r==="&"||r==="|"||r==="^"||r===">>"||r==="<<")return e.getIntegerType(o);if(r==="!"||r==="=="||r==="&&"||r==="||"||r==="^^")return"bool";if(r==="<"||r===">"||r==="<="||r===">="){const l=t?e.getTypeLength(t):Math.max(e.getTypeLength(o),e.getTypeLength(a));return l>1?`bvec${l}`:"bool"}else return o==="float"&&e.isMatrix(a)?a:e.isMatrix(o)&&e.isVector(a)?e.getVectorFromMatrix(o):e.isVector(o)&&e.isMatrix(a)?e.getVectorFromMatrix(a):e.getTypeLength(a)>e.getTypeLength(o)?a:o}generate(e,t){const r=this.op,i=this.aNode,s=this.bNode,o=this.getNodeType(e,t);let a=null,l=null;o!=="void"?(a=i.getNodeType(e),l=typeof s<"u"?s.getNodeType(e):null,r==="<"||r===">"||r==="<="||r===">="||r==="=="?e.isVector(a)?l=a:a!==l&&(a=l="float"):r===">>"||r==="<<"?(a=o,l=e.changeComponentType(l,"uint")):e.isMatrix(a)&&e.isVector(l)?l=e.getVectorFromMatrix(a):e.isVector(a)&&e.isMatrix(l)?a=e.getVectorFromMatrix(l):a=l=o):a=l=o;const c=i.build(e,a),u=typeof s<"u"?s.build(e,l):null,h=e.getTypeLength(t),d=e.getFunctionOperator(r);if(t!=="void")return r==="<"&&h>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThan",t)}( ${c}, ${u} )`,o,t):e.format(`( ${c} < ${u} )`,o,t):r==="<="&&h>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThanEqual",t)}( ${c}, ${u} )`,o,t):e.format(`( ${c} <= ${u} )`,o,t):r===">"&&h>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThan",t)}( ${c}, ${u} )`,o,t):e.format(`( ${c} > ${u} )`,o,t):r===">="&&h>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThanEqual",t)}( ${c}, ${u} )`,o,t):e.format(`( ${c} >= ${u} )`,o,t):r==="!"||r==="~"?e.format(`(${r}${c})`,a,t):d?e.format(`${d}( ${c}, ${u} )`,o,t):e.format(`( ${c} ${r} ${u} )`,o,t);if(a!=="void")return d?e.format(`${d}( ${c}, ${u} )`,o,t):e.format(`${c} ${r} ${u}`,o,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const us=Ce(Dn,"+"),Ru=Ce(Dn,"-"),cn=Ce(Dn,"*"),Sc=Ce(Dn,"/"),pH=Ce(Dn,"%"),Bbe=Ce(Dn,"=="),zbe=Ce(Dn,"!="),$be=Ce(Dn,"<"),Vbe=Ce(Dn,">"),Gbe=Ce(Dn,"<="),Hbe=Ce(Dn,">="),Wbe=Ce(Dn,"&&"),jbe=Ce(Dn,"||"),qbe=Ce(Dn,"!"),Xbe=Ce(Dn,"^^"),Kbe=Ce(Dn,"&"),Ybe=Ce(Dn,"~"),Qbe=Ce(Dn,"|"),Zbe=Ce(Dn,"^"),Jbe=Ce(Dn,"<<"),e1e=Ce(Dn,">>");xe("add",us);xe("sub",Ru);xe("mul",cn);xe("div",Sc);xe("modInt",pH);xe("equal",Bbe);xe("notEqual",zbe);xe("lessThan",$be);xe("greaterThan",Vbe);xe("lessThanEqual",Gbe);xe("greaterThanEqual",Hbe);xe("and",Wbe);xe("or",jbe);xe("not",qbe);xe("xor",Xbe);xe("bitAnd",Kbe);xe("bitNot",Ybe);xe("bitOr",Qbe);xe("bitXor",Zbe);xe("shiftLeft",Jbe);xe("shiftRight",e1e);const t1e=(...n)=>(console.warn("TSL.OperatorNode: .remainder() has been renamed to .modInt()."),pH(...n));xe("remainder",t1e);class re extends hr{static get type(){return"MathNode"}constructor(e,t,r=null,i=null){super(),this.method=e,this.aNode=t,this.bNode=r,this.cNode=i}getInputType(e){const t=this.aNode.getNodeType(e),r=this.bNode?this.bNode.getNodeType(e):null,i=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(t)?0:e.getTypeLength(t),o=e.isMatrix(r)?0:e.getTypeLength(r),a=e.isMatrix(i)?0:e.getTypeLength(i);return s>o&&s>a?t:o>a?r:a>s?i:t}getNodeType(e){const t=this.method;return t===re.LENGTH||t===re.DISTANCE||t===re.DOT?"float":t===re.CROSS?"vec3":t===re.ALL?"bool":t===re.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):t===re.MOD?this.aNode.getNodeType(e):this.getInputType(e)}generate(e,t){const r=this.method,i=this.getNodeType(e),s=this.getInputType(e),o=this.aNode,a=this.bNode,l=this.cNode,c=e.renderer.isWebGLRenderer===!0;if(r===re.TRANSFORM_DIRECTION){let u=o,h=a;e.isMatrix(u.getNodeType(e))?h=Tt(Me(h),0):u=Tt(Me(u),0);const d=cn(u,h).xyz;return Bg(d).build(e,t)}else{if(r===re.NEGATE)return e.format("( - "+o.build(e,s)+" )",i,t);if(r===re.ONE_MINUS)return Ru(1,o).build(e,t);if(r===re.RECIPROCAL)return Sc(1,o).build(e,t);if(r===re.DIFFERENCE)return zo(Ru(o,a)).build(e,t);{const u=[];return r===re.CROSS||r===re.MOD?u.push(o.build(e,i),a.build(e,i)):c&&r===re.STEP?u.push(o.build(e,e.getTypeLength(o.getNodeType(e))===1?"float":s),a.build(e,s)):c&&(r===re.MIN||r===re.MAX)||r===re.MOD?u.push(o.build(e,s),a.build(e,e.getTypeLength(a.getNodeType(e))===1?"float":s)):r===re.REFRACT?u.push(o.build(e,s),a.build(e,s),l.build(e,"float")):r===re.MIX?u.push(o.build(e,s),a.build(e,s),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":s)):(u.push(o.build(e,s)),a!==null&&u.push(a.build(e,s)),l!==null&&u.push(l.build(e,s))),e.format(`${e.getMethod(r,i)}( ${u.join(", ")} )`,i,t)}}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}re.ALL="all";re.ANY="any";re.EQUALS="equals";re.RADIANS="radians";re.DEGREES="degrees";re.EXP="exp";re.EXP2="exp2";re.LOG="log";re.LOG2="log2";re.SQRT="sqrt";re.INVERSE_SQRT="inversesqrt";re.FLOOR="floor";re.CEIL="ceil";re.NORMALIZE="normalize";re.FRACT="fract";re.SIN="sin";re.COS="cos";re.TAN="tan";re.ASIN="asin";re.ACOS="acos";re.ATAN="atan";re.ABS="abs";re.SIGN="sign";re.LENGTH="length";re.NEGATE="negate";re.ONE_MINUS="oneMinus";re.DFDX="dFdx";re.DFDY="dFdy";re.ROUND="round";re.RECIPROCAL="reciprocal";re.TRUNC="trunc";re.FWIDTH="fwidth";re.BITCAST="bitcast";re.TRANSPOSE="transpose";re.ATAN2="atan2";re.MIN="min";re.MAX="max";re.MOD="mod";re.STEP="step";re.REFLECT="reflect";re.DISTANCE="distance";re.DIFFERENCE="difference";re.DOT="dot";re.CROSS="cross";re.POW="pow";re.TRANSFORM_DIRECTION="transformDirection";re.MIX="mix";re.CLAMP="clamp";re.REFRACT="refract";re.SMOOTHSTEP="smoothstep";re.FACEFORWARD="faceforward";const n1e=Ae(1e-6),r1e=Ae(Math.PI),mH=Ce(re,re.ALL),i1e=Ce(re,re.ANY),s1e=Ce(re,re.EQUALS),o1e=Ce(re,re.RADIANS),a1e=Ce(re,re.DEGREES),gH=Ce(re,re.EXP),UC=Ce(re,re.EXP2),yH=Ce(re,re.LOG),Kb=Ce(re,re.LOG2),p2=Ce(re,re.SQRT),l1e=Ce(re,re.INVERSE_SQRT),Yb=Ce(re,re.FLOOR),vH=Ce(re,re.CEIL),Bg=Ce(re,re.NORMALIZE),up=Ce(re,re.FRACT),Aa=Ce(re,re.SIN),zl=Ce(re,re.COS),c1e=Ce(re,re.TAN),u1e=Ce(re,re.ASIN),h1e=Ce(re,re.ACOS),d1e=Ce(re,re.ATAN),zo=Ce(re,re.ABS),_H=Ce(re,re.SIGN),Kd=Ce(re,re.LENGTH),f1e=Ce(re,re.NEGATE),p1e=Ce(re,re.ONE_MINUS),m1e=Ce(re,re.DFDX),g1e=Ce(re,re.DFDY),y1e=Ce(re,re.ROUND),v1e=Ce(re,re.RECIPROCAL),_1e=Ce(re,re.TRUNC),x1e=Ce(re,re.FWIDTH);re.BITCAST;const S1e=Ce(re,re.TRANSPOSE),b1e=Ce(re,re.ATAN2),Xx=Ce(re,re.MIN),bo=Ce(re,re.MAX),xH=Ce(re,re.MOD),SH=Ce(re,re.STEP),w1e=Ce(re,re.REFLECT),T1e=Ce(re,re.DISTANCE),M1e=Ce(re,re.DIFFERENCE),m2=Ce(re,re.DOT),bH=Ce(re,re.CROSS),Qb=Ce(re,re.POW),wH=Ce(re,re.POW,2),E1e=Ce(re,re.POW,3),A1e=Ce(re,re.POW,4),C1e=Ce(re,re.TRANSFORM_DIRECTION),R1e=n=>cn(_H(n),Qb(zo(n),1/3)),N1e=n=>m2(n,n),Tn=Ce(re,re.MIX),bc=(n,e=0,t=1)=>Ue(new re(re.CLAMP,Ue(n),Ue(e),Ue(t))),P1e=n=>bc(n),TH=Ce(re,re.REFRACT),qu=Ce(re,re.SMOOTHSTEP),I1e=Ce(re,re.FACEFORWARD),L1e=je(([n])=>{const r=43758.5453,i=m2(n.xy,Ke(12.9898,78.233)),s=xH(i,r1e);return up(Aa(s).mul(r))}),D1e=(n,e,t)=>Tn(e,t,n),O1e=(n,e,t)=>qu(e,t,n);xe("all",mH);xe("any",i1e);xe("equals",s1e);xe("radians",o1e);xe("degrees",a1e);xe("exp",gH);xe("exp2",UC);xe("log",yH);xe("log2",Kb);xe("sqrt",p2);xe("inverseSqrt",l1e);xe("floor",Yb);xe("ceil",vH);xe("normalize",Bg);xe("fract",up);xe("sin",Aa);xe("cos",zl);xe("tan",c1e);xe("asin",u1e);xe("acos",h1e);xe("atan",d1e);xe("abs",zo);xe("sign",_H);xe("length",Kd);xe("lengthSq",N1e);xe("negate",f1e);xe("oneMinus",p1e);xe("dFdx",m1e);xe("dFdy",g1e);xe("round",y1e);xe("reciprocal",v1e);xe("trunc",_1e);xe("fwidth",x1e);xe("atan2",b1e);xe("min",Xx);xe("max",bo);xe("mod",xH);xe("step",SH);xe("reflect",w1e);xe("distance",T1e);xe("dot",m2);xe("cross",bH);xe("pow",Qb);xe("pow2",wH);xe("pow3",E1e);xe("pow4",A1e);xe("transformDirection",C1e);xe("mix",D1e);xe("clamp",bc);xe("refract",TH);xe("smoothstep",O1e);xe("faceForward",I1e);xe("difference",M1e);xe("saturate",P1e);xe("cbrt",R1e);xe("transpose",S1e);xe("rand",L1e);class F1e extends wt{static get type(){return"ConditionalNode"}constructor(e,t,r=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=r}getNodeType(e){const t=this.ifNode.getNodeType(e);if(this.elseNode!==null){const r=this.elseNode.getNodeType(e);if(e.getTypeLength(r)>e.getTypeLength(t))return r}return t}setup(e){const t=this.condNode.cache(),r=this.ifNode.cache(),i=this.elseNode?this.elseNode.cache():null,s=e.context.nodeBlock;e.getDataFromNode(r).parentNodeBlock=s,i!==null&&(e.getDataFromNode(i).parentNodeBlock=s);const o=e.getNodeProperties(this);o.condNode=t,o.ifNode=r.context({nodeBlock:r}),o.elseNode=i?i.context({nodeBlock:i}):null}generate(e,t){const r=this.getNodeType(e),i=e.getDataFromNode(this);if(i.nodeProperty!==void 0)return i.nodeProperty;const{condNode:s,ifNode:o,elseNode:a}=e.getNodeProperties(this),l=t!=="void",c=l?rd(r).build(e):"";i.nodeProperty=c;const u=s.build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${u} ) {

`).addFlowTab();let h=o.build(e,r);if(h&&(l?h=c+" = "+h+";":h="return "+h+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+h+`

`+e.tab+"}"),a!==null){e.addFlowCode(` else {

`).addFlowTab();let d=a.build(e,r);d&&(l?d=c+" = "+d+";":d="return "+d+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+d+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(c,r,t)}}const Mi=Ce(F1e);xe("select",Mi);const k1e=(...n)=>(console.warn("TSL.ConditionalNode: cond() has been renamed to select()."),Mi(...n));xe("cond",k1e);class MH extends wt{static get type(){return"ContextNode"}constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.value=t}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}analyze(e){this.node.build(e)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.value});const r=this.node.build(e);return e.setContext(t),r}generate(e,t){const r=e.getContext();e.setContext({...e.context,...this.value});const i=this.node.build(e,t);return e.setContext(r),i}}const g2=Ce(MH),U1e=(n,e)=>g2(n,{label:e});xe("context",g2);xe("label",U1e);class B1e extends wt{static get type(){return"VarNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.global=!0,this.isVarNode=!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{node:t,name:r}=this,i=e.getVarFromNode(this,r,e.getVectorType(this.getNodeType(e))),s=e.getPropertyName(i),o=t.build(e,i.type);return e.addLineFlowCode(`${s} = ${o}`,this),s}}const EH=Ce(B1e);xe("temp",EH);xe("toVar",(...n)=>EH(...n).append());class z1e extends wt{static get type(){return"VaryingNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.isVaryingNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const t=e.getNodeProperties(this);let r=t.varying;if(r===void 0){const i=this.name,s=this.getNodeType(e);t.varying=r=e.getVaryingFromNode(this,i,s),t.node=this.node}return r.needsInterpolation||(r.needsInterpolation=e.shaderStage==="fragment"),r}setup(e){this.setupVarying(e)}analyze(e){return this.setupVarying(e),this.node.analyze(e)}generate(e){const t=e.getNodeProperties(this),r=this.setupVarying(e);if(t.propertyName===void 0){const i=this.getNodeType(e),s=e.getPropertyName(r,Ok.VERTEX);e.flowNodeFromShaderStage(Ok.VERTEX,this.node,i,s),t.propertyName=s}return e.getPropertyName(r)}}const hl=Ce(z1e);xe("varying",hl);const Ry="WorkingColorSpace",y2="OutputColorSpace";function Wk(n){let e=null;return n===Ls?e="Linear":n===ht&&(e="sRGB"),e}function BC(n,e){return Wk(n)+"To"+Wk(e)}class Zb extends hr{static get type(){return"ColorSpaceNode"}constructor(e,t,r){super("vec4"),this.colorNode=e,this.source=t,this.target=r}getColorSpace(e,t){return t===Ry?Qi.workingColorSpace:t===y2?e.context.outputColorSpace||e.renderer.outputColorSpace:t}setup(e){const{renderer:t}=e,{colorNode:r}=this,i=this.getColorSpace(e,this.source),s=this.getColorSpace(e,this.target);if(i===s)return r;const o=BC(i,s);let a=null;const l=t.nodes.library.getColorSpaceFunction(o);return l!==null?a=Tt(l(r.rgb),r.a):(console.error("ColorSpaceNode: Unsupported Color Space configuration.",o),a=r),a}}const $1e=n=>Ue(new Zb(Ue(n),Ry,y2)),V1e=n=>Ue(new Zb(Ue(n),y2,Ry)),G1e=(n,e)=>Ue(new Zb(Ue(n),Ry,e)),AH=(n,e)=>Ue(new Zb(Ue(n),e,Ry));xe("toOutputColorSpace",$1e);xe("toWorkingColorSpace",V1e);xe("workingToColorSpace",G1e);xe("colorSpaceToWorking",AH);let H1e=class extends Cy{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),r=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(t,r,i)}};class CH extends wt{static get type(){return"ReferenceBaseNode"}constructor(e,t,r=null,i=null){super(),this.property=e,this.uniformType=t,this.object=r,this.count=i,this.properties=e.split("."),this.reference=r,this.node=null,this.group=null,this.updateType=Nt.OBJECT}setGroup(e){return this.group=e,this}element(e){return Ue(new H1e(this,Ue(e)))}setNodeType(e){const t=Mt(null,e).getSelf();this.group!==null&&t.setGroup(this.group),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let r=e[t[0]];for(let i=1;i<t.length;i++)r=r[t[i]];return r}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const W1e=(n,e,t)=>Ue(new CH(n,e,t));class j1e extends CH{static get type(){return"RendererReferenceNode"}constructor(e,t,r=null){super(e,t,r),this.renderer=r,this.setGroup(Dt)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const q1e=(n,e,t)=>Ue(new j1e(n,e,t));class X1e extends hr{static get type(){return"ToneMappingNode"}constructor(e,t=Y1e,r=null){super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=r}getCacheKey(){return zx(super.getCacheKey(),this.toneMapping)}setup(e){const t=this.colorNode||e.context.color,r=this.toneMapping;if(r===Gd)return t;let i=null;const s=e.renderer.nodes.library.getToneMappingFunction(r);return s!==null?i=Tt(s(t.rgb,this.exposureNode),t.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",r),i=t),i}}const K1e=(n,e,t)=>Ue(new X1e(n,Ue(e),Ue(t))),Y1e=q1e("toneMappingExposure","float");xe("toneMapping",(n,e,t)=>K1e(e,t,n));class Q1e extends a2{static get type(){return"BufferAttributeNode"}constructor(e,t=null,r=0,i=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=r,this.bufferOffset=i,this.usage=Bx,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),r=this.value,i=e.getTypeLength(t),s=this.bufferStride||i,o=this.bufferOffset,a=r.isInterleavedBuffer===!0?r:new U6(r,s),l=new t2(a,i,o);a.setUsage(this.usage),this.attribute=l,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),r=e.getBufferAttributeFromNode(this,t),i=e.getPropertyName(r);let s=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=i,s=i):s=hl(this).build(e,t),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const v2=(n,e,t,r)=>Ue(new Q1e(n,e,t,r)),Z1e=(n,e,t,r)=>v2(n,e,t,r).setUsage(Sd),jk=(n,e,t,r)=>v2(n,e,t,r).setInstanced(!0),qk=(n,e,t,r)=>Z1e(n,e,t,r).setInstanced(!0);xe("toAttribute",n=>v2(n.value));class J1e extends wt{static get type(){return"ComputeNode"}constructor(e,t,r=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=t,this.workgroupSize=r,this.dispatchCount=0,this.version=1,this.updateBeforeType=Nt.OBJECT,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}updateDispatchCount(){const{count:e,workgroupSize:t}=this;let r=t[0];for(let i=1;i<t.length;i++)r*=t[i];this.dispatchCount=Math.ceil(e/r)}onInit(){}updateBefore({renderer:e}){e.compute(this)}generate(e){const{shaderStage:t}=e;if(t==="compute"){const r=this.computeNode.build(e,"void");r!==""&&e.addLineFlowCode(r,this)}}}const ewe=(n,e,t)=>Ue(new J1e(Ue(n),e,t));xe("compute",ewe);class twe extends wt{static get type(){return"CacheNode"}constructor(e,t=!0){super(),this.node=e,this.parent=t,this.isCacheNode=!0}getNodeType(e){return this.node.getNodeType(e)}build(e,...t){const r=e.getCache(),i=e.getCacheFromNode(this,this.parent);e.setCache(i);const s=this.node.build(e,...t);return e.setCache(r),s}}const g_=(n,...e)=>Ue(new twe(Ue(n),...e));xe("cache",g_);class nwe extends wt{static get type(){return"BypassNode"}constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t,this),this.outputNode.build(e)}}const rwe=Ce(nwe);xe("bypass",rwe);class RH extends wt{static get type(){return"RemapNode"}constructor(e,t,r,i=Ae(0),s=Ae(1)){super(),this.node=e,this.inLowNode=t,this.inHighNode=r,this.outLowNode=i,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:r,outLowNode:i,outHighNode:s,doClamp:o}=this;let a=e.sub(t).div(r.sub(t));return o===!0&&(a=a.clamp()),a.mul(s.sub(i)).add(i)}}const iwe=Ce(RH,null,null,{doClamp:!1}),swe=Ce(RH);xe("remap",iwe);xe("remapClamp",swe);class owe extends wt{static get type(){return"ExpressionNode"}constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const r=this.getNodeType(e),i=this.snippet;if(r==="void")e.addLineFlowCode(i,this);else return e.format(`( ${i} )`,r,t)}}const zg=Ce(owe),awe=n=>(n?Mi(n,zg("discard")):zg("discard")).append();xe("discard",awe);class lwe extends hr{static get type(){return"RenderOutputNode"}constructor(e,t,r){super("vec4"),this.colorNode=e,this.toneMapping=t,this.outputColorSpace=r,this.isRenderOutput=!0}setup({context:e}){let t=this.colorNode||e.color;const r=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||Gd,i=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||Hu;return r!==Gd&&(t=t.toneMapping(r)),i!==Hu&&i!==Qi.workingColorSpace&&(t=t.workingToColorSpace(i)),t}}const cwe=(n,e=null,t=null)=>Ue(new lwe(Ue(n),e,t));xe("renderOutput",cwe);class uwe extends wt{static get type(){return"AttributeNode"}constructor(e,t=null){super(t),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=this.nodeType;if(t===null){const r=this.getAttributeName(e);if(e.hasGeometryAttribute(r)){const i=e.geometry.getAttribute(r);t=e.getTypeFromAttribute(i)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),r=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const s=e.geometry.getAttribute(t),o=e.getTypeFromAttribute(s),a=e.getAttribute(t,o);return e.shaderStage==="vertex"?e.format(a.name,o,r):hl(this).build(e,r)}else return console.warn(`AttributeNode: Vertex attribute "${t}" not found on geometry.`),e.generateConst(r)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const il=(n,e)=>Ue(new uwe(n,e)),Jb=n=>il("uv"+(n>0?n:""),"vec2");class hwe extends wt{static get type(){return"TextureSizeNode"}constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const r=this.textureNode.build(e,"property"),i=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${r}, ${i} )`,this.getNodeType(e),t)}}const Jm=Ce(hwe);class dwe extends cp{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=Nt.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,t=e.images,r=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(r&&r.width!==void 0){const{width:i,height:s}=r;this.value=Math.log2(Math.max(i,s))}}}const fwe=Ce(dwe);class Ny extends cp{static get type(){return"TextureNode"}constructor(e,t=null,r=null,i=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=r,this.biasNode=i,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=Nt.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(t===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===Dr?"uvec4":this.value.type===ci?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return Jb(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=Mt(this.value.matrix)),this._matrixUniform.mul(Me(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?Nt.FRAME:Nt.NONE,this}setupUV(e,t){const r=this.value;return e.isFlipY()&&(r.isRenderTargetTexture===!0||r.isFramebufferTexture===!0||r.isDepthTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(jn(Jm(this,this.levelNode).y).sub(t.y).sub(1))),t}setup(e){const t=e.getNodeProperties(this);t.referenceNode=this.referenceNode;let r=this.uvNode;(r===null||e.context.forceUVContext===!0)&&e.context.getUV&&(r=e.context.getUV(this)),r||(r=this.getDefaultUV()),this.updateMatrix===!0&&(r=this.getTransformedUV(r)),r=this.setupUV(e,r);let i=this.levelNode;i===null&&e.context.getTextureLevel&&(i=e.context.getTextureLevel(this)),t.uvNode=r,t.levelNode=i,t.biasNode=this.biasNode,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode}generateUV(e,t){return t.build(e,this.sampler===!0?"vec2":"ivec2")}generateSnippet(e,t,r,i,s,o,a,l){const c=this.value;let u;return i?u=e.generateTextureLevel(c,t,r,i,o):s?u=e.generateTextureBias(c,t,r,s,o):l?u=e.generateTextureGrad(c,t,r,l,o):a?u=e.generateTextureCompare(c,t,r,a,o):this.sampler===!1?u=e.generateTextureLoad(c,t,r,o):u=e.generateTexture(c,t,r,o),u}generate(e,t){const r=e.getNodeProperties(this),i=this.value;if(!i||i.isTexture!==!0)throw new Error("TextureNode: Need a three.js texture.");const s=super.generate(e,"property");if(t==="sampler")return s+"_sampler";if(e.isReference(t))return s;{const o=e.getDataFromNode(this);let a=o.propertyName;if(a===void 0){const{uvNode:u,levelNode:h,biasNode:d,compareNode:f,depthNode:p,gradNode:g}=r,y=this.generateUV(e,u),m=h?h.build(e,"float"):null,_=d?d.build(e,"float"):null,v=p?p.build(e,"int"):null,x=f?f.build(e,"float"):null,b=g?[g[0].build(e,"vec2"),g[1].build(e,"vec2")]:null,T=e.getVarFromNode(this);a=e.getPropertyName(T);const w=this.generateSnippet(e,s,y,m,_,v,x,b);e.addLineFlowCode(`${a} = ${w}`,this),o.snippet=w,o.propertyName=a}let l=a;const c=this.getNodeType(e);return e.needsToWorkingColorSpace(i)&&(l=AH(zg(l,c),i.colorSpace).setup(e).build(e,c)),e.format(l,c,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){const t=this.clone();return t.uvNode=Ue(e),t.referenceNode=this.getSelf(),Ue(t)}blur(e){const t=this.clone();return t.biasNode=Ue(e).mul(fwe(t)),t.referenceNode=this.getSelf(),Ue(t)}level(e){const t=this.clone();return t.levelNode=Ue(e),t.referenceNode=this.getSelf(),Ue(t)}size(e){return Jm(this,e)}bias(e){const t=this.clone();return t.biasNode=Ue(e),t.referenceNode=this.getSelf(),Ue(t)}compare(e){const t=this.clone();return t.compareNode=Ue(e),t.referenceNode=this.getSelf(),Ue(t)}grad(e,t){const r=this.clone();return r.gradNode=[Ue(e),Ue(t)],r.referenceNode=this.getSelf(),Ue(r)}depth(e){const t=this.clone();return t.depthNode=Ue(e),t.referenceNode=this.getSelf(),Ue(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,t=this._matrixUniform;t!==null&&(t.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e}}const qn=Ce(Ny),eo=(...n)=>qn(...n).setSampler(!1),em=Mt("float").label("cameraNear").setGroup(Dt).onRenderUpdate(({camera:n})=>n.near),tm=Mt("float").label("cameraFar").setGroup(Dt).onRenderUpdate(({camera:n})=>n.far),pwe=Mt("float").label("cameraLogDepth").setGroup(Dt).onRenderUpdate(({camera:n})=>2/(Math.log(n.far+1)/Math.LN2)),_2=Mt("mat4").label("cameraProjectionMatrix").setGroup(Dt).onRenderUpdate(({camera:n})=>n.projectionMatrix),dl=Mt("mat4").label("cameraViewMatrix").setGroup(Dt).onRenderUpdate(({camera:n})=>n.matrixWorldInverse),mwe=Mt(new ce).label("cameraPosition").setGroup(Dt).onRenderUpdate(({camera:n},e)=>e.value.setFromMatrixPosition(n.matrixWorld));class Vt extends wt{static get type(){return"Object3DNode"}constructor(e,t=null){super(),this.scope=e,this.object3d=t,this.updateType=Nt.OBJECT,this._uniformNode=new cp(null)}getNodeType(){const e=this.scope;if(e===Vt.WORLD_MATRIX)return"mat4";if(e===Vt.POSITION||e===Vt.VIEW_POSITION||e===Vt.DIRECTION||e===Vt.SCALE)return"vec3"}update(e){const t=this.object3d,r=this._uniformNode,i=this.scope;if(i===Vt.WORLD_MATRIX)r.value=t.matrixWorld;else if(i===Vt.POSITION)r.value=r.value||new ce,r.value.setFromMatrixPosition(t.matrixWorld);else if(i===Vt.SCALE)r.value=r.value||new ce,r.value.setFromMatrixScale(t.matrixWorld);else if(i===Vt.DIRECTION)r.value=r.value||new ce,t.getWorldDirection(r.value);else if(i===Vt.VIEW_POSITION){const s=e.camera;r.value=r.value||new ce,r.value.setFromMatrixPosition(t.matrixWorld),r.value.applyMatrix4(s.matrixWorldInverse)}}generate(e){const t=this.scope;return t===Vt.WORLD_MATRIX?this._uniformNode.nodeType="mat4":(t===Vt.POSITION||t===Vt.VIEW_POSITION||t===Vt.DIRECTION||t===Vt.SCALE)&&(this._uniformNode.nodeType="vec3"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}Vt.WORLD_MATRIX="worldMatrix";Vt.POSITION="position";Vt.SCALE="scale";Vt.VIEW_POSITION="viewPosition";Vt.DIRECTION="direction";Vt.DIRECTION;Vt.WORLD_MATRIX;Vt.POSITION;Vt.SCALE;Vt.VIEW_POSITION;class Yo extends Vt{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}Yo.DIRECTION;const Xu=ze(Yo,Yo.WORLD_MATRIX);Yo.POSITION;Yo.SCALE;Yo.VIEW_POSITION;const gwe=Mt(new ps).onObjectUpdate(({object:n},e)=>e.value.getNormalMatrix(n.matrixWorld)),e1=dl.mul(Xu).toVar("modelViewMatrix"),NH=il("position","vec3"),Jr=NH.varying("positionLocal"),Xk=NH.varying("positionPrevious"),zC=Xu.mul(Jr).xyz.varying("v_positionWorld"),PH=Jr.transformDirection(Xu).varying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),Yr=e1.mul(Jr).xyz.varying("v_positionView"),Fn=Yr.negate().varying("v_positionViewDirection").normalize().toVar("positionViewDirection");class ywe extends wt{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){const{renderer:t,material:r}=e;return t.coordinateSystem===fo&&r.side===cl?"false":e.getFrontFacing()}}const vwe=ze(ywe),t1=Ae(vwe).mul(2).sub(1),IH=il("normal","vec3"),Qo=je(n=>n.geometry.hasAttribute("normal")===!1?(console.warn('TSL.NormalNode: Vertex attribute "normal" not found on geometry.'),Me(0,1,0)):IH,"vec3").once()().toVar("normalLocal"),_we=Yr.dFdx().cross(Yr.dFdy()).normalize().toVar("normalFlat"),wo=je(n=>{let e;return n.material.flatShading===!0?e=_we:e=hl(DH(Qo),"v_normalView").normalize(),e},"vec3").once()().toVar("normalView"),n1=hl(wo.transformDirection(dl),"v_normalWorld").normalize().toVar("normalWorld"),sr=je(n=>n.context.setupNormal(),"vec3").once()().mul(t1).toVar("transformedNormalView"),LH=sr.transformDirection(dl).toVar("transformedNormalWorld"),Mm=je(n=>n.context.setupClearcoatNormal(),"vec3").once()().mul(t1).toVar("transformedClearcoatNormalView"),xwe=je(([n,e=Xu])=>{const t=Ui(e),r=n.div(Me(t[0].dot(t[0]),t[1].dot(t[1]),t[2].dot(t[2])));return t.mul(r).xyz}),DH=je(([n],e)=>{const t=e.renderer.nodes.modelNormalViewMatrix;if(t!==null)return t.transformDirection(n);const r=gwe.mul(n);return dl.transformDirection(r)}),Swe=Mt(0).onReference(({material:n})=>n).onRenderUpdate(({material:n})=>n.refractionRatio),bwe=Fn.negate().reflect(sr),wwe=Fn.negate().refract(sr,Swe),Twe=bwe.transformDirection(dl).toVar("reflectVector"),Mwe=wwe.transformDirection(dl).toVar("reflectVector");class Ewe extends Ny{static get type(){return"CubeTextureNode"}constructor(e,t=null,r=null,i=null){super(e,t,r,i),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===Gu?Twe:e.mapping===Uf?Mwe:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),Me(0,0,0))}setUpdateMatrix(){}setupUV(e,t){const r=this.value;return e.renderer.coordinateSystem===Wu||!r.isRenderTargetTexture?Me(t.x.negate(),t.yz):t}generateUV(e,t){return t.build(e,"vec3")}}const $g=Ce(Ewe);class OH extends cp{static get type(){return"BufferNode"}constructor(e,t,r=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=r}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const x2=(n,e,t)=>Ue(new OH(n,e,t));class Awe extends Cy{static get type(){return"UniformArrayElementNode"}constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}generate(e){const t=super.generate(e),r=this.getNodeType();return e.format(t,"vec4",r)}}class Cwe extends OH{static get type(){return"UniformArrayNode"}constructor(e,t=null){super(null,"vec4"),this.array=e,this.elementType=t,this._elementType=null,this._elementLength=0,this.updateType=Nt.RENDER,this.isArrayBufferNode=!0}getElementType(){return this.elementType||this._elementType}getElementLength(){return this._elementLength}update(){const{array:e,value:t}=this,r=this.getElementLength(),i=this.getElementType();if(r===1)for(let s=0;s<e.length;s++){const o=s*4;t[o]=e[s]}else if(i==="color")for(let s=0;s<e.length;s++){const o=s*4,a=e[s];t[o]=a.r,t[o+1]=a.g,t[o+2]=a.b||0}else for(let s=0;s<e.length;s++){const o=s*4,a=e[s];t[o]=a.x,t[o+1]=a.y,t[o+2]=a.z||0,t[o+3]=a.w||0}}setup(e){const t=this.array.length;this._elementType=this.elementType===null?Vx(this.array[0]):this.elementType,this._elementLength=e.getTypeLength(this._elementType);let r=Float32Array;return this._elementType.charAt(0)==="i"?r=Int32Array:this._elementType.charAt(0)==="u"&&(r=Uint32Array),this.value=new r(t*4),this.bufferCount=t,this.bufferType=e.changeComponentType("vec4",e.getComponentType(this._elementType)),super.setup(e)}element(e){return Ue(new Awe(this,Ue(e)))}}const Vg=(n,e)=>Ue(new Cwe(n,e));class Rwe extends Cy{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),r=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(t,r,i)}}class S2 extends wt{static get type(){return"ReferenceNode"}constructor(e,t,r=null,i=null){super(),this.property=e,this.uniformType=t,this.object=r,this.count=i,this.properties=e.split("."),this.reference=r,this.node=null,this.group=null,this.name=null,this.updateType=Nt.OBJECT}element(e){return Ue(new Rwe(this,Ue(e)))}setGroup(e){return this.group=e,this}label(e){return this.name=e,this}setNodeType(e){let t=null;this.count!==null?t=x2(null,e,this.count):Array.isArray(this.getValueFromReference())?t=Vg(null,e):e==="texture"?t=qn(null):e==="cubeTexture"?t=$g(null):t=Mt(null,e),this.group!==null&&t.setGroup(this.group),this.name!==null&&t.label(this.name),this.node=t.getSelf()}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let r=e[t[0]];for(let i=1;i<t.length;i++)r=r[t[i]];return r}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const kn=(n,e,t)=>Ue(new S2(n,e,t)),Kk=(n,e,t,r)=>Ue(new S2(n,e,r,t));class Nwe extends S2{static get type(){return"MaterialReferenceNode"}constructor(e,t,r=null){super(e,t,r),this.material=r,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const Wl=(n,e,t)=>Ue(new Nwe(n,e,t)),FH=je(n=>(n.geometry.hasAttribute("tangent")===!1&&n.geometry.computeTangents(),il("tangent","vec4")))(),b2=FH.xyz.toVar("tangentLocal"),kH=e1.mul(Tt(b2,0)).xyz.varying("v_tangentView").normalize().toVar("tangentView"),Pwe=n=>n.mul(FH.w).xyz,Iwe=hl(Pwe(wo.cross(kH)),"v_bitangentView").normalize().toVar("bitangentView"),Em=Ui(kH,Iwe,wo),Lwe=(()=>{let n=Xd.cross(Fn);return n=n.cross(Xd).normalize(),n=Tn(n,sr,tu.mul(Ia.oneMinus()).oneMinus().pow2().pow2()).normalize(),n})(),Dwe=je(n=>{const{eye_pos:e,surf_norm:t,mapN:r,uv:i}=n,s=e.dFdx(),o=e.dFdy(),a=i.dFdx(),l=i.dFdy(),c=t,u=o.cross(c),h=c.cross(s),d=u.mul(a.x).add(h.mul(l.x)),f=u.mul(a.y).add(h.mul(l.y)),p=d.dot(d).max(f.dot(f)),g=t1.mul(p.inverseSqrt());return us(d.mul(r.x,g),f.mul(r.y,g),c.mul(r.z)).normalize()});class Owe extends hr{static get type(){return"NormalMapNode"}constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=xc}setup(e){const{normalMapType:t,scaleNode:r}=this;let i=this.node.mul(2).sub(1);r!==null&&(i=Me(i.xy.mul(r),i.z));let s=null;return t===Axe?s=DH(i):t===xc&&(e.hasGeometryAttribute("tangent")===!0?s=Em.mul(i).normalize():s=Dwe({eye_pos:Yr,surf_norm:wo,mapN:i,uv:Jb()})),s}}const Yk=Ce(Owe),Fwe=je(({textureNode:n,bumpScale:e})=>{const t=i=>n.cache().context({getUV:s=>i(s.uvNode||Jb()),forceUVContext:!0}),r=Ae(t(i=>i));return Ke(Ae(t(i=>i.add(i.dFdx()))).sub(r),Ae(t(i=>i.add(i.dFdy()))).sub(r)).mul(e)}),kwe=je(n=>{const{surf_pos:e,surf_norm:t,dHdxy:r}=n,i=e.dFdx().normalize(),s=e.dFdy().normalize(),o=t,a=s.cross(o),l=o.cross(i),c=i.dot(a).mul(t1),u=c.sign().mul(r.x.mul(a).add(r.y.mul(l)));return c.abs().mul(t).sub(u).normalize()});class Uwe extends hr{static get type(){return"BumpMapNode"}constructor(e,t=null){super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=Fwe({textureNode:this.textureNode,bumpScale:e});return kwe({surf_pos:Yr,surf_norm:wo,dHdxy:t})}}const Bwe=Ce(Uwe),Qk=new Map;class ge extends wt{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,t){let r=Qk.get(e);return r===void 0&&(r=Wl(e,t),Qk.set(e,r)),r}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const t=e.context.material,r=this.scope;let i=null;if(r===ge.COLOR){const s=t.color!==void 0?this.getColor(r):Me();t.map&&t.map.isTexture===!0?i=s.mul(this.getTexture("map")):i=s}else if(r===ge.OPACITY){const s=this.getFloat(r);t.alphaMap&&t.alphaMap.isTexture===!0?i=s.mul(this.getTexture("alpha")):i=s}else if(r===ge.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?i=this.getTexture("specular").r:i=Ae(1);else if(r===ge.SPECULAR_INTENSITY){const s=this.getFloat(r);t.specularMap?i=s.mul(this.getTexture(r).a):i=s}else if(r===ge.SPECULAR_COLOR){const s=this.getColor(r);t.specularColorMap&&t.specularColorMap.isTexture===!0?i=s.mul(this.getTexture(r).rgb):i=s}else if(r===ge.ROUGHNESS){const s=this.getFloat(r);t.roughnessMap&&t.roughnessMap.isTexture===!0?i=s.mul(this.getTexture(r).g):i=s}else if(r===ge.METALNESS){const s=this.getFloat(r);t.metalnessMap&&t.metalnessMap.isTexture===!0?i=s.mul(this.getTexture(r).b):i=s}else if(r===ge.EMISSIVE){const s=this.getFloat("emissiveIntensity"),o=this.getColor(r).mul(s);t.emissiveMap&&t.emissiveMap.isTexture===!0?i=o.mul(this.getTexture(r)):i=o}else if(r===ge.NORMAL)t.normalMap?(i=Yk(this.getTexture("normal"),this.getCache("normalScale","vec2")),i.normalMapType=t.normalMapType):t.bumpMap?i=Bwe(this.getTexture("bump").r,this.getFloat("bumpScale")):i=wo;else if(r===ge.CLEARCOAT){const s=this.getFloat(r);t.clearcoatMap&&t.clearcoatMap.isTexture===!0?i=s.mul(this.getTexture(r).r):i=s}else if(r===ge.CLEARCOAT_ROUGHNESS){const s=this.getFloat(r);t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?i=s.mul(this.getTexture(r).r):i=s}else if(r===ge.CLEARCOAT_NORMAL)t.clearcoatNormalMap?i=Yk(this.getTexture(r),this.getCache(r+"Scale","vec2")):i=wo;else if(r===ge.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?i=s.mul(this.getTexture("sheenColor").rgb):i=s}else if(r===ge.SHEEN_ROUGHNESS){const s=this.getFloat(r);t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?i=s.mul(this.getTexture(r).a):i=s,i=i.clamp(.07,1)}else if(r===ge.ANISOTROPY)if(t.anisotropyMap&&t.anisotropyMap.isTexture===!0){const s=this.getTexture(r);i=h2(nm.x,nm.y,nm.y.negate(),nm.x).mul(s.rg.mul(2).sub(Ke(1)).normalize().mul(s.b))}else i=nm;else if(r===ge.IRIDESCENCE_THICKNESS){const s=kn("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const o=kn("0","float",t.iridescenceThicknessRange);i=s.sub(o).mul(this.getTexture(r).g).add(o)}else i=s}else if(r===ge.TRANSMISSION){const s=this.getFloat(r);t.transmissionMap?i=s.mul(this.getTexture(r).r):i=s}else if(r===ge.THICKNESS){const s=this.getFloat(r);t.thicknessMap?i=s.mul(this.getTexture(r).g):i=s}else if(r===ge.IOR)i=this.getFloat(r);else if(r===ge.LIGHT_MAP)i=this.getTexture(r).rgb.mul(this.getFloat("lightMapIntensity"));else if(r===ge.AO_MAP)i=this.getTexture(r).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else{const s=this.getNodeType(e);i=this.getCache(r,s)}return i}}ge.ALPHA_TEST="alphaTest";ge.COLOR="color";ge.OPACITY="opacity";ge.SHININESS="shininess";ge.SPECULAR="specular";ge.SPECULAR_STRENGTH="specularStrength";ge.SPECULAR_INTENSITY="specularIntensity";ge.SPECULAR_COLOR="specularColor";ge.REFLECTIVITY="reflectivity";ge.ROUGHNESS="roughness";ge.METALNESS="metalness";ge.NORMAL="normal";ge.CLEARCOAT="clearcoat";ge.CLEARCOAT_ROUGHNESS="clearcoatRoughness";ge.CLEARCOAT_NORMAL="clearcoatNormal";ge.EMISSIVE="emissive";ge.ROTATION="rotation";ge.SHEEN="sheen";ge.SHEEN_ROUGHNESS="sheenRoughness";ge.ANISOTROPY="anisotropy";ge.IRIDESCENCE="iridescence";ge.IRIDESCENCE_IOR="iridescenceIOR";ge.IRIDESCENCE_THICKNESS="iridescenceThickness";ge.IOR="ior";ge.TRANSMISSION="transmission";ge.THICKNESS="thickness";ge.ATTENUATION_DISTANCE="attenuationDistance";ge.ATTENUATION_COLOR="attenuationColor";ge.LINE_SCALE="scale";ge.LINE_DASH_SIZE="dashSize";ge.LINE_GAP_SIZE="gapSize";ge.LINE_WIDTH="linewidth";ge.LINE_DASH_OFFSET="dashOffset";ge.POINT_WIDTH="pointWidth";ge.DISPERSION="dispersion";ge.LIGHT_MAP="light";ge.AO_MAP="ao";const zwe=ze(ge,ge.ALPHA_TEST),$we=ze(ge,ge.COLOR),Vwe=ze(ge,ge.SHININESS),Gwe=ze(ge,ge.EMISSIVE),UH=ze(ge,ge.OPACITY),Hwe=ze(ge,ge.SPECULAR),Zk=ze(ge,ge.SPECULAR_INTENSITY),Wwe=ze(ge,ge.SPECULAR_COLOR),y_=ze(ge,ge.SPECULAR_STRENGTH),NT=ze(ge,ge.REFLECTIVITY),jwe=ze(ge,ge.ROUGHNESS),qwe=ze(ge,ge.METALNESS),Xwe=ze(ge,ge.NORMAL).context({getUV:null}),Kwe=ze(ge,ge.CLEARCOAT),Ywe=ze(ge,ge.CLEARCOAT_ROUGHNESS),Qwe=ze(ge,ge.CLEARCOAT_NORMAL).context({getUV:null}),Zwe=ze(ge,ge.ROTATION),Jwe=ze(ge,ge.SHEEN),eTe=ze(ge,ge.SHEEN_ROUGHNESS),tTe=ze(ge,ge.ANISOTROPY),nTe=ze(ge,ge.IRIDESCENCE),rTe=ze(ge,ge.IRIDESCENCE_IOR),iTe=ze(ge,ge.IRIDESCENCE_THICKNESS),sTe=ze(ge,ge.TRANSMISSION),oTe=ze(ge,ge.THICKNESS),aTe=ze(ge,ge.IOR),lTe=ze(ge,ge.ATTENUATION_DISTANCE),cTe=ze(ge,ge.ATTENUATION_COLOR),uTe=ze(ge,ge.LINE_SCALE),hTe=ze(ge,ge.LINE_DASH_SIZE),dTe=ze(ge,ge.LINE_GAP_SIZE);ge.LINE_WIDTH;ge.LINE_DASH_OFFSET;ge.POINT_WIDTH;const fTe=ze(ge,ge.DISPERSION),BH=ze(ge,ge.LIGHT_MAP),pTe=ze(ge,ge.AO_MAP),nm=Mt(new Bt).onReference(function(n){return n.material}).onRenderUpdate(function({material:n}){this.value.set(n.anisotropy*Math.cos(n.anisotropyRotation),n.anisotropy*Math.sin(n.anisotropyRotation))});class mTe extends hr{static get type(){return"ModelViewProjectionNode"}constructor(e=null){super("vec4"),this.positionNode=e}setup(e){if(e.shaderStage==="fragment")return hl(e.context.mvp);const t=this.positionNode||Jr,r=e.renderer.nodes.modelViewMatrix||e1;return _2.mul(r).mul(t)}}const $C=Ce(mTe);class Mn extends wt{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isInstanceIndexNode=!0}generate(e){const t=this.getNodeType(e),r=this.scope;let i;if(r===Mn.VERTEX)i=e.getVertexIndex();else if(r===Mn.INSTANCE)i=e.getInstanceIndex();else if(r===Mn.DRAW)i=e.getDrawIndex();else if(r===Mn.INVOCATION_LOCAL)i=e.getInvocationLocalIndex();else if(r===Mn.INVOCATION_SUBGROUP)i=e.getInvocationSubgroupIndex();else if(r===Mn.SUBGROUP)i=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+r);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=i:s=hl(this).build(e,t),s}}Mn.VERTEX="vertex";Mn.INSTANCE="instance";Mn.SUBGROUP="subgroup";Mn.INVOCATION_LOCAL="invocationLocal";Mn.INVOCATION_SUBGROUP="invocationSubgroup";Mn.DRAW="draw";const gTe=ze(Mn,Mn.VERTEX),w2=ze(Mn,Mn.INSTANCE);Mn.SUBGROUP;Mn.INVOCATION_SUBGROUP;Mn.INVOCATION_LOCAL;const yTe=ze(Mn,Mn.DRAW);class vTe extends wt{static get type(){return"InstanceNode"}constructor(e){super("void"),this.instanceMesh=e,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=Nt.FRAME,this.buffer=null,this.bufferColor=null}setup(e){let t=this.instanceMatrixNode,r=this.instanceColorNode;const i=this.instanceMesh;if(t===null){const a=i.instanceMatrix;if(i.count<=1e3)t=x2(a.array,"mat4",Math.max(i.count,1)).element(w2);else{const l=new XSe(a.array,16,1);this.buffer=l;const c=a.usage===Sd?qk:jk,u=[c(l,"vec4",16,0),c(l,"vec4",16,4),c(l,"vec4",16,8),c(l,"vec4",16,12)];t=qd(...u)}this.instanceMatrixNode=t}const s=i.instanceColor;if(s&&r===null){const a=new DSe(s.array,3),l=s.usage===Sd?qk:jk;this.bufferColor=a,r=Me(l(a,"vec3",3,0)),this.instanceColorNode=r}const o=t.mul(Jr).xyz;if(Jr.assign(o),e.hasGeometryAttribute("normal")){const a=xwe(Qo,t);Qo.assign(a)}this.instanceColorNode!==null&&Hx("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMesh.instanceMatrix.usage!==Sd&&this.buffer!=null&&this.instanceMesh.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMesh.instanceMatrix.version),this.instanceMesh.instanceColor&&this.instanceMesh.instanceColor.usage!==Sd&&this.bufferColor!=null&&this.instanceMesh.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceMesh.instanceColor.version)}}const _Te=Ce(vTe);class xTe extends wt{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=w2:this.batchingIdNode=yTe);const r=je(([p])=>{const g=Jm(eo(this.batchMesh._indirectTexture),0),y=jn(p).modInt(jn(g)),m=jn(p).div(jn(g));return eo(this.batchMesh._indirectTexture,Ea(y,m)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(jn(this.batchingIdNode)),i=this.batchMesh._matricesTexture,s=Jm(eo(i),0),o=Ae(r).mul(4).toInt().toVar(),a=o.modInt(s),l=o.div(jn(s)),c=qd(eo(i,Ea(a,l)),eo(i,Ea(a.add(1),l)),eo(i,Ea(a.add(2),l)),eo(i,Ea(a.add(3),l))),u=this.batchMesh._colorsTexture;if(u!==null){const g=je(([y])=>{const m=Jm(eo(u),0).x,_=y,v=_.modInt(m),x=_.div(m);return eo(u,Ea(v,x)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(r);Hx("vec3","vBatchColor").assign(g)}const h=Ui(c);Jr.assign(c.mul(Jr));const d=Qo.div(Me(h[0].dot(h[0]),h[1].dot(h[1]),h[2].dot(h[2]))),f=h.mul(d).xyz;Qo.assign(f),e.hasGeometryAttribute("tangent")&&b2.mulAssign(h)}}const STe=Ce(xTe),Jk=new WeakMap;class bTe extends wt{static get type(){return"SkinningNode"}constructor(e,t=!1){super("void"),this.skinnedMesh=e,this.useReference=t,this.updateType=Nt.OBJECT,this.skinIndexNode=il("skinIndex","uvec4"),this.skinWeightNode=il("skinWeight","vec4");let r,i,s;t?(r=kn("bindMatrix","mat4"),i=kn("bindMatrixInverse","mat4"),s=Kk("skeleton.boneMatrices","mat4",e.skeleton.bones.length)):(r=Mt(e.bindMatrix,"mat4"),i=Mt(e.bindMatrixInverse,"mat4"),s=x2(e.skeleton.boneMatrices,"mat4",e.skeleton.bones.length)),this.bindMatrixNode=r,this.bindMatrixInverseNode=i,this.boneMatricesNode=s,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,t=Jr){const{skinIndexNode:r,skinWeightNode:i,bindMatrixNode:s,bindMatrixInverseNode:o}=this,a=e.element(r.x),l=e.element(r.y),c=e.element(r.z),u=e.element(r.w),h=s.mul(t),d=us(a.mul(i.x).mul(h),l.mul(i.y).mul(h),c.mul(i.z).mul(h),u.mul(i.w).mul(h));return o.mul(d).xyz}getSkinnedNormal(e=this.boneMatricesNode,t=Qo){const{skinIndexNode:r,skinWeightNode:i,bindMatrixNode:s,bindMatrixInverseNode:o}=this,a=e.element(r.x),l=e.element(r.y),c=e.element(r.z),u=e.element(r.w);let h=us(i.x.mul(a),i.y.mul(l),i.z.mul(c),i.w.mul(u));return h=o.mul(h).mul(s),h.transformDirection(t).xyz}getPreviousSkinnedPosition(e){const t=e.object;return this.previousBoneMatricesNode===null&&(t.skeleton.previousBoneMatrices=new Float32Array(t.skeleton.boneMatrices),this.previousBoneMatricesNode=Kk("skeleton.previousBoneMatrices","mat4",t.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,Xk)}needsPreviousBoneMatrices(e){const t=e.renderer.getMRT();return t&&t.has("velocity")}setup(e){this.needsPreviousBoneMatrices(e)&&Xk.assign(this.getPreviousSkinnedPosition(e));const t=this.getSkinnedPosition();if(Jr.assign(t),e.hasGeometryAttribute("normal")){const r=this.getSkinnedNormal();Qo.assign(r),e.hasGeometryAttribute("tangent")&&b2.assign(r)}}generate(e,t){if(t!=="void")return Jr.build(e,t)}update(e){const r=(this.useReference?e.object:this.skinnedMesh).skeleton;Jk.get(r)!==e.frameId&&(Jk.set(r,e.frameId),this.previousBoneMatricesNode!==null&&r.previousBoneMatrices.set(r.boneMatrices),r.update())}}const wTe=n=>Ue(new bTe(n,!0));class TTe extends wt{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const t=e.getNodeProperties(this);if(t.stackNode!==void 0)return t;const r={};for(let s=0,o=this.params.length-1;s<o;s++){const a=this.params[s],l=a.isNode!==!0&&a.name||this.getVarName(s),c=a.isNode!==!0&&a.type||"int";r[l]=zg(l,c)}const i=e.addStack();return t.returnsNode=this.params[this.params.length-1](r,i,e),t.stackNode=i,e.removeStack(),t}getNodeType(e){const{returnsNode:t}=this.getProperties(e);return t?t.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const t=this.getProperties(e),r=this.params,i=t.stackNode;for(let a=0,l=r.length-1;a<l;a++){const c=r[a];let u=null,h=null,d=null,f=null,p=null,g=null;c.isNode?(f="int",d=this.getVarName(a),u="0",h=c.build(e,f),p="<"):(f=c.type||"int",d=c.name||this.getVarName(a),u=c.start,h=c.end,p=c.condition,g=c.update,typeof u=="number"?u=u.toString():u&&u.isNode&&(u=u.build(e,f)),typeof h=="number"?h=h.toString():h&&h.isNode&&(h=h.build(e,f)),u!==void 0&&h===void 0?(u=u+" - 1",h="0",p=">="):h!==void 0&&u===void 0&&(u="0",p="<"),p===void 0&&(Number(u)>Number(h)?p=">=":p="<"));const y={start:u,end:h,condition:p},m=y.start,_=y.end;let v="",x="",b="";g||(f==="int"||f==="uint"?p.includes("<")?g="++":g="--":p.includes("<")?g="+= 1.":g="-= 1."),v+=e.getVar(f,d)+" = "+m,x+=d+" "+p+" "+_,b+=d+" "+g;const T=`for ( ${v}; ${x}; ${b} )`;e.addFlowCode((a===0?`
`:"")+e.tab+T+` {

`).addFlowTab()}const s=i.build(e,"void"),o=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let a=0,l=this.params.length-1;a<l;a++)e.addFlowCode((a===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),o}}const $a=(...n)=>Ue(new TTe(jd(n,"int"))).append(),MTe=()=>zg("break").append(),PT=new WeakMap,Ki=new tn,eU=je(({bufferMap:n,influence:e,stride:t,width:r,depth:i,offset:s})=>{const o=jn(gTe).mul(t).add(s),a=o.div(r),l=o.sub(a.mul(r));return eo(n,Ea(l,a)).depth(i).mul(e)});function ETe(n){const e=n.morphAttributes.position!==void 0,t=n.morphAttributes.normal!==void 0,r=n.morphAttributes.color!==void 0,i=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,s=i!==void 0?i.length:0;let o=PT.get(n);if(o===void 0||o.count!==s){let _=function(){y.dispose(),PT.delete(n),n.removeEventListener("dispose",_)};var a=_;o!==void 0&&o.texture.dispose();const l=n.morphAttributes.position||[],c=n.morphAttributes.normal||[],u=n.morphAttributes.color||[];let h=0;e===!0&&(h=1),t===!0&&(h=2),r===!0&&(h=3);let d=n.attributes.position.count*h,f=1;const p=4096;d>p&&(f=Math.ceil(d/p),d=p);const g=new Float32Array(d*f*4*s),y=new pSe(g,d,f,s);y.type=is,y.needsUpdate=!0;const m=h*4;for(let v=0;v<s;v++){const x=l[v],b=c[v],T=u[v],w=d*f*4*v;for(let M=0;M<x.count;M++){const C=M*m;e===!0&&(Ki.fromBufferAttribute(x,M),g[w+C+0]=Ki.x,g[w+C+1]=Ki.y,g[w+C+2]=Ki.z,g[w+C+3]=0),t===!0&&(Ki.fromBufferAttribute(b,M),g[w+C+4]=Ki.x,g[w+C+5]=Ki.y,g[w+C+6]=Ki.z,g[w+C+7]=0),r===!0&&(Ki.fromBufferAttribute(T,M),g[w+C+8]=Ki.x,g[w+C+9]=Ki.y,g[w+C+10]=Ki.z,g[w+C+11]=T.itemSize===4?Ki.w:1)}}o={count:s,texture:y,stride:h,size:new Bt(d,f)},PT.set(n,o),n.addEventListener("dispose",_)}return o}class ATe extends wt{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=Mt(1),this.updateType=Nt.OBJECT}setup(e){const{geometry:t}=e,r=t.morphAttributes.position!==void 0,i=t.hasAttribute("normal")&&t.morphAttributes.normal!==void 0,s=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,o=s!==void 0?s.length:0,{texture:a,stride:l,size:c}=ETe(t);r===!0&&Jr.mulAssign(this.morphBaseInfluence),i===!0&&Qo.mulAssign(this.morphBaseInfluence);const u=jn(c.width);$a(o,({i:h})=>{const d=Ae(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?d.assign(eo(this.mesh.morphTexture,Ea(jn(h).add(1),jn(w2))).r):d.assign(kn("morphTargetInfluences","float").element(h).toVar()),r===!0&&Jr.addAssign(eU({bufferMap:a,influence:d,stride:l,width:u,depth:h,offset:jn(0)})),i===!0&&Qo.addAssign(eU({bufferMap:a,influence:d,stride:l,width:u,depth:h,offset:jn(1)}))})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((t,r)=>t+r,0)}}const CTe=Ce(ATe),RTe=n=>n.sort((e,t)=>e.id-t.id),NTe=(n,e)=>{for(const t of e)if(t.isAnalyticLightNode&&t.light.id===n)return t;return null},IT=new WeakMap;class zH extends wt{static get type(){return"LightsNode"}constructor(e=[]){super("vec3"),this.totalDiffuseNode=Me().toVar("totalDiffuse"),this.totalSpecularNode=Me().toVar("totalSpecular"),this.outgoingLightNode=Me().toVar("outgoingLight"),this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this.global=!0}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const t=[];for(const r of this._lightNodes)t.push(r.getHash());this._lightNodesHash="lights-"+t.join(",")}return this._lightNodesHash}analyze(e){const t=e.getDataFromNode(this);for(const r of t.nodes)r.build(e)}setupLightsNode(e){const t=[],r=this._lightNodes,i=RTe(this._lights),s=e.renderer.nodes.library;for(const o of i)if(o.isNode)t.push(Ue(o));else{let a=null;if(r!==null&&(a=NTe(o.id,r)),a===null){const l=s.getLightNodeClass(o.constructor);if(l===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${o.constructor.name}`);continue}let c=null;IT.has(o)?c=IT.get(o):(c=new l(o),IT.set(o,c)),t.push(c)}}this._lightNodes=t}setup(e){this._lightNodes===null&&this.setupLightsNode(e);const t=e.context,r=t.lightingModel;let i=this.outgoingLightNode;if(r){const{_lightNodes:s,totalDiffuseNode:o,totalSpecularNode:a}=this;t.outgoingLight=i;const l=e.addStack(),c=e.getDataFromNode(this);c.nodes=l.nodes,r.start(t,l,e);for(const m of s)m.build(e);r.indirect(t,l,e);const{backdrop:u,backdropAlpha:h}=t,{directDiffuse:d,directSpecular:f,indirectDiffuse:p,indirectSpecular:g}=t.reflectedLight;let y=d.add(p);u!==null&&(h!==null?y=Me(h.mix(y,u)):y=Me(u),t.material.transparent=!0),o.assign(y),a.assign(f.add(g)),i.assign(o.add(a)),r.finish(t,l,e),i=i.bypass(e.removeStack())}return i}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}}const PTe=Ce(zH);class hp extends wt{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}generate(){console.warn("Abstract function.")}}class ITe extends hp{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class LTe extends MH{static get type(){return"LightingContextNode"}constructor(e,t=null,r=null,i=null){super(e),this.lightingModel=t,this.backdropNode=r,this.backdropAlphaNode=i,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:t}=this,r=Me().toVar("directDiffuse"),i=Me().toVar("directSpecular"),s=Me().toVar("indirectDiffuse"),o=Me().toVar("indirectSpecular"),a={directDiffuse:r,directSpecular:i,indirectDiffuse:s,indirectSpecular:o};return{radiance:Me().toVar("radiance"),irradiance:Me().toVar("irradiance"),iblIrradiance:Me().toVar("iblIrradiance"),ambientOcclusion:Ae(1).toVar("ambientOcclusion"),reflectedLight:a,backdrop:e,backdropAlpha:t}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const DTe=Ce(LTe);class OTe extends hp{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}let rm,im;class nr extends wt{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===nr.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=Nt.NONE;return(this.scope===nr.SIZE||this.scope===nr.VIEWPORT)&&(e=Nt.RENDER),this.updateType=e,e}update({renderer:e}){const t=e.getRenderTarget();this.scope===nr.VIEWPORT?t!==null?im.copy(t.viewport):(e.getViewport(im),im.multiplyScalar(e.getPixelRatio())):t!==null?(rm.width=t.width,rm.height=t.height):e.getDrawingBufferSize(rm)}setup(){const e=this.scope;let t=null;return e===nr.SIZE?t=Mt(rm||(rm=new Bt)):e===nr.VIEWPORT?t=Mt(im||(im=new tn)):t=Ke(r1.div(VC)),t}generate(e){if(this.scope===nr.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){const r=e.getNodeProperties(VC).outputNode.build(e);t=`${e.getType("vec2")}( ${t}.x, ${r}.y - ${t}.y )`}return t}return super.generate(e)}}nr.COORDINATE="coordinate";nr.VIEWPORT="viewport";nr.SIZE="size";nr.UV="uv";const Gg=ze(nr,nr.UV),VC=ze(nr,nr.SIZE),r1=ze(nr,nr.COORDINATE),$H=ze(nr,nr.VIEWPORT);$H.zw;$H.xy;const sm=new Bt;class VH extends Ny{static get type(){return"ViewportTextureNode"}constructor(e=Gg,t=null,r=null){r===null&&(r=new kSe,r.minFilter=ja),super(r,e,t),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=Nt.FRAME}updateBefore(e){const t=e.renderer;t.getDrawingBufferSize(sm);const r=this.value;(r.image.width!==sm.width||r.image.height!==sm.height)&&(r.image.width=sm.width,r.image.height=sm.height,r.needsUpdate=!0);const i=r.generateMipmaps;r.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(r),r.generateMipmaps=i}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const FTe=Ce(VH,null,null,{generateMipmaps:!0});let LT=null;class kTe extends VH{static get type(){return"ViewportDepthTextureNode"}constructor(e=Gg,t=null){LT===null&&(LT=new Ay),super(e,t,LT)}}const UTe=Ce(kTe);class Ei extends wt{static get type(){return"ViewportDepthNode"}constructor(e,t=null){super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){const{scope:t}=this;return t===Ei.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:t}=this,r=this.valueNode;let i=null;if(t===Ei.DEPTH_BASE)r!==null&&(i=HH().assign(r));else if(t===Ei.DEPTH)e.isPerspectiveCamera?i=BTe(Yr.z,em,tm):i=v_(Yr.z,em,tm);else if(t===Ei.LINEAR_DEPTH)if(r!==null)if(e.isPerspectiveCamera){const s=GH(r,em,tm);i=v_(s,em,tm)}else i=r;else i=v_(Yr.z,em,tm);return i}}Ei.DEPTH_BASE="depthBase";Ei.DEPTH="depth";Ei.LINEAR_DEPTH="linearDepth";const v_=(n,e,t)=>n.add(e).div(e.sub(t)),BTe=(n,e,t)=>e.add(n).mul(t).div(t.sub(e).mul(n)),GH=(n,e,t)=>e.mul(t).div(t.sub(e).mul(n).sub(t)),HH=Ce(Ei,Ei.DEPTH_BASE),WH=ze(Ei,Ei.DEPTH),zTe=Ce(Ei,Ei.LINEAR_DEPTH);UTe();WH.assign=n=>HH(n);class wc extends wt{static get type(){return"ClippingNode"}constructor(e=wc.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const t=e.clippingContext,{localClipIntersection:r,localClippingCount:i,globalClippingCount:s}=t,o=s+i,a=r?o-i:o;return this.scope===wc.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(t.planes,o,a):this.setupDefault(t.planes,o,a)}setupAlphaToCoverage(e,t,r){return je(()=>{const i=Vg(e),s=rd("float","distanceToPlane"),o=rd("float","distanceToGradient"),a=rd("float","clipOpacity");a.assign(1);let l;if($a(r,({i:c})=>{l=i.element(c),s.assign(Yr.dot(l.xyz).negate().add(l.w)),o.assign(s.fwidth().div(2)),a.mulAssign(qu(o.negate(),o,s)),a.equal(0).discard()}),r<t){const c=rd("float","unionclipOpacity");c.assign(1),$a({start:r,end:t},({i:u})=>{l=i.element(u),s.assign(Yr.dot(l.xyz).negate().add(l.w)),o.assign(s.fwidth().div(2)),c.mulAssign(qu(o.negate(),o,s).oneMinus())}),a.mulAssign(c.oneMinus())}en.a.mulAssign(a),en.a.equal(0).discard()})()}setupDefault(e,t,r){return je(()=>{const i=Vg(e);let s;if($a(r,({i:o})=>{s=i.element(o),Yr.dot(s.xyz).greaterThan(s.w).discard()}),r<t){const o=rd("bool","clipped");o.assign(!0),$a({start:r,end:t},({i:a})=>{s=i.element(a),o.assign(Yr.dot(s.xyz).greaterThan(s.w).and(o))}),o.discard()}})()}}wc.ALPHA_TO_COVERAGE="alphaToCoverage";wc.DEFAULT="default";const $Te=()=>Ue(new wc),VTe=()=>Ue(new wc(wc.ALPHA_TO_COVERAGE));class lr extends ki{static get type(){return"NodeMaterial"}constructor(){super(),this.isNodeMaterial=!0,this.type=this.constructor.type,this.forceSinglePass=!1,this.fog=!0,this.lights=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.depthNode=null,this.shadowNode=null,this.shadowPositionNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+Z6(this)}build(e){this.setup(e)}setupObserver(e){return new YSe(e)}setup(e){e.context.setupNormal=()=>this.setupNormal(e),e.addStack(),e.stack.outputNode=this.vertexNode||this.setupPosition(e),e.addFlow("vertex",e.removeStack()),e.addStack();let t;const r=this.setupClipping(e);if(this.depthWrite===!0&&this.setupDepth(e),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const i=this.setupLighting(e);r!==null&&e.stack.add(r);const s=Tt(i,en.a).max(0);if(t=this.setupOutput(e,s),Dbe.assign(t),this.outputNode!==null&&(t=this.outputNode),e.renderer.getRenderTarget()!==null){const a=e.renderer.getMRT(),l=this.mrtNode;a!==null?(t=a,l!==null&&(t=a.merge(l))):l!==null&&(t=l)}}else{let i=this.fragmentNode;i.isOutputStructNode!==!0&&(i=Tt(i)),t=this.setupOutput(e,i)}e.stack.outputNode=t,e.addFlow("fragment",e.removeStack()),e.monitor=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{globalClippingCount:t,localClippingCount:r}=e.clippingContext;let i=null;if(t||r){const s=e.renderer.samples;this.alphaToCoverage&&s>1?i=VTe():e.stack.add($Te())}return i}setupDepth(e){const{renderer:t}=e;let r=this.depthNode;if(r===null){const i=t.getMRT();i&&i.has("depth")?r=i.get("depth"):t.logarithmicDepthBuffer===!0&&(r=$C().w.add(1).log2().mul(pwe).mul(.5))}r!==null&&WH.assign(r).append()}setupPosition(e){const{object:t}=e,r=t.geometry;if(e.addStack(),(r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color)&&CTe(t).append(),t.isSkinnedMesh===!0&&wTe(t).append(),this.displacementMap){const s=Wl("displacementMap","texture"),o=Wl("displacementScale","float"),a=Wl("displacementBias","float");Jr.addAssign(Qo.normalize().mul(s.x.mul(o).add(a)))}t.isBatchedMesh&&STe(t).append(),t.instanceMatrix&&t.instanceMatrix.isInstancedBufferAttribute===!0&&_Te(t).append(),this.positionNode!==null&&Jr.assign(this.positionNode);const i=$C();return e.context.vertex=e.removeStack(),e.context.mvp=i,i}setupDiffuseColor({object:e,geometry:t}){let r=this.colorNode?Tt(this.colorNode):$we;this.vertexColors===!0&&t.hasAttribute("color")&&(r=Tt(r.xyz.mul(il("color","vec3")),r.a)),e.instanceColor&&(r=Hx("vec3","vInstanceColor").mul(r)),e.isBatchedMesh&&e._colorsTexture&&(r=Hx("vec3","vBatchColor").mul(r)),en.assign(r);const i=this.opacityNode?Ae(this.opacityNode):UH;if(en.a.assign(en.a.mul(i)),this.alphaTestNode!==null||this.alphaTest>0){const s=this.alphaTestNode!==null?Ae(this.alphaTestNode):zwe;en.a.lessThanEqual(s).discard()}this.transparent===!1&&this.blending===dc&&this.alphaToCoverage===!1&&en.a.assign(1)}setupVariants(){}setupOutgoingLight(){return this.lights===!0?Me(0):en.rgb}setupNormal(){return this.normalNode?Me(this.normalNode):Xwe}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?Wl("envMap","cubeTexture"):Wl("envMap","texture")),e}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new OTe(BH)),t}setupLights(e){const t=[],r=this.setupEnvironment(e);r&&r.isLightingNode&&t.push(r);const i=this.setupLightMap(e);if(i&&i.isLightingNode&&t.push(i),this.aoNode!==null||e.material.aoMap){const o=this.aoNode!==null?this.aoNode:pTe;t.push(new ITe(o))}let s=this.lightsNode||e.lightsNode;return t.length>0&&(s=PTe([...s.getLights(),...t])),s}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:r,backdropAlphaNode:i,emissiveNode:s}=this,a=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let l=this.setupOutgoingLight(e);if(a&&a.getScope().getLights().length>0){const c=this.setupLightingModel(e);l=DTe(a,c,r,i)}else r!==null&&(l=Me(i!==null?Tn(l,r,i):r));return(s&&s.isNode===!0||t.emissive&&t.emissive.isColor===!0)&&(Gk.assign(Me(s||Gwe)),l=l.add(Gk)),l}setupOutput(e,t){if(this.fog===!0){const r=e.fogNode;r&&(t=Tt(r.mix(t.rgb,r.colorNode),t.a))}return t}setDefaultValues(e){for(const r in e){const i=e[r];this[r]===void 0&&(this[r]=i,i&&i.clone&&(this[r]=i.clone()))}const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const r in t)Object.getOwnPropertyDescriptor(this.constructor.prototype,r)===void 0&&t[r].get!==void 0&&Object.defineProperty(this.constructor.prototype,r,t[r])}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{},nodes:{}});const r=ki.prototype.toJSON.call(this,e),i=$x(this);r.inputNodes={};for(const{property:o,childNode:a}of i)r.inputNodes[o]=a.toJSON(e).uuid;function s(o){const a=[];for(const l in o){const c=o[l];delete c.metadata,a.push(c)}return a}if(t){const o=s(e.textures),a=s(e.images),l=s(e.nodes);o.length>0&&(r.textures=o),a.length>0&&(r.images=a),l.length>0&&(r.nodes=l)}return r}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.depthNode=e.depthNode,this.shadowNode=e.shadowNode,this.shadowPositionNode=e.shadowPositionNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const GTe=new n2;class HTe extends lr{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.lights=!1,this.setDefaultValues(GTe),this.setValues(e)}}const WTe=new K6;class jTe extends lr{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.lights=!1,this.setDefaultValues(WTe),this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode,t=this.dashScaleNode?Ae(this.dashScaleNode):uTe,r=this.dashSizeNode?Ae(this.dashSizeNode):hTe,i=this.dashSizeNode?Ae(this.dashGapNode):dTe;RT.assign(r),Hk.assign(i);const s=hl(il("lineDistance").mul(t));(e?s.add(e):s).mod(RT.add(Hk)).greaterThan(RT).discard()}}const qTe=n=>Ue(n).mul(.5).add(.5),XTe=new j6;class KTe extends lr{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.lights=!1,this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(XTe),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?Ae(this.opacityNode):UH;en.assign(Tt(qTe(sr),e))}}class YTe extends hr{static get type(){return"EquirectUVNode"}constructor(e=PH){super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,t=e.z.atan2(e.x).mul(1/(Math.PI*2)).add(.5),r=e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return Ke(t,r)}}const jH=Ce(YTe);class qH extends ISe{constructor(e=1,t={}){super(e,t),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,t){const r=t.minFilter,i=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s=new Ey(5,5,5),o=jH(PH),a=new lr;a.colorNode=qn(t,o,0),a.side=cl,a.blending=kf;const l=new ju(s,a),c=new k6;c.add(l),t.minFilter===ja&&(t.minFilter=Fi);const u=new F6(1,10,this),h=e.getMRT();return e.setMRT(null),u.update(e,c),e.setMRT(h),t.minFilter=r,t.currentGenerateMipmaps=i,l.geometry.dispose(),l.material.dispose(),this}}const eg=new WeakMap;class QTe extends hr{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=$g();const t=new e2;t.isRenderTargetTexture=!0,this._defaultTexture=t,this.updateBeforeType=Nt.RENDER}updateBefore(e){const{renderer:t,material:r}=e,i=this.envNode;if(i.isTextureNode||i.isMaterialReferenceNode){const s=i.isTextureNode?i.value:r[i.property];if(s&&s.isTexture){const o=s.mapping;if(o===Sy||o===by){if(eg.has(s)){const a=eg.get(s);tU(a,s.mapping),this._cubeTexture=a}else{const a=s.image;if(ZTe(a)){const l=new qH(a.height);l.fromEquirectangularTexture(t,s),tU(l.texture,s.mapping),this._cubeTexture=l.texture,eg.set(s,l.texture),s.addEventListener("dispose",XH)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function ZTe(n){return n==null?!1:n.height>0}function XH(n){const e=n.target;e.removeEventListener("dispose",XH);const t=eg.get(e);t!==void 0&&(eg.delete(e),t.dispose())}function tU(n,e){e===Sy?n.mapping=Gu:e===by&&(n.mapping=Uf)}const KH=Ce(QTe);class T2 extends hp{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=KH(this.envNode)}}class JTe extends hp{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const t=Ae(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(t)}}class i1{start(){}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class YH extends i1{constructor(){super()}indirect(e,t,r){const i=e.ambientOcclusion,s=e.reflectedLight,o=r.context.irradianceLightMap;s.indirectDiffuse.assign(Tt(0)),o?s.indirectDiffuse.addAssign(o):s.indirectDiffuse.addAssign(Tt(1,1,1,0)),s.indirectDiffuse.mulAssign(i),s.indirectDiffuse.mulAssign(en.rgb)}finish(e,t,r){const i=r.material,s=e.outgoingLight,o=r.context.environment;if(o)switch(i.combine){case Hb:s.rgb.assign(Tn(s.rgb,s.rgb.mul(o.rgb),y_.mul(NT)));break;case dxe:s.rgb.assign(Tn(s.rgb,o.rgb,y_.mul(NT)));break;case fxe:s.rgb.addAssign(o.rgb.mul(y_.mul(NT)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",i.combine);break}}}const eMe=new Wb;class tMe extends lr{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(eMe),this.setValues(e)}setupNormal(){return wo}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new T2(t):null}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new JTe(BH)),t}setupOutgoingLight(){return en.rgb}setupLightingModel(){return new YH}}const Hg=je(({f0:n,f90:e,dotVH:t})=>{const r=t.mul(-5.55473).sub(6.98316).mul(t).exp2();return n.mul(r.oneMinus()).add(e.mul(r))}),$f=je(n=>n.diffuseColor.mul(1/Math.PI)),nMe=()=>Ae(.25),rMe=je(({dotNH:n})=>FC.mul(Ae(.5)).add(1).mul(Ae(1/Math.PI)).mul(n.pow(FC))),iMe=je(({lightDirection:n})=>{const e=n.add(Fn).normalize(),t=sr.dot(e).clamp(),r=Fn.dot(e).clamp(),i=Hg({f0:es,f90:1,dotVH:r}),s=nMe(),o=rMe({dotNH:t});return i.mul(s).mul(o)});class QH extends YH{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:r}){const s=sr.dot(e).clamp().mul(t);r.directDiffuse.addAssign(s.mul($f({diffuseColor:en.rgb}))),this.specular===!0&&r.directSpecular.addAssign(s.mul(iMe({lightDirection:e})).mul(y_))}indirect({ambientOcclusion:e,irradiance:t,reflectedLight:r}){r.indirectDiffuse.addAssign(t.mul($f({diffuseColor:en}))),r.indirectDiffuse.mulAssign(e)}}const sMe=new q6;class oMe extends lr{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(sMe),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new T2(t):null}setupLightingModel(){return new QH(!1)}}const aMe=new H6;class lMe extends lr{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(aMe),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new T2(t):null}setupLightingModel(){return new QH}setupVariants(){const e=(this.shininessNode?Ae(this.shininessNode):Vwe).max(1e-4);FC.assign(e);const t=this.specularNode||Hwe;es.assign(t)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const cMe=je(()=>{const n=wo.dFdx().abs().max(wo.dFdy().abs());return n.x.max(n.y).max(n.z)}),ZH=je(n=>{const{roughness:e}=n,t=cMe();let r=e.max(.0525);return r=r.add(t),r=r.min(1),r}),uMe=je(({alpha:n,dotNL:e,dotNV:t})=>{const r=n.pow2(),i=e.mul(r.add(r.oneMinus().mul(t.pow2())).sqrt()),s=t.mul(r.add(r.oneMinus().mul(e.pow2())).sqrt());return Sc(.5,i.add(s).max(n1e))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),hMe=je(({alphaT:n,alphaB:e,dotTV:t,dotBV:r,dotTL:i,dotBL:s,dotNV:o,dotNL:a})=>{const l=a.mul(Me(n.mul(t),e.mul(r),o).length()),c=o.mul(Me(n.mul(i),e.mul(s),a).length());return Sc(.5,l.add(c)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),dMe=je(({alpha:n,dotNH:e})=>{const t=n.pow2(),r=e.pow2().mul(t.oneMinus()).oneMinus();return t.div(r.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),fMe=Ae(1/Math.PI),pMe=je(({alphaT:n,alphaB:e,dotNH:t,dotTH:r,dotBH:i})=>{const s=n.mul(e),o=Me(e.mul(r),n.mul(i),s.mul(t)),a=o.dot(o),l=s.div(a);return fMe.mul(s.mul(l.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),nU=je(n=>{const{lightDirection:e,f0:t,f90:r,roughness:i,f:s,USE_IRIDESCENCE:o,USE_ANISOTROPY:a}=n,l=n.normalView||sr,c=i.pow2(),u=e.add(Fn).normalize(),h=l.dot(e).clamp(),d=l.dot(Fn).clamp(),f=l.dot(u).clamp(),p=Fn.dot(u).clamp();let g=Hg({f0:t,f90:r,dotVH:p}),y,m;if(Vk(o)&&(g=f2.mix(g,s)),Vk(a)){const _=p_.dot(e),v=p_.dot(Fn),x=p_.dot(u),b=Xd.dot(e),T=Xd.dot(Fn),w=Xd.dot(u);y=hMe({alphaT:OC,alphaB:c,dotTV:v,dotBV:T,dotTL:_,dotBL:b,dotNV:d,dotNL:h}),m=pMe({alphaT:OC,alphaB:c,dotNH:f,dotTH:x,dotBH:w})}else y=uMe({alpha:c,dotNL:h,dotNV:d}),m=dMe({alpha:c,dotNH:f});return g.mul(y).mul(m)}),JH=je(({roughness:n,dotNV:e})=>{const t=Tt(-1,-.0275,-.572,.022),r=Tt(1,.0425,1.04,-.04),i=n.mul(t).add(r),s=i.x.mul(i.x).min(e.mul(-9.28).exp2()).mul(i.x).add(i.y);return Ke(-1.04,1.04).mul(s).add(i.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),e8=je(n=>{const{dotNV:e,specularColor:t,specularF90:r,roughness:i}=n,s=JH({dotNV:e,roughness:i});return t.mul(s.x).add(r.mul(s.y))}),mMe=je(({f:n,f90:e,dotVH:t})=>{const r=t.oneMinus().saturate(),i=r.mul(r),s=r.mul(i,i).clamp(0,.9999);return n.sub(Me(e).mul(s)).div(s.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),gMe=je(({roughness:n,dotNH:e})=>{const t=n.pow2(),r=Ae(1).div(t),s=e.pow2().oneMinus().max(.0078125);return Ae(2).add(r).mul(s.pow(r.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),yMe=je(({dotNV:n,dotNL:e})=>Ae(1).div(Ae(4).mul(e.add(n).sub(e.mul(n))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),vMe=je(({lightDirection:n})=>{const e=n.add(Fn).normalize(),t=sr.dot(n).clamp(),r=sr.dot(Fn).clamp(),i=sr.dot(e).clamp(),s=gMe({roughness:d2,dotNH:i}),o=yMe({dotNV:r,dotNL:t});return wd.mul(s).mul(o)}),_Me=je(({N:n,V:e,roughness:t})=>{const s=.0078125,o=n.dot(e).saturate(),a=Ke(t,o.oneMinus().sqrt());return a.assign(a.mul(.984375).add(s)),a}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),xMe=je(({f:n})=>{const e=n.length();return bo(e.mul(e).add(n.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),lv=je(({v1:n,v2:e})=>{const t=n.dot(e),r=t.abs().toVar(),i=r.mul(.0145206).add(.4965155).mul(r).add(.8543985).toVar(),s=r.add(4.1616724).mul(r).add(3.417594).toVar(),o=i.div(s),a=t.greaterThan(0).select(o,bo(t.mul(t).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(o));return n.cross(e).mul(a)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),rU=je(({N:n,V:e,P:t,mInv:r,p0:i,p1:s,p2:o,p3:a})=>{const l=s.sub(i).toVar(),c=a.sub(i).toVar(),u=l.cross(c),h=Me().toVar();return Zr(u.dot(t.sub(i)).greaterThanEqual(0),()=>{const d=e.sub(n.mul(e.dot(n))).normalize(),f=n.cross(d).negate(),p=r.mul(Ui(d,f,n).transpose()).toVar(),g=p.mul(i.sub(t)).normalize().toVar(),y=p.mul(s.sub(t)).normalize().toVar(),m=p.mul(o.sub(t)).normalize().toVar(),_=p.mul(a.sub(t)).normalize().toVar(),v=Me(0).toVar();v.addAssign(lv({v1:g,v2:y})),v.addAssign(lv({v1:y,v2:m})),v.addAssign(lv({v1:m,v2:_})),v.addAssign(lv({v1:_,v2:g})),h.assign(Me(xMe({f:v})))}),h}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),s1=1/6,t8=n=>cn(s1,cn(n,cn(n,n.negate().add(3)).sub(3)).add(1)),GC=n=>cn(s1,cn(n,cn(n,cn(3,n).sub(6))).add(4)),n8=n=>cn(s1,cn(n,cn(n,cn(-3,n).add(3)).add(3)).add(1)),HC=n=>cn(s1,Qb(n,3)),iU=n=>t8(n).add(GC(n)),sU=n=>n8(n).add(HC(n)),oU=n=>us(-1,GC(n).div(t8(n).add(GC(n)))),aU=n=>us(1,HC(n).div(n8(n).add(HC(n)))),lU=(n,e,t)=>{const r=n.uvNode,i=cn(r,e.zw).add(.5),s=Yb(i),o=up(i),a=iU(o.x),l=sU(o.x),c=oU(o.x),u=aU(o.x),h=oU(o.y),d=aU(o.y),f=Ke(s.x.add(c),s.y.add(h)).sub(.5).mul(e.xy),p=Ke(s.x.add(u),s.y.add(h)).sub(.5).mul(e.xy),g=Ke(s.x.add(c),s.y.add(d)).sub(.5).mul(e.xy),y=Ke(s.x.add(u),s.y.add(d)).sub(.5).mul(e.xy),m=iU(o.y).mul(us(a.mul(n.uv(f).level(t)),l.mul(n.uv(p).level(t)))),_=sU(o.y).mul(us(a.mul(n.uv(g).level(t)),l.mul(n.uv(y).level(t))));return m.add(_)},SMe=je(([n,e=Ae(3)])=>{const t=Ke(n.size(jn(e))),r=Ke(n.size(jn(e.add(1)))),i=Sc(1,t),s=Sc(1,r),o=lU(n,Tt(i,t),Yb(e)),a=lU(n,Tt(s,r),vH(e));return up(e).mix(o,a)}),cU=je(([n,e,t,r,i])=>{const s=Me(TH(e.negate(),Bg(n),Sc(1,r))),o=Me(Kd(i[0].xyz),Kd(i[1].xyz),Kd(i[2].xyz));return Bg(s).mul(t.mul(o))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),bMe=je(([n,e])=>n.mul(bc(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),wMe=FTe(),uU=je(([n,e,t])=>{const r=wMe.uv(n),i=Kb(Ae(VC.x)).mul(bMe(e,t));return SMe(r,i)}),hU=je(([n,e,t])=>(Zr(t.notEqual(0),()=>{const r=yH(e).negate().div(t);return gH(r.negate().mul(n))}),Me(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),TMe=je(([n,e,t,r,i,s,o,a,l,c,u,h,d,f,p])=>{let g,y;if(p){g=Tt().toVar(),y=Me().toVar();const b=u.sub(1).mul(p.mul(.025)),T=Me(u.sub(b),u,u.add(b));$a({start:0,end:3},({i:w})=>{const M=T.element(w),C=cU(n,e,h,M,a),S=o.add(C),E=c.mul(l.mul(Tt(S,1))),I=Ke(E.xy.div(E.w)).toVar();I.addAssign(1),I.divAssign(2),I.assign(Ke(I.x,I.y.oneMinus()));const F=uU(I,t,M);g.element(w).assign(F.element(w)),g.a.addAssign(F.a),y.element(w).assign(r.element(w).mul(hU(Kd(C),d,f).element(w)))}),g.a.divAssign(3)}else{const b=cU(n,e,h,u,a),T=o.add(b),w=c.mul(l.mul(Tt(T,1))),M=Ke(w.xy.div(w.w)).toVar();M.addAssign(1),M.divAssign(2),M.assign(Ke(M.x,M.y.oneMinus())),g=uU(M,t,u),y=r.mul(hU(Kd(b),d,f))}const m=y.rgb.mul(g.rgb),_=n.dot(e).clamp(),v=Me(e8({dotNV:_,specularColor:i,specularF90:s,roughness:t})),x=y.r.add(y.g,y.b).div(3);return Tt(v.oneMinus().mul(m),g.a.oneMinus().mul(x).oneMinus())}),MMe=Ui(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),EMe=n=>{const e=n.sqrt();return Me(1).add(e).div(Me(1).sub(e))},dU=(n,e)=>n.sub(e).div(n.add(e)).pow2(),AMe=(n,e)=>{const t=n.mul(2*Math.PI*1e-9),r=Me(54856e-17,44201e-17,52481e-17),i=Me(1681e3,1795300,2208400),s=Me(43278e5,93046e5,66121e5),o=Ae(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(t.mul(2239900).add(e.x).cos()).mul(t.pow2().mul(-45282e5).exp());let a=r.mul(s.mul(2*Math.PI).sqrt()).mul(i.mul(t).add(e).cos()).mul(t.pow2().negate().mul(s).exp());return a=Me(a.x.add(o),a.y,a.z).div(10685e-11),MMe.mul(a)},CMe=je(({outsideIOR:n,eta2:e,cosTheta1:t,thinFilmThickness:r,baseF0:i})=>{const s=Tn(n,e,qu(0,.03,r)),o=n.div(s).pow2().mul(Ae(1).sub(t.pow2())),l=Ae(1).sub(o).sqrt(),c=dU(s,n),u=Hg({f0:c,f90:1,dotVH:t}),h=u.oneMinus(),d=s.lessThan(n).select(Math.PI,0),f=Ae(Math.PI).sub(d),p=EMe(i.clamp(0,.9999)),g=dU(p,s.toVec3()),y=Hg({f0:g,f90:1,dotVH:l}),m=Me(p.x.lessThan(s).select(Math.PI,0),p.y.lessThan(s).select(Math.PI,0),p.z.lessThan(s).select(Math.PI,0)),_=s.mul(r,l,2),v=Me(f).add(m),x=u.mul(y).clamp(1e-5,.9999),b=x.sqrt(),T=h.pow2().mul(y).div(Me(1).sub(x));let M=u.add(T),C=T.sub(h);for(let S=1;S<=2;++S){C=C.mul(b);const E=AMe(Ae(S).mul(_),Ae(S).mul(v)).mul(2);M=M.add(C.mul(E))}return M.max(Me(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),RMe=je(({normal:n,viewDir:e,roughness:t})=>{const r=n.dot(e).saturate(),i=t.pow2(),s=Mi(t.lessThan(.25),Ae(-339.2).mul(i).add(Ae(161.4).mul(t)).sub(25.9),Ae(-8.48).mul(i).add(Ae(14.3).mul(t)).sub(9.95)),o=Mi(t.lessThan(.25),Ae(44).mul(i).sub(Ae(23.7).mul(t)).add(3.26),Ae(1.97).mul(i).sub(Ae(3.27).mul(t)).add(.72));return Mi(t.lessThan(.25),0,Ae(.1).mul(t).sub(.025)).add(s.mul(r).add(o).exp()).mul(1/Math.PI).saturate()}),DT=Me(.04),OT=Ae(1);class r8 extends i1{constructor(e=!1,t=!1,r=!1,i=!1,s=!1,o=!1){super(),this.clearcoat=e,this.sheen=t,this.iridescence=r,this.anisotropy=i,this.transmission=s,this.dispersion=o,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=Me().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=Me().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=Me().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=Me().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=Me().toVar("sheenSpecularIndirect")),this.iridescence===!0){const t=sr.dot(Fn).clamp();this.iridescenceFresnel=CMe({outsideIOR:Ae(1),eta2:lH,cosTheta1:t,thinFilmThickness:cH,baseF0:es}),this.iridescenceF0=mMe({f:this.iridescenceFresnel,f90:1,dotVH:t})}if(this.transmission===!0){const t=zC,r=mwe.sub(zC).normalize(),i=LH;e.backdrop=TMe(i,r,Ia,en,es,qx,t,Xu,dl,_2,m_,uH,dH,hH,this.dispersion?fH:null),e.backdropAlpha=kC,en.a.mulAssign(Tn(1,e.backdrop.a,kC))}}computeMultiscattering(e,t,r){const i=sr.dot(Fn).clamp(),s=JH({roughness:Ia,dotNV:i}),a=(this.iridescenceF0?f2.mix(es,this.iridescenceF0):es).mul(s.x).add(r.mul(s.y)),c=s.x.add(s.y).oneMinus(),u=es.add(es.oneMinus().mul(.047619)),h=a.mul(u).div(c.mul(u).oneMinus());e.addAssign(a),t.addAssign(h.mul(c))}direct({lightDirection:e,lightColor:t,reflectedLight:r}){const s=sr.dot(e).clamp().mul(t);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(s.mul(vMe({lightDirection:e}))),this.clearcoat===!0){const a=Mm.dot(e).clamp().mul(t);this.clearcoatSpecularDirect.addAssign(a.mul(nU({lightDirection:e,f0:DT,f90:OT,roughness:jx,normalView:Mm})))}r.directDiffuse.addAssign(s.mul($f({diffuseColor:en.rgb}))),r.directSpecular.addAssign(s.mul(nU({lightDirection:e,f0:es,f90:1,roughness:Ia,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:t,halfWidth:r,halfHeight:i,reflectedLight:s,ltc_1:o,ltc_2:a}){const l=t.add(r).sub(i),c=t.sub(r).sub(i),u=t.sub(r).add(i),h=t.add(r).add(i),d=sr,f=Fn,p=Yr.toVar(),g=_Me({N:d,V:f,roughness:Ia}),y=o.uv(g).toVar(),m=a.uv(g).toVar(),_=Ui(Me(y.x,0,y.y),Me(0,1,0),Me(y.z,0,y.w)).toVar(),v=es.mul(m.x).add(es.oneMinus().mul(m.y)).toVar();s.directSpecular.addAssign(e.mul(v).mul(rU({N:d,V:f,P:p,mInv:_,p0:l,p1:c,p2:u,p3:h}))),s.directDiffuse.addAssign(e.mul(en).mul(rU({N:d,V:f,P:p,mInv:Ui(1,0,0,0,1,0,0,0,1),p0:l,p1:c,p2:u,p3:h})))}indirect(e,t,r){this.indirectDiffuse(e,t,r),this.indirectSpecular(e,t,r),this.ambientOcclusion(e,t,r)}indirectDiffuse({irradiance:e,reflectedLight:t}){t.indirectDiffuse.addAssign(e.mul($f({diffuseColor:en})))}indirectSpecular({radiance:e,iblIrradiance:t,reflectedLight:r}){if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(t.mul(wd,RMe({normal:sr,viewDir:Fn,roughness:d2}))),this.clearcoat===!0){const c=Mm.dot(Fn).clamp(),u=e8({dotNV:c,specularColor:DT,specularF90:OT,roughness:jx});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(u))}const i=Me().toVar("singleScattering"),s=Me().toVar("multiScattering"),o=t.mul(1/Math.PI);this.computeMultiscattering(i,s,qx);const a=i.add(s),l=en.mul(a.r.max(a.g).max(a.b).oneMinus());r.indirectSpecular.addAssign(e.mul(i)),r.indirectSpecular.addAssign(s.mul(o)),r.indirectDiffuse.addAssign(l.mul(o))}ambientOcclusion({ambientOcclusion:e,reflectedLight:t}){const i=sr.dot(Fn).clamp().add(e),s=Ia.mul(-16).oneMinus().negate().exp2(),o=e.sub(i.pow(s).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(e),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(e),t.indirectDiffuse.mulAssign(e),t.indirectSpecular.mulAssign(o)}finish(e){const{outgoingLight:t}=e;if(this.clearcoat===!0){const r=Mm.dot(Fn).clamp(),i=Hg({dotVH:r,f0:DT,f90:OT}),s=t.mul(DC.mul(i).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(DC));t.assign(s)}if(this.sheen===!0){const r=wd.r.max(wd.g).max(wd.b).mul(.157).oneMinus(),i=t.mul(r).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);t.assign(i)}}}const fU=Ae(1),WC=Ae(-2),cv=Ae(.8),FT=Ae(-1),uv=Ae(.4),kT=Ae(2),hv=Ae(.305),UT=Ae(3),pU=Ae(.21),NMe=Ae(4),mU=Ae(4),PMe=Ae(16),IMe=je(([n])=>{const e=Me(zo(n)).toVar(),t=Ae(-1).toVar();return Zr(e.x.greaterThan(e.z),()=>{Zr(e.x.greaterThan(e.y),()=>{t.assign(Mi(n.x.greaterThan(0),0,3))}).Else(()=>{t.assign(Mi(n.y.greaterThan(0),1,4))})}).Else(()=>{Zr(e.z.greaterThan(e.y),()=>{t.assign(Mi(n.z.greaterThan(0),2,5))}).Else(()=>{t.assign(Mi(n.y.greaterThan(0),1,4))})}),t}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),LMe=je(([n,e])=>{const t=Ke().toVar();return Zr(e.equal(0),()=>{t.assign(Ke(n.z,n.y).div(zo(n.x)))}).ElseIf(e.equal(1),()=>{t.assign(Ke(n.x.negate(),n.z.negate()).div(zo(n.y)))}).ElseIf(e.equal(2),()=>{t.assign(Ke(n.x.negate(),n.y).div(zo(n.z)))}).ElseIf(e.equal(3),()=>{t.assign(Ke(n.z.negate(),n.y).div(zo(n.x)))}).ElseIf(e.equal(4),()=>{t.assign(Ke(n.x.negate(),n.z).div(zo(n.y)))}).Else(()=>{t.assign(Ke(n.x,n.y).div(zo(n.z)))}),cn(.5,t.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),DMe=je(([n])=>{const e=Ae(0).toVar();return Zr(n.greaterThanEqual(cv),()=>{e.assign(fU.sub(n).mul(FT.sub(WC)).div(fU.sub(cv)).add(WC))}).ElseIf(n.greaterThanEqual(uv),()=>{e.assign(cv.sub(n).mul(kT.sub(FT)).div(cv.sub(uv)).add(FT))}).ElseIf(n.greaterThanEqual(hv),()=>{e.assign(uv.sub(n).mul(UT.sub(kT)).div(uv.sub(hv)).add(kT))}).ElseIf(n.greaterThanEqual(pU),()=>{e.assign(hv.sub(n).mul(NMe.sub(UT)).div(hv.sub(pU)).add(UT))}).Else(()=>{e.assign(Ae(-2).mul(Kb(cn(1.16,n))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),OMe=je(([n,e])=>{const t=n.toVar();t.assign(cn(2,t).sub(1));const r=Me(t,1).toVar();return Zr(e.equal(0),()=>{r.assign(r.zyx)}).ElseIf(e.equal(1),()=>{r.assign(r.xzy),r.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{r.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{r.assign(r.zyx),r.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{r.assign(r.xzy),r.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{r.z.mulAssign(-1)}),r}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),FMe=je(([n,e,t,r,i,s])=>{const o=Ae(t),a=Me(e),l=bc(DMe(o),WC,s),c=up(l),u=Yb(l),h=Me(jC(n,a,u,r,i,s)).toVar();return Zr(c.notEqual(0),()=>{const d=Me(jC(n,a,u.add(1),r,i,s)).toVar();h.assign(Tn(h,d,c))}),h}),jC=je(([n,e,t,r,i,s])=>{const o=Ae(t).toVar(),a=Me(e),l=Ae(IMe(a)).toVar(),c=Ae(bo(mU.sub(o),0)).toVar();o.assign(bo(o,mU));const u=Ae(UC(o)).toVar(),h=Ke(LMe(a,l).mul(u.sub(2)).add(1)).toVar();return Zr(l.greaterThan(2),()=>{h.y.addAssign(u),l.subAssign(3)}),h.x.addAssign(l.mul(u)),h.x.addAssign(c.mul(cn(3,PMe))),h.y.addAssign(cn(4,UC(s).sub(u))),h.x.mulAssign(r),h.y.mulAssign(i),n.uv(h).grad(Ke(),Ke())}),BT=je(({envMap:n,mipInt:e,outputDirection:t,theta:r,axis:i,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:o,CUBEUV_MAX_MIP:a})=>{const l=zl(r),c=t.mul(l).add(i.cross(t).mul(Aa(r))).add(i.mul(i.dot(t).mul(l.oneMinus())));return jC(n,c,e,s,o,a)}),kMe=je(({n,latitudinal:e,poleAxis:t,outputDirection:r,weights:i,samples:s,dTheta:o,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h})=>{const d=Me(Mi(e,t,bH(t,r))).toVar();Zr(mH(d.equals(Me(0))),()=>{d.assign(Me(r.z,0,r.x.negate()))}),d.assign(Bg(d));const f=Me().toVar();return f.addAssign(i.element(jn(0)).mul(BT({theta:0,axis:d,outputDirection:r,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h}))),$a({start:jn(1),end:n},({i:p})=>{Zr(p.greaterThanEqual(s),()=>{MTe()});const g=Ae(o.mul(Ae(p))).toVar();f.addAssign(i.element(p).mul(BT({theta:g.mul(-1),axis:d,outputDirection:r,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h}))),f.addAssign(i.element(p).mul(BT({theta:g,axis:d,outputDirection:r,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:c,CUBEUV_TEXEL_HEIGHT:u,CUBEUV_MAX_MIP:h})))}),Tt(f,1)});let Kx=null;const gU=new WeakMap;function UMe(n){const e=Math.log2(n)-2,t=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:t,maxMip:e}}function BMe(n){let e=gU.get(n);if((e!==void 0?e.pmremVersion:-1)!==n.pmremVersion){const r=n.image;if(n.isCubeTexture)if($Me(r))e=Kx.fromCubemap(n,e);else return null;else if(VMe(r))e=Kx.fromEquirectangular(n,e);else return null;e.pmremVersion=n.pmremVersion,gU.set(n,e)}return e.texture}class zMe extends hr{static get type(){return"PMREMNode"}constructor(e,t=null,r=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=t,this.levelNode=r,this._generator=null;const i=new pi;i.isRenderTargetTexture=!0,this._texture=qn(i),this._width=Mt(0),this._height=Mt(0),this._maxMip=Mt(0),this.updateBeforeType=Nt.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const t=UMe(e.image.height);this._texture.value=e,this._width.value=t.texelWidth,this._height.value=t.texelHeight,this._maxMip.value=t.maxMip}updateBefore(){let e=this._pmrem;const t=e?e.pmremVersion:-1,r=this._value;t!==r.pmremVersion&&(r.isPMREMTexture===!0?e=r:e=BMe(r),e!==null&&(this._pmrem=e,this.updateFromTexture(e)))}setup(e){Kx===null&&(Kx=e.createPMREMGenerator()),this.updateBefore(e);let t=this.uvNode;t===null&&e.context.getUV&&(t=e.context.getUV(this));const r=this.value;e.renderer.coordinateSystem===fo&&r.isPMREMTexture!==!0&&r.isRenderTargetTexture===!0&&(t=Me(t.x.negate(),t.yz));let i=this.levelNode;return i===null&&e.context.getTextureLevel&&(i=e.context.getTextureLevel(this)),FMe(this._texture,t,i,this._width,this._height,this._maxMip)}}function $Me(n){if(n==null)return!1;let e=0;const t=6;for(let r=0;r<t;r++)n[r]!==void 0&&e++;return e===t}function VMe(n){return n==null?!1:n.height>0}const i8=Ce(zMe),yU=new WeakMap;class GMe extends hp{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:t}=e;let r=this.envNode;if(r.isTextureNode||r.isMaterialReferenceNode){const f=r.isTextureNode?r.value:t[r.property];let p=yU.get(f);p===void 0&&(p=i8(f),yU.set(f,p)),r=p}const s=t.envMap?kn("envMapIntensity","float",e.material):kn("environmentIntensity","float",e.scene),a=t.useAnisotropy===!0||t.anisotropy>0?Lwe:sr,l=r.context(vU(Ia,a)).mul(s),c=r.context(HMe(LH)).mul(Math.PI).mul(s),u=g_(l),h=g_(c);e.context.radiance.addAssign(u),e.context.iblIrradiance.addAssign(h);const d=e.context.lightingModel.clearcoatRadiance;if(d){const f=r.context(vU(jx,Mm)).mul(s),p=g_(f);d.addAssign(p)}}}const vU=(n,e)=>{let t=null;return{getUV:()=>(t===null&&(t=Fn.negate().reflect(e),t=n.mul(n).mix(t,e).normalize(),t=t.transformDirection(dl)),t),getTextureLevel:()=>n}},HMe=n=>({getUV:()=>n,getTextureLevel:()=>Ae(1)}),WMe=new i2;class s8 extends lr{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(WMe),this.setValues(e)}setupEnvironment(e){let t=super.setupEnvironment(e);return t===null&&e.environmentNode&&(t=e.environmentNode),t?new GMe(t):null}setupLightingModel(){return new r8}setupSpecular(){const e=Tn(Me(.04),en.rgb,Wx);es.assign(e),qx.assign(1)}setupVariants(){const e=this.metalnessNode?Ae(this.metalnessNode):qwe;Wx.assign(e);let t=this.roughnessNode?Ae(this.roughnessNode):jwe;t=ZH({roughness:t}),Ia.assign(t),this.setupSpecular(),en.assign(Tt(en.rgb.mul(e.oneMinus()),en.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const jMe=new G6;class qMe extends s8{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(jMe),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?Ae(this.iorNode):aTe;m_.assign(e),es.assign(Tn(Xx(wH(m_.sub(1).div(m_.add(1))).mul(Wwe),Me(1)).mul(Zk),en.rgb,Wx)),qx.assign(Tn(Zk,1,Wx))}setupLightingModel(){return new r8(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const t=this.clearcoatNode?Ae(this.clearcoatNode):Kwe,r=this.clearcoatRoughnessNode?Ae(this.clearcoatRoughnessNode):Ywe;DC.assign(t),jx.assign(ZH({roughness:r}))}if(this.useSheen){const t=this.sheenNode?Me(this.sheenNode):Jwe,r=this.sheenRoughnessNode?Ae(this.sheenRoughnessNode):eTe;wd.assign(t),d2.assign(r)}if(this.useIridescence){const t=this.iridescenceNode?Ae(this.iridescenceNode):nTe,r=this.iridescenceIORNode?Ae(this.iridescenceIORNode):rTe,i=this.iridescenceThicknessNode?Ae(this.iridescenceThicknessNode):iTe;f2.assign(t),lH.assign(r),cH.assign(i)}if(this.useAnisotropy){const t=(this.anisotropyNode?Ke(this.anisotropyNode):tTe).toVar();tu.assign(t.length()),Zr(tu.equal(0),()=>{t.assign(Ke(1,0))}).Else(()=>{t.divAssign(Ke(tu)),tu.assign(tu.saturate())}),OC.assign(tu.pow2().mix(Ia.pow2(),1)),p_.assign(Em[0].mul(t.x).add(Em[1].mul(t.y))),Xd.assign(Em[1].mul(t.x).sub(Em[0].mul(t.y)))}if(this.useTransmission){const t=this.transmissionNode?Ae(this.transmissionNode):sTe,r=this.thicknessNode?Ae(this.thicknessNode):oTe,i=this.attenuationDistanceNode?Ae(this.attenuationDistanceNode):lTe,s=this.attenuationColorNode?Me(this.attenuationColorNode):cTe;if(kC.assign(t),uH.assign(r),hH.assign(i),dH.assign(s),this.useDispersion){const o=this.dispersionNode?Ae(this.dispersionNode):fTe;fH.assign(o)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?Me(this.clearcoatNormalNode):Qwe}setup(e){e.context.setupClearcoatNormal=()=>this.setupClearcoatNormal(e),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const XMe=je(({normal:n,lightDirection:e,builder:t})=>{const r=n.dot(e),i=Ke(r.mul(.5).add(.5),0);if(t.material.gradientMap){const s=Wl("gradientMap","texture").context({getUV:()=>i});return Me(s.r)}else{const s=i.fwidth().mul(.5);return Tn(Me(.7),Me(1),qu(Ae(.7).sub(s.x),Ae(.7).add(s.x),i.x))}});class KMe extends i1{direct({lightDirection:e,lightColor:t,reflectedLight:r},i,s){const o=XMe({normal:IH,lightDirection:e,builder:s}).mul(t);r.directDiffuse.addAssign(o.mul($f({diffuseColor:en.rgb})))}indirect({ambientOcclusion:e,irradiance:t,reflectedLight:r}){r.indirectDiffuse.addAssign(t.mul($f({diffuseColor:en}))),r.indirectDiffuse.mulAssign(e)}}const YMe=new W6;class QMe extends lr{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(YMe),this.setValues(e)}setupLightingModel(){return new KMe}}class ZMe extends hr{static get type(){return"MatcapUVNode"}constructor(){super("vec2")}setup(){const e=Me(Fn.z,0,Fn.x.negate()).normalize(),t=Fn.cross(e);return Ke(e.dot(sr),t.dot(sr)).mul(.495).add(.5)}}const JMe=ze(ZMe),eEe=new X6;class tEe extends lr{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.lights=!1,this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(eEe),this.setValues(e)}setupVariants(e){const t=JMe;let r;e.material.matcap?r=Wl("matcap","texture").context({getUV:()=>t}):r=Me(Tn(.2,.8,t.y)),en.rgb.mulAssign(r.rgb)}}const nEe=new $6;class rEe extends lr{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.isPointsNodeMaterial=!0,this.lights=!1,this.transparent=!0,this.sizeNode=null,this.setDefaultValues(nEe),this.setValues(e)}copy(e){return this.sizeNode=e.sizeNode,super.copy(e)}}class iEe extends hr{static get type(){return"RotateNode"}constructor(e,t){super(),this.positionNode=e,this.rotationNode=t}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:t,positionNode:r}=this;if(this.getNodeType(e)==="vec2"){const s=t.cos(),o=t.sin();return h2(s,o,o.negate(),s).mul(r)}else{const s=t,o=qd(Tt(1,0,0,0),Tt(0,zl(s.x),Aa(s.x).negate(),0),Tt(0,Aa(s.x),zl(s.x),0),Tt(0,0,0,1)),a=qd(Tt(zl(s.y),0,Aa(s.y),0),Tt(0,1,0,0),Tt(Aa(s.y).negate(),0,zl(s.y),0),Tt(0,0,0,1)),l=qd(Tt(zl(s.z),Aa(s.z).negate(),0,0),Tt(Aa(s.z),zl(s.z),0,0),Tt(0,0,1,0),Tt(0,0,0,1));return o.mul(a).mul(l).mul(Tt(r,1)).xyz}}}const sEe=Ce(iEe),oEe=new B6;class aEe extends lr{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this.lights=!1,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.setDefaultValues(oEe),this.setValues(e)}setupPosition({object:e,camera:t,context:r}){const i=this.sizeAttenuation,{positionNode:s,rotationNode:o,scaleNode:a}=this,l=Jr;let c=e1.mul(Me(s||0)),u=Ke(Xu[0].xyz.length(),Xu[1].xyz.length());a!==null&&(u=u.mul(a)),!i&&t.isPerspectiveCamera&&(u=u.mul(c.z.negate()));let h=l.xy;if(e.center&&e.center.isVector2===!0){const g=W1e("center","vec2");h=h.sub(g.sub(.5))}h=h.mul(u);const d=Ae(o||Zwe),f=sEe(h,d);c=Tt(c.xy.add(f),c.zw);const p=_2.mul(c);return r.vertex=l,p}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}class lEe extends i1{constructor(){super(),this.shadowNode=Ae(1).toVar("shadowMask")}direct({shadowMask:e}){this.shadowNode.mulAssign(e)}finish(e){en.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(en.rgb)}}const cEe=new V6;class uEe extends lr{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.setDefaultValues(cEe),this.setValues(e)}setupLightingModel(){return new lEe}}je(({texture:n,uv:e})=>{const r=Me().toVar();return Zr(e.x.lessThan(1e-4),()=>{r.assign(Me(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{r.assign(Me(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{r.assign(Me(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{r.assign(Me(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{r.assign(Me(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{r.assign(Me(0,0,-1))}).Else(()=>{const s=n.uv(e.add(Me(-.01,0,0))).r.sub(n.uv(e.add(Me(.01,0,0))).r),o=n.uv(e.add(Me(0,-.01,0))).r.sub(n.uv(e.add(Me(0,.01,0))).r),a=n.uv(e.add(Me(0,0,-.01))).r.sub(n.uv(e.add(Me(0,0,.01))).r);r.assign(Me(s,o,a))}),r.normalize()});class hEe{constructor(e,t){this.nodes=e,this.info=t,this.animationLoop=null,this.requestId=null,this._init()}_init(){const e=(t,r)=>{this.requestId=self.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this.animationLoop!==null&&this.animationLoop(t,r)};e()}dispose(){self.cancelAnimationFrame(this.requestId),this.requestId=null}setAnimationLoop(e){this.animationLoop=e}}class sl{constructor(){this.weakMap=new WeakMap}get(e){let t=this.weakMap;for(let r=0;r<e.length;r++)if(t=t.get(e[r]),t===void 0)return;return t.get(e[e.length-1])}set(e,t){let r=this.weakMap;for(let i=0;i<e.length;i++){const s=e[i];r.has(s)===!1&&r.set(s,new WeakMap),r=r.get(s)}return r.set(e[e.length-1],t)}delete(e){let t=this.weakMap;for(let r=0;r<e.length;r++)if(t=t.get(e[r]),t===void 0)return!1;return t.delete(e[e.length-1])}}const zT=new Bl;class qC{constructor(){this.version=0,this.globalClippingCount=0,this.localClippingCount=0,this.localClippingEnabled=!1,this.localClipIntersection=!1,this.planes=[],this.parentVersion=0,this.viewNormalMatrix=new ps,this.cacheKey=0}projectPlanes(e,t){const r=e.length,i=this.planes;for(let s=0;s<r;s++){zT.copy(e[s]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const o=i[t+s],a=zT.normal;o.x=-a.x,o.y=-a.y,o.z=-a.z,o.w=zT.constant}}updateGlobal(e,t){const r=e.clippingPlanes;this.viewMatrix=t.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix);let i=!1;if(Array.isArray(r)&&r.length!==0){const s=r.length;if(s!==this.globalClippingCount){const o=[];for(let a=0;a<s;a++)o.push(new tn);this.globalClippingCount=s,this.planes=o,i=!0}this.projectPlanes(r,0)}else this.globalClippingCount!==0&&(this.globalClippingCount=0,this.planes=[],i=!0);e.localClippingEnabled!==this.localClippingEnabled&&(this.localClippingEnabled=e.localClippingEnabled,i=!0),i&&(this.version++,this.cacheKey=zx(this.globalClippingCount,this.localClippingEnabled===!0?1:0))}update(e,t){let r=!1;if(this!==e&&e.version!==this.parentVersion&&(this.globalClippingCount=t.isShadowNodeMaterial?0:e.globalClippingCount,this.localClippingEnabled=e.localClippingEnabled,this.planes=Array.from(e.planes),this.parentVersion=e.version,this.viewMatrix=e.viewMatrix,this.viewNormalMatrix=e.viewNormalMatrix,r=!0),this.localClippingEnabled){const i=t.clippingPlanes;if(Array.isArray(i)&&i.length!==0){const s=i.length,o=this.planes,a=this.globalClippingCount;if(r||s!==this.localClippingCount){o.length=a+s;for(let l=0;l<s;l++)o[a+l]=new tn;this.localClippingCount=s,r=!0}this.projectPlanes(i,a)}else this.localClippingCount!==0&&(this.localClippingCount=0,r=!0);this.localClipIntersection!==t.clipIntersection&&(this.localClipIntersection=t.clipIntersection,r=!0)}r&&(this.version+=e.version,this.cacheKey=zx(e.cacheKey,this.localClippingCount,this.localClipIntersection===!0?1:0))}}let dEe=0;function fEe(n){const e=Object.keys(n);let t=Object.getPrototypeOf(n);for(;t;){const r=Object.getOwnPropertyDescriptors(t);for(const i in r)if(r[i]!==void 0){const s=r[i];s&&typeof s.get=="function"&&e.push(i)}t=Object.getPrototypeOf(t)}return e}class pEe{constructor(e,t,r,i,s,o,a,l,c){this._nodes=e,this._geometries=t,this.id=dEe++,this.renderer=r,this.object=i,this.material=s,this.scene=o,this.camera=a,this.lightsNode=l,this.context=c,this.geometry=i.geometry,this.version=s.version,this.drawRange=null,this.attributes=null,this.pipeline=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.updateClipping(c.clippingContext),this.clippingContextVersion=this.clippingContext.version,this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.material.addEventListener("dispose",this.onMaterialDispose)}updateClipping(e){const t=this.material;let r=this.clippingContext;Array.isArray(t.clippingPlanes)?((r===e||!r)&&(r=new qC,this.clippingContext=r),r.update(e,t)):this.clippingContext!==e&&(this.clippingContext=e)}get clippingNeedsUpdate(){return this.clippingContext.version===this.clippingContextVersion?!1:(this.clippingContextVersion=this.clippingContext.version,!0)}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().monitor)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getIndex(){return this._geometries.getIndex(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,t=this.geometry,r=[],i=new Set;for(const s of e){const o=s.node&&s.node.attribute?s.node.attribute:t.getAttribute(s.name);if(o===void 0)continue;r.push(o);const a=o.isInterleavedBufferAttribute?o.data:o;i.add(a)}return this.attributes=r,this.vertexBuffers=Array.from(i.values()),r}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:t,geometry:r,group:i,drawRange:s}=this,o=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),a=this.getIndex(),l=a!==null,c=r.isInstancedBufferGeometry?r.instanceCount:e.count>1?e.count:1;if(c===0)return null;if(o.instanceCount=c,e.isBatchedMesh===!0)return o;let u=1;t.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(u=2);let h=s.start*u,d=(s.start+s.count)*u;i!==null&&(h=Math.max(h,i.start*u),d=Math.min(d,(i.start+i.count)*u));const f=l===!0?a.count:r.attributes.position.count;h=Math.max(h,0),d=Math.min(d,f);const p=d-h;return p<0||p===1/0?null:(o.vertexCount=p,o.firstVertex=h,o)}getGeometryCacheKey(){const{geometry:e}=this;let t="";for(const r of Object.keys(e.attributes).sort()){const i=e.attributes[r];t+=r+",",i.data&&(t+=i.data.stride+","),i.offset&&(t+=i.offset+","),i.itemSize&&(t+=i.itemSize+","),i.normalized&&(t+="n,")}return e.index&&(t+="index,"),t}getMaterialCacheKey(){const{object:e,material:t}=this;let r=t.customProgramCacheKey();for(const i of fEe(t)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(i))continue;const s=t[i];let o;if(s!==null){const a=typeof s;a==="number"?o=s!==0?"1":"0":a==="object"?(o="{",s.isTexture&&(o+=s.mapping),o+="}"):o=String(s)}else o=String(s);r+=o+","}return r+=this.clippingContext.cacheKey+",",e.geometry&&(r+=this.getGeometryCacheKey()),e.skeleton&&(r+=e.skeleton.bones.length+","),e.morphTargetInfluences&&(r+=e.morphTargetInfluences.length+","),e.isBatchedMesh&&(r+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(r+=e._colorsTexture.uuid+",")),e.count>1&&(r+=e.uuid+","),QSe(r)}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=this._nodes.getCacheKey(this.scene,this.lightsNode);return this.object.receiveShadow&&(e+=1),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.onDispose()}}const qh=[];class mEe{constructor(e,t,r,i,s,o){this.renderer=e,this.nodes=t,this.geometries=r,this.pipelines=i,this.bindings=s,this.info=o,this.chainMaps={}}get(e,t,r,i,s,o,a){const l=this.getChainMap(a);qh[0]=e,qh[1]=t,qh[2]=o,qh[3]=s;let c=l.get(qh);return c===void 0?(c=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,r,i,s,o,a),l.set(qh,c)):(c.updateClipping(o.clippingContext),(c.version!==t.version||c.needsUpdate)&&(c.initialCacheKey!==c.getCacheKey()?(c.dispose(),c=this.get(e,t,r,i,s,o,a)):c.version=t.version)),c}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new sl)}dispose(){this.chainMaps={}}createRenderObject(e,t,r,i,s,o,a,l,c,u){const h=this.getChainMap(u),d=new pEe(e,t,r,i,s,o,a,l,c);return d.onDispose=()=>{this.pipelines.delete(d),this.bindings.delete(d),this.nodes.delete(d),h.delete(d.getChainArray())},d}}class Lc{constructor(){this.data=new WeakMap}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){let t;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const Nu={VERTEX:1,INDEX:2,STORAGE:4},jl=16,gEe=211,yEe=212;class vEe extends Lc{constructor(e){super(),this.backend=e}delete(e){const t=super.delete(e);return t!==void 0&&this.backend.destroyAttribute(e),t}update(e,t){const r=this.get(e);if(r.version===void 0)t===Nu.VERTEX?this.backend.createAttribute(e):t===Nu.INDEX?this.backend.createIndexAttribute(e):t===Nu.STORAGE&&this.backend.createStorageAttribute(e),r.version=this._getBufferAttribute(e).version;else{const i=this._getBufferAttribute(e);(r.version<i.version||i.usage===Sd)&&(this.backend.updateAttribute(e),r.version=i.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function _Ee(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function o8(n){return n.index!==null?n.index.version:n.attributes.position.version}function _U(n){const e=[],t=n.index,r=n.attributes.position;if(t!==null){const s=t.array;for(let o=0,a=s.length;o<a;o+=3){const l=s[o+0],c=s[o+1],u=s[o+2];e.push(l,c,c,u,u,l)}}else{const s=r.array;for(let o=0,a=s.length/3-1;o<a;o+=3){const l=o+0,c=o+1,u=o+2;e.push(l,c,c,u,u,l)}}const i=new(_Ee(e)?I6:P6)(e,1);return i.version=o8(n),i}class xEe extends Lc{constructor(e,t){super(),this.attributes=e,this.info=t,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const t=e.geometry;return super.has(t)&&this.get(t).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const t=e.geometry,r=this.get(t);r.initialized=!0,this.info.memory.geometries++;const i=()=>{this.info.memory.geometries--;const s=t.index,o=e.getAttributes();s!==null&&this.attributes.delete(s);for(const l of o)this.attributes.delete(l);const a=this.wireframes.get(t);a!==void 0&&this.attributes.delete(a),t.removeEventListener("dispose",i)};t.addEventListener("dispose",i)}updateAttributes(e){const t=e.getAttributes();for(const i of t)i.isStorageBufferAttribute||i.isStorageInstancedBufferAttribute?this.updateAttribute(i,Nu.STORAGE):this.updateAttribute(i,Nu.VERTEX);const r=this.getIndex(e);r!==null&&this.updateAttribute(r,Nu.INDEX)}updateAttribute(e,t){const r=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,t),this.attributeCall.set(e,r)):this.attributeCall.get(e.data)!==r&&(this.attributes.update(e,t),this.attributeCall.set(e.data,r),this.attributeCall.set(e,r)):this.attributeCall.get(e)!==r&&(this.attributes.update(e,t),this.attributeCall.set(e,r))}getIndex(e){const{geometry:t,material:r}=e;let i=t.index;if(r.wireframe===!0){const s=this.wireframes;let o=s.get(t);o===void 0?(o=_U(t),s.set(t,o)):o.version!==o8(t)&&(this.attributes.delete(o),o=_U(t),s.set(t,o)),i=o}return i}}class SEe{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.compute={calls:0,frameCalls:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.memory={geometries:0,textures:0}}update(e,t,r){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=r*(t/3):e.isPoints?this.render.points+=r*t:e.isLineSegments?this.render.lines+=r*(t/2):e.isLine?this.render.lines+=r*(t-1):console.error("THREE.WebGPUInfo: Unknown object type.")}updateTimestamp(e,t){this[e].timestampCalls===0&&(this[e].timestamp=0),this[e].timestamp+=t,this[e].timestampCalls++,this[e].timestampCalls>=this[e].previousFrameCalls&&(this[e].timestampCalls=0)}reset(){const e=this.render.frameCalls;this.render.previousFrameCalls=e;const t=this.compute.frameCalls;this.compute.previousFrameCalls=t,this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class a8{constructor(e){this.cacheKey=e,this.usedTimes=0}}class bEe extends a8{constructor(e,t,r){super(e),this.vertexProgram=t,this.fragmentProgram=r}}class wEe extends a8{constructor(e,t){super(e),this.computeProgram=t,this.isComputePipeline=!0}}let TEe=0;class $T{constructor(e,t,r=null,i=null){this.id=TEe++,this.code=e,this.stage=t,this.transforms=r,this.attributes=i,this.usedTimes=0}}class MEe extends Lc{constructor(e,t){super(),this.backend=e,this.nodes=t,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,t){const{backend:r}=this,i=this.get(e);if(this._needsComputeUpdate(e)){const s=i.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const o=this.nodes.getForCompute(e);let a=this.programs.compute.get(o.computeShader);a===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),a=new $T(o.computeShader,"compute",o.transforms,o.nodeAttributes),this.programs.compute.set(o.computeShader,a),r.createProgram(a));const l=this._getComputeCacheKey(e,a);let c=this.caches.get(l);c===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(s),c=this._getComputePipeline(e,a,l,t)),c.usedTimes++,a.usedTimes++,i.version=e.version,i.pipeline=c}return i.pipeline}getForRender(e,t=null){const{backend:r}=this,i=this.get(e);if(this._needsRenderUpdate(e)){const s=i.pipeline;s&&(s.usedTimes--,s.vertexProgram.usedTimes--,s.fragmentProgram.usedTimes--);const o=e.getNodeBuilderState();let a=this.programs.vertex.get(o.vertexShader);a===void 0&&(s&&s.vertexProgram.usedTimes===0&&this._releaseProgram(s.vertexProgram),a=new $T(o.vertexShader,"vertex"),this.programs.vertex.set(o.vertexShader,a),r.createProgram(a));let l=this.programs.fragment.get(o.fragmentShader);l===void 0&&(s&&s.fragmentProgram.usedTimes===0&&this._releaseProgram(s.fragmentProgram),l=new $T(o.fragmentShader,"fragment"),this.programs.fragment.set(o.fragmentShader,l),r.createProgram(l));const c=this._getRenderCacheKey(e,a,l);let u=this.caches.get(c);u===void 0?(s&&s.usedTimes===0&&this._releasePipeline(s),u=this._getRenderPipeline(e,a,l,c,t)):e.pipeline=u,u.usedTimes++,a.usedTimes++,l.usedTimes++,i.pipeline=u}return i.pipeline}delete(e){const t=this.get(e).pipeline;return t&&(t.usedTimes--,t.usedTimes===0&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,t.computeProgram.usedTimes===0&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,t.vertexProgram.usedTimes===0&&this._releaseProgram(t.vertexProgram),t.fragmentProgram.usedTimes===0&&this._releaseProgram(t.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,t,r,i){r=r||this._getComputeCacheKey(e,t);let s=this.caches.get(r);return s===void 0&&(s=new wEe(r,t),this.caches.set(r,s),this.backend.createComputePipeline(s,i)),s}_getRenderPipeline(e,t,r,i,s){i=i||this._getRenderCacheKey(e,t,r);let o=this.caches.get(i);return o===void 0&&(o=new bEe(i,t,r),this.caches.set(i,o),e.pipeline=o,this.backend.createRenderPipeline(e,s)),o}_getComputeCacheKey(e,t){return e.id+","+t.id}_getRenderCacheKey(e,t,r){return t.id+","+r.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const t=e.code,r=e.stage;this.programs[r].delete(t)}_needsComputeUpdate(e){const t=this.get(e);return t.pipeline===void 0||t.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class EEe extends Lc{constructor(e,t,r,i,s,o){super(),this.backend=e,this.textures=r,this.pipelines=s,this.attributes=i,this.nodes=t,this.info=o,this.pipelines.bindings=this}getForRender(e){const t=e.getBindings();for(const r of t){const i=this.get(r);i.bindGroup===void 0&&(this._init(r),this.backend.createBindings(r,t),i.bindGroup=r)}return t}getForCompute(e){const t=this.nodes.getForCompute(e).bindings;for(const r of t){const i=this.get(r);i.bindGroup===void 0&&(this._init(r),this.backend.createBindings(r,t),i.bindGroup=r)}return t}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const t of e)this._update(t,e)}_init(e){for(const t of e.bindings)if(t.isSampledTexture)this.textures.updateTexture(t.texture);else if(t.isStorageBuffer){const r=t.attribute;this.attributes.update(r,Nu.STORAGE)}}_update(e,t){const{backend:r}=this;let i=!1;for(const s of e.bindings)if(!(s.isNodeUniformsGroup&&!this.nodes.updateGroup(s))){if(s.isUniformBuffer)s.update()&&r.updateBinding(s);else if(s.isSampler)s.update();else if(s.isSampledTexture){s.needsBindingsUpdate(this.textures.get(s.texture).generation)&&(i=!0);const o=s.update(),a=s.texture;o&&this.textures.updateTexture(a);const l=r.get(a);if(r.isWebGPUBackend===!0&&l.texture===void 0&&l.externalTexture===void 0&&(console.error("Bindings._update: binding should be available:",s,o,a,s.textureNode.value,i),this.textures.updateTexture(a),i=!0),a.isStorageTexture===!0){const c=this.get(a);s.store===!0?c.needsMipmap=!0:a.generateMipmaps===!0&&this.textures.needsMipmaps(a)&&c.needsMipmap===!0&&(this.backend.generateMipmaps(a),c.needsMipmap=!1)}}}i===!0&&this.backend.updateBindings(e,t)}}class xU{constructor(e,t,r=null){this.isNodeAttribute=!0,this.name=e,this.type=t,this.node=r}}class AEe{constructor(e,t,r){this.isNodeUniform=!0,this.name=e,this.type=t,this.node=r.getSelf()}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class l8{constructor(e,t){this.isNodeVar=!0,this.name=e,this.type=t}}class CEe extends l8{constructor(e,t){super(e,t),this.needsInterpolation=!1,this.isNodeVarying=!0}}class REe{constructor(e,t,r=""){this.name=e,this.type=t,this.code=r,Object.defineProperty(this,"isNodeCode",{value:!0})}}let NEe=0;class VT{constructor(e=null){this.id=NEe++,this.nodesData=new WeakMap,this.parent=e}getData(e){let t=this.nodesData.get(e);return t===void 0&&this.parent!==null&&(t=this.parent.getData(e)),t}setData(e,t){this.nodesData.set(e,t)}}class PEe extends sn{static get type(){return"ParameterNode"}constructor(e,t=null){super(e,t),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}class Xr extends wt{static get type(){return"CodeNode"}constructor(e="",t=[],r=""){super("code"),this.isCodeNode=!0,this.code=e,this.language=r,this.includes=t}isGlobal(){return!0}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const t=this.getIncludes(e);for(const i of t)i.build(e);const r=e.getCodeFromNode(this,this.getNodeType(e));return r.code=this.code,r.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}class IEe extends Xr{static get type(){return"FunctionNode"}constructor(e="",t=[],r=""){super(e,t,r)}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let r=t.nodeFunction;return r===void 0&&(r=e.parser.parseFunction(this.code),t.nodeFunction=r),r}generate(e,t){super.generate(e);const r=this.getNodeFunction(e),i=r.name,s=r.type,o=e.getCodeFromNode(this,s);i!==""&&(o.name=i);const a=e.getPropertyName(o),l=this.getNodeFunction(e).getCode(a);return o.code=l+`
`,t==="property"?a:e.format(`${a}()`,s,t)}}class sh{constructor(e,t){this.name=e,this.value=t,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class LEe extends sh{constructor(e,t=0){super(e,t),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class DEe extends sh{constructor(e,t=new Bt){super(e,t),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class OEe extends sh{constructor(e,t=new ce){super(e,t),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class FEe extends sh{constructor(e,t=new tn){super(e,t),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class kEe extends sh{constructor(e,t=new rn){super(e,t),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class UEe extends sh{constructor(e,t=new ps){super(e,t),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class BEe extends sh{constructor(e,t=new Bn){super(e,t),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class zEe extends LEe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class $Ee extends DEe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class VEe extends OEe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class GEe extends FEe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class HEe extends kEe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class WEe extends UEe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class jEe extends BEe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class qEe extends wt{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}add(e){return this.nodes.push(e),this}If(e,t){const r=new f_(t);return this._currentCond=Mi(e,r),this.add(this._currentCond)}ElseIf(e,t){const r=new f_(t),i=Mi(e,r);return this._currentCond.elseNode=i,this._currentCond=i,this}Else(e){return this._currentCond.elseNode=new f_(e),this}build(e,...t){const r=iH();Gx(this);for(const i of this.nodes)i.build(e,"void");return Gx(r),this.outputNode?this.outputNode.build(e,...t):super.build(e,...t)}else(...e){return console.warn("TSL.StackNode: .else() has been renamed to .Else()."),this.Else(...e)}elseif(...e){return console.warn("TSL.StackNode: .elseif() has been renamed to .ElseIf()."),this.ElseIf(...e)}}const GT=Ce(qEe),Td=4,SU=[.125,.215,.35,.446,.526,.582],au=20,HT=new o2(-1,1,1,-1,0,1),XEe=new Ma(90,1),bU=new rn;let WT=null,jT=0,qT=0;const nu=(1+Math.sqrt(5))/2,Xh=1/nu,wU=[new ce(-nu,Xh,0),new ce(nu,Xh,0),new ce(-Xh,0,nu),new ce(Xh,0,nu),new ce(0,nu,-Xh),new ce(0,nu,Xh),new ce(-1,1,-1),new ce(1,1,-1),new ce(-1,1,1),new ce(1,1,1)],KEe=[3,1,5,0,4,2],XT=OMe(Jb(),il("faceIndex")).normalize(),M2=Me(XT.x,XT.y.negate(),XT.z);class YEe{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}fromScene(e,t=0,r=.1,i=100){WT=this._renderer.getRenderTarget(),jT=this._renderer.getActiveCubeFace(),qT=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=MU(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=EU(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(WT,jT,qT),e.scissorTest=!1,dv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Gu||e.mapping===Uf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),WT=this._renderer.getRenderTarget(),jT=this._renderer.getActiveCubeFace(),qT=this._renderer.getActiveMipmapLevel();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Fi,minFilter:Fi,generateMipmaps:!1,type:qa,format:sp,colorSpace:Ls},i=TU(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=TU(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=QEe(s)),this._blurMaterial=ZEe(s,e,t)}return i}async _compileMaterial(e){const t=new ju(this._lodPlanes[0],e);await this._renderer.compile(t,HT)}_sceneToCubeUV(e,t,r,i){const s=XEe;s.near=t,s.far=r;const o=[-1,1,-1,-1,-1,-1],a=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear;l.getClearColor(bU),l.autoClear=!1;let u=this._backgroundBox;if(u===null){const f=new Wb({name:"PMREM.Background",side:cl,depthWrite:!1,depthTest:!1});u=new ju(new Ey,f)}let h=!1;const d=e.background;d?d.isColor&&(u.material.color.copy(d),e.background=null,h=!0):(u.material.color.copy(bU),h=!0),l.setRenderTarget(i),l.clear(),h&&l.render(u,s);for(let f=0;f<6;f++){const p=f%3;p===0?(s.up.set(0,o[f],0),s.lookAt(a[f],0,0)):p===1?(s.up.set(0,0,o[f]),s.lookAt(0,a[f],0)):(s.up.set(0,o[f],0),s.lookAt(0,0,a[f]));const g=this._cubeSize;dv(i,p*g,f>2?g:0,g,g),l.render(e,s)}l.autoClear=c,e.background=d}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Gu||e.mapping===Uf;i?this._cubemapMaterial===null&&(this._cubemapMaterial=MU(e)):this._equirectMaterial===null&&(this._equirectMaterial=EU(e));const s=i?this._cubemapMaterial:this._equirectMaterial;s.fragmentNode.value=e;const o=this._lodMeshes[0];o.material=s;const a=this._cubeSize;dv(t,0,0,3*a,2*a),r.setRenderTarget(t),r.render(o,HT)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=wU[(i-s-1)%wU.length];this._blur(e,s-1,s,o,a)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=this._lodMeshes[i];h.material=c;const d=c.uniforms,f=this._sizeLods[r]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*au-1),g=s/p,y=isFinite(s)?1+Math.floor(u*g):au;y>au&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${au}`);const m=[];let _=0;for(let w=0;w<au;++w){const M=w/g,C=Math.exp(-M*M/2);m.push(C),w===0?_+=C:w<y&&(_+=2*C)}for(let w=0;w<m.length;w++)m[w]=m[w]/_;e.texture.frame=(e.texture.frame||0)+1,d.envMap.value=e.texture,d.samples.value=y,d.weights.array=m,d.latitudinal.value=o==="latitudinal"?1:0,a&&(d.poleAxis.value=a);const{_lodMax:v}=this;d.dTheta.value=p,d.mipInt.value=v-r;const x=this._sizeLods[i],b=3*x*(i>v-Td?i-v+Td:0),T=4*(this._cubeSize-x);dv(t,b,T,3*x,2*x),l.setRenderTarget(t),l.render(h,HT)}}function QEe(n){const e=[],t=[],r=[],i=[];let s=n;const o=n-Td+1+SU.length;for(let a=0;a<o;a++){const l=Math.pow(2,s);t.push(l);let c=1/l;a>n-Td?c=SU[a-n+Td-1]:a===0&&(c=0),r.push(c);const u=1/(l-2),h=-u,d=1+u,f=[h,h,d,h,d,d,h,h,d,d,h,d],p=6,g=6,y=3,m=2,_=1,v=new Float32Array(y*g*p),x=new Float32Array(m*g*p),b=new Float32Array(_*g*p);for(let w=0;w<p;w++){const M=w%3*2/3-1,C=w>2?0:-1,S=[M,C,0,M+2/3,C,0,M+2/3,C+1,0,M,C,0,M+2/3,C+1,0,M,C+1,0],E=KEe[w];v.set(S,y*g*E),x.set(f,m*g*E);const I=[E,E,E,E,E,E];b.set(I,_*g*E)}const T=new rh;T.setAttribute("position",new Ds(v,y)),T.setAttribute("uv",new Ds(x,m)),T.setAttribute("faceIndex",new Ds(b,_)),e.push(T),i.push(new ju(T,null)),s>Td&&s--}return{lodPlanes:e,sizeLods:t,sigmas:r,lodMeshes:i}}function TU(n,e,t){const r=new ap(n,e,t);return r.texture.mapping=hC,r.texture.name="PMREM.cubeUv",r.texture.isPMREMTexture=!0,r.scissorTest=!0,r}function dv(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function E2(n){const e=new lr;return e.depthTest=!1,e.depthWrite=!1,e.blending=kf,e.name=`PMREM_${n}`,e}function ZEe(n,e,t){const r=Vg(new Array(au).fill(0)),i=Mt(new ce(0,1,0)),s=Mt(0),o=Ae(au),a=Mt(0),l=Mt(1),c=qn(null),u=Mt(0),h=Ae(1/e),d=Ae(1/t),f=Ae(n),p={n:o,latitudinal:a,weights:r,poleAxis:i,outputDirection:M2,dTheta:s,samples:l,envMap:c,mipInt:u,CUBEUV_TEXEL_WIDTH:h,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f},g=E2("blur");return g.uniforms=p,g.fragmentNode=kMe({...p,latitudinal:a.equal(1)}),g}function MU(n){const e=E2("cubemap");return e.fragmentNode=$g(n,M2),e}function EU(n){const e=E2("equirect");return e.fragmentNode=qn(n,jH(M2),0),e}let JEe=0;class XC{constructor(e="",t=[],r=0,i=[]){this.name=e,this.bindings=t,this.index=r,this.bindingsReference=i,this.id=JEe++}}const AU=new WeakMap,eAe=new Map([[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),tAe=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),fv=n=>(n=Number(n),n+(n%1?"":".0"));class c8{constructor(e,t,r){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=t,this.parser=r,this.scene=null,this.camera=null,this.nodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.monitor=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.flow={code:""},this.chaining=[],this.stack=GT(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new VT,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.useComparisonMethod=!1}getBindGroupsCache(){let e=AU.get(this.renderer);return e===void 0&&(e=new sl,AU.set(this.renderer,e)),e}createRenderTarget(e,t,r){return new ap(e,t,r)}createCubeRenderTarget(e,t){return new qH(e,t)}createPMREMGenerator(){return new YEe(this.renderer)}includes(e){return this.nodes.includes(e)}_getBindGroup(e,t){const r=this.getBindGroupsCache(),i=[];let s=!0;for(const a of t)i.push(a),s=s&&a.groupNode.shared!==!0;let o;return s?(o=r.get(i),o===void 0&&(o=new XC(e,i,this.bindingsIndexes[e].group,i),r.set(i,o))):o=new XC(e,i,this.bindingsIndexes[e].group,i),o}getBindGroupArray(e,t){const r=this.bindings[t];let i=r[e];return i===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),r[e]=i=[]),i}getBindings(){let e=this.bindGroups;if(e===null){const t={},r=this.bindings;for(const i of kk)for(const s in r[i]){const o=r[i][s];(t[s]||(t[s]=[])).push(...o)}e=[];for(const i in t){const s=t[i],o=this._getBindGroup(i,s);e.push(o)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((t,r)=>t.bindings[0].groupNode.order-r.bindings[0].groupNode.order);for(let t=0;t<e.length;t++){const r=e[t];this.bindingsIndexes[r.name].group=t,r.index=t}}setHashNode(e,t){this.hashNodes[t]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}buildUpdateNodes(){for(const e of this.nodes){const t=e.getUpdateType(),r=e.getUpdateBeforeType(),i=e.getUpdateAfterType();t!==Nt.NONE&&this.updateNodes.push(e.getSelf()),r!==Nt.NONE&&this.updateBeforeNodes.push(e.getSelf()),i!==Nt.NONE&&this.updateAfterNodes.push(e.getSelf())}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===Fi||e.magFilter===fC||e.magFilter===Hd||e.magFilter===ja||e.minFilter===Fi||e.minFilter===fC||e.minFilter===Hd||e.minFilter===ja}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,t){return this.flowNodes[e].push(t),t}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,t=!0){const r=this.getDataFromNode(e);return r.cache===void 0&&(r.cache=new VT(t?this.getCache():null)),r.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const t=this.getDataFromNode(e);return t.usageCount=t.usageCount===void 0?1:t.usageCount+1,t.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateConst(e,t=null){if(t===null&&(e==="float"||e==="int"||e==="uint"?t=0:e==="bool"?t=!1:e==="color"?t=new rn:e==="vec2"?t=new Bt:e==="vec3"?t=new ce:e==="vec4"&&(t=new tn)),e==="float")return fv(t);if(e==="int")return`${Math.round(t)}`;if(e==="uint")return t>=0?`${Math.round(t)}u`:"0u";if(e==="bool")return t?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${fv(t.r)}, ${fv(t.g)}, ${fv(t.b)} )`;const r=this.getTypeLength(e),i=this.getComponentType(e),s=o=>this.generateConst(i,o);if(r===2)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)} )`;if(r===3)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)} )`;if(r===4)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)}, ${s(t.w)} )`;if(r>4&&t&&(t.isMatrix3||t.isMatrix4))return`${this.getType(e)}( ${t.elements.map(s).join(", ")} )`;if(r>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,t){const r=this.attributes;for(const s of r)if(s.name===e)return s;const i=new xU(e,t);return r.push(i),i}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const t=e.type;if(e.isDataTexture){if(t===ci)return"int";if(t===Dr)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return t===null?null:t[1]==="b"?"bool":t[1]==="i"?"int":t[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,t="float"){if(e===1)return t;const r=eAe.get(e);return(t==="float"?"":t[0])+r}getTypeFromArray(e){return tAe.get(e.constructor)}getTypeFromAttribute(e){let t=e;e.isInterleavedBufferAttribute&&(t=e.data);const r=t.array,i=e.itemSize,s=e.normalized;let o;return!(e instanceof L6)&&s!==!0&&(o=this.getTypeFromArray(r)),this.getTypeFromLength(i,o)}getTypeLength(e){const t=this.getVectorType(e),r=/vec([2-4])/.exec(t);return r!==null?Number(r[1]):t==="float"||t==="bool"||t==="int"||t==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}getIntegerType(e){const t=this.getComponentType(e);return t==="int"||t==="uint"?e:this.changeComponentType(e,"int")}addStack(){return this.stack=GT(this.stack),this.stacks.push(iH()||this.stack),Gx(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,Gx(this.stacks.pop()),e}getDataFromNode(e,t=this.shaderStage,r=null){r=r===null?e.isGlobal(this)?this.globalCache:this.cache:r;let i=r.getData(e);return i===void 0&&(i={},r.setData(e,i)),i[t]===void 0&&(i[t]={}),i[t]}getNodeProperties(e,t="any"){const r=this.getDataFromNode(e,t);return r.properties||(r.properties={outputNode:null})}getBufferAttributeFromNode(e,t){const r=this.getDataFromNode(e);let i=r.bufferAttribute;if(i===void 0){const s=this.uniforms.index++;i=new xU("nodeAttribute"+s,t,e),this.bufferAttributes.push(i),r.bufferAttribute=i}return i}getStructTypeFromNode(e,t=this.shaderStage){const r=this.getDataFromNode(e,t);if(r.structType===void 0){const i=this.structs.index++;e.name=`StructType${i}`,this.structs[t].push(e),r.structType=e}return e}getUniformFromNode(e,t,r=this.shaderStage,i=null){const s=this.getDataFromNode(e,r,this.globalCache);let o=s.uniform;if(o===void 0){const a=this.uniforms.index++;o=new AEe(i||"nodeUniform"+a,t,e),this.uniforms[r].push(o),s.uniform=o}return o}getVarFromNode(e,t=null,r=e.getNodeType(this),i=this.shaderStage){const s=this.getDataFromNode(e,i);let o=s.variable;if(o===void 0){const a=this.vars[i]||(this.vars[i]=[]);t===null&&(t="nodeVar"+a.length),o=new l8(t,r),a.push(o),s.variable=o}return o}getVaryingFromNode(e,t=null,r=e.getNodeType(this)){const i=this.getDataFromNode(e,"any");let s=i.varying;if(s===void 0){const o=this.varyings,a=o.length;t===null&&(t="nodeVarying"+a),s=new CEe(t,r),o.push(s),i.varying=s}return s}getCodeFromNode(e,t,r=this.shaderStage){const i=this.getDataFromNode(e);let s=i.code;if(s===void 0){const o=this.codes[r]||(this.codes[r]=[]),a=o.length;s=new REe("nodeCode"+a,t),o.push(s),i.code=s}return s}addFlowCodeHierarchy(e,t){const{flowCodes:r,flowCodeBlock:i}=this.getDataFromNode(e);let s=!0,o=t;for(;o;){if(i.get(o)===!0){s=!1;break}o=this.getDataFromNode(o).parentNodeBlock}if(s)for(const a of r)this.addLineFlowCode(a)}addLineFlowCodeBlock(e,t,r){const i=this.getDataFromNode(e),s=i.flowCodes||(i.flowCodes=[]),o=i.flowCodeBlock||(i.flowCodeBlock=new WeakMap);s.push(t),o.set(r,!0)}addLineFlowCode(e,t=null){return e===""?this:(t!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(t,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const t=e.getNodeType(this),r=this.flowChildNode(e,t);return this.flowsData.set(e,r),r}buildFunctionNode(e){const t=new IEe,r=this.currentFunctionNode;return this.currentFunctionNode=t,t.code=this.buildFunctionCode(e),this.currentFunctionNode=r,t}flowShaderNode(e){const t=e.layout,r={[Symbol.iterator](){let o=0;const a=Object.values(this);return{next:()=>({value:a[o],done:o++>=a.length})}}};for(const o of t.inputs)r[o.name]=new PEe(o.type,o.name);e.layout=null;const i=e.call(r),s=this.flowStagesNode(i,t.type);return e.layout=t,s}flowStagesNode(e,t=null){const r=this.flow,i=this.vars,s=this.cache,o=this.buildStage,a=this.stack,l={code:""};this.flow=l,this.vars={},this.cache=new VT,this.stack=GT();for(const c of Fk)this.setBuildStage(c),l.result=e.build(this,t);return l.vars=this.getVars(this.shaderStage),this.flow=r,this.vars=i,this.cache=s,this.stack=a,this.setBuildStage(o),l}getFunctionOperator(){return null}flowChildNode(e,t=null){const r=this.flow,i={code:""};return this.flow=i,i.result=e.build(this,t),this.flow=r,i}flowNodeFromShaderStage(e,t,r=null,i=null){const s=this.shaderStage;this.setShaderStage(e);const o=this.flowChildNode(t,r);return i!==null&&(o.code+=`${this.tab+i} = ${o.result};
`),this.flowCode[e]=this.flowCode[e]+o.code,this.setShaderStage(s),o}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,t){return`${this.getType(e)} ${t}`}getVars(e){let t="";const r=this.vars[e];if(r!==void 0)for(const i of r)t+=`${this.getVar(i.type,i.name)}; `;return t}getUniforms(){console.warn("Abstract function.")}getCodes(e){const t=this.codes[e];let r="";if(t!==void 0)for(const i of t)r+=i.code+`
`;return r}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}build(){const{object:e,material:t,renderer:r}=this;if(t!==null){let i=r.nodes.library.fromMaterial(t);i===null&&(console.error(`NodeMaterial: Material "${t.type}" is not compatible.`),i=new lr),i.build(this)}else this.addFlow("compute",e);for(const i of Fk){this.setBuildStage(i),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const s of kk){this.setShaderStage(s);const o=this.flowNodes[s];for(const a of o)i==="generate"?this.flowNode(a):a.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,t){if(t==="float"||t==="int"||t==="uint")return new zEe(e);if(t==="vec2"||t==="ivec2"||t==="uvec2")return new $Ee(e);if(t==="vec3"||t==="ivec3"||t==="uvec3")return new VEe(e);if(t==="vec4"||t==="ivec4"||t==="uvec4")return new GEe(e);if(t==="color")return new HEe(e);if(t==="mat3")return new WEe(e);if(t==="mat4")return new jEe(e);throw new Error(`Uniform "${t}" not declared.`)}createNodeMaterial(e="NodeMaterial"){throw new Error(`THREE.NodeBuilder: createNodeMaterial() was deprecated. Use new ${e}() instead.`)}format(e,t,r){if(t=this.getVectorType(t),r=this.getVectorType(r),t===r||r===null||this.isReference(r))return e;const i=this.getTypeLength(t),s=this.getTypeLength(r);return i===16&&s===9?`${this.getType(r)}(${e}[0].xyz, ${e}[1].xyz, ${e}[2].xyz)`:i===9&&s===4?`${this.getType(r)}(${e}[0].xy, ${e}[1].xy)`:i>4||s>4||s===0?e:i===s?`${this.getType(r)}( ${e} )`:i>s?this.format(`${e}.${"xyz".slice(0,s)}`,this.getTypeFromLength(s,this.getComponentType(t)),r):s===4&&i>1?`${this.getType(r)}( ${this.format(e,t,"vec3")}, 1.0 )`:i===2?`${this.getType(r)}( ${this.format(e,t,"vec2")}, 0.0 )`:(i===1&&s>1&&t!==this.getComponentType(r)&&(e=`${this.getType(this.getComponentType(r))}( ${e} )`),`${this.getType(r)}( ${e} )`)}getSignature(){return`// Three.js r${Gb} - Node System
`}}class CU{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.startTime=null,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let r=e.get(t);return r===void 0&&(r={renderMap:new WeakMap,frameMap:new WeakMap},e.set(t,r)),r}updateBeforeNode(e){const t=e.getUpdateBeforeType(),r=e.updateReference(this);if(t===Nt.FRAME){const{frameMap:i}=this._getMaps(this.updateBeforeMap,r);i.get(r)!==this.frameId&&e.updateBefore(this)!==!1&&i.set(r,this.frameId)}else if(t===Nt.RENDER){const{renderMap:i}=this._getMaps(this.updateBeforeMap,r);i.get(r)!==this.renderId&&e.updateBefore(this)!==!1&&i.set(r,this.renderId)}else t===Nt.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const t=e.getUpdateAfterType(),r=e.updateReference(this);if(t===Nt.FRAME){const{frameMap:i}=this._getMaps(this.updateAfterMap,r);i.get(r)!==this.frameId&&e.updateAfter(this)!==!1&&i.set(r,this.frameId)}else if(t===Nt.RENDER){const{renderMap:i}=this._getMaps(this.updateAfterMap,r);i.get(r)!==this.renderId&&e.updateAfter(this)!==!1&&i.set(r,this.renderId)}else t===Nt.OBJECT&&e.updateAfter(this)}updateNode(e){const t=e.getUpdateType(),r=e.updateReference(this);if(t===Nt.FRAME){const{frameMap:i}=this._getMaps(this.updateMap,r);i.get(r)!==this.frameId&&e.update(this)!==!1&&i.set(r,this.frameId)}else if(t===Nt.RENDER){const{renderMap:i}=this._getMaps(this.updateMap,r);i.get(r)!==this.renderId&&e.update(this)!==!1&&i.set(r,this.renderId)}else t===Nt.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class A2{constructor(e,t,r=null,i="",s=!1){this.type=e,this.name=t,this.count=r,this.qualifier=i,this.isConst=s}}A2.isNodeFunctionInput=!0;class po extends cp{static get type(){return"TimerNode"}constructor(e=po.LOCAL,t=1,r=0){super(r),this.scope=e,this.scale=t,this.updateType=Nt.FRAME}update(e){const t=this.scope,r=this.scale;t===po.LOCAL?this.value+=e.deltaTime*r:t===po.DELTA?this.value=e.deltaTime*r:t===po.FRAME?this.value=e.frameId:this.value=e.time*r}serialize(e){super.serialize(e),e.scope=this.scope,e.scale=this.scale}deserialize(e){super.deserialize(e),this.scope=e.scope,this.scale=e.scale}}po.LOCAL="local";po.GLOBAL="global";po.DELTA="delta";po.FRAME="frame";const nAe=(n,e=0)=>Ue(new po(po.LOCAL,n,e));class Mr extends wt{static get type(){return"OscNode"}constructor(e=Mr.SINE,t=nAe()){super(),this.method=e,this.timeNode=t}getNodeType(e){return this.timeNode.getNodeType(e)}setup(){const e=this.method,t=Ue(this.timeNode);let r=null;return e===Mr.SINE?r=t.add(.75).mul(Math.PI*2).sin().mul(.5).add(.5):e===Mr.SQUARE?r=t.fract().round():e===Mr.TRIANGLE?r=t.add(.5).fract().mul(2).sub(1).abs():e===Mr.SAWTOOTH&&(r=t.fract()),r}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Mr.SINE="sine";Mr.SQUARE="square";Mr.TRIANGLE="triangle";Mr.SAWTOOTH="sawtooth";Mr.SINE;Mr.SQUARE;Mr.TRIANGLE;Mr.SAWTOOTH;new Bl;new ce;new ce;new ce;new Bn;new ce(0,0,-1);new tn;new ce;new ce;new tn;new Bt;new ap;Gg.flipX();const KT=new o2(-1,1,1,-1,0,1);class rAe extends rh{constructor(e=!1){super();const t=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new Ka([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Ka(t,2))}}const iAe=new rAe;class u8 extends ju{constructor(e=null){super(iAe,e),this.camera=KT,this.isQuadMesh=!0}renderAsync(e){return e.renderAsync(this,KT)}render(e){e.render(this,KT)}}class qo extends wt{static get type(){return"SceneNode"}constructor(e=qo.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,r=this.scene!==null?this.scene:e.scene;let i;return t===qo.BACKGROUND_BLURRINESS?i=kn("backgroundBlurriness","float",r):t===qo.BACKGROUND_INTENSITY?i=kn("backgroundIntensity","float",r):console.error("THREE.SceneNode: Unknown scope:",t),i}}qo.BACKGROUND_BLURRINESS="backgroundBlurriness";qo.BACKGROUND_INTENSITY="backgroundIntensity";const sAe=ze(qo,qo.BACKGROUND_BLURRINESS),RU=ze(qo,qo.BACKGROUND_INTENSITY),Md={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},Nr={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},Pr={Store:"store",Discard:"discard"},tr={Load:"load",Clear:"clear"},YT={CCW:"ccw",CW:"cw"},QT={None:"none",Front:"front",Back:"back"},Vf={Uint16:"uint16",Uint32:"uint32"},Q={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10uFloat:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Stencil8:"stencil8",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},ZT={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},Yx={Linear:"linear",Nearest:"nearest"},_t={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDstColor:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},Xc={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},NU={None:0,Red:1,Green:2,Blue:4,Alpha:8,All:15},Il={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},KC={Uniform:"uniform",Storage:"storage",ReadOnlyStorage:"read-only-storage"},PU={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},om={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},IU={OneD:"1d",TwoD:"2d",ThreeD:"3d"},ws={OneD:"1d",TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",CubeArray:"cube-array",ThreeD:"3d"},oAe={All:"all",StencilOnly:"stencil-only",DepthOnly:"depth-only"},pv={Vertex:"vertex",Instance:"instance"},YC={DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups"},aAe=new Bt;class lAe extends Ny{static get type(){return"PassTextureNode"}constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return e.object.isQuadMesh&&this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class LU extends lAe{static get type(){return"PassMultipleTextureNode"}constructor(e,t,r=!1){super(e,null),this.textureName=t,this.previousTexture=r}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){return new this.constructor(this.passNode,this.textureName,this.previousTexture)}}class o1 extends hr{static get type(){return"PassNode"}constructor(e,t,r,i={}){super("vec4"),this.scope=e,this.scene=t,this.camera=r,this.options=i,this._pixelRatio=1,this._width=1,this._height=1;const s=new Ay;s.isRenderTargetTexture=!0,s.name="depth";const o=new ap(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:qa,...i});o.texture.name="output",o.depthTexture=s,this.renderTarget=o,this.updateBeforeType=Nt.FRAME,this._textures={output:o.texture,depth:s},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=Mt(0),this._cameraFar=Mt(0),this._mrt=null,this.isPassNode=!0}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}isGlobal(){return!0}getTexture(e){let t=this._textures[e];return t===void 0&&(t=this.renderTarget.texture.clone(),t.isRenderTargetTexture=!0,t.name=e,this._textures[e]=t,this.renderTarget.textures.push(t)),t}getPreviousTexture(e){let t=this._previousTextures[e];return t===void 0&&(t=this.getTexture(e).clone(),t.isRenderTargetTexture=!0,this._previousTextures[e]=t),t}toggleTexture(e){const t=this._previousTextures[e];if(t!==void 0){const r=this._textures[e],i=this.renderTarget.textures.indexOf(r);this.renderTarget.textures[i]=t,this._textures[e]=t,this._previousTextures[e]=r,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let t=this._textureNodes[e];return t===void 0&&(this._textureNodes[e]=t=Ue(new LU(this,e)),this._textureNodes[e].updateTexture()),t}getPreviousTextureNode(e="output"){let t=this._previousTextureNodes[e];return t===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),this._previousTextureNodes[e]=t=Ue(new LU(this,e,!0)),this._previousTextureNodes[e].updateTexture()),t}getViewZNode(e="depth"){let t=this._viewZNodes[e];if(t===void 0){const r=this._cameraNear,i=this._cameraFar;this._viewZNodes[e]=t=GH(this.getTextureNode(e),r,i)}return t}getLinearDepthNode(e="depth"){let t=this._linearDepthNodes[e];if(t===void 0){const r=this._cameraNear,i=this._cameraFar,s=this.getViewZNode(e);this._linearDepthNodes[e]=t=v_(s,r,i)}return t}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,e.backend.isWebGLBackend===!0&&(this.renderTarget.samples=0),this.renderTarget.depthTexture.isMultisampleRenderTargetTexture=this.renderTarget.samples>1,this.scope===o1.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:t}=e,{scene:r,camera:i}=this;this._pixelRatio=t.getPixelRatio();const s=t.getSize(aAe);this.setSize(s.width,s.height);const o=t.getRenderTarget(),a=t.getMRT();this._cameraNear.value=i.near,this._cameraFar.value=i.far;for(const l in this._previousTextures)this.toggleTexture(l);t.setRenderTarget(this.renderTarget),t.setMRT(this._mrt),t.render(r,i),t.setRenderTarget(o),t.setMRT(a)}setSize(e,t){this._width=e,this._height=t;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget.setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}o1.COLOR="color";o1.DEPTH="depth";class h8 extends wt{static get type(){return"FogNode"}constructor(e,t){super("float"),this.isFogNode=!0,this.colorNode=e,this.factorNode=t}getViewZNode(e){let t;const r=e.context.getViewZ;return r!==void 0&&(t=r(this)),(t||Yr.z).negate()}setup(){return this.factorNode}}class cAe extends h8{static get type(){return"FogRangeNode"}constructor(e,t,r){super(e),this.isFogRangeNode=!0,this.nearNode=t,this.farNode=r}setup(e){const t=this.getViewZNode(e);return qu(this.nearNode,this.farNode,t)}}const uAe=Ce(cAe);class hAe extends h8{static get type(){return"FogExp2Node"}constructor(e,t){super(e),this.isFogExp2Node=!0,this.densityNode=t}setup(e){const t=this.getViewZNode(e),r=this.densityNode;return r.mul(r,t,t).negate().exp().oneMinus()}}const dAe=Ce(hAe),fAe=je(({depthTexture:n,shadowCoord:e})=>qn(n,e.xy).compare(e.z)),pAe=je(({depthTexture:n,shadowCoord:e,shadow:t})=>{const r=(g,y)=>qn(n,g).compare(y),i=kn("mapSize","vec2",t).setGroup(Dt),s=kn("radius","float",t).setGroup(Dt),o=Ke(1).div(i),a=o.x.negate().mul(s),l=o.y.negate().mul(s),c=o.x.mul(s),u=o.y.mul(s),h=a.div(2),d=l.div(2),f=c.div(2),p=u.div(2);return us(r(e.xy.add(Ke(a,l)),e.z),r(e.xy.add(Ke(0,l)),e.z),r(e.xy.add(Ke(c,l)),e.z),r(e.xy.add(Ke(h,d)),e.z),r(e.xy.add(Ke(0,d)),e.z),r(e.xy.add(Ke(f,d)),e.z),r(e.xy.add(Ke(a,0)),e.z),r(e.xy.add(Ke(h,0)),e.z),r(e.xy,e.z),r(e.xy.add(Ke(f,0)),e.z),r(e.xy.add(Ke(c,0)),e.z),r(e.xy.add(Ke(h,p)),e.z),r(e.xy.add(Ke(0,p)),e.z),r(e.xy.add(Ke(f,p)),e.z),r(e.xy.add(Ke(a,u)),e.z),r(e.xy.add(Ke(0,u)),e.z),r(e.xy.add(Ke(c,u)),e.z)).mul(1/17)}),mAe=je(({depthTexture:n,shadowCoord:e,shadow:t})=>{const r=(u,h)=>qn(n,u).compare(h),i=kn("mapSize","vec2",t).setGroup(Dt),s=Ke(1).div(i),o=s.x,a=s.y,l=e.xy,c=up(l.mul(i).add(.5));return l.subAssign(c.mul(s)),us(r(l,e.z),r(l.add(Ke(o,0)),e.z),r(l.add(Ke(0,a)),e.z),r(l.add(s),e.z),Tn(r(l.add(Ke(o.negate(),0)),e.z),r(l.add(Ke(o.mul(2),0)),e.z),c.x),Tn(r(l.add(Ke(o.negate(),a)),e.z),r(l.add(Ke(o.mul(2),a)),e.z),c.x),Tn(r(l.add(Ke(0,a.negate())),e.z),r(l.add(Ke(0,a.mul(2))),e.z),c.y),Tn(r(l.add(Ke(o,a.negate())),e.z),r(l.add(Ke(o,a.mul(2))),e.z),c.y),Tn(Tn(r(l.add(Ke(o.negate(),a.negate())),e.z),r(l.add(Ke(o.mul(2),a.negate())),e.z),c.x),Tn(r(l.add(Ke(o.negate(),a.mul(2))),e.z),r(l.add(Ke(o.mul(2),a.mul(2))),e.z),c.x),c.y)).mul(1/9)}),gAe=je(({depthTexture:n,shadowCoord:e})=>{const t=Ae(1).toVar(),r=qn(n).uv(e.xy).rg,i=SH(e.z,r.x);return Zr(i.notEqual(Ae(1)),()=>{const s=e.z.sub(r.x),o=bo(0,r.y.mul(r.y));let a=o.div(o.add(s.mul(s)));a=bc(Ru(a,.3).div(.95-.3)),t.assign(bc(bo(i,a)))}),t}),yAe=je(({samples:n,radius:e,size:t,shadowPass:r})=>{const i=Ae(0).toVar(),s=Ae(0).toVar(),o=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(2).div(n.sub(1))),a=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(-1));$a({start:jn(0),end:jn(n),type:"int",condition:"<"},({i:c})=>{const u=a.add(Ae(c).mul(o)),h=r.uv(us(r1.xy,Ke(0,u).mul(e)).div(t)).x;i.addAssign(h),s.addAssign(h.mul(h))}),i.divAssign(n),s.divAssign(n);const l=p2(s.sub(i.mul(i)));return Ke(i,l)}),vAe=je(({samples:n,radius:e,size:t,shadowPass:r})=>{const i=Ae(0).toVar(),s=Ae(0).toVar(),o=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(2).div(n.sub(1))),a=n.lessThanEqual(Ae(1)).select(Ae(0),Ae(-1));$a({start:jn(0),end:jn(n),type:"int",condition:"<"},({i:c})=>{const u=a.add(Ae(c).mul(o)),h=r.uv(us(r1.xy,Ke(u,0).mul(e)).div(t));i.addAssign(h.x),s.addAssign(us(h.y.mul(h.y),h.x.mul(h.x)))}),i.divAssign(n),s.divAssign(n);const l=p2(s.sub(i.mul(i)));return Ke(i,l)}),_Ae=[fAe,pAe,mAe,gAe];let Kh=null;const mv=new u8;class oh extends hp{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.updateType=Nt.FRAME,this.light=e,this.color=new rn,this.colorNode=Mt(this.color).setGroup(Dt),this.baseColorNode=null,this.shadowMap=null,this.shadowNode=null,this.shadowColorNode=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this.isAnalyticLightNode=!0}getCacheKey(){return zx(super.getCacheKey(),this.light.id,this.light.castShadow?1:0)}getHash(){return this.light.uuid}setupShadow(e){const{object:t,renderer:r}=e;if(r.shadowMap.enabled===!1)return;let i=this.shadowColorNode;if(i===null){Kh===null&&(Kh=new lr,Kh.fragmentNode=Tt(0,0,0,1),Kh.isShadowNodeMaterial=!0,Kh.name="ShadowMaterial");const s=r.shadowMap.type,o=this.light.shadow,a=new Ay;a.compareFunction=QP;const l=e.createRenderTarget(o.mapSize.width,o.mapSize.height);if(l.depthTexture=a,o.camera.updateProjectionMatrix(),s===G0){a.compareFunction=null,this.vsmShadowMapVertical=e.createRenderTarget(o.mapSize.width,o.mapSize.height,{format:Fg,type:qa}),this.vsmShadowMapHorizontal=e.createRenderTarget(o.mapSize.width,o.mapSize.height,{format:Fg,type:qa});const v=qn(a),x=qn(this.vsmShadowMapVertical.texture),b=kn("blurSamples","float",o).setGroup(Dt),T=kn("radius","float",o).setGroup(Dt),w=kn("mapSize","vec2",o).setGroup(Dt);let M=this.vsmMaterialVertical||(this.vsmMaterialVertical=new lr);M.fragmentNode=yAe({samples:b,radius:T,size:w,shadowPass:v}).context(e.getSharedContext()),M.name="VSMVertical",M=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new lr),M.fragmentNode=vAe({samples:b,radius:T,size:w,shadowPass:x}).context(e.getSharedContext()),M.name="VSMHorizontal"}const c=kn("intensity","float",o).setGroup(Dt),u=kn("bias","float",o).setGroup(Dt),h=kn("normalBias","float",o).setGroup(Dt),d=t.material.shadowPositionNode||zC;let f=Mt(o.matrix).setGroup(Dt).mul(d.add(n1.mul(h)));f=f.xyz.div(f.w);let p=f.z.add(u);r.coordinateSystem===Wu&&(p=p.mul(2).sub(1)),f=Me(f.x,f.y.oneMinus(),p);const g=f.x.greaterThanEqual(0).and(f.x.lessThanEqual(1)).and(f.y.greaterThanEqual(0)).and(f.y.lessThanEqual(1)).and(f.z.lessThanEqual(1)),y=o.filterNode||_Ae[r.shadowMap.type]||null;if(y===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const m=qn(l.texture,f),_=g.select(y({depthTexture:s===G0?this.vsmShadowMapHorizontal.texture:a,shadowCoord:f,shadow:o}),Ae(1));this.shadowMap=l,this.light.shadow.map=l,this.shadowNode=_,this.shadowColorNode=i=this.colorNode.mul(Tn(1,_.rgb.mix(m,1),c.mul(m.a))),this.baseColorNode=this.colorNode}this.colorNode=i,this.updateBeforeType=Nt.RENDER}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&this.disposeShadow()}updateShadow(e){const{shadowMap:t,light:r}=this,{renderer:i,scene:s,camera:o}=e,a=i.shadowMap.type,l=t.depthTexture.version;this._depthVersionCached=l;const c=s.overrideMaterial;s.overrideMaterial=Kh,t.setSize(r.shadow.mapSize.width,r.shadow.mapSize.height),r.shadow.updateMatrices(r),r.shadow.camera.layers.mask=o.layers.mask;const u=i.getRenderTarget(),h=i.getRenderObjectFunction();i.setRenderObjectFunction((d,...f)=>{(d.castShadow===!0||d.receiveShadow&&a===G0)&&i.renderObject(d,...f)}),i.setRenderTarget(t),i.render(s,r.shadow.camera),i.setRenderObjectFunction(h),r.isPointLight!==!0&&a===G0&&this.vsmPass(e,r),i.setRenderTarget(u),s.overrideMaterial=c}vsmPass(e,t){const{renderer:r}=e;this.vsmShadowMapVertical.setSize(t.shadow.mapSize.width,t.shadow.mapSize.height),this.vsmShadowMapHorizontal.setSize(t.shadow.mapSize.width,t.shadow.mapSize.height),r.setRenderTarget(this.vsmShadowMapVertical),mv.material=this.vsmMaterialVertical,mv.render(r),r.setRenderTarget(this.vsmShadowMapHorizontal),mv.material=this.vsmMaterialHorizontal,mv.render(r)}disposeShadow(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),this.shadowNode=null,this.shadowColorNode=null,this.baseColorNode=null,this.updateBeforeType=Nt.NONE}updateBefore(e){const t=this.light.shadow;(t.needsUpdate||t.autoUpdate)&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(t.needsUpdate=!1))}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const d8=je(n=>{const{lightDistance:e,cutoffDistance:t,decayExponent:r}=n,i=e.pow(r).max(.01).reciprocal();return t.greaterThan(0).select(i.mul(e.div(t).pow4().oneMinus().clamp().pow2()),i)});let gv;function C2(n){gv=gv||new WeakMap;let e=gv.get(n);return e===void 0&&gv.set(n,e={}),e}function f8(n){const e=C2(n);return e.position||(e.position=Mt(new ce).setGroup(Dt).onRenderUpdate((t,r)=>r.value.setFromMatrixPosition(n.matrixWorld)))}function xAe(n){const e=C2(n);return e.targetPosition||(e.targetPosition=Mt(new ce).setGroup(Dt).onRenderUpdate((t,r)=>r.value.setFromMatrixPosition(n.target.matrixWorld)))}function R2(n){const e=C2(n);return e.viewPosition||(e.viewPosition=Mt(new ce).setGroup(Dt).onRenderUpdate(({camera:t},r)=>{r.value=r.value||new ce,r.value.setFromMatrixPosition(n.matrixWorld),r.value.applyMatrix4(t.matrixWorldInverse)}))}const p8=n=>dl.transformDirection(f8(n).sub(xAe(n))),SAe=je(([n])=>{const e=n.mul(.9478672986).add(.0521327014).pow(2.4),t=n.mul(.0773993808),r=n.lessThanEqual(.04045);return Tn(e,t,r)}).setLayout({name:"sRGBToLinearSRGB",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),bAe=je(([n])=>{const e=n.pow(.41666).mul(1.055).sub(.055),t=n.mul(12.92),r=n.lessThanEqual(.0031308);return Tn(e,t,r)}).setLayout({name:"linearSRGBTosRGB",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),wAe=je(([n,e])=>n.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),TAe=je(([n,e])=>(n=n.mul(e),n.div(n.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),MAe=je(([n,e])=>{n=n.mul(e),n=n.sub(.004).max(0);const t=n.mul(n.mul(6.2).add(.5)),r=n.mul(n.mul(6.2).add(1.7)).add(.06);return t.div(r).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),EAe=je(([n])=>{const e=n.mul(n.add(.0245786)).sub(90537e-9),t=n.mul(n.add(.432951).mul(.983729)).add(.238081);return e.div(t)}),AAe=je(([n,e])=>{const t=Ui(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),r=Ui(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return n=n.mul(e).div(.6),n=t.mul(n),n=EAe(n),n=r.mul(n),n.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),CAe=Ui(Me(1.6605,-.1246,-.0182),Me(-.5876,1.1329,-.1006),Me(-.0728,-.0083,1.1187)),RAe=Ui(Me(.6274,.0691,.0164),Me(.3293,.9195,.088),Me(.0433,.0113,.8956)),NAe=je(([n])=>{const e=Me(n).toVar(),t=Me(e.mul(e)).toVar(),r=Me(t.mul(t)).toVar();return Ae(15.5).mul(r.mul(t)).sub(cn(40.14,r.mul(e))).add(cn(31.96,r).sub(cn(6.868,t.mul(e))).add(cn(.4298,t).add(cn(.1191,e).sub(.00232))))}),PAe=je(([n,e])=>{const t=Me(n).toVar(),r=Ui(Me(.856627153315983,.137318972929847,.11189821299995),Me(.0951212405381588,.761241990602591,.0767994186031903),Me(.0482516061458583,.101439036467562,.811302368396859)),i=Ui(Me(1.1271005818144368,-.1413297634984383,-.14132976349843826),Me(-.11060664309660323,1.157823702216272,-.11060664309660294),Me(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=Ae(-12.47393),o=Ae(4.026069);return t.mulAssign(e),t.assign(RAe.mul(t)),t.assign(r.mul(t)),t.assign(bo(t,1e-10)),t.assign(Kb(t)),t.assign(t.sub(s).div(o.sub(s))),t.assign(bc(t,0,1)),t.assign(NAe(t)),t.assign(i.mul(t)),t.assign(Qb(bo(Me(0),t),Me(2.2))),t.assign(CAe.mul(t)),t.assign(bc(t,0,1)),t}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),IAe=je(([n,e])=>{const t=Ae(.76),r=Ae(.15);n=n.mul(e);const i=Xx(n.r,Xx(n.g,n.b)),s=Mi(i.lessThan(.08),i.sub(cn(6.25,i.mul(i))),.04);n.subAssign(s);const o=bo(n.r,bo(n.g,n.b));Zr(o.lessThan(t),()=>n);const a=Ru(1,t),l=Ru(1,a.mul(a).div(o.add(a.sub(t))));n.mulAssign(l.div(o));const c=Ru(1,Sc(1,r.mul(o.sub(l)).add(1)));return Tn(n,Me(l),c)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class LAe extends wt{constructor(e){super(),this.scope=e}generate(e){const{scope:t}=this,{renderer:r}=e;r.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${t}Barrier 
`):e.addLineFlowCode(`${t}Barrier()`,this)}}Ce(LAe);class ta extends hr{static get type(){return"AtomicFunctionNode"}constructor(e,t,r,i=null){super("uint"),this.method=e,this.pointerNode=t,this.valueNode=r,this.storeNode=i}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const t=this.method,r=this.getNodeType(e),i=this.getInputType(e),s=this.pointerNode,o=this.valueNode,a=[];a.push(`&${s.build(e,i)}`),a.push(o.build(e,i));const l=`${e.getMethod(t,r)}( ${a.join(", ")} )`;if(this.storeNode!==null){const c=this.storeNode.build(e,i);e.addLineFlowCode(`${c} = ${l}`,this)}else e.addLineFlowCode(l,this)}}ta.ATOMIC_LOAD="atomicLoad";ta.ATOMIC_STORE="atomicStore";ta.ATOMIC_ADD="atomicAdd";ta.ATOMIC_SUB="atomicSub";ta.ATOMIC_MAX="atomicMax";ta.ATOMIC_MIN="atomicMin";ta.ATOMIC_AND="atomicAnd";ta.ATOMIC_OR="atomicOr";ta.ATOMIC_XOR="atomicXor";Ce(ta);const DAe=je(([n,e])=>{const t=n.x,r=n.y,i=n.z;let s=e.element(0).mul(.886227);return s=s.add(e.element(1).mul(2*.511664).mul(r)),s=s.add(e.element(2).mul(2*.511664).mul(i)),s=s.add(e.element(3).mul(2*.511664).mul(t)),s=s.add(e.element(4).mul(2*.429043).mul(t).mul(r)),s=s.add(e.element(5).mul(2*.429043).mul(r).mul(i)),s=s.add(e.element(6).mul(i.mul(i).mul(.743125).sub(.247708))),s=s.add(e.element(7).mul(2*.429043).mul(t).mul(i)),s=s.add(e.element(8).mul(.429043).mul(cn(t,t).sub(cn(r,r)))),s});class OAe extends oh{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=Mt(0).setGroup(Dt),this.decayExponentNode=Mt(0).setGroup(Dt)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setup(e){const{colorNode:t,cutoffDistanceNode:r,decayExponentNode:i,light:s}=this,o=e.context.lightingModel,a=R2(s).sub(Yr),l=a.normalize(),c=a.length(),u=d8({lightDistance:c,cutoffDistance:r,decayExponent:i}),h=t.mul(u),d=e.context.reflectedLight;o.direct({lightDirection:l,lightColor:h,reflectedLight:d},e.stack,e)}}class FAe extends oh{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setup(e){super.setup(e);const t=e.context.lightingModel,r=this.colorNode,i=p8(this.light),s=e.context.reflectedLight;t.direct({lightDirection:i,lightColor:r,reflectedLight:s},e.stack,e)}}const JT=new Bn,yv=new Bn;let am=null;class kAe extends oh{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=Mt(new ce).setGroup(Dt),this.halfWidth=Mt(new ce).setGroup(Dt)}update(e){super.update(e);const{light:t}=this,r=e.camera.matrixWorldInverse;yv.identity(),JT.copy(t.matrixWorld),JT.premultiply(r),yv.extractRotation(JT),this.halfWidth.value.set(t.width*.5,0,0),this.halfHeight.value.set(0,t.height*.5,0),this.halfWidth.value.applyMatrix4(yv),this.halfHeight.value.applyMatrix4(yv)}setup(e){super.setup(e);let t,r;e.isAvailable("float32Filterable")?(t=qn(am.LTC_FLOAT_1),r=qn(am.LTC_FLOAT_2)):(t=qn(am.LTC_HALF_1),r=qn(am.LTC_HALF_2));const{colorNode:i,light:s}=this,o=e.context.lightingModel,a=R2(s),l=e.context.reflectedLight;o.directRectArea({lightColor:i,lightPosition:a,halfWidth:this.halfWidth,halfHeight:this.halfHeight,reflectedLight:l,ltc_1:t,ltc_2:r},e.stack,e)}static setLTC(e){am=e}}class m8 extends oh{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=Mt(0).setGroup(Dt),this.penumbraCosNode=Mt(0).setGroup(Dt),this.cutoffDistanceNode=Mt(0).setGroup(Dt),this.decayExponentNode=Mt(0).setGroup(Dt)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e){const{coneCosNode:t,penumbraCosNode:r}=this;return qu(t,r,e)}setup(e){super.setup(e);const t=e.context.lightingModel,{colorNode:r,cutoffDistanceNode:i,decayExponentNode:s,light:o}=this,a=R2(o).sub(Yr),l=a.normalize(),c=l.dot(p8(o)),u=this.getSpotAttenuation(c),h=a.length(),d=d8({lightDistance:h,cutoffDistance:i,decayExponent:s}),f=r.mul(u).mul(d),p=e.context.reflectedLight;t.direct({lightDirection:l,lightColor:f,reflectedLight:p},e.stack,e)}}class UAe extends m8{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e){const t=this.light.iesMap;let r=null;if(t&&t.isTexture===!0){const i=e.acos().mul(1/Math.PI);r=qn(t,Ke(i,0),0).r}else r=super.getSpotAttenuation(e);return r}}class BAe extends oh{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class zAe extends oh{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=f8(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=Mt(new rn).setGroup(Dt)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:r,lightDirectionNode:i}=this,o=wo.dot(i).mul(.5).add(.5),a=Tn(r,t,o);e.context.irradiance.addAssign(a)}}class $Ae extends oh{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const t=[];for(let r=0;r<9;r++)t.push(new ce);this.lightProbe=Vg(t)}update(e){const{light:t}=this;super.update(e);for(let r=0;r<9;r++)this.lightProbe.array[r].copy(t.sh.coefficients[r]).multiplyScalar(t.intensity)}setup(e){const t=DAe(n1,this.lightProbe);e.context.irradiance.addAssign(t)}}class g8{parseFunction(){console.warn("Abstract function.")}}class N2{constructor(e,t,r="",i=""){this.type=e,this.inputs=t,this.name=r,this.precision=i}getCode(){console.warn("Abstract function.")}}N2.isNodeFunction=!0;const VAe=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,GAe=/[a-z_0-9]+/ig,DU="#pragma main",HAe=n=>{n=n.trim();const e=n.indexOf(DU),t=e!==-1?n.slice(e+DU.length):n,r=t.match(VAe);if(r!==null&&r.length===5){const i=r[4],s=[];let o=null;for(;(o=GAe.exec(i))!==null;)s.push(o);const a=[];let l=0;for(;l<s.length;){const p=s[l][0]==="const";p===!0&&l++;let g=s[l][0];g==="in"||g==="out"||g==="inout"?l++:g="";const y=s[l++][0];let m=Number.parseInt(s[l][0]);Number.isNaN(m)===!1?l++:m=null;const _=s[l++][0];a.push(new A2(y,_,m,g,p))}const c=t.substring(r[0].length),u=r[3]!==void 0?r[3]:"",h=r[2],d=r[1]!==void 0?r[1]:"",f=e!==-1?n.slice(0,e):"";return{type:h,inputs:a,name:u,precision:d,inputsCode:i,blockCode:c,headerCode:f}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class WAe extends N2{constructor(e){const{type:t,inputs:r,name:i,precision:s,inputsCode:o,blockCode:a,headerCode:l}=HAe(e);super(t,r,i,s),this.inputsCode=o,this.blockCode=a,this.headerCode=l}getCode(e=this.name){let t;const r=this.blockCode;if(r!==""){const{type:i,inputsCode:s,headerCode:o,precision:a}=this;let l=`${i} ${e} ( ${s.trim()} )`;a!==""&&(l=`${a} ${l}`),t=o+l+r}else t="";return t}}class jAe extends g8{parseFunction(e){return new WAe(e)}}function qAe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function XAe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}class KAe{constructor(){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparent=[],this.bundles=[],this.lightsNode=new zH([]),this.lightsArray=[],this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,t,r,i,s,o){let a=this.renderItems[this.renderItemsIndex];return a===void 0?(a={id:e.id,object:e,geometry:t,material:r,groupOrder:i,renderOrder:e.renderOrder,z:s,group:o},this.renderItems[this.renderItemsIndex]=a):(a.id=e.id,a.object=e,a.geometry=t,a.material=r,a.groupOrder=i,a.renderOrder=e.renderOrder,a.z=s,a.group=o),this.renderItemsIndex++,a}push(e,t,r,i,s,o){const a=this.getNextRenderItem(e,t,r,i,s,o);e.occlusionTest===!0&&this.occlusionQueryCount++,(r.transparent===!0||r.transmission>0?this.transparent:this.opaque).push(a)}unshift(e,t,r,i,s,o){const a=this.getNextRenderItem(e,t,r,i,s,o);(r.transparent===!0?this.transparent:this.opaque).unshift(a)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}getLightsNode(){return this.lightsNode.fromLights(this.lightsArray)}sort(e,t){this.opaque.length>1&&this.opaque.sort(e||qAe),this.transparent.length>1&&this.transparent.sort(t||XAe)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){const r=this.renderItems[e];if(r.id===null)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.groupOrder=null,r.renderOrder=null,r.z=null,r.group=null}}}class YAe{constructor(){this.lists=new sl}get(e,t){const r=this.lists,i=[e,t];let s=r.get(i);return s===void 0&&(s=new KAe,r.set(i,s)),s}dispose(){this.lists=new sl}}let QAe=0;class ZAe{constructor(){this.id=QAe++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new tn,this.scissor=!1,this.scissorValue=new tn,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.sampleCount=1,this.width=0,this.height=0,this.isRenderContext=!0}getCacheKey(){return y8(this)}}function y8(n){const{textures:e,activeCubeFace:t}=n,r=[t];for(const i of e)r.push(i.id);return Q6(r)}class JAe{constructor(){this.chainMaps={}}get(e,t,r=null){const i=[e,t];let s;if(r===null)s="default";else{const l=r.texture.format;s=`${r.textures.length}:${l}:${r.samples}:${r.depthBuffer}:${r.stencilBuffer}`}const o=this.getChainMap(s);let a=o.get(i);return a===void 0&&(a=new ZAe,o.set(i,a)),r!==null&&(a.sampleCount=r.samples===0?1:r.samples),a}getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new sl)}dispose(){this.chainMaps={}}}const eCe=new ce;class tCe extends Lc{constructor(e,t,r){super(),this.renderer=e,this.backend=t,this.info=r}updateRenderTarget(e,t=0){const r=this.get(e),i=e.samples===0?1:e.samples,s=r.depthTextureMips||(r.depthTextureMips={}),o=e.textures,a=this.getSize(o[0]),l=a.width>>t,c=a.height>>t;let u=e.depthTexture||s[t],h=!1;u===void 0&&(u=new Ay,u.format=e.stencilBuffer?Bf:Cu,u.type=e.stencilBuffer?wy:Dr,u.image.width=l,u.image.height=c,s[t]=u),(r.width!==a.width||a.height!==r.height)&&(h=!0,u.needsUpdate=!0,u.image.width=l,u.image.height=c),r.width=a.width,r.height=a.height,r.textures=o,r.depthTexture=u,r.depth=e.depthBuffer,r.stencil=e.stencilBuffer,r.renderTarget=e,r.sampleCount!==i&&(h=!0,u.needsUpdate=!0,r.sampleCount=i);const d={sampleCount:i};for(let f=0;f<o.length;f++){const p=o[f];h&&(p.needsUpdate=!0),this.updateTexture(p,d)}if(this.updateTexture(u,d),r.initialized!==!0){r.initialized=!0;const f=()=>{e.removeEventListener("dispose",f);for(let p=0;p<o.length;p++)this._destroyTexture(o[p]);this._destroyTexture(u),this.delete(e)};e.addEventListener("dispose",f)}}updateTexture(e,t={}){const r=this.get(e);if(r.initialized===!0&&r.version===e.version)return;const i=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;if(i&&r.initialized===!0&&(s.destroySampler(e),s.destroyTexture(e)),e.isFramebufferTexture){const u=this.renderer.getRenderTarget();u?e.type=u.texture.type:e.type=za}const{width:o,height:a,depth:l}=this.getSize(e);if(t.width=o,t.height=a,t.depth=l,t.needsMipmaps=this.needsMipmaps(e),t.levels=t.needsMipmaps?this.getMipLevels(e,o,a):1,i||e.isStorageTexture===!0)s.createSampler(e),s.createTexture(e,t),r.generation=e.version;else if(r.initialized!==!0&&s.createSampler(e),e.version>0){const u=e.image;if(u===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(u.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const h=[];for(const d of e.images)h.push(d);t.images=h}else t.image=u;(r.isDefaultTexture===void 0||r.isDefaultTexture===!0)&&(s.createTexture(e,t),r.isDefaultTexture=!1,r.generation=e.version),e.source.dataReady===!0&&s.updateTexture(e,t),t.needsMipmaps&&e.mipmaps.length===0&&s.generateMipmaps(e)}}else s.createDefaultTexture(e),r.isDefaultTexture=!0,r.generation=e.version;if(r.initialized!==!0){r.initialized=!0,r.generation=e.version,this.info.memory.textures++;const c=()=>{e.removeEventListener("dispose",c),this._destroyTexture(e),this.info.memory.textures--};e.addEventListener("dispose",c)}r.version=e.version}getSize(e,t=eCe){let r=e.images?e.images[0]:e.image;return r?(r.image!==void 0&&(r=r.image),t.width=r.width,t.height=r.height,t.depth=e.isCubeTexture?6:r.depth||1):t.width=t.height=t.depth=1,t}getMipLevels(e,t,r){let i;return e.isCompressedTexture?i=e.mipmaps.length:i=Math.floor(Math.log2(Math.max(t,r)))+1,i}needsMipmaps(e){return this.isEnvironmentTexture(e)?!0:e.isCompressedTexture===!0||e.minFilter!==kr&&e.minFilter!==Fi}isEnvironmentTexture(e){const t=e.mapping;return t===Sy||t===by||t===Gu||t===Uf}_destroyTexture(e){this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e)}}class P2 extends rn{constructor(e,t,r,i=1){super(e,t,r),this.a=i}set(e,t,r,i=1){return this.a=i,super.set(e,t,r)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}const Qs=new P2;class nCe extends Lc{constructor(e,t){super(),this.renderer=e,this.nodes=t}update(e,t,r){const i=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let o=!1;if(s===null)i._clearColor.getRGB(Qs,Ls),Qs.a=i._clearColor.a;else if(s.isColor===!0)s.getRGB(Qs,Ls),Qs.a=1,o=!0;else if(s.isNode===!0){const a=this.get(e),l=s;Qs.copy(i._clearColor);let c=a.backgroundMesh;if(c===void 0){const h=g2(Tt(l).mul(RU),{getUV:()=>n1,getTextureLevel:()=>sAe});let d=$C();d=d.setZ(d.w);const f=new lr;f.name="Background.material",f.side=cl,f.depthTest=!1,f.depthWrite=!1,f.fog=!1,f.lights=!1,f.vertexNode=d,f.colorNode=h,a.backgroundMeshNode=h,a.backgroundMesh=c=new ju(new r2(1,32,32),f),c.frustumCulled=!1,c.name="Background.mesh",c.onBeforeRender=function(p,g,y){this.matrixWorld.copyPosition(y.matrixWorld)}}const u=l.getCacheKey();a.backgroundCacheKey!==u&&(a.backgroundMeshNode.node=Tt(l).mul(RU),a.backgroundMeshNode.needsUpdate=!0,c.material.needsUpdate=!0,a.backgroundCacheKey=u),t.unshift(c,c.geometry,c.material,0,0,null)}else console.error("THREE.Renderer: Unsupported background configuration.",s);if(i.autoClear===!0||o===!0){Qs.multiplyScalar(Qs.a);const a=r.clearColorValue;a.r=Qs.r,a.g=Qs.g,a.b=Qs.b,a.a=Qs.a,r.depthClearValue=i._clearDepth,r.stencilClearValue=i._clearStencil,r.clearColor=i.autoClearColor===!0,r.clearDepth=i.autoClearDepth===!0,r.clearStencil=i.autoClearStencil===!0}else r.clearColor=!1,r.clearDepth=!1,r.clearStencil=!1}}class rCe{constructor(e,t,r,i,s,o,a,l,c,u=[]){this.vertexShader=e,this.fragmentShader=t,this.computeShader=r,this.transforms=u,this.nodeAttributes=i,this.bindings=s,this.updateNodes=o,this.updateBeforeNodes=a,this.updateAfterNodes=l,this.monitor=c,this.usedTimes=0}createBindings(){const e=[];for(const t of this.bindings)if(t.bindings[0].groupNode.shared!==!0){const i=new XC(t.name,[],t.index,t);e.push(i);for(const s of t.bindings)i.bindings.push(s.clone())}else e.push(t);return e}}const OU=new WeakMap;class iCe extends Lc{constructor(e,t){super(),this.renderer=e,this.backend=t,this.nodeFrame=new CU,this.nodeBuilderCache=new Map,this.callHashCache=new sl,this.groupsData=new sl}updateGroup(e){const t=e.groupNode,r=t.name;if(r===aH.name)return!0;if(r===Dt.name){const o=this.get(e),a=this.nodeFrame.renderId;return o.renderId!==a?(o.renderId=a,!0):!1}if(r===Lbe.name){const o=this.get(e),a=this.nodeFrame.frameId;return o.frameId!==a?(o.frameId=a,!0):!1}const i=[t,e];let s=this.groupsData.get(i);return s===void 0&&this.groupsData.set(i,s={}),s.version!==t.version?(s.version=t.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const t=this.get(e);let r=t.nodeBuilderState;if(r===void 0){const{nodeBuilderCache:i}=this,s=this.getForRenderCacheKey(e);if(r=i.get(s),r===void 0){const o=this.backend.createNodeBuilder(e.object,this.renderer);o.scene=e.scene,o.material=e.material,o.camera=e.camera,o.context.material=e.material,o.lightsNode=e.lightsNode,o.environmentNode=this.getEnvironmentNode(e.scene),o.fogNode=this.getFogNode(e.scene),o.clippingContext=e.clippingContext,o.build(),r=this._createNodeBuilderState(o),i.set(s,r)}r.usedTimes++,t.nodeBuilderState=r}return r}delete(e){if(e.isRenderObject){const t=this.get(e).nodeBuilderState;t.usedTimes--,t.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const t=this.get(e);let r=t.nodeBuilderState;if(r===void 0){const i=this.backend.createNodeBuilder(e,this.renderer);i.build(),r=this._createNodeBuilderState(i),t.nodeBuilderState=r}return r}_createNodeBuilderState(e){return new rCe(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.monitor,e.transforms)}getEnvironmentNode(e){return e.environmentNode||this.get(e).environmentNode||null}getBackgroundNode(e){return e.backgroundNode||this.get(e).backgroundNode||null}getFogNode(e){return e.fogNode||this.get(e).fogNode||null}getCacheKey(e,t){const r=[e,t],i=this.renderer.info.calls;let s=this.callHashCache.get(r);if(s===void 0||s.callId!==i){const o=this.getEnvironmentNode(e),a=this.getFogNode(e),l=[];t&&l.push(t.getCacheKey(!0)),o&&l.push(o.getCacheKey()),a&&l.push(a.getCacheKey()),l.push(this.renderer.shadowMap.enabled?1:0),s={callId:i,cacheKey:Q6(l)},this.callHashCache.set(r,s)}return s.cacheKey}updateScene(e){this.updateEnvironment(e),this.updateFog(e),this.updateBackground(e)}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const t=this.get(e),r=e.background;if(r){const i=e.backgroundBlurriness===0&&t.backgroundBlurriness>0||e.backgroundBlurriness>0&&t.backgroundBlurriness===0;if(t.background!==r||i){let s=null;if(r.isCubeTexture===!0||r.mapping===Sy||r.mapping===by||r.mapping===hC)if(e.backgroundBlurriness>0||r.mapping===hC)s=i8(r,n1);else{let o;r.isCubeTexture===!0?o=$g(r):o=qn(r),s=KH(o)}else r.isTexture===!0?s=qn(r,Gg.flipY()).setUpdateMatrix(!0):r.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",r);t.backgroundNode=s,t.background=r,t.backgroundBlurriness=e.backgroundBlurriness}}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}updateFog(e){const t=this.get(e),r=e.fog;if(r){if(t.fog!==r){let i=null;if(r.isFogExp2){const s=kn("color","color",r).setGroup(Dt),o=kn("density","float",r).setGroup(Dt);i=dAe(s,o)}else if(r.isFog){const s=kn("color","color",r).setGroup(Dt),o=kn("near","float",r).setGroup(Dt),a=kn("far","float",r).setGroup(Dt);i=uAe(s,o,a)}else console.error("WebGPUNodes: Unsupported fog configuration.",r);t.fogNode=i,t.fog=r}}else delete t.fogNode,delete t.fog}updateEnvironment(e){const t=this.get(e),r=e.environment;if(r){if(t.environment!==r){let i=null;r.isCubeTexture===!0?i=$g(r):r.isTexture===!0?i=qn(r):console.error("Nodes: Unsupported environment configuration.",r),t.environmentNode=i,t.environment=r}}else t.environmentNode&&(delete t.environmentNode,delete t.environment)}getNodeFrame(e=this.renderer,t=null,r=null,i=null,s=null){const o=this.nodeFrame;return o.renderer=e,o.scene=t,o.object=r,o.camera=i,o.material=s,o}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace}hasOutputChange(e){return OU.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const t=this.renderer,r=this.getOutputCacheKey(),i=qn(e,Gg).renderOutput(t.toneMapping,t.currentColorSpace);return OU.set(e,r),i}updateBefore(e){const t=e.getNodeBuilderState();for(const r of t.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(r)}updateAfter(e){const t=e.getNodeBuilderState();for(const r of t.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(r)}updateForCompute(e){const t=this.getNodeFrame(),r=this.getForCompute(e);for(const i of r.updateNodes)t.updateNode(i)}updateForRender(e){const t=this.getNodeFrameForRender(e),r=e.getNodeBuilderState();for(const i of r.updateNodes)t.updateNode(i)}needsRefresh(e){const t=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,t)}dispose(){super.dispose(),this.nodeFrame=new CU,this.nodeBuilderCache=new Map}}class sCe{constructor(e,t){this.scene=e,this.camera=t}clone(){return Object.assign(new this.constructor,this)}}class oCe{constructor(){this.lists=new sl}get(e,t){const r=this.lists,i=[e,t];let s=r.get(i);return s===void 0&&(s=new sCe(e,t),r.set(i,s)),s}dispose(){this.lists=new sl}}class v8{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map,this.colorSpaceNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let t=null;const r=this.getMaterialNodeClass(e.type);if(r!==null){t=new r;for(const i in e)t[i]=e[i]}return t}addColorSpace(e,t){this.addType(e,t,this.colorSpaceNodes)}getColorSpaceFunction(e){return this.colorSpaceNodes.get(e)||null}addToneMapping(e,t){this.addType(e,t,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,t){this.addType(e,t.name,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,t){this.addClass(e,t,this.lightNodes)}addType(e,t,r){if(r.has(t)){console.warn(`Redefinition of node ${t}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t=="function"||typeof t=="object")throw new Error(`Base class ${t} is not a class.`);r.set(t,e)}addClass(e,t,r){if(r.has(t)){console.warn(`Redefinition of node ${t.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t!="function")throw new Error(`Base class ${t.name} is not a class.`);r.set(t,e)}}const FU=new k6,vv=new Bt,eM=new tn,tM=new z6,_v=new Bn,Yh=new tn;class aCe{constructor(e,t={}){this.isRenderer=!0;const{logarithmicDepthBuffer:r=!1,alpha:i=!0,depth:s=!0,stencil:o=!1,antialias:a=!1,samples:l=0,getFallback:c=null}=t;this.domElement=e.getDomElement(),this.backend=e,this.samples=l||a===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=i,this.logarithmicDepthBuffer=r,this.outputColorSpace=ht,this.toneMapping=Gd,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=s,this.stencil=o,this.clippingPlanes=[],this.info=new SEe,this.nodes={library:new v8,modelViewMatrix:null,modelNormalViewMatrix:null},this._getFallback=c,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new tn(0,0,this._width,this._height),this._scissor=new tn(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new u8(new lr),this._quad.material.type="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const u=this.alpha===!0?0:1;this._clearColor=new P2(0,0,0,u),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:cxe},this.xr={enabled:!1},this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(h,d,f)=>{await this.compileAsync(h,d);const p=this._renderLists.get(h,d),g=this._renderContexts.get(h,d,this._renderTarget),y=h.overrideMaterial||f.material,m=this._objects.get(f,y,h,d,p.lightsNode,g),{fragmentShader:_,vertexShader:v}=m.getNodeBuilderState();return{fragmentShader:_,vertexShader:v}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,t)=>{let r=this.backend;try{await r.init(this)}catch(i){if(this._getFallback!==null)try{this.backend=r=this._getFallback(i),await r.init(this)}catch(s){t(s);return}else{t(i);return}}this._nodes=new iCe(this,r),this._animation=new hEe(this._nodes,this.info),this._attributes=new vEe(r),this._background=new nCe(this,this._nodes),this._geometries=new xEe(this._attributes,this.info),this._textures=new tCe(this,r,this.info),this._pipelines=new MEe(r,this._nodes),this._bindings=new EEe(r,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new mEe(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new YAe,this._bundles=new oCe,this._renderContexts=new JAe,this._initialized=!0,e()}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,t,r=null){this._initialized===!1&&await this.init();const i=this._nodes.nodeFrame,s=i.renderId,o=this._currentRenderContext,a=this._currentRenderObjectFunction,l=this._compilationPromises,c=e.isScene===!0?e:FU;r===null&&(r=e);const u=this._renderTarget,h=this._renderContexts.get(r,t,u),d=this._activeMipmapLevel,f=[];this._currentRenderContext=h,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=f,i.renderId++,i.update(),h.depth=this.depth,h.stencil=this.stencil,h.clippingContext||(h.clippingContext=new qC),h.clippingContext.updateGlobal(this,t),c.onBeforeRender(this,e,t,u);const p=this._renderLists.get(e,t);if(p.begin(),this._projectObject(e,t,0,p),r!==e&&r.traverseVisible(function(_){_.isLight&&_.layers.test(t.layers)&&p.pushLight(_)}),p.finish(),u!==null){this._textures.updateRenderTarget(u,d);const _=this._textures.get(u);h.textures=_.textures,h.depthTexture=_.depthTexture}else h.textures=null,h.depthTexture=null;this._nodes.updateScene(c),this._background.update(c,p,h);const g=p.opaque,y=p.transparent,m=p.lightsNode;this.opaque===!0&&g.length>0&&this._renderObjects(g,t,c,m),this.transparent===!0&&y.length>0&&this._renderObjects(y,t,c,m),i.renderId=s,this._currentRenderContext=o,this._currentRenderObjectFunction=a,this._compilationPromises=l,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(f)}async renderAsync(e,t){this._initialized===!1&&await this.init();const r=this._renderScene(e,t);await this.backend.resolveTimestampAsync(r,"render")}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}_renderBundle(e,t,r){const{bundleGroup:i,camera:s,renderList:o}=e,a=this._currentRenderContext,l=this._bundles.get(i,s),c=this.backend.get(l);c.renderContexts===void 0&&(c.renderContexts=new Set);const u=i.version!==c.version,h=c.renderContexts.has(a)===!1||u;if(c.renderContexts.add(a),h){this.backend.beginBundle(a),(c.renderObjects===void 0||u)&&(c.renderObjects=[]),this._currentRenderBundle=l;const d=o.opaque;d.length>0&&this._renderObjects(d,s,t,r),this._currentRenderBundle=null,this.backend.finishBundle(a,l),c.version=i.version}else{const{renderObjects:d}=c;for(let f=0,p=d.length;f<p;f++){const g=d[f];this._nodes.needsRefresh(g)&&(this._nodes.updateBefore(g),this._nodes.updateForRender(g),this._bindings.updateForRender(g),this._nodes.updateAfter(g))}}this.backend.addBundle(a,l)}render(e,t){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,t);this._renderScene(e,t)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:t}=this;if(e!==Gd===!1&&t!==Ls===!1)return null;const{width:s,height:o}=this.getDrawingBufferSize(vv),{depth:a,stencil:l}=this;let c=this._frameBufferTarget;return c===null&&(c=new ap(s,o,{depthBuffer:a,stencilBuffer:l,type:qa,format:sp,colorSpace:Ls,generateMipmaps:!1,minFilter:Fi,magFilter:Fi,samples:this.samples}),c.isPostProcessingRenderTarget=!0,this._frameBufferTarget=c),c.depthBuffer=a,c.stencilBuffer=l,c.setSize(s,o),c.viewport.copy(this._viewport),c.scissor.copy(this._scissor),c.viewport.multiplyScalar(this._pixelRatio),c.scissor.multiplyScalar(this._pixelRatio),c.scissorTest=this._scissorTest,c}_renderScene(e,t,r=!0){const i=r?this._getFrameBufferTarget():null,s=this._nodes.nodeFrame,o=s.renderId,a=this._currentRenderContext,l=this._currentRenderObjectFunction,c=e.isScene===!0?e:FU,u=this._renderTarget,h=this._activeCubeFace,d=this._activeMipmapLevel;let f;i!==null?(f=i,this.setRenderTarget(f)):f=u;const p=this._renderContexts.get(e,t,f);this._currentRenderContext=p,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,s.renderId=this.info.calls;const g=this.coordinateSystem;t.coordinateSystem!==g&&(t.coordinateSystem=g,t.updateProjectionMatrix()),e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.matrixWorldAutoUpdate===!0&&t.updateMatrixWorld();let y=this._viewport,m=this._scissor,_=this._pixelRatio;f!==null&&(y=f.viewport,m=f.scissor,_=1),this.getDrawingBufferSize(vv),eM.set(0,0,vv.width,vv.height);const v=y.minDepth===void 0?0:y.minDepth,x=y.maxDepth===void 0?1:y.maxDepth;p.viewportValue.copy(y).multiplyScalar(_).floor(),p.viewportValue.width>>=d,p.viewportValue.height>>=d,p.viewportValue.minDepth=v,p.viewportValue.maxDepth=x,p.viewport=p.viewportValue.equals(eM)===!1,p.scissorValue.copy(m).multiplyScalar(_).floor(),p.scissor=this._scissorTest&&p.scissorValue.equals(eM)===!1,p.scissorValue.width>>=d,p.scissorValue.height>>=d,p.clippingContext||(p.clippingContext=new qC),p.clippingContext.updateGlobal(this,t),c.onBeforeRender(this,e,t,f),_v.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),tM.setFromProjectionMatrix(_v,g);const b=this._renderLists.get(e,t);if(b.begin(),this._projectObject(e,t,0,b),b.finish(),this.sortObjects===!0&&b.sort(this._opaqueSort,this._transparentSort),f!==null){this._textures.updateRenderTarget(f,d);const S=this._textures.get(f);p.textures=S.textures,p.depthTexture=S.depthTexture,p.width=S.width,p.height=S.height,p.renderTarget=f,p.depth=f.depthBuffer,p.stencil=f.stencilBuffer}else p.textures=null,p.depthTexture=null,p.width=this.domElement.width,p.height=this.domElement.height,p.depth=this.depth,p.stencil=this.stencil;p.width>>=d,p.height>>=d,p.activeCubeFace=h,p.activeMipmapLevel=d,p.occlusionQueryCount=b.occlusionQueryCount,this._nodes.updateScene(c),this._background.update(c,b,p),this.backend.beginRender(p);const{bundles:T,lightsNode:w,transparent:M,opaque:C}=b;if(T.length>0&&this._renderBundles(T,c,w),this.opaque===!0&&C.length>0&&this._renderObjects(C,t,c,w),this.transparent===!0&&M.length>0&&this._renderObjects(M,t,c,w),this.backend.finishRender(p),s.renderId=o,this._currentRenderContext=a,this._currentRenderObjectFunction=l,i!==null){this.setRenderTarget(u,h,d);const S=this._quad;this._nodes.hasOutputChange(f.texture)&&(S.material.fragmentNode=this._nodes.getOutputNode(f.texture),S.material.needsUpdate=!0),this._renderScene(S,S.camera,!1)}return c.onAfterRender(this,e,t,f),p}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio=e,this.setSize(this._width,this._height,!1)}setDrawingBufferSize(e,t,r){this._width=e,this._height=t,this._pixelRatio=r,this.domElement.width=Math.floor(e*r),this.domElement.height=Math.floor(t*r),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize()}setSize(e,t,r=!0){this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),r===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize()}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}setScissor(e,t,r,i){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,t,r,i)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,t,r,i,s=0,o=1){const a=this._viewport;e.isVector4?a.copy(e):a.set(e,t,r,i),a.minDepth=s,a.maxDepth=o}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,t=1){this._clearColor.set(e),this._clearColor.a=t}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const t=this._currentRenderContext;return t&&this.backend.isOccluded(t,e)}clear(e=!0,t=!0,r=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,t,r);const i=this._renderTarget||this._getFrameBufferTarget();let s=null;if(i!==null&&(this._textures.updateRenderTarget(i),s=this._textures.get(i)),this.backend.clear(e,t,r,s),i!==null&&this._renderTarget===null){const o=this._quad;this._nodes.hasOutputChange(i.texture)&&(o.material.fragmentNode=this._nodes.getOutputNode(i.texture),o.material.needsUpdate=!0),this._renderScene(o,o.camera,!1)}}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,t=!0,r=!0){this._initialized===!1&&await this.init(),this.clear(e,t,r)}clearColorAsync(){return this.clearAsync(!0,!1,!1)}clearDepthAsync(){return this.clearAsync(!1,!0,!1)}clearStencilAsync(){return this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this._renderTarget!==null?Gd:this.toneMapping}get currentColorSpace(){return this._renderTarget!==null?Ls:this.outputColorSpace}dispose(){this.info.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,t=0,r=0){this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=r}getRenderTarget(){return this._renderTarget}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}async computeAsync(e){this._initialized===!1&&await this.init();const t=this._nodes.nodeFrame,r=t.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,t.renderId=this.info.calls;const i=this.backend,s=this._pipelines,o=this._bindings,a=this._nodes,l=Array.isArray(e)?e:[e];if(l[0]===void 0||l[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");i.beginCompute(e);for(const c of l){if(s.has(c)===!1){const d=()=>{c.removeEventListener("dispose",d),s.delete(c),o.delete(c),a.delete(c)};c.addEventListener("dispose",d),c.onInit({renderer:this})}a.updateForCompute(c),o.updateForCompute(c);const u=o.getForCompute(c),h=s.getForCompute(c,u);i.compute(e,c,u,h)}i.finishCompute(e),await this.backend.resolveTimestampAsync(e,"compute"),t.renderId=r}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}copyFramebufferToTexture(e,t=null){const r=this._currentRenderContext;this._textures.updateTexture(e),t=t===null?Yh.set(0,0,e.image.width,e.image.height):t,this.backend.copyFramebufferToTexture(e,r,t)}copyTextureToTexture(e,t,r=null,i=null,s=0){this._textures.updateTexture(e),this._textures.updateTexture(t),this.backend.copyTextureToTexture(e,t,r,i,s)}readRenderTargetPixelsAsync(e,t,r,i,s,o=0,a=0){return this.backend.copyTextureToBuffer(e.textures[o],t,r,i,s,a)}_projectObject(e,t,r,i){if(e.visible===!1)return;if(e.layers.test(t.layers)){if(e.isGroup)r=e.renderOrder;else if(e.isLOD)e.autoUpdate===!0&&e.update(t);else if(e.isLight)i.pushLight(e);else if(e.isSprite){if(!e.frustumCulled||tM.intersectsSprite(e)){this.sortObjects===!0&&Yh.setFromMatrixPosition(e.matrixWorld).applyMatrix4(_v);const{geometry:a,material:l}=e;l.visible&&i.push(e,a,l,r,Yh.z,null)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||tM.intersectsObject(e))){const{geometry:a,material:l}=e;if(this.sortObjects===!0&&(a.boundingSphere===null&&a.computeBoundingSphere(),Yh.copy(a.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(_v)),Array.isArray(l)){const c=a.groups;for(let u=0,h=c.length;u<h;u++){const d=c[u],f=l[d.materialIndex];f&&f.visible&&i.push(e,a,f,r,Yh.z,d)}}else l.visible&&i.push(e,a,l,r,Yh.z,null)}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const a=i;i=this._renderLists.get(e,t),i.begin(),a.pushBundle({bundleGroup:e,camera:t,renderList:i}),i.finish()}const o=e.children;for(let a=0,l=o.length;a<l;a++)this._projectObject(o[a],t,r,i)}_renderBundles(e,t,r){for(const i of e)this._renderBundle(i,t,r)}_renderObjects(e,t,r,i){for(let s=0,o=e.length;s<o;s++){const a=e[s],{object:l,geometry:c,material:u,group:h}=a;if(t.isArrayCamera){const d=t.cameras;for(let f=0,p=d.length;f<p;f++){const g=d[f];if(l.layers.test(g.layers)){const y=g.viewport,m=y.minDepth===void 0?0:y.minDepth,_=y.maxDepth===void 0?1:y.maxDepth,v=this._currentRenderContext.viewportValue;v.copy(y).multiplyScalar(this._pixelRatio).floor(),v.minDepth=m,v.maxDepth=_,this.backend.updateViewport(this._currentRenderContext),this._currentRenderObjectFunction(l,r,g,c,u,h,i)}}}else this._currentRenderObjectFunction(l,r,t,c,u,h,i)}}renderObject(e,t,r,i,s,o,a){let l,c,u;if(e.onBeforeRender(this,t,r,i,s,o),t.overrideMaterial!==null){const h=t.overrideMaterial;s.positionNode&&s.positionNode.isNode&&(l=h.positionNode,h.positionNode=s.positionNode),h.isShadowNodeMaterial&&(h.side=s.shadowSide===null?s.side:s.shadowSide,s.depthNode&&s.depthNode.isNode&&(u=h.depthNode,h.depthNode=s.depthNode),s.shadowNode&&s.shadowNode.isNode&&(c=h.fragmentNode,h.fragmentNode=s.shadowNode),this.localClippingEnabled&&(s.clipShadows?(h.clippingPlanes!==s.clippingPlanes&&(h.clippingPlanes=s.clippingPlanes,h.needsUpdate=!0),h.clipIntersection!==s.clipIntersection&&(h.clipIntersection=s.clipIntersection)):Array.isArray(h.clippingPlanes)&&(h.clippingPlanes=null,h.needsUpdate=!0))),s=h}s.transparent===!0&&s.side===Nx&&s.forceSinglePass===!1?(s.side=cl,this._handleObjectFunction(e,s,t,r,a,o,"backSide"),s.side=Og,this._handleObjectFunction(e,s,t,r,a,o),s.side=Nx):this._handleObjectFunction(e,s,t,r,a,o),l!==void 0&&(t.overrideMaterial.positionNode=l),u!==void 0&&(t.overrideMaterial.depthNode=u),c!==void 0&&(t.overrideMaterial.fragmentNode=c),e.onAfterRender(this,t,r,i,s,o)}_renderObjectDirect(e,t,r,i,s,o,a){const l=this._objects.get(e,t,r,i,s,this._currentRenderContext,a);l.drawRange=e.geometry.drawRange,l.group=o;const c=this._nodes.needsRefresh(l);c&&(this._nodes.updateBefore(l),this._geometries.updateForRender(l),this._nodes.updateForRender(l),this._bindings.updateForRender(l)),this._pipelines.updateForRender(l),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(l),l.bundle=this._currentRenderBundle.scene),this.backend.draw(l,this.info),c&&this._nodes.updateAfter(l)}_createObjectPipeline(e,t,r,i,s,o){const a=this._objects.get(e,t,r,i,s,this._currentRenderContext,o);this._nodes.updateBefore(a),this._geometries.updateForRender(a),this._nodes.updateForRender(a),this._bindings.updateForRender(a),this._pipelines.getForRender(a,this._compilationPromises),this._nodes.updateAfter(a)}get compute(){return this.computeAsync}get compile(){return this.compileAsync}}class I2{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function lCe(n){return n+(jl-n%jl)%jl}let _8=class extends I2{constructor(e,t=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=t}get byteLength(){return lCe(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}};class x8 extends _8{constructor(e,t=null){super(e,t),this.isUniformBuffer=!0}}let cCe=0;class S8 extends x8{constructor(e,t){super("UniformBuffer_"+cCe++,e?e.value:null),this.nodeUniform=e,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class uCe extends x8{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const t=this.byteLength;e=new Float32Array(new ArrayBuffer(t)),this._buffer=e}return e}get byteLength(){let e=0;for(let t=0,r=this.uniforms.length;t<r;t++){const i=this.uniforms[t],{boundary:s,itemSize:o}=i,a=e%jl,l=jl-a;a!==0&&l-s<0?e+=jl-a:a%s!==0&&(e+=a%s),i.offset=e/this.bytesPerElement,e+=o*this.bytesPerElement}return Math.ceil(e/jl)*jl}update(){let e=!1;for(const t of this.uniforms)this.updateByType(t)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset;if(r[s]!==i){const o=this.buffer;o[s]=r[s]=i,t=!0}return t}updateVector2(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset;if(r[s+0]!==i.x||r[s+1]!==i.y){const o=this.buffer;o[s+0]=r[s+0]=i.x,o[s+1]=r[s+1]=i.y,t=!0}return t}updateVector3(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset;if(r[s+0]!==i.x||r[s+1]!==i.y||r[s+2]!==i.z){const o=this.buffer;o[s+0]=r[s+0]=i.x,o[s+1]=r[s+1]=i.y,o[s+2]=r[s+2]=i.z,t=!0}return t}updateVector4(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset;if(r[s+0]!==i.x||r[s+1]!==i.y||r[s+2]!==i.z||r[s+4]!==i.w){const o=this.buffer;o[s+0]=r[s+0]=i.x,o[s+1]=r[s+1]=i.y,o[s+2]=r[s+2]=i.z,o[s+3]=r[s+3]=i.w,t=!0}return t}updateColor(e){let t=!1;const r=this.values,i=e.getValue(),s=e.offset;if(r[s+0]!==i.r||r[s+1]!==i.g||r[s+2]!==i.b){const o=this.buffer;o[s+0]=r[s+0]=i.r,o[s+1]=r[s+1]=i.g,o[s+2]=r[s+2]=i.b,t=!0}return t}updateMatrix3(e){let t=!1;const r=this.values,i=e.getValue().elements,s=e.offset;if(r[s+0]!==i[0]||r[s+1]!==i[1]||r[s+2]!==i[2]||r[s+4]!==i[3]||r[s+5]!==i[4]||r[s+6]!==i[5]||r[s+8]!==i[6]||r[s+9]!==i[7]||r[s+10]!==i[8]){const o=this.buffer;o[s+0]=r[s+0]=i[0],o[s+1]=r[s+1]=i[1],o[s+2]=r[s+2]=i[2],o[s+4]=r[s+4]=i[3],o[s+5]=r[s+5]=i[4],o[s+6]=r[s+6]=i[5],o[s+8]=r[s+8]=i[6],o[s+9]=r[s+9]=i[7],o[s+10]=r[s+10]=i[8],t=!0}return t}updateMatrix4(e){let t=!1;const r=this.values,i=e.getValue().elements,s=e.offset;return dCe(r,i,s)===!1&&(this.buffer.set(i,s),hCe(r,i,s),t=!0),t}}function hCe(n,e,t){for(let r=0,i=e.length;r<i;r++)n[t+r]=e[r]}function dCe(n,e,t){for(let r=0,i=e.length;r<i;r++)if(n[t+r]!==e[r])return!1;return!0}let fCe=0;class b8 extends uCe{constructor(e,t){super(e),this.id=fCe++,this.groupNode=t,this.isNodeUniformsGroup=!0}getNodes(){const e=[];for(const t of this.uniforms){const r=t.nodeUniform.node;if(!r)throw new Error("NodeUniformsGroup: Uniform has no node.");e.push(r)}return e}}let pCe=0;class mCe extends I2{constructor(e,t){super(e),this.id=pCe++,this.texture=t,this.version=t?t.version:0,this.store=!1,this.generation=null,this.isSampledTexture=!0}needsBindingsUpdate(e){const{texture:t}=this;return e!==this.generation?(this.generation=e,!0):t.isVideoTexture}update(){const{texture:e,version:t}=this;return t!==e.version?(this.version=e.version,!0):!1}}class a1 extends mCe{constructor(e,t,r,i=null){super(e,t?t.value:null),this.textureNode=t,this.groupNode=r,this.access=i}needsBindingsUpdate(e){return this.textureNode.value!==this.texture||super.needsBindingsUpdate(e)}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class w8 extends a1{constructor(e,t,r,i){super(e,t,r,i),this.isSampledCubeTexture=!0}}class T8 extends a1{constructor(e,t,r,i){super(e,t,r,i),this.isSampledTexture3D=!0}}const gCe={atan2:"atan",textureDimensions:"textureSize",equals:"equal"},yCe={low:"lowp",medium:"mediump",high:"highp"},kU={swizzleAssign:!0,storageBuffer:!1},UU=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
`;class vCe extends c8{constructor(e,t){super(e,t,new jAe),this.uniformGroups={},this.transforms=[],this.extensions={},this.useComparisonMethod=!0}needsColorSpaceToLinearSRGB(e){return e.isVideoTexture===!0&&e.colorSpace!==Hu}getMethod(e){return gCe[e]||e}getOutputStructName(){return""}buildFunctionCode(e){const t=e.layout,r=this.flowShaderNode(e),i=[];for(const o of t.inputs)i.push(this.getType(o.type)+" "+o.name);return`${this.getType(t.type)} ${t.name}( ${i.join(", ")} ) {

	${r.vars}

${r.code}
	return ${r.result};

}`}setupPBO(e){const t=e.value;if(t.pbo===void 0){const r=t.array,i=t.count*t.itemSize,{itemSize:s}=t,o=t.array.constructor.name.toLowerCase().includes("int");let a=o?XP:qP;s===2?a=o?KP:Fg:s===3?a=o?Mxe:jP:s===4&&(a=o?YP:sp);const l={Float32Array:is,Uint8Array:za,Uint16Array:xd,Uint32Array:Dr,Int8Array:Km,Int16Array:Ym,Int32Array:ci,Uint8ClampedArray:za},c=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(i/s))));let u=Math.ceil(i/s/c);c*u*s<i&&u++;const h=c*u*s,d=new r.constructor(h);d.set(r,0),t.array=d;const f=new LSe(t.array,c,u,a,l[t.array.constructor.name]||is);f.needsUpdate=!0,f.isPBOTexture=!0;const p=new Ny(f,null,null);p.setPrecision("high"),t.pboNode=p,t.pbo=p.value,this.getUniformFromNode(t.pboNode,"texture",this.shaderStage,this.context.label)}}getPropertyName(e,t=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?t.charAt(0)+"_"+e.name:super.getPropertyName(e,t)}generatePBO(e){const{node:t,indexNode:r}=e,i=t.value;if(this.renderer.backend.has(i)){const u=this.renderer.backend.get(i);u.pbo=i.pbo}const s=this.getUniformFromNode(i.pboNode,"texture",this.shaderStage,this.context.label),o=this.getPropertyName(s);this.increaseUsage(r);const a=r.build(this,"uint"),l=this.getDataFromNode(e);let c=l.propertyName;if(c===void 0){const u=this.getVarFromNode(e);c=this.getPropertyName(u);const h=this.getDataFromNode(t);let d=h.propertySizeName;d===void 0&&(d=c+"Size",this.getVarFromNode(t,d,"uint"),this.addLineFlowCode(`${d} = uint( textureSize( ${o}, 0 ).x )`,e),h.propertySizeName=d);const{itemSize:f}=i,p="."+lp.join("").slice(0,f),g=`ivec2(${a} % ${d}, ${a} / ${d})`,y=this.generateTextureLoad(null,o,g,null,"0");let m="vec4";i.pbo.type===Dr?m="uvec4":i.pbo.type===ci&&(m="ivec4"),this.addLineFlowCode(`${c} = ${m}(${y})${p}`,e),l.propertyName=c}return c}generateTextureLoad(e,t,r,i,s="0"){return i?`texelFetch( ${t}, ivec3( ${r}, ${i} ), ${s} )`:`texelFetch( ${t}, ${r}, ${s} )`}generateTexture(e,t,r,i){return e.isDepthTexture?`texture( ${t}, ${r} ).x`:(i&&(r=`vec3( ${r}, ${i} )`),`texture( ${t}, ${r} )`)}generateTextureLevel(e,t,r,i){return`textureLod( ${t}, ${r}, ${i} )`}generateTextureBias(e,t,r,i){return`texture( ${t}, ${r}, ${i} )`}generateTextureGrad(e,t,r,i){return`textureGrad( ${t}, ${r}, ${i[0]}, ${i[1]} )`}generateTextureCompare(e,t,r,i,s,o=this.shaderStage){if(o==="fragment")return`texture( ${t}, vec3( ${r}, ${i} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}getVars(e){const t=[],r=this.vars[e];if(r!==void 0)for(const i of r)t.push(`${this.getVar(i.type,i.name)};`);return t.join(`
	`)}getUniforms(e){const t=this.uniforms[e],r=[],i={};for(const o of t){let a=null,l=!1;if(o.type==="texture"){const u=o.node.value;let h="";u.isDataTexture===!0&&(u.type===Dr?h="u":u.type===ci&&(h="i")),u.compareFunction?a=`sampler2DShadow ${o.name};`:u.isDataArrayTexture===!0||u.isCompressedArrayTexture===!0?a=`${h}sampler2DArray ${o.name};`:a=`${h}sampler2D ${o.name};`}else if(o.type==="cubeTexture")a=`samplerCube ${o.name};`;else if(o.type==="texture3D")a=`sampler3D ${o.name};`;else if(o.type==="buffer"){const u=o.node,h=this.getType(u.bufferType),d=u.bufferCount,f=d>0?d:"";a=`${u.name} {
	${h} ${o.name}[${f}];
};
`}else a=`${this.getVectorType(o.type)} ${this.getPropertyName(o,e)};`,l=!0;const c=o.node.precision;if(c!==null&&(a=yCe[c]+" "+a),l){a="	"+a;const u=o.groupNode.name;(i[u]||(i[u]=[])).push(a)}else a="uniform "+a,r.push(a)}let s="";for(const o in i){const a=i[o];s+=this._getGLSLUniformStruct(e+"_"+o,a.join(`
`))+`
`}return s+=r.join(`
`),s}getTypeFromAttribute(e){let t=super.getTypeFromAttribute(e);if(/^[iu]/.test(t)&&e.gpuType!==ci){let r=e;e.isInterleavedBufferAttribute&&(r=e.data);const i=r.array;i instanceof Uint32Array||i instanceof Int32Array||(t=t.slice(1))}return t}getAttributes(e){let t="";if(e==="vertex"||e==="compute"){const r=this.getAttributesArray();let i=0;for(const s of r)t+=`layout( location = ${i++} ) in ${s.type} ${s.name};
`}return t}getStructMembers(e){const t=[],r=e.getMemberTypes();for(let i=0;i<r.length;i++){const s=r[i];t.push(`layout( location = ${i} ) out ${s} m${i};`)}return t.join(`
`)}getStructs(e){const t=[],r=this.structs[e];if(r.length===0)return`layout( location = 0 ) out vec4 fragColor;
`;for(let i=0,s=r.length;i<s;i++){const o=r[i];let a=`
`;a+=this.getStructMembers(o),a+=`
`,t.push(a)}return t.join(`

`)}getVaryings(e){let t="";const r=this.varyings;if(e==="vertex"||e==="compute")for(const i of r){e==="compute"&&(i.needsInterpolation=!0);const s=i.type,o=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${o}${i.needsInterpolation?"out":"/*out*/"} ${s} ${i.name};
`}else if(e==="fragment"){for(const i of r)if(i.needsInterpolation){const s=i.type,o=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${o}in ${s} ${i.name};
`}}return t}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((r,i)=>r*i,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,t,r=this.shaderStage){const i=this.extensions[r]||(this.extensions[r]=new Map);i.has(e)===!1&&i.set(e,{name:e,behavior:t})}getExtensions(e){const t=[];if(e==="vertex"){const i=this.renderer.backend.extensions;this.object.isBatchedMesh&&i.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const r=this.extensions[e];if(r!==void 0)for(const{name:i,behavior:s}of r.values())t.push(`#extension ${i} : ${s}`);return t.join(`
`)}isAvailable(e){let t=kU[e];if(t===void 0){if(e==="float32Filterable"){const r=this.renderer.backend.extensions;r.has("OES_texture_float_linear")?(r.get("OES_texture_float_linear"),t=!0):t=!1}kU[e]=t}return t}isFlipY(){return!0}registerTransform(e,t){this.transforms.push({varyingName:e,attributeNode:t})}getTransforms(){const e=this.transforms;let t="";for(let r=0;r<e.length;r++){const i=e[r],s=this.getPropertyName(i.attributeNode);t+=`${i.varyingName} = ${s};
	`}return t}_getGLSLUniformStruct(e,t){return`
layout( std140 ) uniform ${e} {
${t}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions 
${e.extensions}

// precision
${UU}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// precision
${UU}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){let r=`// code

`;r+=this.flowCode[t];const i=this.flowNodes[t],s=i[i.length-1];for(const a of i){const l=this.getFlowData(a),c=a.name;c&&(r.length>0&&(r+=`
`),r+=`	// flow -> ${c}
	`),r+=`${l.code}
	`,a===s&&t!=="compute"&&(r+=`// result
	`,t==="vertex"?(r+="gl_Position = ",r+=`${l.result};`):t==="fragment"&&(a.outputNode.isOutputStructNode||(r+="fragColor = ",r+=`${l.result};`)))}const o=e[t];o.extensions=this.getExtensions(t),o.uniforms=this.getUniforms(t),o.attributes=this.getAttributes(t),o.varyings=this.getVaryings(t),o.vars=this.getVars(t),o.structs=this.getStructs(t),o.codes=this.getCodes(t),o.transforms=this.getTransforms(t),o.flow=r}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,t,r,i=null){const s=super.getUniformFromNode(e,t,r,i),o=this.getDataFromNode(e,r,this.globalCache);let a=o.uniformGPU;if(a===void 0){const l=e.groupNode,c=l.name,u=this.getBindGroupArray(c,r);if(t==="texture")a=new a1(s.name,s.node,l),u.push(a);else if(t==="cubeTexture")a=new w8(s.name,s.node,l),u.push(a);else if(t==="texture3D")a=new T8(s.name,s.node,l),u.push(a);else if(t==="buffer"){e.name=`NodeBuffer_${e.id}`,s.name=`buffer${e.id}`;const h=new S8(e,l);h.name=e.name,u.push(h),a=h}else{const h=this.uniformGroups[r]||(this.uniformGroups[r]={});let d=h[c];d===void 0&&(d=new b8(r+"_"+c,l),h[c]=d,u.push(d)),a=this.getNodeUniform(s,t),d.addUniform(a)}o.uniformGPU=a}return s}}let nM=null,rM=null,Qh=null;class M8{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null}async init(e){this.renderer=e}begin(){}finish(){}draw(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}createRenderPipeline(){}createComputePipeline(){}destroyPipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}createDefaultTexture(){}createTexture(){}copyTextureToBuffer(){}createAttribute(){}createIndexAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}resolveTimestampAsync(){}hasFeatureAsync(){}hasFeature(){}getInstanceCount(e){const{object:t,geometry:r}=e;return r.isInstancedBufferGeometry?r.instanceCount:t.count>1?t.count:1}getDrawingBufferSize(){return nM=nM||new Bt,this.renderer.getDrawingBufferSize(nM)}getScissor(){return rM=rM||new tn,this.renderer.getScissor(rM)}setScissorTest(){}getClearColor(){const e=this.renderer;return Qh=Qh||new P2,e.getClearColor(Qh),Qh.getRGB(Qh,this.renderer.currentColorSpace),Qh}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:aSe(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Gb} webgpu`),this.domElement=e),e}set(e,t){this.data.set(e,t)}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}}let _Ce=0;class xCe{constructor(e,t){this.buffers=[e.bufferGPU,t],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class SCe{constructor(e){this.backend=e}createAttribute(e,t){const r=this.backend,{gl:i}=r,s=e.array,o=e.usage||i.STATIC_DRAW,a=e.isInterleavedBufferAttribute?e.data:e,l=r.get(a);let c=l.bufferGPU;c===void 0&&(c=this._createBuffer(i,t,s,o),l.bufferGPU=c,l.bufferType=t,l.version=a.version);let u;if(s instanceof Float32Array)u=i.FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?u=i.HALF_FLOAT:u=i.UNSIGNED_SHORT;else if(s instanceof Int16Array)u=i.SHORT;else if(s instanceof Uint32Array)u=i.UNSIGNED_INT;else if(s instanceof Int32Array)u=i.INT;else if(s instanceof Int8Array)u=i.BYTE;else if(s instanceof Uint8Array)u=i.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)u=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);let h={bufferGPU:c,bufferType:t,type:u,byteLength:s.byteLength,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:u===i.INT||u===i.UNSIGNED_INT||e.gpuType===ci,id:_Ce++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const d=this._createBuffer(i,t,s,o);h=new xCe(h,d)}r.set(e,h)}updateAttribute(e){const t=this.backend,{gl:r}=t,i=e.array,s=e.isInterleavedBufferAttribute?e.data:e,o=t.get(s),a=o.bufferType,l=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(r.bindBuffer(a,o.bufferGPU),l.length===0)r.bufferSubData(a,0,i);else{for(let c=0,u=l.length;c<u;c++){const h=l[c];r.bufferSubData(a,h.start*i.BYTES_PER_ELEMENT,i,h.start,h.count)}s.clearUpdateRanges()}r.bindBuffer(a,null),o.version=s.version}destroyAttribute(e){const t=this.backend,{gl:r}=t;e.isInterleavedBufferAttribute&&t.delete(e.data);const i=t.get(e);r.deleteBuffer(i.bufferGPU),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,{gl:r}=t,i=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:s}=t.get(i),o=e.array,a=o.byteLength;r.bindBuffer(r.COPY_READ_BUFFER,s);const l=r.createBuffer();r.bindBuffer(r.COPY_WRITE_BUFFER,l),r.bufferData(r.COPY_WRITE_BUFFER,a,r.STREAM_READ),r.copyBufferSubData(r.COPY_READ_BUFFER,r.COPY_WRITE_BUFFER,0,0,a),await t.utils._clientWaitAsync();const c=new e.array.constructor(o.length);return r.bindBuffer(r.COPY_WRITE_BUFFER,l),r.getBufferSubData(r.COPY_WRITE_BUFFER,0,c),r.deleteBuffer(l),r.bindBuffer(r.COPY_READ_BUFFER,null),r.bindBuffer(r.COPY_WRITE_BUFFER,null),c.buffer}_createBuffer(e,t,r,i){const s=e.createBuffer();return e.bindBuffer(t,s),e.bufferData(t,r,i),e.bindBuffer(t,null),s}}let BU=!1,iM,lm;class bCe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},BU===!1&&(this._init(this.gl),BU=!0)}_init(e){iM={[Hl]:e.FUNC_ADD,[t6]:e.FUNC_SUBTRACT,[n6]:e.FUNC_REVERSE_SUBTRACT},lm={[r6]:e.ZERO,[i6]:e.ONE,[s6]:e.SRC_COLOR,[Dx]:e.SRC_ALPHA,[h6]:e.SRC_ALPHA_SATURATE,[c6]:e.DST_COLOR,[a6]:e.DST_ALPHA,[o6]:e.ONE_MINUS_SRC_COLOR,[Ox]:e.ONE_MINUS_SRC_ALPHA,[u6]:e.ONE_MINUS_DST_COLOR,[l6]:e.ONE_MINUS_DST_ALPHA}}enable(e){const{enabled:t}=this;t[e]!==!0&&(this.gl.enable(e),t[e]=!0)}disable(e){const{enabled:t}=this;t[e]!==!1&&(this.gl.disable(e),t[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:t}=this;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:t}=this;e!==oxe?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(e===axe?t.cullFace(t.BACK):e===lxe?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:t,gl:r}=this;e!==t&&(r.lineWidth(e),this.currentLineWidth=e)}setBlending(e,t,r,i,s,o,a,l){const{gl:c}=this;if(e===kf){this.currentBlendingEnabled===!0&&(this.disable(c.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(c.BLEND),this.currentBlendingEnabled=!0),e!==e6){if(e!==this.currentBlending||l!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==Hl||this.currentBlendEquationAlpha!==Hl)&&(c.blendEquation(c.FUNC_ADD),this.currentBlendEquation=Hl,this.currentBlendEquationAlpha=Hl),l)switch(e){case dc:c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case Px:c.blendFunc(c.ONE,c.ONE);break;case Ix:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case Lx:c.blendFuncSeparate(c.ZERO,c.SRC_COLOR,c.ZERO,c.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case dc:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case Px:c.blendFunc(c.SRC_ALPHA,c.ONE);break;case Ix:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case Lx:c.blendFunc(c.ZERO,c.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=l}return}s=s||t,o=o||r,a=a||i,(t!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(c.blendEquationSeparate(iM[t],iM[s]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=s),(r!==this.currentBlendSrc||i!==this.currentBlendDst||o!==this.currentBlendSrcAlpha||a!==this.currentBlendDstAlpha)&&(c.blendFuncSeparate(lm[r],lm[i],lm[o],lm[a]),this.currentBlendSrc=r,this.currentBlendDst=i,this.currentBlendSrcAlpha=o,this.currentBlendDstAlpha=a),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:t}=this;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:t}=this;switch(e){case d6:t.depthFunc(t.NEVER);break;case f6:t.depthFunc(t.ALWAYS);break;case p6:t.depthFunc(t.LESS);break;case Fx:t.depthFunc(t.LEQUAL);break;case m6:t.depthFunc(t.EQUAL);break;case g6:t.depthFunc(t.GEQUAL);break;case y6:t.depthFunc(t.GREATER);break;case v6:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}this.currentDepthFunc=e}}setStencilTest(e){const{gl:t}=this;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,t,r){(this.currentStencilFunc!==e||this.currentStencilRef!==t||this.currentStencilFuncMask!==r)&&(this.gl.stencilFunc(e,t,r),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=r)}setStencilOp(e,t,r){(this.currentStencilFail!==e||this.currentStencilZFail!==t||this.currentStencilZPass!==r)&&(this.gl.stencilOp(e,t,r),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=r)}setMaterial(e,t){const{gl:r}=this;e.side===Nx?this.disable(r.CULL_FACE):this.enable(r.CULL_FACE);let i=e.side===cl;t&&(i=!i),this.setFlipSided(i),e.blending===dc&&e.transparent===!1?this.setBlending(kf):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const s=e.stencilWrite;this.setStencilTest(s),s&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(r.SAMPLE_ALPHA_TO_COVERAGE):this.disable(r.SAMPLE_ALPHA_TO_COVERAGE)}setPolygonOffset(e,t,r){const{gl:i}=this;e?(this.enable(i.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==t||this.currentPolygonOffsetUnits!==r)&&(i.polygonOffset(t,r),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=r)):this.disable(i.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}bindFramebuffer(e,t){const{gl:r,currentBoundFramebuffers:i}=this;return i[e]!==t?(r.bindFramebuffer(e,t),i[e]=t,e===r.DRAW_FRAMEBUFFER&&(i[r.FRAMEBUFFER]=t),e===r.FRAMEBUFFER&&(i[r.DRAW_FRAMEBUFFER]=t),!0):!1}drawBuffers(e,t){const{gl:r}=this;let i=[],s=!1;if(e.textures!==null){i=this.currentDrawbuffers.get(t),i===void 0&&(i=[],this.currentDrawbuffers.set(t,i));const o=e.textures;if(i.length!==o.length||i[0]!==r.COLOR_ATTACHMENT0){for(let a=0,l=o.length;a<l;a++)i[a]=r.COLOR_ATTACHMENT0+a;i.length=o.length,s=!0}}else i[0]!==r.BACK&&(i[0]=r.BACK,s=!0);s&&r.drawBuffers(i)}activeTexture(e){const{gl:t,currentTextureSlot:r,maxTextures:i}=this;e===void 0&&(e=t.TEXTURE0+i-1),r!==e&&(t.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,t,r){const{gl:i,currentTextureSlot:s,currentBoundTextures:o,maxTextures:a}=this;r===void 0&&(s===null?r=i.TEXTURE0+a-1:r=s);let l=o[r];l===void 0&&(l={type:void 0,texture:void 0},o[r]=l),(l.type!==e||l.texture!==t)&&(s!==r&&(i.activeTexture(r),this.currentTextureSlot=r),i.bindTexture(e,t),l.type=e,l.texture=t)}bindBufferBase(e,t,r){const{gl:i}=this,s=`${e}-${t}`;return this.currentBoundBufferBases[s]!==r?(i.bindBufferBase(e,t,r),this.currentBoundBufferBases[s]=r,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:t,currentBoundTextures:r}=this,i=r[t];i!==void 0&&i.type!==void 0&&(e.bindTexture(i.type,null),i.type=void 0,i.texture=void 0)}}class wCe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,t=Hu){const{gl:r,extensions:i}=this;let s;if(e===za)return r.UNSIGNED_BYTE;if(e===xxe)return r.UNSIGNED_SHORT_4_4_4_4;if(e===Sxe)return r.UNSIGNED_SHORT_5_5_5_1;if(e===x6)return r.UNSIGNED_INT_5_9_9_9_REV;if(e===Km)return r.BYTE;if(e===Ym)return r.SHORT;if(e===xd)return r.UNSIGNED_SHORT;if(e===ci)return r.INT;if(e===Dr)return r.UNSIGNED_INT;if(e===is)return r.FLOAT;if(e===qa)return r.HALF_FLOAT;if(e===bxe)return r.ALPHA;if(e===jP)return r.RGB;if(e===sp)return r.RGBA;if(e===wxe)return r.LUMINANCE;if(e===Txe)return r.LUMINANCE_ALPHA;if(e===Cu)return r.DEPTH_COMPONENT;if(e===Bf)return r.DEPTH_STENCIL;if(e===qP)return r.RED;if(e===XP)return r.RED_INTEGER;if(e===Fg)return r.RG;if(e===KP)return r.RG_INTEGER;if(e===YP)return r.RGBA_INTEGER;if(e===rT||e===u_||e===h_||e===d_)if(t===ht)if(s=i.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===rT)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===u_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===h_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===d_)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=i.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===rT)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===u_)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===h_)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===d_)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===rk||e===ik||e===sk||e===ok)if(s=i.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===rk)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===ik)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===sk)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===ok)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===ak||e===pC||e===mC)if(s=i.get("WEBGL_compressed_texture_etc"),s!==null){if(e===ak||e===pC)return t===ht?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===mC)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===gC||e===yC||e===vC||e===_C||e===xC||e===SC||e===bC||e===wC||e===TC||e===MC||e===EC||e===AC||e===CC||e===RC)if(s=i.get("WEBGL_compressed_texture_astc"),s!==null){if(e===gC)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===yC)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===vC)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===_C)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===xC)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===SC)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===bC)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===wC)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===TC)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===MC)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===EC)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===AC)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===CC)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===RC)return t===ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===iT)if(s=i.get("EXT_texture_compression_bptc"),s!==null){if(e===iT)return t===ht?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===Exe||e===lk||e===ck||e===uk)if(s=i.get("EXT_texture_compression_rgtc"),s!==null){if(e===iT)return s.COMPRESSED_RED_RGTC1_EXT;if(e===lk)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===ck)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===uk)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===wy?r.UNSIGNED_INT_24_8:r[e]!==void 0?r[e]:null}_clientWaitAsync(){const{gl:e}=this,t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((r,i)=>{function s(){const o=e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0);if(o===e.WAIT_FAILED){e.deleteSync(t),i();return}if(o===e.TIMEOUT_EXPIRED){requestAnimationFrame(s);return}e.deleteSync(t),r()}s()})}}let zU=!1,xv,sM,$U;class TCe{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},zU===!1&&(this._init(this.gl),zU=!0)}_init(e){xv={[kx]:e.REPEAT,[_d]:e.CLAMP_TO_EDGE,[Ux]:e.MIRRORED_REPEAT},sM={[kr]:e.NEAREST,[dC]:e.NEAREST_MIPMAP_NEAREST,[Hd]:e.NEAREST_MIPMAP_LINEAR,[Fi]:e.LINEAR,[fC]:e.LINEAR_MIPMAP_NEAREST,[ja]:e.LINEAR_MIPMAP_LINEAR},$U={[b6]:e.NEVER,[C6]:e.ALWAYS,[QP]:e.LESS,[T6]:e.LEQUAL,[w6]:e.EQUAL,[A6]:e.GEQUAL,[M6]:e.GREATER,[E6]:e.NOTEQUAL}}filterFallback(e){const{gl:t}=this;return e===kr||e===dC||e===Hd?t.NEAREST:t.LINEAR}getGLTextureType(e){const{gl:t}=this;let r;return e.isCubeTexture===!0?r=t.TEXTURE_CUBE_MAP:e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?r=t.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?r=t.TEXTURE_3D:r=t.TEXTURE_2D,r}getInternalFormat(e,t,r,i,s=!1){const{gl:o,extensions:a}=this;if(e!==null){if(o[e]!==void 0)return o[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let l=t;return t===o.RED&&(r===o.FLOAT&&(l=o.R32F),r===o.HALF_FLOAT&&(l=o.R16F),r===o.UNSIGNED_BYTE&&(l=o.R8),r===o.UNSIGNED_SHORT&&(l=o.R16),r===o.UNSIGNED_INT&&(l=o.R32UI),r===o.BYTE&&(l=o.R8I),r===o.SHORT&&(l=o.R16I),r===o.INT&&(l=o.R32I)),t===o.RED_INTEGER&&(r===o.UNSIGNED_BYTE&&(l=o.R8UI),r===o.UNSIGNED_SHORT&&(l=o.R16UI),r===o.UNSIGNED_INT&&(l=o.R32UI),r===o.BYTE&&(l=o.R8I),r===o.SHORT&&(l=o.R16I),r===o.INT&&(l=o.R32I)),t===o.RG&&(r===o.FLOAT&&(l=o.RG32F),r===o.HALF_FLOAT&&(l=o.RG16F),r===o.UNSIGNED_BYTE&&(l=o.RG8),r===o.UNSIGNED_SHORT&&(l=o.RG16),r===o.UNSIGNED_INT&&(l=o.RG32UI),r===o.BYTE&&(l=o.RG8I),r===o.SHORT&&(l=o.RG16I),r===o.INT&&(l=o.RG32I)),t===o.RG_INTEGER&&(r===o.UNSIGNED_BYTE&&(l=o.RG8UI),r===o.UNSIGNED_SHORT&&(l=o.RG16UI),r===o.UNSIGNED_INT&&(l=o.RG32UI),r===o.BYTE&&(l=o.RG8I),r===o.SHORT&&(l=o.RG16I),r===o.INT&&(l=o.RG32I)),t===o.RGB&&(r===o.FLOAT&&(l=o.RGB32F),r===o.HALF_FLOAT&&(l=o.RGB16F),r===o.UNSIGNED_BYTE&&(l=o.RGB8),r===o.UNSIGNED_SHORT&&(l=o.RGB16),r===o.UNSIGNED_INT&&(l=o.RGB32UI),r===o.BYTE&&(l=o.RGB8I),r===o.SHORT&&(l=o.RGB16I),r===o.INT&&(l=o.RGB32I),r===o.UNSIGNED_BYTE&&(l=i===ht&&s===!1?o.SRGB8:o.RGB8),r===o.UNSIGNED_SHORT_5_6_5&&(l=o.RGB565),r===o.UNSIGNED_SHORT_5_5_5_1&&(l=o.RGB5_A1),r===o.UNSIGNED_SHORT_4_4_4_4&&(l=o.RGB4),r===o.UNSIGNED_INT_5_9_9_9_REV&&(l=o.RGB9_E5)),t===o.RGB_INTEGER&&(r===o.UNSIGNED_BYTE&&(l=o.RGB8UI),r===o.UNSIGNED_SHORT&&(l=o.RGB16UI),r===o.UNSIGNED_INT&&(l=o.RGB32UI),r===o.BYTE&&(l=o.RGB8I),r===o.SHORT&&(l=o.RGB16I),r===o.INT&&(l=o.RGB32I)),t===o.RGBA&&(r===o.FLOAT&&(l=o.RGBA32F),r===o.HALF_FLOAT&&(l=o.RGBA16F),r===o.UNSIGNED_BYTE&&(l=o.RGBA8),r===o.UNSIGNED_SHORT&&(l=o.RGBA16),r===o.UNSIGNED_INT&&(l=o.RGBA32UI),r===o.BYTE&&(l=o.RGBA8I),r===o.SHORT&&(l=o.RGBA16I),r===o.INT&&(l=o.RGBA32I),r===o.UNSIGNED_BYTE&&(l=i===ht&&s===!1?o.SRGB8_ALPHA8:o.RGBA8),r===o.UNSIGNED_SHORT_4_4_4_4&&(l=o.RGBA4),r===o.UNSIGNED_SHORT_5_5_5_1&&(l=o.RGB5_A1)),t===o.RGBA_INTEGER&&(r===o.UNSIGNED_BYTE&&(l=o.RGBA8UI),r===o.UNSIGNED_SHORT&&(l=o.RGBA16UI),r===o.UNSIGNED_INT&&(l=o.RGBA32UI),r===o.BYTE&&(l=o.RGBA8I),r===o.SHORT&&(l=o.RGBA16I),r===o.INT&&(l=o.RGBA32I)),t===o.DEPTH_COMPONENT&&(r===o.UNSIGNED_INT&&(l=o.DEPTH24_STENCIL8),r===o.FLOAT&&(l=o.DEPTH_COMPONENT32F)),t===o.DEPTH_STENCIL&&r===o.UNSIGNED_INT_24_8&&(l=o.DEPTH24_STENCIL8),(l===o.R16F||l===o.R32F||l===o.RG16F||l===o.RG32F||l===o.RGBA16F||l===o.RGBA32F)&&a.get("EXT_color_buffer_float"),l}setTextureParameters(e,t){const{gl:r,extensions:i,backend:s}=this;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,t.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,t.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texParameteri(e,r.TEXTURE_WRAP_S,xv[t.wrapS]),r.texParameteri(e,r.TEXTURE_WRAP_T,xv[t.wrapT]),(e===r.TEXTURE_3D||e===r.TEXTURE_2D_ARRAY)&&r.texParameteri(e,r.TEXTURE_WRAP_R,xv[t.wrapR]),r.texParameteri(e,r.TEXTURE_MAG_FILTER,sM[t.magFilter]);const o=t.mipmaps!==void 0&&t.mipmaps.length>0,a=t.minFilter===Fi&&o?ja:t.minFilter;if(r.texParameteri(e,r.TEXTURE_MIN_FILTER,sM[a]),t.compareFunction&&(r.texParameteri(e,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(e,r.TEXTURE_COMPARE_FUNC,$U[t.compareFunction])),i.has("EXT_texture_filter_anisotropic")===!0){if(t.magFilter===kr||t.minFilter!==Hd&&t.minFilter!==ja||t.type===is&&i.has("OES_texture_float_linear")===!1)return;if(t.anisotropy>1){const l=i.get("EXT_texture_filter_anisotropic");r.texParameterf(e,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,s.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:t,backend:r,defaultTextures:i}=this,s=this.getGLTextureType(e);let o=i[s];o===void 0&&(o=t.createTexture(),r.state.bindTexture(s,o),t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST),i[s]=o),r.set(e,{textureGPU:o,glTextureType:s,isDefault:!0})}createTexture(e,t){const{gl:r,backend:i}=this,{levels:s,width:o,height:a,depth:l}=t,c=i.utils.convert(e.format,e.colorSpace),u=i.utils.convert(e.type),h=this.getInternalFormat(e.internalFormat,c,u,e.colorSpace,e.isVideoTexture),d=r.createTexture(),f=this.getGLTextureType(e);i.state.bindTexture(f,d),this.setTextureParameters(f,e),e.isDataArrayTexture||e.isCompressedArrayTexture?r.texStorage3D(r.TEXTURE_2D_ARRAY,s,h,o,a,l):e.isData3DTexture?r.texStorage3D(r.TEXTURE_3D,s,h,o,a,l):e.isVideoTexture||r.texStorage2D(f,s,h,o,a),i.set(e,{textureGPU:d,glTextureType:f,glFormat:c,glType:u,glInternalFormat:h})}copyBufferToTexture(e,t){const{gl:r,backend:i}=this,{textureGPU:s,glTextureType:o,glFormat:a,glType:l}=i.get(t),{width:c,height:u}=t.source.data;r.bindBuffer(r.PIXEL_UNPACK_BUFFER,e),i.state.bindTexture(o,s),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.texSubImage2D(o,0,0,0,c,u,a,l,0),r.bindBuffer(r.PIXEL_UNPACK_BUFFER,null),i.state.unbindTexture()}updateTexture(e,t){const{gl:r}=this,{width:i,height:s}=t,{textureGPU:o,glTextureType:a,glFormat:l,glType:c,glInternalFormat:u}=this.backend.get(e);if(e.isRenderTargetTexture||o===void 0)return;const h=d=>d.isDataTexture?d.image.data:d instanceof ImageBitmap||d instanceof OffscreenCanvas||d instanceof HTMLImageElement||d instanceof HTMLCanvasElement?d:d.data;if(this.backend.state.bindTexture(a,o),this.setTextureParameters(a,e),e.isCompressedTexture){const d=e.mipmaps,f=t.image;for(let p=0;p<d.length;p++){const g=d[p];e.isCompressedArrayTexture?e.format!==r.RGBA?l!==null?r.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,p,0,0,0,g.width,g.height,f.depth,l,g.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texSubImage3D(r.TEXTURE_2D_ARRAY,p,0,0,0,g.width,g.height,f.depth,l,c,g.data):l!==null?r.compressedTexSubImage2D(r.TEXTURE_2D,p,0,0,g.width,g.height,l,g.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const d=t.images;for(let f=0;f<6;f++){const p=h(d[f]);r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,0,0,i,s,l,c,p)}}else if(e.isDataArrayTexture){const d=t.image;r.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,d.width,d.height,d.depth,l,c,d.data)}else if(e.isData3DTexture){const d=t.image;r.texSubImage3D(r.TEXTURE_3D,0,0,0,0,d.width,d.height,d.depth,l,c,d.data)}else if(e.isVideoTexture)e.update(),r.texImage2D(a,0,u,l,c,t.image);else{const d=h(t.image);r.texSubImage2D(a,0,0,0,i,s,l,c,d)}}generateMipmaps(e){const{gl:t,backend:r}=this,{textureGPU:i,glTextureType:s}=r.get(e);r.state.bindTexture(s,i),t.generateMipmap(s)}deallocateRenderBuffers(e){const{gl:t,backend:r}=this;if(e){const i=r.get(e);if(i.renderBufferStorageSetup=void 0,i.framebuffers){for(const s in i.framebuffers)t.deleteFramebuffer(i.framebuffers[s]);delete i.framebuffers}if(i.depthRenderbuffer&&(t.deleteRenderbuffer(i.depthRenderbuffer),delete i.depthRenderbuffer),i.stencilRenderbuffer&&(t.deleteRenderbuffer(i.stencilRenderbuffer),delete i.stencilRenderbuffer),i.msaaFrameBuffer&&(t.deleteFramebuffer(i.msaaFrameBuffer),delete i.msaaFrameBuffer),i.msaaRenderbuffers){for(let s=0;s<i.msaaRenderbuffers.length;s++)t.deleteRenderbuffer(i.msaaRenderbuffers[s]);delete i.msaaRenderbuffers}}}destroyTexture(e){const{gl:t,backend:r}=this,{textureGPU:i,renderTarget:s}=r.get(e);this.deallocateRenderBuffers(s),t.deleteTexture(i),r.delete(e)}copyTextureToTexture(e,t,r=null,i=null,s=0){const{gl:o,backend:a}=this,{state:l}=this.backend,{textureGPU:c,glTextureType:u,glType:h,glFormat:d}=a.get(t);let f,p,g,y,m,_;r!==null?(f=r.max.x-r.min.x,p=r.max.y-r.min.y,g=r.min.x,y=r.min.y):(f=e.image.width,p=e.image.height,g=0,y=0),i!==null?(m=i.x,_=i.y):(m=0,_=0),l.bindTexture(u,c),o.pixelStorei(o.UNPACK_ALIGNMENT,t.unpackAlignment),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,t.unpackAlignment);const v=o.getParameter(o.UNPACK_ROW_LENGTH),x=o.getParameter(o.UNPACK_IMAGE_HEIGHT),b=o.getParameter(o.UNPACK_SKIP_PIXELS),T=o.getParameter(o.UNPACK_SKIP_ROWS),w=o.getParameter(o.UNPACK_SKIP_IMAGES),M=e.isCompressedTexture?e.mipmaps[s]:e.image;o.pixelStorei(o.UNPACK_ROW_LENGTH,M.width),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,M.height),o.pixelStorei(o.UNPACK_SKIP_PIXELS,g),o.pixelStorei(o.UNPACK_SKIP_ROWS,y),e.isDataTexture?o.texSubImage2D(o.TEXTURE_2D,s,m,_,f,p,d,h,M.data):e.isCompressedTexture?o.compressedTexSubImage2D(o.TEXTURE_2D,s,m,_,M.width,M.height,d,M.data):o.texSubImage2D(o.TEXTURE_2D,s,m,_,f,p,d,h,M),o.pixelStorei(o.UNPACK_ROW_LENGTH,v),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,x),o.pixelStorei(o.UNPACK_SKIP_PIXELS,b),o.pixelStorei(o.UNPACK_SKIP_ROWS,T),o.pixelStorei(o.UNPACK_SKIP_IMAGES,w),s===0&&t.generateMipmaps&&o.generateMipmap(o.TEXTURE_2D),l.unbindTexture()}copyFramebufferToTexture(e,t,r){const{gl:i}=this,{state:s}=this.backend,{textureGPU:o}=this.backend.get(e),{x:a,y:l,z:c,w:u}=r,h=e.isDepthTexture===!0||t.renderTarget&&t.renderTarget.samples>0,d=t.renderTarget?t.renderTarget.height:this.backend.gerDrawingBufferSize().y;if(h){const f=a!==0||l!==0;let p,g;if(e.isDepthTexture===!0?(p=i.DEPTH_BUFFER_BIT,g=i.DEPTH_ATTACHMENT,t.stencil&&(p|=i.STENCIL_BUFFER_BIT)):(p=i.COLOR_BUFFER_BIT,g=i.COLOR_ATTACHMENT0),f){const y=this.backend.get(t.renderTarget),m=y.framebuffers[t.getCacheKey()],_=y.msaaFrameBuffer;s.bindFramebuffer(i.DRAW_FRAMEBUFFER,m),s.bindFramebuffer(i.READ_FRAMEBUFFER,_);const v=d-l-u;i.blitFramebuffer(a,v,a+c,v+u,a,v,a+c,v+u,p,i.NEAREST),s.bindFramebuffer(i.READ_FRAMEBUFFER,m),s.bindTexture(i.TEXTURE_2D,o),i.copyTexSubImage2D(i.TEXTURE_2D,0,0,0,a,v,c,u),s.unbindTexture()}else{const y=i.createFramebuffer();s.bindFramebuffer(i.DRAW_FRAMEBUFFER,y),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,g,i.TEXTURE_2D,o,0),i.blitFramebuffer(0,0,c,u,0,0,c,u,p,i.NEAREST),i.deleteFramebuffer(y)}}else s.bindTexture(i.TEXTURE_2D,o),i.copyTexSubImage2D(i.TEXTURE_2D,0,0,0,a,d-u-l,c,u),s.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(t)}setupRenderBufferStorage(e,t){const{gl:r}=this,i=t.renderTarget,{samples:s,depthTexture:o,depthBuffer:a,stencilBuffer:l,width:c,height:u}=i;if(r.bindRenderbuffer(r.RENDERBUFFER,e),a&&!l){let h=r.DEPTH_COMPONENT24;s>0?(o&&o.isDepthTexture&&o.type===r.FLOAT&&(h=r.DEPTH_COMPONENT32F),r.renderbufferStorageMultisample(r.RENDERBUFFER,s,h,c,u)):r.renderbufferStorage(r.RENDERBUFFER,h,c,u),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,e)}else a&&l&&(s>0?r.renderbufferStorageMultisample(r.RENDERBUFFER,s,r.DEPTH24_STENCIL8,c,u):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,c,u),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,e))}async copyTextureToBuffer(e,t,r,i,s,o){const{backend:a,gl:l}=this,{textureGPU:c,glFormat:u,glType:h}=this.backend.get(e),d=l.createFramebuffer();l.bindFramebuffer(l.READ_FRAMEBUFFER,d);const f=e.isCubeTexture?l.TEXTURE_CUBE_MAP_POSITIVE_X+o:l.TEXTURE_2D;l.framebufferTexture2D(l.READ_FRAMEBUFFER,l.COLOR_ATTACHMENT0,f,c,0);const p=this._getTypedArrayType(h),g=this._getBytesPerTexel(h,u),m=i*s*g,_=l.createBuffer();l.bindBuffer(l.PIXEL_PACK_BUFFER,_),l.bufferData(l.PIXEL_PACK_BUFFER,m,l.STREAM_READ),l.readPixels(t,r,i,s,u,h,0),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),await a.utils._clientWaitAsync();const v=new p(m/p.BYTES_PER_ELEMENT);return l.bindBuffer(l.PIXEL_PACK_BUFFER,_),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,v),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),l.deleteFramebuffer(d),v}_getTypedArrayType(e){const{gl:t}=this;if(e===t.UNSIGNED_BYTE)return Uint8Array;if(e===t.UNSIGNED_SHORT_4_4_4_4||e===t.UNSIGNED_SHORT_5_5_5_1||e===t.UNSIGNED_SHORT_5_6_5||e===t.UNSIGNED_SHORT)return Uint16Array;if(e===t.UNSIGNED_INT)return Uint32Array;if(e===t.HALF_FLOAT)return Uint16Array;if(e===t.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,t){const{gl:r}=this;let i=0;if(e===r.UNSIGNED_BYTE&&(i=1),(e===r.UNSIGNED_SHORT_4_4_4_4||e===r.UNSIGNED_SHORT_5_5_5_1||e===r.UNSIGNED_SHORT_5_6_5||e===r.UNSIGNED_SHORT||e===r.HALF_FLOAT)&&(i=2),(e===r.UNSIGNED_INT||e===r.FLOAT)&&(i=4),t===r.RGBA)return i*4;if(t===r.RGB)return i*3;if(t===r.ALPHA)return i}}class MCe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let t=this.extensions[e];return t===void 0&&(t=this.gl.getExtension(e),this.extensions[e]=t),t}has(e){return this.availableExtensions.includes(e)}}class ECe{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,t=this.backend.extensions;if(t.has("EXT_texture_filter_anisotropic")===!0){const r=t.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const VU={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query"};class ACe{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,t){const{gl:r,mode:i,object:s,type:o,info:a,index:l}=this;l!==0?r.drawElements(i,t,o,e):r.drawArrays(i,e,t),a.update(s,t,i,1)}renderInstances(e,t,r){const{gl:i,mode:s,type:o,index:a,object:l,info:c}=this;r!==0&&(a!==0?i.drawElementsInstanced(s,t,o,e,r):i.drawArraysInstanced(s,e,t,r),c.update(l,t,s,r))}renderMultiDraw(e,t,r){const{extensions:i,mode:s,object:o,info:a}=this;if(r===0)return;const l=i.get("WEBGL_multi_draw");if(l===null)for(let c=0;c<r;c++)this.render(e[c],t[c]);else{this.index!==0?l.multiDrawElementsWEBGL(s,t,0,this.type,e,0,r):l.multiDrawArraysWEBGL(s,e,0,t,0,r);let c=0;for(let u=0;u<r;u++)c+=t[u];a.update(o,c,s,1)}}renderMultiDrawInstances(e,t,r,i){const{extensions:s,mode:o,object:a,info:l}=this;if(r===0)return;const c=s.get("WEBGL_multi_draw");if(c===null)for(let u=0;u<r;u++)this.renderInstances(e[u],t[u],i[u]);else{this.index!==0?c.multiDrawElementsInstancedWEBGL(o,t,0,this.type,e,0,i,0,r):c.multiDrawArraysInstancedWEBGL(o,e,0,t,0,i,0,r);let u=0;for(let h=0;h<r;h++)u+=t[h];for(let h=0;h<i.length;h++)l.update(a,u,o,i[h])}}}class GU extends M8{constructor(e={}){super(e),this.isWebGLBackend=!0}init(e){super.init(e);const t=this.parameters,r=t.context!==void 0?t.context:e.domElement.getContext("webgl2");this.gl=r,this.extensions=new MCe(this),this.capabilities=new ECe(this),this.attributeUtils=new SCe(this),this.textureUtils=new TCe(this),this.bufferRenderer=new ACe(this),this.state=new bCe(this),this.utils=new wCe(this),this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.trackTimestamp=t.trackTimestamp===!0,this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile"),this._currentContext=null}get coordinateSystem(){return fo}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}initTimestampQuery(e){if(!this.disjoint||!this.trackTimestamp)return;const t=this.get(e);if(this.queryRunning){t.queryQueue||(t.queryQueue=[]),t.queryQueue.push(e);return}t.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),t.activeQuery=null),t.activeQuery=this.gl.createQuery(),t.activeQuery!==null&&(this.gl.beginQuery(this.disjoint.TIME_ELAPSED_EXT,t.activeQuery),this.queryRunning=!0)}prepareTimestampBuffer(e){if(!this.disjoint||!this.trackTimestamp)return;const t=this.get(e);if(t.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),t.gpuQueries||(t.gpuQueries=[]),t.gpuQueries.push({query:t.activeQuery}),t.activeQuery=null,this.queryRunning=!1,t.queryQueue&&t.queryQueue.length>0)){const r=t.queryQueue.shift();this.initTimestampQuery(r)}}async resolveTimestampAsync(e,t="render"){if(!this.disjoint||!this.trackTimestamp)return;const r=this.get(e);r.gpuQueries||(r.gpuQueries=[]);for(let i=0;i<r.gpuQueries.length;i++){const s=r.gpuQueries[i],o=this.gl.getQueryParameter(s.query,this.gl.QUERY_RESULT_AVAILABLE),a=this.gl.getParameter(this.disjoint.GPU_DISJOINT_EXT);if(o&&!a){const l=this.gl.getQueryParameter(s.query,this.gl.QUERY_RESULT),c=Number(l)/1e6;this.gl.deleteQuery(s.query),r.gpuQueries.splice(i,1),i--,this.renderer.info.updateTimestamp(t,c)}}}getContext(){return this.gl}beginRender(e){const{gl:t}=this,r=this.get(e);if(this.initTimestampQuery(e),r.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1),e.viewport?this.updateViewport(e):t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),e.scissor){const{x:s,y:o,width:a,height:l}=e.scissorValue;t.scissor(s,e.height-l-o,a,l)}const i=e.occlusionQueryCount;i>0&&(r.currentOcclusionQueries=r.occlusionQueries,r.currentOcclusionQueryObjects=r.occlusionQueryObjects,r.lastOcclusionObject=null,r.occlusionQueries=new Array(i),r.occlusionQueryObjects=new Array(i),r.occlusionQueryIndex=0)}finishRender(e){const{gl:t,state:r}=this,i=this.get(e),s=i.previousContext,o=e.occlusionQueryCount;o>0&&(o>i.occlusionQueryIndex&&t.endQuery(t.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const a=e.textures;if(a!==null)for(let l=0;l<a.length;l++){const c=a[l];c.generateMipmaps&&this.generateMipmaps(c)}if(this._currentContext=s,e.textures!==null&&e.renderTarget){const l=this.get(e.renderTarget),{samples:c}=e.renderTarget;if(c>0){const u=l.framebuffers[e.getCacheKey()],h=t.COLOR_BUFFER_BIT,d=l.msaaFrameBuffer,f=e.textures;r.bindFramebuffer(t.READ_FRAMEBUFFER,d),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,u);for(let p=0;p<f.length;p++)if(e.scissor){const{x:g,y,width:m,height:_}=e.scissorValue,v=e.height-_-y;t.blitFramebuffer(g,v,g+m,v+_,g,v,g+m,v+_,h,t.NEAREST),t.invalidateSubFramebuffer(t.READ_FRAMEBUFFER,l.invalidationArray,g,v,m,_)}else t.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,h,t.NEAREST),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,l.invalidationArray)}}s!==null&&(this._setFramebuffer(s),s.viewport?this.updateViewport(s):t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)),this.prepareTimestampBuffer(e)}resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueries:r,currentOcclusionQueryObjects:i}=t;if(r&&i){const s=new WeakSet,{gl:o}=this;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueries=null;const a=()=>{let l=0;for(let c=0;c<r.length;c++){const u=r[c];u!==null&&o.getQueryParameter(u,o.QUERY_RESULT_AVAILABLE)&&(o.getQueryParameter(u,o.QUERY_RESULT)>0&&s.add(i[c]),r[c]=null,o.deleteQuery(u),l++)}l<r.length?requestAnimationFrame(a):t.occluded=s};a()}}isOccluded(e,t){const r=this.get(e);return r.occluded&&r.occluded.has(t)}updateViewport(e){const t=this.gl,{x:r,y:i,width:s,height:o}=e.viewportValue;t.viewport(r,e.height-o-i,s,o)}setScissorTest(e){const t=this.gl;e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST)}clear(e,t,r,i=null,s=!0){const{gl:o}=this;i===null&&(i={textures:null,clearColorValue:this.getClearColor()});let a=0;if(e&&(a|=o.COLOR_BUFFER_BIT),t&&(a|=o.DEPTH_BUFFER_BIT),r&&(a|=o.STENCIL_BUFFER_BIT),a!==0){const l=i.clearColorValue||this.getClearColor();if(l.r*=l.a,l.g*=l.a,l.b*=l.a,t&&this.state.setDepthMask(!0),i.textures===null)o.clearColor(l.r,l.g,l.b,l.a),o.clear(a);else{if(s&&this._setFramebuffer(i),e)for(let c=0;c<i.textures.length;c++)o.clearBufferfv(o.COLOR,c,[l.r,l.g,l.b,l.a]);t&&r?o.clearBufferfi(o.DEPTH_STENCIL,0,1,0):t?o.clearBufferfv(o.DEPTH,0,[1]):r&&o.clearBufferiv(o.STENCIL,0,[0])}}}beginCompute(e){const{state:t,gl:r}=this;t.bindFramebuffer(r.FRAMEBUFFER,null),this.initTimestampQuery(e)}compute(e,t,r,i){const{state:s,gl:o}=this;this.discard||(o.enable(o.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:a,transformBuffers:l,attributes:c}=this.get(i),u=this._getVaoKey(null,c),h=this.vaoCache[u];h===void 0?this._createVao(null,c):o.bindVertexArray(h),s.useProgram(a),this._bindUniforms(r);const d=this._getTransformFeedback(l);o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,d),o.beginTransformFeedback(o.POINTS),c[0].isStorageInstancedBufferAttribute?o.drawArraysInstanced(o.POINTS,0,1,t.count):o.drawArrays(o.POINTS,0,t.count),o.endTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null);for(let f=0;f<l.length;f++){const p=l[f];p.pbo&&this.textureUtils.copyBufferToTexture(p.transformBuffer,p.pbo),p.switchBuffers()}}finishCompute(e){const t=this.gl;this.discard=!1,t.disable(t.RASTERIZER_DISCARD),this.prepareTimestampBuffer(e)}draw(e){const{object:t,pipeline:r,material:i,context:s}=e,{programGPU:o}=this.get(r),{gl:a,state:l}=this,c=this.get(s),u=e.getDrawParameters();if(u===null)return;this._bindUniforms(e.getBindings());const h=t.isMesh&&t.matrixWorld.determinant()<0;l.setMaterial(i,h),l.useProgram(o);let d=e.staticVao;if(d===void 0){const v=this._getVaoKey(e.getIndex(),e.getAttributes());if(d=this.vaoCache[v],d===void 0){let x;({vaoGPU:d,staticVao:x}=this._createVao(e.getIndex(),e.getAttributes())),x&&(e.staticVao=d)}}a.bindVertexArray(d);const f=e.getIndex(),p=c.lastOcclusionObject;if(p!==t&&p!==void 0){if(p!==null&&p.occlusionTest===!0&&(a.endQuery(a.ANY_SAMPLES_PASSED),c.occlusionQueryIndex++),t.occlusionTest===!0){const v=a.createQuery();a.beginQuery(a.ANY_SAMPLES_PASSED,v),c.occlusionQueries[c.occlusionQueryIndex]=v,c.occlusionQueryObjects[c.occlusionQueryIndex]=t}c.lastOcclusionObject=t}const g=this.bufferRenderer;t.isPoints?g.mode=a.POINTS:t.isLineSegments?g.mode=a.LINES:t.isLine?g.mode=a.LINE_STRIP:t.isLineLoop?g.mode=a.LINE_LOOP:i.wireframe===!0?(l.setLineWidth(i.wireframeLinewidth*this.renderer.getPixelRatio()),g.mode=a.LINES):g.mode=a.TRIANGLES;const{vertexCount:y,instanceCount:m}=u;let{firstVertex:_}=u;if(g.object=t,f!==null){_*=f.array.BYTES_PER_ELEMENT;const v=this.get(f);g.index=f.count,g.type=v.type}else g.index=0;t.isBatchedMesh?t._multiDrawInstances!==null?g.renderMultiDrawInstances(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount,t._multiDrawInstances):this.hasFeature("WEBGL_multi_draw")?g.renderMultiDraw(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount):lSe("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):m>1?g.renderInstances(_,y,m):g.render(_,y),a.bindVertexArray(null)}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,t,r,i,s,o){return this.textureUtils.copyTextureToBuffer(e,t,r,i,s,o)}createSampler(){}destroySampler(){}createNodeBuilder(e,t){return new vCe(e,t)}createProgram(e){const t=this.gl,{stage:r,code:i}=e,s=r==="fragment"?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);t.shaderSource(s,i),t.compileShader(s),this.set(e,{shaderGPU:s})}destroyProgram(){console.warn("Abstract class.")}createRenderPipeline(e,t){const r=this.gl,i=e.pipeline,{fragmentProgram:s,vertexProgram:o}=i,a=r.createProgram(),l=this.get(s).shaderGPU,c=this.get(o).shaderGPU;if(r.attachShader(a,l),r.attachShader(a,c),r.linkProgram(a),this.set(i,{programGPU:a,fragmentShader:l,vertexShader:c}),t!==null&&this.parallel){const u=new Promise(h=>{const d=this.parallel,f=()=>{r.getProgramParameter(a,d.COMPLETION_STATUS_KHR)?(this._completeCompile(e,i),h()):requestAnimationFrame(f)};f()});t.push(u);return}this._completeCompile(e,i)}_handleSource(e,t){const r=e.split(`
`),i=[],s=Math.max(t-6,0),o=Math.min(t+6,r.length);for(let a=s;a<o;a++){const l=a+1;i.push(`${l===t?">":" "} ${l}: ${r[a]}`)}return i.join(`
`)}_getShaderErrors(e,t,r){const i=e.getShaderParameter(t,e.COMPILE_STATUS),s=e.getShaderInfoLog(t).trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return r.toUpperCase()+`

`+s+`

`+this._handleSource(e.getShaderSource(t),a)}else return s}_logProgramError(e,t,r){if(this.renderer.debug.checkShaderErrors){const i=this.gl,s=i.getProgramInfoLog(e).trim();if(i.getProgramParameter(e,i.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(i,e,r,t);else{const o=this._getShaderErrors(i,r,"vertex"),a=this._getShaderErrors(i,t,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(e,i.VALIDATE_STATUS)+`

Program Info Log: `+s+`
`+o+`
`+a)}else s!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",s)}}_completeCompile(e,t){const{state:r,gl:i}=this,s=this.get(t),{programGPU:o,fragmentShader:a,vertexShader:l}=s;i.getProgramParameter(o,i.LINK_STATUS)===!1&&this._logProgramError(o,a,l),r.useProgram(o);const c=e.getBindings();this._setupBindings(c,o),this.set(t,{programGPU:o})}createComputePipeline(e,t){const{state:r,gl:i}=this,s={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(s);const{computeProgram:o}=e,a=i.createProgram(),l=this.get(s).shaderGPU,c=this.get(o).shaderGPU,u=o.transforms,h=[],d=[];for(let y=0;y<u.length;y++){const m=u[y];h.push(m.varyingName),d.push(m.attributeNode)}i.attachShader(a,l),i.attachShader(a,c),i.transformFeedbackVaryings(a,h,i.SEPARATE_ATTRIBS),i.linkProgram(a),i.getProgramParameter(a,i.LINK_STATUS)===!1&&this._logProgramError(a,l,c),r.useProgram(a),this.createBindings(null,t),this._setupBindings(t,a);const f=o.attributes,p=[],g=[];for(let y=0;y<f.length;y++){const m=f[y].node.attribute;p.push(m),this.has(m)||this.attributeUtils.createAttribute(m,i.ARRAY_BUFFER)}for(let y=0;y<d.length;y++){const m=d[y].attribute;this.has(m)||this.attributeUtils.createAttribute(m,i.ARRAY_BUFFER);const _=this.get(m);g.push(_)}this.set(e,{programGPU:a,transformBuffers:g,attributes:p})}createBindings(e,t){this.updateBindings(e,t)}updateBindings(e,t){if(!e)return;const{gl:r}=this,i=this.get(t),s=this.get(e);i.textureIndex===void 0&&(i.textureIndex=0),s.textureIndex===void 0?s.textureIndex=i.textureIndex:i.textureIndex=s.textureIndex;let o=0;for(const a of e.bindings)if(a.isUniformsGroup||a.isUniformBuffer){const l=a.buffer,c=r.createBuffer();r.bindBuffer(r.UNIFORM_BUFFER,c),r.bufferData(r.UNIFORM_BUFFER,l,r.DYNAMIC_DRAW),this.set(a,{index:e.index*2+o++,bufferGPU:c})}else if(a.isSampledTexture){const{textureGPU:l,glTextureType:c}=this.get(a.texture);this.set(a,{index:i.textureIndex++,textureGPU:l,glTextureType:c})}}updateBinding(e){const t=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const i=this.get(e).bufferGPU,s=e.buffer;t.bindBuffer(t.UNIFORM_BUFFER,i),t.bufferData(t.UNIFORM_BUFFER,s,t.DYNAMIC_DRAW)}}createIndexAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){}hasFeature(e){const t=Object.keys(VU).filter(i=>VU[i]===e),r=this.extensions;for(let i=0;i<t.length;i++)if(r.has(t[i]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,t,r,i){this.textureUtils.copyTextureToTexture(e,t,r,i)}copyFramebufferToTexture(e,t,r){this.textureUtils.copyFramebufferToTexture(e,t,r)}_setFramebuffer(e){const{gl:t,state:r}=this;let i=null;if(e.textures!==null){const s=e.renderTarget,o=this.get(s),{samples:a,depthBuffer:l,stencilBuffer:c}=s,u=s.isWebGLCubeRenderTarget===!0;let h=o.msaaFrameBuffer,d=o.depthRenderbuffer;const f=y8(e);let p;if(u?(o.cubeFramebuffers||(o.cubeFramebuffers={}),p=o.cubeFramebuffers[f]):(o.framebuffers||(o.framebuffers={}),p=o.framebuffers[f]),p===void 0){p=t.createFramebuffer(),r.bindFramebuffer(t.FRAMEBUFFER,p);const g=e.textures;if(u){o.cubeFramebuffers[f]=p;const{textureGPU:y}=this.get(g[0]),m=this.renderer._activeCubeFace;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+m,y,0)}else{o.framebuffers[f]=p;for(let y=0;y<g.length;y++){const m=g[y],_=this.get(m);_.renderTarget=e.renderTarget;const v=t.COLOR_ATTACHMENT0+y;t.framebufferTexture2D(t.FRAMEBUFFER,v,t.TEXTURE_2D,_.textureGPU,0)}r.drawBuffers(e,p)}if(e.depthTexture!==null){const y=this.get(e.depthTexture),m=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.framebufferTexture2D(t.FRAMEBUFFER,m,t.TEXTURE_2D,y.textureGPU,0)}}if(a>0){if(h===void 0){const g=[];h=t.createFramebuffer(),r.bindFramebuffer(t.FRAMEBUFFER,h);const y=[],m=e.textures;for(let _=0;_<m.length;_++){if(y[_]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,y[_]),g.push(t.COLOR_ATTACHMENT0+_),l){const b=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;g.push(b)}const v=e.textures[_],x=this.get(v);t.renderbufferStorageMultisample(t.RENDERBUFFER,a,x.glInternalFormat,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+_,t.RENDERBUFFER,y[_])}if(o.msaaFrameBuffer=h,o.msaaRenderbuffers=y,d===void 0){d=t.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(d,e),o.depthRenderbuffer=d;const _=c?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;g.push(_)}o.invalidationArray=g}i=o.msaaFrameBuffer}else i=p}r.bindFramebuffer(t.FRAMEBUFFER,i)}_getVaoKey(e,t){let r=[];if(e!==null){const i=this.get(e);r+=":"+i.id}for(let i=0;i<t.length;i++){const s=this.get(t[i]);r+=":"+s.id}return r}_createVao(e,t){const{gl:r}=this,i=r.createVertexArray();let s="",o=!0;if(r.bindVertexArray(i),e!==null){const a=this.get(e);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a.bufferGPU),s+=":"+a.id}for(let a=0;a<t.length;a++){const l=t[a],c=this.get(l);s+=":"+c.id,r.bindBuffer(r.ARRAY_BUFFER,c.bufferGPU),r.enableVertexAttribArray(a),(l.isStorageBufferAttribute||l.isStorageInstancedBufferAttribute)&&(o=!1);let u,h;l.isInterleavedBufferAttribute===!0?(u=l.data.stride*c.bytesPerElement,h=l.offset*c.bytesPerElement):(u=0,h=0),c.isInteger?r.vertexAttribIPointer(a,l.itemSize,c.type,u,h):r.vertexAttribPointer(a,l.itemSize,c.type,l.normalized,u,h),l.isInstancedBufferAttribute&&!l.isInterleavedBufferAttribute?r.vertexAttribDivisor(a,l.meshPerAttribute):l.isInterleavedBufferAttribute&&l.data.isInstancedInterleavedBuffer&&r.vertexAttribDivisor(a,l.data.meshPerAttribute)}return r.bindBuffer(r.ARRAY_BUFFER,null),this.vaoCache[s]=i,{vaoGPU:i,staticVao:o}}_getTransformFeedback(e){let t="";for(let s=0;s<e.length;s++)t+=":"+e[s].id;let r=this.transformFeedbackCache[t];if(r!==void 0)return r;const{gl:i}=this;r=i.createTransformFeedback(),i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,r);for(let s=0;s<e.length;s++){const o=e[s];i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,s,o.transformBuffer)}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[t]=r,r}_setupBindings(e,t){const r=this.gl;for(const i of e)for(const s of i.bindings){const a=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){const l=r.getUniformBlockIndex(t,s.name);r.uniformBlockBinding(t,l,a)}else if(s.isSampledTexture){const l=r.getUniformLocation(t,s.name);r.uniform1i(l,a)}}}_bindUniforms(e){const{gl:t,state:r}=this;for(const i of e)for(const s of i.bindings){const o=this.get(s),a=o.index;s.isUniformsGroup||s.isUniformBuffer?r.bindBufferBase(t.UNIFORM_BUFFER,a,o.bufferGPU):s.isSampledTexture&&r.bindTexture(o.glTextureType,o.textureGPU,t.TEXTURE0+a)}}}class CCe extends I2{constructor(e,t){super(e),this.texture=t,this.version=t?t.version:0,this.isSampler=!0}}class RCe extends CCe{constructor(e,t,r){super(e,t?t.value:null),this.textureNode=t,this.groupNode=r}update(){this.texture=this.textureNode.value}}class NCe extends _8{constructor(e,t){super(e,t?t.array:null),this.attribute=t,this.isStorageBuffer=!0}}let PCe=0;class ICe extends NCe{constructor(e,t){super("StorageBuffer_"+PCe++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:KC.Storage,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class LCe extends Lc{constructor(e){super(),this.device=e;const t=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,r=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,i=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:Yx.Linear}),this.flipYSampler=e.createSampler({minFilter:Yx.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:t}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:r}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:i})}getTransferPipeline(e){let t=this.transferPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Md.TriangleStrip,stripIndexFormat:Vf.Uint32},layout:"auto"}),this.transferPipelines[e]=t),t}getFlipYPipeline(e){let t=this.flipYPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Md.TriangleStrip,stripIndexFormat:Vf.Uint32},layout:"auto"}),this.flipYPipelines[e]=t),t}flipY(e,t,r=0){const i=t.format,{width:s,height:o}=t.size,a=this.getTransferPipeline(i),l=this.getFlipYPipeline(i),c=this.device.createTexture({size:{width:s,height:o,depthOrArrayLayers:1},format:i,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),u=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:ws.TwoD,baseArrayLayer:r}),h=c.createView({baseMipLevel:0,mipLevelCount:1,dimension:ws.TwoD,baseArrayLayer:0}),d=this.device.createCommandEncoder({}),f=(p,g,y)=>{const m=p.getBindGroupLayout(0),_=this.device.createBindGroup({layout:m,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:g}]}),v=d.beginRenderPass({colorAttachments:[{view:y,loadOp:tr.Clear,storeOp:Pr.Store,clearValue:[0,0,0,0]}]});v.setPipeline(p),v.setBindGroup(0,_),v.draw(4,1,0,0),v.end()};f(a,u,h),f(l,h,u),this.device.queue.submit([d.finish()]),c.destroy()}generateMipmaps(e,t,r=0){const i=this.get(e);i.useCount===void 0&&(i.useCount=0,i.layers=[]);const s=i.layers[r]||this._mipmapCreateBundles(e,t,r),o=this.device.createCommandEncoder({});this._mipmapRunBundles(o,s),this.device.queue.submit([o.finish()]),i.useCount!==0&&(i.layers[r]=s),i.useCount++}_mipmapCreateBundles(e,t,r){const i=this.getTransferPipeline(t.format),s=i.getBindGroupLayout(0);let o=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:ws.TwoD,baseArrayLayer:r});const a=[];for(let l=1;l<t.mipLevelCount;l++){const c=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:o}]}),u=e.createView({baseMipLevel:l,mipLevelCount:1,dimension:ws.TwoD,baseArrayLayer:r}),h={colorAttachments:[{view:u,loadOp:tr.Clear,storeOp:Pr.Store,clearValue:[0,0,0,0]}]},d=this.device.createRenderBundleEncoder({colorFormats:[t.format]});d.setPipeline(i),d.setBindGroup(0,c),d.draw(4,1,0,0),a.push({renderBundles:[d.finish()],passDescriptor:h}),o=u}return a}_mipmapRunBundles(e,t){const r=t.length;for(let i=0;i<r;i++){const s=t[i],o=e.beginRenderPass(s.passDescriptor);o.executeBundles(s.renderBundles),o.end()}}}const DCe={[b6]:"never",[QP]:"less",[w6]:"equal",[T6]:"less-equal",[M6]:"greater",[A6]:"greater-equal",[C6]:"always",[E6]:"not-equal"},OCe=[0,1,3,2,4,5];class FCe{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new Ay,this.depthTexture.name="depthBuffer"}createSampler(e){const t=this.backend,r=t.device,i=t.get(e),s={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:e.anisotropy};e.isDepthTexture&&e.compareFunction!==null&&(s.compare=DCe[e.compareFunction]),i.sampler=r.createSampler(s)}createDefaultTexture(e){let t;const r=QC(e);e.isCubeTexture?t=this._getDefaultCubeTextureGPU(r):e.isVideoTexture?this.backend.get(e).externalTexture=this._getDefaultVideoFrame():t=this._getDefaultTextureGPU(r),this.backend.get(e).texture=t}createTexture(e,t={}){const r=this.backend,i=r.get(e);if(i.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");t.needsMipmaps===void 0&&(t.needsMipmaps=!1),t.levels===void 0&&(t.levels=1),t.depth===void 0&&(t.depth=1);const{width:s,height:o,depth:a,levels:l}=t,c=this._getDimension(e),u=e.internalFormat||t.format||QC(e,r.device);i.format=u;let h=t.sampleCount!==void 0?t.sampleCount:1;h=r.utils.getSampleCount(h);const d=e.isRenderTargetTexture&&!e.isMultisampleRenderTargetTexture?1:h;let f=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(f|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&(f|=GPUTextureUsage.RENDER_ATTACHMENT);const p={label:e.name,size:{width:s,height:o,depthOrArrayLayers:a},mipLevelCount:l,sampleCount:d,dimension:c,format:u,usage:f};if(e.isVideoTexture){const g=e.source.data,y=new VideoFrame(g);p.size.width=y.displayWidth,p.size.height=y.displayHeight,y.close(),i.externalTexture=g}else{if(u===void 0)return console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);i.texture=r.device.createTexture(p)}if(e.isRenderTargetTexture&&h>1&&!e.isMultisampleRenderTargetTexture){const g=Object.assign({},p);g.label=g.label+"-msaa",g.sampleCount=h,i.msaaTexture=r.device.createTexture(g)}i.initialized=!0,i.textureDescriptorGPU=p}destroyTexture(e){const t=this.backend,r=t.get(e);r.texture.destroy(),r.msaaTexture!==void 0&&r.msaaTexture.destroy(),t.delete(e)}destroySampler(e){const r=this.backend.get(e);delete r.sampler}generateMipmaps(e){const t=this.backend.get(e);if(e.isCubeTexture)for(let r=0;r<6;r++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,r);else{const r=e.image.depth||1;for(let i=0;i<r;i++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,i)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:t,height:r}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:t,height:r,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,t=!1){const r=this.backend,{width:i,height:s}=r.getDrawingBufferSize(),o=this.depthTexture,a=r.get(o).texture;let l,c;if(t?(l=Bf,c=wy):e&&(l=Cu,c=Dr),a!==void 0){if(o.image.width===i&&o.image.height===s&&o.format===l&&o.type===c)return a;this.destroyTexture(o)}return o.name="depthBuffer",o.format=l,o.type=c,o.image.width=i,o.image.height=s,this.createTexture(o,{sampleCount:r.utils.getSampleCount(r.renderer.samples),width:i,height:s}),r.get(o).texture}updateTexture(e,t){const r=this.backend.get(e),{textureDescriptorGPU:i}=r;if(!(e.isRenderTargetTexture||i===void 0)){if(e.isDataTexture)this._copyBufferToTexture(t.image,r.texture,i,0,e.flipY);else if(e.isDataArrayTexture||e.isData3DTexture)for(let s=0;s<t.image.depth;s++)this._copyBufferToTexture(t.image,r.texture,i,s,e.flipY,s);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,r.texture,i);else if(e.isCubeTexture)this._copyCubeMapToTexture(t.images,r.texture,i,e.flipY);else if(e.isVideoTexture){const s=e.source.data;r.externalTexture=s}else this._copyImageToTexture(t.image,r.texture,i,0,e.flipY);r.version=e.version,e.onUpdate&&e.onUpdate(e)}}async copyTextureToBuffer(e,t,r,i,s,o){const a=this.backend.device,l=this.backend.get(e),c=l.texture,u=l.textureDescriptorGPU.format,h=this._getBytesPerTexel(u);let d=i*h;d=Math.ceil(d/256)*256;const f=a.createBuffer({size:i*s*h,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),p=a.createCommandEncoder();p.copyTextureToBuffer({texture:c,origin:{x:t,y:r,z:o}},{buffer:f,bytesPerRow:d},{width:i,height:s});const g=this._getTypedArrayType(u);a.queue.submit([p.finish()]),await f.mapAsync(GPUMapMode.READ);const y=f.getMappedRange();return new g(y)}_isEnvironmentTexture(e){const t=e.mapping;return t===Sy||t===by||t===Gu||t===Uf}_getDefaultTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const r=new pi;r.minFilter=kr,r.magFilter=kr,this.createTexture(r,{width:1,height:1,format:e}),this.defaultTexture[e]=t=r}return this.backend.get(t).texture}_getDefaultCubeTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const r=new e2;r.minFilter=kr,r.magFilter=kr,this.createTexture(r,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=t=r}return this.backend.get(t).texture}_getDefaultVideoFrame(){let e=this.defaultVideoFrame;if(e===null){const t={timestamp:0,codedWidth:1,codedHeight:1,format:"RGBA"};this.defaultVideoFrame=e=new VideoFrame(new Uint8Array([0,0,0,255]),t)}return e}_copyCubeMapToTexture(e,t,r,i){for(let s=0;s<6;s++){const o=e[s],a=i===!0?OCe[s]:s;o.isDataTexture?this._copyBufferToTexture(o.image,t,r,a,i):this._copyImageToTexture(o,t,r,a,i)}}_copyImageToTexture(e,t,r,i,s){this.backend.device.queue.copyExternalImageToTexture({source:e},{texture:t,mipLevel:0,origin:{x:0,y:0,z:i}},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(t,r,i)}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new LCe(this.backend.device)),e}_generateMipmaps(e,t,r=0){this._getPassUtils().generateMipmaps(e,t,r)}_flipY(e,t,r=0){this._getPassUtils().flipY(e,t,r)}_copyBufferToTexture(e,t,r,i,s,o=0){const a=this.backend.device,l=e.data,c=this._getBytesPerTexel(r.format),u=e.width*c;a.queue.writeTexture({texture:t,mipLevel:0,origin:{x:0,y:0,z:i}},l,{offset:e.width*e.height*c*o,bytesPerRow:u},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(t,r,i)}_copyCompressedBufferToTexture(e,t,r){const i=this.backend.device,s=this._getBlockData(r.format),o=r.size.depthOrArrayLayers>1;for(let a=0;a<e.length;a++){const l=e[a],c=l.width,u=l.height,h=o?r.size.depthOrArrayLayers:1,d=Math.ceil(c/s.width)*s.byteLength,f=d*Math.ceil(u/s.height);for(let p=0;p<h;p++)i.queue.writeTexture({texture:t,mipLevel:a,origin:{x:0,y:0,z:p}},l.data,{offset:p*f,bytesPerRow:d,rowsPerImage:Math.ceil(u/s.height)},{width:Math.ceil(c/s.width)*s.width,height:Math.ceil(u/s.height)*s.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===Q.BC1RGBAUnorm||e===Q.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===Q.BC2RGBAUnorm||e===Q.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Q.BC3RGBAUnorm||e===Q.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Q.BC4RUnorm||e===Q.BC4RSNorm)return{byteLength:8,width:4,height:4};if(e===Q.BC5RGUnorm||e===Q.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===Q.BC6HRGBUFloat||e===Q.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===Q.BC7RGBAUnorm||e===Q.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Q.ETC2RGB8Unorm||e===Q.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===Q.ETC2RGB8A1Unorm||e===Q.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===Q.ETC2RGBA8Unorm||e===Q.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===Q.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===Q.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===Q.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===Q.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===Q.ASTC4x4Unorm||e===Q.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===Q.ASTC5x4Unorm||e===Q.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===Q.ASTC5x5Unorm||e===Q.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===Q.ASTC6x5Unorm||e===Q.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===Q.ASTC6x6Unorm||e===Q.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===Q.ASTC8x5Unorm||e===Q.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===Q.ASTC8x6Unorm||e===Q.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===Q.ASTC8x8Unorm||e===Q.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===Q.ASTC10x5Unorm||e===Q.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===Q.ASTC10x6Unorm||e===Q.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===Q.ASTC10x8Unorm||e===Q.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===Q.ASTC10x10Unorm||e===Q.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===Q.ASTC12x10Unorm||e===Q.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===Q.ASTC12x12Unorm||e===Q.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let t=ZT.ClampToEdge;return e===kx?t=ZT.Repeat:e===Ux&&(t=ZT.MirrorRepeat),t}_convertFilterMode(e){let t=Yx.Linear;return(e===kr||e===dC||e===Hd)&&(t=Yx.Nearest),t}_getBytesPerTexel(e){if(e===Q.R8Unorm||e===Q.R8Snorm||e===Q.R8Uint||e===Q.R8Sint)return 1;if(e===Q.R16Uint||e===Q.R16Sint||e===Q.R16Float||e===Q.RG8Unorm||e===Q.RG8Snorm||e===Q.RG8Uint||e===Q.RG8Sint)return 2;if(e===Q.R32Uint||e===Q.R32Sint||e===Q.R32Float||e===Q.RG16Uint||e===Q.RG16Sint||e===Q.RG16Float||e===Q.RGBA8Unorm||e===Q.RGBA8UnormSRGB||e===Q.RGBA8Snorm||e===Q.RGBA8Uint||e===Q.RGBA8Sint||e===Q.BGRA8Unorm||e===Q.BGRA8UnormSRGB||e===Q.RGB9E5UFloat||e===Q.RGB10A2Unorm||e===Q.RG11B10UFloat||e===Q.Depth32Float||e===Q.Depth24Plus||e===Q.Depth24PlusStencil8||e===Q.Depth32FloatStencil8)return 4;if(e===Q.RG32Uint||e===Q.RG32Sint||e===Q.RG32Float||e===Q.RGBA16Uint||e===Q.RGBA16Sint||e===Q.RGBA16Float)return 8;if(e===Q.RGBA32Uint||e===Q.RGBA32Sint||e===Q.RGBA32Float)return 16}_getTypedArrayType(e){if(e===Q.R8Uint)return Uint8Array;if(e===Q.R8Sint)return Int8Array;if(e===Q.R8Unorm)return Uint8Array;if(e===Q.R8Snorm)return Int8Array;if(e===Q.RG8Uint)return Uint8Array;if(e===Q.RG8Sint)return Int8Array;if(e===Q.RG8Unorm)return Uint8Array;if(e===Q.RG8Snorm)return Int8Array;if(e===Q.RGBA8Uint)return Uint8Array;if(e===Q.RGBA8Sint)return Int8Array;if(e===Q.RGBA8Unorm)return Uint8Array;if(e===Q.RGBA8Snorm)return Int8Array;if(e===Q.R16Uint)return Uint16Array;if(e===Q.R16Sint)return Int16Array;if(e===Q.RG16Uint)return Uint16Array;if(e===Q.RG16Sint)return Int16Array;if(e===Q.RGBA16Uint)return Uint16Array;if(e===Q.RGBA16Sint)return Int16Array;if(e===Q.R16Float||e===Q.RG16Float||e===Q.RGBA16Float)return Uint16Array;if(e===Q.R32Uint)return Uint32Array;if(e===Q.R32Sint)return Int32Array;if(e===Q.R32Float)return Float32Array;if(e===Q.RG32Uint)return Uint32Array;if(e===Q.RG32Sint)return Int32Array;if(e===Q.RG32Float)return Float32Array;if(e===Q.RGBA32Uint)return Uint32Array;if(e===Q.RGBA32Sint)return Int32Array;if(e===Q.RGBA32Float)return Float32Array;if(e===Q.BGRA8Unorm||e===Q.BGRA8UnormSRGB)return Uint8Array;if(e===Q.RGB10A2Unorm||e===Q.RGB9E5UFloat||e===Q.RG11B10UFloat)return Uint32Array;if(e===Q.Depth32Float)return Float32Array;if(e===Q.Depth24Plus||e===Q.Depth24PlusStencil8)return Uint32Array;if(e===Q.Depth32FloatStencil8)return Float32Array}_getDimension(e){let t;return e.isData3DTexture?t=IU.ThreeD:t=IU.TwoD,t}}function QC(n,e=null){const t=n.format,r=n.type,i=n.colorSpace;let s;if(n.isFramebufferTexture===!0&&n.type===za)s=Q.BGRA8Unorm;else if(n.isCompressedTexture===!0||n.isCompressedArrayTexture===!0)switch(t){case u_:s=i===ht?Q.BC1RGBAUnormSRGB:Q.BC1RGBAUnorm;break;case h_:s=i===ht?Q.BC2RGBAUnormSRGB:Q.BC2RGBAUnorm;break;case d_:s=i===ht?Q.BC3RGBAUnormSRGB:Q.BC3RGBAUnorm;break;case pC:s=i===ht?Q.ETC2RGB8UnormSRGB:Q.ETC2RGB8Unorm;break;case mC:s=i===ht?Q.ETC2RGBA8UnormSRGB:Q.ETC2RGBA8Unorm;break;case gC:s=i===ht?Q.ASTC4x4UnormSRGB:Q.ASTC4x4Unorm;break;case yC:s=i===ht?Q.ASTC5x4UnormSRGB:Q.ASTC5x4Unorm;break;case vC:s=i===ht?Q.ASTC5x5UnormSRGB:Q.ASTC5x5Unorm;break;case _C:s=i===ht?Q.ASTC6x5UnormSRGB:Q.ASTC6x5Unorm;break;case xC:s=i===ht?Q.ASTC6x6UnormSRGB:Q.ASTC6x6Unorm;break;case SC:s=i===ht?Q.ASTC8x5UnormSRGB:Q.ASTC8x5Unorm;break;case bC:s=i===ht?Q.ASTC8x6UnormSRGB:Q.ASTC8x6Unorm;break;case wC:s=i===ht?Q.ASTC8x8UnormSRGB:Q.ASTC8x8Unorm;break;case TC:s=i===ht?Q.ASTC10x5UnormSRGB:Q.ASTC10x5Unorm;break;case MC:s=i===ht?Q.ASTC10x6UnormSRGB:Q.ASTC10x6Unorm;break;case EC:s=i===ht?Q.ASTC10x8UnormSRGB:Q.ASTC10x8Unorm;break;case AC:s=i===ht?Q.ASTC10x10UnormSRGB:Q.ASTC10x10Unorm;break;case CC:s=i===ht?Q.ASTC12x10UnormSRGB:Q.ASTC12x10Unorm;break;case RC:s=i===ht?Q.ASTC12x12UnormSRGB:Q.ASTC12x12Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}else switch(t){case sp:switch(r){case Km:s=Q.RGBA8Snorm;break;case Ym:s=Q.RGBA16Sint;break;case xd:s=Q.RGBA16Uint;break;case Dr:s=Q.RGBA32Uint;break;case ci:s=Q.RGBA32Sint;break;case za:s=i===ht?Q.RGBA8UnormSRGB:Q.RGBA8Unorm;break;case qa:s=Q.RGBA16Float;break;case is:s=Q.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",r)}break;case jP:switch(r){case x6:s=Q.RGB9E5UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",r)}break;case qP:switch(r){case Km:s=Q.R8Snorm;break;case Ym:s=Q.R16Sint;break;case xd:s=Q.R16Uint;break;case Dr:s=Q.R32Uint;break;case ci:s=Q.R32Sint;break;case za:s=Q.R8Unorm;break;case qa:s=Q.R16Float;break;case is:s=Q.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",r)}break;case Fg:switch(r){case Km:s=Q.RG8Snorm;break;case Ym:s=Q.RG16Sint;break;case xd:s=Q.RG16Uint;break;case Dr:s=Q.RG32Uint;break;case ci:s=Q.RG32Sint;break;case za:s=Q.RG8Unorm;break;case qa:s=Q.RG16Float;break;case is:s=Q.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",r)}break;case Cu:switch(r){case xd:s=Q.Depth16Unorm;break;case Dr:s=Q.Depth24Plus;break;case is:s=Q.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",r)}break;case Bf:switch(r){case wy:s=Q.Depth24PlusStencil8;break;case is:e&&e.features.has(YC.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),s=Q.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",r)}break;case XP:switch(r){case ci:s=Q.R32Sint;break;case Dr:s=Q.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",r)}break;case KP:switch(r){case ci:s=Q.RG32Sint;break;case Dr:s=Q.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",r)}break;case YP:switch(r){case ci:s=Q.RGBA32Sint;break;case Dr:s=Q.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",r)}break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}return s}const kCe=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,UCe=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,HU={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},BCe=n=>{n=n.trim();const e=n.match(kCe);if(e!==null&&e.length===4){const t=e[2],r=[];let i=null;for(;(i=UCe.exec(t))!==null;)r.push({name:i[1],type:i[2]});const s=[];for(let u=0;u<r.length;u++){const{name:h,type:d}=r[u];let f=d;f.startsWith("texture")&&(f=d.split("<")[0]),f=HU[f]||f,s.push(new A2(f,h))}const o=n.substring(e[0].length),a=e[3]||"void",l=e[1]!==void 0?e[1]:"";return{type:HU[a]||a,inputs:s,name:l,inputsCode:t,blockCode:o,outputType:a}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class zCe extends N2{constructor(e){const{type:t,inputs:r,name:i,inputsCode:s,blockCode:o,outputType:a}=BCe(e);super(t,r,i),this.inputsCode=s,this.blockCode=o,this.outputType=a}getCode(e=this.name){const t=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${t}`+this.blockCode}}class $Ce extends g8{parseFunction(e){return new zCe(e)}}const Zh=self.GPUShaderStage,Sv={vertex:Zh?Zh.VERTEX:1,fragment:Zh?Zh.FRAGMENT:2,compute:Zh?Zh.COMPUTE:4},WU={instance:!0,swizzleAssign:!1,storageBuffer:!0},VCe={"^^":"tsl_xor"},GCe={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",imat2:"mat2x2<i32>",umat2:"mat2x2<u32>",bmat2:"mat2x2<bool>",mat3:"mat3x3<f32>",imat3:"mat3x3<i32>",umat3:"mat3x3<u32>",bmat3:"mat3x3<bool>",mat4:"mat4x4<f32>",imat4:"mat4x4<i32>",umat4:"mat4x4<u32>",bmat4:"mat4x4<bool>"},Sa={tsl_xor:new Xr("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new Xr("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new Xr("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new Xr("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new Xr("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new Xr("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new Xr("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new Xr("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new Xr("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping:new Xr(`
fn tsl_repeatWrapping( uv : vec2<f32>, dimension : vec2<u32> ) -> vec2<u32> {

	let uvScaled = vec2<u32>( uv * vec2<f32>( dimension ) );

	return ( ( uvScaled % dimension ) + dimension ) % dimension;

}
`),biquadraticTexture:new Xr(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, level : i32 ) -> vec4f {

	let iRes = vec2i( textureDimensions( map, level ) );
	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2i( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2i( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2i( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2i( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},Am={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};/Windows/g.test(navigator.userAgent)&&(Sa.pow_float=new Xr("fn tsl_pow_float( a : f32, b : f32 ) -> f32 { return select( -pow( -a, b ), pow( a, b ), a > 0.0 ); }"),Sa.pow_vec2=new Xr("fn tsl_pow_vec2( a : vec2f, b : vec2f ) -> vec2f { return vec2f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ) ); }",[Sa.pow_float]),Sa.pow_vec3=new Xr("fn tsl_pow_vec3( a : vec3f, b : vec3f ) -> vec3f { return vec3f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ) ); }",[Sa.pow_float]),Sa.pow_vec4=new Xr("fn tsl_pow_vec4( a : vec4f, b : vec4f ) -> vec4f { return vec4f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ), tsl_pow_float( a.w, b.w ) ); }",[Sa.pow_float]),Am.pow_float="tsl_pow_float",Am.pow_vec2="tsl_pow_vec2",Am.pow_vec3="tsl_pow_vec3",Am.pow_vec4="tsl_pow_vec4");let E8="";/Firefox/g.test(navigator.userAgent)!==!0&&(E8+=`diagnostic( off, derivative_uniformity );
`);class HCe extends c8{constructor(e,t){super(e,t,new $Ce),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==Hu}_generateTextureSample(e,t,r,i,s=this.shaderStage){return s==="fragment"?i?`textureSample( ${t}, ${t}_sampler, ${r}, ${i} )`:`textureSample( ${t}, ${t}_sampler, ${r} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,r):this.generateTextureLod(e,t,r,"0")}_generateVideoSample(e,t,r=this.shaderStage){if(r==="fragment")return`textureSampleBaseClampToEdge( ${e}, ${e}_sampler, vec2<f32>( ${t}.x, 1.0 - ${t}.y ) )`;console.error(`WebGPURenderer: THREE.VideoTexture does not support ${r} shader.`)}_generateTextureSampleLevel(e,t,r,i,s,o=this.shaderStage){return o==="fragment"&&this.isUnfilterable(e)===!1?`textureSampleLevel( ${t}, ${t}_sampler, ${r}, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,r,i):this.generateTextureLod(e,t,r,i)}generateFilteredTexture(e,t,r,i="0"){return this._include("biquadraticTexture"),`tsl_biquadraticTexture( ${t}, ${r}, i32( ${i} ) )`}generateTextureLod(e,t,r,i="0"){this._include("repeatWrapping");const s=e.isMultisampleRenderTargetTexture===!0?`textureDimensions( ${t} )`:`textureDimensions( ${t}, 0 )`;return`textureLoad( ${t}, tsl_repeatWrapping( ${r}, ${s} ), i32( ${i} ) )`}generateTextureLoad(e,t,r,i,s="0u"){return i?`textureLoad( ${t}, ${r}, ${i}, ${s} )`:`textureLoad( ${t}, ${r}, ${s} )`}generateTextureStore(e,t,r,i){return`textureStore( ${t}, ${r}, ${i} )`}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===is||e.isMultisampleRenderTargetTexture===!0}generateTexture(e,t,r,i,s=this.shaderStage){let o=null;return e.isVideoTexture===!0?o=this._generateVideoSample(t,r,s):this.isUnfilterable(e)?o=this.generateTextureLod(e,t,r,"0",i,s):o=this._generateTextureSample(e,t,r,i,s),o}generateTextureGrad(e,t,r,i,s,o=this.shaderStage){if(o==="fragment")return`textureSampleGrad( ${t}, ${t}_sampler, ${r},  ${i[0]}, ${i[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${o} shader.`)}generateTextureCompare(e,t,r,i,s,o=this.shaderStage){if(o==="fragment")return`textureSampleCompare( ${t}, ${t}_sampler, ${r}, ${i} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}generateTextureLevel(e,t,r,i,s,o=this.shaderStage){let a=null;return e.isVideoTexture===!0?a=this._generateVideoSample(t,r,o):a=this._generateTextureSampleLevel(e,t,r,i,s,o),a}generateTextureBias(e,t,r,i,s,o=this.shaderStage){if(o==="fragment")return`textureSampleBias( ${t}, ${t}_sampler, ${r}, ${i} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${o} shader.`)}getPropertyName(e,t=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(t==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const r=e.name,i=e.type;return i==="texture"||i==="cubeTexture"||i==="storageTexture"||i==="texture3D"?r:i==="buffer"||i==="storageBuffer"?`NodeBuffer_${e.id}.${r}`:e.groupNode.name+"."+r}return super.getPropertyName(e)}getOutputStructName(){return"output"}_getUniformGroupCount(e){return Object.keys(this.uniforms[e]).length}getFunctionOperator(e){const t=VCe[e];return t!==void 0?(this._include(t),t):null}getStorageAccess(e){if(e.isStorageTextureNode)switch(e.access){case PU.ReadOnly:return"read";case PU.WriteOnly:return"write";default:return"read_write"}else switch(e.access){case KC.Storage:return"read_write";case KC.ReadOnlyStorage:return"read";default:return"write"}}getUniformFromNode(e,t,r,i=null){const s=super.getUniformFromNode(e,t,r,i),o=this.getDataFromNode(e,r,this.globalCache);if(o.uniformGPU===void 0){let a;const l=e.groupNode,c=l.name,u=this.getBindGroupArray(c,r);if(t==="texture"||t==="cubeTexture"||t==="storageTexture"||t==="texture3D"){let h=null;if(t==="texture"||t==="storageTexture"?h=new a1(s.name,s.node,l,e.access?e.access:null):t==="cubeTexture"?h=new w8(s.name,s.node,l,e.access?e.access:null):t==="texture3D"&&(h=new T8(s.name,s.node,l,e.access?e.access:null)),h.store=e.isStorageTextureNode===!0,h.setVisibility(Sv[r]),r==="fragment"&&this.isUnfilterable(e.value)===!1&&h.store===!1){const d=new RCe(`${s.name}_sampler`,s.node,l);d.setVisibility(Sv[r]),u.push(d,h),a=[d,h]}else u.push(h),a=[h]}else if(t==="buffer"||t==="storageBuffer"){const h=t==="storageBuffer"?ICe:S8,d=new h(e,l);d.setVisibility(Sv[r]),u.push(d),a=d}else{const h=this.uniformGroups[r]||(this.uniformGroups[r]={});let d=h[c];d===void 0&&(d=new b8(c,l),d.setVisibility(Sv[r]),h[c]=d,u.push(d)),a=this.getNodeUniform(s,t),d.addUniform(a)}o.uniformGPU=a}return s}getBuiltin(e,t,r,i=this.shaderStage){const s=this.builtins[i]||(this.builtins[i]=new Map);return s.has(e)===!1&&s.set(e,{name:e,property:t,type:r}),t}hasBuiltin(e,t=this.shaderStage){return this.builtins[t]!==void 0&&this.builtins[t].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const t=e.layout,r=this.flowShaderNode(e),i=[];for(const o of t.inputs)i.push(o.name+" : "+this.getType(o.type));let s=`fn ${t.name}( ${i.join(", ")} ) -> ${this.getType(t.type)} {
${r.vars}
${r.code}
`;return r.result&&(s+=`	return ${r.result};
`),s+=`
}
`,s}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}isFlipY(){return!1}enableDirective(e,t=this.shaderStage){(this.directives[t]||(this.directives[t]=new Set)).add(e)}getDirectives(e){const t=[],r=this.directives[e];if(r!==void 0)for(const i of r)t.push(`enable ${i};`);return t.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}getBuiltins(e){const t=[],r=this.builtins[e];if(r!==void 0)for(const{name:i,property:s,type:o}of r.values())t.push(`@builtin( ${i} ) ${s} : ${o}`);return t.join(`,
	`)}getScopedArray(e,t,r,i){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:t,bufferType:r,bufferCount:i}),e}getScopedArrays(e){if(e!=="compute")return;const t=[];for(const{name:r,scope:i,bufferType:s,bufferCount:o}of this.scopedArrays.values()){const a=this.getType(s);t.push(`var<${i}> ${r}: array< ${a}, ${o} >;`)}return t.join(`
`)}getAttributes(e){const t=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","id","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const r=this.getBuiltins("attribute");r&&t.push(r);const i=this.getAttributesArray();for(let s=0,o=i.length;s<o;s++){const a=i[s],l=a.name,c=this.getType(a.type);t.push(`@location( ${s} ) ${l} : ${c}`)}}return t.join(`,
	`)}getStructMembers(e){const t=[],r=e.getMemberTypes();for(let s=0;s<r.length;s++){const o=r[s];t.push(`	@location( ${s} ) m${s} : ${o}<f32>`)}const i=this.getBuiltins("output");return i&&t.push("	"+i),t.join(`,
`)}getStructs(e){const t=[],r=this.structs[e];for(let i=0,s=r.length;i<s;i++){const o=r[i],a=o.name;let l=`struct ${a} {
`;l+=this.getStructMembers(o),l+=`
}`,t.push(l),t.push(`
var<private> output : ${a};

`)}return t.join(`

`)}getVar(e,t){return`var ${t} : ${this.getType(e)}`}getVars(e){const t=[],r=this.vars[e];if(r!==void 0)for(const i of r)t.push(`	${this.getVar(i.type,i.name)};`);return`
${t.join(`
`)}
`}getVaryings(e){const t=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const s=this.varyings,o=this.vars[e];for(let a=0;a<s.length;a++){const l=s[a];if(l.needsInterpolation){let c=`@location( ${a} )`;/^(int|uint|ivec|uvec)/.test(l.type)&&(c+=" @interpolate( flat )"),t.push(`${c} ${l.name} : ${this.getType(l.type)}`)}else e==="vertex"&&o.includes(l)===!1&&o.push(l)}}const r=this.getBuiltins(e);r&&t.push(r);const i=t.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+i):i}getUniforms(e){const t=this.uniforms[e],r=[],i=[],s=[],o={};for(const l of t){const c=l.groupNode.name,u=this.bindingsIndexes[c];if(l.type==="texture"||l.type==="cubeTexture"||l.type==="storageTexture"||l.type==="texture3D"){const h=l.node.value;e==="fragment"&&this.isUnfilterable(h)===!1&&l.node.isStorageTextureNode!==!0&&(h.isDepthTexture===!0&&h.compareFunction!==null?r.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name}_sampler : sampler_comparison;`):r.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name}_sampler : sampler;`));let d,f="";if(h.isMultisampleRenderTargetTexture===!0&&(f="_multisampled"),h.isCubeTexture===!0)d="texture_cube<f32>";else if(h.isDataArrayTexture===!0||h.isCompressedArrayTexture===!0)d="texture_2d_array<f32>";else if(h.isDepthTexture===!0)d=`texture_depth${f}_2d`;else if(h.isVideoTexture===!0)d="texture_external";else if(h.isData3DTexture===!0)d="texture_3d<f32>";else if(l.node.isStorageTextureNode===!0){const p=QC(h),g=this.getStorageAccess(l.node);d=`texture_storage_2d<${p}, ${g}>`}else{const p=this.getComponentTypeFromTexture(h).charAt(0);d=`texture${f}_2d<${p}32>`}r.push(`@binding( ${u.binding++} ) @group( ${u.group} ) var ${l.name} : ${d};`)}else if(l.type==="buffer"||l.type==="storageBuffer"){const h=l.node,d=this.getType(h.bufferType),f=h.bufferCount,p=f>0?", "+f:"",g=h.isAtomic?`atomic<${d}>`:`${d}`,y=`	${l.name} : array< ${g}${p} >
`,m=h.isStorageBufferNode?`storage, ${this.getStorageAccess(h)}`:"uniform";i.push(this._getWGSLStructBinding("NodeBuffer_"+h.id,y,m,u.binding++,u.group))}else{const h=this.getType(this.getVectorType(l.type)),d=l.groupNode.name;(o[d]||(o[d]={index:u.binding++,id:u.group,snippets:[]})).snippets.push(`	${l.name} : ${h}`)}}for(const l in o){const c=o[l];s.push(this._getWGSLStructBinding(l,c.snippets.join(`,
`),"uniform",c.index,c.id))}let a=r.join(`
`);return a+=i.join(`
`),a+=s.join(`
`),a}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){const r=e[t];r.uniforms=this.getUniforms(t),r.attributes=this.getAttributes(t),r.varyings=this.getVaryings(t),r.structs=this.getStructs(t),r.vars=this.getVars(t),r.codes=this.getCodes(t),r.directives=this.getDirectives(t),r.scopedArrays=this.getScopedArrays(t);let i=`// code

`;i+=this.flowCode[t];const s=this.flowNodes[t],o=s[s.length-1],a=o.outputNode,l=a!==void 0&&a.isOutputStructNode===!0;for(const c of s){const u=this.getFlowData(c),h=c.name;if(h&&(i.length>0&&(i+=`
`),i+=`	// flow -> ${h}
	`),i+=`${u.code}
	`,c===o&&t!=="compute"){if(i+=`// result

	`,t==="vertex")i+=`varyings.Vertex = ${u.result};`;else if(t==="fragment")if(l)r.returnType=a.nodeType,i+=`return ${u.result};`;else{let d="	@location(0) color: vec4<f32>";const f=this.getBuiltins("output");f&&(d+=`,
	`+f),r.returnType="OutputStruct",r.structs+=this._getWGSLStruct("OutputStruct",d),r.structs+=`
var<private> output : OutputStruct;

`,i+=`output.color = ${u.result};

	return output;`}}}r.flow=i}this.material!==null?(this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment)):this.computeShader=this._getWGSLComputeCode(e.compute,(this.object.workgroupSize||[64]).join(", "))}getMethod(e,t=null){let r;return t!==null&&(r=this._getWGSLMethod(e+"_"+t)),r===void 0&&(r=this._getWGSLMethod(e)),r||e}getType(e){return GCe[e]||e}isAvailable(e){let t=WU[e];return t===void 0&&(e==="float32Filterable"&&(t=this.renderer.hasFeature("float32-filterable")),WU[e]=t),t}_getWGSLMethod(e){return Sa[e]!==void 0&&this._include(e),Am[e]}_include(e){const t=Sa[e];return t.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(t),t}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${E8}

// uniforms
${e.uniforms}

// structs
${e.structs}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,t){return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${t} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = id.x + id.y * numWorkgroups.x * u32(${t}) + id.z * numWorkgroups.x * numWorkgroups.y * u32(${t});

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,t){return`
struct ${e} {
${t}
};`}_getWGSLStructBinding(e,t,r,i=0,s=0){const o=e+"Struct";return`${this._getWGSLStruct(o,t)}
@binding( ${i} ) @group( ${s} )
var<${r}> ${e} : ${o};`}}class WCe{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let t;return e.depthTexture!==null?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=Q.Depth24PlusStencil8:e.depth&&(t=Q.Depth24Plus),t}getTextureFormatGPU(e){return this.backend.get(e).format}getCurrentColorFormat(e){let t;return e.textures!==null?t=this.getTextureFormatGPU(e.textures[0]):t=this.getPreferredCanvasFormat(),t}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,t){if(e.isPoints)return Md.PointList;if(e.isLineSegments||e.isMesh&&t.wireframe===!0)return Md.LineList;if(e.isLine)return Md.LineStrip;if(e.isMesh)return Md.TriangleList}getSampleCount(e){let t=1;return e>1&&(t=Math.pow(2,Math.floor(Math.log2(e))),t===2&&(t=4)),t}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){return navigator.userAgent.includes("Quest")?Q.BGRA8Unorm:navigator.gpu.getPreferredCanvasFormat()}}const jCe=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]),qCe=new Map([[L6,["float16"]]]),XCe=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class KCe{constructor(e){this.backend=e}createAttribute(e,t){const r=this._getBufferAttribute(e),i=this.backend,s=i.get(r);let o=s.buffer;if(o===void 0){const a=i.device;let l=r.array;if(e.normalized===!1&&(l.constructor===Int16Array||l.constructor===Uint16Array)){const u=new Uint32Array(l.length);for(let h=0;h<l.length;h++)u[h]=l[h];l=u}if(r.array=l,(r.isStorageBufferAttribute||r.isStorageInstancedBufferAttribute)&&r.itemSize===3){l=new l.constructor(r.count*4);for(let u=0;u<r.count;u++)l.set(r.array.subarray(u*3,u*3+3),u*4);r.itemSize=4,r.array=l}const c=l.byteLength+(4-l.byteLength%4)%4;o=a.createBuffer({label:r.name,size:c,usage:t,mappedAtCreation:!0}),new l.constructor(o.getMappedRange()).set(l),o.unmap(),s.buffer=o}}updateAttribute(e){const t=this._getBufferAttribute(e),r=this.backend,i=r.device,s=r.get(t).buffer,o=t.array,a=t.updateRanges;if(a.length===0)i.queue.writeBuffer(s,0,o,0);else{for(let l=0,c=a.length;l<c;l++){const u=a[l];i.queue.writeBuffer(s,0,o,u.start*o.BYTES_PER_ELEMENT,u.count*o.BYTES_PER_ELEMENT)}t.clearUpdateRanges()}}createShaderVertexBuffers(e){const t=e.getAttributes(),r=new Map;for(let i=0;i<t.length;i++){const s=t[i],o=s.array.BYTES_PER_ELEMENT,a=this._getBufferAttribute(s);let l=r.get(a);if(l===void 0){let h,d;s.isInterleavedBufferAttribute===!0?(h=s.data.stride*o,d=s.data.isInstancedInterleavedBuffer?pv.Instance:pv.Vertex):(h=s.itemSize*o,d=s.isInstancedBufferAttribute?pv.Instance:pv.Vertex),s.normalized===!1&&(s.array.constructor===Int16Array||s.array.constructor===Uint16Array)&&(h=4),l={arrayStride:h,attributes:[],stepMode:d},r.set(a,l)}const c=this._getVertexFormat(s),u=s.isInterleavedBufferAttribute===!0?s.offset*o:0;l.attributes.push({shaderLocation:i,offset:u,format:c})}return Array.from(r.values())}destroyAttribute(e){const t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,r=t.device,s=t.get(this._getBufferAttribute(e)).buffer,o=s.size,a=r.createBuffer({label:e.name,size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),l=r.createCommandEncoder({});l.copyBufferToBuffer(s,0,a,0,o),a.unmap();const c=l.finish();return r.queue.submit([c]),await a.mapAsync(GPUMapMode.READ),a.getMappedRange()}_getVertexFormat(e){const{itemSize:t,normalized:r}=e,i=e.array.constructor,s=e.constructor;let o;if(t==1)o=XCe.get(i);else{const l=(qCe.get(s)||jCe.get(i))[r?1:0];if(l){const c=i.BYTES_PER_ELEMENT*t,h=Math.floor((c+3)/4)*4/i.BYTES_PER_ELEMENT;if(h%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");o=`${l}x${h}`}}return o||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),o}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class YCe{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const r=this.backend.device,i=[];let s=0;for(const o of e.bindings){const a={binding:s++,visibility:o.visibility};if(o.isUniformBuffer||o.isStorageBuffer){const l={};o.isStorageBuffer&&(l.type=o.access),a.buffer=l}else if(o.isSampler){const l={};o.texture.isDepthTexture&&o.texture.compareFunction!==null&&(l.type="comparison"),a.sampler=l}else if(o.isSampledTexture&&o.texture.isVideoTexture)a.externalTexture={};else if(o.isSampledTexture&&o.store){const l=this.backend.get(o.texture).texture.format,c=o.access;a.storageTexture={format:l,access:c}}else if(o.isSampledTexture){const l={};if(o.texture.isMultisampleRenderTargetTexture===!0&&(l.multisampled=!0),o.texture.isDepthTexture)l.sampleType=om.Depth;else if(o.texture.isDataTexture||o.texture.isDataArrayTexture||o.texture.isData3DTexture){const c=o.texture.type;c===ci?l.sampleType=om.SInt:c===Dr?l.sampleType=om.UInt:c===is&&(this.backend.hasFeature("float32-filterable")?l.sampleType=om.Float:l.sampleType=om.UnfilterableFloat)}o.isSampledCubeTexture?l.viewDimension=ws.Cube:o.texture.isDataArrayTexture||o.texture.isCompressedArrayTexture?l.viewDimension=ws.TwoDArray:o.isSampledTexture3D&&(l.viewDimension=ws.ThreeD),a.texture=l}else console.error(`WebGPUBindingUtils: Unsupported binding "${o}".`);i.push(a)}return r.createBindGroupLayout({entries:i})}createBindings(e){const{backend:t,bindGroupLayoutCache:r}=this,i=t.get(e);let s=r.get(e.bindingsReference);s===void 0&&(s=this.createBindingsLayout(e),r.set(e.bindingsReference,s));const o=this.createBindGroup(e,s);i.layout=s,i.group=o}updateBinding(e){const t=this.backend,r=t.device,i=e.buffer,s=t.get(e).buffer;r.queue.writeBuffer(s,0,i,0)}createBindGroup(e,t){const r=this.backend,i=r.device;let s=0;const o=[];for(const a of e.bindings){if(a.isUniformBuffer){const l=r.get(a);if(l.buffer===void 0){const c=a.byteLength,u=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,h=i.createBuffer({label:"bindingBuffer_"+a.name,size:c,usage:u});l.buffer=h}o.push({binding:s,resource:{buffer:l.buffer}})}else if(a.isStorageBuffer){const l=r.get(a);if(l.buffer===void 0){const c=a.attribute;l.buffer=r.get(c).buffer}o.push({binding:s,resource:{buffer:l.buffer}})}else if(a.isSampler){const l=r.get(a.texture);o.push({binding:s,resource:l.sampler})}else if(a.isSampledTexture){const l=r.get(a.texture);let c;if(l.externalTexture!==void 0)c=i.importExternalTexture({source:l.externalTexture});else{const u=a.store?1:l.texture.mipLevelCount,h=`view-${l.texture.width}-${l.texture.height}-${u}`;if(c=l[h],c===void 0){const d=oAe.All;let f;a.isSampledCubeTexture?f=ws.Cube:a.isSampledTexture3D?f=ws.ThreeD:a.texture.isDataArrayTexture||a.texture.isCompressedArrayTexture?f=ws.TwoDArray:f=ws.TwoD,c=l[h]=l.texture.createView({aspect:d,dimension:f,mipLevelCount:u})}}o.push({binding:s,resource:c})}s++}return i.createBindGroup({label:"bindGroup_"+e.name,layout:t,entries:o})}}class QCe{constructor(e){this.backend=e}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,t){const{object:r,material:i,geometry:s,pipeline:o}=e,{vertexProgram:a,fragmentProgram:l}=o,c=this.backend,u=c.device,h=c.utils,d=c.get(o),f=[];for(const S of e.getBindings()){const E=c.get(S);f.push(E.layout)}const p=c.attributeUtils.createShaderVertexBuffers(e);let g;i.transparent===!0&&i.blending!==kf&&(g=this._getBlending(i));let y={};i.stencilWrite===!0&&(y={compare:this._getStencilCompare(i),failOp:this._getStencilOperation(i.stencilFail),depthFailOp:this._getStencilOperation(i.stencilZFail),passOp:this._getStencilOperation(i.stencilZPass)});const m=this._getColorWriteMask(i),_=[];if(e.context.textures!==null){const S=e.context.textures;for(let E=0;E<S.length;E++){const I=h.getTextureFormatGPU(S[E]);_.push({format:I,blend:g,writeMask:m})}}else{const S=h.getCurrentColorFormat(e.context);_.push({format:S,blend:g,writeMask:m})}const v=c.get(a).module,x=c.get(l).module,b=this._getPrimitiveState(r,s,i),T=this._getDepthCompare(i),w=h.getCurrentDepthStencilFormat(e.context),M=this._getSampleCount(e.context),C={label:`renderPipeline_${i.name||i.type}_${i.id}`,vertex:Object.assign({},v,{buffers:p}),fragment:Object.assign({},x,{targets:_}),primitive:b,depthStencil:{format:w,depthWriteEnabled:i.depthWrite,depthCompare:T,stencilFront:y,stencilBack:{},stencilReadMask:i.stencilFuncMask,stencilWriteMask:i.stencilWriteMask},multisample:{count:M,alphaToCoverageEnabled:i.alphaToCoverage&&M>1},layout:u.createPipelineLayout({bindGroupLayouts:f})};if(t===null)d.pipeline=u.createRenderPipeline(C);else{const S=new Promise(E=>{u.createRenderPipelineAsync(C).then(I=>{d.pipeline=I,E()})});t.push(S)}}createBundleEncoder(e){const t=this.backend,{utils:r,device:i}=t,s=r.getCurrentDepthStencilFormat(e),o=r.getCurrentColorFormat(e),a=this._getSampleCount(e),l={label:"renderBundleEncoder",colorFormats:[o],depthStencilFormat:s,sampleCount:a};return i.createRenderBundleEncoder(l)}createComputePipeline(e,t){const r=this.backend,i=r.device,s=r.get(e.computeProgram).module,o=r.get(e),a=[];for(const l of t){const c=r.get(l);a.push(c.layout)}o.pipeline=i.createComputePipeline({compute:s,layout:i.createPipelineLayout({bindGroupLayouts:a})})}_getBlending(e){let t,r;const i=e.blending,s=e.blendSrc,o=e.blendDst,a=e.blendEquation;if(i===e6){const l=e.blendSrcAlpha!==null?e.blendSrcAlpha:s,c=e.blendDstAlpha!==null?e.blendDstAlpha:o,u=e.blendEquationAlpha!==null?e.blendEquationAlpha:a;t={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(o),operation:this._getBlendOperation(a)},r={srcFactor:this._getBlendFactor(l),dstFactor:this._getBlendFactor(c),operation:this._getBlendOperation(u)}}else{const l=e.premultipliedAlpha,c=(u,h,d,f)=>{t={srcFactor:u,dstFactor:h,operation:Xc.Add},r={srcFactor:d,dstFactor:f,operation:Xc.Add}};if(l)switch(i){case dc:c(_t.One,_t.OneMinusSrcAlpha,_t.One,_t.OneMinusSrcAlpha);break;case Px:c(_t.One,_t.One,_t.One,_t.One);break;case Ix:c(_t.Zero,_t.OneMinusSrc,_t.Zero,_t.One);break;case Lx:c(_t.Zero,_t.Src,_t.Zero,_t.SrcAlpha);break}else switch(i){case dc:c(_t.SrcAlpha,_t.OneMinusSrcAlpha,_t.One,_t.OneMinusSrcAlpha);break;case Px:c(_t.SrcAlpha,_t.One,_t.SrcAlpha,_t.One);break;case Ix:c(_t.Zero,_t.OneMinusSrc,_t.Zero,_t.One);break;case Lx:c(_t.Zero,_t.Src,_t.Zero,_t.Src);break}}if(t!==void 0&&r!==void 0)return{color:t,alpha:r};console.error("THREE.WebGPURenderer: Invalid blending: ",i)}_getBlendFactor(e){let t;switch(e){case r6:t=_t.Zero;break;case i6:t=_t.One;break;case s6:t=_t.Src;break;case o6:t=_t.OneMinusSrc;break;case Dx:t=_t.SrcAlpha;break;case Ox:t=_t.OneMinusSrcAlpha;break;case c6:t=_t.Dst;break;case u6:t=_t.OneMinusDstColor;break;case a6:t=_t.DstAlpha;break;case l6:t=_t.OneMinusDstAlpha;break;case h6:t=_t.SrcAlphaSaturated;break;case gEe:t=_t.Constant;break;case yEe:t=_t.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return t}_getStencilCompare(e){let t;const r=e.stencilFunc;switch(r){case Fxe:t=Nr.Never;break;case PC:t=Nr.Always;break;case kxe:t=Nr.Less;break;case Bxe:t=Nr.LessEqual;break;case Uxe:t=Nr.Equal;break;case Vxe:t=Nr.GreaterEqual;break;case zxe:t=Nr.Greater;break;case $xe:t=Nr.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",r)}return t}_getStencilOperation(e){let t;switch(e){case eu:t=Il.Keep;break;case Rxe:t=Il.Zero;break;case Nxe:t=Il.Replace;break;case Oxe:t=Il.Invert;break;case Pxe:t=Il.IncrementClamp;break;case Ixe:t=Il.DecrementClamp;break;case Lxe:t=Il.IncrementWrap;break;case Dxe:t=Il.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",t)}return t}_getBlendOperation(e){let t;switch(e){case Hl:t=Xc.Add;break;case t6:t=Xc.Subtract;break;case n6:t=Xc.ReverseSubtract;break;case uxe:t=Xc.Min;break;case hxe:t=Xc.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return t}_getPrimitiveState(e,t,r){const i={},s=this.backend.utils;switch(i.topology=s.getPrimitiveTopology(e,r),t.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(i.stripIndexFormat=t.index.array instanceof Uint16Array?Vf.Uint16:Vf.Uint32),r.side){case Og:i.frontFace=YT.CCW,i.cullMode=QT.Back;break;case cl:i.frontFace=YT.CCW,i.cullMode=QT.Front;break;case Nx:i.frontFace=YT.CCW,i.cullMode=QT.None;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",r.side);break}return i}_getColorWriteMask(e){return e.colorWrite===!0?NU.All:NU.None}_getDepthCompare(e){let t;if(e.depthTest===!1)t=Nr.Always;else{const r=e.depthFunc;switch(r){case d6:t=Nr.Never;break;case f6:t=Nr.Always;break;case p6:t=Nr.Less;break;case Fx:t=Nr.LessEqual;break;case m6:t=Nr.Equal;break;case g6:t=Nr.GreaterEqual;break;case y6:t=Nr.Greater;break;case v6:t=Nr.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",r)}}return t}}class ZCe extends M8{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.trackTimestamp=e.trackTimestamp===!0,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new WCe(this),this.attributeUtils=new KCe(this),this.bindingUtils=new YCe(this),this.pipelineUtils=new QCe(this),this.textureUtils=new FCe(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const t=this.parameters;let r;if(t.device===void 0){const o={powerPreference:t.powerPreference},a=await navigator.gpu.requestAdapter(o);if(a===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const l=Object.values(YC),c=[];for(const h of l)a.features.has(h)&&c.push(h);const u={requiredFeatures:c,requiredLimits:t.requiredLimits};r=await a.requestDevice(u)}else r=t.device;const i=t.context!==void 0?t.context:e.domElement.getContext("webgpu");this.device=r,this.context=i;const s=t.alpha?"premultiplied":"opaque";this.trackTimestamp=this.trackTimestamp&&this.hasFeature(YC.TimestampQuery),this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:s}),this.updateSize()}get coordinateSystem(){return Wu}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const r=this.renderer;e={colorAttachments:[{view:null}],depthStencilAttachment:{view:this.textureUtils.getDepthBuffer(r.depth,r.stencil).createView()}};const i=e.colorAttachments[0];this.renderer.samples>0?i.view=this.colorBuffer.createView():i.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const t=e.colorAttachments[0];return this.renderer.samples>0?t.resolveTarget=this.context.getCurrentTexture().createView():t.view=this.context.getCurrentTexture().createView(),e}_getRenderPassDescriptor(e){const t=e.renderTarget,r=this.get(t);let i=r.descriptors;if(i===void 0||r.width!==t.width||r.height!==t.height||r.activeMipmapLevel!==t.activeMipmapLevel||r.samples!==t.samples){i={},r.descriptors=i;const a=()=>{t.removeEventListener("dispose",a),this.delete(t)};t.addEventListener("dispose",a)}const s=e.getCacheKey();let o=i[s];if(o===void 0){const a=e.textures,l=[];for(let h=0;h<a.length;h++){const d=this.get(a[h]),f=d.texture.createView({baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,dimension:ws.TwoD});let p,g;d.msaaTexture!==void 0?(p=d.msaaTexture.createView(),g=f):(p=f,g=void 0),l.push({view:p,resolveTarget:g,loadOp:tr.Load,storeOp:Pr.Store})}const u={view:this.get(e.depthTexture).texture.createView()};o={colorAttachments:l,depthStencilAttachment:u},i[s]=o,r.width=t.width,r.height=t.height,r.samples=t.samples,r.activeMipmapLevel=t.activeMipmapLevel}return o}beginRender(e){const t=this.get(e),r=this.device,i=e.occlusionQueryCount;let s;i>0&&(t.currentOcclusionQuerySet&&t.currentOcclusionQuerySet.destroy(),t.currentOcclusionQueryBuffer&&t.currentOcclusionQueryBuffer.destroy(),t.currentOcclusionQuerySet=t.occlusionQuerySet,t.currentOcclusionQueryBuffer=t.occlusionQueryBuffer,t.currentOcclusionQueryObjects=t.occlusionQueryObjects,s=r.createQuerySet({type:"occlusion",count:i}),t.occlusionQuerySet=s,t.occlusionQueryIndex=0,t.occlusionQueryObjects=new Array(i),t.lastOcclusionObject=null);let o;e.textures===null?o=this._getDefaultRenderPassDescriptor():o=this._getRenderPassDescriptor(e),this.initTimestampQuery(e,o),o.occlusionQuerySet=s;const a=o.depthStencilAttachment;if(e.textures!==null){const u=o.colorAttachments;for(let h=0;h<u.length;h++){const d=u[h];e.clearColor?(d.clearValue=h===0?e.clearColorValue:{r:0,g:0,b:0,a:1},d.loadOp=tr.Clear,d.storeOp=Pr.Store):(d.loadOp=tr.Load,d.storeOp=Pr.Store)}}else{const u=o.colorAttachments[0];e.clearColor?(u.clearValue=e.clearColorValue,u.loadOp=tr.Clear,u.storeOp=Pr.Store):(u.loadOp=tr.Load,u.storeOp=Pr.Store)}e.depth&&(e.clearDepth?(a.depthClearValue=e.clearDepthValue,a.depthLoadOp=tr.Clear,a.depthStoreOp=Pr.Store):(a.depthLoadOp=tr.Load,a.depthStoreOp=Pr.Store)),e.stencil&&(e.clearStencil?(a.stencilClearValue=e.clearStencilValue,a.stencilLoadOp=tr.Clear,a.stencilStoreOp=Pr.Store):(a.stencilLoadOp=tr.Load,a.stencilStoreOp=Pr.Store));const l=r.createCommandEncoder({label:"renderContext_"+e.id}),c=l.beginRenderPass(o);if(t.descriptor=o,t.encoder=l,t.currentPass=c,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.renderBundles=[],e.viewport&&this.updateViewport(e),e.scissor){const{x:u,y:h,width:d,height:f}=e.scissorValue;c.setScissorRect(u,h,d,f)}}finishRender(e){const t=this.get(e),r=e.occlusionQueryCount;if(t.renderBundles.length>0&&t.currentPass.executeBundles(t.renderBundles),r>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery(),t.currentPass.end(),r>0){const i=r*8;let s=this.occludedResolveCache.get(i);s===void 0&&(s=this.device.createBuffer({size:i,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(i,s));const o=this.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,r,s,0),t.encoder.copyBufferToBuffer(s,0,o,0,i),t.occlusionQueryBuffer=o,this.resolveOccludedAsync(e)}if(this.prepareTimestampBuffer(e,t.encoder),this.device.queue.submit([t.encoder.finish()]),e.textures!==null){const i=e.textures;for(let s=0;s<i.length;s++){const o=i[s];o.generateMipmaps===!0&&this.textureUtils.generateMipmaps(o)}}}isOccluded(e,t){const r=this.get(e);return r.occluded&&r.occluded.has(t)}async resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueryBuffer:r,currentOcclusionQueryObjects:i}=t;if(r&&i){const s=new WeakSet;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueryBuffer=null,await r.mapAsync(GPUMapMode.READ);const o=r.getMappedRange(),a=new BigUint64Array(o);for(let l=0;l<i.length;l++)a[l]!==BigInt(0)&&s.add(i[l]);r.destroy(),t.occluded=s}}updateViewport(e){const{currentPass:t}=this.get(e),{x:r,y:i,width:s,height:o,minDepth:a,maxDepth:l}=e.viewportValue;t.setViewport(r,i,s,o,a,l)}clear(e,t,r,i=null){const s=this.device,o=this.renderer;let a=[],l,c,u,h;if(e){const p=this.getClearColor();if(this.renderer.alpha===!0){const g=p.a;c={r:p.r*g,g:p.g*g,b:p.b*g,a:g}}else c={r:p.r,g:p.g,b:p.b,a:p.a}}if(i===null){u=o.depth,h=o.stencil;const p=this._getDefaultRenderPassDescriptor();if(e){a=p.colorAttachments;const g=a[0];g.clearValue=c,g.loadOp=tr.Clear,g.storeOp=Pr.Store}(u||h)&&(l=p.depthStencilAttachment)}else{if(u=i.depth,h=i.stencil,e)for(const p of i.textures){const g=this.get(p),y=g.texture.createView();let m,_;g.msaaTexture!==void 0?(m=g.msaaTexture.createView(),_=y):(m=y,_=void 0),a.push({view:m,resolveTarget:_,clearValue:c,loadOp:tr.Clear,storeOp:Pr.Store})}(u||h)&&(l={view:this.get(i.depthTexture).texture.createView()})}u&&(t?(l.depthLoadOp=tr.Clear,l.depthClearValue=o.getClearDepth(),l.depthStoreOp=Pr.Store):(l.depthLoadOp=tr.Load,l.depthStoreOp=Pr.Store)),h&&(r?(l.stencilLoadOp=tr.Clear,l.stencilClearValue=o.getClearStencil(),l.stencilStoreOp=Pr.Store):(l.stencilLoadOp=tr.Load,l.stencilStoreOp=Pr.Store));const d=s.createCommandEncoder({});d.beginRenderPass({colorAttachments:a,depthStencilAttachment:l}).end(),s.queue.submit([d.finish()])}beginCompute(e){const t=this.get(e),r={};this.initTimestampQuery(e,r),t.cmdEncoderGPU=this.device.createCommandEncoder(),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass(r)}compute(e,t,r,i){const{passEncoderGPU:s}=this.get(e),o=this.get(i).pipeline;s.setPipeline(o);for(let u=0,h=r.length;u<h;u++){const d=r[u],f=this.get(d);s.setBindGroup(u,f.group)}const a=this.device.limits.maxComputeWorkgroupsPerDimension,l=this.get(t);l.dispatchSize===void 0&&(l.dispatchSize={x:0,y:1,z:1});const{dispatchSize:c}=l;t.dispatchCount>a?(c.x=Math.min(t.dispatchCount,a),c.y=Math.ceil(t.dispatchCount/a)):c.x=t.dispatchCount,s.dispatchWorkgroups(c.x,c.y,c.z)}finishCompute(e){const t=this.get(e);t.passEncoderGPU.end(),this.prepareTimestampBuffer(e,t.cmdEncoderGPU),this.device.queue.submit([t.cmdEncoderGPU.finish()])}draw(e,t){const{object:r,context:i,pipeline:s}=e,o=e.getBindings(),a=this.get(i),l=this.get(s).pipeline,c=a.currentSets,u=a.currentPass,h=e.getDrawParameters();if(h===null)return;c.pipeline!==l&&(u.setPipeline(l),c.pipeline=l);const d=c.bindingGroups;for(let y=0,m=o.length;y<m;y++){const _=o[y],v=this.get(_);d[_.index]!==_.id&&(u.setBindGroup(_.index,v.group),d[_.index]=_.id)}const f=e.getIndex(),p=f!==null;if(p===!0&&c.index!==f){const y=this.get(f).buffer,m=f.array instanceof Uint16Array?Vf.Uint16:Vf.Uint32;u.setIndexBuffer(y,m),c.index=f}const g=e.getVertexBuffers();for(let y=0,m=g.length;y<m;y++){const _=g[y];if(c.attributes[y]!==_){const v=this.get(_).buffer;u.setVertexBuffer(y,v),c.attributes[y]=_}}if(a.occlusionQuerySet!==void 0){const y=a.lastOcclusionObject;y!==r&&(y!==null&&y.occlusionTest===!0&&(u.endOcclusionQuery(),a.occlusionQueryIndex++),r.occlusionTest===!0&&(u.beginOcclusionQuery(a.occlusionQueryIndex),a.occlusionQueryObjects[a.occlusionQueryIndex]=r),a.lastOcclusionObject=r)}if(r.isBatchedMesh===!0){const y=r._multiDrawStarts,m=r._multiDrawCounts,_=r._multiDrawCount,v=r._multiDrawInstances,x=p?f.array.BYTES_PER_ELEMENT:1;for(let b=0;b<_;b++){const T=v?v[b]:1,w=T>1?0:b;u.drawIndexed(m[b],T,y[b]/x,0,w)}}else if(p===!0){const{vertexCount:y,instanceCount:m,firstVertex:_}=h;u.drawIndexed(y,m,_,0,0),t.update(r,y,m)}else{const{vertexCount:y,instanceCount:m,firstVertex:_}=h;u.draw(y,m,_,0),t.update(r,y,m)}}needsRenderUpdate(e){const t=this.get(e),{object:r,material:i}=e,s=this.utils,o=s.getSampleCountRenderContext(e.context),a=s.getCurrentColorSpace(e.context),l=s.getCurrentColorFormat(e.context),c=s.getCurrentDepthStencilFormat(e.context),u=s.getPrimitiveTopology(r,i);let h=!1;return(t.material!==i||t.materialVersion!==i.version||t.transparent!==i.transparent||t.blending!==i.blending||t.premultipliedAlpha!==i.premultipliedAlpha||t.blendSrc!==i.blendSrc||t.blendDst!==i.blendDst||t.blendEquation!==i.blendEquation||t.blendSrcAlpha!==i.blendSrcAlpha||t.blendDstAlpha!==i.blendDstAlpha||t.blendEquationAlpha!==i.blendEquationAlpha||t.colorWrite!==i.colorWrite||t.depthWrite!==i.depthWrite||t.depthTest!==i.depthTest||t.depthFunc!==i.depthFunc||t.stencilWrite!==i.stencilWrite||t.stencilFunc!==i.stencilFunc||t.stencilFail!==i.stencilFail||t.stencilZFail!==i.stencilZFail||t.stencilZPass!==i.stencilZPass||t.stencilFuncMask!==i.stencilFuncMask||t.stencilWriteMask!==i.stencilWriteMask||t.side!==i.side||t.alphaToCoverage!==i.alphaToCoverage||t.sampleCount!==o||t.colorSpace!==a||t.colorFormat!==l||t.depthStencilFormat!==c||t.primitiveTopology!==u||t.clippingContextCacheKey!==e.clippingContext.cacheKey)&&(t.material=i,t.materialVersion=i.version,t.transparent=i.transparent,t.blending=i.blending,t.premultipliedAlpha=i.premultipliedAlpha,t.blendSrc=i.blendSrc,t.blendDst=i.blendDst,t.blendEquation=i.blendEquation,t.blendSrcAlpha=i.blendSrcAlpha,t.blendDstAlpha=i.blendDstAlpha,t.blendEquationAlpha=i.blendEquationAlpha,t.colorWrite=i.colorWrite,t.depthWrite=i.depthWrite,t.depthTest=i.depthTest,t.depthFunc=i.depthFunc,t.stencilWrite=i.stencilWrite,t.stencilFunc=i.stencilFunc,t.stencilFail=i.stencilFail,t.stencilZFail=i.stencilZFail,t.stencilZPass=i.stencilZPass,t.stencilFuncMask=i.stencilFuncMask,t.stencilWriteMask=i.stencilWriteMask,t.side=i.side,t.alphaToCoverage=i.alphaToCoverage,t.sampleCount=o,t.colorSpace=a,t.colorFormat=l,t.depthStencilFormat=c,t.primitiveTopology=u,t.clippingContextCacheKey=e.clippingContext.cacheKey,h=!0),h}getRenderCacheKey(e){const{object:t,material:r}=e,i=this.utils,s=e.context;return[r.transparent,r.blending,r.premultipliedAlpha,r.blendSrc,r.blendDst,r.blendEquation,r.blendSrcAlpha,r.blendDstAlpha,r.blendEquationAlpha,r.colorWrite,r.depthWrite,r.depthTest,r.depthFunc,r.stencilWrite,r.stencilFunc,r.stencilFail,r.stencilZFail,r.stencilZPass,r.stencilFuncMask,r.stencilWriteMask,r.side,i.getSampleCountRenderContext(s),i.getCurrentColorSpace(s),i.getCurrentColorFormat(s),i.getCurrentDepthStencilFormat(s),i.getPrimitiveTopology(t,r),e.clippingContext.cacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,t,r,i,s,o){return this.textureUtils.copyTextureToBuffer(e,t,r,i,s,o)}initTimestampQuery(e,t){if(!this.trackTimestamp)return;const r=this.get(e);if(!r.timeStampQuerySet){const i=this.device.createQuerySet({type:"timestamp",count:2});Object.assign(t,{timestampWrites:{querySet:i,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1}}),r.timeStampQuerySet=i}}prepareTimestampBuffer(e,t){if(!this.trackTimestamp)return;const r=this.get(e),i=2*BigInt64Array.BYTES_PER_ELEMENT;r.currentTimestampQueryBuffers===void 0&&(r.currentTimestampQueryBuffers={resolveBuffer:this.device.createBuffer({label:"timestamp resolve buffer",size:i,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),resultBuffer:this.device.createBuffer({label:"timestamp result buffer",size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),isMappingPending:!1});const{resolveBuffer:s,resultBuffer:o,isMappingPending:a}=r.currentTimestampQueryBuffers;a!==!0&&(t.resolveQuerySet(r.timeStampQuerySet,0,2,s,0),t.copyBufferToBuffer(s,0,o,0,i))}async resolveTimestampAsync(e,t="render"){if(!this.trackTimestamp)return;const r=this.get(e);if(r.currentTimestampQueryBuffers===void 0)return;const{resultBuffer:i,isMappingPending:s}=r.currentTimestampQueryBuffers;s!==!0&&(r.currentTimestampQueryBuffers.isMappingPending=!0,i.mapAsync(GPUMapMode.READ).then(()=>{const o=new BigUint64Array(i.getMappedRange()),a=Number(o[1]-o[0])/1e6;this.renderer.info.updateTimestamp(t,a),i.unmap(),r.currentTimestampQueryBuffers.isMappingPending=!1}))}createNodeBuilder(e,t){return new HCe(e,t)}createProgram(e){const t=this.get(e);t.module={module:this.device.createShaderModule({code:e.code,label:e.stage}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){this.pipelineUtils.createRenderPipeline(e,t)}createComputePipeline(e,t){this.pipelineUtils.createComputePipeline(e,t)}beginBundle(e){const t=this.get(e);t._currentPass=t.currentPass,t._currentSets=t.currentSets,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,t){const r=this.get(e),s=r.currentPass.finish();this.get(t).bundleGPU=s,r.currentSets=r._currentSets,r.currentPass=r._currentPass}addBundle(e,t){this.get(e).renderBundles.push(this.get(t).bundleGPU)}createBindings(e){this.bindingUtils.createBindings(e)}updateBindings(e){this.bindingUtils.createBindings(e)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,t,r=null,i=null,s=0){let o=0,a=0,l=0,c=0,u=0,h=0,d=e.image.width,f=e.image.height;r!==null&&(c=r.x,u=r.y,h=r.z||0,d=r.width,f=r.height),i!==null&&(o=i.x,a=i.y,l=i.z||0);const p=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+t.id}),g=this.get(e).texture,y=this.get(t).texture;p.copyTextureToTexture({texture:g,mipLevel:s,origin:{x:c,y:u,z:h}},{texture:y,mipLevel:s,origin:{x:o,y:a,z:l}},[d,f,1]),this.device.queue.submit([p.finish()])}copyFramebufferToTexture(e,t,r){const i=this.get(t),{encoder:s,descriptor:o}=i;let a=null;t.renderTarget?e.isDepthTexture?a=this.get(t.depthTexture).texture:a=this.get(t.textures[0]).texture:e.isDepthTexture?a=this.textureUtils.getDepthBuffer(t.depth,t.stencil):a=this.context.getCurrentTexture();const l=this.get(e).texture;if(a.format!==l.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",a.format,l.format);return}i.currentPass.end(),s.copyTextureToTexture({texture:a,origin:{x:r.x,y:r.y,z:0}},{texture:l},[r.z,r.w]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e);for(let c=0;c<o.colorAttachments.length;c++)o.colorAttachments[c].loadOp=tr.Load;t.depth&&(o.depthStencilAttachment.depthLoadOp=tr.Load),t.stencil&&(o.depthStencilAttachment.stencilLoadOp=tr.Load),i.currentPass=s.beginRenderPass(o),i.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null}}}class JCe extends Y6{constructor(e,t,r,i,s,o){super(e,t,r,i,s,o),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}class eRe extends v8{constructor(){super(),this.addMaterial(lMe,H6),this.addMaterial(s8,i2),this.addMaterial(qMe,G6),this.addMaterial(QMe,W6),this.addMaterial(tMe,Wb),this.addMaterial(oMe,q6),this.addMaterial(KTe,j6),this.addMaterial(tEe,X6),this.addMaterial(HTe,n2),this.addMaterial(jTe,K6),this.addMaterial(rEe,$6),this.addMaterial(aEe,B6),this.addMaterial(uEe,V6),this.addLight(OAe,$Se),this.addLight(FAe,GSe),this.addLight(kAe,WSe),this.addLight(m8,Y6),this.addLight(BAe,HSe),this.addLight(zAe,USe),this.addLight($Ae,qSe),this.addLight(UAe,JCe),this.addToneMapping(wAe,pxe),this.addToneMapping(TAe,mxe),this.addToneMapping(MAe,gxe),this.addToneMapping(AAe,yxe),this.addToneMapping(PAe,vxe),this.addToneMapping(IAe,_xe),this.addColorSpace(bAe,BC(Ls,ht)),this.addColorSpace(SAe,BC(ht,Ls))}}class tRe extends aCe{constructor(e={}){let t;e.forceWebGL?t=GU:(t=ZCe,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new GU(e)));const r=new t(e);super(r,e),this.nodes.library=new eRe,this.isWebGPURenderer=!0}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Gb}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Gb);const oM={type:"change"},L2={type:"start"},D2={type:"end"},jU=1e-6,jt={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},bv=new Ve,Ll=new Ve,nRe=new Y,wv=new Y,aM=new Y,Jh=new So,qU=new Y,Tv=new Y,lM=new Y,Mv=new Y;class rRe extends zb{constructor(e,t=null){super(e,t),this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:Tr.ROTATE,MIDDLE:Tr.DOLLY,RIGHT:Tr.PAN},this.state=jt.NONE,this.keyState=jt.NONE,this.target=new Y,this._lastPosition=new Y,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new Y,this._movePrev=new Ve,this._moveCurr=new Ve,this._lastAxis=new Y,this._zoomStart=new Ve,this._zoomEnd=new Ve,this._panStart=new Ve,this._panEnd=new Ve,this._pointers=[],this._pointerPositions={},this._onPointerMove=sRe.bind(this),this._onPointerDown=iRe.bind(this),this._onPointerUp=oRe.bind(this),this._onPointerCancel=aRe.bind(this),this._onContextMenu=pRe.bind(this),this._onMouseWheel=fRe.bind(this),this._onKeyDown=cRe.bind(this),this._onKeyUp=lRe.bind(this),this._onTouchStart=mRe.bind(this),this._onTouchMove=gRe.bind(this),this._onTouchEnd=yRe.bind(this),this._onMouseDown=uRe.bind(this),this._onMouseMove=hRe.bind(this),this._onMouseUp=dRe.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,t!==null&&(this.connect(),this.handleResize()),this.update()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){const e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>jU&&(this.dispatchEvent(oM),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>jU||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(oM),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=jt.NONE,this.keyState=jt.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(oM),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(Ll.copy(this._panEnd).sub(this._panStart),Ll.lengthSq()){if(this.object.isOrthographicCamera){const e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,t=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;Ll.x*=e,Ll.y*=t}Ll.multiplyScalar(this._eye.length()*this.panSpeed),wv.copy(this._eye).cross(this.object.up).setLength(Ll.x),wv.add(nRe.copy(this.object.up).setLength(Ll.y)),this.object.position.add(wv),this.target.add(wv),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(Ll.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){Mv.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=Mv.length();e?(this._eye.copy(this.object.position).sub(this.target),qU.copy(this._eye).normalize(),Tv.copy(this.object.up).normalize(),lM.crossVectors(Tv,qU).normalize(),Tv.setLength(this._moveCurr.y-this._movePrev.y),lM.setLength(this._moveCurr.x-this._movePrev.x),Mv.copy(Tv.add(lM)),aM.crossVectors(Mv,this._eye).normalize(),e*=this.rotateSpeed,Jh.setFromAxisAngle(aM,e),this._eye.applyQuaternion(Jh),this.object.up.applyQuaternion(Jh),this._lastAxis.copy(aM),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),Jh.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(Jh),this.object.up.applyQuaternion(Jh)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===jt.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=KA.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,e!==1&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=KA.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,t){return bv.set((e-this.screen.left)/this.screen.width,(t-this.screen.top)/this.screen.height),bv}_getMouseOnCircle(e,t){return bv.set((e-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-t))/this.screen.width),bv}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t].pointerId==e.pointerId){this._pointers.splice(t,1);return}}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new Ve,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[t.pointerId]}_checkDistances(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}function iRe(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n))}function sRe(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function oRe(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchEnd(n):this._onMouseUp(),this._removePointer(n),this._pointers.length===0&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function aRe(n){this._removePointer(n)}function lRe(){this.enabled!==!1&&(this.keyState=jt.NONE,window.addEventListener("keydown",this._onKeyDown))}function cRe(n){this.enabled!==!1&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===jt.NONE&&(n.code===this.keys[jt.ROTATE]&&!this.noRotate?this.keyState=jt.ROTATE:n.code===this.keys[jt.ZOOM]&&!this.noZoom?this.keyState=jt.ZOOM:n.code===this.keys[jt.PAN]&&!this.noPan&&(this.keyState=jt.PAN)))}function uRe(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Tr.DOLLY:this.state=jt.ZOOM;break;case Tr.ROTATE:this.state=jt.ROTATE;break;case Tr.PAN:this.state=jt.PAN;break;default:this.state=jt.NONE}const t=this.keyState!==jt.NONE?this.keyState:this.state;t===jt.ROTATE&&!this.noRotate?(this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr)):t===jt.ZOOM&&!this.noZoom?(this._zoomStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._zoomEnd.copy(this._zoomStart)):t===jt.PAN&&!this.noPan&&(this._panStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(L2)}function hRe(n){const e=this.keyState!==jt.NONE?this.keyState:this.state;e===jt.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY))):e===jt.ZOOM&&!this.noZoom?this._zoomEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY)):e===jt.PAN&&!this.noPan&&this._panEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY))}function dRe(){this.state=jt.NONE,this.dispatchEvent(D2)}function fRe(n){if(this.enabled!==!1&&this.noZoom!==!0){switch(n.preventDefault(),n.deltaMode){case 2:this._zoomStart.y-=n.deltaY*.025;break;case 1:this._zoomStart.y-=n.deltaY*.01;break;default:this._zoomStart.y-=n.deltaY*25e-5;break}this.dispatchEvent(L2),this.dispatchEvent(D2)}}function pRe(n){this.enabled!==!1&&n.preventDefault()}function mRe(n){switch(this._trackPointer(n),this._pointers.length){case 1:this.state=jt.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this.state=jt.TOUCH_ZOOM_PAN;const e=this._pointers[0].pageX-this._pointers[1].pageX,t=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+t*t);const r=(this._pointers[0].pageX+this._pointers[1].pageX)/2,i=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(r,i)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(L2)}function gRe(n){switch(this._trackPointer(n),this._pointers.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY));break;default:const e=this._getSecondPointerPosition(n),t=n.pageX-e.x,r=n.pageY-e.y;this._touchZoomDistanceEnd=Math.sqrt(t*t+r*r);const i=(n.pageX+e.x)/2,s=(n.pageY+e.y)/2;this._panEnd.copy(this._getMouseOnScreen(i,s));break}}function yRe(n){switch(this._pointers.length){case 0:this.state=jt.NONE;break;case 1:this.state=jt.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=jt.TOUCH_ZOOM_PAN;for(let e=0;e<this._pointers.length;e++)if(this._pointers[e].pointerId!==n.pointerId){const t=this._pointerPositions[this._pointers[e].pointerId];this._moveCurr.copy(this._getMouseOnCircle(t.x,t.y)),this._movePrev.copy(this._moveCurr);break}break}this.dispatchEvent(D2)}const XU={type:"change"},O2={type:"start"},A8={type:"end"},Ev=new Fb,KU=new wa,vRe=Math.cos(70*KA.DEG2RAD),fr=new Y,vi=2*Math.PI,dn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},cM=1e-6;class _Re extends zb{constructor(e,t=null){super(e,t),this.state=dn.NONE,this.enabled=!0,this.target=new Y,this.cursor=new Y,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Tr.ROTATE,MIDDLE:Tr.DOLLY,RIGHT:Tr.PAN},this.touches={ONE:Fa.ROTATE,TWO:Fa.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new Y,this._lastQuaternion=new So,this._lastTargetPosition=new Y,this._quat=new So().setFromUnitVectors(e.up,new Y(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new JA,this._sphericalDelta=new JA,this._scale=1,this._panOffset=new Y,this._rotateStart=new Ve,this._rotateEnd=new Ve,this._rotateDelta=new Ve,this._panStart=new Ve,this._panEnd=new Ve,this._panDelta=new Ve,this._dollyStart=new Ve,this._dollyEnd=new Ve,this._dollyDelta=new Ve,this._dollyDirection=new Y,this._mouse=new Ve,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=SRe.bind(this),this._onPointerDown=xRe.bind(this),this._onPointerUp=bRe.bind(this),this._onContextMenu=RRe.bind(this),this._onMouseWheel=MRe.bind(this),this._onKeyDown=ERe.bind(this),this._onTouchStart=ARe.bind(this),this._onTouchMove=CRe.bind(this),this._onMouseDown=wRe.bind(this),this._onMouseMove=TRe.bind(this),this._interceptControlDown=NRe.bind(this),this._interceptControlUp=PRe.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(XU),this.update(),this.state=dn.NONE}update(e=null){const t=this.object.position;fr.copy(t).sub(this.target),fr.applyQuaternion(this._quat),this._spherical.setFromVector3(fr),this.autoRotate&&this.state===dn.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let r=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(r)&&isFinite(i)&&(r<-Math.PI?r+=vi:r>Math.PI&&(r-=vi),i<-Math.PI?i+=vi:i>Math.PI&&(i-=vi),r<=i?this._spherical.theta=Math.max(r,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(r+i)/2?Math.max(r,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let s=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const o=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),s=o!=this._spherical.radius}if(fr.setFromSpherical(this._spherical),fr.applyQuaternion(this._quatInverse),t.copy(this.target).add(fr),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let o=null;if(this.object.isPerspectiveCamera){const a=fr.length();o=this._clampDistance(a*this._scale);const l=a-o;this.object.position.addScaledVector(this._dollyDirection,l),this.object.updateMatrixWorld(),s=!!l}else if(this.object.isOrthographicCamera){const a=new Y(this._mouse.x,this._mouse.y,0);a.unproject(this.object);const l=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),s=l!==this.object.zoom;const c=new Y(this._mouse.x,this._mouse.y,0);c.unproject(this.object),this.object.position.sub(c).add(a),this.object.updateMatrixWorld(),o=fr.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;o!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(o).add(this.object.position):(Ev.origin.copy(this.object.position),Ev.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(Ev.direction))<vRe?this.object.lookAt(this.target):(KU.setFromNormalAndCoplanarPoint(this.object.up,this.target),Ev.intersectPlane(KU,this.target))))}else if(this.object.isOrthographicCamera){const o=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),o!==this.object.zoom&&(this.object.updateProjectionMatrix(),s=!0)}return this._scale=1,this._performCursorZoom=!1,s||this._lastPosition.distanceToSquared(this.object.position)>cM||8*(1-this._lastQuaternion.dot(this.object.quaternion))>cM||this._lastTargetPosition.distanceToSquared(this.target)>cM?(this.dispatchEvent(XU),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?vi/60*this.autoRotateSpeed*e:vi/60/60*this.autoRotateSpeed}_getZoomScale(e){const t=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*t)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,t){fr.setFromMatrixColumn(t,0),fr.multiplyScalar(-e),this._panOffset.add(fr)}_panUp(e,t){this.screenSpacePanning===!0?fr.setFromMatrixColumn(t,1):(fr.setFromMatrixColumn(t,0),fr.crossVectors(this.object.up,fr)),fr.multiplyScalar(e),this._panOffset.add(fr)}_pan(e,t){const r=this.domElement;if(this.object.isPerspectiveCamera){const i=this.object.position;fr.copy(i).sub(this.target);let s=fr.length();s*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*s/r.clientHeight,this.object.matrix),this._panUp(2*t*s/r.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this._panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,t){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const r=this.domElement.getBoundingClientRect(),i=e-r.left,s=t-r.top,o=r.width,a=r.height;this._mouse.x=i/o*2-1,this._mouse.y=-(s/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(vi*this._rotateDelta.x/t.clientHeight),this._rotateUp(vi*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let t=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(vi*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,this.keyPanSpeed),t=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateUp(-vi*this.rotateSpeed/this.domElement.clientHeight):this._pan(0,-this.keyPanSpeed),t=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(vi*this.rotateSpeed/this.domElement.clientHeight):this._pan(this.keyPanSpeed,0),t=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this._rotateLeft(-vi*this.rotateSpeed/this.domElement.clientHeight):this._pan(-this.keyPanSpeed,0),t=!0;break}t&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._rotateStart.set(r,i)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panStart.set(r,i)}}_handleTouchStartDolly(e){const t=this._getSecondPointerPosition(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);this._dollyStart.set(0,s)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),s=.5*(e.pageY+r.y);this._rotateEnd.set(i,s)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const t=this.domElement;this._rotateLeft(vi*this._rotateDelta.x/t.clientHeight),this._rotateUp(vi*this._rotateDelta.y/t.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const t=this._getSecondPointerPosition(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this._panEnd.set(r,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const t=this._getSecondPointerPosition(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);this._dollyEnd.set(0,s),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const o=(e.pageX+t.x)*.5,a=(e.pageY+t.y)*.5;this._updateZoomParameters(o,a)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId){this._pointers.splice(t,1);return}}_isTrackingPointer(e){for(let t=0;t<this._pointers.length;t++)if(this._pointers[t]==e.pointerId)return!0;return!1}_trackPointer(e){let t=this._pointerPositions[e.pointerId];t===void 0&&(t=new Ve,this._pointerPositions[e.pointerId]=t),t.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const t=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[t]}_customWheelEvent(e){const t=e.deltaMode,r={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:r.deltaY*=16;break;case 2:r.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(r.deltaY*=10),r}}function xRe(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function SRe(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function bRe(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(A8),this.state=dn.NONE;break;case 1:const e=this._pointers[0],t=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:t.x,pageY:t.y});break}}function wRe(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Tr.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=dn.DOLLY;break;case Tr.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=dn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=dn.ROTATE}break;case Tr.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=dn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=dn.PAN}break;default:this.state=dn.NONE}this.state!==dn.NONE&&this.dispatchEvent(O2)}function TRe(n){switch(this.state){case dn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case dn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case dn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function MRe(n){this.enabled===!1||this.enableZoom===!1||this.state!==dn.NONE||(n.preventDefault(),this.dispatchEvent(O2),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(A8))}function ERe(n){this.enabled===!1||this.enablePan===!1||this._handleKeyDown(n)}function ARe(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case Fa.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=dn.TOUCH_ROTATE;break;case Fa.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=dn.TOUCH_PAN;break;default:this.state=dn.NONE}break;case 2:switch(this.touches.TWO){case Fa.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=dn.TOUCH_DOLLY_PAN;break;case Fa.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=dn.TOUCH_DOLLY_ROTATE;break;default:this.state=dn.NONE}break;default:this.state=dn.NONE}this.state!==dn.NONE&&this.dispatchEvent(O2)}function CRe(n){switch(this._trackPointer(n),this.state){case dn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case dn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case dn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case dn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=dn.NONE}}function RRe(n){this.enabled!==!1&&n.preventDefault()}function NRe(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function PRe(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const IRe={type:"change"},YU=1e-6,QU=new So;class LRe extends zb{constructor(e,t=null){super(e,t),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new Y(0,0,0),this._rotationVector=new Y(0,0,0),this._lastQuaternion=new So,this._lastPosition=new Y,this._status=0,this._onKeyDown=DRe.bind(this),this._onKeyUp=ORe.bind(this),this._onPointerMove=kRe.bind(this),this._onPointerDown=FRe.bind(this),this._onPointerUp=URe.bind(this),this._onPointerCancel=BRe.bind(this),this._onContextMenu=zRe.bind(this),t!==null&&this.connect()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(this.enabled===!1)return;const t=this.object,r=e*this.movementSpeed,i=e*this.rollSpeed;t.translateX(this._moveVector.x*r),t.translateY(this._moveVector.y*r),t.translateZ(this._moveVector.z*r),QU.set(this._rotationVector.x*i,this._rotationVector.y*i,this._rotationVector.z*i,1).normalize(),t.quaternion.multiply(QU),(this._lastPosition.distanceToSquared(t.position)>YU||8*(1-this._lastQuaternion.dot(t.quaternion))>YU)&&(this.dispatchEvent(IRe),this._lastQuaternion.copy(t.quaternion),this._lastPosition.copy(t.position))}_updateMovementVector(){const e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}function DRe(n){if(!(n.altKey||this.enabled===!1)){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1;break}this._updateMovementVector(),this._updateRotationVector()}}function ORe(n){if(this.enabled!==!1){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0;break}this._updateMovementVector(),this._updateRotationVector()}}function FRe(n){if(this.enabled!==!1)if(this.dragToLook)this._status++;else{switch(n.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1;break}this._updateMovementVector()}}function kRe(n){if(this.enabled!==!1&&(!this.dragToLook||this._status>0)){const e=this._getContainerDimensions(),t=e.size[0]/2,r=e.size[1]/2;this._moveState.yawLeft=-(n.pageX-e.offset[0]-t)/t,this._moveState.pitchDown=(n.pageY-e.offset[1]-r)/r,this._updateRotationVector()}}function URe(n){if(this.enabled!==!1){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(n.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0;break}this._updateMovementVector()}this._updateRotationVector()}}function BRe(){this.enabled!==!1&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function zRe(n){this.enabled!==!1&&n.preventDefault()}const $Re={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class l1{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const VRe=new EP(-1,1,1,-1,0,1);class GRe extends Vs{constructor(){super(),this.setAttribute("position",new gr([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new gr([0,2,0,0,2,0],2))}}const HRe=new GRe;class WRe{constructor(e){this._mesh=new Ns(HRe,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,VRe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class jRe extends l1{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof Xo?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=$V.clone(e.uniforms),this.material=new Xo({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new WRe(this.material)}render(e,t,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class ZU extends l1{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,r){const i=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),s.buffers.stencil.setFunc(i.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(i.EQUAL,1,4294967295),s.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP),s.buffers.stencil.setLocked(!0)}}class qRe extends l1{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class XRe{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const r=e.getSize(new Ve);this._width=r.width,this._height=r.height,t=new vc(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:np}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new jRe($Re),this.copyPass.material.blending=Ga,this.clock=new oG}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let r=!1;for(let i=0,s=this.passes.length;i<s;i++){const o=this.passes[i];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),o.needsSwap){if(r){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}ZU!==void 0&&(o instanceof ZU?r=!0:o instanceof qRe&&(r=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new Ve);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class KRe extends l1{constructor(e,t,r=null,i=null,s=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Ot}render(e,t,r){const i=e.autoClear;e.autoClear=!1;let s,o;this.overrideMaterial!==null&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=o),e.autoClear=i}}function ZC(n){return ZC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ZC(n)}function YRe(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}function C8(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C8=function(){return!!n})()}function QRe(n,e,t){if(C8())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(n.bind.apply(n,r));return t&&Tg(i,t.prototype),i}function JC(n){var e=typeof Map=="function"?new Map:void 0;return JC=function(r){if(r===null||!YRe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return QRe(r,arguments,ZC(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Tg(i,r)},JC(n)}var Go=function(n){MN(e,n);function e(t){var r;return r=n.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,w4(r)}return e}(JC(Error));function uM(n){return Math.round(n*255)}function ZRe(n,e,t){return uM(n)+","+uM(e)+","+uM(t)}function Wg(n,e,t,r){if(r===void 0&&(r=ZRe),e===0)return r(t,t,t);var i=(n%360+360)%360/60,s=(1-Math.abs(2*t-1))*e,o=s*(1-Math.abs(i%2-1)),a=0,l=0,c=0;i>=0&&i<1?(a=s,l=o):i>=1&&i<2?(a=o,l=s):i>=2&&i<3?(l=s,c=o):i>=3&&i<4?(l=o,c=s):i>=4&&i<5?(a=o,c=s):i>=5&&i<6&&(a=s,c=o);var u=t-s/2,h=a+u,d=l+u,f=c+u;return r(h,d,f)}var JU={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function JRe(n){if(typeof n!="string")return n;var e=n.toLowerCase();return JU[e]?"#"+JU[e]:n}var eNe=/^#[a-fA-F0-9]{6}$/,tNe=/^#[a-fA-F0-9]{8}$/,nNe=/^#[a-fA-F0-9]{3}$/,rNe=/^#[a-fA-F0-9]{4}$/,hM=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,iNe=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,sNe=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,oNe=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function Ku(n){if(typeof n!="string")throw new Go(3);var e=JRe(n);if(e.match(eNe))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(tNe)){var t=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:t}}if(e.match(nNe))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(rNe)){var r=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:r}}var i=hM.exec(e);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var s=iNe.exec(e.substring(0,50));if(s)return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10),alpha:parseFloat(""+s[4])>1?parseFloat(""+s[4])/100:parseFloat(""+s[4])};var o=sNe.exec(e);if(o){var a=parseInt(""+o[1],10),l=parseInt(""+o[2],10)/100,c=parseInt(""+o[3],10)/100,u="rgb("+Wg(a,l,c)+")",h=hM.exec(u);if(!h)throw new Go(4,e,u);return{red:parseInt(""+h[1],10),green:parseInt(""+h[2],10),blue:parseInt(""+h[3],10)}}var d=oNe.exec(e.substring(0,50));if(d){var f=parseInt(""+d[1],10),p=parseInt(""+d[2],10)/100,g=parseInt(""+d[3],10)/100,y="rgb("+Wg(f,p,g)+")",m=hM.exec(y);if(!m)throw new Go(4,e,y);return{red:parseInt(""+m[1],10),green:parseInt(""+m[2],10),blue:parseInt(""+m[3],10),alpha:parseFloat(""+d[4])>1?parseFloat(""+d[4])/100:parseFloat(""+d[4])}}throw new Go(5)}function aNe(n){var e=n.red/255,t=n.green/255,r=n.blue/255,i=Math.max(e,t,r),s=Math.min(e,t,r),o=(i+s)/2;if(i===s)return n.alpha!==void 0?{hue:0,saturation:0,lightness:o,alpha:n.alpha}:{hue:0,saturation:0,lightness:o};var a,l=i-s,c=o>.5?l/(2-i-s):l/(i+s);switch(i){case e:a=(t-r)/l+(t<r?6:0);break;case t:a=(r-e)/l+2;break;default:a=(e-t)/l+4;break}return a*=60,n.alpha!==void 0?{hue:a,saturation:c,lightness:o,alpha:n.alpha}:{hue:a,saturation:c,lightness:o}}function Dc(n){return aNe(Ku(n))}var lNe=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},eR=lNe;function ru(n){var e=n.toString(16);return e.length===1?"0"+e:e}function dM(n){return ru(Math.round(n*255))}function cNe(n,e,t){return eR("#"+dM(n)+dM(e)+dM(t))}function Qx(n,e,t){return Wg(n,e,t,cNe)}function uNe(n,e,t){if(typeof n=="number"&&typeof e=="number"&&typeof t=="number")return Qx(n,e,t);if(typeof n=="object"&&e===void 0&&t===void 0)return Qx(n.hue,n.saturation,n.lightness);throw new Go(1)}function hNe(n,e,t,r){if(typeof n=="number"&&typeof e=="number"&&typeof t=="number"&&typeof r=="number")return r>=1?Qx(n,e,t):"rgba("+Wg(n,e,t)+","+r+")";if(typeof n=="object"&&e===void 0&&t===void 0&&r===void 0)return n.alpha>=1?Qx(n.hue,n.saturation,n.lightness):"rgba("+Wg(n.hue,n.saturation,n.lightness)+","+n.alpha+")";throw new Go(2)}function tR(n,e,t){if(typeof n=="number"&&typeof e=="number"&&typeof t=="number")return eR("#"+ru(n)+ru(e)+ru(t));if(typeof n=="object"&&e===void 0&&t===void 0)return eR("#"+ru(n.red)+ru(n.green)+ru(n.blue));throw new Go(6)}function c1(n,e,t,r){if(typeof n=="string"&&typeof e=="number"){var i=Ku(n);return"rgba("+i.red+","+i.green+","+i.blue+","+e+")"}else{if(typeof n=="number"&&typeof e=="number"&&typeof t=="number"&&typeof r=="number")return r>=1?tR(n,e,t):"rgba("+n+","+e+","+t+","+r+")";if(typeof n=="object"&&e===void 0&&t===void 0&&r===void 0)return n.alpha>=1?tR(n.red,n.green,n.blue):"rgba("+n.red+","+n.green+","+n.blue+","+n.alpha+")"}throw new Go(7)}var dNe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},fNe=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},pNe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},mNe=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"};function Oc(n){if(typeof n!="object")throw new Go(8);if(fNe(n))return c1(n);if(dNe(n))return tR(n);if(mNe(n))return hNe(n);if(pNe(n))return uNe(n);throw new Go(8)}function R8(n,e,t){return function(){var i=t.concat(Array.prototype.slice.call(arguments));return i.length>=e?n.apply(this,i):R8(n,e,i)}}function ms(n){return R8(n,n.length,[])}function gNe(n,e){if(e==="transparent")return e;var t=Dc(e);return Oc(ti({},t,{hue:t.hue+parseFloat(n)}))}ms(gNe);function dp(n,e,t){return Math.max(n,Math.min(e,t))}function yNe(n,e){if(e==="transparent")return e;var t=Dc(e);return Oc(ti({},t,{lightness:dp(0,1,t.lightness-parseFloat(n))}))}ms(yNe);function vNe(n,e){if(e==="transparent")return e;var t=Dc(e);return Oc(ti({},t,{saturation:dp(0,1,t.saturation-parseFloat(n))}))}ms(vNe);function _Ne(n,e){if(e==="transparent")return e;var t=Dc(e);return Oc(ti({},t,{lightness:dp(0,1,t.lightness+parseFloat(n))}))}ms(_Ne);function xNe(n,e,t){if(e==="transparent")return t;if(t==="transparent")return e;if(n===0)return t;var r=Ku(e),i=ti({},r,{alpha:typeof r.alpha=="number"?r.alpha:1}),s=Ku(t),o=ti({},s,{alpha:typeof s.alpha=="number"?s.alpha:1}),a=i.alpha-o.alpha,l=parseFloat(n)*2-1,c=l*a===-1?l:l+a,u=1+l*a,h=(c/u+1)/2,d=1-h,f={red:Math.floor(i.red*h+o.red*d),green:Math.floor(i.green*h+o.green*d),blue:Math.floor(i.blue*h+o.blue*d),alpha:i.alpha*parseFloat(n)+o.alpha*(1-parseFloat(n))};return c1(f)}var SNe=ms(xNe),N8=SNe;function bNe(n,e){if(e==="transparent")return e;var t=Ku(e),r=typeof t.alpha=="number"?t.alpha:1,i=ti({},t,{alpha:dp(0,1,(r*100+parseFloat(n)*100)/100)});return c1(i)}var wNe=ms(bNe),TNe=wNe;function MNe(n,e){if(e==="transparent")return e;var t=Dc(e);return Oc(ti({},t,{saturation:dp(0,1,t.saturation+parseFloat(n))}))}ms(MNe);function ENe(n,e){return e==="transparent"?e:Oc(ti({},Dc(e),{hue:parseFloat(n)}))}ms(ENe);function ANe(n,e){return e==="transparent"?e:Oc(ti({},Dc(e),{lightness:parseFloat(n)}))}ms(ANe);function CNe(n,e){return e==="transparent"?e:Oc(ti({},Dc(e),{saturation:parseFloat(n)}))}ms(CNe);function RNe(n,e){return e==="transparent"?e:N8(parseFloat(n),"rgb(0, 0, 0)",e)}ms(RNe);function NNe(n,e){return e==="transparent"?e:N8(parseFloat(n),"rgb(255, 255, 255)",e)}ms(NNe);function PNe(n,e){if(e==="transparent")return e;var t=Ku(e),r=typeof t.alpha=="number"?t.alpha:1,i=ti({},t,{alpha:dp(0,1,+(r*100-parseFloat(n)*100).toFixed(2)/100)});return c1(i)}ms(PNe);var Pu=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Pu.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Pu.Bounce.In(n*2)*.5:Pu.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),Cm=function(){return performance.now()},P8=function(){function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var i=0,s=t;i<s.length;i++){var o=s[i];(e=o._group)===null||e===void 0||e.remove(o),o._group=this,this._tweens[o.getId()]=o,this._tweensAddedDuringUpdate[o.getId()]=o}},n.prototype.remove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,i=e;r<i.length;r++){var s=i[r];s._group=void 0,delete this._tweens[s.getId()],delete this._tweensAddedDuringUpdate[s.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,t){e===void 0&&(e=Cm()),t===void 0&&(t=!0);var r=Object.keys(this._tweens);if(r.length!==0)for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var s=this._tweens[r[i]],o=!t;s&&s.update(e,o)===!1&&!t&&this.remove(s)}r=Object.keys(this._tweensAddedDuringUpdate)}},n}(),Ed={Linear:function(n,e){var t=n.length-1,r=t*e,i=Math.floor(r),s=Ed.Utils.Linear;return e<0?s(n[0],n[1],r):e>1?s(n[t],n[t-1],t-r):s(n[i],n[i+1>t?t:i+1],r-i)},Bezier:function(n,e){for(var t=0,r=n.length-1,i=Math.pow,s=Ed.Utils.Bernstein,o=0;o<=r;o++)t+=i(1-e,r-o)*i(e,o)*n[o]*s(r,o);return t},CatmullRom:function(n,e){var t=n.length-1,r=t*e,i=Math.floor(r),s=Ed.Utils.CatmullRom;return n[0]===n[t]?(e<0&&(i=Math.floor(r=t*(1+e))),s(n[(i-1+t)%t],n[i],n[(i+1)%t],n[(i+2)%t],r-i)):e<0?n[0]-(s(n[0],n[0],n[1],n[1],-r)-n[0]):e>1?n[t]-(s(n[t],n[t],n[t-1],n[t-1],r-t)-n[t]):s(n[i?i-1:0],n[i],n[t<i+1?t:i+1],n[t<i+2?t:i+2],r-i)},Utils:{Linear:function(n,e,t){return(e-n)*t+n},Bernstein:function(n,e){var t=Ed.Utils.Factorial;return t(n)/t(e)/t(n-e)},Factorial:function(){var n=[1];return function(e){var t=1;if(n[e])return n[e];for(var r=e;r>1;r--)t*=r;return n[e]=t,t}}(),CatmullRom:function(n,e,t,r,i){var s=(t-n)*.5,o=(r-e)*.5,a=i*i,l=i*a;return(2*e-2*t+s+o)*l+(-3*e+3*t-2*s-o)*a+s*i+e}}},INe=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),nR=new P8,e3=function(){function n(e,t){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Pu.Linear.None,this._interpolationFunction=Ed.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=INe.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof t=="object"?(this._group=t,t.add(this)):t===!0&&(this._group=nR,nR.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,t){if(e===void 0&&(e=Cm()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var r in this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var s in this._valuesEnd)i[s]=this._valuesEnd[s];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,t,r,i,s){for(var o in r){var a=e[o],l=Array.isArray(a),c=l?"array":typeof a,u=!l&&Array.isArray(r[o]);if(!(c==="undefined"||c==="function")){if(u){var h=r[o];if(h.length===0)continue;for(var d=[a],f=0,p=h.length;f<p;f+=1){var g=this._handleRelativeValue(a,h[f]);if(isNaN(g)){u=!1,console.warn("Found invalid interpolation list. Skipping.");break}d.push(g)}u&&(r[o]=d)}if((c==="object"||l)&&a&&!u){t[o]=l?[]:{};var y=a;for(var m in y)t[o][m]=y[m];i[o]=l?[]:{};var h=r[o];if(!this._isDynamic){var _={};for(var m in h)_[m]=h[m];r[o]=h=_}this._setupProperties(y,t[o],h,i[o],s)}else(typeof t[o]>"u"||s)&&(t[o]=a),l||(t[o]*=1),u?i[o]=r[o].slice().reverse():i[o]=t[o]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=Cm()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=Cm()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=Pu.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=Ed.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,t){var r=this,i;if(e===void 0&&(e=Cm()),t===void 0&&(t=n.autoStartOnUpdate),this._isPaused)return!0;var s;if(!this._goToEnd&&!this._isPlaying)if(t)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=e-this._startTime,a=this._duration+((i=this._repeatDelayTime)!==null&&i!==void 0?i:this._delayTime),l=this._duration+this._repeat*a,c=function(){if(r._duration===0||o>l)return 1;var g=Math.trunc(o/a),y=o-g*a,m=Math.min(y/r._duration,1);return m===0&&o===r._duration?1:m},u=c(),h=this._easingFunction(u);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,u),this._duration===0||o>=this._duration)if(this._repeat>0){var d=Math.min(Math.trunc((o-this._duration)/a)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=d);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=a*d,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var f=0,p=this._chainedTweens.length;f<p;f++)this._chainedTweens[f].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,t,r,i){for(var s in r)if(t[s]!==void 0){var o=t[s]||0,a=r[s],l=Array.isArray(e[s]),c=Array.isArray(a),u=!l&&c;u?e[s]=this._interpolationFunction(a,i):typeof a=="object"&&a?this._updateProperties(e[s],o,a,i):(a=this._handleRelativeValue(o,a),typeof a=="number"&&(e[s]=o+(a-o)*i))}},n.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},n.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],r=this._valuesEnd[e];typeof r=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},n.autoStartOnUpdate=!1,n}(),Zo=nR;Zo.getAll.bind(Zo);Zo.removeAll.bind(Zo);Zo.add.bind(Zo);Zo.remove.bind(Zo);Zo.update.bind(Zo);function LNe(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}var DNe=`.scene-nav-info {
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
}

.scene-tooltip {
  top: 0;
  color: lavender;
  font-size: 15px;
}

.scene-nav-info, .scene-tooltip {
  position: absolute;
  font-family: sans-serif;
  pointer-events: none;
  user-select: none;
}

.scene-container canvas:focus {
  outline: none;
}`;LNe(DNe);function rR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ONe(n){if(Array.isArray(n))return n}function FNe(n){if(Array.isArray(n))return rR(n)}function kNe(n,e,t){return(e=HNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UNe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function BNe(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(t=t.call(n)).next,e!==0)for(;!(l=(r=s.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function zNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Ne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VNe(n,e){return ONe(n)||BNe(n,e)||I8(n,e)||zNe()}function cm(n){return FNe(n)||UNe(n)||I8(n)||$Ne()}function GNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function HNe(n){var e=GNe(n,"string");return typeof e=="symbol"?e:e+""}function I8(n,e){if(n){if(typeof n=="string")return rR(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?rR(n,e):void 0}}var Nn=window.THREE?window.THREE:{WebGLRenderer:yge,Scene:vge,PerspectiveCamera:As,Raycaster:aG,SRGBColorSpace:bs,TextureLoader:iG,Vector2:Ve,Vector3:Y,Box3:th,Color:Ot,Mesh:Ns,SphereGeometry:nG,MeshBasicMaterial:wP,BackSide:fi,EventDispatcher:Pc,MOUSE:Tr,Quaternion:So,Spherical:JA,Clock:oG},L8=GP({props:{width:{default:window.innerWidth,onChange:function(e,t,r){isNaN(e)&&(t.width=r)}},height:{default:window.innerHeight,onChange:function(e,t,r){isNaN(e)&&(t.height=r)}},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,t){t.hoverObj=null,t.toolTipElem&&(t.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{default:function(){return-1},triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){if(e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(s){return s.render(e.scene,e.camera)}),e.enablePointerInteraction){var t=null;if(e.hoverDuringDrag||!e.isPointerDragging){var r=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y).filter(function(s){return e.hoverFilter(s.object)}).sort(function(s,o){return e.hoverOrderComparator(s.object,o.object)}),i=r.length?r[0]:null;t=i?i.object:null,e.intersectionPoint=i?i.point:null}t!==e.hoverObj&&(e.onHover(t,e.hoverObj),e.toolTipElem.innerHTML=t&&$t(e.tooltipContent)(t)||"",e.hoverObj=t)}e.tweenGroup.update()}return this},getPointerPos:function(e){var t=e.pointerPos,r=t.x,i=t.y;return{x:r,y:i}},cameraPosition:function(e,t,r,i){var s=e.camera;if(t&&e.initialised){var o=t,a=r||{x:0,y:0,z:0};if(!i)u(o),h(a);else{var l=Object.assign({},s.position),c=d();e.tweenGroup.add(new e3(l).to(o,i).easing(Pu.Quadratic.Out).onUpdate(u).start()),e.tweenGroup.add(new e3(c).to(a,i/3).easing(Pu.Quadratic.Out).onUpdate(h).start())}return this}return Object.assign({},s.position,{lookAt:d()});function u(f){var p=f.x,g=f.y,y=f.z;p!==void 0&&(s.position.x=p),g!==void 0&&(s.position.y=g),y!==void 0&&(s.position.z=y)}function h(f){var p=new Nn.Vector3(f.x,f.y,f.z);e.controls.target?e.controls.target=p:s.lookAt(p)}function d(){return Object.assign(new Nn.Vector3(0,0,-1e3).applyQuaternion(s.quaternion).add(s.position))}},zoomToFit:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,i=arguments.length,s=new Array(i>3?i-3:0),o=3;o<i;o++)s[o-3]=arguments[o];return this.fitToBbox(this.getBbox.apply(this,s),t,r)},fitToBbox:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10,s=e.camera;if(t){var o=new Nn.Vector3(0,0,0),a=Math.max.apply(Math,cm(Object.entries(t).map(function(f){var p=VNe(f,2),g=p[0],y=p[1];return Math.max.apply(Math,cm(y.map(function(m){return Math.abs(o[g]-m)})))})))*2,l=(1-i*2/e.height)*s.fov,c=a/Math.atan(l*Math.PI/180),u=c/s.aspect,h=Math.max(c,u);if(h>0){var d=o.clone().sub(s.position).normalize().multiplyScalar(-h);this.cameraPosition(d,o,r)}}return this},getBbox:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},r=new Nn.Box3(new Nn.Vector3(0,0,0),new Nn.Vector3(0,0,0)),i=e.objects.filter(t);return i.length?(i.forEach(function(s){return r.expandByObject(s)}),Object.assign.apply(Object,cm(["x","y","z"].map(function(s){return kNe({},s,[r.min[s],r.max[s]])})))):null},getScreenCoords:function(e,t,r,i){var s=new Nn.Vector3(t,r,i);return s.project(this.camera()),{x:(s.x+1)*e.width/2,y:-(s.y-1)*e.height/2}},getSceneCoords:function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=new Nn.Vector2(t/e.width*2-1,-(r/e.height)*2+1),o=new Nn.Raycaster;return o.setFromCamera(s,e.camera),Object.assign({},o.ray.at(i,new Nn.Vector3))},intersectingObjects:function(e,t,r){var i=new Nn.Vector2(t/e.width*2-1,-(r/e.height)*2+1),s=new Nn.Raycaster;return s.params.Line.threshold=e.lineHoverPrecision,s.setFromCamera(i,e.camera),s.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new Nn.Scene,camera:new Nn.PerspectiveCamera,clock:new Nn.Clock,tweenGroup:new P8}},init:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.controlType,s=i===void 0?"trackball":i,o=r.useWebGPU,a=o===void 0?!1:o,l=r.rendererConfig,c=l===void 0?{}:l,u=r.extraRenderers,h=u===void 0?[]:u,d=r.waitForLoadComplete,f=d===void 0?!0:d;e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.className="scene-container",t.container.style.position="relative",t.container.appendChild(t.navInfo=document.createElement("div")),t.navInfo.className="scene-nav-info",t.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[s]||"",t.navInfo.style.display=t.showNavInfo?null:"none",t.toolTipElem=document.createElement("div"),t.toolTipElem.classList.add("scene-tooltip"),t.container.appendChild(t.toolTipElem),t.pointerPos=new Nn.Vector2,t.pointerPos.x=-2,t.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(p){return t.container.addEventListener(p,function(g){if(p==="pointerdown"&&(t.isPointerPressed=!0),!t.isPointerDragging&&g.type==="pointermove"&&(g.pressure>0||t.isPointerPressed)&&(g.pointerType!=="touch"||g.movementX===void 0||[g.movementX,g.movementY].some(function(_){return Math.abs(_)>1}))&&(t.isPointerDragging=!0),t.enablePointerInteraction){var y=m(t.container);t.pointerPos.x=g.pageX-y.left,t.pointerPos.y=g.pageY-y.top,t.toolTipElem.style.top="".concat(t.pointerPos.y,"px"),t.toolTipElem.style.left="".concat(t.pointerPos.x,"px"),t.toolTipElem.style.transform="translate(-".concat(t.pointerPos.x/t.width*100,"%, ").concat(t.height-t.pointerPos.y<100?"calc(-100% - 8px)":"21px",")")}function m(_){var v=_.getBoundingClientRect(),x=window.pageXOffset||document.documentElement.scrollLeft,b=window.pageYOffset||document.documentElement.scrollTop;return{top:v.top+b,left:v.left+x}}},{passive:!0})}),t.container.addEventListener("pointerup",function(p){t.isPointerPressed=!1,!(t.isPointerDragging&&(t.isPointerDragging=!1,!t.clickAfterDrag))&&requestAnimationFrame(function(){p.button===0&&t.onClick(t.hoverObj||null,p,t.intersectionPoint),p.button===2&&t.onRightClick&&t.onRightClick(t.hoverObj||null,p,t.intersectionPoint)})},{passive:!0,capture:!0}),t.container.addEventListener("contextmenu",function(p){t.onRightClick&&p.preventDefault()}),t.renderer=new(a?tRe:Nn.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},c)),t.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),t.container.appendChild(t.renderer.domElement),t.extraRenderers=h,t.extraRenderers.forEach(function(p){p.domElement.style.position="absolute",p.domElement.style.top="0px",p.domElement.style.pointerEvents="none",t.container.appendChild(p.domElement)}),t.postProcessingComposer=new XRe(t.renderer),t.postProcessingComposer.addPass(new KRe(t.scene,t.camera)),t.controls=new{trackball:rRe,orbit:_Re,fly:LRe}[s](t.camera,t.renderer.domElement),s==="fly"&&(t.controls.movementSpeed=300,t.controls.rollSpeed=Math.PI/6,t.controls.dragToLook=!0),(s==="trackball"||s==="orbit")&&(t.controls.minDistance=.1,t.controls.maxDistance=t.skyRadius,t.controls.addEventListener("start",function(){t.controlsEngaged=!0}),t.controls.addEventListener("change",function(){t.controlsEngaged&&(t.controlsDragging=!0)}),t.controls.addEventListener("end",function(){t.controlsEngaged=!1,t.controlsDragging=!1})),[t.renderer,t.postProcessingComposer].concat(cm(t.extraRenderers)).forEach(function(p){return p.setSize(t.width,t.height)}),t.camera.aspect=t.width/t.height,t.camera.updateProjectionMatrix(),t.camera.position.z=1e3,t.scene.add(t.skysphere=new Nn.Mesh),t.skysphere.visible=!1,t.loadComplete=t.scene.visible=!f,window.scene=t.scene},update:function(e,t){if(e.width&&e.height&&(t.hasOwnProperty("width")||t.hasOwnProperty("height"))&&(e.container.style.width="".concat(e.width,"px"),e.container.style.height="".concat(e.height,"px"),[e.renderer,e.postProcessingComposer].concat(cm(e.extraRenderers)).forEach(function(s){return s.setSize(e.width,e.height)}),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix()),t.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&t.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=e.skyRadius*2.5,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new Nn.SphereGeometry(e.skyRadius)),t.hasOwnProperty("backgroundColor")){var r=Ku(e.backgroundColor).alpha;r===void 0&&(r=1),e.renderer.setClearColor(new Nn.Color(TNe(1,e.backgroundColor)),r)}t.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new Nn.TextureLoader().load(e.backgroundImageUrl,function(s){s.colorSpace=Nn.SRGBColorSpace,e.skysphere.material=new Nn.MeshBasicMaterial({map:s,side:Nn.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&i()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&i())),t.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),t.hasOwnProperty("lights")&&((t.lights||[]).forEach(function(s){return e.scene.remove(s)}),e.lights.forEach(function(s){return e.scene.add(s)})),t.hasOwnProperty("objects")&&((t.objects||[]).forEach(function(s){return e.scene.remove(s)}),e.objects.forEach(function(s){return e.scene.add(s)}));function i(){e.loadComplete=e.scene.visible=!0}}});function WNe(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n))}}var jNe=`.graph-info-msg {
  top: 50%;
  width: 100%;
  text-align: center;
  color: lavender;
  opacity: 0.7;
  font-size: 22px;
  position: absolute;
  font-family: Sans-serif;
}

.scene-container .clickable {
  cursor: pointer;
}

.scene-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.scene-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}`;WNe(jNe);function iR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function qNe(n){if(Array.isArray(n))return iR(n)}function Py(n,e,t){return(e=QNe(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XNe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function KNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Av(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?t3(Object(t),!0).forEach(function(r){Py(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):t3(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function u1(n){return qNe(n)||XNe(n)||ZNe(n)||KNe()}function YNe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function QNe(n){var e=YNe(n,"string");return typeof e=="symbol"?e:e+""}function ZNe(n,e){if(n){if(typeof n=="string")return iR(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?iR(n,e):void 0}}function D8(n,e){var t=new e;return t._destructor&&t._destructor(),{linkProp:function(i){return{default:t[i](),onChange:function(o,a){a[n][i](o)},triggerUpdate:!1}},linkMethod:function(i){return function(s){for(var o=s[n],a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];var u=o[i].apply(o,l);return u===o?this:u}}}}var fM=window.THREE?window.THREE:{AmbientLight:Hge,DirectionalLight:Gge,Vector3:Y,REVISION:Ib},JNe=170,O8=D8("forceGraph",JG),ePe=Object.assign.apply(Object,u1(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return Py({},n,O8.linkProp(n))}))),tPe=Object.assign.apply(Object,u1(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return Py({},n,O8.linkMethod(n))}))),__=D8("renderObjs",L8),nPe=Object.assign.apply(Object,u1(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(n){return Py({},n,__.linkProp(n))}))),rPe=Object.assign.apply(Object,u1(["lights","cameraPosition","postProcessingComposer"].map(function(n){return Py({},n,__.linkMethod(n))})).concat([{graph2ScreenCoords:__.linkMethod("getScreenCoords"),screen2GraphCoords:__.linkMethod("getSceneCoords")}])),iPe=GP({props:Av(Av({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,t){return t.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,t){var r=t.renderObjs.controls();r&&(r.enabled=e,e&&r.domElement&&r.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},ePe),nPe),methods:Av(Av({zoomToFit:function(e,t,r){for(var i,s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return e.renderObjs.fitToBbox((i=e.forceGraph).getGraphBbox.apply(i,o),t,r),this},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},tPe),rPe),stateInit:function(e){var t=e.controlType,r=e.rendererConfig,i=e.extraRenderers,s=new JG;return{forceGraph:s,renderObjs:L8({controlType:t,rendererConfig:r,extraRenderers:i}).objects([s]).lights([new fM.AmbientLight(13421772,Math.PI),new fM.DirectionalLight(16777215,.6*Math.PI)])}},init:function(e,t){e.innerHTML="",e.appendChild(t.container=document.createElement("div")),t.container.style.position="relative";var r=document.createElement("div");t.container.appendChild(r),t.renderObjs(r);var i=t.renderObjs.camera(),s=t.renderObjs.renderer(),o=t.renderObjs.controls();o.enabled=!!t.enableNavigationControls,t.lastSetCameraZ=i.position.z;var a;t.container.appendChild(a=document.createElement("div")),a.className="graph-info-msg",a.textContent="",t.forceGraph.onLoading(function(){a.textContent="Loading..."}).onFinishLoading(function(){a.textContent=""}).onUpdate(function(){t.graphData=t.forceGraph.graphData(),i.position.x===0&&i.position.y===0&&i.position.z===t.lastSetCameraZ&&t.graphData.nodes.length&&(i.lookAt(t.forceGraph.position),t.lastSetCameraZ=i.position.z=Math.cbrt(t.graphData.nodes.length)*JNe)}).onFinishUpdate(function(){if(t._dragControls){var l=t.graphData.nodes.find(function(u){return u.__initialFixedPos&&!u.__disposeControlsAfterDrag});l?l.__disposeControlsAfterDrag=!0:t._dragControls.dispose(),t._dragControls=void 0}if(t.enableNodeDrag&&t.enablePointerInteraction&&t.forceEngine==="d3"){var c=t._dragControls=new Wge(t.graphData.nodes.map(function(u){return u.__threeObj}).filter(function(u){return u}),i,s.domElement);c.addEventListener("dragstart",function(u){o.enabled=!1,u.object.__initialPos=u.object.position.clone(),u.object.__prevPos=u.object.position.clone();var h=ga(u.object).__data;!h.__initialFixedPos&&(h.__initialFixedPos={fx:h.fx,fy:h.fy,fz:h.fz}),!h.__initialPos&&(h.__initialPos={x:h.x,y:h.y,z:h.z}),["x","y","z"].forEach(function(d){return h["f".concat(d)]=h[d]}),s.domElement.classList.add("grabbable")}),c.addEventListener("drag",function(u){var h=ga(u.object);if(!u.object.hasOwnProperty("__graphObjType")){var d=u.object.__initialPos,f=u.object.__prevPos,p=u.object.position;h.position.add(p.clone().sub(f)),f.copy(p),p.copy(d)}var g=h.__data,y=h.position,m={x:y.x-g.x,y:y.y-g.y,z:y.z-g.z};["x","y","z"].forEach(function(_){return g["f".concat(_)]=g[_]=y[_]}),t.forceGraph.d3AlphaTarget(.3).resetCountdown(),g.__dragged=!0,t.onNodeDrag(g,m)}),c.addEventListener("dragend",function(u){delete u.object.__initialPos,delete u.object.__prevPos;var h=ga(u.object).__data;h.__disposeControlsAfterDrag&&(c.dispose(),delete h.__disposeControlsAfterDrag);var d=h.__initialFixedPos,f=h.__initialPos,p={x:f.x-h.x,y:f.y-h.y,z:f.z-h.z};d&&(["x","y","z"].forEach(function(g){var y="f".concat(g);d[y]===void 0&&delete h[y]}),delete h.__initialFixedPos,delete h.__initialPos,h.__dragged&&(delete h.__dragged,t.onNodeDragEnd(h,p))),t.forceGraph.d3AlphaTarget(0).resetCountdown(),t.enableNavigationControls&&(o.enabled=!0,o.domElement&&o.domElement.ownerDocument&&o.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),s.domElement.classList.remove("grabbable")})}}),fM.REVISION<155&&(t.renderObjs.renderer().useLegacyLights=!1),t.renderObjs.hoverOrderComparator(function(l,c){var u=ga(l);if(!u)return 1;var h=ga(c);if(!h)return-1;var d=function(p){return p.__graphObjType==="node"};return d(h)-d(u)}).tooltipContent(function(l){var c=ga(l);return c&&$t(t["".concat(c.__graphObjType,"Label")])(c.__data)||""}).hoverDuringDrag(!1).onHover(function(l){var c=ga(l);if(c!==t.hoverObj){var u=t.hoverObj?t.hoverObj.__graphObjType:null,h=t.hoverObj?t.hoverObj.__data:null,d=c?c.__graphObjType:null,f=c?c.__data:null;if(u&&u!==d){var p=t["on".concat(u==="node"?"Node":"Link","Hover")];p&&p(null,h)}if(d){var g=t["on".concat(d==="node"?"Node":"Link","Hover")];g&&g(f,u===d?h:null)}s.domElement.classList[c&&t["on".concat(d==="node"?"Node":"Link","Click")]||!c&&t.onBackgroundClick?"add":"remove"]("clickable"),t.hoverObj=c}}).clickAfterDrag(!1).onClick(function(l,c){var u=ga(l);if(u){var h=t["on".concat(u.__graphObjType==="node"?"Node":"Link","Click")];h&&h(u.__data,c)}else t.onBackgroundClick&&t.onBackgroundClick(c)}).onRightClick(function(l,c){var u=ga(l);if(u){var h=t["on".concat(u.__graphObjType==="node"?"Node":"Link","RightClick")];h&&h(u.__data,c)}else t.onBackgroundRightClick&&t.onBackgroundRightClick(c)}),this._animationCycle()}});function ga(n){for(var e=n;e&&!e.hasOwnProperty("__graphObjType");)e=e.parent;return e}const h1={width:ne.number,height:ne.number,graphData:ne.shape({nodes:ne.arrayOf(ne.object).isRequired,links:ne.arrayOf(ne.object).isRequired}),backgroundColor:ne.string,nodeRelSize:ne.number,nodeId:ne.string,nodeLabel:ne.oneOfType([ne.string,ne.func]),nodeVal:ne.oneOfType([ne.number,ne.string,ne.func]),nodeVisibility:ne.oneOfType([ne.bool,ne.string,ne.func]),nodeColor:ne.oneOfType([ne.string,ne.func]),nodeAutoColorBy:ne.oneOfType([ne.string,ne.func]),onNodeHover:ne.func,onNodeClick:ne.func,linkSource:ne.string,linkTarget:ne.string,linkLabel:ne.oneOfType([ne.string,ne.func]),linkVisibility:ne.oneOfType([ne.bool,ne.string,ne.func]),linkColor:ne.oneOfType([ne.string,ne.func]),linkAutoColorBy:ne.oneOfType([ne.string,ne.func]),linkWidth:ne.oneOfType([ne.number,ne.string,ne.func]),linkCurvature:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalArrowLength:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalArrowColor:ne.oneOfType([ne.string,ne.func]),linkDirectionalArrowRelPos:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalParticles:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalParticleSpeed:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalParticleWidth:ne.oneOfType([ne.number,ne.string,ne.func]),linkDirectionalParticleColor:ne.oneOfType([ne.string,ne.func]),onLinkHover:ne.func,onLinkClick:ne.func,dagMode:ne.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:ne.number,dagNodeFilter:ne.func,onDagError:ne.func,d3AlphaMin:ne.number,d3AlphaDecay:ne.number,d3VelocityDecay:ne.number,warmupTicks:ne.number,cooldownTicks:ne.number,cooldownTime:ne.number,onEngineTick:ne.func,onEngineStop:ne.func,getGraphBbox:ne.func},F8={zoomToFit:ne.func,onNodeRightClick:ne.func,onNodeDrag:ne.func,onNodeDragEnd:ne.func,onLinkRightClick:ne.func,linkHoverPrecision:ne.number,onBackgroundClick:ne.func,onBackgroundRightClick:ne.func,enablePointerInteraction:ne.bool,enableNodeDrag:ne.bool},F2={showNavInfo:ne.bool,nodeOpacity:ne.number,nodeResolution:ne.number,nodeThreeObject:ne.oneOfType([ne.object,ne.string,ne.func]),nodeThreeObjectExtend:ne.oneOfType([ne.bool,ne.string,ne.func]),linkOpacity:ne.number,linkResolution:ne.number,linkCurveRotation:ne.oneOfType([ne.number,ne.string,ne.func]),linkMaterial:ne.oneOfType([ne.object,ne.string,ne.func]),linkThreeObject:ne.oneOfType([ne.object,ne.string,ne.func]),linkThreeObjectExtend:ne.oneOfType([ne.bool,ne.string,ne.func]),linkPositionUpdate:ne.func,linkDirectionalArrowResolution:ne.number,linkDirectionalParticleResolution:ne.number,forceEngine:ne.oneOf(["d3","ngraph"]),ngraphPhysics:ne.object,numDimensions:ne.oneOf([1,2,3])};Object.assign({},h1,F8,{linkLineDash:ne.oneOfType([ne.arrayOf(ne.number),ne.string,ne.func]),nodeCanvasObjectMode:ne.oneOfType([ne.string,ne.func]),nodeCanvasObject:ne.func,nodePointerAreaPaint:ne.func,linkCanvasObjectMode:ne.oneOfType([ne.string,ne.func]),linkCanvasObject:ne.func,linkPointerAreaPaint:ne.func,autoPauseRedraw:ne.bool,minZoom:ne.number,maxZoom:ne.number,enableZoomInteraction:ne.oneOfType([ne.bool,ne.func]),enablePanInteraction:ne.oneOfType([ne.bool,ne.func]),onZoom:ne.func,onZoomEnd:ne.func,onRenderFramePre:ne.func,onRenderFramePost:ne.func});const sPe=Object.assign({},h1,F8,F2,{enableNavigationControls:ne.bool,controlType:ne.oneOf(["trackball","orbit","fly"]),rendererConfig:ne.object,extraRenderers:ne.arrayOf(ne.shape({render:ne.func.isRequired}))});Object.assign({},h1,F2,{nodeDesc:ne.oneOfType([ne.string,ne.func]),linkDesc:ne.oneOfType([ne.string,ne.func])});Object.assign({},h1,F2,{markerAttrs:ne.object,yOffset:ne.number,glScale:ne.number});const k2=tue(iPe,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","cameraPosition","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords","postProcessingComposer","lights","scene","camera","renderer","controls","refresh"],initPropNames:["controlType","rendererConfig","extraRenderers"]});k2.displayName="ForceGraph3D";k2.propTypes=sPe;const oPe=()=>{const n=P.useRef(),{openModal:e}=cV(),{onAlertOpen:t}=oV(),{language:r}=hP(),{searchParams:i}=dP(),{data:s,isLoading:o}=_ne({language:r}),[a,l]=P.useState(gl),c=P.useCallback(f=>{try{let p=[...gl.nodes];f&&(p=[...p,...Ace(f)]);const g=new Set(p.map(_=>_.id)),m=[...gl.links,...Oce.links].map(_=>({..._,source:_.source.toString(),target:_.target.toString()})).filter(_=>g.has(_.source)&&g.has(_.target));return{nodes:p,links:[...gl.links,...m]}}catch(p){return console.error("Error processing graph data:",p),{nodes:gl.nodes,links:gl.links}}},[]);P.useEffect(()=>{if(o){l({nodes:gl.nodes,links:gl.links});return}const f=c(s);l(f)},[o,s,c]);const u=P.useCallback(({img:f})=>{const p=new iG().load(`${f}`);p.colorSpace=bs;const g=new QV({map:p}),y=new xge(g);return y.scale.set(12,12,12),y},[]),h=P.useCallback(()=>{var g,y;if(!((g=a==null?void 0:a.nodes)!=null&&g.length)||!i)return;const f=a.nodes.find(m=>{if(!(m!=null&&m.name))return!1;const _=hO(m.name)?m.name.toLowerCase():m.name,v=hO(i)?i.toLowerCase():i;return _===v});if(!f){t({message:"  !",alertType:Ng.ERROR});return}const p=1+Fce/Math.hypot(f.x||0,f.y||0,f.z||0);(y=n.current)==null||y.cameraPosition({x:(f.x||0)*p,y:(f.y||0)*p,z:(f.z||0)*p},f,2e3)},[a,i]),d=P.useCallback(f=>{f!=null&&f.id?e(f.id):t({message:"    !  .",alertType:Ng.ERROR})},[e]);return P.useEffect(()=>{var f;i&&((f=a==null?void 0:a.nodes)!=null&&f.length)&&h()},[i,a,h]),P.useEffect(()=>{var p;const f=n.current;if(!o&&((p=a==null?void 0:a.nodes)==null?void 0:p.length)>0&&f){const g=setTimeout(()=>{f.refresh()},100);return()=>clearTimeout(g)}},[a,o]),P.useEffect(()=>{}),q.jsx(k2,{ref:n,graphData:a,nodeThreeObject:u,backgroundColor:"#ffffff00",onNodeClick:d,linkOpacity:1,numDimensions:3,linkAutoColorBy:"#888888"})},aPe=({})=>q.jsxs("div",{style:{height:"100vh"},children:[q.jsx(Pce,{}),q.jsx(oPe,{})]}),lPe=()=>{const{alertOption:n,onAlertClose:e}=oV();return q.jsx(JZ,{open:n.isOpen,autoHideDuration:n.hideDuration,onClose:e,children:q.jsx(XK,{severity:n.type,variant:"filled",sx:{width:"100%",color:"white"},children:n.message})})},cPe=()=>q.jsxs(q.Fragment,{children:[q.jsx(aPe,{}),q.jsx(Mce,{}),q.jsx(lPe,{})]}),uPe=oy({components:{MuiChip:{styleOverrides:{root:{backgroundColor:yl.bgCardChip,color:yl.text,variants:[{props:{itemType:"detail"},style:{backgroundColor:yl.bgDetailChip,color:yl.text}}]}}}},palette:{mode:"light",primary:{main:yl.bgDetailChip,contrastText:yl.text},secondary:{main:yl.grey,contrastText:yl.text}}}),hPe=oy({components:{MuiChip:{styleOverrides:{root:{backgroundColor:vl.bgCardChip,color:vl.text,variants:[{props:{itemType:"detail"},style:{backgroundColor:vl.bgDetailChip,color:vl.text}}]}}}},palette:{mode:"dark",primary:{main:vl.primary,contrastText:vl.text},secondary:{main:vl.bgDetailChip,contrastText:vl.text}}}),dPe=document.getElementById("root"),fPe=pM.createRoot(dPe),pPe=()=>{const n=dce(aV),e=new ene;return q.jsx(tK,{theme:n===Ud.LIGHT?uPe:hPe,children:q.jsxs(sne,{client:e,children:[q.jsx(PY,{}),q.jsx(cPe,{})]})})};fPe.render(q.jsx(Et.StrictMode,{children:q.jsx(hce,{children:q.jsx(pPe,{})})}));
